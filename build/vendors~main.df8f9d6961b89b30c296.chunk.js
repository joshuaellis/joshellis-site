(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"0091fa8d74c45e0dd589":function(e,t){t.f={}.propertyIsEnumerable},"00c22f5845a5f3d8fe8c":function(e,t,n){var r=n("1139de1233fd67f45bd7"),i=n("1ae513448994dc2a1e86").set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n("0116c75136b233002fb9")(a);e.exports=function(){var e,t,n,u=function(){var r,i;for(c&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(u)}}else n=function(){i.call(r,u)};else{var h=!0,d=document.createTextNode("");new o(u).observe(d,{characterData:!0}),n=function(){d.data=h=!h}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},"0116c75136b233002fb9":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"0179c8ca409e9ba69a5f":function(e,t,n){"use strict";
/** @license React v16.5.2
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){Object.defineProperty(t,"__esModule",{value:!0});var e="function"==typeof Symbol&&Symbol.for,n=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,i=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,c=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,l=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.placeholder"):60113;function d(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:var h=e.type;switch(h){case u:case i:case a:case o:return h;default:var d=h&&h.$$typeof;switch(d){case c:case l:case s:return d;default:return t}}case r:return t}}}var f=u,p=c,m=s,v=n,g=l,y=i,b=a,x=r,w=o;t.typeOf=d,t.AsyncMode=f,t.ContextConsumer=p,t.ContextProvider=m,t.Element=v,t.ForwardRef=g,t.Fragment=y,t.Profiler=b,t.Portal=x,t.StrictMode=w,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===u||e===a||e===o||e===h||"object"==typeof e&&null!==e&&("function"==typeof e.then||e.$$typeof===s||e.$$typeof===c||e.$$typeof===l)},t.isAsyncMode=function(e){return d(e)===u},t.isContextConsumer=function(e){return d(e)===c},t.isContextProvider=function(e){return d(e)===s},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return d(e)===l},t.isFragment=function(e){return d(e)===i},t.isProfiler=function(e){return d(e)===a},t.isPortal=function(e){return d(e)===r},t.isStrictMode=function(e){return d(e)===o}})()},"01a9501d9e4a26a76a44":function(e,t,n){(e.exports=n("c138e55a31f3f8960e99")(!1)).push([e.i,'/*! sanitize.css v4.1.0 | CC0 License | github.com/jonathantneal/sanitize.css */\n\n/* Display definitions\n   ========================================================================== */\n\n/**\n * Add the correct display in IE 9-.\n * 1. Add the correct display in Edge, IE, and Firefox.\n * 2. Add the correct display in IE.\n */\n\narticle,\naside,\ndetails, /* 1 */\nfigcaption,\nfigure,\nfooter,\nheader,\nmain, /* 2 */\nmenu,\nnav,\nsection,\nsummary { /* 1 */\n\tdisplay: block;\n}\n\n/**\n * Add the correct display in IE 9-.\n */\n\naudio,\ncanvas,\nprogress,\nvideo {\n\tdisplay: inline-block;\n}\n\n/**\n * Add the correct display in iOS 4-7.\n */\n\naudio:not([controls]) {\n\tdisplay: none;\n\theight: 0;\n}\n\n/**\n * Add the correct display in IE 10-.\n * 1. Add the correct display in IE.\n */\n\ntemplate, /* 1 */\n[hidden] {\n\tdisplay: none;\n}\n\n/* Elements of HTML (https://www.w3.org/TR/html5/semantics.html)\n   ========================================================================== */\n\n/**\n * 1. Remove repeating backgrounds in all browsers (opinionated).\n * 2. Add box sizing inheritence in all browsers (opinionated).\n */\n\n*,\n::before,\n::after {\n\tbackground-repeat: no-repeat; /* 1 */\n\tbox-sizing: inherit; /* 2 */\n}\n\n/**\n * 1. Add text decoration inheritance in all browsers (opinionated).\n * 2. Add vertical alignment inheritence in all browsers (opinionated).\n */\n\n::before,\n::after {\n\ttext-decoration: inherit; /* 1 */\n\tvertical-align: inherit; /* 2 */\n}\n\n/**\n * 1. Add border box sizing in all browsers (opinionated).\n * 2. Add the default cursor in all browsers (opinionated).\n * 3. Add a flattened line height in all browsers (opinionated).\n * 4. Prevent font size adjustments after orientation changes in IE and iOS.\n */\n\nhtml {\n\tbox-sizing: border-box; /* 1 */\n\tcursor: default; /* 2 */\n\tfont-family: sans-serif; /* 3 */\n\tline-height: 1.5; /* 3 */\n\t-ms-text-size-adjust: 100%; /* 4 */\n\t-webkit-text-size-adjust: 100%; /* 5 */\n}\n\n/* Sections (https://www.w3.org/TR/html5/sections.html)\n   ========================================================================== */\n\n/**\n * Remove the margin in all browsers (opinionated).\n */\n\nbody {\n\tmargin: 0;\n}\n\n/**\n * Correct the font sizes and margins on `h1` elements within\n * `section` and `article` contexts in Chrome, Firefox, and Safari.\n */\n\nh1 {\n\tfont-size: 2em;\n\tmargin: .67em 0;\n}\n\n/* Grouping content (https://www.w3.org/TR/html5/grouping-content.html)\n   ========================================================================== */\n\n/**\n * 1. Correct font sizing inheritance and scaling in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\ncode,\nkbd,\npre,\nsamp {\n\tfont-family: monospace, monospace; /* 1 */\n\tfont-size: 1em; /* 2 */\n}\n\n/**\n * 1. Correct the height in Firefox.\n * 2. Add visible overflow in Edge and IE.\n */\n\nhr {\n\theight: 0; /* 1 */\n\toverflow: visible; /* 2 */\n}\n\n/**\n * Remove the list style on navigation lists in all browsers (opinionated).\n */\n\nnav ol,\nnav ul {\n\tlist-style: none;\n}\n\n/* Text-level semantics\n   ========================================================================== */\n\n/**\n * 1. Add a bordered underline effect in all browsers.\n * 2. Remove text decoration in Firefox 40+.\n */\n\nabbr[title] {\n\tborder-bottom: 1px dotted; /* 1 */\n\ttext-decoration: none; /* 2 */\n}\n\n/**\n * Prevent the duplicate application of `bolder` by the next rule in Safari 6.\n */\n\nb,\nstrong {\n\tfont-weight: inherit;\n}\n\n/**\n * Add the correct font weight in Chrome, Edge, and Safari.\n */\n\nb,\nstrong {\n\tfont-weight: bolder;\n}\n\n/**\n * Add the correct font style in Android 4.3-.\n */\n\ndfn {\n\tfont-style: italic;\n}\n\n/**\n * Add the correct colors in IE 9-.\n */\n\nmark {\n\tbackground-color: #ffff00;\n\tcolor: #000000;\n}\n\n/**\n * Add the correct vertical alignment in Chrome, Firefox, and Opera.\n */\n\nprogress {\n\tvertical-align: baseline;\n}\n\n/**\n * Correct the font size in all browsers.\n */\n\nsmall {\n\tfont-size: 83.3333%;\n}\n\n/**\n * Change the positioning on superscript and subscript elements\n * in all browsers (opinionated).\n * 1. Correct the font size in all browsers.\n */\n\nsub,\nsup {\n\tfont-size: 83.3333%; /* 1 */\n\tline-height: 0;\n\tposition: relative;\n\tvertical-align: baseline;\n}\n\nsub {\n\tbottom: -.25em;\n}\n\nsup {\n\ttop: -.5em;\n}\n\n/*\n * Remove the text shadow on text selections (opinionated).\n * 1. Restore the coloring undone by defining the text shadow (opinionated).\n */\n\n::-moz-selection {\n\tbackground-color: #b3d4fc; /* 1 */\n\tcolor: #000000; /* 1 */\n\ttext-shadow: none;\n}\n\n::selection {\n\tbackground-color: #b3d4fc; /* 1 */\n\tcolor: #000000; /* 1 */\n\ttext-shadow: none;\n}\n\n/* Embedded content (https://www.w3.org/TR/html5/embedded-content-0.html)\n   ========================================================================== */\n\n/*\n * Change the alignment on media elements in all browers (opinionated).\n */\n\naudio,\ncanvas,\niframe,\nimg,\nsvg,\nvideo {\n\tvertical-align: middle;\n}\n\n/**\n * Remove the border on images inside links in IE 10-.\n */\n\nimg {\n\tborder-style: none;\n}\n\n/**\n * Change the fill color to match the text color in all browsers (opinionated).\n */\n\nsvg {\n\tfill: currentColor;\n}\n\n/**\n * Hide the overflow in IE.\n */\n\nsvg:not(:root) {\n\toverflow: hidden;\n}\n\n/* Links (https://www.w3.org/TR/html5/links.html#links)\n   ========================================================================== */\n\n/**\n * 1. Remove the gray background on active links in IE 10.\n * 2. Remove the gaps in underlines in iOS 8+ and Safari 8+.\n */\n\na {\n\tbackground-color: transparent; /* 1 */\n\t-webkit-text-decoration-skip: objects; /* 2 */\n}\n\n/**\n * Remove the outline when hovering in all browsers (opinionated).\n */\n\na:hover {\n\toutline-width: 0;\n}\n\n/* Tabular data (https://www.w3.org/TR/html5/tabular-data.html)\n   ========================================================================== */\n\n/*\n * Remove border spacing in all browsers (opinionated).\n */\n\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n\n/* transform-style:  (https://www.w3.org/TR/html5/forms.html)\n   ========================================================================== */\n\n/**\n * 1. Remove the default styling in all browsers (opinionated).\n * 3. Remove the margin in Firefox and Safari.\n */\n\nbutton,\ninput,\nselect,\ntextarea {\n\tbackground-color: transparent; /* 1 */\n\tborder-style: none; /* 1 */\n\tcolor: inherit; /* 1 */\n\tfont-size: 1em; /* 1 */\n\tmargin: 0; /* 3 */\n}\n\n/**\n * Correct the overflow in IE.\n * 1. Correct the overflow in Edge.\n */\n\nbutton,\ninput { /* 1 */\n\toverflow: visible;\n}\n\n/**\n * Remove the inheritance in Edge, Firefox, and IE.\n * 1. Remove the inheritance in Firefox.\n */\n\nbutton,\nselect { /* 1 */\n\ttext-transform: none;\n}\n\n/**\n * 1. Prevent the WebKit bug where (2) destroys native `audio` and `video`\n *    controls in Android 4.\n * 2. Correct the inability to style clickable types in iOS and Safari.\n */\n\nbutton,\nhtml [type="button"], /* 1 */\n[type="reset"],\n[type="submit"] {\n\t-webkit-appearance: button; /* 2 */\n}\n\n/**\n * Remove the inner border and padding in Firefox.\n */\n\n::-moz-focus-inner {\n\tborder-style: none;\n\tpadding: 0;\n}\n\n/**\n * Correct the focus styles unset by the previous rule.\n */\n\n:-moz-focusring {\n\toutline: 1px dotted ButtonText;\n}\n\n/**\n * Correct the border, margin, and padding in all browsers.\n */\n\nfieldset {\n\tborder: 1px solid #c0c0c0;\n\tmargin: 0 2px;\n\tpadding: .35em .625em .75em;\n}\n\n/**\n * 1. Correct the text wrapping in Edge and IE.\n * 2. Remove the padding so developers are not caught out when they zero out\n *    `fieldset` elements in all browsers.\n */\n\nlegend {\n\tdisplay: table; /* 1 */\n\tmax-width: 100%; /* 1 */\n\tpadding: 0; /* 2 */\n\twhite-space: normal; /* 1 */\n}\n\n/**\n * 1. Remove the vertical scrollbar in IE.\n * 2. Change the resize direction on textareas in all browsers (opinionated).\n */\n\ntextarea {\n\toverflow: auto; /* 1 */\n\tresize: vertical; /* 2 */\n}\n\n/**\n * Remove the padding in IE 10-.\n */\n\n[type="checkbox"],\n[type="radio"] {\n\tpadding: 0;\n}\n\n/**\n * Correct the cursor style on increment and decrement buttons in Chrome.\n */\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n\theight: auto;\n}\n\n/**\n * 1. Correct the odd appearance in Chrome and Safari.\n * 2. Correct the outline style in Safari.\n */\n\n[type="search"] {\n\t-webkit-appearance: textfield; /* 1 */\n\toutline-offset: -2px; /* 2 */\n}\n\n/**\n * Remove the inner padding and cancel buttons in Chrome and Safari for OS X.\n */\n\n::-webkit-search-cancel-button,\n::-webkit-search-decoration {\n\t-webkit-appearance: none;\n}\n\n/**\n * Correct the text style on placeholders in Chrome, Edge, and Safari.\n */\n\n::-webkit-input-placeholder {\n\tcolor: inherit;\n\topacity: .54;\n}\n\n/**\n * 1. Correct the inability to style clickable types in iOS and Safari.\n * 2. Change font properties to `inherit` in Safari.\n */\n\n::-webkit-file-upload-button {\n\t-webkit-appearance: button; /* 1 */\n\tfont: inherit; /* 2 */\n}\n\n/* WAI-ARIA (https://www.w3.org/TR/html5/dom.html#wai-aria)\n   ========================================================================== */\n\n/**\n * Change the cursor on busy elements (opinionated).\n */\n\n[aria-busy="true"] {\n\tcursor: progress;\n}\n\n/*\n * Change the cursor on control elements (opinionated).\n */\n\n[aria-controls] {\n\tcursor: pointer;\n}\n\n/*\n * Change the cursor on disabled, not-editable, or otherwise\n * inoperable elements (opinionated).\n */\n\n[aria-disabled] {\n\tcursor: default;\n}\n\n/* User interaction (https://www.w3.org/TR/html5/editing.html)\n   ========================================================================== */\n\n/*\n * Remove the tapping delay on clickable elements (opinionated).\n * 1. Remove the tapping delay in IE 10.\n */\n\na,\narea,\nbutton,\ninput,\nlabel,\nselect,\ntextarea,\n[tabindex] {\n\t-ms-touch-action: manipulation; /* 1 */\n\ttouch-action: manipulation;\n}\n\n/*\n * Change the display on visually hidden accessible elements (opinionated).\n */\n\n[hidden][aria-hidden="false"] {\n\tclip: rect(0, 0, 0, 0);\n\tdisplay: inherit;\n\tposition: absolute;\n}\n\n[hidden][aria-hidden="false"]:focus {\n\tclip: auto;\n}\n',""])},"02fcd2201285b358795d":function(e,t,n){"use strict";if(n("5975c7ea3ecd56e534e3")){var r=n("46a1a30d151cac60057c"),i=n("1139de1233fd67f45bd7"),o=n("7a7739dd8a198a2cfcb5"),a=n("2d13d93c336705cd8ff9"),s=n("622bea1a0aa515bde59f"),c=n("41f6983f842d46fa6592"),u=n("0e717e1f47872428608d"),l=n("fd8b6034a9a06242cc87"),h=n("9d5592e83ab7f3d08974"),d=n("5f25c015bbbf9d42c661"),f=n("503a0df91bcab33c39b8"),p=n("1f3157d073736826d4fa"),m=n("ca19e32ab6ee3b3692aa"),v=n("2dc5be6768ca6c7f0d4d"),g=n("23d432718b3e8ce32362"),y=n("4ef7a75a1d1957a7c5c0"),b=n("d34390b928ecadc11dc8"),x=n("32b716d95af2fd3c5c23"),w=n("a459ab805827640a27e8"),_=n("d394d0a4c1838202489d"),S=n("71d3ec5bd65418e28ebc"),M=n("ef09ce044ac3210bc947"),T=n("12323e1413cbffdabe02"),A=n("a9e0e4b5ca884ed0dd59").f,E=n("f88518adc3004bf8d923"),C=n("273d2eedcd369c189e70"),P=n("621a65702ee1a566fd32"),L=n("ecd0e0fb36455021f082"),O=n("2076e982c14c41925fb4"),N=n("8b246eab22bc34690d38"),R=n("307014e72ed12da69e15"),I=n("224ae09e536c09e69a0a"),D=n("574ea81f94fc0b2f332a"),F=n("89a21af31babcdc56725"),k=n("03192b087bb464f059c0"),U=n("06b2b473e53cc019ca74"),B=n("1b01d0e59d3af79760a0"),z=n("61fcea04092a9580d371"),j=B.f,V=z.f,G=i.RangeError,W=i.TypeError,H=i.Uint8Array,X=Array.prototype,q=c.ArrayBuffer,Y=c.DataView,J=L(0),Q=L(2),Z=L(3),K=L(4),$=L(5),ee=L(6),te=O(!0),ne=O(!1),re=R.values,ie=R.keys,oe=R.entries,ae=X.lastIndexOf,se=X.reduce,ce=X.reduceRight,ue=X.join,le=X.sort,he=X.slice,de=X.toString,fe=X.toLocaleString,pe=P("iterator"),me=P("toStringTag"),ve=C("typed_constructor"),ge=C("def_constructor"),ye=s.CONSTR,be=s.TYPED,xe=s.VIEW,we=L(1,function(e,t){return Ae(N(e,e[ge]),t)}),_e=o(function(){return 1===new H(new Uint16Array([1]).buffer)[0]}),Se=!!H&&!!H.prototype.set&&o(function(){new H(1).set({})}),Me=function(e,t){var n=p(e);if(n<0||n%t)throw G("Wrong offset!");return n},Te=function(e){if(w(e)&&be in e)return e;throw W(e+" is not a typed array!")},Ae=function(e,t){if(!(w(e)&&ve in e))throw W("It is not a typed array constructor!");return new e(t)},Ee=function(e,t){return Ce(N(e,e[ge]),t)},Ce=function(e,t){for(var n=0,r=t.length,i=Ae(e,r);r>n;)i[n]=t[n++];return i},Pe=function(e,t,n){j(e,t,{get:function(){return this._d[n]}})},Le=function(e){var t,n,r,i,o,a,s=_(e),c=arguments.length,l=c>1?arguments[1]:void 0,h=void 0!==l,d=E(s);if(void 0!=d&&!S(d)){for(a=d.call(s),r=[],t=0;!(o=a.next()).done;t++)r.push(o.value);s=r}for(h&&c>2&&(l=u(l,arguments[2],2)),t=0,n=m(s.length),i=Ae(this,n);n>t;t++)i[t]=h?l(s[t],t):s[t];return i},Oe=function(){for(var e=0,t=arguments.length,n=Ae(this,t);t>e;)n[e]=arguments[e++];return n},Ne=!!H&&o(function(){fe.call(new H(1))}),Re=function(){return fe.apply(Ne?he.call(Te(this)):Te(this),arguments)},Ie={copyWithin:function(e,t){return U.call(Te(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return K(Te(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return k.apply(Te(this),arguments)},filter:function(e){return Ee(this,Q(Te(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return $(Te(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Te(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){J(Te(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ne(Te(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Te(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return ue.apply(Te(this),arguments)},lastIndexOf:function(e){return ae.apply(Te(this),arguments)},map:function(e){return we(Te(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(Te(this),arguments)},reduceRight:function(e){return ce.apply(Te(this),arguments)},reverse:function(){for(var e,t=Te(this).length,n=Math.floor(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this},some:function(e){return Z(Te(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return le.call(Te(this),e)},subarray:function(e,t){var n=Te(this),r=n.length,i=g(e,r);return new(N(n,n[ge]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,m((void 0===t?r:g(t,r))-i))}},De=function(e,t){return Ee(this,he.call(Te(this),e,t))},Fe=function(e){Te(this);var t=Me(arguments[1],1),n=this.length,r=_(e),i=m(r.length),o=0;if(i+t>n)throw G("Wrong length!");for(;o<i;)this[t+o]=r[o++]},ke={entries:function(){return oe.call(Te(this))},keys:function(){return ie.call(Te(this))},values:function(){return re.call(Te(this))}},Ue=function(e,t){return w(e)&&e[be]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Be=function(e,t){return Ue(e,t=y(t,!0))?h(2,e[t]):V(e,t)},ze=function(e,t,n){return!(Ue(e,t=y(t,!0))&&w(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?j(e,t,n):(e[t]=n.value,e)};ye||(z.f=Be,B.f=ze),a(a.S+a.F*!ye,"Object",{getOwnPropertyDescriptor:Be,defineProperty:ze}),o(function(){de.call({})})&&(de=fe=function(){return ue.call(this)});var je=f({},Ie);f(je,ke),d(je,pe,ke.values),f(je,{slice:De,set:Fe,constructor:function(){},toString:de,toLocaleString:Re}),Pe(je,"buffer","b"),Pe(je,"byteOffset","o"),Pe(je,"byteLength","l"),Pe(je,"length","e"),j(je,me,{get:function(){return this[be]}}),e.exports=function(e,t,n,c){var u=e+((c=!!c)?"Clamped":"")+"Array",h="get"+e,f="set"+e,p=i[u],g=p||{},y=p&&T(p),b=!p||!s.ABV,_={},S=p&&p.prototype,E=function(e,n){j(e,n,{get:function(){return function(e,n){var r=e._d;return r.v[h](n*t+r.o,_e)}(this,n)},set:function(e){return function(e,n,r){var i=e._d;c&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[f](n*t+i.o,r,_e)}(this,n,e)},enumerable:!0})};b?(p=n(function(e,n,r,i){l(e,p,u,"_d");var o,a,s,c,h=0,f=0;if(w(n)){if(!(n instanceof q||"ArrayBuffer"==(c=x(n))||"SharedArrayBuffer"==c))return be in n?Ce(p,n):Le.call(p,n);o=n,f=Me(r,t);var g=n.byteLength;if(void 0===i){if(g%t)throw G("Wrong length!");if((a=g-f)<0)throw G("Wrong length!")}else if((a=m(i)*t)+f>g)throw G("Wrong length!");s=a/t}else s=v(n),o=new q(a=s*t);for(d(e,"_d",{b:o,o:f,l:a,e:s,v:new Y(o)});h<s;)E(e,h++)}),S=p.prototype=M(je),d(S,"constructor",p)):o(function(){p(1)})&&o(function(){new p(-1)})&&D(function(e){new p,new p(null),new p(1.5),new p(e)},!0)||(p=n(function(e,n,r,i){var o;return l(e,p,u),w(n)?n instanceof q||"ArrayBuffer"==(o=x(n))||"SharedArrayBuffer"==o?void 0!==i?new g(n,Me(r,t),i):void 0!==r?new g(n,Me(r,t)):new g(n):be in n?Ce(p,n):Le.call(p,n):new g(v(n))}),J(y!==Function.prototype?A(g).concat(A(y)):A(g),function(e){e in p||d(p,e,g[e])}),p.prototype=S,r||(S.constructor=p));var C=S[pe],P=!!C&&("values"==C.name||void 0==C.name),L=ke.values;d(p,ve,!0),d(S,be,u),d(S,xe,!0),d(S,ge,p),(c?new p(1)[me]==u:me in S)||j(S,me,{get:function(){return u}}),_[u]=p,a(a.G+a.W+a.F*(p!=g),_),a(a.S,u,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*o(function(){g.of.call(p,1)}),u,{from:Le,of:Oe}),"BYTES_PER_ELEMENT"in S||d(S,"BYTES_PER_ELEMENT",t),a(a.P,u,Ie),F(u),a(a.P+a.F*Se,u,{set:Fe}),a(a.P+a.F*!P,u,ke),r||S.toString==de||(S.toString=de),a(a.P+a.F*o(function(){new p(1).slice()}),u,{slice:De}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!o(function(){S.toLocaleString.call([1,2])})),u,{toLocaleString:Re}),I[u]=P?C:L,r||P||d(S,pe,L)}}else e.exports=function(){}},"03192b087bb464f059c0":function(e,t,n){"use strict";var r=n("d394d0a4c1838202489d"),i=n("23d432718b3e8ce32362"),o=n("ca19e32ab6ee3b3692aa");e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);u>s;)t[s++]=e;return t}},"03ba1ede2f4706d1e7f7":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("7a7739dd8a198a2cfcb5"),o=n("7ad2c0eb9a8edcc472a4"),a=/"/g,s=function(e,t,n,r){var i=String(o(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+i+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*i(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},"044f282f6141fc605782":function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},"0565be87d109f51269ca":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("ecd0e0fb36455021f082")(2);r(r.P+r.F*!n("40b064d4eb439c0c1c2b")([].filter,!0),"Array",{filter:function(e){return i(this,e,arguments[1])}})},"0594430ce9777a0767aa":function(e,t,n){var r=n("6ae9955278ddcf01bbfd");e.exports=function(e,t){return new(r(e))(t)}},"0633550d227682cecd10":function(e,t,n){"use strict";var r=n("1139de1233fd67f45bd7"),i=n("2d13d93c336705cd8ff9"),o=n("88db22626e6c88b175cf"),a=n("503a0df91bcab33c39b8"),s=n("87f7b2a2f3e179b5c40a"),c=n("4133d6461867e9751fc3"),u=n("fd8b6034a9a06242cc87"),l=n("a459ab805827640a27e8"),h=n("7a7739dd8a198a2cfcb5"),d=n("574ea81f94fc0b2f332a"),f=n("62828dc3ffa96c06b7c9"),p=n("cf8d6afd09746a2b5bc3");e.exports=function(e,t,n,m,v,g){var y=r[e],b=y,x=v?"set":"add",w=b&&b.prototype,_={},S=function(e){var t=w[e];o(w,e,"delete"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!l(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof b&&(g||w.forEach&&!h(function(){(new b).entries().next()}))){var M=new b,T=M[x](g?{}:-0,1)!=M,A=h(function(){M.has(1)}),E=d(function(e){new b(e)}),C=!g&&h(function(){for(var e=new b,t=5;t--;)e[x](t,t);return!e.has(-0)});E||((b=t(function(t,n){u(t,b,e);var r=p(new y,t,b);return void 0!=n&&c(n,v,r[x],r),r})).prototype=w,w.constructor=b),(A||C)&&(S("delete"),S("has"),v&&S("get")),(C||T)&&S(x),g&&w.clear&&delete w.clear}else b=m.getConstructor(t,e,v,x),a(b.prototype,n),s.NEED=!0;return f(b,e),_[e]=b,i(i.G+i.W+i.F*(b!=y),_),g||m.setStrong(b,e,v),b}},"06b2b473e53cc019ca74":function(e,t,n){"use strict";var r=n("d394d0a4c1838202489d"),i=n("23d432718b3e8ce32362"),o=n("ca19e32ab6ee3b3692aa");e.exports=[].copyWithin||function(e,t){var n=r(this),a=o(n.length),s=i(e,a),c=i(t,a),u=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===u?a:i(u,a))-c,a-s),h=1;for(c<s&&s<c+l&&(h=-1,c+=l-1,s+=l-1);l-- >0;)c in n?n[s]=n[c]:delete n[s],s+=h,c+=h;return n}},"06d4481d8fe57248a157":function(e,t,n){var r=n("1139de1233fd67f45bd7").parseInt,i=n("57e7a4ee5fd1ce9280ef").trim,o=n("f3bd18506acf22d8f1d4"),a=/^[-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(e,t){var n=i(String(e),3);return r(n,t>>>0||(a.test(n)?16:10))}:r},"07a2173bac8ab93c3080":function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=c(n("49a47d064cfbf2949ee5")),o=c(n("6a4f9c383785f9168266")),a=c(n("8af190b70a6bc55c6f1b")),s=c(n("8a2d1b95e05b6a321e74"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=u(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props.history.location.pathname)},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:r({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,r=t.history;(0,o.default)(null==n||1===a.default.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen(function(){e.setState({match:e.computeMatch(r.location.pathname)})})},t.prototype.componentWillReceiveProps=function(e){(0,i.default)(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?a.default.Children.only(e):null},t}(a.default.Component);l.propTypes={history:s.default.object.isRequired,children:s.default.node},l.contextTypes={router:s.default.object},l.childContextTypes={router:s.default.object.isRequired},t.default=l},"07de7eab7d9aab23fb86":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("79c91dcd8cd554c59c7b"),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return i(e),!o||o(e)}})},"07f8363c924f4e12fef3":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("efae14a3f8cd9a616256"),o=n("ca19e32ab6ee3b3692aa");r(r.S,"String",{raw:function(e){for(var t=i(e.raw),n=o(t.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(t[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},"089f6438d068e21c2e37":function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},"08aacfc067e33d327708":function(e,t,n){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */e.exports=function(e){return null!=e&&"object"==typeof e&&!1===Array.isArray(e)}},"0a5193b0534d54dbcda1":function(e,t,n){"use strict";var r=n("0e717e1f47872428608d"),i=n("2d13d93c336705cd8ff9"),o=n("d394d0a4c1838202489d"),a=n("4357234160788ed77205"),s=n("71d3ec5bd65418e28ebc"),c=n("ca19e32ab6ee3b3692aa"),u=n("8de492c765fbfb624515"),l=n("f88518adc3004bf8d923");i(i.S+i.F*!n("574ea81f94fc0b2f332a")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,h,d=o(e),f="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,g=0,y=l(d);if(v&&(m=r(m,p>2?arguments[2]:void 0,2)),void 0==y||f==Array&&s(y))for(n=new f(t=c(d.length));t>g;g++)u(n,g,v?m(d[g],g):d[g]);else for(h=y.call(d),n=new f;!(i=h.next()).done;g++)u(n,g,v?a(h,m,[i.value,g],!0):i.value);return n.length=g,n}})},"0aac488a388d7f2d0eea":function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},"0b3f87eafc807ad7f3a2":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},"0b69aae3945a07e52c9a":function(e,t,n){var r=n("14462f9650d45fd47dc7"),i=n("79c91dcd8cd554c59c7b"),o=r.get,a=r.key;r.exp({getOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},"0bd0985e8178c4e69b67":function(e,t,n){var r=n("a459ab805827640a27e8"),i=n("87f7b2a2f3e179b5c40a").onFreeze;n("f34797c0b42452934317")("seal",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},"0ce98ded3187eccaf15a":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("d394d0a4c1838202489d"),o=n("4d073e2fededcdd3f3d3"),a=n("1b01d0e59d3af79760a0");n("5975c7ea3ecd56e534e3")&&r(r.P+n("615b8c1bc8c3f66221bc"),"Object",{__defineSetter__:function(e,t){a.f(i(this),e,{set:o(t),enumerable:!0,configurable:!0})}})},"0cfe2a6849380b697b26":function(e,t,n){n("02fcd2201285b358795d")("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},"0d694d86343010af9d4f":function(e,t,n){var r=n("a459ab805827640a27e8"),i=n("79c91dcd8cd554c59c7b"),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n("0e717e1f47872428608d")(Function.call,n("61fcea04092a9580d371").f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},"0d7f0986bcd2f33d8a2a":function(e,t,n){t.__esModule=!0,t.Helmet=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=h(n("8af190b70a6bc55c6f1b")),a=h(n("8a2d1b95e05b6a321e74")),s=h(n("7830fb198d99e49e14ff")),c=h(n("1cbd705abc411c9a1e5b")),u=n("c8f33559dbc0657cda35"),l=n("b93293c8278c29a2c7c2");function h(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var f=function(e){var t,n;return n=t=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype.shouldComponentUpdate=function(e){return!(0,c.default)(this.props,e)},n.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case l.TAG_NAMES.SCRIPT:case l.TAG_NAMES.NOSCRIPT:return{innerHTML:t};case l.TAG_NAMES.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},n.prototype.flattenArrayTypeChildren=function(e){var t,n=e.child,i=e.arrayTypeChildren,o=e.newChildProps,a=e.nestedChildren;return r({},i,((t={})[n.type]=[].concat(i[n.type]||[],[r({},o,this.mapNestedChildrenToProps(n,a))]),t))},n.prototype.mapObjectTypeChildren=function(e){var t,n,i=e.child,o=e.newProps,a=e.newChildProps,s=e.nestedChildren;switch(i.type){case l.TAG_NAMES.TITLE:return r({},o,((t={})[i.type]=s,t.titleAttributes=r({},a),t));case l.TAG_NAMES.BODY:return r({},o,{bodyAttributes:r({},a)});case l.TAG_NAMES.HTML:return r({},o,{htmlAttributes:r({},a)})}return r({},o,((n={})[i.type]=r({},a),n))},n.prototype.mapArrayTypeChildrenToProps=function(e,t){var n=r({},t);return Object.keys(e).forEach(function(t){var i;n=r({},n,((i={})[t]=e[t],i))}),n},n.prototype.warnOnInvalidChildren=function(e,t){if(!l.VALID_TAG_NAMES.some(function(t){return e.type===t}))return"function"==typeof e.type?(0,u.warn)("You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information."):(0,u.warn)("Only elements types "+l.VALID_TAG_NAMES.join(", ")+" are allowed. Helmet does not support rendering <"+e.type+"> elements. Refer to our API for more information.");if(t&&"string"!=typeof t&&(!Array.isArray(t)||t.some(function(e){return"string"!=typeof e})))throw new Error("Helmet expects a string as a child of <"+e.type+">. Did you forget to wrap your children in braces? ( <"+e.type+">{``}</"+e.type+"> ) Refer to our API for more information.");return!0},n.prototype.mapChildrenToProps=function(e,t){var n=this,r={};return o.default.Children.forEach(e,function(e){if(e&&e.props){var i=e.props,o=i.children,a=d(i,["children"]),s=(0,u.convertReactPropstoHtmlAttributes)(a);switch(n.warnOnInvalidChildren(e,o),e.type){case l.TAG_NAMES.LINK:case l.TAG_NAMES.META:case l.TAG_NAMES.NOSCRIPT:case l.TAG_NAMES.SCRIPT:case l.TAG_NAMES.STYLE:r=n.flattenArrayTypeChildren({child:e,arrayTypeChildren:r,newChildProps:s,nestedChildren:o});break;default:t=n.mapObjectTypeChildren({child:e,newProps:t,newChildProps:s,nestedChildren:o})}}}),t=this.mapArrayTypeChildrenToProps(r,t)},n.prototype.render=function(){var t=this.props,n=t.children,i=d(t,["children"]),a=r({},i);return n&&(a=this.mapChildrenToProps(n,a)),o.default.createElement(e,a)},i(n,null,[{key:"canUseDOM",set:function(t){e.canUseDOM=t}}]),n}(o.default.Component),t.propTypes={base:a.default.object,bodyAttributes:a.default.object,children:a.default.oneOfType([a.default.arrayOf(a.default.node),a.default.node]),defaultTitle:a.default.string,defer:a.default.bool,encodeSpecialCharacters:a.default.bool,htmlAttributes:a.default.object,link:a.default.arrayOf(a.default.object),meta:a.default.arrayOf(a.default.object),noscript:a.default.arrayOf(a.default.object),onChangeClientState:a.default.func,script:a.default.arrayOf(a.default.object),style:a.default.arrayOf(a.default.object),title:a.default.string,titleAttributes:a.default.object,titleTemplate:a.default.string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=e.peek,t.rewind=function(){var t=e.rewind();return t||(t=(0,u.mapStateOnServer)({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),t},n}((0,s.default)(u.reducePropsToState,u.handleClientStateChange,u.mapStateOnServer)(function(){return null}));f.renderStatic=f.rewind,t.Helmet=f,t.default=f},"0e717e1f47872428608d":function(e,t,n){var r=n("4d073e2fededcdd3f3d3");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},"0efece4c8cb91e128a85":function(e,t,n){"use strict";e.exports=n("0179c8ca409e9ba69a5f")},"0f025c284bc567debf3d":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("ecd0e0fb36455021f082")(0),o=n("40b064d4eb439c0c1c2b")([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(e){return i(this,e,arguments[1])}})},"0f2d451cc44dcac3d457":function(e,t,n){n("02fcd2201285b358795d")("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},"0f3e6bbfb9058f37cb22":function(e,t,n){n("f34797c0b42452934317")("getOwnPropertyNames",function(){return n("92efe77f5aacb0dee3db").f})},"0fcd62dab3511fe4dbf9":function(e,t,n){"use strict";var r=n("4d073e2fededcdd3f3d3");e.exports.f=function(e){return new function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=r(t),this.reject=r(n)}(e)}},"104a011c3c0c4bae71c3":function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},"112d1eecaede6e2dcf09":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Object",{create:n("ef09ce044ac3210bc947")})},"1139de1233fd67f45bd7":function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"113c58cbe121d529688c":function(e,t,n){n("c68991e63a6e99ff2511")("observable")},"11d2d9cd5d1b52a535e7":function(e,t,n){"use strict";n.r(t),function(e,r){function i(){}n.d(t,"WebGLRenderTargetCube",function(){return Qt}),n.d(t,"WebGLRenderTarget",function(){return Jt}),n.d(t,"WebGLRenderer",function(){return li}),n.d(t,"ShaderLib",function(){return cn}),n.d(t,"UniformsLib",function(){return sn}),n.d(t,"UniformsUtils",function(){return rn}),n.d(t,"ShaderChunk",function(){return nn}),n.d(t,"FogExp2",function(){return hi}),n.d(t,"Fog",function(){return di}),n.d(t,"Scene",function(){return fi}),n.d(t,"Sprite",function(){return gi}),n.d(t,"LOD",function(){return yi}),n.d(t,"SkinnedMesh",function(){return wi}),n.d(t,"Skeleton",function(){return bi}),n.d(t,"Bone",function(){return xi}),n.d(t,"Mesh",function(){return Vn}),n.d(t,"LineSegments",function(){return Mi}),n.d(t,"LineLoop",function(){return Ti}),n.d(t,"Line",function(){return Si}),n.d(t,"Points",function(){return Ei}),n.d(t,"Group",function(){return oi}),n.d(t,"VideoTexture",function(){return Ci}),n.d(t,"DataTexture",function(){return Zt}),n.d(t,"DataTexture3D",function(){return Hn}),n.d(t,"CompressedTexture",function(){return Pi}),n.d(t,"CubeTexture",function(){return Wn}),n.d(t,"CanvasTexture",function(){return Li}),n.d(t,"DepthTexture",function(){return Oi}),n.d(t,"Texture",function(){return qt}),n.d(t,"CompressedTextureLoader",function(){return ca}),n.d(t,"DataTextureLoader",function(){return ua}),n.d(t,"CubeTextureLoader",function(){return ha}),n.d(t,"TextureLoader",function(){return da}),n.d(t,"ObjectLoader",function(){return ps}),n.d(t,"MaterialLoader",function(){return cs}),n.d(t,"BufferGeometryLoader",function(){return us}),n.d(t,"DefaultLoadingManager",function(){return oa}),n.d(t,"LoadingManager",function(){return ia}),n.d(t,"JSONLoader",function(){return fs}),n.d(t,"ImageLoader",function(){return la}),n.d(t,"ImageBitmapLoader",function(){return bs}),n.d(t,"FontLoader",function(){return Ss}),n.d(t,"FileLoader",function(){return sa}),n.d(t,"Loader",function(){return hs}),n.d(t,"LoaderUtils",function(){return ds}),n.d(t,"Cache",function(){return ra}),n.d(t,"AudioLoader",function(){return Ts}),n.d(t,"SpotLightShadow",function(){return Ba}),n.d(t,"SpotLight",function(){return za}),n.d(t,"PointLight",function(){return ja}),n.d(t,"RectAreaLight",function(){return Xa}),n.d(t,"HemisphereLight",function(){return ka}),n.d(t,"DirectionalLightShadow",function(){return Ga}),n.d(t,"DirectionalLight",function(){return Wa}),n.d(t,"AmbientLight",function(){return Ha}),n.d(t,"LightShadow",function(){return Ua}),n.d(t,"Light",function(){return Fa}),n.d(t,"StereoCamera",function(){return As}),n.d(t,"PerspectiveCamera",function(){return si}),n.d(t,"OrthographicCamera",function(){return Va}),n.d(t,"CubeCamera",function(){return Es}),n.d(t,"ArrayCamera",function(){return ci}),n.d(t,"Camera",function(){return ai}),n.d(t,"AudioListener",function(){return Cs}),n.d(t,"PositionalAudio",function(){return Ls}),n.d(t,"AudioContext",function(){return Ms}),n.d(t,"AudioAnalyser",function(){return Os}),n.d(t,"Audio",function(){return Ps}),n.d(t,"VectorKeyframeTrack",function(){return os}),n.d(t,"StringKeyframeTrack",function(){return is}),n.d(t,"QuaternionKeyframeTrack",function(){return rs}),n.d(t,"NumberKeyframeTrack",function(){return ts}),n.d(t,"ColorKeyframeTrack",function(){return es}),n.d(t,"BooleanKeyframeTrack",function(){return $a}),n.d(t,"PropertyMixer",function(){return Ns}),n.d(t,"PropertyBinding",function(){return Fs}),n.d(t,"KeyframeTrack",function(){return Ka}),n.d(t,"AnimationUtils",function(){return qa}),n.d(t,"AnimationObjectGroup",function(){return ks}),n.d(t,"AnimationMixer",function(){return Bs}),n.d(t,"AnimationClip",function(){return as}),n.d(t,"Uniform",function(){return zs}),n.d(t,"InstancedBufferGeometry",function(){return js}),n.d(t,"BufferGeometry",function(){return On}),n.d(t,"Geometry",function(){return gn}),n.d(t,"InterleavedBufferAttribute",function(){return mi}),n.d(t,"InstancedInterleavedBuffer",function(){return Vs}),n.d(t,"InterleavedBuffer",function(){return pi}),n.d(t,"InstancedBufferAttribute",function(){return Gs}),n.d(t,"Face3",function(){return hn}),n.d(t,"Object3D",function(){return mn}),n.d(t,"Raycaster",function(){return Ws}),n.d(t,"Layers",function(){return fn}),n.d(t,"EventDispatcher",function(){return i}),n.d(t,"Clock",function(){return qs}),n.d(t,"QuaternionLinearInterpolant",function(){return ns}),n.d(t,"LinearInterpolant",function(){return Qa}),n.d(t,"DiscreteInterpolant",function(){return Za}),n.d(t,"CubicInterpolant",function(){return Ja}),n.d(t,"Interpolant",function(){return Ya}),n.d(t,"Triangle",function(){return zn}),n.d(t,"Math",function(){return Bt}),n.d(t,"Spherical",function(){return Ys}),n.d(t,"Cylindrical",function(){return Js}),n.d(t,"Plane",function(){return en}),n.d(t,"Frustum",function(){return tn}),n.d(t,"Sphere",function(){return $t}),n.d(t,"Ray",function(){return Bn}),n.d(t,"Matrix4",function(){return jt}),n.d(t,"Matrix3",function(){return Wt}),n.d(t,"Box3",function(){return Kt}),n.d(t,"Box2",function(){return Qs}),n.d(t,"Line3",function(){return Zs}),n.d(t,"Euler",function(){return dn}),n.d(t,"Vector4",function(){return Yt}),n.d(t,"Vector3",function(){return Gt}),n.d(t,"Vector2",function(){return zt}),n.d(t,"Quaternion",function(){return Vt}),n.d(t,"Color",function(){return an}),n.d(t,"ImmediateRenderObject",function(){return Ks}),n.d(t,"VertexNormalsHelper",function(){return $s}),n.d(t,"SpotLightHelper",function(){return ec}),n.d(t,"SkeletonHelper",function(){return tc}),n.d(t,"PointLightHelper",function(){return nc}),n.d(t,"RectAreaLightHelper",function(){return rc}),n.d(t,"HemisphereLightHelper",function(){return ic}),n.d(t,"GridHelper",function(){return oc}),n.d(t,"PolarGridHelper",function(){return ac}),n.d(t,"FaceNormalsHelper",function(){return sc}),n.d(t,"DirectionalLightHelper",function(){return cc}),n.d(t,"CameraHelper",function(){return uc}),n.d(t,"BoxHelper",function(){return lc}),n.d(t,"Box3Helper",function(){return hc}),n.d(t,"PlaneHelper",function(){return dc}),n.d(t,"ArrowHelper",function(){return fc}),n.d(t,"AxesHelper",function(){return pc}),n.d(t,"Shape",function(){return Da}),n.d(t,"Path",function(){return Ia}),n.d(t,"ShapePath",function(){return xs}),n.d(t,"Font",function(){return ws}),n.d(t,"CurvePath",function(){return Ra}),n.d(t,"Curve",function(){return fa}),n.d(t,"ImageUtils",function(){return Ht}),n.d(t,"ShapeUtils",function(){return xo}),n.d(t,"WebGLUtils",function(){return ii}),n.d(t,"WireframeGeometry",function(){return Ni}),n.d(t,"ParametricGeometry",function(){return Ri}),n.d(t,"ParametricBufferGeometry",function(){return Ii}),n.d(t,"TetrahedronGeometry",function(){return ki}),n.d(t,"TetrahedronBufferGeometry",function(){return Ui}),n.d(t,"OctahedronGeometry",function(){return Bi}),n.d(t,"OctahedronBufferGeometry",function(){return zi}),n.d(t,"IcosahedronGeometry",function(){return ji}),n.d(t,"IcosahedronBufferGeometry",function(){return Vi}),n.d(t,"DodecahedronGeometry",function(){return Gi}),n.d(t,"DodecahedronBufferGeometry",function(){return Wi}),n.d(t,"PolyhedronGeometry",function(){return Di}),n.d(t,"PolyhedronBufferGeometry",function(){return Fi}),n.d(t,"TubeGeometry",function(){return Hi}),n.d(t,"TubeBufferGeometry",function(){return Xi}),n.d(t,"TorusKnotGeometry",function(){return qi}),n.d(t,"TorusKnotBufferGeometry",function(){return Yi}),n.d(t,"TorusGeometry",function(){return Ji}),n.d(t,"TorusBufferGeometry",function(){return Qi}),n.d(t,"TextGeometry",function(){return Eo}),n.d(t,"TextBufferGeometry",function(){return Co}),n.d(t,"SphereGeometry",function(){return Po}),n.d(t,"SphereBufferGeometry",function(){return Lo}),n.d(t,"RingGeometry",function(){return Oo}),n.d(t,"RingBufferGeometry",function(){return No}),n.d(t,"PlaneGeometry",function(){return In}),n.d(t,"PlaneBufferGeometry",function(){return Dn}),n.d(t,"LatheGeometry",function(){return Ro}),n.d(t,"LatheBufferGeometry",function(){return Io}),n.d(t,"ShapeGeometry",function(){return Do}),n.d(t,"ShapeBufferGeometry",function(){return Fo}),n.d(t,"ExtrudeGeometry",function(){return So}),n.d(t,"ExtrudeBufferGeometry",function(){return Mo}),n.d(t,"EdgesGeometry",function(){return Uo}),n.d(t,"ConeGeometry",function(){return jo}),n.d(t,"ConeBufferGeometry",function(){return Vo}),n.d(t,"CylinderGeometry",function(){return Bo}),n.d(t,"CylinderBufferGeometry",function(){return zo}),n.d(t,"CircleGeometry",function(){return Go}),n.d(t,"CircleBufferGeometry",function(){return Wo}),n.d(t,"BoxGeometry",function(){return Nn}),n.d(t,"BoxBufferGeometry",function(){return Rn}),n.d(t,"ShadowMaterial",function(){return Xo}),n.d(t,"SpriteMaterial",function(){return vi}),n.d(t,"RawShaderMaterial",function(){return qo}),n.d(t,"ShaderMaterial",function(){return Un}),n.d(t,"PointsMaterial",function(){return Ai}),n.d(t,"MeshPhysicalMaterial",function(){return Jo}),n.d(t,"MeshStandardMaterial",function(){return Yo}),n.d(t,"MeshPhongMaterial",function(){return Qo}),n.d(t,"MeshToonMaterial",function(){return Zo}),n.d(t,"MeshNormalMaterial",function(){return Ko}),n.d(t,"MeshLambertMaterial",function(){return $o}),n.d(t,"MeshDepthMaterial",function(){return ei}),n.d(t,"MeshDistanceMaterial",function(){return ti}),n.d(t,"MeshBasicMaterial",function(){return jn}),n.d(t,"MeshMatcapMaterial",function(){return ea}),n.d(t,"LineDashedMaterial",function(){return ta}),n.d(t,"LineBasicMaterial",function(){return _i}),n.d(t,"Material",function(){return kn}),n.d(t,"Float64BufferAttribute",function(){return En}),n.d(t,"Float32BufferAttribute",function(){return An}),n.d(t,"Uint32BufferAttribute",function(){return Tn}),n.d(t,"Int32BufferAttribute",function(){return Mn}),n.d(t,"Uint16BufferAttribute",function(){return Sn}),n.d(t,"Int16BufferAttribute",function(){return _n}),n.d(t,"Uint8ClampedBufferAttribute",function(){return wn}),n.d(t,"Uint8BufferAttribute",function(){return xn}),n.d(t,"Int8BufferAttribute",function(){return bn}),n.d(t,"BufferAttribute",function(){return yn}),n.d(t,"ArcCurve",function(){return ma}),n.d(t,"CatmullRomCurve3",function(){return wa}),n.d(t,"CubicBezierCurve",function(){return Ta}),n.d(t,"CubicBezierCurve3",function(){return Aa}),n.d(t,"EllipseCurve",function(){return pa}),n.d(t,"LineCurve",function(){return Ea}),n.d(t,"LineCurve3",function(){return Ca}),n.d(t,"QuadraticBezierCurve",function(){return Pa}),n.d(t,"QuadraticBezierCurve3",function(){return La}),n.d(t,"SplineCurve",function(){return Oa}),n.d(t,"REVISION",function(){return o}),n.d(t,"MOUSE",function(){return a}),n.d(t,"CullFaceNone",function(){return s}),n.d(t,"CullFaceBack",function(){return c}),n.d(t,"CullFaceFront",function(){return u}),n.d(t,"CullFaceFrontBack",function(){return l}),n.d(t,"FrontFaceDirectionCW",function(){return h}),n.d(t,"FrontFaceDirectionCCW",function(){return d}),n.d(t,"BasicShadowMap",function(){return f}),n.d(t,"PCFShadowMap",function(){return p}),n.d(t,"PCFSoftShadowMap",function(){return m}),n.d(t,"FrontSide",function(){return v}),n.d(t,"BackSide",function(){return g}),n.d(t,"DoubleSide",function(){return y}),n.d(t,"FlatShading",function(){return b}),n.d(t,"SmoothShading",function(){return x}),n.d(t,"NoColors",function(){return w}),n.d(t,"FaceColors",function(){return _}),n.d(t,"VertexColors",function(){return S}),n.d(t,"NoBlending",function(){return M}),n.d(t,"NormalBlending",function(){return T}),n.d(t,"AdditiveBlending",function(){return A}),n.d(t,"SubtractiveBlending",function(){return E}),n.d(t,"MultiplyBlending",function(){return C}),n.d(t,"CustomBlending",function(){return P}),n.d(t,"AddEquation",function(){return L}),n.d(t,"SubtractEquation",function(){return O}),n.d(t,"ReverseSubtractEquation",function(){return N}),n.d(t,"MinEquation",function(){return R}),n.d(t,"MaxEquation",function(){return I}),n.d(t,"ZeroFactor",function(){return D}),n.d(t,"OneFactor",function(){return F}),n.d(t,"SrcColorFactor",function(){return k}),n.d(t,"OneMinusSrcColorFactor",function(){return U}),n.d(t,"SrcAlphaFactor",function(){return B}),n.d(t,"OneMinusSrcAlphaFactor",function(){return z}),n.d(t,"DstAlphaFactor",function(){return j}),n.d(t,"OneMinusDstAlphaFactor",function(){return V}),n.d(t,"DstColorFactor",function(){return G}),n.d(t,"OneMinusDstColorFactor",function(){return W}),n.d(t,"SrcAlphaSaturateFactor",function(){return H}),n.d(t,"NeverDepth",function(){return X}),n.d(t,"AlwaysDepth",function(){return q}),n.d(t,"LessDepth",function(){return Y}),n.d(t,"LessEqualDepth",function(){return J}),n.d(t,"EqualDepth",function(){return Q}),n.d(t,"GreaterEqualDepth",function(){return Z}),n.d(t,"GreaterDepth",function(){return K}),n.d(t,"NotEqualDepth",function(){return $}),n.d(t,"MultiplyOperation",function(){return ee}),n.d(t,"MixOperation",function(){return te}),n.d(t,"AddOperation",function(){return ne}),n.d(t,"NoToneMapping",function(){return re}),n.d(t,"LinearToneMapping",function(){return ie}),n.d(t,"ReinhardToneMapping",function(){return oe}),n.d(t,"Uncharted2ToneMapping",function(){return ae}),n.d(t,"CineonToneMapping",function(){return se}),n.d(t,"UVMapping",function(){return ce}),n.d(t,"CubeReflectionMapping",function(){return ue}),n.d(t,"CubeRefractionMapping",function(){return le}),n.d(t,"EquirectangularReflectionMapping",function(){return he}),n.d(t,"EquirectangularRefractionMapping",function(){return de}),n.d(t,"SphericalReflectionMapping",function(){return fe}),n.d(t,"CubeUVReflectionMapping",function(){return pe}),n.d(t,"CubeUVRefractionMapping",function(){return me}),n.d(t,"RepeatWrapping",function(){return ve}),n.d(t,"ClampToEdgeWrapping",function(){return ge}),n.d(t,"MirroredRepeatWrapping",function(){return ye}),n.d(t,"NearestFilter",function(){return be}),n.d(t,"NearestMipMapNearestFilter",function(){return xe}),n.d(t,"NearestMipMapLinearFilter",function(){return we}),n.d(t,"LinearFilter",function(){return _e}),n.d(t,"LinearMipMapNearestFilter",function(){return Se}),n.d(t,"LinearMipMapLinearFilter",function(){return Me}),n.d(t,"UnsignedByteType",function(){return Te}),n.d(t,"ByteType",function(){return Ae}),n.d(t,"ShortType",function(){return Ee}),n.d(t,"UnsignedShortType",function(){return Ce}),n.d(t,"IntType",function(){return Pe}),n.d(t,"UnsignedIntType",function(){return Le}),n.d(t,"FloatType",function(){return Oe}),n.d(t,"HalfFloatType",function(){return Ne}),n.d(t,"UnsignedShort4444Type",function(){return Re}),n.d(t,"UnsignedShort5551Type",function(){return Ie}),n.d(t,"UnsignedShort565Type",function(){return De}),n.d(t,"UnsignedInt248Type",function(){return Fe}),n.d(t,"AlphaFormat",function(){return ke}),n.d(t,"RGBFormat",function(){return Ue}),n.d(t,"RGBAFormat",function(){return Be}),n.d(t,"LuminanceFormat",function(){return ze}),n.d(t,"LuminanceAlphaFormat",function(){return je}),n.d(t,"RGBEFormat",function(){return Ve}),n.d(t,"DepthFormat",function(){return Ge}),n.d(t,"DepthStencilFormat",function(){return We}),n.d(t,"RedFormat",function(){return He}),n.d(t,"RGB_S3TC_DXT1_Format",function(){return Xe}),n.d(t,"RGBA_S3TC_DXT1_Format",function(){return qe}),n.d(t,"RGBA_S3TC_DXT3_Format",function(){return Ye}),n.d(t,"RGBA_S3TC_DXT5_Format",function(){return Je}),n.d(t,"RGB_PVRTC_4BPPV1_Format",function(){return Qe}),n.d(t,"RGB_PVRTC_2BPPV1_Format",function(){return Ze}),n.d(t,"RGBA_PVRTC_4BPPV1_Format",function(){return Ke}),n.d(t,"RGBA_PVRTC_2BPPV1_Format",function(){return $e}),n.d(t,"RGB_ETC1_Format",function(){return et}),n.d(t,"RGBA_ASTC_4x4_Format",function(){return tt}),n.d(t,"RGBA_ASTC_5x4_Format",function(){return nt}),n.d(t,"RGBA_ASTC_5x5_Format",function(){return rt}),n.d(t,"RGBA_ASTC_6x5_Format",function(){return it}),n.d(t,"RGBA_ASTC_6x6_Format",function(){return ot}),n.d(t,"RGBA_ASTC_8x5_Format",function(){return at}),n.d(t,"RGBA_ASTC_8x6_Format",function(){return st}),n.d(t,"RGBA_ASTC_8x8_Format",function(){return ct}),n.d(t,"RGBA_ASTC_10x5_Format",function(){return ut}),n.d(t,"RGBA_ASTC_10x6_Format",function(){return lt}),n.d(t,"RGBA_ASTC_10x8_Format",function(){return ht}),n.d(t,"RGBA_ASTC_10x10_Format",function(){return dt}),n.d(t,"RGBA_ASTC_12x10_Format",function(){return ft}),n.d(t,"RGBA_ASTC_12x12_Format",function(){return pt}),n.d(t,"LoopOnce",function(){return mt}),n.d(t,"LoopRepeat",function(){return vt}),n.d(t,"LoopPingPong",function(){return gt}),n.d(t,"InterpolateDiscrete",function(){return yt}),n.d(t,"InterpolateLinear",function(){return bt}),n.d(t,"InterpolateSmooth",function(){return xt}),n.d(t,"ZeroCurvatureEnding",function(){return wt}),n.d(t,"ZeroSlopeEnding",function(){return _t}),n.d(t,"WrapAroundEnding",function(){return St}),n.d(t,"TrianglesDrawMode",function(){return Mt}),n.d(t,"TriangleStripDrawMode",function(){return Tt}),n.d(t,"TriangleFanDrawMode",function(){return At}),n.d(t,"LinearEncoding",function(){return Et}),n.d(t,"sRGBEncoding",function(){return Ct}),n.d(t,"GammaEncoding",function(){return Pt}),n.d(t,"RGBEEncoding",function(){return Lt}),n.d(t,"LogLuvEncoding",function(){return Ot}),n.d(t,"RGBM7Encoding",function(){return Nt}),n.d(t,"RGBM16Encoding",function(){return Rt}),n.d(t,"RGBDEncoding",function(){return It}),n.d(t,"BasicDepthPacking",function(){return Dt}),n.d(t,"RGBADepthPacking",function(){return Ft}),n.d(t,"TangentSpaceNormalMap",function(){return kt}),n.d(t,"ObjectSpaceNormalMap",function(){return Ut}),n.d(t,"CubeGeometry",function(){return Nn}),n.d(t,"Face4",function(){return mc}),n.d(t,"LineStrip",function(){return vc}),n.d(t,"LinePieces",function(){return gc}),n.d(t,"MeshFaceMaterial",function(){return yc}),n.d(t,"MultiMaterial",function(){return bc}),n.d(t,"PointCloud",function(){return xc}),n.d(t,"Particle",function(){return wc}),n.d(t,"ParticleSystem",function(){return _c}),n.d(t,"PointCloudMaterial",function(){return Sc}),n.d(t,"ParticleBasicMaterial",function(){return Mc}),n.d(t,"ParticleSystemMaterial",function(){return Tc}),n.d(t,"Vertex",function(){return Ac}),n.d(t,"DynamicBufferAttribute",function(){return Ec}),n.d(t,"Int8Attribute",function(){return Cc}),n.d(t,"Uint8Attribute",function(){return Pc}),n.d(t,"Uint8ClampedAttribute",function(){return Lc}),n.d(t,"Int16Attribute",function(){return Oc}),n.d(t,"Uint16Attribute",function(){return Nc}),n.d(t,"Int32Attribute",function(){return Rc}),n.d(t,"Uint32Attribute",function(){return Ic}),n.d(t,"Float32Attribute",function(){return Dc}),n.d(t,"Float64Attribute",function(){return Fc}),n.d(t,"ClosedSplineCurve3",function(){return kc}),n.d(t,"SplineCurve3",function(){return Uc}),n.d(t,"Spline",function(){return Bc}),n.d(t,"AxisHelper",function(){return zc}),n.d(t,"BoundingBoxHelper",function(){return jc}),n.d(t,"EdgesHelper",function(){return Vc}),n.d(t,"WireframeHelper",function(){return Gc}),n.d(t,"XHRLoader",function(){return Wc}),n.d(t,"BinaryTextureLoader",function(){return Hc}),n.d(t,"GeometryUtils",function(){return Xc}),n.d(t,"Projector",function(){return qc}),n.d(t,"CanvasRenderer",function(){return Yc}),n.d(t,"SceneUtils",function(){return Jc}),n.d(t,"LensFlare",function(){return Qc}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}),Object.assign(i.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}});var o="97",a={LEFT:0,MIDDLE:1,RIGHT:2},s=0,c=1,u=2,l=3,h=0,d=1,f=0,p=1,m=2,v=0,g=1,y=2,b=1,x=2,w=0,_=1,S=2,M=0,T=1,A=2,E=3,C=4,P=5,L=100,O=101,N=102,R=103,I=104,D=200,F=201,k=202,U=203,B=204,z=205,j=206,V=207,G=208,W=209,H=210,X=0,q=1,Y=2,J=3,Q=4,Z=5,K=6,$=7,ee=0,te=1,ne=2,re=0,ie=1,oe=2,ae=3,se=4,ce=300,ue=301,le=302,he=303,de=304,fe=305,pe=306,me=307,ve=1e3,ge=1001,ye=1002,be=1003,xe=1004,we=1005,_e=1006,Se=1007,Me=1008,Te=1009,Ae=1010,Ee=1011,Ce=1012,Pe=1013,Le=1014,Oe=1015,Ne=1016,Re=1017,Ie=1018,De=1019,Fe=1020,ke=1021,Ue=1022,Be=1023,ze=1024,je=1025,Ve=Be,Ge=1026,We=1027,He=1028,Xe=33776,qe=33777,Ye=33778,Je=33779,Qe=35840,Ze=35841,Ke=35842,$e=35843,et=36196,tt=37808,nt=37809,rt=37810,it=37811,ot=37812,at=37813,st=37814,ct=37815,ut=37816,lt=37817,ht=37818,dt=37819,ft=37820,pt=37821,mt=2200,vt=2201,gt=2202,yt=2300,bt=2301,xt=2302,wt=2400,_t=2401,St=2402,Mt=0,Tt=1,At=2,Et=3e3,Ct=3001,Pt=3007,Lt=3002,Ot=3003,Nt=3004,Rt=3005,It=3006,Dt=3200,Ft=3201,kt=0,Ut=1,Bt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Bt.DEG2RAD},radToDeg:function(e){return e*Bt.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function zt(e,t){this.x=e||0,this.y=t||0}function jt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Vt(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function Gt(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function Wt(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(zt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(zt.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new zt,t=new zt;return function(n,r){return e.set(n,n),t.set(r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}}),Object.assign(jt.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,c,u,l,h,d,f,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=c,v[6]=u,v[10]=l,v[14]=h,v[3]=d,v[7]=f,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new jt).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new Gt;return function(t){var n=this.elements,r=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),c=Math.sin(r),u=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){var h=o*u,d=o*l,f=a*u,p=a*l;t[0]=s*u,t[4]=-s*l,t[8]=c,t[1]=d+f*c,t[5]=h-p*c,t[9]=-a*s,t[2]=p-h*c,t[6]=f+d*c,t[10]=o*s}else if("YXZ"===e.order){var m=s*u,v=s*l,g=c*u,y=c*l;t[0]=m+y*a,t[4]=g*a-v,t[8]=o*c,t[1]=o*l,t[5]=o*u,t[9]=-a,t[2]=v*a-g,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){m=s*u,v=s*l,g=c*u,y=c*l;t[0]=m-y*a,t[4]=-o*l,t[8]=g+v*a,t[1]=v+g*a,t[5]=o*u,t[9]=y-m*a,t[2]=-o*c,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){h=o*u,d=o*l,f=a*u,p=a*l;t[0]=s*u,t[4]=f*c-d,t[8]=h*c+p,t[1]=s*l,t[5]=p*c+h,t[9]=d*c-f,t[2]=-c,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var b=o*s,x=o*c,w=a*s,_=a*c;t[0]=s*u,t[4]=_-b*l,t[8]=w*l+x,t[1]=l,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=x*l+w,t[10]=b-_*l}else if("XZY"===e.order){b=o*s,x=o*c,w=a*s,_=a*c;t[0]=s*u,t[4]=-l,t[8]=c*u,t[1]=b*l+_,t[5]=o*u,t[9]=x*l-w,t[2]=w*l-x,t[6]=a*u,t[10]=_*l+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(){var e=new Gt(0,0,0),t=new Gt(1,1,1);return function(n){return this.compose(e,n,t)}}(),lookAt:function(){var e=new Gt,t=new Gt,n=new Gt;return function(r,i,o){var a=this.elements;return n.subVectors(r,i),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(o,n),0===e.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(o,n)),e.normalize(),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],c=n[12],u=n[1],l=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],x=n[15],w=r[0],_=r[4],S=r[8],M=r[12],T=r[1],A=r[5],E=r[9],C=r[13],P=r[2],L=r[6],O=r[10],N=r[14],R=r[3],I=r[7],D=r[11],F=r[15];return i[0]=o*w+a*T+s*P+c*R,i[4]=o*_+a*A+s*L+c*I,i[8]=o*S+a*E+s*O+c*D,i[12]=o*M+a*C+s*N+c*F,i[1]=u*w+l*T+h*P+d*R,i[5]=u*_+l*A+h*L+d*I,i[9]=u*S+l*E+h*O+d*D,i[13]=u*M+l*C+h*N+d*F,i[2]=f*w+p*T+m*P+v*R,i[6]=f*_+p*A+m*L+v*I,i[10]=f*S+p*E+m*O+v*D,i[14]=f*M+p*C+m*N+v*F,i[3]=g*w+y*T+b*P+x*R,i[7]=g*_+y*A+b*L+x*I,i[11]=g*S+y*E+b*O+x*D,i[15]=g*M+y*C+b*N+x*F,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new Gt;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],c=e[13],u=e[2],l=e[6],h=e[10],d=e[14];return e[3]*(+i*s*l-r*c*l-i*a*h+n*c*h+r*a*d-n*s*d)+e[7]*(+t*s*d-t*c*h+i*o*h-r*o*d+r*c*u-i*s*u)+e[11]*(+t*c*l-t*a*d-i*o*l+n*o*d+i*a*u-n*c*u)+e[15]*(-r*a*u-t*s*l+t*a*h+r*o*l-n*o*h+n*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],c=r[4],u=r[5],l=r[6],h=r[7],d=r[8],f=r[9],p=r[10],m=r[11],v=r[12],g=r[13],y=r[14],b=r[15],x=f*y*h-g*p*h+g*l*m-u*y*m-f*l*b+u*p*b,w=v*p*h-d*y*h-v*l*m+c*y*m+d*l*b-c*p*b,_=d*g*h-v*f*h+v*u*m-c*g*m-d*u*b+c*f*b,S=v*f*l-d*g*l-v*u*p+c*g*p+d*u*y-c*f*y,M=i*x+o*w+a*_+s*S;if(0===M){var T="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(T);return console.warn(T),this.identity()}var A=1/M;return n[0]=x*A,n[1]=(g*p*s-f*y*s-g*a*m+o*y*m+f*a*b-o*p*b)*A,n[2]=(u*y*s-g*l*s+g*a*h-o*y*h-u*a*b+o*l*b)*A,n[3]=(f*l*s-u*p*s-f*a*h+o*p*h+u*a*m-o*l*m)*A,n[4]=w*A,n[5]=(d*y*s-v*p*s+v*a*m-i*y*m-d*a*b+i*p*b)*A,n[6]=(v*l*s-c*y*s-v*a*h+i*y*h+c*a*b-i*l*b)*A,n[7]=(c*p*s-d*l*s+d*a*h-i*p*h-c*a*m+i*l*m)*A,n[8]=_*A,n[9]=(v*f*s-d*g*s-v*o*m+i*g*m+d*o*b-i*f*b)*A,n[10]=(c*g*s-v*u*s+v*o*h-i*g*h-c*o*b+i*u*b)*A,n[11]=(d*u*s-c*f*s-d*o*h+i*f*h+c*o*m-i*u*m)*A,n[12]=S*A,n[13]=(d*g*a-v*f*a+v*o*p-i*g*p-d*o*y+i*f*y)*A,n[14]=(v*u*a-c*g*a-v*o*l+i*g*l+c*o*y-i*u*y)*A,n[15]=(c*f*a-d*u*a+d*o*l-i*f*l-c*o*p+i*u*p)*A,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,c=i*o,u=i*a;return this.set(c*o+n,c*a-r*s,c*s+r*a,0,c*a+r*s,u*a+n,u*s-r*o,0,c*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,c=i+i,u=o+o,l=a+a,h=i*c,d=i*u,f=i*l,p=o*u,m=o*l,v=a*l,g=s*c,y=s*u,b=s*l,x=n.x,w=n.y,_=n.z;return r[0]=(1-(p+v))*x,r[1]=(d+b)*x,r[2]=(f-y)*x,r[3]=0,r[4]=(d-b)*w,r[5]=(1-(h+v))*w,r[6]=(m+g)*w,r[7]=0,r[8]=(f+y)*_,r[9]=(m-g)*_,r[10]=(1-(h+p))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(){var e=new Gt,t=new jt;return function(n,r,i){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),c=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.copy(this);var u=1/a,l=1/s,h=1/c;return t.elements[0]*=u,t.elements[1]*=u,t.elements[2]*=u,t.elements[4]*=l,t.elements[5]*=l,t.elements[6]*=l,t.elements[8]*=h,t.elements[9]*=h,t.elements[10]*=h,r.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=c,this}}(),makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),c=2*i/(n-r),u=(t+e)/(t-e),l=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),c=1/(n-r),u=1/(o-i),l=(t+e)*s,h=(n+r)*c,d=(o+i)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(Vt,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],c=n[r+1],u=n[r+2],l=n[r+3],h=i[o+0],d=i[o+1],f=i[o+2],p=i[o+3];if(l!==p||s!==h||c!==d||u!==f){var m=1-a,v=s*h+c*d+u*f+l*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,v*g);m=Math.sin(m*x)/b,a=Math.sin(a*x)/b}var w=a*g;if(s=s*m+h*w,c=c*m+d*w,u=u*m+f*w,l=l*m+p*w,m===1-a){var _=1/Math.sqrt(s*s+c*c+u*u+l*l);s*=_,c*=_,u*=_,l*=_}}e[t]=s,e[t+1]=c,e[t+2]=u,e[t+3]=l}}),Object.defineProperties(Vt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(Vt.prototype,{isQuaternion:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,c=a(n/2),u=a(r/2),l=a(i/2),h=s(n/2),d=s(r/2),f=s(i/2);return"XYZ"===o?(this._x=h*u*l+c*d*f,this._y=c*d*l-h*u*f,this._z=c*u*f+h*d*l,this._w=c*u*l-h*d*f):"YXZ"===o?(this._x=h*u*l+c*d*f,this._y=c*d*l-h*u*f,this._z=c*u*f-h*d*l,this._w=c*u*l+h*d*f):"ZXY"===o?(this._x=h*u*l-c*d*f,this._y=c*d*l+h*u*f,this._z=c*u*f+h*d*l,this._w=c*u*l-h*d*f):"ZYX"===o?(this._x=h*u*l-c*d*f,this._y=c*d*l+h*u*f,this._z=c*u*f-h*d*l,this._w=c*u*l+h*d*f):"YZX"===o?(this._x=h*u*l+c*d*f,this._y=c*d*l+h*u*f,this._z=c*u*f-h*d*l,this._w=c*u*l-h*d*f):"XZY"===o&&(this._x=h*u*l-c*d*f,this._y=c*d*l-h*u*f,this._z=c*u*f+h*d*l,this._w=c*u*l+h*d*f),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],c=n[9],u=n[2],l=n[6],h=n[10],d=r+s+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(l-c)*t,this._y=(o-u)*t,this._z=(a-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(l-c)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+u)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(o-u)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(c+l)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+u)/t,this._y=(c+l)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new Gt;return function(n,r){return void 0===t&&(t=new Gt),(e=n.dot(r)+1)<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),angleTo:function(e){return 2*Math.acos(Math.abs(Bt.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,c=t._z,u=t._w;return this._x=n*u+o*a+r*c-i*s,this._y=r*u+o*s+i*a-n*c,this._z=i*u+o*c+n*s-r*a,this._w=o*u-n*a-r*s-i*c,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var c=1-t;return this._w=c*o+t*this._w,this._x=c*n+t*this._x,this._y=c*r+t*this._y,this._z=c*i+t*this._z,this.normalize()}var u=Math.sqrt(s),l=Math.atan2(u,a),h=Math.sin((1-t)*l)/u,d=Math.sin(t*l)/u;return this._w=o*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=i*h+this._z*d,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Gt.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new Vt;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new Vt;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,c=s*t+o*r-a*n,u=s*n+a*t-i*r,l=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=c*s+h*-i+u*-a-l*-o,this.y=u*s+h*-o+l*-i-c*-a,this.z=l*s+h*-a+c*-o-u*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(){var e=new jt;return function(t){return this.applyMatrix4(e.getInverse(t.projectionMatrix)).applyMatrix4(t.matrixWorld)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new Gt,t=new Gt;return function(n,r){return e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new Gt;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new Gt;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Bt.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(Wt.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,c){var u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=o,u[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new Gt;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],c=n[1],u=n[4],l=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],v=r[6],g=r[1],y=r[4],b=r[7],x=r[2],w=r[5],_=r[8];return i[0]=o*p+a*g+s*x,i[3]=o*m+a*y+s*w,i[6]=o*v+a*b+s*_,i[1]=c*p+u*g+l*x,i[4]=c*m+u*y+l*w,i[7]=c*v+u*b+l*_,i[2]=h*p+d*g+f*x,i[5]=h*m+d*y+f*w,i[8]=h*v+d*b+f*_,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-n*i*u+n*a*s+r*i*c-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],c=n[4],u=n[5],l=n[6],h=n[7],d=n[8],f=d*c-u*h,p=u*l-d*s,m=h*s-c*l,v=i*f+o*p+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=f*y,r[1]=(a*h-d*o)*y,r[2]=(u*o-a*c)*y,r[3]=p*y,r[4]=(d*i-a*l)*y,r[5]=(a*s-u*i)*y,r[6]=m*y,r[7]=(o*l-h*i)*y,r[8]=(c*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(i),c=Math.sin(i);this.set(n*s,n*c,-n*(s*o+c*a)+o+e,-r*c,r*s,-r*(-c*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],c=r[4],u=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*c,r[6]=t*a+n*u,r[1]=-n*i+t*s,r[4]=-n*o+t*c,r[7]=-n*a+t*u,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Ht={getDataURL:function(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height;var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},Xt=0;function qt(e,t,n,r,i,o,a,s,c,u){Object.defineProperty(this,"id",{value:Xt++}),this.uuid=Bt.generateUUID(),this.name="",this.image=void 0!==e?e:qt.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:qt.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:ge,this.wrapT=void 0!==r?r:ge,this.magFilter=void 0!==i?i:_e,this.minFilter=void 0!==o?o:Me,this.anisotropy=void 0!==c?c:1,this.format=void 0!==a?a:Be,this.type=void 0!==s?s:Te,this.offset=new zt(0,0),this.repeat=new zt(1,1),this.center=new zt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:Et,this.version=0,this.onUpdate=null}function Yt(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function Jt(e,t,n){this.width=e,this.height=t,this.scissor=new Yt(0,0,e,t),this.scissorTest=!1,this.viewport=new Yt(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=_e),this.texture=new qt(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0===n.generateMipmaps||n.generateMipmaps,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Qt(e,t,n){Jt.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function Zt(e,t,n,r,i,o,a,s,c,u,l,h){qt.call(this,null,o,a,s,c,u,r,i,l,h),this.image={data:e,width:t,height:n},this.magFilter=void 0!==c?c:be,this.minFilter=void 0!==u?u:be,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Kt(e,t){this.min=void 0!==e?e:new Gt(1/0,1/0,1/0),this.max=void 0!==t?t:new Gt(-1/0,-1/0,-1/0)}function $t(e,t){this.center=void 0!==e?e:new Gt,this.radius=void 0!==t?t:0}function en(e,t){this.normal=void 0!==e?e:new Gt(1,0,0),this.constant=void 0!==t?t:0}function tn(e,t,n,r,i,o){this.planes=[void 0!==e?e:new en,void 0!==t?t:new en,void 0!==n?n:new en,void 0!==r?r:new en,void 0!==i?i:new en,void 0!==o?o:new en]}qt.DEFAULT_IMAGE=void 0,qt.DEFAULT_MAPPING=ce,qt.prototype=Object.assign(Object.create(i.prototype),{constructor:qt,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Bt.generateUUID()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)i.push(Ht.getDataURL(r[o]))}else i=Ht.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==ce)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ve:e.x=e.x-Math.floor(e.x);break;case ge:e.x=e.x<0?0:1;break;case ye:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ve:e.y=e.y-Math.floor(e.y);break;case ge:e.y=e.y<0?0:1;break;case ye:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(qt.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Yt.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=e.elements,a=o[0],s=o[4],c=o[8],u=o[1],l=o[5],h=o[9],d=o[2],f=o[6],p=o[10];if(Math.abs(s-u)<.01&&Math.abs(c-d)<.01&&Math.abs(h-f)<.01){if(Math.abs(s+u)<.1&&Math.abs(c+d)<.1&&Math.abs(h+f)<.1&&Math.abs(a+l+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,v=(l+1)/2,g=(p+1)/2,y=(s+u)/4,b=(c+d)/4,x=(h+f)/4;return m>v&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(m)),i=b/n):v>g?v<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(v)),i=x/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=b/(i=Math.sqrt(g)),r=x/i),this.set(n,r,i,t),this}var w=Math.sqrt((f-h)*(f-h)+(c-d)*(c-d)+(u-s)*(u-s));return Math.abs(w)<.001&&(w=1),this.x=(f-h)/w,this.y=(c-d)/w,this.z=(u-s)/w,this.w=Math.acos((a+l+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new Yt,t=new Yt),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Jt.prototype=Object.assign(Object.create(i.prototype),{constructor:Jt,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Qt.prototype=Object.create(Jt.prototype),Qt.prototype.constructor=Qt,Qt.prototype.isWebGLRenderTargetCube=!0,Zt.prototype=Object.create(qt.prototype),Zt.prototype.constructor=Zt,Zt.prototype.isDataTexture=!0,Object.assign(Kt.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.length;s<c;s+=3){var u=e[s],l=e[s+1],h=e[s+2];u<t&&(t=u),l<n&&(n=l),h<r&&(r=h),u>i&&(i=u),l>o&&(o=l),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.count;s<c;s++){var u=e.getX(s),l=e.getY(s),h=e.getZ(s);u<t&&(t=u),l<n&&(n=l),h<r&&(r=h),u>i&&(i=u),l>o&&(o=l),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Gt;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Gt),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Gt),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,r=new Gt;function i(i){var o=i.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(t=0,n=a.length;t<n;t++)r.copy(a[t]),r.applyMatrix4(i.matrixWorld),e.expandByPoint(r)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(t=0,n=s.count;t<n;t++)r.fromBufferAttribute(s,t).applyMatrix4(i.matrixWorld),e.expandByPoint(r)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(i),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Gt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new Gt;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(){var e=new Gt,t=new Gt,n=new Gt,r=new Gt,i=new Gt,o=new Gt,a=new Gt,s=new Gt,c=new Gt,u=new Gt;function l(r){var i,o;for(i=0,o=r.length-3;i<=o;i+=3){a.fromArray(r,i);var s=c.x*Math.abs(a.x)+c.y*Math.abs(a.y)+c.z*Math.abs(a.z),u=e.dot(a),l=t.dot(a),h=n.dot(a);if(Math.max(-Math.max(u,l,h),Math.min(u,l,h))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),c.subVectors(this.max,s),e.subVectors(a.a,s),t.subVectors(a.b,s),n.subVectors(a.c,s),r.subVectors(t,e),i.subVectors(n,t),o.subVectors(e,n);var h=[0,-r.z,r.y,0,-i.z,i.y,0,-o.z,o.y,r.z,0,-r.x,i.z,0,-i.x,o.z,0,-o.x,-r.y,r.x,0,-i.y,i.x,0,-o.y,o.x,0];return!!l(h)&&(!!l(h=[1,0,0,0,1,0,0,0,1])&&(u.crossVectors(r,i),l(h=[u.x,u.y,u.z])))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Gt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Gt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new Gt;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new $t),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new Gt,new Gt,new Gt,new Gt,new Gt,new Gt,new Gt,new Gt];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign($t.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new Kt;return function(t,n){var r=this.center;void 0!==n?r.copy(n):e.setFromPoints(t).getCenter(r);for(var i=0,o=0,a=t.length;o<a;o++)i=Math.max(i,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Gt),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Kt),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(en.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new Gt,t=new Gt;return function(n,r,i){var o=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Gt),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new Gt;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new Gt);var r=t.delta(e),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/i;return o<0||o>1?void 0:n.copy(r).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Gt),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Gt,t=new Wt;return function(n,r){var i=r||t.getNormalMatrix(n),o=this.coplanarPoint(e).applyMatrix4(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(tn.prototype,{set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],u=n[6],l=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,l-s,p-h,y-m).normalize(),t[1].setComponents(a+r,l+s,p+h,y+m).normalize(),t[2].setComponents(a+i,l+c,p+d,y+v).normalize(),t[3].setComponents(a-i,l-c,p-d,y-v).normalize(),t[4].setComponents(a-o,l-u,p-f,y-g).normalize(),t[5].setComponents(a+o,l+u,p+f,y+g).normalize(),this},intersectsObject:function(){var e=new $t;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new $t;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:function(){var e=new Gt;return function(t){for(var n=this.planes,r=0;r<6;r++){var i=n[r];if(e.x=i.normal.x>0?t.max.x:t.min.x,e.y=i.normal.y>0?t.max.y:t.min.y,e.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(e)<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var nn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif\n",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif\n",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n}\n",background_vert:"varying vec2 vUv;\nvoid main() {\n\tvUv = uv;\n\tgl_Position = vec4( position, 1.0 );\n\tgl_Position.z = 1.0;\n}\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\tvec4 matcapColor = texture2D( matcap, uv );\n\tmatcapColor = matcapTexelToLinear( matcapColor );\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n"},rn={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}},on={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function an(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.assign(an.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=Bt.euclideanModulo(t,1),n=Bt.clamp(n,0,1),r=Bt.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,o=2*r-i;this.r=e(o,i,t+1/3),this.g=e(o,i,t),this.b=e(o,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,c=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,c)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u,l=(u=n[1]).length;if(3===l)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(u=on[e])?this.setHex(u):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),c=(s+a)/2;if(s===a)t=0,n=0;else{var u=a-s;switch(n=c<=.5?u/(a+s):u/(2-a-s),a){case r:t=(i-o)/u+(i<o?6:0);break;case i:t=(o-r)/u+2;break;case o:t=(r-i)/u+4}t/=6}return e.h=t,e.s=n,e.l=c,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,n,r){return this.getHSL(e),e.h+=t,e.s+=n,e.l+=r,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(){var e={h:0,s:0,l:0},t={h:0,s:0,l:0};return function(n,r){this.getHSL(e),n.getHSL(t);var i=Bt.lerp(e.h,t.h,r),o=Bt.lerp(e.s,t.s,r),a=Bt.lerp(e.l,t.l,r);return this.setHSL(i,o,a),this}}(),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var sn={common:{diffuse:{value:new an(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Wt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new zt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new an(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new an(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Wt}},sprite:{diffuse:{value:new an(15658734)},opacity:{value:1},center:{value:new zt(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new Wt}}},cn={basic:{uniforms:rn.merge([sn.common,sn.specularmap,sn.envmap,sn.aomap,sn.lightmap,sn.fog]),vertexShader:nn.meshbasic_vert,fragmentShader:nn.meshbasic_frag},lambert:{uniforms:rn.merge([sn.common,sn.specularmap,sn.envmap,sn.aomap,sn.lightmap,sn.emissivemap,sn.fog,sn.lights,{emissive:{value:new an(0)}}]),vertexShader:nn.meshlambert_vert,fragmentShader:nn.meshlambert_frag},phong:{uniforms:rn.merge([sn.common,sn.specularmap,sn.envmap,sn.aomap,sn.lightmap,sn.emissivemap,sn.bumpmap,sn.normalmap,sn.displacementmap,sn.gradientmap,sn.fog,sn.lights,{emissive:{value:new an(0)},specular:{value:new an(1118481)},shininess:{value:30}}]),vertexShader:nn.meshphong_vert,fragmentShader:nn.meshphong_frag},standard:{uniforms:rn.merge([sn.common,sn.envmap,sn.aomap,sn.lightmap,sn.emissivemap,sn.bumpmap,sn.normalmap,sn.displacementmap,sn.roughnessmap,sn.metalnessmap,sn.fog,sn.lights,{emissive:{value:new an(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag},matcap:{uniforms:rn.merge([sn.common,sn.bumpmap,sn.normalmap,sn.displacementmap,sn.fog,{matcap:{value:null}}]),vertexShader:nn.meshmatcap_vert,fragmentShader:nn.meshmatcap_frag},points:{uniforms:rn.merge([sn.points,sn.fog]),vertexShader:nn.points_vert,fragmentShader:nn.points_frag},dashed:{uniforms:rn.merge([sn.common,sn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nn.linedashed_vert,fragmentShader:nn.linedashed_frag},depth:{uniforms:rn.merge([sn.common,sn.displacementmap]),vertexShader:nn.depth_vert,fragmentShader:nn.depth_frag},normal:{uniforms:rn.merge([sn.common,sn.bumpmap,sn.normalmap,sn.displacementmap,{opacity:{value:1}}]),vertexShader:nn.normal_vert,fragmentShader:nn.normal_frag},sprite:{uniforms:rn.merge([sn.sprite,sn.fog]),vertexShader:nn.sprite_vert,fragmentShader:nn.sprite_frag},background:{uniforms:{t2D:{value:null}},vertexShader:nn.background_vert,fragmentShader:nn.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nn.cube_vert,fragmentShader:nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nn.equirect_vert,fragmentShader:nn.equirect_frag},distanceRGBA:{uniforms:rn.merge([sn.common,sn.displacementmap,{referencePosition:{value:new Gt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nn.distanceRGBA_vert,fragmentShader:nn.distanceRGBA_frag},shadow:{uniforms:rn.merge([sn.lights,sn.fog,{color:{value:new an(0)},opacity:{value:1}}]),vertexShader:nn.shadow_vert,fragmentShader:nn.shadow_frag}};function un(){var e=null,t=!1,n=null;function r(i,o){!1!==t&&(n(i,o),e.requestAnimationFrame(r))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(r),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function ln(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);void 0===i?t.set(n,function(t,n){var r=t.array,i=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback();var a=e.FLOAT;return r instanceof Float32Array?a=e.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=e.UNSIGNED_SHORT:r instanceof Int16Array?a=e.SHORT:r instanceof Uint32Array?a=e.UNSIGNED_INT:r instanceof Int32Array?a=e.INT:r instanceof Int8Array?a=e.BYTE:r instanceof Uint8Array&&(a=e.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(n,r)):i.version<n.version&&(function(t,n,r){var i=n.array,o=n.updateRange;e.bindBuffer(r,t),!1===n.dynamic?e.bufferData(r,i,e.STATIC_DRAW):-1===o.count?e.bufferSubData(r,0,i):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(i.buffer,n,r),i.version=n.version)}}}function hn(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new Gt,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new an,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function dn(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||dn.DefaultOrder}function fn(){this.mask=1}cn.physical={uniforms:rn.merge([cn.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag},Object.assign(hn.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}),dn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],dn.DefaultOrder="XYZ",Object.defineProperties(dn.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(dn.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Bt.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],c=i[1],u=i[5],l=i[9],h=i[2],d=i[6],f=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-l,f),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(s,f),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o))):"ZYX"===t?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,f),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u))):"YZX"===t?(this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,f))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(d,u),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-l,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new jt;return function(t,n,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new Vt;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Gt(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(fn.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var pn=0;function mn(){Object.defineProperty(this,"id",{value:pn++}),this.uuid=Bt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=mn.DefaultUp.clone();var e=new Gt,t=new dn,n=new Vt,r=new Gt(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new jt},normalMatrix:{value:new Wt}}),this.matrix=new jt,this.matrixWorld=new jt,this.matrixAutoUpdate=mn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new fn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}mn.DefaultUp=new Gt(0,1,0),mn.DefaultMatrixAutoUpdate=!0,mn.prototype=Object.assign(Object.create(i.prototype),{constructor:mn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new Vt;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new Vt;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new Gt(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new Gt(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new Gt(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new Gt;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new Gt(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new Gt(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new Gt(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new jt;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new Vt,t=new jt,n=new Gt,r=new Gt;return function(i,o,a){i.isVector3?n.copy(i):n.set(i,o,a);var s=this.parent;this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld),this.isCamera?t.lookAt(r,n,this.up):t.lookAt(n,r,this.up),this.quaternion.setFromRotationMatrix(t),s&&(t.extractRotation(s.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse()))}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Gt),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new Gt,t=new Gt;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new Vt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldScale:function(){var e=new Gt,t=new Vt;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new Gt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Gt),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,c=a.length;s<c;s++){var u=a[s];i(e.shapes,u)}else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,c=this.material.length;s<c;s++)l.push(i(e.materials,this.material[s]));r.material=l}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object)}if(t){var h=m(e.geometries),d=m(e.materials),f=m(e.textures),p=m(e.images);a=m(e.shapes);h.length>0&&(n.geometries=h),d.length>0&&(n.materials=d),f.length>0&&(n.textures=f),p.length>0&&(n.images=p),a.length>0&&(n.shapes=a)}return n.object=r,n;function m(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}});var vn=0;function gn(){Object.defineProperty(this,"id",{value:vn+=2}),this.uuid=Bt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function yn(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function bn(e,t,n){yn.call(this,new Int8Array(e),t,n)}function xn(e,t,n){yn.call(this,new Uint8Array(e),t,n)}function wn(e,t,n){yn.call(this,new Uint8ClampedArray(e),t,n)}function _n(e,t,n){yn.call(this,new Int16Array(e),t,n)}function Sn(e,t,n){yn.call(this,new Uint16Array(e),t,n)}function Mn(e,t,n){yn.call(this,new Int32Array(e),t,n)}function Tn(e,t,n){yn.call(this,new Uint32Array(e),t,n)}function An(e,t,n){yn.call(this,new Float32Array(e),t,n)}function En(e,t,n){yn.call(this,new Float64Array(e),t,n)}function Cn(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Pn(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}gn.prototype=Object.assign(Object.create(i.prototype),{constructor:gn,isGeometry:!0,applyMatrix:function(e){for(var t=(new Wt).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(e)}for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new jt;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new jt;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new jt;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new jt;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new jt;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new mn;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes,i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,c=void 0!==r.uv2?r.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var u=[],l=[],h=[],d=0,f=0;d<i.length;d+=3,f+=2)t.vertices.push(new Gt(i[d],i[d+1],i[d+2])),void 0!==o&&u.push(new Gt(o[d],o[d+1],o[d+2])),void 0!==a&&t.colors.push(new an(a[d],a[d+1],a[d+2])),void 0!==s&&l.push(new zt(s[f],s[f+1])),void 0!==c&&h.push(new zt(c[f],c[f+1]));function p(e,n,r,i){var d=new hn(e,n,r,void 0!==o?[u[e].clone(),u[n].clone(),u[r].clone()]:[],void 0!==a?[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()]:[],i);t.faces.push(d),void 0!==s&&t.faceVertexUvs[0].push([l[e].clone(),l[n].clone(),l[r].clone()]),void 0!==c&&t.faceVertexUvs[1].push([h[e].clone(),h[n].clone(),h[r].clone()])}var m=e.groups;if(m.length>0)for(d=0;d<m.length;d++)for(var v=m[d],g=v.start,y=(f=g,g+v.count);f<y;f+=3)void 0!==n?p(n[f],n[f+1],n[f+2],v.materialIndex):p(f,f+1,f+2,v.materialIndex);else if(void 0!==n)for(d=0;d<n.length;d+=3)p(n[d],n[d+1],n[d+2]);else for(d=0;d<i.length/3;d+=3)p(d,d+1,d+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new Gt;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new jt;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new Gt,t=new Gt,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new Gt;if(e){var s,c,u,l=new Gt,h=new Gt;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],c=this.vertices[o.b],u=this.vertices[o.c],l.subVectors(u,c),h.subVectors(s,c),l.cross(h),a[o.a].add(l),a[o.b].add(l),a[o.c].add(l)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){var d=(o=this.faces[r]).vertexNormals;3===d.length?(d[0].copy(a[o.a]),d[1].copy(a[o.b]),d[2].copy(a[o.c])):(d[0]=a[o.a].clone(),d[1]=a[o.b].clone(),d[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(n=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new gn;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)c=new Gt,u={a:new Gt,b:new Gt,c:new Gt},a.push(c),s.push(u)}var c,u,l=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],c=l.faceNormals[n],u=l.vertexNormals[n],c.copy(i.normal),u.a.copy(i.vertexNormals[0]),u.b.copy(i.vertexNormals[1]),u.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Kt),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new $t),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,c=e.faces,u=this.faceVertexUvs[0],l=e.faceVertexUvs[0],h=this.colors,d=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new Wt).getNormalMatrix(t));for(var f=0,p=a.length;f<p;f++){var m=a[f].clone();void 0!==t&&m.applyMatrix4(t),o.push(m)}for(f=0,p=d.length;f<p;f++)h.push(d[f].clone());for(f=0,p=c.length;f<p;f++){var v,g,y,b=c[f],x=b.vertexNormals,w=b.vertexColors;(v=new hn(b.a+i,b.b+i,b.c+i)).normal.copy(b.normal),void 0!==r&&v.normal.applyMatrix3(r).normalize();for(var _=0,S=x.length;_<S;_++)g=x[_].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),v.vertexNormals.push(g);v.color.copy(b.color);for(_=0,S=w.length;_<S;_++)y=w[_],v.vertexColors.push(y.clone());v.materialIndex=b.materialIndex+n,s.push(v)}for(f=0,p=l.length;f<p;f++){var M=l[f],T=[];if(void 0!==M){for(_=0,S=M.length;_<S;_++)T.push(M[_].clone());u.push(T)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,o,a,s,c={},u=[],l=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],void 0===c[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(c[t]=n,u.push(this.vertices[n]),l[n]=u.length-1):l[n]=l[c[t]];var d=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=l[i.a],i.b=l[i.b],i.c=l[i.c],o=[i.a,i.b,i.c];for(var f=0;f<3;f++)if(o[f]===o[(f+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var p=d[n];for(this.faces.splice(p,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(p,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new Gt(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]);for(n=0;n<t;n++){var s=e[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],c={},u=[],l={},h=[],d={};for(i=0;i<this.faces.length;i++){var f=this.faces[i],p=void 0!==this.faceVertexUvs[0][i],m=f.normal.length()>0,v=f.vertexNormals.length>0,g=1!==f.color.r||1!==f.color.g||1!==f.color.b,y=f.vertexColors.length>0,b=0;if(b=S(b=S(b=S(b=S(b=S(b=S(b=S(b=S(b,0,0),1,!0),2,!1),3,p),4,m),5,v),6,g),7,y),a.push(b),a.push(f.a,f.b,f.c),a.push(f.materialIndex),p){var x=this.faceVertexUvs[0][i];a.push(A(x[0]),A(x[1]),A(x[2]))}if(m&&a.push(M(f.normal)),v){var w=f.vertexNormals;a.push(M(w[0]),M(w[1]),M(w[2]))}if(g&&a.push(T(f.color)),y){var _=f.vertexColors;a.push(T(_[0]),T(_[1]),T(_[2]))}}function S(e,t,n){return n?e|1<<t:e&~(1<<t)}function M(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]?c[t]:(c[t]=s.length/3,s.push(e.x,e.y,e.z),c[t])}function T(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==l[t]?l[t]:(l[t]=u.length,u.push(e.getHex()),l[t])}function A(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]?d[t]:(d[t]=h.length/2,h.push(e.x,e.y),d[t])}return e.data={},e.data.vertices=r,e.data.normals=s,u.length>0&&(e.data.colors=u),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new gn).copy(this)},copy:function(e){var t,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var c=e.colors;for(t=0,n=c.length;t<n;t++)this.colors.push(c[t].clone());var u=e.faces;for(t=0,n=u.length;t<n;t++)this.faces.push(u[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var l=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,i=l.length;r<i;r++){var h=l[r],d=[];for(o=0,a=h.length;o<a;o++){var f=h[o];d.push(f.clone())}this.faceVertexUvs[t].push(d)}}var p=e.morphTargets;for(t=0,n=p.length;t<n;t++){var m={};if(m.name=p[t].name,void 0!==p[t].vertices)for(m.vertices=[],r=0,i=p[t].vertices.length;r<i;r++)m.vertices.push(p[t].vertices[r].clone());if(void 0!==p[t].normals)for(m.normals=[],r=0,i=p[t].normals.length;r<i;r++)m.normals.push(p[t].normals[r].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,n=v.length;t<n;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],r=0,i=v[t].vertexNormals.length;r<i;r++){var y=v[t].vertexNormals[r],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),g.vertexNormals.push(b)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],r=0,i=v[t].faceNormals.length;r<i;r++)g.faceNormals.push(v[t].faceNormals[r].clone());this.morphNormals.push(g)}var x=e.skinWeights;for(t=0,n=x.length;t<n;t++)this.skinWeights.push(x[t].clone());var w=e.skinIndices;for(t=0,n=w.length;t<n;t++)this.skinIndices.push(w[t].clone());var _=e.lineDistances;for(t=0,n=_.length;t<n;t++)this.lineDistances.push(_[t]);var S=e.boundingBox;null!==S&&(this.boundingBox=S.clone());var M=e.boundingSphere;return null!==M&&(this.boundingSphere=M.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(yn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(yn.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new an),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new zt),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new Gt),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Yt),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),bn.prototype=Object.create(yn.prototype),bn.prototype.constructor=bn,xn.prototype=Object.create(yn.prototype),xn.prototype.constructor=xn,wn.prototype=Object.create(yn.prototype),wn.prototype.constructor=wn,_n.prototype=Object.create(yn.prototype),_n.prototype.constructor=_n,Sn.prototype=Object.create(yn.prototype),Sn.prototype.constructor=Sn,Mn.prototype=Object.create(yn.prototype),Mn.prototype.constructor=Mn,Tn.prototype=Object.create(yn.prototype),Tn.prototype.constructor=Tn,An.prototype=Object.create(yn.prototype),An.prototype.constructor=An,En.prototype=Object.create(yn.prototype),En.prototype.constructor=En,Object.assign(Cn.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,c=s.length;if(c>0){t=[];for(var u=0;u<c;u++)t[u]={name:s[u].name,data:[]};this.morphTargets.position=t}var l,h=e.morphNormals,d=h.length;if(d>0){l=[];for(u=0;u<d;u++)l[u]={name:h[u].name,data:[]};this.morphTargets.normal=l}var f=e.skinIndices,p=e.skinWeights,m=f.length===r.length,v=p.length===r.length;r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(u=0;u<n.length;u++){var g=n[u];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=g.normal;this.normals.push(b,b,b)}var x,w=g.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var _=g.color;this.colors.push(_,_,_)}if(!0===o)void 0!==(x=i[0][u])?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new zt,new zt,new zt));if(!0===a)void 0!==(x=i[1][u])?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new zt,new zt,new zt));for(var S=0;S<c;S++){var M=s[S].vertices;t[S].data.push(M[g.a],M[g.b],M[g.c])}for(S=0;S<d;S++){var T=h[S].vertexNormals[u];l[S].data.push(T.a,T.b,T.c)}m&&this.skinIndices.push(f[g.a],f[g.b],f[g.c]),v&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Ln=1;function On(){Object.defineProperty(this,"id",{value:Ln+=2}),this.uuid=Bt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Nn(e,t,n,r,i,o){gn.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Rn(e,t,n,r,i,o)),this.mergeVertices()}function Rn(e,t,n,r,i,o){On.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1;var s=[],c=[],u=[],l=[],h=0,d=0;function f(e,t,n,r,i,o,f,p,m,v,g){var y,b,x=o/m,w=f/v,_=o/2,S=f/2,M=p/2,T=m+1,A=v+1,E=0,C=0,P=new Gt;for(b=0;b<A;b++){var L=b*w-S;for(y=0;y<T;y++){var O=y*x-_;P[e]=O*r,P[t]=L*i,P[n]=M,c.push(P.x,P.y,P.z),P[e]=0,P[t]=0,P[n]=p>0?1:-1,u.push(P.x,P.y,P.z),l.push(y/m),l.push(1-b/v),E+=1}}for(b=0;b<v;b++)for(y=0;y<m;y++){var N=h+y+T*b,R=h+y+T*(b+1),I=h+(y+1)+T*(b+1),D=h+(y+1)+T*b;s.push(N,R,D),s.push(R,I,D),C+=6}a.addGroup(d,C,g),d+=C,h+=E}f("z","y","x",-1,-1,n,t,e,o=Math.floor(o)||1,i,0),f("z","y","x",1,-1,n,t,-e,o,i,1),f("x","z","y",1,1,e,n,t,r,o,2),f("x","z","y",1,-1,e,n,-t,r,o,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new An(c,3)),this.addAttribute("normal",new An(u,3)),this.addAttribute("uv",new An(l,2))}function In(e,t,n,r){gn.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Dn(e,t,n,r)),this.mergeVertices()}function Dn(e,t,n,r){On.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i,o,a=(e=e||1)/2,s=(t=t||1)/2,c=Math.floor(n)||1,u=Math.floor(r)||1,l=c+1,h=u+1,d=e/c,f=t/u,p=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*f-s;for(i=0;i<l;i++){var b=i*d-a;m.push(b,-y,0),v.push(0,0,1),g.push(i/c),g.push(1-o/u)}}for(o=0;o<u;o++)for(i=0;i<c;i++){var x=i+l*o,w=i+l*(o+1),_=i+1+l*(o+1),S=i+1+l*o;p.push(x,w,S),p.push(w,_,S)}this.setIndex(p),this.addAttribute("position",new An(m,3)),this.addAttribute("normal",new An(v,3)),this.addAttribute("uv",new An(g,2))}On.prototype=Object.assign(Object.create(i.prototype),{constructor:On,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Pn(e)>65535?Tn:Sn)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new yn(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new Wt).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new jt;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new jt;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new jt;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new jt;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new jt;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new mn;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new Gt;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new An(3*t.vertices.length,3),r=new An(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new An(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new An(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Cn).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new yn(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new yn(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new yn(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new yn(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new yn(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],c=e.morphTargets[a],u=0,l=c.length;u<l;u++){var h=c[u],d=new An(3*h.data.length,3);d.name=h.name,s.push(d.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var f=new An(4*e.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var p=new An(4*e.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Kt);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new Kt,t=new Gt;return function(){null===this.boundingSphere&&(this.boundingSphere=new $t);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(r);for(var i=0,o=0,a=n.count;o<a;o++)t.x=n.getX(o),t.y=n.getY(o),t.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new yn(new Float32Array(n.length),3));else for(var r=t.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;var a,s,c,u=t.normal.array,l=new Gt,h=new Gt,d=new Gt,f=new Gt,p=new Gt;if(e){var m=e.array;for(i=0,o=e.count;i<o;i+=3)a=3*m[i+0],s=3*m[i+1],c=3*m[i+2],l.fromArray(n,a),h.fromArray(n,s),d.fromArray(n,c),f.subVectors(d,h),p.subVectors(l,h),f.cross(p),u[a]+=f.x,u[a+1]+=f.y,u[a+2]+=f.z,u[s]+=f.x,u[s+1]+=f.y,u[s+2]+=f.z,u[c]+=f.x,u[c+1]+=f.y,u[c+2]+=f.z}else for(i=0,o=n.length;i<o;i+=9)l.fromArray(n,i),h.fromArray(n,i+3),d.fromArray(n,i+6),f.subVectors(d,h),p.subVectors(l,h),f.cross(p),u[i]=f.x,u[i+1]=f.y,u[i+2]=f.z,u[i+3]=f.x,u[i+4]=f.y,u[i+5]=f.z,u[i+6]=f.x,u[i+7]=f.y,u[i+8]=f.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=0,c=o.itemSize*t;s<a.length;s++,c++)i[c]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new Gt;return function(){for(var t=this.attributes.normal,n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new On,t=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,a=i.itemSize,s=new o.constructor(t.length*a),c=0,u=0,l=0,h=t.length;l<h;l++){c=t[l]*a;for(var d=0;d<a;d++)s[u++]=o[c++]}e.addAttribute(r,new yn(s,a))}var f=this.groups;for(l=0,h=f.length;l<h;l++){var p=f[l];e.addGroup(p.start,p.count,p.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n];i=Array.prototype.slice.call(a.array);e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return null!==c&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e},clone:function(){return(new On).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o){var a=o[t];this.addAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var c=[],u=s[t];for(n=0,r=u.length;n<r;n++)c.push(u[n].clone());this.morphAttributes[t]=c}var l=e.groups;for(n=0,r=l.length;n<r;n++){var h=l[n];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Nn.prototype=Object.create(gn.prototype),Nn.prototype.constructor=Nn,Rn.prototype=Object.create(On.prototype),Rn.prototype.constructor=Rn,In.prototype=Object.create(gn.prototype),In.prototype.constructor=In,Dn.prototype=Object.create(On.prototype),Dn.prototype.constructor=Dn;var Fn=0;function kn(){Object.defineProperty(this,"id",{value:Fn++}),this.uuid=Bt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=T,this.side=v,this.flatShading=!1,this.vertexColors=w,this.opacity=1,this.transparent=!1,this.blendSrc=B,this.blendDst=z,this.blendEquation=L,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=J,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function Un(e){kn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Bn(e,t){this.origin=void 0!==e?e:new Gt,this.direction=void 0!==t?t:new Gt}function zn(e,t,n){this.a=void 0!==e?e:new Gt,this.b=void 0!==t?t:new Gt,this.c=void 0!==n?n:new Gt}function jn(e){kn.call(this),this.type="MeshBasicMaterial",this.color=new an(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ee,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Vn(e,t){mn.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new On,this.material=void 0!==t?t:new jn({color:16777215*Math.random()}),this.drawMode=Mt,this.updateMorphTargets()}function Gn(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Wn(e,t,n,r,i,o,a,s,c,u){e=void 0!==e?e:[],t=void 0!==t?t:ue,qt.call(this,e,t,n,r,i,o,a,s,c,u),this.flipY=!1}function Hn(e,t,n,r){qt.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=be,this.minFilter=be,this.generateMipmaps=!1,this.flipY=!1}kn.prototype=Object.assign(Object.create(i.prototype),{constructor:kn,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]="overdraw"===t?Number(n):n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===b;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==T&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==v&&(n.side=this.side),this.vertexColors!==w&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Un.prototype=Object.create(kn.prototype),Un.prototype.constructor=Un,Un.prototype.isShaderMaterial=!0,Un.prototype.copy=function(e){return kn.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=rn.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Un.prototype.toJSON=function(e){var t=kn.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var r=this.uniforms[n].value;r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}return Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(Bn.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Gt),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new Gt;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Gt),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Gt;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new Gt,t=new Gt,n=new Gt;return function(r,i,o,a){e.copy(r).add(i).multiplyScalar(.5),t.copy(i).sub(r).normalize(),n.copy(this.origin).sub(e);var s,c,u,l,h=.5*r.distanceTo(i),d=-this.direction.dot(t),f=n.dot(this.direction),p=-n.dot(t),m=n.lengthSq(),v=Math.abs(1-d*d);if(v>0)if(c=d*f-p,l=h*v,(s=d*p-f)>=0)if(c>=-l)if(c<=l){var g=1/v;u=(s*=g)*(s+d*(c*=g)+2*f)+c*(d*s+c+2*p)+m}else c=h,u=-(s=Math.max(0,-(d*c+f)))*s+c*(c+2*p)+m;else c=-h,u=-(s=Math.max(0,-(d*c+f)))*s+c*(c+2*p)+m;else c<=-l?u=-(s=Math.max(0,-(-d*h+f)))*s+(c=s>0?-h:Math.min(Math.max(-h,-p),h))*(c+2*p)+m:c<=l?(s=0,u=(c=Math.min(Math.max(-h,-p),h))*(c+2*p)+m):u=-(s=Math.max(0,-(d*h+f)))*s+(c=s>0?h:Math.min(Math.max(-h,-p),h))*(c+2*p)+m;else c=d>0?-h:h,u=-(s=Math.max(0,-(d*c+f)))*s+c*(c+2*p)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(c).add(e),u}}(),intersectSphere:function(){var e=new Gt;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,c=r+a;return s<0&&c<0?null:s<0?this.at(c,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,c=1/this.direction.x,u=1/this.direction.y,l=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(i=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),l>=0?(a=(e.min.z-h.z)*l,s=(e.max.z-h.z)*l):(a=(e.max.z-h.z)*l,s=(e.min.z-h.z)*l),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(){var e=new Gt;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new Gt,t=new Gt,n=new Gt,r=new Gt;return function(i,o,a,s,c){t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n);var u,l=this.direction.dot(r);if(l>0){if(s)return null;u=1}else{if(!(l<0))return null;u=-1,l=-l}e.subVectors(this.origin,i);var h=u*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var d=u*this.direction.dot(t.cross(e));if(d<0)return null;if(h+d>l)return null;var f=-u*e.dot(r);return f<0?null:this.at(f/l,c)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(zn,{getNormal:function(){var e=new Gt;return function(t,n,r,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new Gt),i.subVectors(r,n),e.subVectors(t,n),i.cross(e);var o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}}(),getBarycoord:function(){var e=new Gt,t=new Gt,n=new Gt;return function(r,i,o,a,s){e.subVectors(a,i),t.subVectors(o,i),n.subVectors(r,i);var c=e.dot(e),u=e.dot(t),l=e.dot(n),h=t.dot(t),d=t.dot(n),f=c*h-u*u;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new Gt),0===f)return s.set(-2,-1,-1);var p=1/f,m=(h*l-u*d)*p,v=(c*d-u*l)*p;return s.set(1-m-v,v,m)}}(),containsPoint:function(){var e=new Gt;return function(t,n,r,i){return zn.getBarycoord(t,n,r,i,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}(),getUV:function(){var e=new Gt;return function(t,n,r,i,o,a,s,c){return this.getBarycoord(t,n,r,i,e),c.set(0,0),c.addScaledVector(o,e.x),c.addScaledVector(a,e.y),c.addScaledVector(s,e.z),c}}()}),Object.assign(zn.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new Gt,t=new Gt;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Gt),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return zn.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Gt),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return zn.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return zn.containsPoint(e,this.a,this.b,this.c)},getUV:function(e,t,n,r,i){return zn.getUV(e,this.a,this.b,this.c,t,n,r,i)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new Gt,t=new Gt,n=new Gt,r=new Gt,i=new Gt,o=new Gt;return function(a,s){void 0===s&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),s=new Gt);var c,u,l=this.a,h=this.b,d=this.c;e.subVectors(h,l),t.subVectors(d,l),r.subVectors(a,l);var f=e.dot(r),p=t.dot(r);if(f<=0&&p<=0)return s.copy(l);i.subVectors(a,h);var m=e.dot(i),v=t.dot(i);if(m>=0&&v<=m)return s.copy(h);var g=f*v-m*p;if(g<=0&&f>=0&&m<=0)return c=f/(f-m),s.copy(l).addScaledVector(e,c);o.subVectors(a,d);var y=e.dot(o),b=t.dot(o);if(b>=0&&y<=b)return s.copy(d);var x=y*p-f*b;if(x<=0&&p>=0&&b<=0)return u=p/(p-b),s.copy(l).addScaledVector(t,u);var w=m*b-y*v;if(w<=0&&v-m>=0&&y-b>=0)return n.subVectors(d,h),u=(v-m)/(v-m+(y-b)),s.copy(h).addScaledVector(n,u);var _=1/(w+x+g);return c=x*_,u=g*_,s.copy(l).addScaledVector(e,c).addScaledVector(t,u)}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),jn.prototype=Object.create(kn.prototype),jn.prototype.constructor=jn,jn.prototype.isMeshBasicMaterial=!0,jn.prototype.copy=function(e){return kn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Vn.prototype=Object.assign(Object.create(mn.prototype),{constructor:Vn,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return mn.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){var e=new jt,t=new Bn,n=new $t,r=new Gt,i=new Gt,o=new Gt,a=new Gt,s=new Gt,c=new Gt,u=new zt,l=new zt,h=new zt,d=new Gt,f=new Gt;function p(e,t,n,r,i,o,a,s){if(null===(t.side===g?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==y,s)))return null;f.copy(s),f.applyMatrix4(e.matrixWorld);var c=n.ray.origin.distanceTo(f);return c<n.near||c>n.far?null:{distance:c,point:f.clone(),object:e}}function m(e,t,n,a,s,c,f,m,v){r.fromBufferAttribute(s,f),i.fromBufferAttribute(s,m),o.fromBufferAttribute(s,v);var g=p(e,t,n,a,r,i,o,d);if(g){c&&(u.fromBufferAttribute(c,f),l.fromBufferAttribute(c,m),h.fromBufferAttribute(c,v),g.uv=zn.getUV(d,r,i,o,u,l,h,new zt));var y=new hn(f,m,v);zn.getNormal(r,i,o,y.normal),g.face=y}return g}return function(f,v){var g,y=this.geometry,b=this.material,x=this.matrixWorld;if(void 0!==b&&(null===y.boundingSphere&&y.computeBoundingSphere(),n.copy(y.boundingSphere),n.applyMatrix4(x),!1!==f.ray.intersectsSphere(n)&&(e.getInverse(x),t.copy(f.ray).applyMatrix4(e),null===y.boundingBox||!1!==t.intersectsBox(y.boundingBox))))if(y.isBufferGeometry){var w,_,S,M,T,A,E,C,P,L=y.index,O=y.attributes.position,N=y.attributes.uv,R=y.groups,I=y.drawRange;if(null!==L)if(Array.isArray(b))for(M=0,A=R.length;M<A;M++)for(P=b[(C=R[M]).materialIndex],T=Math.max(C.start,I.start),E=Math.min(C.start+C.count,I.start+I.count);T<E;T+=3)w=L.getX(T),_=L.getX(T+1),S=L.getX(T+2),(g=m(this,P,f,t,O,N,w,_,S))&&(g.faceIndex=Math.floor(T/3),v.push(g));else for(M=Math.max(0,I.start),A=Math.min(L.count,I.start+I.count);M<A;M+=3)w=L.getX(M),_=L.getX(M+1),S=L.getX(M+2),(g=m(this,b,f,t,O,N,w,_,S))&&(g.faceIndex=Math.floor(M/3),v.push(g));else if(void 0!==O)if(Array.isArray(b))for(M=0,A=R.length;M<A;M++)for(P=b[(C=R[M]).materialIndex],T=Math.max(C.start,I.start),E=Math.min(C.start+C.count,I.start+I.count);T<E;T+=3)(g=m(this,P,f,t,O,N,w=T,_=T+1,S=T+2))&&(g.faceIndex=Math.floor(T/3),v.push(g));else for(M=Math.max(0,I.start),A=Math.min(O.count,I.start+I.count);M<A;M+=3)(g=m(this,b,f,t,O,N,w=M,_=M+1,S=M+2))&&(g.faceIndex=Math.floor(M/3),v.push(g))}else if(y.isGeometry){var D,F,k,U,B=Array.isArray(b),z=y.vertices,j=y.faces,V=y.faceVertexUvs[0];V.length>0&&(U=V);for(var G=0,W=j.length;G<W;G++){var H=j[G],X=B?b[H.materialIndex]:b;if(void 0!==X){if(D=z[H.a],F=z[H.b],k=z[H.c],!0===X.morphTargets){var q=y.morphTargets,Y=this.morphTargetInfluences;r.set(0,0,0),i.set(0,0,0),o.set(0,0,0);for(var J=0,Q=q.length;J<Q;J++){var Z=Y[J];if(0!==Z){var K=q[J].vertices;r.addScaledVector(a.subVectors(K[H.a],D),Z),i.addScaledVector(s.subVectors(K[H.b],F),Z),o.addScaledVector(c.subVectors(K[H.c],k),Z)}}r.add(D),i.add(F),o.add(k),D=r,F=i,k=o}if(g=p(this,X,f,t,D,F,k,d)){if(U&&U[G]){var $=U[G];u.copy($[0]),l.copy($[1]),h.copy($[2]),g.uv=zn.getUV(d,D,F,k,u,l,h,new zt)}g.face=H,g.faceIndex=G,v.push(g)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Wn.prototype=Object.create(qt.prototype),Wn.prototype.constructor=Wn,Wn.prototype.isCubeTexture=!0,Object.defineProperty(Wn.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),Hn.prototype=Object.create(qt.prototype),Hn.prototype.constructor=Hn,Hn.prototype.isDataTexture3D=!0;var Xn=new qt,qn=new Hn,Yn=new Wn;function Jn(){this.seq=[],this.map={}}var Qn=[],Zn=[],Kn=new Float32Array(16),$n=new Float32Array(9),er=new Float32Array(4);function tr(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=Qn[i];if(void 0===o&&(o=new Float32Array(i),Qn[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function nr(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function rr(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function ir(e,t){var n=Zn[t];void 0===n&&(n=new Int32Array(t),Zn[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function or(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function ar(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function sr(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(nr(n,t))return;e.uniform2fv(this.addr,t),rr(n,t)}}function cr(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(nr(n,t))return;e.uniform3fv(this.addr,t),rr(n,t)}}function ur(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(nr(n,t))return;e.uniform4fv(this.addr,t),rr(n,t)}}function lr(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(nr(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),rr(n,t)}else{if(nr(n,r))return;er.set(r),e.uniformMatrix2fv(this.addr,!1,er),rr(n,r)}}function hr(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(nr(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),rr(n,t)}else{if(nr(n,r))return;$n.set(r),e.uniformMatrix3fv(this.addr,!1,$n),rr(n,r)}}function dr(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(nr(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),rr(n,t)}else{if(nr(n,r))return;Kn.set(r),e.uniformMatrix4fv(this.addr,!1,Kn),rr(n,r)}}function fr(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||Xn,i)}function pr(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||qn,i)}function mr(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||Yn,i)}function vr(e,t){var n=this.cache;nr(n,t)||(e.uniform2iv(this.addr,t),rr(n,t))}function gr(e,t){var n=this.cache;nr(n,t)||(e.uniform3iv(this.addr,t),rr(n,t))}function yr(e,t){var n=this.cache;nr(n,t)||(e.uniform4iv(this.addr,t),rr(n,t))}function br(e,t){var n=this.cache;nr(n,t)||(e.uniform1fv(this.addr,t),rr(n,t))}function xr(e,t){var n=this.cache;nr(n,t)||(e.uniform1iv(this.addr,t),rr(n,t))}function wr(e,t){var n=this.cache,r=tr(t,this.size,2);nr(n,r)||(e.uniform2fv(this.addr,r),this.updateCache(r))}function _r(e,t){var n=this.cache,r=tr(t,this.size,3);nr(n,r)||(e.uniform3fv(this.addr,r),this.updateCache(r))}function Sr(e,t){var n=this.cache,r=tr(t,this.size,4);nr(n,r)||(e.uniform4fv(this.addr,r),this.updateCache(r))}function Mr(e,t){var n=this.cache,r=tr(t,this.size,4);nr(n,r)||(e.uniformMatrix2fv(this.addr,!1,r),this.updateCache(r))}function Tr(e,t){var n=this.cache,r=tr(t,this.size,9);nr(n,r)||(e.uniformMatrix3fv(this.addr,!1,r),this.updateCache(r))}function Ar(e,t){var n=this.cache,r=tr(t,this.size,16);nr(n,r)||(e.uniformMatrix4fv(this.addr,!1,r),this.updateCache(r))}function Er(e,t,n){var r=this.cache,i=t.length,o=ir(n,i);!1===nr(r,o)&&(e.uniform1iv(this.addr,o),rr(r,o));for(var a=0;a!==i;++a)n.setTexture2D(t[a]||Xn,o[a])}function Cr(e,t,n){var r=this.cache,i=t.length,o=ir(n,i);!1===nr(r,o)&&(e.uniform1iv(this.addr,o),rr(r,o));for(var a=0;a!==i;++a)n.setTextureCube(t[a]||Yn,o[a])}function Pr(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return or;case 35664:return sr;case 35665:return cr;case 35666:return ur;case 35674:return lr;case 35675:return hr;case 35676:return dr;case 35678:case 36198:return fr;case 35679:return pr;case 35680:return mr;case 5124:case 35670:return ar;case 35667:case 35671:return vr;case 35668:case 35672:return gr;case 35669:case 35673:return yr}}(t.type)}function Lr(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return br;case 35664:return wr;case 35665:return _r;case 35666:return Sr;case 35674:return Mr;case 35675:return Tr;case 35676:return Ar;case 35678:return Er;case 35680:return Cr;case 5124:case 35670:return xr;case 35667:case 35671:return vr;case 35668:case 35672:return gr;case 35669:case 35673:return yr}}(t.type)}function Or(e){this.id=e,Jn.call(this)}Lr.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),rr(t,e)},Or.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}};var Nr=/([\w\d_]+)(\])?(\[|\.)?/g;function Rr(e,t){e.seq.push(t),e.map[t.id]=t}function Ir(e,t,n){var r=e.name,i=r.length;for(Nr.lastIndex=0;;){var o=Nr.exec(r),a=Nr.lastIndex,s=o[1],c="]"===o[2],u=o[3];if(c&&(s|=0),void 0===u||"["===u&&a+2===i){Rr(n,void 0===u?new Pr(s,e,t):new Lr(s,e,t));break}var l=n.map[s];void 0===l&&Rr(n,l=new Or(s)),n=l}}function Dr(e,t,n){Jn.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;++i){var o=e.getActiveUniform(t,i);Ir(o,e.getUniformLocation(t,o.name),this)}}function Fr(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),r}Dr.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},Dr.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},Dr.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},Dr.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var kr=0;function Ur(e){switch(e){case Et:return["Linear","( value )"];case Ct:return["sRGB","( value )"];case Lt:return["RGBE","( value )"];case Nt:return["RGBM","( value, 7.0 )"];case Rt:return["RGBM","( value, 16.0 )"];case It:return["RGBD","( value, 256.0 )"];case Pt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Br(e,t){var n=Ur(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function zr(e){return""!==e}function jr(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Vr(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function Gr(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(e,t){var n=nn[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Gr(n)})}function Wr(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i})}function Hr(e,t,n,r,i,o,a){var s=e.context,c=r.defines,u=i.vertexShader,l=i.fragmentShader,h="SHADOWMAP_TYPE_BASIC";o.shadowMapType===p?h="SHADOWMAP_TYPE_PCF":o.shadowMapType===m&&(h="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",v="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case ue:case le:d="ENVMAP_TYPE_CUBE";break;case pe:case me:d="ENVMAP_TYPE_CUBE_UV";break;case he:case de:d="ENVMAP_TYPE_EQUIREC";break;case fe:d="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case le:case de:f="ENVMAP_MODE_REFRACTION"}switch(r.combine){case ee:v="ENVMAP_BLENDING_MULTIPLY";break;case te:v="ENVMAP_BLENDING_MIX";break;case ne:v="ENVMAP_BLENDING_ADD"}}var g,y,b=e.gammaFactor>0?e.gammaFactor:1,x=a.isWebGL2?"":function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(zr).join("\n")}(r.extensions,o,t),w=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(c),_=s.createProgram();if(r.isRawShaderMaterial?((g=[w].filter(zr).join("\n")).length>0&&(g+="\n"),(y=[x,w].filter(zr).join("\n")).length>0&&(y+="\n")):(g=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,w,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+b,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(zr).join("\n"),y=[x,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,w,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+b,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.envMap?"#define "+f:"",o.envMap?"#define "+v:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==re?"#define TONE_MAPPING":"",o.toneMapping!==re?nn.tonemapping_pars_fragment:"",o.toneMapping!==re?function(e,t){var n;switch(t){case ie:n="Linear";break;case oe:n="Reinhard";break;case ae:n="Uncharted2";break;case se:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?nn.encodings_pars_fragment:"",o.mapEncoding?Br("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?Br("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?Br("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Br("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?function(e,t){var n=Ur(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(zr).join("\n")),u=Vr(u=jr(u=Gr(u),o),o),l=Vr(l=jr(l=Gr(l),o),o),u=Wr(u),l=Wr(l),a.isWebGL2&&!r.isRawShaderMaterial){var S=!1,M=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==u.match(M)&&null!==l.match(M)&&(S=!0,u=u.replace(M,""),l=l.replace(M,"")),g=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,y=["#version 300 es\n","#define varying in",S?"":"out highp vec4 pc_fragColor;",S?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y}var T=g+u,A=y+l,E=Fr(s,s.VERTEX_SHADER,T),C=Fr(s,s.FRAGMENT_SHADER,A);s.attachShader(_,E),s.attachShader(_,C),void 0!==r.index0AttributeName?s.bindAttribLocation(_,0,r.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(_,0,"position"),s.linkProgram(_);var P,L,O=s.getProgramInfoLog(_).trim(),N=s.getShaderInfoLog(E).trim(),R=s.getShaderInfoLog(C).trim(),I=!0,D=!0;return!1===s.getProgramParameter(_,s.LINK_STATUS)?(I=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(_,s.VALIDATE_STATUS),"gl.getProgramInfoLog",O,N,R)):""!==O?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",O):""!==N&&""!==R||(D=!1),D&&(this.diagnostics={runnable:I,material:r,programLog:O,vertexShader:{log:N,prefix:g},fragmentShader:{log:R,prefix:y}}),s.deleteShader(E),s.deleteShader(C),this.getUniforms=function(){return void 0===P&&(P=new Dr(s,_,e)),P},this.getAttributes=function(){return void 0===L&&(L=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(t,i).name;n[o]=e.getAttribLocation(t,o)}return n}(s,_)),L},this.destroy=function(){s.deleteProgram(_),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=kr++,this.code=n,this.usedTimes=1,this.program=_,this.vertexShader=E,this.fragmentShader=C,this}function Xr(e,t,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=Et,n===Et&&t&&(n=Pt),n}this.getParameters=function(t,r,o,s,c,u,l){var h=i[t.type],d=l.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,i=Math.floor((r-20)/4),o=Math.min(i,t.length);return o<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+o+"."),0):o}(l):0,f=n.precision;null!==t.precision&&(f=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",f,"instead.");var p=e.getRenderTarget();return{shaderID:h,precision:f,supportsVertexTextures:n.vertexTextures,outputEncoding:a(p?p.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:a(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:a(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:a(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===pe||t.envMap.mapping===me),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:a(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===Ut,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&d>0,maxBones:d,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:c,numClipIntersection:u,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&l.receiveShadow&&o.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===y,flipSided:t.side===g,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(var a=0;a<o.length;a++)r.push(n[o[a]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.join()},this.acquireProgram=function(i,o,a,s){for(var c,u=0,l=r.length;u<l;u++){var h=r[u];if(h.code===s){++(c=h).usedTimes;break}}return void 0===c&&(c=new Hr(e,t,s,i,o,a,n),r.push(c)),c},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function qr(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Yr(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Jr(){var e={};return{get:function(t,n){var r=t.id+","+n.id,i=e[r];return void 0===i&&(i=new function(){var e=[],t=0,n=[],r=[];return{opaque:n,transparent:r,init:function(){t=0,n.length=0,r.length=0},push:function(i,o,a,s,c){var u=e[t];void 0===u?(u={id:i.id,object:i,geometry:o,material:a,program:a.program,renderOrder:i.renderOrder,z:s,group:c},e[t]=u):(u.id=i.id,u.object=i,u.geometry=o,u.material=a,u.program=a.program,u.renderOrder=i.renderOrder,u.z=s,u.group=c),(!0===a.transparent?r:n).push(u),t++},sort:function(){n.length>1&&n.sort(qr),r.length>1&&r.sort(Yr)}}},e[r]=i),i},dispose:function(){e={}}}}var Qr,Zr=0;function Kr(){var e=new function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new Gt,color:new an,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new zt};break;case"SpotLight":n={position:new Gt,direction:new Gt,color:new an,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new zt};break;case"PointLight":n={position:new Gt,color:new an,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new zt,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new Gt,skyColor:new an,groundColor:new an};break;case"RectAreaLight":n={color:new an,position:new Gt,halfWidth:new Gt,halfHeight:new Gt}}return e[t.id]=n,n}}},t={id:Zr++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new Gt,r=new jt,i=new jt;return{setup:function(o,a,s){for(var c=0,u=0,l=0,h=0,d=0,f=0,p=0,m=0,v=s.matrixWorldInverse,g=0,y=o.length;g<y;g++){var b=o[g],x=b.color,w=b.intensity,_=b.distance,S=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)c+=x.r*w,u+=x.g*w,l+=x.b*w;else if(b.isDirectionalLight){if((T=e.get(b)).color.copy(b.color).multiplyScalar(b.intensity),T.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(v),T.shadow=b.castShadow,b.castShadow){var M=b.shadow;T.shadowBias=M.bias,T.shadowRadius=M.radius,T.shadowMapSize=M.mapSize}t.directionalShadowMap[h]=S,t.directionalShadowMatrix[h]=b.shadow.matrix,t.directional[h]=T,h++}else if(b.isSpotLight)(T=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(v),T.color.copy(x).multiplyScalar(w),T.distance=_,T.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(v),T.coneCos=Math.cos(b.angle),T.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),T.decay=b.decay,T.shadow=b.castShadow,b.castShadow&&(M=b.shadow,T.shadowBias=M.bias,T.shadowRadius=M.radius,T.shadowMapSize=M.mapSize),t.spotShadowMap[f]=S,t.spotShadowMatrix[f]=b.shadow.matrix,t.spot[f]=T,f++;else if(b.isRectAreaLight)(T=e.get(b)).color.copy(x).multiplyScalar(w),T.position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(v),i.identity(),r.copy(b.matrixWorld),r.premultiply(v),i.extractRotation(r),T.halfWidth.set(.5*b.width,0,0),T.halfHeight.set(0,.5*b.height,0),T.halfWidth.applyMatrix4(i),T.halfHeight.applyMatrix4(i),t.rectArea[p]=T,p++;else if(b.isPointLight)(T=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(v),T.color.copy(b.color).multiplyScalar(b.intensity),T.distance=b.distance,T.decay=b.decay,T.shadow=b.castShadow,b.castShadow&&(M=b.shadow,T.shadowBias=M.bias,T.shadowRadius=M.radius,T.shadowMapSize=M.mapSize,T.shadowCameraNear=M.camera.near,T.shadowCameraFar=M.camera.far),t.pointShadowMap[d]=S,t.pointShadowMatrix[d]=b.shadow.matrix,t.point[d]=T,d++;else if(b.isHemisphereLight){var T;(T=e.get(b)).direction.setFromMatrixPosition(b.matrixWorld),T.direction.transformDirection(v),T.direction.normalize(),T.skyColor.copy(b.color).multiplyScalar(w),T.groundColor.copy(b.groundColor).multiplyScalar(w),t.hemi[m]=T,m++}}t.ambient[0]=c,t.ambient[1]=u,t.ambient[2]=l,t.directional.length=h,t.spot.length=f,t.rectArea.length=p,t.point.length=d,t.hemi.length=m,t.hash.stateID=t.id,t.hash.directionalLength=h,t.hash.pointLength=d,t.hash.spotLength=f,t.hash.rectAreaLength=p,t.hash.hemiLength=m,t.hash.shadowsLength=a.length},state:t}}function $r(){var e=new Kr,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function ei(e){kn.call(this),this.type="MeshDepthMaterial",this.depthPacking=Dt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function ti(e){kn.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Gt,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function ni(e,t,n){for(var r=new tn,i=new jt,o=new zt,a=new zt(n,n),s=new Gt,c=new Gt,u=1,l=2,h=1+(u|l),d=new Array(h),f=new Array(h),m={},b={0:g,1:v,2:y},x=[new Gt(1,0,0),new Gt(-1,0,0),new Gt(0,0,1),new Gt(0,0,-1),new Gt(0,1,0),new Gt(0,-1,0)],w=[new Gt(0,1,0),new Gt(0,1,0),new Gt(0,1,0),new Gt(0,1,0),new Gt(0,0,1),new Gt(0,0,-1)],_=[new Yt,new Yt,new Yt,new Yt,new Yt,new Yt],S=0;S!==h;++S){var M=0!=(S&u),T=0!=(S&l),A=new ei({depthPacking:Ft,morphTargets:M,skinning:T});d[S]=A;var E=new ti({morphTargets:M,skinning:T});f[S]=E}var C=this;function P(t,n,r,i,o,a){var s=t.geometry,c=null,h=d,p=t.customDepthMaterial;if(r&&(h=f,p=t.customDistanceMaterial),p)c=p;else{var v=!1;n.morphTargets&&(s&&s.isBufferGeometry?v=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(v=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var g=t.isSkinnedMesh&&n.skinning,y=0;v&&(y|=u),g&&(y|=l),c=h[y]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var x=c.uuid,w=n.uuid,_=m[x];void 0===_&&(_={},m[x]=_);var S=_[w];void 0===S&&(S=c.clone(),_[w]=S),c=S}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=null!=n.shadowSide?n.shadowSide:b[n.side],c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,r&&c.isMeshDistanceMaterial&&(c.referencePosition.copy(i),c.nearDistance=o,c.farDistance=a),c}function L(n,i,o,a){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var s=t.update(n),u=n.material;if(Array.isArray(u))for(var l=s.groups,h=0,d=l.length;h<d;h++){var f=l[h],p=u[f.materialIndex];if(p&&p.visible){var m=P(n,p,a,c,o.near,o.far);e.renderBufferDirect(o,null,s,m,n,f)}}else if(u.visible){m=P(n,u,a,c,o.near,o.far);e.renderBufferDirect(o,null,s,m,n,null)}}for(var v=n.children,g=0,y=v.length;g<y;g++)L(v[g],i,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=p,this.render=function(t,n,u){if(!1!==C.enabled&&(!1!==C.autoUpdate||!1!==C.needsUpdate)&&0!==t.length){var l,h=e.context,d=e.state;d.disable(h.BLEND),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var f=0,p=t.length;f<p;f++){var m=t[f],v=m.shadow,g=m&&m.isPointLight;if(void 0!==v){var y=v.camera;if(o.copy(v.mapSize),o.min(a),g){var b=o.x,S=o.y;_[0].set(2*b,S,b,S),_[1].set(0,S,b,S),_[2].set(3*b,S,b,S),_[3].set(b,S,b,S),_[4].set(3*b,0,b,S),_[5].set(b,0,b,S),o.x*=4,o.y*=2}if(null===v.map){var M={minFilter:be,magFilter:be,format:Be};v.map=new Jt(o.x,o.y,M),v.map.texture.name=m.name+".shadowMap",y.updateProjectionMatrix()}v.isSpotLightShadow&&v.update(m);var T=v.map,A=v.matrix;c.setFromMatrixPosition(m.matrixWorld),y.position.copy(c),g?(l=6,A.makeTranslation(-c.x,-c.y,-c.z)):(l=1,s.setFromMatrixPosition(m.target.matrixWorld),y.lookAt(s),y.updateMatrixWorld(),A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),A.multiply(y.projectionMatrix),A.multiply(y.matrixWorldInverse)),e.setRenderTarget(T),e.clear();for(var E=0;E<l;E++){if(g){s.copy(y.position),s.add(x[E]),y.up.copy(w[E]),y.lookAt(s),y.updateMatrixWorld();var P=_[E];d.viewport(P)}i.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),r.setFromMatrix(i),L(n,u,y,g)}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}C.needsUpdate=!1}}}function ri(e,t,n,r,i,o,a){var s,c={};function u(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height),r}return e}function l(e){return Bt.isPowerOfTwo(e.width)&&Bt.isPowerOfTwo(e.height)}function h(e,t){return e.generateMipmaps&&t&&e.minFilter!==be&&e.minFilter!==_e}function d(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function f(t,n){if(!i.isWebGL2)return t;if(t===e.RED){if(n===e.FLOAT)return e.R32F;if(n===e.HALF_FLOAT)return e.R16F;if(n===e.UNSIGNED_BYTE)return e.R8}if(t===e.RGB){if(n===e.FLOAT)return e.RGB32F;if(n===e.HALF_FLOAT)return e.RGB16F;if(n===e.UNSIGNED_BYTE)return e.RGB8}if(t===e.RGBA){if(n===e.FLOAT)return e.RGBA32F;if(n===e.HALF_FLOAT)return e.RGBA16F;if(n===e.UNSIGNED_BYTE)return e.RGBA8}return t}function p(t){return t===be||t===xe||t===we?e.NEAREST:e.LINEAR}function m(t){var n=t.target;n.removeEventListener("dispose",m),function(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.remove(t)}(n),n.isVideoTexture&&delete c[n.id],a.memory.textures--}function v(t){var n=t.target;n.removeEventListener("dispose",v),function(t){var n=r.get(t),i=r.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}(n),a.memory.textures--}function g(t,i){var o=r.get(t);if(t.isVideoTexture&&function(e){var t=e.id,n=a.render.frame;c[t]!==n&&(c[t]=n,e.update())}(t),t.version>0&&o.__version!==t.version){var s=t.image;if(void 0===s)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==s.complete)return void b(o,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_2D,o.__webglTexture)}function y(n,a,s){var c;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o.convert(a.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o.convert(a.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),a.wrapS===ge&&a.wrapT===ge||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,p(a.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,p(a.minFilter)),a.minFilter!==be&&a.minFilter!==_e&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),c=t.get("EXT_texture_filter_anisotropic")){if(a.type===Oe&&null===t.get("OES_texture_float_linear"))return;if(a.type===Ne&&null===(i.isWebGL2||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function b(t,r,c){var p;p=r.isDataTexture3D?e.TEXTURE_3D:e.TEXTURE_2D,void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",m),t.__webglTexture=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+c),n.bindTexture(p,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var v=u(r.image,i.maxTextureSize);(function(e){return!i.isWebGL2&&(e.wrapS!==ge||e.wrapT!==ge||e.minFilter!==be&&e.minFilter!==_e)})(r)&&!1===l(v)&&(v=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=Bt.floorPowerOfTwo(e.width),s.height=Bt.floorPowerOfTwo(e.height),s.getContext("2d").drawImage(e,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+s.width+"x"+s.height),s):e}(v));var g=l(v),b=o.convert(r.format),x=o.convert(r.type),w=f(b,x);y(p,r,g);var _,S=r.mipmaps;if(r.isDepthTexture){if(w=e.DEPTH_COMPONENT,r.type===Oe){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");w=e.DEPTH_COMPONENT32F}else i.isWebGL2&&(w=e.DEPTH_COMPONENT16);r.format===Ge&&w===e.DEPTH_COMPONENT&&r.type!==Ce&&r.type!==Le&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Ce,x=o.convert(r.type)),r.format===We&&(w=e.DEPTH_STENCIL,r.type!==Fe&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Fe,x=o.convert(r.type))),n.texImage2D(e.TEXTURE_2D,0,w,v.width,v.height,0,b,x,null)}else if(r.isDataTexture)if(S.length>0&&g){for(var M=0,T=S.length;M<T;M++)_=S[M],n.texImage2D(e.TEXTURE_2D,M,w,_.width,_.height,0,b,x,_.data);r.generateMipmaps=!1,t.__maxMipLevel=S.length-1}else n.texImage2D(e.TEXTURE_2D,0,w,v.width,v.height,0,b,x,v.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(M=0,T=S.length;M<T;M++)_=S[M],r.format!==Be&&r.format!==Ue?n.getCompressedTextureFormats().indexOf(b)>-1?n.compressedTexImage2D(e.TEXTURE_2D,M,w,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,M,w,_.width,_.height,0,b,x,_.data);t.__maxMipLevel=S.length-1}else if(r.isDataTexture3D)n.texImage3D(e.TEXTURE_3D,0,w,v.width,v.height,v.depth,0,b,x,v.data),t.__maxMipLevel=0;else if(S.length>0&&g){for(M=0,T=S.length;M<T;M++)_=S[M],n.texImage2D(e.TEXTURE_2D,M,w,b,x,_);r.generateMipmaps=!1,t.__maxMipLevel=S.length-1}else n.texImage2D(e.TEXTURE_2D,0,w,b,x,v),t.__maxMipLevel=0;h(r,g)&&d(e.TEXTURE_2D,r,v.width,v.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function x(t,i,a,s){var c=o.convert(i.texture.format),u=o.convert(i.texture.type),l=f(c,u);n.texImage2D(s,0,l,i.width,i.height,0,c,u,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function w(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function _(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),g(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ge)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(n.depthTexture.format!==We)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),w(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),w(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}this.setTexture2D=g,this.setTexture3D=function(t,i){var o=r.get(t);t.version>0&&o.__version!==t.version?b(o,t,i):(n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_3D,o.__webglTexture))},this.setTextureCube=function(t,s){var c=r.get(t);if(6===t.image.length)if(t.version>0&&c.__version!==t.version){c.__image__webglTextureCube||(t.addEventListener("dispose",m),c.__image__webglTextureCube=e.createTexture(),a.memory.textures++),n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var p=t&&t.isCompressedTexture,v=t.image[0]&&t.image[0].isDataTexture,g=[],b=0;b<6;b++)g[b]=p||v?v?t.image[b].image:t.image[b]:u(t.image[b],i.maxCubemapSize);var x=g[0],w=l(x),_=o.convert(t.format),S=o.convert(t.type),M=f(_,S);for(y(e.TEXTURE_CUBE_MAP,t,w),b=0;b<6;b++)if(p)for(var T,A=g[b].mipmaps,E=0,C=A.length;E<C;E++)T=A[E],t.format!==Be&&t.format!==Ue?n.getCompressedTextureFormats().indexOf(_)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+b,E,M,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+b,E,M,T.width,T.height,0,_,S,T.data);else v?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+b,0,M,g[b].width,g[b].height,0,_,S,g[b].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+b,0,M,_,S,g[b]);c.__maxMipLevel=p?A.length-1:0,h(t,w)&&d(e.TEXTURE_CUBE_MAP,t,x.width,x.height),c.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,i){n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)},this.setupRenderTarget=function(t){var i=r.get(t),o=r.get(t.texture);t.addEventListener("dispose",v),o.__webglTexture=e.createTexture(),a.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,c=l(t);if(s){i.__webglFramebuffer=[];for(var u=0;u<6;u++)i.__webglFramebuffer[u]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(s){for(n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),y(e.TEXTURE_CUBE_MAP,t.texture,c),u=0;u<6;u++)x(i.__webglFramebuffer[u],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+u);h(t.texture,c)&&d(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),y(e.TEXTURE_2D,t.texture,c),x(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),h(t.texture,c)&&d(e.TEXTURE_2D,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&_(t)},this.updateRenderTargetMipmap=function(t){var i=t.texture;if(h(i,l(t))){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(i).__webglTexture;n.bindTexture(o,a),d(o,i,t.width,t.height),n.bindTexture(o,null)}}}function ii(e,t,n){return{convert:function(r){var i;if(r===ve)return e.REPEAT;if(r===ge)return e.CLAMP_TO_EDGE;if(r===ye)return e.MIRRORED_REPEAT;if(r===be)return e.NEAREST;if(r===xe)return e.NEAREST_MIPMAP_NEAREST;if(r===we)return e.NEAREST_MIPMAP_LINEAR;if(r===_e)return e.LINEAR;if(r===Se)return e.LINEAR_MIPMAP_NEAREST;if(r===Me)return e.LINEAR_MIPMAP_LINEAR;if(r===Te)return e.UNSIGNED_BYTE;if(r===Re)return e.UNSIGNED_SHORT_4_4_4_4;if(r===Ie)return e.UNSIGNED_SHORT_5_5_5_1;if(r===De)return e.UNSIGNED_SHORT_5_6_5;if(r===Ae)return e.BYTE;if(r===Ee)return e.SHORT;if(r===Ce)return e.UNSIGNED_SHORT;if(r===Pe)return e.INT;if(r===Le)return e.UNSIGNED_INT;if(r===Oe)return e.FLOAT;if(r===Ne){if(n.isWebGL2)return e.HALF_FLOAT;if(null!==(i=t.get("OES_texture_half_float")))return i.HALF_FLOAT_OES}if(r===ke)return e.ALPHA;if(r===Ue)return e.RGB;if(r===Be)return e.RGBA;if(r===ze)return e.LUMINANCE;if(r===je)return e.LUMINANCE_ALPHA;if(r===Ge)return e.DEPTH_COMPONENT;if(r===We)return e.DEPTH_STENCIL;if(r===He)return e.RED;if(r===L)return e.FUNC_ADD;if(r===O)return e.FUNC_SUBTRACT;if(r===N)return e.FUNC_REVERSE_SUBTRACT;if(r===D)return e.ZERO;if(r===F)return e.ONE;if(r===k)return e.SRC_COLOR;if(r===U)return e.ONE_MINUS_SRC_COLOR;if(r===B)return e.SRC_ALPHA;if(r===z)return e.ONE_MINUS_SRC_ALPHA;if(r===j)return e.DST_ALPHA;if(r===V)return e.ONE_MINUS_DST_ALPHA;if(r===G)return e.DST_COLOR;if(r===W)return e.ONE_MINUS_DST_COLOR;if(r===H)return e.SRC_ALPHA_SATURATE;if((r===Xe||r===qe||r===Ye||r===Je)&&null!==(i=t.get("WEBGL_compressed_texture_s3tc"))){if(r===Xe)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===qe)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Ye)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Je)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((r===Qe||r===Ze||r===Ke||r===$e)&&null!==(i=t.get("WEBGL_compressed_texture_pvrtc"))){if(r===Qe)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===Ze)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===Ke)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===$e)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(r===et&&null!==(i=t.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((r===tt||r===nt||r===rt||r===it||r===ot||r===at||r===st||r===ct||r===ut||r===lt||r===ht||r===dt||r===ft||r===pt)&&null!==(i=t.get("WEBGL_compressed_texture_astc")))return r;if(r===R||r===I){if(n.isWebGL2){if(r===R)return e.MIN;if(r===I)return e.MAX}if(null!==(i=t.get("EXT_blend_minmax"))){if(r===R)return i.MIN_EXT;if(r===I)return i.MAX_EXT}}if(r===Fe){if(n.isWebGL2)return e.UNSIGNED_INT_24_8;if(null!==(i=t.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}}}function oi(){mn.call(this),this.type="Group"}function ai(){mn.call(this),this.type="Camera",this.matrixWorldInverse=new jt,this.projectionMatrix=new jt,this.projectionMatrixInverse=new jt}function si(e,t,n,r){ai.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function ci(e){si.call(this),this.cameras=e||[]}function ui(e){var t=this,n=null,r=null,i=null,o=[],a=new jt,s=new jt,c="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(r=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",y,!1));var u=new jt,l=new Vt,h=new Gt,d=new si;d.bounds=new Yt(0,0,.5,1),d.layers.enable(1);var f=new si;f.bounds=new Yt(.5,0,.5,1),f.layers.enable(2);var p,m,v=new ci([d,f]);function g(){return null!==n&&!0===n.isPresenting}function y(){if(g()){var r=n.getEyeParameters("left"),i=r.renderWidth,o=r.renderHeight;m=e.getPixelRatio(),p=e.getSize(),e.setDrawingBufferSize(2*i,o,1),w.start()}else t.enabled&&e.setDrawingBufferSize(p.width,p.height,m),w.stop()}v.layers.enable(1),v.layers.enable(2);var b=[];function x(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0,i=t.length;n<i;n++){var o=t[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(r===e)return o;r++}}}this.enabled=!1,this.getController=function(e){var t=o[e];return void 0===t&&((t=new oi).matrixAutoUpdate=!1,t.visible=!1,o[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),w.setContext(e)},this.setFrameOfReferenceType=function(e){c=e},this.setPoseTarget=function(e){void 0!==e&&(i=e)},this.getCamera=function(e){var t="stage"===c?1.6:0;if(null===n)return e.position.set(0,t,0),e;if(n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(r),"stage"===c){var p=n.stageParameters;p?a.fromArray(p.sittingToStandingTransform):a.makeTranslation(0,t,0)}var m=r.pose,g=null!==i?i:e;if(g.matrix.copy(a),g.matrix.decompose(g.position,g.quaternion,g.scale),null!==m.orientation&&(l.fromArray(m.orientation),g.quaternion.multiply(l)),null!==m.position&&(l.setFromRotationMatrix(a),h.fromArray(m.position),h.applyQuaternion(l),g.position.add(h)),g.updateMatrixWorld(),!1===n.isPresenting)return e;d.near=e.near,f.near=e.near,d.far=e.far,f.far=e.far,v.matrixWorld.copy(e.matrixWorld),v.matrixWorldInverse.copy(e.matrixWorldInverse),d.matrixWorldInverse.fromArray(r.leftViewMatrix),f.matrixWorldInverse.fromArray(r.rightViewMatrix),s.getInverse(a),"stage"===c&&(d.matrixWorldInverse.multiply(s),f.matrixWorldInverse.multiply(s));var y=g.parent;null!==y&&(u.getInverse(y.matrixWorld),d.matrixWorldInverse.multiply(u),f.matrixWorldInverse.multiply(u)),d.matrixWorld.getInverse(d.matrixWorldInverse),f.matrixWorld.getInverse(f.matrixWorldInverse),d.projectionMatrix.fromArray(r.leftProjectionMatrix),f.projectionMatrix.fromArray(r.rightProjectionMatrix),v.projectionMatrix.copy(d.projectionMatrix);var w=n.getLayers();if(w.length){var _=w[0];null!==_.leftBounds&&4===_.leftBounds.length&&d.bounds.fromArray(_.leftBounds),null!==_.rightBounds&&4===_.rightBounds.length&&f.bounds.fromArray(_.rightBounds)}return function(){for(var e=0;e<o.length;e++){var t=o[e],n=x(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&t.position.set(.2,-.6,-.05),null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(a),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i="Daydream Controller"===n.id?0:1;b[e]!==n.buttons[i].pressed&&(b[e]=n.buttons[i].pressed,!0===b[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),v},this.getStandingMatrix=function(){return a},this.isPresenting=g;var w=new un;this.setAnimationLoop=function(e){w.setAnimationLoop(e)},this.submitFrame=function(){g()&&n.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",y)}}function li(t){console.log("THREE.WebGLRenderer",o);var n=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,a=void 0===t.depth||t.depth,l=void 0===t.stencil||t.stencil,h=void 0!==t.antialias&&t.antialias,d=void 0===t.premultipliedAlpha||t.premultipliedAlpha,f=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,p=void 0!==t.powerPreference?t.powerPreference:"default",m=null,b=null;this.domElement=n,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=ie,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var x,w,_,S,O,N,R,I,D,F,k,U,B,z,j,V,G,W,H=this,ee=!1,te=null,ne=null,re=null,oe=-1,ae={geometry:null,program:null,wireframe:!1},se=null,ce=null,ue=new Yt,le=new Yt,he=null,de=0,fe=n.width,pe=n.height,me=1,ve=new Yt(0,0,fe,pe),ge=new Yt(0,0,fe,pe),ye=!1,be=new tn,xe=new function(){var e=this,t=null,n=0,r=!1,i=!1,o=new en,a=new Wt,s={value:null,needsUpdate:!1};function c(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(t,n,r,i){var c=null!==t?t.length:0,u=null;if(0!==c){if(u=s.value,!0!==i||null===u){var l=r+4*c,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===u||u.length<l)&&(u=new Float32Array(l));for(var d=0,f=r;d!==c;++d,f+=4)o.copy(t[d]).applyMatrix4(h,a),o.normal.toArray(u,f),u[f+3]=o.constant}s.value=u,s.needsUpdate=!0}return e.numPlanes=c,u}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==n||r;return r=i,t=u(e,o,0),n=e.length,a},this.beginShadows=function(){i=!0,u(null)},this.endShadows=function(){i=!1,c()},this.setState=function(e,o,a,l,h,d){if(!r||null===e||0===e.length||i&&!a)i?u(null):c();else{var f=i?0:n,p=4*f,m=h.clippingState||null;s.value=m,m=u(e,l,p,d);for(var v=0;v!==p;++v)m[v]=t[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=f}}},we=!1,_e=!1,Se=new jt,Me=new Gt;function Ae(){return null===ne?me:1}try{var Ee={alpha:i,depth:a,stencil:l,antialias:h,premultipliedAlpha:d,preserveDrawingBuffer:f,powerPreference:p};if(n.addEventListener("webglcontextlost",Re,!1),n.addEventListener("webglcontextrestored",Ie,!1),null===(x=r||n.getContext("webgl",Ee)||n.getContext("experimental-webgl",Ee)))throw null!==n.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===x.getShaderPrecisionFormat&&(x.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}function Ce(){w=new function(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}(x),(_=new function(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var c=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),g=l>0,y=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:l,maxTextureSize:h,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y}}(x,w,t)).isWebGL2||(w.get("WEBGL_depth_texture"),w.get("OES_texture_float"),w.get("OES_texture_half_float"),w.get("OES_texture_half_float_linear"),w.get("OES_standard_derivatives"),w.get("OES_element_index_uint"),w.get("ANGLE_instanced_arrays")),w.get("OES_texture_float_linear"),W=new ii(x,w,_),(S=new function(e,t,n,r){var i=new function(){var t=!1,n=new Yt,r=null,i=new Yt(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?oe(e.DEPTH_TEST):ae(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case X:e.depthFunc(e.NEVER);break;case q:e.depthFunc(e.ALWAYS);break;case Y:e.depthFunc(e.LESS);break;case J:e.depthFunc(e.LEQUAL);break;case Q:e.depthFunc(e.EQUAL);break;case Z:e.depthFunc(e.GEQUAL);break;case K:e.depthFunc(e.GREATER);break;case $:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,u=null;return{setTest:function(t){t?oe(e.STENCIL_TEST):ae(e.STENCIL_TEST)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&c===r||(e.stencilOp(t,n,r),a=t,s=n,c=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,u=null}}},l=e.getParameter(e.MAX_VERTEX_ATTRIBS),h=new Uint8Array(l),d=new Uint8Array(l),f=new Uint8Array(l),p={},m=null,v=null,b=null,x=null,w=null,_=null,S=null,O=null,N=null,R=null,I=!1,D=null,F=null,k=null,U=null,B=null,z=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),j=!1,V=0,G=e.getParameter(e.VERSION);-1!==G.indexOf("WebGL")?(V=parseFloat(/^WebGL\ ([0-9])/.exec(G)[1]),j=V>=1):-1!==G.indexOf("OpenGL ES")&&(V=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(G)[1]),j=V>=2);var W=null,H={},ee=new Yt,te=new Yt;function ne(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<r;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}var re={};function ie(n,i){h[n]=1,0===d[n]&&(e.enableVertexAttribArray(n),d[n]=1),f[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),f[n]=i)}function oe(t){!0!==p[t]&&(e.enable(t),p[t]=!0)}function ae(t){!1!==p[t]&&(e.disable(t),p[t]=!1)}function se(t,r,i,o,a,s,c,u){if(t!==M){if(b||(oe(e.BLEND),b=!0),t===P)a=a||r,s=s||i,c=c||o,r===w&&a===O||(e.blendEquationSeparate(n.convert(r),n.convert(a)),w=r,O=a),i===_&&o===S&&s===N&&c===R||(e.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(c)),_=i,S=o,N=s,R=c),x=t,I=null;else if(t!==x||u!==I){if(w===L&&O===L||(e.blendEquation(e.FUNC_ADD),w=L,O=L),u)switch(t){case T:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case A:e.blendFunc(e.ONE,e.ONE);break;case E:e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA);break;case C:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case T:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case A:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case E:e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR);break;case C:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}_=null,S=null,N=null,R=null,x=t,I=u}}else b&&(ae(e.BLEND),b=!1)}function ce(t){D!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),D=t)}function ue(t){t!==s?(oe(e.CULL_FACE),t!==F&&(t===c?e.cullFace(e.BACK):t===u?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):ae(e.CULL_FACE),F=t}function le(t,n,r){t?(oe(e.POLYGON_OFFSET_FILL),U===n&&B===r||(e.polygonOffset(n,r),U=n,B=r)):ae(e.POLYGON_OFFSET_FILL)}function he(t){void 0===t&&(t=e.TEXTURE0+z-1),W!==t&&(e.activeTexture(t),W=t)}return re[e.TEXTURE_2D]=ne(e.TEXTURE_2D,e.TEXTURE_2D,1),re[e.TEXTURE_CUBE_MAP]=ne(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),oe(e.DEPTH_TEST),o.setFunc(J),ce(!1),ue(c),oe(e.CULL_FACE),se(M),{buffers:{color:i,depth:o,stencil:a},initAttributes:function(){for(var e=0,t=h.length;e<t;e++)h[e]=0},enableAttribute:function(e){ie(e,0)},enableAttributeAndDivisor:ie,disableUnusedAttributes:function(){for(var t=0,n=d.length;t!==n;++t)d[t]!==h[t]&&(e.disableVertexAttribArray(t),d[t]=0)},enable:oe,disable:ae,getCompressedTextureFormats:function(){if(null===m&&(m=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)m.push(n[r]);return m},useProgram:function(t){return v!==t&&(e.useProgram(t),v=t,!0)},setBlending:se,setMaterial:function(t,n){t.side===y?ae(e.CULL_FACE):oe(e.CULL_FACE);var r=t.side===g;n&&(r=!r),ce(r),t.blending===T&&!1===t.transparent?se(M):se(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite),le(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:ce,setCullFace:ue,setLineWidth:function(t){t!==k&&(j&&e.lineWidth(t),k=t)},setPolygonOffset:le,setScissorTest:function(t){t?oe(e.SCISSOR_TEST):ae(e.SCISSOR_TEST)},activeTexture:he,bindTexture:function(t,n){null===W&&he();var r=H[W];void 0===r&&(r={type:void 0,texture:void 0},H[W]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||re[t]),r.type=t,r.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===ee.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),ee.copy(t))},viewport:function(t){!1===te.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),te.copy(t))},reset:function(){for(var t=0;t<d.length;t++)1===d[t]&&(e.disableVertexAttribArray(t),d[t]=0);p={},m=null,W=null,H={},v=null,x=null,D=null,F=null,i.reset(),o.reset(),a.reset()}}}(x,w,W,_)).scissor(le.copy(ge).multiplyScalar(me)),S.viewport(ue.copy(ve).multiplyScalar(me)),O=new function(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(i=i||1,t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:t.triangles+=i*(n-2);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}(x),N=new function(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}},R=new ri(x,w,S,N,_,W,O),I=new ln(x),D=new function(e,t,n){var r={},i={};function o(e){var a=e.target,s=r[a.id];for(var c in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[c]);a.removeEventListener("dispose",o),delete r[a.id];var u=i[s.id];u&&(t.remove(u),delete i[s.id]),n.memory.geometries--}return{get:function(e,t){var i=r[t.id];return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new On).setFromObject(e)),i=t._bufferGeometry),r[t.id]=i,n.memory.geometries++,i)},update:function(n){var r=n.index,i=n.attributes;for(var o in null!==r&&t.update(r,e.ELEMENT_ARRAY_BUFFER),i)t.update(i[o],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],c=0,u=s.length;c<u;c++)t.update(s[c],e.ARRAY_BUFFER)},getWireframeAttribute:function(n){var r=i[n.id];if(r)return r;var o,a=[],s=n.index,c=n.attributes;if(null!==s)for(var u=0,l=(o=s.array).length;u<l;u+=3){var h=o[u+0],d=o[u+1],f=o[u+2];a.push(h,d,d,f,f,h)}else for(u=0,l=(o=c.position.array).length/3-1;u<l;u+=3)h=u+0,d=u+1,f=u+2,a.push(h,d,d,f,f,h);return r=new(Pn(a)>65535?Tn:Sn)(a,1),t.update(r,e.ELEMENT_ARRAY_BUFFER),i[n.id]=r,r}}}(x,I,O),F=new function(e,t){var n={};return{update:function(r){var i=t.render.frame,o=r.geometry,a=e.get(r,o);return n[a.id]!==i&&(o.isGeometry&&a.updateFromObject(r),e.update(a),n[a.id]=i),a},dispose:function(){n={}}}}(D,O),j=new function(e){var t={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,c=s.length,u=t[i.id];if(void 0===u){u=[];for(var l=0;l<c;l++)u[l]=[l,0];t[i.id]=u}var h=o.morphTargets&&i.morphAttributes.position,d=o.morphNormals&&i.morphAttributes.normal;for(l=0;l<c;l++)0!==(f=u[l])[1]&&(h&&i.removeAttribute("morphTarget"+l),d&&i.removeAttribute("morphNormal"+l));for(l=0;l<c;l++)(f=u[l])[0]=l,f[1]=s[l];for(u.sort(Gn),l=0;l<8;l++){var f;if(f=u[l]){var p=f[0],m=f[1];if(m){h&&i.addAttribute("morphTarget"+l,h[p]),d&&i.addAttribute("morphNormal"+l,d[p]),n[l]=m;continue}}n[l]=0}a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}(x),k=new Xr(H,w,_),U=new Jr,B=new function(){var e={};return{get:function(t,n){var r;return void 0===e[t.id]?(r=new $r,e[t.id]={},e[t.id][n.id]=r):void 0===e[t.id][n.id]?(r=new $r,e[t.id][n.id]=r):r=e[t.id][n.id],r},dispose:function(){e={}}}},z=new function(e,t,n,r){var i,o,a=new an(0),s=0;function c(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}return{getClearColor:function(){return a},setClearColor:function(e,t){a.set(e),c(a,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){c(a,s=e)},render:function(t,r,u,l){var h=r.background;null===h?c(a,s):h&&h.isColor&&(c(h,1),l=!0),(e.autoClear||l)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),h&&h.isCubeTexture?(void 0===o&&((o=new Vn(new Rn(1,1,1),new Un({uniforms:rn.clone(cn.cube.uniforms),vertexShader:cn.cube.vertexShader,fragmentShader:cn.cube.fragmentShader,side:g,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(o)),o.material.uniforms.tCube.value=h,t.push(o,o.geometry,o.material,0,null)):h&&h.isTexture&&(void 0===i&&((i=new Vn(new Dn(2,2),new Un({uniforms:rn.clone(cn.background.uniforms),vertexShader:cn.background.vertexShader,fragmentShader:cn.background.fragmentShader,side:v,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),n.update(i)),i.material.uniforms.t2D.value=h,t.push(i,i.geometry,i.material,0,null))}}}(H,S,F,d),V=new function(e,t,n,r){var i;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(o,a,s){var c;if(r.isWebGL2)c=e;else if(null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[r.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,a,s,o.maxInstancedCount),n.update(s,i,o.maxInstancedCount)}}(x,w,O,_),G=new function(e,t,n,r){var i,o,a;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i)},this.renderInstances=function(s,c,u){var l;if(r.isWebGL2)l=e;else if(null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[r.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,u,o,c*a,s.maxInstancedCount),n.update(u,i,s.maxInstancedCount)}}(x,w,O,_),O.programs=k.programs,H.context=x,H.capabilities=_,H.extensions=w,H.properties=N,H.renderLists=U,H.state=S,H.info=O}Ce();var Pe=null;"undefined"!=typeof navigator&&(Pe="xr"in navigator?new function(t){var n=t.context,r=null,i=null,o=null,a="stage",s=null,c=[],u=[];function l(){return null!==i&&null!==o}var h=new si;h.layers.enable(1),h.viewport=new Yt;var d=new si;d.layers.enable(2),d.viewport=new Yt;var f=new ci([h,d]);function p(e){var t=c[u.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function m(){t.setFramebuffer(null),y.stop()}function v(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}f.layers.enable(1),f.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=c[e];return void 0===t&&((t=new oi).matrixAutoUpdate=!1,t.visible=!1,c[e]=t),t},this.getDevice=function(){return r},this.setDevice=function(e){void 0!==e&&(r=e),e instanceof XRDevice&&n.setCompatibleXRDevice(e)},this.setFrameOfReferenceType=function(e){a=e},this.setSession=function(e){null!==(i=e)&&(i.addEventListener("select",p),i.addEventListener("selectstart",p),i.addEventListener("selectend",p),i.addEventListener("end",m),i.baseLayer=new XRWebGLLayer(i,n),i.requestFrameOfReference(a).then(function(e){o=e,t.setFramebuffer(i.baseLayer.framebuffer),y.setContext(i),y.start()}),u=i.getInputSources(),i.addEventListener("inputsourceschange",function(){u=i.getInputSources(),console.log(u)}))},this.getCamera=function(e){if(l()){var t=e.parent,n=f.cameras;v(f,t);for(var r=0;r<n.length;r++)v(n[r],t);e.matrixWorld.copy(f.matrixWorld);for(var i=e.children,o=(r=0,i.length);r<o;r++)i[r].updateMatrixWorld(!0);return f}return e},this.isPresenting=l;var g=null,y=new un;y.setAnimationLoop(function(e,t){if(null!==(s=t.getDevicePose(o)))for(var n=i.baseLayer,r=t.views,a=0;a<r.length;a++){var l=r[a],h=n.getViewport(l),d=s.getViewMatrix(l),p=f.cameras[a];p.matrix.fromArray(d).getInverse(p.matrix),p.projectionMatrix.fromArray(l.projectionMatrix),p.viewport.set(h.x,h.y,h.width,h.height),0===a&&(f.matrix.copy(p.matrix),f.projectionMatrix.copy(p.projectionMatrix))}for(a=0;a<c.length;a++){var m=c[a],v=u[a];if(v){var y=t.getInputPose(v,o);if(null!==y){"targetRay"in y?m.matrix.elements=y.targetRay.transformMatrix:"pointerMatrix"in y&&(m.matrix.elements=y.pointerMatrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.visible=!0;continue}}m.visible=!1}g&&g(e)}),this.setAnimationLoop=function(e){g=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new e.Matrix4},this.submitFrame=function(){}}(H):new ui(H)),this.vr=Pe;var Le=new ni(H,F,_.maxTextureSize);function Re(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),ee=!0}function Ie(){console.log("THREE.WebGLRenderer: Context Restored."),ee=!1,Ce()}function De(e){var t=e.target;t.removeEventListener("dispose",De),function(e){Fe(e),N.remove(e)}(t)}function Fe(e){var t=N.get(e).program;e.program=void 0,void 0!==t&&k.releaseProgram(t)}this.shadowMap=Le,this.getContext=function(){return x},this.getContextAttributes=function(){return x.getContextAttributes()},this.forceContextLoss=function(){var e=w.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=w.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return me},this.setPixelRatio=function(e){void 0!==e&&(me=e,this.setSize(fe,pe,!1))},this.getSize=function(){return{width:fe,height:pe}},this.setSize=function(e,t,r){Pe.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(fe=e,pe=t,n.width=e*me,n.height=t*me,!1!==r&&(n.style.width=e+"px",n.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(){return{width:fe*me,height:pe*me}},this.setDrawingBufferSize=function(e,t,r){fe=e,pe=t,me=r,n.width=e*r,n.height=t*r,this.setViewport(0,0,e,t)},this.getCurrentViewport=function(){return ue},this.setViewport=function(e,t,n,r){ve.set(e,pe-t-r,n,r),S.viewport(ue.copy(ve).multiplyScalar(me))},this.setScissor=function(e,t,n,r){ge.set(e,pe-t-r,n,r),S.scissor(le.copy(ge).multiplyScalar(me))},this.setScissorTest=function(e){S.setScissorTest(ye=e)},this.getClearColor=function(){return z.getClearColor()},this.setClearColor=function(){z.setClearColor.apply(z,arguments)},this.getClearAlpha=function(){return z.getClearAlpha()},this.setClearAlpha=function(){z.setClearAlpha.apply(z,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=x.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=x.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=x.STENCIL_BUFFER_BIT),x.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Re,!1),n.removeEventListener("webglcontextrestored",Ie,!1),U.dispose(),B.dispose(),N.dispose(),F.dispose(),Pe.dispose(),Ue.stop()},this.renderBufferImmediate=function(e,t){S.initAttributes();var n=N.get(e);e.hasPositions&&!n.position&&(n.position=x.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=x.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=x.createBuffer()),e.hasColors&&!n.color&&(n.color=x.createBuffer());var r=t.getAttributes();e.hasPositions&&(x.bindBuffer(x.ARRAY_BUFFER,n.position),x.bufferData(x.ARRAY_BUFFER,e.positionArray,x.DYNAMIC_DRAW),S.enableAttribute(r.position),x.vertexAttribPointer(r.position,3,x.FLOAT,!1,0,0)),e.hasNormals&&(x.bindBuffer(x.ARRAY_BUFFER,n.normal),x.bufferData(x.ARRAY_BUFFER,e.normalArray,x.DYNAMIC_DRAW),S.enableAttribute(r.normal),x.vertexAttribPointer(r.normal,3,x.FLOAT,!1,0,0)),e.hasUvs&&(x.bindBuffer(x.ARRAY_BUFFER,n.uv),x.bufferData(x.ARRAY_BUFFER,e.uvArray,x.DYNAMIC_DRAW),S.enableAttribute(r.uv),x.vertexAttribPointer(r.uv,2,x.FLOAT,!1,0,0)),e.hasColors&&(x.bindBuffer(x.ARRAY_BUFFER,n.color),x.bufferData(x.ARRAY_BUFFER,e.colorArray,x.DYNAMIC_DRAW),S.enableAttribute(r.color),x.vertexAttribPointer(r.color,3,x.FLOAT,!1,0,0)),S.disableUnusedAttributes(),x.drawArrays(x.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){var a=i.isMesh&&i.normalMatrix.determinant()<0;S.setMaterial(r,a);var s=Ge(e,t,r,i),c=!1;ae.geometry===n.id&&ae.program===s.id&&ae.wireframe===(!0===r.wireframe)||(ae.geometry=n.id,ae.program=s.id,ae.wireframe=!0===r.wireframe,c=!0),i.morphTargetInfluences&&(j.update(i,n,r,s),c=!0);var u,l=n.index,h=n.attributes.position,d=1;!0===r.wireframe&&(l=D.getWireframeAttribute(n),d=2);var f=V;null!==l&&(u=I.get(l),(f=G).setIndex(u)),c&&(!function(e,t,n){if(n&&n.isInstancedBufferGeometry&!_.isWebGL2&&null===w.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");S.initAttributes();var r=n.attributes,i=t.getAttributes(),o=e.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var c=r[a];if(void 0!==c){var u=c.normalized,l=c.itemSize,h=I.get(c);if(void 0===h)continue;var d=h.buffer,f=h.type,p=h.bytesPerElement;if(c.isInterleavedBufferAttribute){var m=c.data,v=m.stride,g=c.offset;m&&m.isInstancedInterleavedBuffer?(S.enableAttributeAndDivisor(s,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):S.enableAttribute(s),x.bindBuffer(x.ARRAY_BUFFER,d),x.vertexAttribPointer(s,l,f,u,v*p,g*p)}else c.isInstancedBufferAttribute?(S.enableAttributeAndDivisor(s,c.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=c.meshPerAttribute*c.count)):S.enableAttribute(s),x.bindBuffer(x.ARRAY_BUFFER,d),x.vertexAttribPointer(s,l,f,u,0,0)}else if(void 0!==o){var y=o[a];if(void 0!==y)switch(y.length){case 2:x.vertexAttrib2fv(s,y);break;case 3:x.vertexAttrib3fv(s,y);break;case 4:x.vertexAttrib4fv(s,y);break;default:x.vertexAttrib1fv(s,y)}}}}S.disableUnusedAttributes()}(r,s,n),null!==l&&x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,u.buffer));var p=1/0;null!==l?p=l.count:void 0!==h&&(p=h.count);var m=n.drawRange.start*d,v=n.drawRange.count*d,g=null!==o?o.start*d:0,y=null!==o?o.count*d:1/0,b=Math.max(m,g),M=Math.min(p,m+v,g+y)-1,T=Math.max(0,M-b+1);if(0!==T){if(i.isMesh)if(!0===r.wireframe)S.setLineWidth(r.wireframeLinewidth*Ae()),f.setMode(x.LINES);else switch(i.drawMode){case Mt:f.setMode(x.TRIANGLES);break;case Tt:f.setMode(x.TRIANGLE_STRIP);break;case At:f.setMode(x.TRIANGLE_FAN)}else if(i.isLine){var A=r.linewidth;void 0===A&&(A=1),S.setLineWidth(A*Ae()),i.isLineSegments?f.setMode(x.LINES):i.isLineLoop?f.setMode(x.LINE_LOOP):f.setMode(x.LINE_STRIP)}else i.isPoints?f.setMode(x.POINTS):i.isSprite&&f.setMode(x.TRIANGLES);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&f.renderInstances(n,b,T):f.render(b,T)}},this.compile=function(e,t){(b=B.get(e,t)).init(),e.traverse(function(e){e.isLight&&(b.pushLight(e),e.castShadow&&b.pushShadow(e))}),b.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)Ve(t.material[n],e.fog,t);else Ve(t.material,e.fog,t)})};var ke=null;var Ue=new un;function ze(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,c=a.geometry,u=void 0===r?a.material:r,l=a.group;if(n.isArrayCamera){ce=n;for(var h=n.cameras,d=0,f=h.length;d<f;d++){var p=h[d];if(s.layers.test(p.layers)){if("viewport"in p)S.viewport(ue.copy(p.viewport));else{var m=p.bounds,v=m.x*fe,g=m.y*pe,y=m.z*fe,x=m.w*pe;S.viewport(ue.set(v,g,y,x).multiplyScalar(me))}b.setupLights(p),je(s,t,p,c,u,l)}}}else ce=null,je(s,t,n,c,u,l)}}function je(e,t,n,r,i,o){if(e.onBeforeRender(H,t,n,r,i,o),b=B.get(t,ce||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){S.setMaterial(i);var a=Ge(n,t.fog,i,e);ae.geometry=null,ae.program=null,ae.wireframe=!1,function(e,t){e.render(function(e){H.renderBufferImmediate(e,t)})}(e,a)}else H.renderBufferDirect(n,t.fog,r,i,e,o);e.onAfterRender(H,t,n,r,i,o),b=B.get(t,ce||n)}function Ve(e,t,n){var r=N.get(e),i=b.state.lights,o=b.state.shadowsArray,a=r.lightsHash,s=i.state.hash,c=k.getParameters(e,i.state,o,t,xe.numPlanes,xe.numIntersection,n),u=k.getProgramCode(e,c),l=r.program,h=!0;if(void 0===l)e.addEventListener("dispose",De);else if(l.code!==u)Fe(e);else if(a.stateID!==s.stateID||a.directionalLength!==s.directionalLength||a.pointLength!==s.pointLength||a.spotLength!==s.spotLength||a.rectAreaLength!==s.rectAreaLength||a.hemiLength!==s.hemiLength||a.shadowsLength!==s.shadowsLength)a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,h=!1;else{if(void 0!==c.shaderID)return;h=!1}if(h){if(c.shaderID){var d=cn[c.shaderID];r.shader={name:e.type,uniforms:rn.clone(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,H),u=k.getProgramCode(e,c),l=k.acquireProgram(e,r.shader,c,u),r.program=l,e.program=l}var f=l.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var p=0;p<H.maxMorphTargets;p++)f["morphTarget"+p]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(p=0;p<H.maxMorphNormals;p++)f["morphNormal"+p]>=0&&e.numSupportedMorphNormals++}var m=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=xe.numPlanes,r.numIntersection=xe.numIntersection,m.clippingPlanes=xe.uniform),r.fog=t,void 0===a&&(r.lightsHash=a={}),a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,e.lights&&(m.ambientLightColor.value=i.state.ambient,m.directionalLights.value=i.state.directional,m.spotLights.value=i.state.spot,m.rectAreaLights.value=i.state.rectArea,m.pointLights.value=i.state.point,m.hemisphereLights.value=i.state.hemi,m.directionalShadowMap.value=i.state.directionalShadowMap,m.directionalShadowMatrix.value=i.state.directionalShadowMatrix,m.spotShadowMap.value=i.state.spotShadowMap,m.spotShadowMatrix.value=i.state.spotShadowMatrix,m.pointShadowMap.value=i.state.pointShadowMap,m.pointShadowMatrix.value=i.state.pointShadowMatrix);var v=r.program.getUniforms(),g=Dr.seqWithValue(v.seq,m);r.uniformsList=g}function Ge(e,t,n,r){de=0;var i=N.get(n),o=b.state.lights,a=i.lightsHash,s=o.state.hash;if(we&&(_e||e!==se)){var c=e===se&&n.id===oe;xe.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,c)}!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:(!n.lights||a.stateID===s.stateID&&a.directionalLength===s.directionalLength&&a.pointLength===s.pointLength&&a.spotLength===s.spotLength&&a.rectAreaLength===s.rectAreaLength&&a.hemiLength===s.hemiLength&&a.shadowsLength===s.shadowsLength)&&(void 0===i.numClippingPlanes||i.numClippingPlanes===xe.numPlanes&&i.numIntersection===xe.numIntersection)||(n.needsUpdate=!0)),n.needsUpdate&&(Ve(n,t,r),n.needsUpdate=!1);var u=!1,l=!1,h=!1,d=i.program,f=d.getUniforms(),p=i.shader.uniforms;if(S.useProgram(d.program)&&(u=!0,l=!0,h=!0),n.id!==oe&&(oe=n.id,l=!0),u||se!==e){if(f.setValue(x,"projectionMatrix",e.projectionMatrix),_.logarithmicDepthBuffer&&f.setValue(x,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),se!==e&&(se=e,l=!0,h=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var m=f.map.cameraPosition;void 0!==m&&m.setValue(x,Me.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&f.setValue(x,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){f.setOptional(x,r,"bindMatrix"),f.setOptional(x,r,"bindMatrixInverse");var v=r.skeleton;if(v){var y=v.bones;if(_.floatVertexTextures){if(void 0===v.boneTexture){var w=Math.sqrt(4*y.length);w=Bt.ceilPowerOfTwo(w),w=Math.max(w,4);var M=new Float32Array(w*w*4);M.set(v.boneMatrices);var T=new Zt(M,w,w,Be,Oe);T.needsUpdate=!0,v.boneMatrices=M,v.boneTexture=T,v.boneTextureSize=w}f.setValue(x,"boneTexture",v.boneTexture),f.setValue(x,"boneTextureSize",v.boneTextureSize)}else f.setOptional(x,v,"boneMatrices")}}return l&&(f.setValue(x,"toneMappingExposure",H.toneMappingExposure),f.setValue(x,"toneMappingWhitePoint",H.toneMappingWhitePoint),n.lights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(p,h),t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(p,t),n.isMeshBasicMaterial?We(p,n):n.isMeshLambertMaterial?(We(p,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(p,n)):n.isMeshPhongMaterial?(We(p,n),n.isMeshToonMaterial?function(e,t){He(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(p,n):He(p,n)):n.isMeshStandardMaterial?(We(p,n),n.isMeshPhysicalMaterial?function(e,t){Xe(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(p,n):Xe(p,n)):n.isMeshMatcapMaterial?(We(p,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===g&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===g&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(p,n)):n.isMeshDepthMaterial?(We(p,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(p,n)):n.isMeshDistanceMaterial?(We(p,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(p,n)):n.isMeshNormalMaterial?(We(p,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===g&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===g&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(p,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(p,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(p,n)):n.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*me,e.scale.value=.5*pe,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(p,n):n.isSpriteMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(p,n):n.isShadowMaterial&&(p.color.value=n.color,p.opacity.value=n.opacity),void 0!==p.ltc_1&&(p.ltc_1.value=sn.LTC_1),void 0!==p.ltc_2&&(p.ltc_2.value=sn.LTC_2),Dr.upload(x,i.uniformsList,p,H)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Dr.upload(x,i.uniformsList,p,H),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&f.setValue(x,"center",r.center),f.setValue(x,"modelViewMatrix",r.modelViewMatrix),f.setValue(x,"normalMatrix",r.normalMatrix),f.setValue(x,"modelMatrix",r.matrixWorld),d}function We(e,t){var n;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=N.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function He(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===g&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===g&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Xe(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===g&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===g&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}Ue.setAnimationLoop(function(e){Pe.isPresenting()||ke&&ke(e)}),"undefined"!=typeof window&&Ue.setContext(window),this.setAnimationLoop=function(e){ke=e,Pe.setAnimationLoop(e),Ue.start()},this.render=function(e,t,n,r){if(t&&t.isCamera){if(!ee){ae.geometry=null,ae.program=null,ae.wireframe=!1,oe=-1,se=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Pe.enabled&&(t=Pe.getCamera(t)),(b=B.get(e,t)).init(),e.onBeforeRender(H,e,t,n),Se.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),be.setFromMatrix(Se),_e=this.localClippingEnabled,we=xe.init(this.clippingPlanes,_e,t),(m=U.get(e,t)).init(),function e(t,n,r){if(!1===t.visible)return;var i=t.layers.test(n.layers);if(i)if(t.isLight)b.pushLight(t),t.castShadow&&b.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||be.intersectsSprite(t)){r&&Me.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Se);var o=F.update(t),a=t.material;m.push(t,o,a,Me.z,null)}}else if(t.isImmediateRenderObject)r&&Me.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Se),m.push(t,null,t.material,Me.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||be.intersectsObject(t))){r&&Me.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Se);var o=F.update(t),a=t.material;if(Array.isArray(a))for(var s=o.groups,c=0,u=s.length;c<u;c++){var l=s[c],h=a[l.materialIndex];h&&h.visible&&m.push(t,o,h,Me.z,l)}else a.visible&&m.push(t,o,a,Me.z,null)}var d=t.children;for(var c=0,u=d.length;c<u;c++)e(d[c],n,r)}(e,t,H.sortObjects),!0===H.sortObjects&&m.sort(),we&&xe.beginShadows();var i=b.state.shadowsArray;Le.render(i,e,t),b.setupLights(t),we&&xe.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),z.render(m,e,t,r);var o=m.opaque,a=m.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&ze(o,e,t,s),a.length&&ze(a,e,t,s)}else o.length&&ze(o,e,t),a.length&&ze(a,e,t);n&&R.updateRenderTargetMipmap(n),S.buffers.depth.setTest(!0),S.buffers.depth.setMask(!0),S.buffers.color.setMask(!0),S.setPolygonOffset(!1),e.onAfterRender(H,e,t),Pe.enabled&&Pe.submitFrame(),m=null,b=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=de;return e>=_.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+_.maxTextures),de+=1,e},this.setTexture2D=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),R.setTexture2D(t,n)}}(),this.setTexture3D=function(e,t){R.setTexture3D(e,t)},this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),R.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?R.setTextureCube(t,n):R.setTextureCubeDynamic(t,n)}}(),this.setFramebuffer=function(e){te=e},this.getRenderTarget=function(){return ne},this.setRenderTarget=function(e){ne=e,e&&void 0===N.get(e).__webglFramebuffer&&R.setupRenderTarget(e);var t=te,n=!1;if(e){var r=N.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=r[e.activeCubeFace],n=!0):t=r,ue.copy(e.viewport),le.copy(e.scissor),he=e.scissorTest}else ue.copy(ve).multiplyScalar(me),le.copy(ge).multiplyScalar(me),he=ye;if(re!==t&&(x.bindFramebuffer(x.FRAMEBUFFER,t),re=t),S.viewport(ue),S.scissor(le),S.setScissorTest(he),n){var i=N.get(e.texture);x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,i,o){if(e&&e.isWebGLRenderTarget){var a=N.get(e).__webglFramebuffer;if(a){var s=!1;a!==re&&(x.bindFramebuffer(x.FRAMEBUFFER,a),s=!0);try{var c=e.texture,u=c.format,l=c.type;if(u!==Be&&W.convert(u)!==x.getParameter(x.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l===Te||W.convert(l)===x.getParameter(x.IMPLEMENTATION_COLOR_READ_TYPE)||l===Oe&&(_.isWebGL2||w.get("OES_texture_float")||w.get("WEBGL_color_buffer_float"))||l===Ne&&(_.isWebGL2?w.get("EXT_color_buffer_float"):w.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");x.checkFramebufferStatus(x.FRAMEBUFFER)===x.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&x.readPixels(t,n,r,i,W.convert(u),W.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&x.bindFramebuffer(x.FRAMEBUFFER,re)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var r=t.image.width,i=t.image.height,o=W.convert(t.format);this.setTexture2D(t,0),x.copyTexImage2D(x.TEXTURE_2D,n||0,o,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,o=t.image.height,a=W.convert(n.format),s=W.convert(n.type);this.setTexture2D(n,0),t.isDataTexture?x.texSubImage2D(x.TEXTURE_2D,r||0,e.x,e.y,i,o,a,s,t.image.data):x.texSubImage2D(x.TEXTURE_2D,r||0,e.x,e.y,a,s,t.image)}}function hi(e,t){this.name="",this.color=new an(e),this.density=void 0!==t?t:25e-5}function di(e,t,n){this.name="",this.color=new an(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function fi(){mn.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function pi(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function mi(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function vi(e){kn.call(this),this.type="SpriteMaterial",this.color=new an(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function gi(e){if(mn.call(this),this.type="Sprite",void 0===Qr){Qr=new On;var t=new pi(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Qr.setIndex([0,1,2,0,2,3]),Qr.addAttribute("position",new mi(t,3,0,!1)),Qr.addAttribute("uv",new mi(t,2,3,!1))}this.geometry=Qr,this.material=void 0!==e?e:new vi,this.center=new zt(.5,.5)}function yi(){mn.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function bi(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new jt)}}function xi(){mn.call(this),this.type="Bone"}function wi(e,t){Vn.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new jt,this.bindMatrixInverse=new jt;var n=new bi(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function _i(e){kn.call(this),this.type="LineBasicMaterial",this.color=new an(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Si(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),mn.call(this),this.type="Line",this.geometry=void 0!==e?e:new On,this.material=void 0!==t?t:new _i({color:16777215*Math.random()})}function Mi(e,t){Si.call(this,e,t),this.type="LineSegments"}function Ti(e,t){Si.call(this,e,t),this.type="LineLoop"}function Ai(e){kn.call(this),this.type="PointsMaterial",this.color=new an(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Ei(e,t){mn.call(this),this.type="Points",this.geometry=void 0!==e?e:new On,this.material=void 0!==t?t:new Ai({color:16777215*Math.random()})}function Ci(e,t,n,r,i,o,a,s,c){qt.call(this,e,t,n,r,i,o,a,s,c),this.generateMipmaps=!1}function Pi(e,t,n,r,i,o,a,s,c,u,l,h){qt.call(this,null,o,a,s,c,u,r,i,l,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Li(e,t,n,r,i,o,a,s,c){qt.call(this,e,t,n,r,i,o,a,s,c),this.needsUpdate=!0}function Oi(e,t,n,r,i,o,a,s,c,u){if((u=void 0!==u?u:Ge)!==Ge&&u!==We)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Ge&&(n=Ce),void 0===n&&u===We&&(n=Fe),qt.call(this,null,r,i,o,a,s,u,n,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:be,this.minFilter=void 0!==s?s:be,this.flipY=!1,this.generateMipmaps=!1}function Ni(e){On.call(this),this.type="WireframeGeometry";var t,n,r,i,o,a,s,c,u,l,h=[],d=[0,0],f={},p=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,r=m.length;t<r;t++){var v=m[t];for(n=0;n<3;n++)s=v[p[n]],c=v[p[(n+1)%3]],d[0]=Math.min(s,c),d[1]=Math.max(s,c),void 0===f[u=d[0]+","+d[1]]&&(f[u]={index1:d[0],index2:d[1]})}for(u in f)a=f[u],l=e.vertices[a.index1],h.push(l.x,l.y,l.z),l=e.vertices[a.index2],h.push(l.x,l.y,l.z)}else if(e&&e.isBufferGeometry){var g,y,b,x,w,_,S;if(l=new Gt,null!==e.index){for(g=e.attributes.position,y=e.index,0===(b=e.groups).length&&(b=[{start:0,count:y.count,materialIndex:0}]),i=0,o=b.length;i<o;++i)for(t=w=(x=b[i]).start,r=w+x.count;t<r;t+=3)for(n=0;n<3;n++)s=y.getX(t+n),c=y.getX(t+(n+1)%3),d[0]=Math.min(s,c),d[1]=Math.max(s,c),void 0===f[u=d[0]+","+d[1]]&&(f[u]={index1:d[0],index2:d[1]});for(u in f)a=f[u],l.fromBufferAttribute(g,a.index1),h.push(l.x,l.y,l.z),l.fromBufferAttribute(g,a.index2),h.push(l.x,l.y,l.z)}else for(t=0,r=(g=e.attributes.position).count/3;t<r;t++)for(n=0;n<3;n++)_=3*t+n,l.fromBufferAttribute(g,_),h.push(l.x,l.y,l.z),S=3*t+(n+1)%3,l.fromBufferAttribute(g,S),h.push(l.x,l.y,l.z)}this.addAttribute("position",new An(h,3))}function Ri(e,t,n){gn.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Ii(e,t,n)),this.mergeVertices()}function Ii(e,t,n){On.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],a=[],s=[],c=[],u=new Gt,l=new Gt,h=new Gt,d=new Gt,f=new Gt;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var p=t+1;for(r=0;r<=n;r++){var m=r/n;for(i=0;i<=t;i++){var v=i/t;e(v,m,l),a.push(l.x,l.y,l.z),v-1e-5>=0?(e(v-1e-5,m,h),d.subVectors(l,h)):(e(v+1e-5,m,h),d.subVectors(h,l)),m-1e-5>=0?(e(v,m-1e-5,h),f.subVectors(l,h)):(e(v,m+1e-5,h),f.subVectors(h,l)),u.crossVectors(d,f).normalize(),s.push(u.x,u.y,u.z),c.push(v,m)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var g=r*p+i,y=r*p+i+1,b=(r+1)*p+i+1,x=(r+1)*p+i;o.push(g,y,x),o.push(y,b,x)}this.setIndex(o),this.addAttribute("position",new An(a,3)),this.addAttribute("normal",new An(s,3)),this.addAttribute("uv",new An(c,2))}function Di(e,t,n,r){gn.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Fi(e,t,n,r)),this.mergeVertices()}function Fi(e,t,n,r){On.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],o=[];function a(e,t,n,r){var i,o,a=Math.pow(2,r),c=[];for(i=0;i<=a;i++){c[i]=[];var u=e.clone().lerp(n,i/a),l=t.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)c[i][o]=0===o&&i===a?u:u.clone().lerp(l,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var d=Math.floor(o/2);o%2==0?(s(c[i][d+1]),s(c[i+1][d]),s(c[i][d])):(s(c[i][d+1]),s(c[i+1][d+1]),s(c[i+1][d]))}}function s(e){i.push(e.x,e.y,e.z)}function c(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function u(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function l(e){return Math.atan2(e.z,-e.x)}function h(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){for(var n=new Gt,r=new Gt,i=new Gt,o=0;o<t.length;o+=3)c(t[o+0],n),c(t[o+1],r),c(t[o+2],i),a(n,r,i,e)}(r=r||0),function(e){for(var t=new Gt,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new Gt,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=l(e)/2/Math.PI+.5,r=h(e)/Math.PI+.5;o.push(n,1-r)}(function(){for(var e=new Gt,t=new Gt,n=new Gt,r=new Gt,a=new zt,s=new zt,c=new zt,h=0,d=0;h<i.length;h+=9,d+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),c.set(o[d+4],o[d+5]),r.copy(e).add(t).add(n).divideScalar(3);var f=l(r);u(a,d+0,e,f),u(s,d+2,t,f),u(c,d+4,n,f)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.addAttribute("position",new An(i,3)),this.addAttribute("normal",new An(i.slice(),3)),this.addAttribute("uv",new An(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function ki(e,t){gn.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ui(e,t)),this.mergeVertices()}function Ui(e,t){Fi.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Bi(e,t){gn.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new zi(e,t)),this.mergeVertices()}function zi(e,t){Fi.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ji(e,t){gn.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Vi(e,t)),this.mergeVertices()}function Vi(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Fi.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Gi(e,t){gn.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Wi(e,t)),this.mergeVertices()}function Wi(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];Fi.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Hi(e,t,n,r,i,o){gn.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Xi(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Xi(e,t,n,r,i){On.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,c=new Gt,u=new Gt,l=new zt,h=new Gt,d=[],f=[],p=[],m=[];function v(i){h=e.getPointAt(i/t,h);var a=o.normals[i],l=o.binormals[i];for(s=0;s<=r;s++){var p=s/r*Math.PI*2,m=Math.sin(p),v=-Math.cos(p);u.x=v*a.x+m*l.x,u.y=v*a.y+m*l.y,u.z=v*a.z+m*l.z,u.normalize(),f.push(u.x,u.y,u.z),c.x=h.x+n*u.x,c.y=h.y+n*u.y,c.z=h.z+n*u.z,d.push(c.x,c.y,c.z)}}!function(){for(a=0;a<t;a++)v(a);v(!1===i?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=r;s++)l.x=a/t,l.y=s/r,p.push(l.x,l.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=r;a++){var e=(r+1)*(s-1)+(a-1),n=(r+1)*s+(a-1),i=(r+1)*s+a,o=(r+1)*(s-1)+a;m.push(e,n,o),m.push(n,i,o)}}()}(),this.setIndex(m),this.addAttribute("position",new An(d,3)),this.addAttribute("normal",new An(f,3)),this.addAttribute("uv",new An(p,2))}function qi(e,t,n,r,i,o,a){gn.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Yi(e,t,n,r,i,o)),this.mergeVertices()}function Yi(e,t,n,r,i,o){On.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,c=[],u=[],l=[],h=[],d=new Gt,f=new Gt,p=new Gt,m=new Gt,v=new Gt,g=new Gt,y=new Gt;for(a=0;a<=n;++a){var b=a/n*i*Math.PI*2;for(E(b,i,o,e,p),E(b+.01,i,o,e,m),g.subVectors(m,p),y.addVectors(m,p),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=r;++s){var x=s/r*Math.PI*2,w=-t*Math.cos(x),_=t*Math.sin(x);d.x=p.x+(w*y.x+_*v.x),d.y=p.y+(w*y.y+_*v.y),d.z=p.z+(w*y.z+_*v.z),u.push(d.x,d.y,d.z),f.subVectors(d,p).normalize(),l.push(f.x,f.y,f.z),h.push(a/n),h.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var S=(r+1)*(s-1)+(a-1),M=(r+1)*s+(a-1),T=(r+1)*s+a,A=(r+1)*(s-1)+a;c.push(S,M,A),c.push(M,T,A)}function E(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,c=Math.cos(s);i.x=r*(2+c)*.5*o,i.y=r*(2+c)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(c),this.addAttribute("position",new An(u,3)),this.addAttribute("normal",new An(l,3)),this.addAttribute("uv",new An(h,2))}function Ji(e,t,n,r,i){gn.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Qi(e,t,n,r,i)),this.mergeVertices()}function Qi(e,t,n,r,i){On.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],c=[],u=[],l=[],h=new Gt,d=new Gt,f=new Gt;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var p=a/r*i,m=o/n*Math.PI*2;d.x=(e+t*Math.cos(m))*Math.cos(p),d.y=(e+t*Math.cos(m))*Math.sin(p),d.z=t*Math.sin(m),c.push(d.x,d.y,d.z),h.x=e*Math.cos(p),h.y=e*Math.sin(p),f.subVectors(d,h).normalize(),u.push(f.x,f.y,f.z),l.push(a/r),l.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var v=(r+1)*o+a-1,g=(r+1)*(o-1)+a-1,y=(r+1)*(o-1)+a,b=(r+1)*o+a;s.push(v,g,b),s.push(g,y,b)}this.setIndex(s),this.addAttribute("position",new An(c,3)),this.addAttribute("normal",new An(u,3)),this.addAttribute("uv",new An(l,2))}ei.prototype=Object.create(kn.prototype),ei.prototype.constructor=ei,ei.prototype.isMeshDepthMaterial=!0,ei.prototype.copy=function(e){return kn.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},ti.prototype=Object.create(kn.prototype),ti.prototype.constructor=ti,ti.prototype.isMeshDistanceMaterial=!0,ti.prototype.copy=function(e){return kn.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},oi.prototype=Object.assign(Object.create(mn.prototype),{constructor:oi,isGroup:!0}),ai.prototype=Object.assign(Object.create(mn.prototype),{constructor:ai,isCamera:!0,copy:function(e,t){return mn.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Gt),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){mn.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),si.prototype=Object.assign(Object.create(ai.prototype),{constructor:si,isPerspectiveCamera:!0,copy:function(e,t){return ai.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Bt.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Bt.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Bt.RAD2DEG*Math.atan(Math.tan(.5*Bt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Bt.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,t-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var c=this.filmOffset;0!==c&&(i+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=mn.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),ci.prototype=Object.assign(Object.create(si.prototype),{constructor:ci,isArrayCamera:!0}),hi.prototype.isFogExp2=!0,hi.prototype.clone=function(){return new hi(this.color,this.density)},hi.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},di.prototype.isFog=!0,di.prototype.clone=function(){return new di(this.color,this.near,this.far)},di.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},fi.prototype=Object.assign(Object.create(mn.prototype),{constructor:fi,copy:function(e,t){return mn.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=mn.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Object.defineProperty(pi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(pi.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(mi.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(mi.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),vi.prototype=Object.create(kn.prototype),vi.prototype.constructor=vi,vi.prototype.isSpriteMaterial=!0,vi.prototype.copy=function(e){return kn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this},gi.prototype=Object.assign(Object.create(mn.prototype),{constructor:gi,isSprite:!0,raycast:function(){var e=new Gt,t=new Gt,n=new Gt,r=new zt,i=new zt,o=new jt,a=new Gt,s=new Gt,c=new Gt,u=new zt,l=new zt,h=new zt;function d(e,t,n,a,s,c){r.subVectors(e,n).addScalar(.5).multiply(a),void 0!==s?(i.x=c*r.x-s*r.y,i.y=s*r.x+c*r.y):i.copy(r),e.copy(t),e.x+=i.x,e.y+=i.y,e.applyMatrix4(o)}return function(r,i){t.setFromMatrixScale(this.matrixWorld),o.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix);var f,p,m=this.material.rotation;0!==m&&(p=Math.cos(m),f=Math.sin(m));var v=this.center;d(a.set(-.5,-.5,0),n,v,t,f,p),d(s.set(.5,-.5,0),n,v,t,f,p),d(c.set(.5,.5,0),n,v,t,f,p),u.set(0,0),l.set(1,0),h.set(1,1);var g=r.ray.intersectTriangle(a,s,c,!1,e);if(null!==g||(d(s.set(-.5,.5,0),n,v,t,f,p),l.set(0,1),null!==(g=r.ray.intersectTriangle(a,c,s,!1,e)))){var y=r.ray.origin.distanceTo(e);y<r.near||y>r.far||i.push({distance:y,point:e.clone(),uv:zn.getUV(e,a,s,c,u,l,h,new zt),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return mn.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),yi.prototype=Object.assign(Object.create(mn.prototype),{constructor:yi,copy:function(e){mn.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new Gt;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),update:function(){var e=new Gt,t=new Gt;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(e){var t=mn.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(bi.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new jt;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new jt,t=new jt;return function(){for(var n=this.bones,r=this.boneInverses,i=this.boneMatrices,o=this.boneTexture,a=0,s=n.length;a<s;a++){var c=n[a]?n[a].matrixWorld:t;e.multiplyMatrices(c,r[a]),e.toArray(i,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new bi(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),xi.prototype=Object.assign(Object.create(mn.prototype),{constructor:xi,isBone:!0}),wi.prototype=Object.assign(Object.create(Vn.prototype),{constructor:wi,isSkinnedMesh:!0,initBones:function(){var e,t,n,r,i=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,r=this.geometry.bones.length;n<r;n++)t=this.geometry.bones[n],e=new xi,i.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,r=this.geometry.bones.length;n<r;n++)-1!==(t=this.geometry.bones[n]).parent&&null!==t.parent&&void 0!==i[t.parent]?i[t.parent].add(i[n]):this.add(i[n])}return this.updateMatrixWorld(!0),i},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];(e=1/n.manhattanLength())!==1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new Yt,i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++)r.x=i.getX(t),r.y=i.getY(t),r.z=i.getZ(t),r.w=i.getW(t),(e=1/r.manhattanLength())!==1/0?r.multiplyScalar(e):r.set(1,0,0,0),i.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){Vn.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),_i.prototype=Object.create(kn.prototype),_i.prototype.constructor=_i,_i.prototype.isLineBasicMaterial=!0,_i.prototype.copy=function(e){return kn.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Si.prototype=Object.assign(Object.create(mn.prototype),{constructor:Si,isLine:!0,computeLineDistances:function(){var e=new Gt,t=new Gt;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[0],o=1,a=r.count;o<a;o++)e.fromBufferAttribute(r,o-1),t.fromBufferAttribute(r,o),i[o]=i[o-1],i[o]+=e.distanceTo(t);n.addAttribute("lineDistance",new An(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;(i=n.lineDistances)[0]=0;for(o=1,a=s.length;o<a;o++)i[o]=i[o-1],i[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var e=new jt,t=new Bn,n=new $t;return function(r,i){var o=r.linePrecision,a=this.geometry,s=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=o,!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var c=o/((this.scale.x+this.scale.y+this.scale.z)/3),u=c*c,l=new Gt,h=new Gt,d=new Gt,f=new Gt,p=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var m=a.index,v=a.attributes.position.array;if(null!==m)for(var g=m.array,y=0,b=g.length-1;y<b;y+=p){var x=g[y],w=g[y+1];if(l.fromArray(v,3*x),h.fromArray(v,3*w),!(t.distanceSqToSegment(l,h,f,d)>u))f.applyMatrix4(this.matrixWorld),(M=r.ray.origin.distanceTo(f))<r.near||M>r.far||i.push({distance:M,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(y=0,b=v.length/3-1;y<b;y+=p){if(l.fromArray(v,3*y),h.fromArray(v,3*y+3),!(t.distanceSqToSegment(l,h,f,d)>u))f.applyMatrix4(this.matrixWorld),(M=r.ray.origin.distanceTo(f))<r.near||M>r.far||i.push({distance:M,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else if(a.isGeometry){var _=a.vertices,S=_.length;for(y=0;y<S-1;y+=p){var M;if(!(t.distanceSqToSegment(_[y],_[y+1],f,d)>u))f.applyMatrix4(this.matrixWorld),(M=r.ray.origin.distanceTo(f))<r.near||M>r.far||i.push({distance:M,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Mi.prototype=Object.assign(Object.create(Si.prototype),{constructor:Mi,isLineSegments:!0,computeLineDistances:function(){var e=new Gt,t=new Gt;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)e.fromBufferAttribute(r,o),t.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);n.addAttribute("lineDistance",new An(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(i=n.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t)}return this}}()}),Ti.prototype=Object.assign(Object.create(Si.prototype),{constructor:Ti,isLineLoop:!0}),Ai.prototype=Object.create(kn.prototype),Ai.prototype.constructor=Ai,Ai.prototype.isPointsMaterial=!0,Ai.prototype.copy=function(e){return kn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},Ei.prototype=Object.assign(Object.create(mn.prototype),{constructor:Ei,isPoints:!0,raycast:function(){var e=new jt,t=new Bn,n=new $t;return function(r,i){var o=this,a=this.geometry,s=this.matrixWorld,c=r.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=c,!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var u=c/((this.scale.x+this.scale.y+this.scale.z)/3),l=u*u,h=new Gt,d=new Gt;if(a.isBufferGeometry){var f=a.index,p=a.attributes.position.array;if(null!==f)for(var m=f.array,v=0,g=m.length;v<g;v++){var y=m[v];h.fromArray(p,3*y),w(h,y)}else{v=0;for(var b=p.length/3;v<b;v++)h.fromArray(p,3*v),w(h,v)}}else{var x=a.vertices;for(v=0,b=x.length;v<b;v++)w(x[v],v)}}function w(e,n){var a=t.distanceSqToPoint(e);if(a<l){t.closestPointToPoint(e,d),d.applyMatrix4(s);var c=r.ray.origin.distanceTo(d);if(c<r.near||c>r.far)return;i.push({distance:c,distanceToRay:Math.sqrt(a),point:d.clone(),index:n,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ci.prototype=Object.assign(Object.create(qt.prototype),{constructor:Ci,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Pi.prototype=Object.create(qt.prototype),Pi.prototype.constructor=Pi,Pi.prototype.isCompressedTexture=!0,Li.prototype=Object.create(qt.prototype),Li.prototype.constructor=Li,Li.prototype.isCanvasTexture=!0,Oi.prototype=Object.create(qt.prototype),Oi.prototype.constructor=Oi,Oi.prototype.isDepthTexture=!0,Ni.prototype=Object.create(On.prototype),Ni.prototype.constructor=Ni,Ri.prototype=Object.create(gn.prototype),Ri.prototype.constructor=Ri,Ii.prototype=Object.create(On.prototype),Ii.prototype.constructor=Ii,Di.prototype=Object.create(gn.prototype),Di.prototype.constructor=Di,Fi.prototype=Object.create(On.prototype),Fi.prototype.constructor=Fi,ki.prototype=Object.create(gn.prototype),ki.prototype.constructor=ki,Ui.prototype=Object.create(Fi.prototype),Ui.prototype.constructor=Ui,Bi.prototype=Object.create(gn.prototype),Bi.prototype.constructor=Bi,zi.prototype=Object.create(Fi.prototype),zi.prototype.constructor=zi,ji.prototype=Object.create(gn.prototype),ji.prototype.constructor=ji,Vi.prototype=Object.create(Fi.prototype),Vi.prototype.constructor=Vi,Gi.prototype=Object.create(gn.prototype),Gi.prototype.constructor=Gi,Wi.prototype=Object.create(Fi.prototype),Wi.prototype.constructor=Wi,Hi.prototype=Object.create(gn.prototype),Hi.prototype.constructor=Hi,Xi.prototype=Object.create(On.prototype),Xi.prototype.constructor=Xi,qi.prototype=Object.create(gn.prototype),qi.prototype.constructor=qi,Yi.prototype=Object.create(On.prototype),Yi.prototype.constructor=Yi,Ji.prototype=Object.create(gn.prototype),Ji.prototype.constructor=Ji,Qi.prototype=Object.create(On.prototype),Qi.prototype.constructor=Qi;var Zi=function(e,t,n){n=n||2;var r,i,o,a,s,c,u,l=t&&t.length,h=l?t[0]*n:e.length,d=Ki(e,0,h,n,!0),f=[];if(!d)return f;if(l&&(d=function(e,t,n,r){var i,o,a,s,c,u=[];for(i=0,o=t.length;i<o;i++)a=t[i]*r,s=i<o-1?t[i+1]*r:e.length,(c=Ki(e,a,s,r,!1))===c.next&&(c.steiner=!0),u.push(co(c));for(u.sort(oo),i=0;i<u.length;i++)ao(u[i],n),n=$i(n,n.next);return n}(e,t,d,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var p=n;p<h;p+=n)s=e[p],c=e[p+1],s<r&&(r=s),c<i&&(i=c),s>o&&(o=s),c>a&&(a=c);u=0!==(u=Math.max(o-r,a-i))?1/u:0}return eo(d,f,n,r,i,u),f};function Ki(e,t,n,r,i){var o,a;if(i===function(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=go(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=go(o,e[o],e[o+1],a);return a&&fo(a,a.next)&&(yo(a),a=a.next),a}function $i(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!fo(r,r.next)&&0!==ho(r.prev,r,r.next))r=r.next;else{if(yo(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function eo(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=so(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,c,u=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(c=u;s>0||c>0&&r;)0!==s&&(0===c||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,c--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(e,r,i,o);for(var s,c,u=e;e.prev!==e.next;)if(s=e.prev,c=e.next,o?no(e,r,i,o):to(e))t.push(s.i/n),t.push(e.i/n),t.push(c.i/n),yo(e),e=c.next,u=c.next;else if((e=c)===u){a?1===a?eo(e=ro(e,t,n),t,n,r,i,o,2):2===a&&io(e,t,n,r,i,o):eo($i(e),t,n,r,i,o,1);break}}}function to(e){var t=e.prev,n=e,r=e.next;if(ho(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(uo(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&ho(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function no(e,t,n,r){var i=e.prev,o=e,a=e.next;if(ho(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,c=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=so(s,c,t,n,r),d=so(u,l,t,n,r),f=e.nextZ;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&uo(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&ho(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=e.prevZ;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&uo(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&ho(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function ro(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!fo(i,o)&&po(i,r,r.next,o)&&mo(i,o)&&mo(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),yo(r),yo(r.next),r=e=o),r=r.next}while(r!==e);return r}function io(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&lo(a,s)){var c=vo(a,s);return a=$i(a,a.next),c=$i(c,c.next),eo(a,t,n,r,i,o),void eo(c,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function oo(e,t){return e.x-t.x}function ao(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var c,u=n,l=n.x,h=n.y,d=1/0;r=n.next;for(;r!==u;)i>=r.x&&r.x>=l&&i!==r.x&&uo(o<h?i:a,o,l,h,o<h?a:i,o,r.x,r.y)&&((c=Math.abs(o-r.y)/(i-r.x))<d||c===d&&r.x>n.x)&&mo(r,e)&&(n=r,d=c),r=r.next;return n}(e,t)){var n=vo(t,e);$i(n,n.next)}}function so(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function co(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function uo(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function lo(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&po(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&mo(e,t)&&mo(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function ho(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function fo(e,t){return e.x===t.x&&e.y===t.y}function po(e,t,n,r){return!!(fo(e,t)&&fo(n,r)||fo(e,r)&&fo(n,t))||ho(e,t,n)>0!=ho(e,t,r)>0&&ho(n,r,e)>0!=ho(n,r,t)>0}function mo(e,t){return ho(e.prev,e,e.next)<0?ho(e,t,e.next)>=0&&ho(e,e.prev,t)>=0:ho(e,t,e.prev)<0||ho(e,e.next,t)<0}function vo(e,t){var n=new bo(e.i,e.x,e.y),r=new bo(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function go(e,t,n,r){var i=new bo(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function yo(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function bo(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var xo={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return xo.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];wo(e),_o(n,e);var o=e.length;t.forEach(wo);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,_o(n,t[a]);var s=Zi(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function wo(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function _o(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function So(e,t){gn.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Mo(e,t)),this.mergeVertices()}function Mo(e,t){On.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t};for(var n=this,r=[],i=[],o=0,a=(e=Array.isArray(e)?e:[e]).length;o<a;o++){s(e[o])}function s(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,c=void 0!==t.depth?t.depth:100,u=void 0===t.bevelEnabled||t.bevelEnabled,l=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:l-2,d=void 0!==t.bevelSegments?t.bevelSegments:3,f=t.extrudePath,p=void 0!==t.UVGenerator?t.UVGenerator:To;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=t.amount);var m,v,g,y,b,x,w,_,S=!1;f&&(m=f.getSpacedPoints(s),S=!0,u=!1,v=f.computeFrenetFrames(s,!1),g=new Gt,y=new Gt,b=new Gt),u||(d=0,l=0,h=0);var M=e.extractPoints(a),T=M.shape,A=M.holes;if(!xo.isClockWise(T))for(T=T.reverse(),w=0,_=A.length;w<_;w++)x=A[w],xo.isClockWise(x)&&(A[w]=x.reverse());var E=xo.triangulateShape(T,A),C=T;for(w=0,_=A.length;w<_;w++)x=A[w],T=T.concat(x);function P(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var L,O,N,R,I,D,F=T.length,k=E.length;function U(e,t,n){var r,i,o,a=e.x-t.x,s=e.y-t.y,c=n.x-e.x,u=n.y-e.y,l=a*a+s*s,h=a*u-s*c;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(l),f=Math.sqrt(c*c+u*u),p=t.x-s/d,m=t.y+a/d,v=((n.x-u/f-p)*u-(n.y+c/f-m)*c)/(a*u-s*c),g=(r=p+a*v-e.x)*r+(i=m+s*v-e.y)*i;if(g<=2)return new zt(r,i);o=Math.sqrt(g/2)}else{var y=!1;a>Number.EPSILON?c>Number.EPSILON&&(y=!0):a<-Number.EPSILON?c<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(r=-s,i=a,o=Math.sqrt(l)):(r=a,i=s,o=Math.sqrt(l/2))}return new zt(r/o,i/o)}for(var B=[],z=0,j=C.length,V=j-1,G=z+1;z<j;z++,V++,G++)V===j&&(V=0),G===j&&(G=0),B[z]=U(C[z],C[V],C[G]);var W,H,X=[],q=B.concat();for(w=0,_=A.length;w<_;w++){for(x=A[w],W=[],z=0,V=(j=x.length)-1,G=z+1;z<j;z++,V++,G++)V===j&&(V=0),G===j&&(G=0),W[z]=U(x[z],x[V],x[G]);X.push(W),q=q.concat(W)}for(L=0;L<d;L++){for(N=L/d,R=l*Math.cos(N*Math.PI/2),O=h*Math.sin(N*Math.PI/2),z=0,j=C.length;z<j;z++)J((I=P(C[z],B[z],O)).x,I.y,-R);for(w=0,_=A.length;w<_;w++)for(x=A[w],W=X[w],z=0,j=x.length;z<j;z++)J((I=P(x[z],W[z],O)).x,I.y,-R)}for(O=h,z=0;z<F;z++)I=u?P(T[z],q[z],O):T[z],S?(y.copy(v.normals[0]).multiplyScalar(I.x),g.copy(v.binormals[0]).multiplyScalar(I.y),b.copy(m[0]).add(y).add(g),J(b.x,b.y,b.z)):J(I.x,I.y,0);for(H=1;H<=s;H++)for(z=0;z<F;z++)I=u?P(T[z],q[z],O):T[z],S?(y.copy(v.normals[H]).multiplyScalar(I.x),g.copy(v.binormals[H]).multiplyScalar(I.y),b.copy(m[H]).add(y).add(g),J(b.x,b.y,b.z)):J(I.x,I.y,c/s*H);for(L=d-1;L>=0;L--){for(N=L/d,R=l*Math.cos(N*Math.PI/2),O=h*Math.sin(N*Math.PI/2),z=0,j=C.length;z<j;z++)J((I=P(C[z],B[z],O)).x,I.y,c+R);for(w=0,_=A.length;w<_;w++)for(x=A[w],W=X[w],z=0,j=x.length;z<j;z++)I=P(x[z],W[z],O),S?J(I.x,I.y+m[s-1].y,m[s-1].x+R):J(I.x,I.y,c+R)}function Y(e,t){var n,r;for(z=e.length;--z>=0;){n=z,(r=z-1)<0&&(r=e.length-1);var i=0,o=s+2*d;for(i=0;i<o;i++){var a=F*i,c=F*(i+1);Z(t+n+a,t+r+a,t+r+c,t+n+c)}}}function J(e,t,n){o.push(e),o.push(t),o.push(n)}function Q(e,t,i){K(e),K(t),K(i);var o=r.length/3,a=p.generateTopUV(n,r,o-3,o-2,o-1);$(a[0]),$(a[1]),$(a[2])}function Z(e,t,i,o){K(e),K(t),K(o),K(t),K(i),K(o);var a=r.length/3,s=p.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);$(s[0]),$(s[1]),$(s[3]),$(s[1]),$(s[2]),$(s[3])}function K(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function $(e){i.push(e.x),i.push(e.y)}!function(){var e=r.length/3;if(u){var t=0,i=F*t;for(z=0;z<k;z++)Q((D=E[z])[2]+i,D[1]+i,D[0]+i);for(i=F*(t=s+2*d),z=0;z<k;z++)Q((D=E[z])[0]+i,D[1]+i,D[2]+i)}else{for(z=0;z<k;z++)Q((D=E[z])[2],D[1],D[0]);for(z=0;z<k;z++)Q((D=E[z])[0]+F*s,D[1]+F*s,D[2]+F*s)}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for(Y(C,t),t+=C.length,w=0,_=A.length;w<_;w++)Y(x=A[w],t),t+=x.length;n.addGroup(e,r.length/3-e,1)}()}this.addAttribute("position",new An(r,3)),this.addAttribute("uv",new An(i,2)),this.computeVertexNormals()}So.prototype=Object.create(gn.prototype),So.prototype.constructor=So,So.prototype.toJSON=function(){var e=gn.prototype.toJSON.call(this);return Ao(this.parameters.shapes,this.parameters.options,e)},Mo.prototype=Object.create(On.prototype),Mo.prototype.constructor=Mo,Mo.prototype.toJSON=function(){var e=On.prototype.toJSON.call(this);return Ao(this.parameters.shapes,this.parameters.options,e)};var To={generateTopUV:function(e,t,n,r,i){var o=t[3*n],a=t[3*n+1],s=t[3*r],c=t[3*r+1],u=t[3*i],l=t[3*i+1];return[new zt(o,a),new zt(s,c),new zt(u,l)]},generateSideWallUV:function(e,t,n,r,i,o){var a=t[3*n],s=t[3*n+1],c=t[3*n+2],u=t[3*r],l=t[3*r+1],h=t[3*r+2],d=t[3*i],f=t[3*i+1],p=t[3*i+2],m=t[3*o],v=t[3*o+1],g=t[3*o+2];return Math.abs(s-l)<.01?[new zt(a,1-c),new zt(u,1-h),new zt(d,1-p),new zt(m,1-g)]:[new zt(s,1-c),new zt(l,1-h),new zt(f,1-p),new zt(v,1-g)]}};function Ao(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Eo(e,t){gn.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Co(e,t)),this.mergeVertices()}function Co(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new gn;var r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Mo.call(this,r,t),this.type="TextBufferGeometry"}function Po(e,t,n,r,i,o,a){gn.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Lo(e,t,n,r,i,o,a)),this.mergeVertices()}function Lo(e,t,n,r,i,o,a){On.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var s,c,u=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),l=0,h=[],d=new Gt,f=new Gt,p=[],m=[],v=[],g=[];for(c=0;c<=n;c++){var y=[],b=c/n;for(s=0;s<=t;s++){var x=s/t;d.x=-e*Math.cos(r+x*i)*Math.sin(o+b*a),d.y=e*Math.cos(o+b*a),d.z=e*Math.sin(r+x*i)*Math.sin(o+b*a),m.push(d.x,d.y,d.z),f.set(d.x,d.y,d.z).normalize(),v.push(f.x,f.y,f.z),g.push(x,1-b),y.push(l++)}h.push(y)}for(c=0;c<n;c++)for(s=0;s<t;s++){var w=h[c][s+1],_=h[c][s],S=h[c+1][s],M=h[c+1][s+1];(0!==c||o>0)&&p.push(w,_,M),(c!==n-1||u<Math.PI)&&p.push(_,S,M)}this.setIndex(p),this.addAttribute("position",new An(m,3)),this.addAttribute("normal",new An(v,3)),this.addAttribute("uv",new An(g,2))}function Oo(e,t,n,r,i,o){gn.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new No(e,t,n,r,i,o)),this.mergeVertices()}function No(e,t,n,r,i,o){On.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,c,u=[],l=[],h=[],d=[],f=e,p=(t-e)/(r=void 0!==r?Math.max(1,r):1),m=new Gt,v=new zt;for(s=0;s<=r;s++){for(c=0;c<=n;c++)a=i+c/n*o,m.x=f*Math.cos(a),m.y=f*Math.sin(a),l.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,d.push(v.x,v.y);f+=p}for(s=0;s<r;s++){var g=s*(n+1);for(c=0;c<n;c++){var y=a=c+g,b=a+n+1,x=a+n+2,w=a+1;u.push(y,b,w),u.push(b,x,w)}}this.setIndex(u),this.addAttribute("position",new An(l,3)),this.addAttribute("normal",new An(h,3)),this.addAttribute("uv",new An(d,2))}function Ro(e,t,n,r){gn.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Io(e,t,n,r)),this.mergeVertices()}function Io(e,t,n,r){On.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=Bt.clamp(r,0,2*Math.PI);var i,o,a,s=[],c=[],u=[],l=1/t,h=new Gt,d=new zt;for(o=0;o<=t;o++){var f=n+o*l*r,p=Math.sin(f),m=Math.cos(f);for(a=0;a<=e.length-1;a++)h.x=e[a].x*p,h.y=e[a].y,h.z=e[a].x*m,c.push(h.x,h.y,h.z),d.x=o/t,d.y=a/(e.length-1),u.push(d.x,d.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var v=i=a+o*e.length,g=i+e.length,y=i+e.length+1,b=i+1;s.push(v,g,b),s.push(g,y,b)}if(this.setIndex(s),this.addAttribute("position",new An(c,3)),this.addAttribute("uv",new An(u,2)),this.computeVertexNormals(),r===2*Math.PI){var x=this.attributes.normal.array,w=new Gt,_=new Gt,S=new Gt;for(i=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)w.x=x[a+0],w.y=x[a+1],w.z=x[a+2],_.x=x[i+a+0],_.y=x[i+a+1],_.z=x[i+a+2],S.addVectors(w,_).normalize(),x[a+0]=x[i+a+0]=S.x,x[a+1]=x[i+a+1]=S.y,x[a+2]=x[i+a+2]=S.z}}function Do(e,t){gn.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Fo(e,t)),this.mergeVertices()}function Fo(e,t){On.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))u(e);else for(var c=0;c<e.length;c++)u(e[c]),this.addGroup(a,s,c),a+=s,s=0;function u(e){var a,c,u,l=r.length/3,h=e.extractPoints(t),d=h.shape,f=h.holes;if(!1===xo.isClockWise(d))for(d=d.reverse(),a=0,c=f.length;a<c;a++)u=f[a],!0===xo.isClockWise(u)&&(f[a]=u.reverse());var p=xo.triangulateShape(d,f);for(a=0,c=f.length;a<c;a++)u=f[a],d=d.concat(u);for(a=0,c=d.length;a<c;a++){var m=d[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,c=p.length;a<c;a++){var v=p[a],g=v[0]+l,y=v[1]+l,b=v[2]+l;n.push(g,y,b),s+=3}}this.setIndex(n),this.addAttribute("position",new An(r,3)),this.addAttribute("normal",new An(i,3)),this.addAttribute("uv",new An(o,2))}function ko(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function Uo(e,t){On.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,o,a=[],s=Math.cos(Bt.DEG2RAD*t),c=[0,0],u={},l=["a","b","c"];e.isBufferGeometry?(o=new gn).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,d=o.faces,f=0,p=d.length;f<p;f++)for(var m=d[f],v=0;v<3;v++)n=m[l[v]],r=m[l[(v+1)%3]],c[0]=Math.min(n,r),c[1]=Math.max(n,r),void 0===u[i=c[0]+","+c[1]]?u[i]={index1:c[0],index2:c[1],face1:f,face2:void 0}:u[i].face2=f;for(i in u){var g=u[i];if(void 0===g.face2||d[g.face1].normal.dot(d[g.face2].normal)<=s){var y=h[g.index1];a.push(y.x,y.y,y.z),y=h[g.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new An(a,3))}function Bo(e,t,n,r,i,o,a,s){gn.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new zo(e,t,n,r,i,o,a,s)),this.mergeVertices()}function zo(e,t,n,r,i,o,a,s){On.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var c=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var u=[],l=[],h=[],d=[],f=0,p=[],m=n/2,v=0;function g(n){var i,o,p,g=new zt,y=new Gt,b=0,x=!0===n?e:t,w=!0===n?1:-1;for(o=f,i=1;i<=r;i++)l.push(0,m*w,0),h.push(0,w,0),d.push(.5,.5),f++;for(p=f,i=0;i<=r;i++){var _=i/r*s+a,S=Math.cos(_),M=Math.sin(_);y.x=x*M,y.y=m*w,y.z=x*S,l.push(y.x,y.y,y.z),h.push(0,w,0),g.x=.5*S+.5,g.y=.5*M*w+.5,d.push(g.x,g.y),f++}for(i=0;i<r;i++){var T=o+i,A=p+i;!0===n?u.push(A,A+1,T):u.push(A+1,A,T),b+=3}c.addGroup(v,b,!0===n?1:2),v+=b}!function(){var o,g,y=new Gt,b=new Gt,x=0,w=(t-e)/n;for(g=0;g<=i;g++){var _=[],S=g/i,M=S*(t-e)+e;for(o=0;o<=r;o++){var T=o/r,A=T*s+a,E=Math.sin(A),C=Math.cos(A);b.x=M*E,b.y=-S*n+m,b.z=M*C,l.push(b.x,b.y,b.z),y.set(E,w,C).normalize(),h.push(y.x,y.y,y.z),d.push(T,1-S),_.push(f++)}p.push(_)}for(o=0;o<r;o++)for(g=0;g<i;g++){var P=p[g][o],L=p[g+1][o],O=p[g+1][o+1],N=p[g][o+1];u.push(P,L,N),u.push(L,O,N),x+=6}c.addGroup(v,x,0),v+=x}(),!1===o&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(u),this.addAttribute("position",new An(l,3)),this.addAttribute("normal",new An(h,3)),this.addAttribute("uv",new An(d,2))}function jo(e,t,n,r,i,o,a){Bo.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Vo(e,t,n,r,i,o,a){zo.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Go(e,t,n,r){gn.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Wo(e,t,n,r)),this.mergeVertices()}function Wo(e,t,n,r){On.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],s=[],c=[],u=[],l=new Gt,h=new zt;for(s.push(0,0,0),c.push(0,0,1),u.push(.5,.5),o=0,i=3;o<=t;o++,i+=3){var d=n+o/t*r;l.x=e*Math.cos(d),l.y=e*Math.sin(d),s.push(l.x,l.y,l.z),c.push(0,0,1),h.x=(s[i]/e+1)/2,h.y=(s[i+1]/e+1)/2,u.push(h.x,h.y)}for(i=1;i<=t;i++)a.push(i,i+1,0);this.setIndex(a),this.addAttribute("position",new An(s,3)),this.addAttribute("normal",new An(c,3)),this.addAttribute("uv",new An(u,2))}Eo.prototype=Object.create(gn.prototype),Eo.prototype.constructor=Eo,Co.prototype=Object.create(Mo.prototype),Co.prototype.constructor=Co,Po.prototype=Object.create(gn.prototype),Po.prototype.constructor=Po,Lo.prototype=Object.create(On.prototype),Lo.prototype.constructor=Lo,Oo.prototype=Object.create(gn.prototype),Oo.prototype.constructor=Oo,No.prototype=Object.create(On.prototype),No.prototype.constructor=No,Ro.prototype=Object.create(gn.prototype),Ro.prototype.constructor=Ro,Io.prototype=Object.create(On.prototype),Io.prototype.constructor=Io,Do.prototype=Object.create(gn.prototype),Do.prototype.constructor=Do,Do.prototype.toJSON=function(){var e=gn.prototype.toJSON.call(this);return ko(this.parameters.shapes,e)},Fo.prototype=Object.create(On.prototype),Fo.prototype.constructor=Fo,Fo.prototype.toJSON=function(){var e=On.prototype.toJSON.call(this);return ko(this.parameters.shapes,e)},Uo.prototype=Object.create(On.prototype),Uo.prototype.constructor=Uo,Bo.prototype=Object.create(gn.prototype),Bo.prototype.constructor=Bo,zo.prototype=Object.create(On.prototype),zo.prototype.constructor=zo,jo.prototype=Object.create(Bo.prototype),jo.prototype.constructor=jo,Vo.prototype=Object.create(zo.prototype),Vo.prototype.constructor=Vo,Go.prototype=Object.create(gn.prototype),Go.prototype.constructor=Go,Wo.prototype=Object.create(On.prototype),Wo.prototype.constructor=Wo;var Ho=Object.freeze({WireframeGeometry:Ni,ParametricGeometry:Ri,ParametricBufferGeometry:Ii,TetrahedronGeometry:ki,TetrahedronBufferGeometry:Ui,OctahedronGeometry:Bi,OctahedronBufferGeometry:zi,IcosahedronGeometry:ji,IcosahedronBufferGeometry:Vi,DodecahedronGeometry:Gi,DodecahedronBufferGeometry:Wi,PolyhedronGeometry:Di,PolyhedronBufferGeometry:Fi,TubeGeometry:Hi,TubeBufferGeometry:Xi,TorusKnotGeometry:qi,TorusKnotBufferGeometry:Yi,TorusGeometry:Ji,TorusBufferGeometry:Qi,TextGeometry:Eo,TextBufferGeometry:Co,SphereGeometry:Po,SphereBufferGeometry:Lo,RingGeometry:Oo,RingBufferGeometry:No,PlaneGeometry:In,PlaneBufferGeometry:Dn,LatheGeometry:Ro,LatheBufferGeometry:Io,ShapeGeometry:Do,ShapeBufferGeometry:Fo,ExtrudeGeometry:So,ExtrudeBufferGeometry:Mo,EdgesGeometry:Uo,ConeGeometry:jo,ConeBufferGeometry:Vo,CylinderGeometry:Bo,CylinderBufferGeometry:zo,CircleGeometry:Go,CircleBufferGeometry:Wo,BoxGeometry:Nn,BoxBufferGeometry:Rn});function Xo(e){kn.call(this),this.type="ShadowMaterial",this.color=new an(0),this.transparent=!0,this.setValues(e)}function qo(e){Un.call(this,e),this.type="RawShaderMaterial"}function Yo(e){kn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new an(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new an(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kt,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Jo(e){Yo.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Qo(e){kn.call(this),this.type="MeshPhongMaterial",this.color=new an(16777215),this.specular=new an(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new an(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kt,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ee,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Zo(e){Qo.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Ko(e){kn.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kt,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function $o(e){kn.call(this),this.type="MeshLambertMaterial",this.color=new an(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new an(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ee,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ea(t){if(kn.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new an(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kt,this.normalScale=new zt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(t),null===this.matcap){var n=document.createElement("canvas");n.width=1,n.height=1;var r=n.getContext("2d");r.fillStyle="#fff",r.fillRect(0,0,1,1),this.matcap=new e.CanvasTexture(n)}}function ta(e){_i.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Xo.prototype=Object.create(kn.prototype),Xo.prototype.constructor=Xo,Xo.prototype.isShadowMaterial=!0,Xo.prototype.copy=function(e){return kn.prototype.copy.call(this,e),this.color.copy(e.color),this},qo.prototype=Object.create(Un.prototype),qo.prototype.constructor=qo,qo.prototype.isRawShaderMaterial=!0,Yo.prototype=Object.create(kn.prototype),Yo.prototype.constructor=Yo,Yo.prototype.isMeshStandardMaterial=!0,Yo.prototype.copy=function(e){return kn.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Jo.prototype=Object.create(Yo.prototype),Jo.prototype.constructor=Jo,Jo.prototype.isMeshPhysicalMaterial=!0,Jo.prototype.copy=function(e){return Yo.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Qo.prototype=Object.create(kn.prototype),Qo.prototype.constructor=Qo,Qo.prototype.isMeshPhongMaterial=!0,Qo.prototype.copy=function(e){return kn.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Zo.prototype=Object.create(Qo.prototype),Zo.prototype.constructor=Zo,Zo.prototype.isMeshToonMaterial=!0,Zo.prototype.copy=function(e){return Qo.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Ko.prototype=Object.create(kn.prototype),Ko.prototype.constructor=Ko,Ko.prototype.isMeshNormalMaterial=!0,Ko.prototype.copy=function(e){return kn.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},$o.prototype=Object.create(kn.prototype),$o.prototype.constructor=$o,$o.prototype.isMeshLambertMaterial=!0,$o.prototype.copy=function(e){return kn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ea.prototype=Object.create(kn.prototype),ea.prototype.constructor=ea,ea.prototype.isMeshMatcapMaterial=!0,ea.prototype.copy=function(e){return kn.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ta.prototype=Object.create(_i.prototype),ta.prototype.constructor=ta,ta.prototype.isLineDashedMaterial=!0,ta.prototype.copy=function(e){return _i.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var na=Object.freeze({ShadowMaterial:Xo,SpriteMaterial:vi,RawShaderMaterial:qo,ShaderMaterial:Un,PointsMaterial:Ai,MeshPhysicalMaterial:Jo,MeshStandardMaterial:Yo,MeshPhongMaterial:Qo,MeshToonMaterial:Zo,MeshNormalMaterial:Ko,MeshLambertMaterial:$o,MeshDepthMaterial:ei,MeshDistanceMaterial:ti,MeshBasicMaterial:jn,MeshMatcapMaterial:ea,LineDashedMaterial:ta,LineBasicMaterial:_i,Material:kn}),ra={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function ia(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var oa=new ia,aa={};function sa(e){this.manager=void 0!==e?e:oa}function ca(e){this.manager=void 0!==e?e:oa,this._parser=null}function ua(e){this.manager=void 0!==e?e:oa,this._parser=null}function la(e){this.manager=void 0!==e?e:oa}function ha(e){this.manager=void 0!==e?e:oa}function da(e){this.manager=void 0!==e?e:oa}function fa(){this.type="Curve",this.arcLengthDivisions=200}function pa(e,t,n,r,i,o,a,s){fa.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function ma(e,t,n,r,i,o){pa.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function va(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var c=(t-e)/o-(n-e)/(o+a)+(n-t)/a,u=(n-t)/a-(r-t)/(a+s)+(r-n)/s;i(t,n,c*=a,u*=a)},calc:function(i){var o=i*i;return e+t*i+n*o+r*(o*i)}}}Object.assign(sa.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=ra.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;if(void 0===aa[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],c=!!a[2],u=a[3];u=window.decodeURIComponent(u),c&&(u=window.atob(u));try{var l,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var d=new Uint8Array(u.length),f=0;f<u.length;f++)d[f]=u.charCodeAt(f);l="blob"===h?new Blob([d.buffer],{type:s}):d.buffer;break;case"document":var p=new DOMParser;l=p.parseFromString(u,s);break;case"json":l=JSON.parse(u);break;default:l=u}window.setTimeout(function(){t&&t(l),i.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)},0)}}else{aa[e]=[],aa[e].push({onLoad:t,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var v in m.open("GET",e,!0),m.addEventListener("load",function(t){var n=this.response;ra.add(e,n);var r=aa[e];if(delete aa[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=r.length;o<a;o++){(s=r[o]).onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(o=0,a=r.length;o<a;o++){var s;(s=r[o]).onError&&s.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)}},!1),m.addEventListener("progress",function(t){for(var n=aa[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}},!1),m.addEventListener("error",function(t){var n=aa[e];delete aa[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)},!1),m.addEventListener("abort",function(t){var n=aa[e];delete aa[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return i.manager.itemStart(e),m}aa[e].push({onLoad:t,onProgress:n,onError:r})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(ca.prototype,{load:function(e,t,n,r){var i=this,o=[],a=new Pi;a.image=o;var s=new sa(this.manager);function c(c){s.load(e[c],function(e){var n=i._parser(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(a.minFilter=_e),a.format=n.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,l=0,h=e.length;l<h;++l)c(l);else s.load(e,function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var c=0;c<n.mipmapCount;c++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+c]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=_e),a.format=n.format,a.needsUpdate=!0,t&&t(a)},n,r);return a},setPath:function(e){return this.path=e,this}}),Object.assign(ua.prototype,{load:function(e,t,n,r){var i=this,o=new Zt,a=new sa(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){var n=i._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:ge,o.wrapT=void 0!==n.wrapT?n.wrapT:ge,o.magFilter=void 0!==n.magFilter?n.magFilter:_e,o.minFilter=void 0!==n.minFilter?n.minFilter:Me,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=_e),o.needsUpdate=!0,t&&t(o,n))},n,r),o}}),Object.assign(la.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=ra.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),ra.add(e,this),t&&t(this),i.manager.itemEnd(e)}function c(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(ha.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new Wn,o=new la(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],function(e){i.images[n]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(var c=0;c<e.length;++c)s(c);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(da.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new qt,o=new la(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(n){i.image=n;var r=e.search(/\.jpe?g$/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?Ue:Be,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(fa.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,c=o-1;s<=c;)if((a=r[i=Math.floor(s+(c-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){c=i;break}c=i-1}if(r[i=c]===n)return i/(o-1);var u=r[i];return(i+(n-u)/(r[i+1]-u))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,o=new Gt,a=[],s=[],c=[],u=new Gt,l=new jt;for(n=0;n<=e;n++)r=n/e,a[n]=this.getTangentAt(r),a[n].normalize();s[0]=new Gt,c[0]=new Gt;var h=Number.MAX_VALUE,d=Math.abs(a[0].x),f=Math.abs(a[0].y),p=Math.abs(a[0].z);for(d<=h&&(h=d,o.set(1,0,0)),f<=h&&(h=f,o.set(0,1,0)),p<=h&&o.set(0,0,1),u.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],u),c[0].crossVectors(a[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),c[n]=c[n-1].clone(),u.crossVectors(a[n-1],a[n]),u.length()>Number.EPSILON&&(u.normalize(),i=Math.acos(Bt.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(l.makeRotationAxis(u,i))),c[n].crossVectors(a[n],s[n]);if(!0===t)for(i=Math.acos(Bt.clamp(s[0].dot(s[e]),-1,1)),i/=e,a[0].dot(u.crossVectors(s[0],s[e]))>0&&(i=-i),n=1;n<=e;n++)s[n].applyMatrix4(l.makeRotationAxis(a[n],i*n)),c[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),pa.prototype=Object.create(fa.prototype),pa.prototype.constructor=pa,pa.prototype.isEllipseCurve=!0,pa.prototype.getPoint=function(e,t){for(var n=t||new zt,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var u=Math.cos(this.aRotation),l=Math.sin(this.aRotation),h=s-this.aX,d=c-this.aY;s=h*u-d*l+this.aX,c=h*l+d*u+this.aY}return n.set(s,c)},pa.prototype.copy=function(e){return fa.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},pa.prototype.toJSON=function(){var e=fa.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},pa.prototype.fromJSON=function(e){return fa.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ma.prototype=Object.create(pa.prototype),ma.prototype.constructor=ma,ma.prototype.isArcCurve=!0;var ga=new Gt,ya=new va,ba=new va,xa=new va;function wa(e,t,n,r){fa.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function _a(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function Sa(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Ma(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}function Ta(e,t,n,r){fa.call(this),this.type="CubicBezierCurve",this.v0=e||new zt,this.v1=t||new zt,this.v2=n||new zt,this.v3=r||new zt}function Aa(e,t,n,r){fa.call(this),this.type="CubicBezierCurve3",this.v0=e||new Gt,this.v1=t||new Gt,this.v2=n||new Gt,this.v3=r||new Gt}function Ea(e,t){fa.call(this),this.type="LineCurve",this.v1=e||new zt,this.v2=t||new zt}function Ca(e,t){fa.call(this),this.type="LineCurve3",this.v1=e||new Gt,this.v2=t||new Gt}function Pa(e,t,n){fa.call(this),this.type="QuadraticBezierCurve",this.v0=e||new zt,this.v1=t||new zt,this.v2=n||new zt}function La(e,t,n){fa.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Gt,this.v1=t||new Gt,this.v2=n||new Gt}function Oa(e){fa.call(this),this.type="SplineCurve",this.points=e||[]}wa.prototype=Object.create(fa.prototype),wa.prototype.constructor=wa,wa.prototype.isCatmullRomCurve3=!0,wa.prototype.getPoint=function(e,t){var n,r,i,o,a=t||new Gt,s=this.points,c=s.length,u=(c-(this.closed?0:1))*e,l=Math.floor(u),h=u-l;if(this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/c)+1)*c:0===h&&l===c-1&&(l=c-2,h=1),this.closed||l>0?n=s[(l-1)%c]:(ga.subVectors(s[0],s[1]).add(s[0]),n=ga),r=s[l%c],i=s[(l+1)%c],this.closed||l+2<c?o=s[(l+2)%c]:(ga.subVectors(s[c-1],s[c-2]).add(s[c-1]),o=ga),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,f=Math.pow(n.distanceToSquared(r),d),p=Math.pow(r.distanceToSquared(i),d),m=Math.pow(i.distanceToSquared(o),d);p<1e-4&&(p=1),f<1e-4&&(f=p),m<1e-4&&(m=p),ya.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,f,p,m),ba.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,f,p,m),xa.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,f,p,m)}else"catmullrom"===this.curveType&&(ya.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),ba.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),xa.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(ya.calc(h),ba.calc(h),xa.calc(h)),a},wa.prototype.copy=function(e){fa.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},wa.prototype.toJSON=function(){var e=fa.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},wa.prototype.fromJSON=function(e){fa.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Gt).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Ta.prototype=Object.create(fa.prototype),Ta.prototype.constructor=Ta,Ta.prototype.isCubicBezierCurve=!0,Ta.prototype.getPoint=function(e,t){var n=t||new zt,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Ma(e,r.x,i.x,o.x,a.x),Ma(e,r.y,i.y,o.y,a.y)),n},Ta.prototype.copy=function(e){return fa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Ta.prototype.toJSON=function(){var e=fa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Ta.prototype.fromJSON=function(e){return fa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Aa.prototype=Object.create(fa.prototype),Aa.prototype.constructor=Aa,Aa.prototype.isCubicBezierCurve3=!0,Aa.prototype.getPoint=function(e,t){var n=t||new Gt,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Ma(e,r.x,i.x,o.x,a.x),Ma(e,r.y,i.y,o.y,a.y),Ma(e,r.z,i.z,o.z,a.z)),n},Aa.prototype.copy=function(e){return fa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Aa.prototype.toJSON=function(){var e=fa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Aa.prototype.fromJSON=function(e){return fa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Ea.prototype=Object.create(fa.prototype),Ea.prototype.constructor=Ea,Ea.prototype.isLineCurve=!0,Ea.prototype.getPoint=function(e,t){var n=t||new zt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Ea.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Ea.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Ea.prototype.copy=function(e){return fa.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ea.prototype.toJSON=function(){var e=fa.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ea.prototype.fromJSON=function(e){return fa.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ca.prototype=Object.create(fa.prototype),Ca.prototype.constructor=Ca,Ca.prototype.isLineCurve3=!0,Ca.prototype.getPoint=function(e,t){var n=t||new Gt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Ca.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Ca.prototype.copy=function(e){return fa.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ca.prototype.toJSON=function(){var e=fa.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ca.prototype.fromJSON=function(e){return fa.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Pa.prototype=Object.create(fa.prototype),Pa.prototype.constructor=Pa,Pa.prototype.isQuadraticBezierCurve=!0,Pa.prototype.getPoint=function(e,t){var n=t||new zt,r=this.v0,i=this.v1,o=this.v2;return n.set(Sa(e,r.x,i.x,o.x),Sa(e,r.y,i.y,o.y)),n},Pa.prototype.copy=function(e){return fa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Pa.prototype.toJSON=function(){var e=fa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Pa.prototype.fromJSON=function(e){return fa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},La.prototype=Object.create(fa.prototype),La.prototype.constructor=La,La.prototype.isQuadraticBezierCurve3=!0,La.prototype.getPoint=function(e,t){var n=t||new Gt,r=this.v0,i=this.v1,o=this.v2;return n.set(Sa(e,r.x,i.x,o.x),Sa(e,r.y,i.y,o.y),Sa(e,r.z,i.z,o.z)),n},La.prototype.copy=function(e){return fa.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},La.prototype.toJSON=function(){var e=fa.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},La.prototype.fromJSON=function(e){return fa.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Oa.prototype=Object.create(fa.prototype),Oa.prototype.constructor=Oa,Oa.prototype.isSplineCurve=!0,Oa.prototype.getPoint=function(e,t){var n=t||new zt,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],l=r[o>r.length-3?r.length-1:o+2];return n.set(_a(a,s.x,c.x,u.x,l.x),_a(a,s.y,c.y,u.y,l.y)),n},Oa.prototype.copy=function(e){fa.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},Oa.prototype.toJSON=function(){var e=fa.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},Oa.prototype.fromJSON=function(e){fa.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new zt).fromArray(r))}return this};var Na=Object.freeze({ArcCurve:ma,CatmullRomCurve3:wa,CubicBezierCurve:Ta,CubicBezierCurve3:Aa,EllipseCurve:pa,LineCurve:Ea,LineCurve3:Ca,QuadraticBezierCurve:Pa,QuadraticBezierCurve3:La,SplineCurve:Oa});function Ra(){fa.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Ia(e){Ra.call(this),this.type="Path",this.currentPoint=new zt,e&&this.setFromPoints(e)}function Da(e){Ia.call(this,e),this.uuid=Bt.generateUUID(),this.type="Shape",this.holes=[]}function Fa(e,t){mn.call(this),this.type="Light",this.color=new an(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function ka(e,t,n){Fa.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(mn.DefaultUp),this.updateMatrix(),this.groundColor=new an(t)}function Ua(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new zt(512,512),this.map=null,this.matrix=new jt}function Ba(){Ua.call(this,new si(50,1,.5,500))}function za(e,t,n,r,i,o){Fa.call(this,e,t),this.type="SpotLight",this.position.copy(mn.DefaultUp),this.updateMatrix(),this.target=new mn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Ba}function ja(e,t,n,r){Fa.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Ua(new si(90,1,.5,500))}function Va(e,t,n,r,i,o){ai.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Ga(){Ua.call(this,new Va(-5,5,5,-5,.5,500))}function Wa(e,t){Fa.call(this,e,t),this.type="DirectionalLight",this.position.copy(mn.DefaultUp),this.updateMatrix(),this.target=new mn,this.shadow=new Ga}function Ha(e,t){Fa.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Xa(e,t,n,r){Fa.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}Ra.prototype=Object.assign(Object.create(fa.prototype),{constructor:Ra,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ea(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),c=0;c<s.length;c++){var u=s[c];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){fa.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=fa.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){fa.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new Na[r.type]).fromJSON(r))}return this}}),Ia.prototype=Object.assign(Object.create(Ra.prototype),{constructor:Ia,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new Ea(this.currentPoint.clone(),new zt(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new Pa(this.currentPoint.clone(),new zt(e,t),new zt(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,o){var a=new Ta(this.currentPoint.clone(),new zt(e,t),new zt(n,r),new zt(i,o));this.curves.push(a),this.currentPoint.set(i,o)},splineThru:function(e){var t=new Oa([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){var c=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+c,t+u,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,o,a,s){var c=new pa(e,t,n,r,i,o,a,s);if(this.curves.length>0){var u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);var l=c.getPoint(1);this.currentPoint.copy(l)},copy:function(e){return Ra.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Ra.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Ra.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Da.prototype=Object.assign(Object.create(Ia.prototype),{constructor:Da,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Ia.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=Ia.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){Ia.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new Ia).fromJSON(r))}return this}}),Fa.prototype=Object.assign(Object.create(mn.prototype),{constructor:Fa,isLight:!0,copy:function(e){return mn.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=mn.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),ka.prototype=Object.assign(Object.create(Fa.prototype),{constructor:ka,isHemisphereLight:!0,copy:function(e){return Fa.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Ua.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Ba.prototype=Object.assign(Object.create(Ua.prototype),{constructor:Ba,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*Bt.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix())}}),za.prototype=Object.assign(Object.create(Fa.prototype),{constructor:za,isSpotLight:!0,copy:function(e){return Fa.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),ja.prototype=Object.assign(Object.create(Fa.prototype),{constructor:ja,isPointLight:!0,copy:function(e){return Fa.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Va.prototype=Object.assign(Object.create(ai.prototype),{constructor:Va,isOrthographicCamera:!0,copy:function(e,t){return ai.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var c=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;o=(i+=l*(this.view.offsetX/c))+l*(this.view.width/c),s=(a-=h*(this.view.offsetY/u))-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=mn.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Ga.prototype=Object.assign(Object.create(Ua.prototype),{constructor:Ga}),Wa.prototype=Object.assign(Object.create(Fa.prototype),{constructor:Wa,isDirectionalLight:!0,copy:function(e){return Fa.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Ha.prototype=Object.assign(Object.create(Fa.prototype),{constructor:Ha,isAmbientLight:!0}),Xa.prototype=Object.assign(Object.create(Fa.prototype),{constructor:Xa,isRectAreaLight:!0,copy:function(e){return Fa.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Fa.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});var qa={arraySlice:function(e,t,n){return qa.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,c=0;c!==t;++c)i[a++]=e[s+c];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}}};function Ya(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Ja(e,t,n,r){Ya.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Qa(e,t,n,r){Ya.call(this,e,t,n,r)}function Za(e,t,n,r){Ya.call(this,e,t,n,r)}function Ka(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=qa.convertArray(t,this.TimeBufferType),this.values=qa.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function $a(e,t,n){Ka.call(this,e,t,n)}function es(e,t,n,r){Ka.call(this,e,t,n,r)}function ts(e,t,n,r){Ka.call(this,e,t,n,r)}function ns(e,t,n,r){Ya.call(this,e,t,n,r)}function rs(e,t,n,r){Ka.call(this,e,t,n,r)}function is(e,t,n,r){Ka.call(this,e,t,n,r)}function os(e,t,n,r){Ka.call(this,e,t,n,r)}function as(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Bt.generateUUID(),this.duration<0&&this.resetDuration()}function ss(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ts;case"vector":case"vector2":case"vector3":case"vector4":return os;case"color":return es;case"quaternion":return rs;case"bool":case"boolean":return $a;case"string":return is}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];qa.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}function cs(e){this.manager=void 0!==e?e:oa,this.textures={}}function us(e){this.manager=void 0!==e?e:oa}Object.assign(Ya.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,e<(r=t[++n]))break t}o=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,e>=(i=t[--n-1]))break t}o=n,n=0}for(;n<o;){var c=n+o>>>1;e<t[c]?o=c:n=c+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Ya.prototype,{beforeStart_:Ya.prototype.copySampleValue_,afterEnd_:Ya.prototype.copySampleValue_}),Ja.prototype=Object.assign(Object.create(Ya.prototype),{constructor:Ja,DefaultSettings_:{endingStart:wt,endingEnd:wt},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case _t:i=e,a=2*t-n;break;case St:a=t+r[i=r.length-2]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case _t:o=e,s=2*n-t;break;case St:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var c=.5*(n-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(s-n),this._offsetPrev=i*u,this._offsetNext=o*u},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,u=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,v=-h*m+2*h*p-h*f,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,b=d*m-d*p,x=0;x!==a;++x)i[x]=v*o[u+x]+g*o[c+x]+y*o[s+x]+b*o[l+x];return i}}),Qa.prototype=Object.assign(Object.create(Ya.prototype),{constructor:Qa,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,u=(n-t)/(r-t),l=1-u,h=0;h!==a;++h)i[h]=o[c+h]*l+o[s+h]*u;return i}}),Za.prototype=Object.assign(Object.create(Ya.prototype),{constructor:Za,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(Ka,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:qa.convertArray(e.times,Array),values:qa.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}),Object.assign(Ka.prototype,{constructor:Ka,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:bt,InterpolantFactoryMethodDiscrete:function(e){return new Za(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Qa(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Ja(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case yt:t=this.InterpolantFactoryMethodDiscrete;break;case bt:t=this.InterpolantFactoryMethodLinear;break;case xt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return yt;case this.InterpolantFactoryMethodLinear:return bt;case this.InterpolantFactoryMethodSmooth:return xt}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=qa.arraySlice(n,i,o),this.values=qa.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&qa.isTypedArray(r)){a=0;for(var c=r.length;a!==c;++a){var u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===xt,i=1,o=e.length-1,a=1;a<o;++a){var s=!1,c=e[a];if(c!==e[a+1]&&(1!==a||c!==c[0]))if(r)s=!0;else for(var u=a*n,l=u-n,h=u+n,d=0;d!==n;++d){var f=t[u+d];if(f!==t[l+d]||f!==t[h+d]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var p=a*n,m=i*n;for(d=0;d!==n;++d)t[m+d]=t[p+d]}++i}}if(o>0){e[i]=e[o];for(p=o*n,m=i*n,d=0;d!==n;++d)t[m+d]=t[p+d];++i}return i!==e.length&&(this.times=qa.arraySlice(e,0,i),this.values=qa.arraySlice(t,0,i*n)),this}}),$a.prototype=Object.assign(Object.create(Ka.prototype),{constructor:$a,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:yt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),es.prototype=Object.assign(Object.create(Ka.prototype),{constructor:es,ValueTypeName:"color"}),ts.prototype=Object.assign(Object.create(Ka.prototype),{constructor:ts,ValueTypeName:"number"}),ns.prototype=Object.assign(Object.create(Ya.prototype),{constructor:ns,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=(n-t)/(r-t),u=s+a;s!==u;s+=4)Vt.slerpFlat(i,0,o,s-a,o,s,c);return i}}),rs.prototype=Object.assign(Object.create(Ka.prototype),{constructor:rs,ValueTypeName:"quaternion",DefaultInterpolation:bt,InterpolantFactoryMethodLinear:function(e){return new ns(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),is.prototype=Object.assign(Object.create(Ka.prototype),{constructor:is,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:yt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),os.prototype=Object.assign(Object.create(Ka.prototype),{constructor:os,ValueTypeName:"vector"}),Object.assign(as,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(ss(n[i]).scale(r));return new as(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,o=n.length;i!==o;++i)t.push(Ka.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],c=[];s.push((a+i-1)%i,a,(a+1)%i),c.push(0,1,0);var u=qa.getKeyframeOrder(s);s=qa.sortedArray(s,1,u),c=qa.sortedArray(c,1,u),r||0!==s[0]||(s.push(i),c.push(c[0])),o.push(new ts(".morphTargetInfluences["+t[a].name+"]",s,c).scale(1/n))}return new as(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],c=s.name.match(i);if(c&&c.length>1){var u=r[h=c[1]];u||(r[h]=u=[]),u.push(s)}}var l=[];for(var h in r)l.push(as.CreateFromMorphTargetSequence(h,r[h],t,n));return l},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];qa.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],c=0;c<s.length;c++){var u=s[c].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var l={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var d=0;d<u[h].morphTargets.length;d++)l[u[h].morphTargets[d]]=-1;for(var f in l){var p=[],m=[];for(d=0;d!==u[h].morphTargets.length;++d){var v=u[h];p.push(v.time),m.push(v.morphTarget===f?1:0)}r.push(new ts(".morphTargetInfluence["+f+"]",p,m))}o=l.length*(a||1)}else{var g=".bones["+t[c].name+"]";n(os,g+".position",u,"pos",r),n(rs,g+".quaternion",u,"rot",r),n(os,g+".scale",u,"scl",r)}}return 0===r.length?null:new as(i,o,r)}}),Object.assign(as.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(cs.prototype,{load:function(e,t,n,r){var i=this;new sa(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new na[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.uniforms)for(var i in e.uniforms){var o=e.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=(new an).setHex(o.value);break;case"v2":r.uniforms[i].value=(new zt).fromArray(o.value);break;case"v3":r.uniforms[i].value=(new Gt).fromArray(o.value);break;case"v4":r.uniforms[i].value=(new Yt).fromArray(o.value);break;case"m4":r.uniforms[i].value=(new jt).fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var a=e.normalScale;!1===Array.isArray(a)&&(a=[a,a]),r.normalScale=(new zt).fromArray(a)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),r}}),Object.assign(us.prototype,{load:function(e,t,n,r){var i=this;new sa(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new On,n=e.data.index;if(void 0!==n){var r=new ls[n.type](n.array);t.setIndex(new yn(r,1))}var i=e.data.attributes;for(var o in i){var a=i[o];r=new ls[a.type](a.array);t.addAttribute(o,new yn(r,a.itemSize,a.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var c=0,u=s.length;c!==u;++c){var l=s[c];t.addGroup(l.start,l.count,l.materialIndex)}var h=e.data.boundingSphere;if(void 0!==h){var d=new Gt;void 0!==h.center&&d.fromArray(h.center),t.boundingSphere=new $t(d,h.radius)}return t}});var ls={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function hs(){}hs.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],o=t[n+1];if(i.test(e))return o}return null}},Object.assign(hs.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:function(){var e={NoBlending:M,NormalBlending:T,AdditiveBlending:A,SubtractiveBlending:E,MultiplyBlending:C,CustomBlending:P},t=new an,n=new da,r=new cs;return function(i,o,a){var s={};function c(e,t,r,i,c){var u,l=o+e,h=hs.Handlers.get(l);null!==h?u=h.load(l):(n.setCrossOrigin(a),u=n.load(l)),void 0!==t&&(u.repeat.fromArray(t),1!==t[0]&&(u.wrapS=ve),1!==t[1]&&(u.wrapT=ve)),void 0!==r&&u.offset.fromArray(r),void 0!==i&&("repeat"===i[0]&&(u.wrapS=ve),"mirror"===i[0]&&(u.wrapS=ye),"repeat"===i[1]&&(u.wrapT=ve),"mirror"===i[1]&&(u.wrapT=ye)),void 0!==c&&(u.anisotropy=c);var d=Bt.generateUUID();return s[d]=u,d}var u={uuid:Bt.generateUUID(),type:"MeshLambertMaterial"};for(var l in i){var h=i[l];switch(l){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":u.name=h;break;case"blending":u.blending=e[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case"colorDiffuse":u.color=t.fromArray(h).getHex();break;case"colorSpecular":u.specular=t.fromArray(h).getHex();break;case"colorEmissive":u.emissive=t.fromArray(h).getHex();break;case"specularCoef":u.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(u.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(u.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(u.type="MeshStandardMaterial");break;case"mapDiffuse":u.map=c(h,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":u.emissiveMap=c(h,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":u.lightMap=c(h,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":u.aoMap=c(h,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":u.bumpMap=c(h,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":u.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":u.normalMap=c(h,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":u.normalScale=h;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":u.specularMap=c(h,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":u.metalnessMap=c(h,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":u.roughnessMap=c(h,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":u.alphaMap=c(h,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":u.side=g;break;case"doubleSided":u.side=y;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),u.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":u[l]=h;break;case"vertexColors":!0===h&&(u.vertexColors=S),"face"===h&&(u.vertexColors=_);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,h)}}return"MeshBasicMaterial"===u.type&&delete u.emissive,"MeshPhongMaterial"!==u.type&&delete u.specular,u.opacity<1&&(u.transparent=!0),r.setTextures(s),r.parse(u)}}()});var ds={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function fs(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:oa,this.withCredentials=!1}function ps(e){this.manager=void 0!==e?e:oa,this.texturePath=""}Object.assign(fs.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=void 0===this.path?ds.extractUrlBase(e):this.path,a=new sa(this.manager);a.setPath(this.path),a.setWithCredentials(this.withCredentials),a.load(e,function(n){var r=JSON.parse(n),a=r.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var c=i.parse(r,o);t(c.geometry,c.materials)},n,r)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(){return function(e,t){void 0!==e.data&&(e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var n=new gn;return function(e,t){function n(e,t){return e&1<<t}var r,i,o,a,s,c,u,l,h,d,f,p,m,v,g,y,b,x,w,_,S,M,T,A,E,C=e.faces,P=e.vertices,L=e.normals,O=e.colors,N=e.scale,R=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&R++;for(r=0;r<R;r++)t.faceVertexUvs[r]=[]}for(a=0,s=P.length;a<s;)(x=new Gt).x=P[a++]*N,x.y=P[a++]*N,x.z=P[a++]*N,t.vertices.push(x);for(a=0,s=C.length;a<s;)if(f=n(d=C[a++],0),p=n(d,1),m=n(d,3),v=n(d,4),g=n(d,5),y=n(d,6),b=n(d,7),f){if((_=new hn).a=C[a],_.b=C[a+1],_.c=C[a+3],(S=new hn).a=C[a+1],S.b=C[a+2],S.c=C[a+3],a+=4,p&&(h=C[a++],_.materialIndex=h,S.materialIndex=h),o=t.faces.length,m)for(r=0;r<R;r++)for(A=e.uvs[r],t.faceVertexUvs[r][o]=[],t.faceVertexUvs[r][o+1]=[],i=0;i<4;i++)E=new zt(A[2*(l=C[a++])],A[2*l+1]),2!==i&&t.faceVertexUvs[r][o].push(E),0!==i&&t.faceVertexUvs[r][o+1].push(E);if(v&&(u=3*C[a++],_.normal.set(L[u++],L[u++],L[u]),S.normal.copy(_.normal)),g)for(r=0;r<4;r++)u=3*C[a++],T=new Gt(L[u++],L[u++],L[u]),2!==r&&_.vertexNormals.push(T),0!==r&&S.vertexNormals.push(T);if(y&&(M=O[c=C[a++]],_.color.setHex(M),S.color.setHex(M)),b)for(r=0;r<4;r++)M=O[c=C[a++]],2!==r&&_.vertexColors.push(new an(M)),0!==r&&S.vertexColors.push(new an(M));t.faces.push(_),t.faces.push(S)}else{if((w=new hn).a=C[a++],w.b=C[a++],w.c=C[a++],p&&(h=C[a++],w.materialIndex=h),o=t.faces.length,m)for(r=0;r<R;r++)for(A=e.uvs[r],t.faceVertexUvs[r][o]=[],i=0;i<3;i++)E=new zt(A[2*(l=C[a++])],A[2*l+1]),t.faceVertexUvs[r][o].push(E);if(v&&(u=3*C[a++],w.normal.set(L[u++],L[u++],L[u])),g)for(r=0;r<3;r++)u=3*C[a++],T=new Gt(L[u++],L[u++],L[u]),w.vertexNormals.push(T);if(y&&(c=C[a++],w.color.setHex(O[c])),b)for(r=0;r<3;r++)c=C[a++],w.vertexColors.push(new an(O[c]));t.faces.push(w)}}(e,n),function(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;r<i;r+=n){var o=e.skinWeights[r],a=n>1?e.skinWeights[r+1]:0,s=n>2?e.skinWeights[r+2]:0,c=n>3?e.skinWeights[r+3]:0;t.skinWeights.push(new Yt(o,a,s,c))}if(e.skinIndices)for(r=0,i=e.skinIndices.length;r<i;r+=n){var u=e.skinIndices[r],l=n>1?e.skinIndices[r+1]:0,h=n>2?e.skinIndices[r+2]:0,d=n>3?e.skinIndices[r+3]:0;t.skinIndices.push(new Yt(u,l,h,d))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,n),function(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var r=0,i=e.morphTargets.length;r<i;r++){t.morphTargets[r]={},t.morphTargets[r].name=e.morphTargets[r].name,t.morphTargets[r].vertices=[];for(var o=t.morphTargets[r].vertices,a=e.morphTargets[r].vertices,s=0,c=a.length;s<c;s+=3){var u=new Gt;u.x=a[s]*n,u.y=a[s+1]*n,u.z=a[s+2]*n,o.push(u)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var l=t.faces,h=e.morphColors[0].colors;for(r=0,i=l.length;r<i;r++)l[r].color.fromArray(h,3*r)}}(e,n),function(e,t){var n=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var i=0;i<r.length;i++){var o=as.parseAnimation(r[i],t.bones);o&&n.push(o)}if(t.morphTargets){var a=as.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(a)}n.length>0&&(t.animations=n)}(e,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:{geometry:n,materials:hs.prototype.initMaterials(e.materials,this.resourcePath||t,this.crossOrigin)}}}()}),Object.assign(ps.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this;new sa(i.manager).load(e,function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")},n,r)},setTexturePath:function(e){return this.texturePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,function(){void 0!==t&&t(s)}),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new Da).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new fs,i=new us,o=0,a=e.length;o<a;o++){var s,c=e[o];switch(c.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Ho[c.type](c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Ho[c.type](c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Ho[c.type](c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Ho[c.type](c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Ho[c.type](c.radius,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Ho[c.type](c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Ho[c.type](c.radius,c.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Ho[c.type](c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Ho[c.type](c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Ho[c.type](c.radius,c.tube,c.tubularSegments,c.radialSegments,c.p,c.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Ho[c.type](c.points,c.segments,c.phiStart,c.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Ho[c.type](c.vertices,c.indices,c.radius,c.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var u=[],l=0,h=c.shapes.length;l<h;l++){var d=t[c.shapes[l]];u.push(d)}s=new Ho[c.type](u,c.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(u=[],l=0,h=c.shapes.length;l<h;l++){d=t[c.shapes[l]];u.push(d)}var f=c.options.extrudePath;void 0!==f&&(c.options.extrudePath=(new Na[f.type]).fromJSON(f)),s=new Ho[c.type](u,c.options);break;case"BufferGeometry":s=i.parse(c);break;case"Geometry":s=r.parse(c,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+c.type+'"');continue}s.uuid=c.uuid,void 0!==c.name&&(s.name=c.name),!0===s.isBufferGeometry&&void 0!==c.userData&&(s.userData=c.userData),n[c.uuid]=s}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var r=new cs;r.setTextures(t);for(var i=0,o=e.length;i<o;i++){var a=e[i];if("MultiMaterial"===a.type){for(var s=[],c=0;c<a.materials.length;c++)s.push(r.parse(a.materials[c]));n[a.uuid]=s}else n[a.uuid]=r.parse(a)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=as.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemEnd(e),n.manager.itemError(e)})}if(void 0!==e&&e.length>0){var o=new la(new ia(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var c=e[a],u=c.url;if(Array.isArray(u)){r[c.uuid]=[];for(var l=0,h=u.length;l<h;l++){var d=u[l],f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.texturePath+d;r[c.uuid].push(i(f))}}else{f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.texturePath+c.url;r[c.uuid]=i(f)}}}return r},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a,s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new Wn(t[s.image]):new qt(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,vs)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],gs),a.wrapT=n(s.wrap[1],gs)),void 0!==s.format&&(a.format=s.format),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,ys)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,ys)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),r[s.uuid]=a}return r},parseObject:function(e,t,n){var r;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new fi,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new an(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new di(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new hi(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new si(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new Va(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new Ha(e.color,e.intensity);break;case"DirectionalLight":r=new Wa(e.color,e.intensity);break;case"PointLight":r=new ja(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new Xa(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new za(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new ka(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(e.geometry),s=o(e.material);r=a.bones&&a.bones.length>0?new wi(a,s):new Vn(a,s);break;case"LOD":r=new yi;break;case"Line":r=new Si(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":r=new Ti(i(e.geometry),o(e.material));break;case"LineSegments":r=new Mi(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":r=new Ei(i(e.geometry),o(e.material));break;case"Sprite":r=new gi(o(e.material));break;case"Group":r=new oi;break;default:r=new mn}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children)for(var c=e.children,u=0;u<c.length;u++)r.add(this.parseObject(c[u],t,n));if("LOD"===e.type)for(var l=e.levels,h=0;h<l.length;h++){var d=l[h],f=r.getObjectByProperty("uuid",d.object);void 0!==f&&r.addLevel(f,d.distance)}return r}});var ms,vs={UVMapping:ce,CubeReflectionMapping:ue,CubeRefractionMapping:le,EquirectangularReflectionMapping:he,EquirectangularRefractionMapping:de,SphericalReflectionMapping:fe,CubeUVReflectionMapping:pe,CubeUVRefractionMapping:me},gs={RepeatWrapping:ve,ClampToEdgeWrapping:ge,MirroredRepeatWrapping:ye},ys={NearestFilter:be,NearestMipMapNearestFilter:xe,NearestMipMapLinearFilter:we,LinearFilter:_e,LinearMipMapNearestFilter:Se,LinearMipMapLinearFilter:Me};function bs(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),void 0===r&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:oa,this.options=void 0}function xs(){this.type="ShapePath",this.color=new an,this.subPaths=[],this.currentPath=null}function ws(e){this.type="Font",this.data=e}function _s(e,t,n,r,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,c,u,l,h,d,f,p=new xs;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;){switch(m[v++]){case"m":a=m[v++]*t+n,s=m[v++]*t+r,p.moveTo(a,s);break;case"l":a=m[v++]*t+n,s=m[v++]*t+r,p.lineTo(a,s);break;case"q":c=m[v++]*t+n,u=m[v++]*t+r,l=m[v++]*t+n,h=m[v++]*t+r,p.quadraticCurveTo(l,h,c,u);break;case"b":c=m[v++]*t+n,u=m[v++]*t+r,l=m[v++]*t+n,h=m[v++]*t+r,d=m[v++]*t+n,f=m[v++]*t+r,p.bezierCurveTo(l,h,d,f,c,u)}}return{offsetX:o.ha*t,path:p}}}function Ss(e){this.manager=void 0!==e?e:oa}bs.prototype={constructor:bs,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var o=this,a=ra.get(e);if(void 0!==a)return o.manager.itemStart(e),setTimeout(function(){t&&t(a),o.manager.itemEnd(e)},0),a;r(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,o.options)}).then(function(n){ra.add(e,n),t&&t(n),o.manager.itemEnd(e)}).catch(function(t){i&&i(t),o.manager.itemEnd(e),o.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(xs.prototype,{moveTo:function(e,t){this.currentPath=new Ia,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new Da;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],c=s.x-a.x,u=s.y-a.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(a=t[o],c=-c,s=t[i],u=-u),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var l=u*(e.x-a.x)-c*(e.y-a.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=xo.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,c,u=[];if(1===o.length)return s=o[0],(c=new Da).curves=s.curves,u.push(c),u;var l=!i(o[0].getPoints());l=e?!l:l;var h,d,f=[],p=[],m=[],v=0;p[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=i(h=(s=o[g]).getPoints()),(a=e?!a:a)?(!l&&p[v]&&v++,p[v]={s:new Da,p:h},p[v].s.curves=s.curves,l&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!p[0])return n(o);if(p.length>1){for(var b=!1,x=[],w=0,_=p.length;w<_;w++)f[w]=[];for(w=0,_=p.length;w<_;w++)for(var S=m[w],M=0;M<S.length;M++){for(var T=S[M],A=!0,E=0;E<p.length;E++)r(T.p,p[E].p)&&(w!==E&&x.push({froms:w,tos:E,hole:M}),A?(A=!1,f[E].push(T)):b=!0);A&&f[w].push(T)}x.length>0&&(b||(m=f))}g=0;for(var C=p.length;g<C;g++){c=p[g].s,u.push(c);for(var P=0,L=(d=m[g]).length;P<L;P++)c.holes.push(d[P].h)}return u}}),Object.assign(ws.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],r=function(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,c=0,u=0;u<r.length;u++){var l=r[u];if("\n"===l)s=0,c-=o;else{var h=_s(l,i,s,c,n);s+=h.offsetX,a.push(h.path)}}return a}(e,t,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Object.assign(Ss.prototype,{load:function(e,t,n,r){var i=this,o=new sa(this.manager);o.setPath(this.path),o.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)},n,r)},parse:function(e){return new ws(e)},setPath:function(e){return this.path=e,this}});var Ms={getContext:function(){return void 0===ms&&(ms=new(window.AudioContext||window.webkitAudioContext)),ms},setContext:function(e){ms=e}};function Ts(e){this.manager=void 0!==e?e:oa}function As(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new si,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new si,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Es(e,t,n){mn.call(this),this.type="CubeCamera";var r=new si(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new Gt(1,0,0)),this.add(r);var i=new si(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new Gt(-1,0,0)),this.add(i);var o=new si(90,1,e,t);o.up.set(0,0,1),o.lookAt(new Gt(0,1,0)),this.add(o);var a=new si(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new Gt(0,-1,0)),this.add(a);var s=new si(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new Gt(0,0,1)),this.add(s);var c=new si(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new Gt(0,0,-1)),this.add(c);var u={format:Ue,magFilter:_e,minFilter:_e};this.renderTarget=new Qt(n,n,u),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,u=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,a,n),n.activeCubeFace=4,e.render(t,s,n),n.texture.generateMipmaps=u,n.activeCubeFace=5,e.render(t,c,n),e.setRenderTarget(null)},this.clear=function(e,t,n,r){for(var i=this.renderTarget,o=0;o<6;o++)i.activeCubeFace=o,e.setRenderTarget(i),e.clear(t,n,r);e.setRenderTarget(null)}}function Cs(){mn.call(this),this.type="AudioListener",this.context=Ms.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Ps(e){mn.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Ls(e){Ps.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Os(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Ns(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(Ts.prototype,{load:function(e,t,n,r){var i=new sa(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(e){var n=e.slice(0);Ms.getContext().decodeAudioData(n,function(e){t(e)})},n,r)}}),Object.assign(As.prototype,{update:function(){var e,t,n,r,i,o,a,s,c=new jt,u=new jt;return function(l){if(e!==this||t!==l.focus||n!==l.fov||r!==l.aspect*this.aspect||i!==l.near||o!==l.far||a!==l.zoom||s!==this.eyeSep){e=this,t=l.focus,n=l.fov,r=l.aspect*this.aspect,i=l.near,o=l.far,a=l.zoom;var h,d,f=l.projectionMatrix.clone(),p=(s=this.eyeSep/2)*i/t,m=i*Math.tan(Bt.DEG2RAD*n*.5)/a;u.elements[12]=-s,c.elements[12]=s,h=-m*r+p,d=m*r+p,f.elements[0]=2*i/(d-h),f.elements[8]=(d+h)/(d-h),this.cameraL.projectionMatrix.copy(f),h=-m*r-p,d=m*r-p,f.elements[0]=2*i/(d-h),f.elements[8]=(d+h)/(d-h),this.cameraR.projectionMatrix.copy(f)}this.cameraL.matrixWorld.copy(l.matrixWorld).multiply(u),this.cameraR.matrixWorld.copy(l.matrixWorld).multiply(c)}}()}),Es.prototype=Object.create(mn.prototype),Es.prototype.constructor=Es,Cs.prototype=Object.assign(Object.create(mn.prototype),{constructor:Cs,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new Gt,t=new Vt,n=new Gt,r=new Gt;return function(i){mn.prototype.updateMatrixWorld.call(this,i);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(r.x,this.context.currentTime),o.forwardY.setValueAtTime(r.y,this.context.currentTime),o.forwardZ.setValueAtTime(r.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,a.x,a.y,a.z))}}()}),Ps.prototype=Object.assign(Object.create(mn.prototype),{constructor:Ps,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),Ls.prototype=Object.assign(Object.create(Ps.prototype),{constructor:Ls,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var e=new Gt,t=new Vt,n=new Gt,r=new Gt;return function(i){mn.prototype.updateMatrixWorld.call(this,i);var o=this.panner;this.matrixWorld.decompose(e,t,n),r.set(0,0,1).applyQuaternion(t),o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z)}}()}),Object.assign(Os.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(Ns.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(n,r,a,1-i,t)}for(var s=t,c=t+t;s!==c;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){Vt.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}});var Rs,Is;function Ds(e,t,n){var r=n||Fs.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function Fs(e,t,n){this.path=t,this.parsedPath=n||Fs.parseTrackName(t),this.node=Fs.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function ks(){this.uuid=Bt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function Us(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:wt,endingEnd:wt},s=0;s!==i;++s){var c=r[s].createInterpolant(null);o[s]=c,c.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=vt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Bs(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function zs(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function js(){On.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Vs(e,t,n){pi.call(this,e,t),this.meshPerAttribute=n||1}function Gs(e,t,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),yn.call(this,e,t,n),this.meshPerAttribute=r||1}function Ws(e,t,n,r){this.ray=new Bn(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Hs(e,t){return e.distance-t.distance}function Xs(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)Xs(i[o],t,n,!0)}function qs(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Ys(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function Js(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function Qs(e,t){this.min=void 0!==e?e:new zt(1/0,1/0),this.max=void 0!==t?t:new zt(-1/0,-1/0)}function Zs(e,t){this.start=void 0!==e?e:new Gt,this.end=void 0!==t?t:new Gt}function Ks(e){mn.call(this),this.material=e,this.render=function(){}}function $s(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var c=new On,u=new An(2*a*3,3);c.addAttribute("position",u),Mi.call(this,c,new _i({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function ec(e,t){mn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new On,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new An(r,3));var c=new _i({fog:!1});this.cone=new Mi(n,c),this.add(this.cone),this.update()}function tc(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),n=new On,r=[],i=[],o=new an(0,0,1),a=new an(0,1,0),s=0;s<t.length;s++){var c=t[s];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new An(r,3)),n.addAttribute("color",new An(i,3));var u=new _i({vertexColors:S,depthTest:!1,depthWrite:!1,transparent:!0});Mi.call(this,n,u),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function nc(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new Lo(t,4,2),i=new jn({wireframe:!0,fog:!1});Vn.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function rc(e,t){mn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new _i({fog:!1}),r=new On;r.addAttribute("position",new yn(new Float32Array(15),3)),this.line=new Si(r,n),this.add(this.line),this.update()}function ic(e,t,n){mn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new zi(t);r.rotateY(.5*Math.PI),this.material=new jn({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=S);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new yn(o,3)),this.add(new Vn(r,this.material)),this.update()}function oc(e,t,n,r){e=e||10,t=t||10,n=new an(void 0!==n?n:4473924),r=new an(void 0!==r?r:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],c=[],u=0,l=0,h=-a;u<=t;u++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var d=u===i?n:r;d.toArray(c,l),l+=3,d.toArray(c,l),l+=3,d.toArray(c,l),l+=3,d.toArray(c,l),l+=3}var f=new On;f.addAttribute("position",new An(s,3)),f.addAttribute("color",new An(c,3));var p=new _i({vertexColors:S});Mi.call(this,f,p)}function ac(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new an(void 0!==i?i:4473924),o=new an(void 0!==o?o:8947848);var a,s,c,u,l,h,d,f=[],p=[];for(u=0;u<=t;u++)c=u/t*(2*Math.PI),a=Math.sin(c)*e,s=Math.cos(c)*e,f.push(0,0,0),f.push(a,0,s),d=1&u?i:o,p.push(d.r,d.g,d.b),p.push(d.r,d.g,d.b);for(u=0;u<=n;u++)for(d=1&u?i:o,h=e-e/n*u,l=0;l<r;l++)c=l/r*(2*Math.PI),a=Math.sin(c)*h,s=Math.cos(c)*h,f.push(a,0,s),p.push(d.r,d.g,d.b),c=(l+1)/r*(2*Math.PI),a=Math.sin(c)*h,s=Math.cos(c)*h,f.push(a,0,s),p.push(d.r,d.g,d.b);var m=new On;m.addAttribute("position",new An(f,3)),m.addAttribute("color",new An(p,3));var v=new _i({vertexColors:S});Mi.call(this,m,v)}function sc(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new On,u=new An(2*a*3,3);c.addAttribute("position",u),Mi.call(this,c,new _i({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function cc(e,t,n){mn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new On;r.addAttribute("position",new An([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new _i({fog:!1});this.lightPlane=new Si(r,i),this.add(this.lightPlane),(r=new On).addAttribute("position",new An([0,0,0,0,0,1],3)),this.targetLine=new Si(r,i),this.add(this.targetLine),this.update()}function uc(e){var t=new On,n=new _i({color:16777215,vertexColors:_}),r=[],i=[],o={},a=new an(16755200),s=new an(16711680),c=new an(43775),u=new an(16777215),l=new an(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",u),h("p","c",l),h("cn1","cn2",l),h("cn3","cn4",l),h("cf1","cf2",l),h("cf3","cf4",l),t.addAttribute("position",new An(r,3)),t.addAttribute("color",new An(i,3)),Mi.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function lc(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new On;i.setIndex(new yn(n,1)),i.addAttribute("position",new yn(r,3)),Mi.call(this,i,new _i({color:t})),this.matrixAutoUpdate=!1,this.update()}function hc(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new On;i.setIndex(new yn(r,1)),i.addAttribute("position",new An([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Mi.call(this,i,new _i({color:n})),this.geometry.computeBoundingSphere()}function dc(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=new On;i.addAttribute("position",new An([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),Si.call(this,i,new _i({color:r}));var o=new On;o.addAttribute("position",new An([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Vn(o,new jn({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function fc(e,t,n,r,i,o){mn.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===Rs&&((Rs=new On).addAttribute("position",new An([0,0,0,0,1,0],3)),(Is=new zo(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Si(Rs,new _i({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Vn(Is,new jn({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function pc(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new On;n.addAttribute("position",new An(t,3)),n.addAttribute("color",new An([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new _i({vertexColors:S});Mi.call(this,n,r)}function mc(e,t,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new hn(e,t,n,i,o,a)}Object.assign(Ds.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Fs,{Composite:Ds,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Fs.Composite(e,t,n):new Fs(e,t,n)},sanitizeNodeName:function(){var e=new RegExp("[\\[\\]\\.:\\/]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^\\[\\]\\.:\\/]",t="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",e),r=/(WCOD+)?/.source.replace("WCOD",t),i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),a=new RegExp("^"+n+r+i+o+"$"),s=["material","materials","bones"];return function(e){var t=a.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==s.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t||i.uuid===t)return i;var o=r(i.children);if(o)return o}return null},i=r(e.children);if(i)return i}return null}}),Object.assign(Fs.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Fs.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[r];if(void 0!==s){var c=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][c]}else{var l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Fs.prototype,{_getValue_unbound:Fs.prototype.getValue,_setValue_unbound:Fs.prototype.setValue}),Object.assign(ks.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,c=void 0,u=0,l=arguments.length;u!==l;++u){var h=arguments[u],d=h.uuid,f=r[d];if(void 0===f){f=t++,r[d]=f,e.push(h);for(var p=0,m=s;p!==m;++p)a[p].push(new Fs(h,i[p],o[p]))}else if(f<n){c=e[f];var v=--n,g=e[v];r[g.uuid]=f,e[f]=g,r[d]=v,e[v]=h;for(p=0,m=s;p!==m;++p){var y=a[p],b=y[v],x=y[f];y[f]=b,void 0===x&&(x=new Fs(h,i[p],o[p])),y[v]=x}}else e[f]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],c=s.uuid,u=n[c];if(void 0!==u&&u>=t){var l=t++,h=e[l];n[h.uuid]=u,e[u]=h,n[c]=l,e[l]=s;for(var d=0,f=i;d!==f;++d){var p=r[d],m=p[l],v=p[u];p[u]=m,p[l]=v}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var c=arguments[a].uuid,u=r[c];if(void 0!==u)if(delete r[c],u<n){var l=--n,h=e[l],d=e[g=--t];r[h.uuid]=u,e[u]=h,r[d.uuid]=l,e[l]=d,e.pop();for(var f=0,p=o;f!==p;++f){var m=(y=i[f])[l],v=y[g];y[u]=m,y[l]=v,y.pop()}}else{var g;r[(d=e[g=--t]).uuid]=u,e[u]=d,e.pop();for(f=0,p=o;f!==p;++f){var y;(y=i[f])[u]=y[g],y.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,c=s.length,u=this.nCachedObjects_,l=new Array(c);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(l);for(var h=u,d=s.length;h!==d;++h){var f=s[h];l[h]=new Fs(f,e,t)}return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(Us.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,c=o.sampleValues;return s[0]=i,s[1]=i+n,c[0]=e/a,c[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var c=this._interpolants,u=this._propertyBindings,l=0,h=c.length;l!==h;++l)c[l].evaluate(a),u[l].accumulate(r,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,r=this.loop,i=this._loopCount,o=r===gt;if(0===e)return-1===i?t:o&&1==(1&i)?n-t:t;if(r===mt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&i))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=_t,r.endingEnd=_t):(r.endingStart=e?this.zeroSlopeAtStart?_t:wt:St,r.endingEnd=t?this.zeroSlopeAtEnd?_t:wt:St)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}),Bs.prototype=Object.assign(Object.create(i.prototype),{constructor:Bs,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,c=this._bindingsByRootAndName,u=c[s];void 0===u&&(u={},c[s]=u);for(var l=0;l!==i;++l){var h=r[l],d=h.name,f=u[d];if(void 0!==f)o[l]=f;else{if(void 0!==(f=o[l])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,d));continue}var p=t&&t._propertyBindings[l].binding.parsedPath;++(f=new Ns(Fs.create(n,d,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(f,s,d),o[l]=f}a[l].resultBuffer=f.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,c=s[s.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,s[u]=c,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete a[i];e:{for(var u in a)break e;delete o[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Qa(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?as.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var c=a.actionByRoot[r];if(void 0!==c)return c;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var u=new Us(this,i,t);return this._bindAction(u,s),this._addInactiveAction(u,o,r),u},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?as.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){t[a]._update(r,e,i,o)}var s=this._bindings,c=this._nActiveBindings;for(a=0;a!==c;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var c=o[a];this._deactivateAction(c);var u=c._cacheIndex,l=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,l._cacheIndex=u,t[u]=l,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),zs.prototype.clone=function(){return new zs(void 0===this.value.clone?this.value:this.value.clone())},js.prototype=Object.assign(Object.create(On.prototype),{constructor:js,isInstancedBufferGeometry:!0,copy:function(e){return On.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Vs.prototype=Object.assign(Object.create(pi.prototype),{constructor:Vs,isInstancedInterleavedBuffer:!0,copy:function(e){return pi.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Gs.prototype=Object.assign(Object.create(yn.prototype),{constructor:Gs,isInstancedBufferAttribute:!0,copy:function(e){return yn.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Ws.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return Xs(e,this,r,t),r.sort(Hs),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=e.length;i<o;i++)Xs(e[i],this,r,t);return r.sort(Hs),r}}),Object.assign(qs.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Ys.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Bt.clamp(t/this.radius,-1,1))),this}}),Object.assign(Js.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}}),Object.assign(Qs.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new zt;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new zt),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new zt),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new zt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new zt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new zt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Zs.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Gt),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Gt),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Gt),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new Gt,t=new Gt;return function(n,r){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),o=t.dot(e)/i;return r&&(o=Bt.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Gt),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Ks.prototype=Object.create(mn.prototype),Ks.prototype.constructor=Ks,Ks.prototype.isImmediateRenderObject=!0,$s.prototype=Object.create(Mi.prototype),$s.prototype.constructor=$s,$s.prototype.update=function(){var e=new Gt,t=new Gt,n=new Wt;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,c=a.faces,u=0,l=0,h=c.length;l<h;l++)for(var d=c[l],f=0,p=d.vertexNormals.length;f<p;f++){var m=s[d[r[f]]],v=d.vertexNormals[f];e.copy(m).applyMatrix4(i),t.copy(v).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u+=1,o.setXYZ(u,t.x,t.y,t.z),u+=1}else if(a&&a.isBufferGeometry){var g=a.attributes.position,y=a.attributes.normal;for(u=0,f=0,p=g.count;f<p;f++)e.set(g.getX(f),g.getY(f),g.getZ(f)).applyMatrix4(i),t.set(y.getX(f),y.getY(f),y.getZ(f)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u+=1,o.setXYZ(u,t.x,t.y,t.z),u+=1}o.needsUpdate=!0}}(),ec.prototype=Object.create(mn.prototype),ec.prototype.constructor=ec,ec.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},ec.prototype.update=function(){var e=new Gt,t=new Gt;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),tc.prototype=Object.create(Mi.prototype),tc.prototype.constructor=tc,tc.prototype.updateMatrixWorld=function(){var e=new Gt,t=new jt,n=new jt;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,c=0;s<i.length;s++){var u=i[s];u.parent&&u.parent.isBone&&(t.multiplyMatrices(n,u.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(c,e.x,e.y,e.z),t.multiplyMatrices(n,u.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(c+1,e.x,e.y,e.z),c+=2)}o.getAttribute("position").needsUpdate=!0,mn.prototype.updateMatrixWorld.call(this,r)}}(),nc.prototype=Object.create(Vn.prototype),nc.prototype.constructor=nc,nc.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},nc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},rc.prototype=Object.create(mn.prototype),rc.prototype.constructor=rc,rc.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},rc.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,r=n.array;r[0]=e,r[1]=-t,r[2]=0,r[3]=e,r[4]=t,r[5]=0,r[6]=-e,r[7]=t,r[8]=0,r[9]=-e,r[10]=-t,r[11]=0,r[12]=e,r[13]=-t,r[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},ic.prototype=Object.create(mn.prototype),ic.prototype.constructor=ic,ic.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ic.prototype.update=function(){var e=new Gt,t=new an,n=new an;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?t:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),oc.prototype=Object.create(Mi.prototype),oc.prototype.constructor=oc,ac.prototype=Object.create(Mi.prototype),ac.prototype.constructor=ac,sc.prototype=Object.create(Mi.prototype),sc.prototype.constructor=sc,sc.prototype.update=function(){var e=new Gt,t=new Gt,n=new Wt;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,c=0,u=0,l=s.length;u<l;u++){var h=s[u],d=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),t.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(c,e.x,e.y,e.z),c+=1,i.setXYZ(c,t.x,t.y,t.z),c+=1}i.needsUpdate=!0}}(),cc.prototype=Object.create(mn.prototype),cc.prototype.constructor=cc,cc.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},cc.prototype.update=function(){var e=new Gt,t=new Gt,n=new Gt;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),uc.prototype=Object.create(Mi.prototype),uc.prototype.constructor=uc,uc.prototype.update=function(){var e,t,n=new Gt,r=new ai;function i(i,o,a,s){n.set(o,a,s).unproject(r);var c=t[i];if(void 0!==c)for(var u=e.getAttribute("position"),l=0,h=c.length;l<h;l++)u.setXYZ(c[l],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),lc.prototype=Object.create(Mi.prototype),lc.prototype.constructor=lc,lc.prototype.update=function(){var e=new Kt;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),lc.prototype.setFromObject=function(e){return this.object=e,this.update(),this},hc.prototype=Object.create(Mi.prototype),hc.prototype.constructor=hc,hc.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),mn.prototype.updateMatrixWorld.call(this,e))},dc.prototype=Object.create(Si.prototype),dc.prototype.constructor=dc,dc.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?g:v,this.lookAt(this.plane.normal),mn.prototype.updateMatrixWorld.call(this,e)},fc.prototype=Object.create(mn.prototype),fc.prototype.constructor=fc,fc.prototype.setDirection=function(){var e,t=new Gt;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),fc.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},fc.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},pc.prototype=Object.create(Mi.prototype),pc.prototype.constructor=pc;var vc=0,gc=1;function yc(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function bc(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function xc(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Ei(e,t)}function wc(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new gi(e)}function _c(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Ei(e,t)}function Sc(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Ai(e)}function Mc(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Ai(e)}function Tc(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Ai(e)}function Ac(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Gt(e,t,n)}function Ec(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new yn(e,t).setDynamic(!0)}function Cc(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new bn(e,t)}function Pc(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new xn(e,t)}function Lc(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new wn(e,t)}function Oc(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new _n(e,t)}function Nc(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Sn(e,t)}function Rc(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Mn(e,t)}function Ic(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Tn(e,t)}function Dc(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new An(e,t)}function Fc(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new En(e,t)}function kc(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),wa.call(this,e),this.type="catmullrom",this.closed=!0}function Uc(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),wa.call(this,e),this.type="catmullrom"}function Bc(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),wa.call(this,e),this.type="catmullrom"}function zc(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new pc(e)}function jc(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new lc(e,t)}function Vc(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Mi(new Uo(e.geometry),new _i({color:void 0!==t?t:16777215}))}function Gc(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Mi(new Ni(e.geometry),new _i({color:void 0!==t?t:16777215}))}function Wc(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new sa(e)}function Hc(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new ua(e)}fa.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(fa.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Ra.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new gn,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new Gt(i.x,i.y,i.z||0))}return t}}),Object.assign(Ia.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),kc.prototype=Object.create(wa.prototype),Uc.prototype=Object.create(wa.prototype),Bc.prototype=Object.create(wa.prototype),Object.assign(Bc.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),oc.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},tc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(hs.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ds.extractUrlBase(e)}}),Object.assign(fs.prototype,{setTexturePath:function(e){return console.warn("THREE.JSONLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(Qs.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Kt.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Zs.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Bt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Bt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Bt.ceilPowerOfTwo(e)}}),Object.assign(Wt.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(jt.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new Gt),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),en.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Vt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Bn.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(zn.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(zn,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),zn.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),zn.getNormal(e,t,n,r)}}),Object.assign(Da.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new So(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Do(this,e)}}),Object.assign(zt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Gt.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Yt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(gn.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(mn.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(mn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(yi.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(bi.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(fa.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),si.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Fa.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(yn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(On.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(On.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Mo.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(zs.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(kn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new an}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===b}}}),Object.defineProperties(Qo.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Un.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(li.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(li.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ni.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Jt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(ui.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Ps.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Ts).load(e,function(e){t.setBuffer(e)}),this},Os.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Es.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var Xc={merge:function(e,t,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function qc(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Yc(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}Ht.crossOrigin=void 0,Ht.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new da;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Ht.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new ha;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},Ht.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Ht.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var Jc={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function Qc(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}}.call(this,n("11d2d9cd5d1b52a535e7"),n("5e511fa944f88972e69c"))},"12323e1413cbffdabe02":function(e,t,n){var r=n("d34390b928ecadc11dc8"),i=n("d394d0a4c1838202489d"),o=n("5f6eded14a8ed86276fc")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},"1255a24f27d9a947a608":function(e,t,n){"use strict";t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=u(n("412479c5138fb85aa19f")),a=n("33ac025fdf0477f401a7"),s=n("92274ddfec80152892bc"),c=u(n("ab8261c9b33ea00e4f82"));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e,t,n){return Math.min(Math.max(e,t),n)};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getUserConfirmation,n=e.initialEntries,u=void 0===n?["/"]:n,h=e.initialIndex,d=void 0===h?0:h,f=e.keyLength,p=void 0===f?6:f,m=(0,c.default)(),v=function(e){i(_,e),_.length=_.entries.length,m.notifyListeners(_.location,_.action)},g=function(){return Math.random().toString(36).substr(2,p)},y=l(d,0,u.length-1),b=u.map(function(e){return"string"==typeof e?(0,s.createLocation)(e,void 0,g()):(0,s.createLocation)(e,void 0,e.key||g())}),x=a.createPath,w=function(e){var n=l(_.index+e,0,_.entries.length-1),r=_.entries[n];m.confirmTransitionTo(r,"POP",t,function(e){e?v({action:"POP",location:r,index:n}):v()})},_={length:b.length,action:"POP",location:b[y],index:y,entries:b,createHref:x,push:function(e,n){(0,o.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,s.createLocation)(e,n,g(),_.location);m.confirmTransitionTo(i,"PUSH",t,function(e){if(e){var t=_.index+1,n=_.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),v({action:"PUSH",location:i,index:t,entries:n})}})},replace:function(e,n){(0,o.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,s.createLocation)(e,n,g(),_.location);m.confirmTransitionTo(i,"REPLACE",t,function(e){e&&(_.entries[_.index]=i,v({action:"REPLACE",location:i}))})},go:w,goBack:function(){return w(-1)},goForward:function(){return w(1)},canGo:function(e){var t=_.index+e;return t>=0&&t<_.entries.length},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.setPrompt(e)},listen:function(e){return m.appendListener(e)}};return _}},"12a106a843fda580d627":function(e,t,n){var r=n("d394d0a4c1838202489d"),i=n("145c4f2bdc487b2578df");n("f34797c0b42452934317")("keys",function(){return function(e){return i(r(e))}})},"12ba4fef039ee145f0aa":function(e,t,n){"use strict";t.__esModule=!0,t.createPath=t.parsePath=t.locationsAreEqual=t.createLocation=t.createMemoryHistory=t.createHashHistory=t.createBrowserHistory=void 0;var r=n("92274ddfec80152892bc");Object.defineProperty(t,"createLocation",{enumerable:!0,get:function(){return r.createLocation}}),Object.defineProperty(t,"locationsAreEqual",{enumerable:!0,get:function(){return r.locationsAreEqual}});var i=n("33ac025fdf0477f401a7");Object.defineProperty(t,"parsePath",{enumerable:!0,get:function(){return i.parsePath}}),Object.defineProperty(t,"createPath",{enumerable:!0,get:function(){return i.createPath}});var o=c(n("89fa59dfd48f288c4600")),a=c(n("3fb509045374147eb7e3")),s=c(n("1255a24f27d9a947a608"));function c(e){return e&&e.__esModule?e:{default:e}}t.createBrowserHistory=o.default,t.createHashHistory=a.default,t.createMemoryHistory=s.default},"14462f9650d45fd47dc7":function(e,t,n){var r=n("413112319aa96af919d4"),i=n("2d13d93c336705cd8ff9"),o=n("43a62b7f9a94dda95bf8")("metadata"),a=o.store||(o.store=new(n("4b6c3e2b96a7fdc95a33"))),s=function(e,t,n){var i=a.get(e);if(!i){if(!n)return;a.set(e,i=new r)}var o=i.get(t);if(!o){if(!n)return;i.set(t,o=new r)}return o};e.exports={store:a,map:s,has:function(e,t,n){var r=s(t,n,!1);return void 0!==r&&r.has(e)},get:function(e,t,n){var r=s(t,n,!1);return void 0===r?void 0:r.get(e)},set:function(e,t,n,r){s(n,r,!0).set(e,t)},keys:function(e,t){var n=s(e,t,!1),r=[];return n&&n.forEach(function(e,t){r.push(t)}),r},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){i(i.S,"Reflect",e)}}},"1451c76b1b1b5a5ba260":function(e,t,n){"use strict";n("03ba1ede2f4706d1e7f7")("bold",function(e){return function(){return e(this,"b","","")}})},"145c4f2bdc487b2578df":function(e,t,n){var r=n("e3136eea77d23f8d97ec"),i=n("380c0734c088ca78ccda");e.exports=Object.keys||function(e){return r(e,i)}},"1468f5d37f30f63d76ea":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("efae14a3f8cd9a616256"),o=n("1f3157d073736826d4fa"),a=n("ca19e32ab6ee3b3692aa"),s=[].lastIndexOf,c=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(c||!n("40b064d4eb439c0c1c2b")(s)),"Array",{lastIndexOf:function(e){if(c)return s.apply(this,arguments)||0;var t=i(this),n=a(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},"14aa1c87589cec105b74":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Math",{iaddh:function(e,t,n,r){var i=e>>>0,o=n>>>0;return(t>>>0)+(r>>>0)+((i&o|(i|o)&~(i+o>>>0))>>>31)|0}})},"1582553a0f2276f66f2f":function(e,t,n){var r=n("a459ab805827640a27e8"),i=n("0116c75136b233002fb9"),o=n("621a65702ee1a566fd32")("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},"1591b90b4327c94245ad":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("ecd0e0fb36455021f082")(1);r(r.P+r.F*!n("40b064d4eb439c0c1c2b")([].map,!0),"Array",{map:function(e){return i(this,e,arguments[1])}})},"15ad6b6c880d51697e5b":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.P,"String",{repeat:n("945a806e4f4787a7905b")})},"1627ebf46087710a4703":function(e,t,n){"use strict";n("03ba1ede2f4706d1e7f7")("strike",function(e){return function(){return e(this,"strike","","")}})},"1655a801151bdc7ee673":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("edb183dfe43ad4a21ef0");r(r.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},"16a2663068191a21c134":function(e,t,n){var r=n("c563599eb9734b6ef1c0"),i=n("f0200b4beabe56dc845a"),o=n("848061d2617404d8a848"),a=n("ad8470b596eb2ec5826f"),s=n("43dd891ba6876544e540"),c=n("67042e57ad02a5947bc9"),u=n("cef4e105446199aaf71e"),l=u(r),h=u(i),d=u(o),f=u(a),p=u(s),m=c;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=m(new i)||o&&"[object Promise]"!=m(o.resolve())||a&&"[object Set]"!=m(new a)||s&&"[object WeakMap]"!=m(new s))&&(m=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case l:return"[object DataView]";case h:return"[object Map]";case d:return"[object Promise]";case f:return"[object Set]";case p:return"[object WeakMap]"}return t}),e.exports=m},"16c6ea6c9ece643bfb5c":function(e,t,n){"use strict";t.__esModule=!0;var r=c(n("49a47d064cfbf2949ee5")),i=c(n("8af190b70a6bc55c6f1b")),o=c(n("8a2d1b95e05b6a321e74")),a=n("12ba4fef039ee145f0aa"),s=c(n("3ddbfa7ffbc97506f3e4"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=u(this,e.call.apply(e,[this].concat(o))),r.history=(0,a.createBrowserHistory)(r.props),u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){(0,r.default)(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return i.default.createElement(s.default,{history:this.history,children:this.props.children})},t}(i.default.Component);l.propTypes={basename:o.default.string,forceRefresh:o.default.bool,getUserConfirmation:o.default.func,keyLength:o.default.number,children:o.default.node},t.default=l},"1792bb2ef9fe352edb1e":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("7fd90dee1f5cbd901d1c"),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+o(e-1)*o(e+1))}})},"1860f64667ad8a670ab7":function(e,t,n){"use strict";n("03ba1ede2f4706d1e7f7")("sup",function(e){return function(){return e(this,"sup","","")}})},"18caba858d9ea0f67284":function(e,t,n){var r=n("5de5c65c2c431f821291"),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},"191adceeffad46f4bba8":function(e,t,n){var r=n("18caba858d9ea0f67284")["__core-js_shared__"];e.exports=r},"19289c2680cbdec14eed":function(e,t,n){var r=n("14462f9650d45fd47dc7"),i=n("79c91dcd8cd554c59c7b"),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(e,t){return o(e,i(t),arguments.length<3?void 0:a(arguments[2]))}})},"19a014a8d7781dbba23a":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Math",{scale:n("7caa05c4b9a2c1771918")})},"1a29b1a839ce123011e8":function(e,t,n){var r=n("7a8c0ef4f45a56962a18"),i=n("5fd4d3d5ac2fe9bfd20e"),o=n("14462f9650d45fd47dc7"),a=n("79c91dcd8cd554c59c7b"),s=n("12323e1413cbffdabe02"),c=o.keys,u=o.key,l=function(e,t){var n=c(e,t),o=s(e);if(null===o)return n;var a=l(o,t);return a.length?n.length?i(new r(n.concat(a))):a:n};o.exp({getMetadataKeys:function(e){return l(a(e),arguments.length<2?void 0:u(arguments[1]))}})},"1a5381b6e12121a4e33d":function(e,t,n){"use strict";var r=n("1b01d0e59d3af79760a0").f,i=n("ef09ce044ac3210bc947"),o=n("503a0df91bcab33c39b8"),a=n("0e717e1f47872428608d"),s=n("fd8b6034a9a06242cc87"),c=n("4133d6461867e9751fc3"),u=n("429cfc8e3ed333e40618"),l=n("dabaabbe8ba08d59975f"),h=n("89a21af31babcdc56725"),d=n("5975c7ea3ecd56e534e3"),f=n("87f7b2a2f3e179b5c40a").fastKey,p=n("2c407c4438ef2794ef23"),m=d?"_s":"size",v=function(e,t){var n,r=f(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var l=e(function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&c(r,n,e[u],e)});return o(l.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=p(this,t),r=v(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[m]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!v(p(this,t),e)}}),d&&r(l.prototype,"size",{get:function(){return p(this,t)[m]}}),l},def:function(e,t,n){var r,i,o=v(e,t);return o?o.v=n:(e._l=o={i:i=f(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:v,setStrong:function(e,t,n){u(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?l(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,l(1))},n?"entries":"values",!n,!0),h(t)}}},"1ae513448994dc2a1e86":function(e,t,n){var r,i,o,a=n("0e717e1f47872428608d"),s=n("5a3b914e449c6d95aadc"),c=n("5b9dc0e027f5c68eff1a"),u=n("68a989d6f90923909f2a"),l=n("1139de1233fd67f45bd7"),h=l.process,d=l.setImmediate,f=l.clearImmediate,p=l.MessageChannel,m=l.Dispatch,v=0,g={},y=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},b=function(e){y.call(e.data)};d&&f||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},f=function(e){delete g[e]},"process"==n("0116c75136b233002fb9")(h)?r=function(e){h.nextTick(a(y,e,1))}:m&&m.now?r=function(e){m.now(a(y,e,1))}:p?(o=(i=new p).port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:d,clear:f}},"1b01d0e59d3af79760a0":function(e,t,n){var r=n("79c91dcd8cd554c59c7b"),i=n("bc1a333d2b6eceac22e3"),o=n("4ef7a75a1d1957a7c5c0"),a=Object.defineProperty;t.f=n("5975c7ea3ecd56e534e3")?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},"1b71f5e96f29a92413b6":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("5b9dc0e027f5c68eff1a"),o=n("0116c75136b233002fb9"),a=n("23d432718b3e8ce32362"),s=n("ca19e32ab6ee3b3692aa"),c=[].slice;r(r.P+r.F*n("7a7739dd8a198a2cfcb5")(function(){i&&c.call(i)}),"Array",{slice:function(e,t){var n=s(this.length),r=o(this);if(t=void 0===t?n:t,"Array"==r)return c.call(this,e,t);for(var i=a(e,n),u=a(t,n),l=s(u-i),h=new Array(l),d=0;d<l;d++)h[d]="String"==r?this.charAt(i+d):this[i+d];return h}})},"1bd0e64edcedab820751":function(e,t,n){"use strict";t.__esModule=!0,t.storeShape=t.subscriptionShape=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("8a2d1b95e05b6a321e74"));t.subscriptionShape=r.default.shape({trySubscribe:r.default.func.isRequired,tryUnsubscribe:r.default.func.isRequired,notifyNestedSubs:r.default.func.isRequired,isSubscribed:r.default.func.isRequired}),t.storeShape=r.default.shape({subscribe:r.default.func.isRequired,dispatch:r.default.func.isRequired,getState:r.default.func.isRequired})},"1bfd0b712b958ac38a24":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("dae53c7f1be5fcfdbe4b"),o=Math.exp;r(r.S+r.F*n("7a7739dd8a198a2cfcb5")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(o(e-1)-o(-e-1))*(Math.E/2)}})},"1c750e24757a7c0c1e31":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("7fc706acfdba9b87047f"),o=n("efae14a3f8cd9a616256"),a=n("61fcea04092a9580d371"),s=n("8de492c765fbfb624515");r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n,r=o(e),c=a.f,u=i(r),l={},h=0;u.length>h;)void 0!==(n=c(r,t=u[h++]))&&s(l,t,n);return l}})},"1cbd705abc411c9a1e5b":function(e,t,n){var r=Array.prototype.slice,i=n("9e0bbfb109257d4426cd"),o=n("87972ac436f8a43eea81"),a=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:function(e,t,n){var u,l;if(s(e)||s(t))return!1;if(e.prototype!==t.prototype)return!1;if(o(e))return!!o(t)&&(e=r.call(e),t=r.call(t),a(e,t,n));if(c(e)){if(!c(t))return!1;if(e.length!==t.length)return!1;for(u=0;u<e.length;u++)if(e[u]!==t[u])return!1;return!0}try{var h=i(e),d=i(t)}catch(e){return!1}if(h.length!=d.length)return!1;for(h.sort(),d.sort(),u=h.length-1;u>=0;u--)if(h[u]!=d[u])return!1;for(u=h.length-1;u>=0;u--)if(l=h[u],!a(e[l],t[l],n))return!1;return typeof e==typeof t}(e,t,n))};function s(e){return null===e||void 0===e}function c(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(e.length>0&&"number"!=typeof e[0]))}},"1dddc8b9f5f30599741a":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("d394d0a4c1838202489d"),o=n("4ef7a75a1d1957a7c5c0"),a=n("12323e1413cbffdabe02"),s=n("61fcea04092a9580d371").f;n("5975c7ea3ecd56e534e3")&&r(r.P+n("615b8c1bc8c3f66221bc"),"Object",{__lookupSetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=s(n,r))return t.set}while(n=a(n))}})},"1e0f00d296712713afe6":function(e,t,n){var r=n("4d073e2fededcdd3f3d3"),i=n("d394d0a4c1838202489d"),o=n("a537d0accb907bf9d41f"),a=n("ca19e32ab6ee3b3692aa");e.exports=function(e,t,n,s,c){r(t);var u=i(e),l=o(u),h=a(u.length),d=c?h-1:0,f=c?-1:1;if(n<2)for(;;){if(d in l){s=l[d],d+=f;break}if(d+=f,c?d<0:h<=d)throw TypeError("Reduce of empty array with no initial value")}for(;c?d>=0:h>d;d+=f)d in l&&(s=t(s,l[d],d,u));return s}},"1e4534d1d62a11482e97":function(e,t,n){var r={},i=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),o=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e){return document.querySelector(e)}.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),a=null,s=0,c=[],u=n("0aac488a388d7f2d0eea");function l(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=r[i.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](i.parts[a]);for(;a<i.parts.length;a++)o.parts.push(v(i.parts[a],t))}else{var s=[];for(a=0;a<i.parts.length;a++)s.push(v(i.parts[a],t));r[i.id]={id:i.id,refs:1,parts:s}}}}function h(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function d(e,t){var n=o(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),c.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=o(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function f(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=c.indexOf(e);t>=0&&c.splice(t,1)}function p(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),m(t,e.attrs),d(e,t),t}function m(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function v(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var c=s++;n=a||(a=p(t)),r=y.bind(null,n,c,!1),i=y.bind(null,n,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",m(t,e.attrs),d(e,t),t}(t),r=function(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=u(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),i=function(){f(n),n.href&&URL.revokeObjectURL(n.href)}):(n=p(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){f(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=i()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t);return l(n,t),function(e){for(var i=[],o=0;o<n.length;o++){var a=n[o];(s=r[a.id]).refs--,i.push(s)}e&&l(h(e,t),t);for(o=0;o<i.length;o++){var s;if(0===(s=i[o]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete r[s.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}();function y(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=g(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},"1ef5eae0d45731e89b6f":function(e,t,n){var r=n("28e5655f45e616ffe40b"),i=n("22387c0eaba857444dfb"),o=n("eedc997fc37971b68c9e"),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},"1f3157d073736826d4fa":function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},"1f928caa5aa7943b8c1b":function(e,t,n){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var r=n("08aacfc067e33d327708");function i(e){return!0===r(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,n;return!1!==i(e)&&("function"==typeof(t=e.constructor)&&(!1!==i(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},"2076e982c14c41925fb4":function(e,t,n){var r=n("efae14a3f8cd9a616256"),i=n("ca19e32ab6ee3b3692aa"),o=n("23d432718b3e8ce32362");e.exports=function(e){return function(t,n,a){var s,c=r(t),u=i(c.length),l=o(a,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}}},"22387c0eaba857444dfb":function(e,t){e.exports=function(e){return function(t){return e(t)}}},"224ae09e536c09e69a0a":function(e,t){e.exports={}},"22c4655df043ec6a4af2":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("3dd7e3cb81b24cbd63d6"),o=n("d394d0a4c1838202489d"),a=n("ca19e32ab6ee3b3692aa"),s=n("1f3157d073736826d4fa"),c=n("0594430ce9777a0767aa");r(r.P,"Array",{flatten:function(){var e=arguments[0],t=o(this),n=a(t.length),r=c(t,0);return i(r,t,t,n,0,void 0===e?1:s(e)),r}}),n("a5e6f0092ff0290e0bcf")("flatten")},"23339791c405611c831e":function(e,t,n){var r=n("efae14a3f8cd9a616256"),i=n("61fcea04092a9580d371").f;n("f34797c0b42452934317")("getOwnPropertyDescriptor",function(){return function(e,t){return i(r(e),t)}})},"23d432718b3e8ce32362":function(e,t,n){var r=n("1f3157d073736826d4fa"),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},"2499ce6d7ea1e9ca2579":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("7ae46632a49db7ab2ae0");r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},"24c5bf497be6b8e1330e":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("f62053ff67fa82664144")(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return i(e)}})},"259390904b4b47fe24f8":function(e,t,n){var r=n("67042e57ad02a5947bc9"),i=n("a607943c6ce671e7106b"),o=n("4b93c5a7bb60dd6ab0f4"),a="[object Object]",s=Function.prototype,c=Object.prototype,u=s.toString,l=c.hasOwnProperty,h=u.call(Object);e.exports=function(e){if(!o(e)||r(e)!=a)return!1;var t=i(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==h}},"2598229f45b3da87877e":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("79c91dcd8cd554c59c7b"),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){i(e);try{return o&&o(e),!0}catch(e){return!1}}})},"26d59f808dff3e83c741":function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,h=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&f())}function f(){if(!l){var e=s(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"273d2eedcd369c189e70":function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},"277cfc1331526160cbd4":function(e,t,n){"use strict";var r=function(e){};r=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")},e.exports=function(e,t,n,i,o,a,s,c){if(r(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,i,o,a,s,c],h=0;(u=new Error(t.replace(/%s/g,function(){return l[h++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},"28e5655f45e616ffe40b":function(e,t,n){var r=n("67042e57ad02a5947bc9"),i=n("84696c4e387dcb8648dc"),o=n("4b93c5a7bb60dd6ab0f4"),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},"29141de3bd8fb20e5e9a":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("ca19e32ab6ee3b3692aa"),o=n("39dac2a92593ee9501cd"),a="".startsWith;r(r.P+r.F*n("e5c4ff14bae25ddfa508")("startsWith"),"String",{startsWith:function(e){var t=o(this,e,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return a?a.call(t,r,n):t.slice(n,n+r.length)===r}})},"298b5be4dd10a9a11c49":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("06d4481d8fe57248a157");r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},"2a0335303f85c0f28de1":function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=n(6)(function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},!0)},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r=/[A-Z]/g,i=/^ms-/,o={};e.exports=function(e){return e in o?o[e]:o[e]=e.replace(r,"-$&").toLowerCase().replace(i,"-ms-")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=o.default.oneOfType([o.default.string,o.default.number]),s={orientation:o.default.oneOf(["portrait","landscape"]),scan:o.default.oneOf(["progressive","interlace"]),aspectRatio:o.default.string,deviceAspectRatio:o.default.string,height:a,deviceHeight:a,width:a,deviceWidth:a,color:o.default.bool,colorIndex:o.default.bool,monochrome:o.default.bool,resolution:a},c=r({minAspectRatio:o.default.string,maxAspectRatio:o.default.string,minDeviceAspectRatio:o.default.string,maxDeviceAspectRatio:o.default.string,minHeight:a,maxHeight:a,minDeviceHeight:a,maxDeviceHeight:a,minWidth:a,maxWidth:a,minDeviceWidth:a,maxDeviceWidth:a,minColor:o.default.number,maxColor:o.default.number,minColorIndex:o.default.number,maxColorIndex:o.default.number,minMonochrome:o.default.number,maxMonochrome:o.default.number,minResolution:a,maxResolution:a},s),u={all:o.default.bool,grid:o.default.bool,aural:o.default.bool,braille:o.default.bool,handheld:o.default.bool,print:o.default.bool,projection:o.default.bool,screen:o.default.bool,tty:o.default.bool,tv:o.default.bool,embossed:o.default.bool},l=r({},u,c);s.type=Object.keys(u),t.default={all:l,types:u,matchers:s,features:c},e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){var n=s({},e);return t.forEach(function(e){return delete n[e]}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.toQuery=t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(5),u=r(c),l=n(0),h=r(l),d=n(9),f=r(d),p=n(2),m=r(p),v=n(3),g=r(v),y=n(11),b=r(y),x={component:h.default.node,query:h.default.string,values:h.default.shape(g.default.matchers),children:h.default.oneOfType([h.default.node,h.default.func]),onChange:h.default.func,onBeforeChange:h.default.func},w=Object.keys(g.default.all),_=Object.keys(x),S=_.concat(w),M=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={matches:!1},r.updateMatches=function(){r._mql.matches!==r.state.matches&&r.setState({matches:r._mql.matches})},r.removeMql=function(){r._mql&&(r._mql.removeListener(r.updateMatches),r._mql.dispose())},i(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentWillMount",value:function(){this.updateQuery(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.updateQuery(e)}},{key:"updateQuery",value:function(e){var t=void 0,n=!1;if(e.query?this.query=e.query:this.query=(0,b.default)(o(e,_)),!this.query)throw new Error("Invalid or missing MediaQuery!");e.values&&(t=Object.keys(e.values).reduce(function(t,n){return t[(0,m.default)(n)]=e.values[n],t},{}),0!==Object.keys(t).length&&(n=!0)),this.removeMql(),this._mql=(0,f.default)(this.query,t,n),this._mql.addListener(this.updateMatches),this.updateMatches()}},{key:"componentWillUpdate",value:function(e,t){this.props.onBeforeChange&&this.state.matches!==t.matches&&this.props.onBeforeChange(this.state.matches)}},{key:"componentDidUpdate",value:function(e,t){this.props.onChange&&t.matches!==this.state.matches&&this.props.onChange(this.state.matches)}},{key:"componentWillUnmount",value:function(){this.removeMql()}},{key:"render",value:function(){if("function"==typeof this.props.children)return this.props.children(this.state.matches);if(!1===this.state.matches)return null;var e=o(this.props,S),t=Object.keys(e).length>0,n=u.default.Children.count(this.props.children);return this.props.component||null==this.props.children||t&&n>1?u.default.createElement(this.props.component||"div",e,this.props.children):t?u.default.cloneElement(this.props.children,e):n?this.props.children:null}}]),t}(u.default.Component);M.displayName="MediaQuery",M.defaultProps={values:{}},t.default=M,t.toQuery=b.default},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(){return null}var i=n(7),o=n(1),a=n(8),s=function(){};s=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}},e.exports=function(e,t){function n(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function c(e){this.message=e,this.stack=""}function u(e){function n(n,a,u,l,h,d,f){if(l=l||g,d=d||u,f!==o){if(t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}if("undefined"!=typeof console){var m=l+":"+u;!r[m]&&i<3&&(s("You are manually calling a React.PropTypes validation function for the `"+d+"` prop on `"+l+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),r[m]=!0,i++)}}return null==a[u]?n?new c(null===a[u]?"The "+h+" `"+d+"` is marked as required in `"+l+"`, but its value is `null`.":"The "+h+" `"+d+"` is marked as required in `"+l+"`, but its value is `undefined`."):null:e(a,u,l,h,d)}var r={},i=0,a=n.bind(null,!1);return a.isRequired=n.bind(null,!0),a}function l(e){return u(function(t,n,r,i,o,a){var s=t[n];return d(s)!==e?new c("Invalid "+i+" `"+o+"` of type `"+f(s)+"` supplied to `"+r+"`, expected `"+e+"`."):null})}function h(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(h);if(null===t||e(t))return!0;var n=function(e){var t=e&&(m&&e[m]||e[v]);if("function"==typeof t)return t}(t);if(!n)return!1;var r,i=n.call(t);if(n!==t.entries){for(;!(r=i.next()).done;)if(!h(r.value))return!1}else for(;!(r=i.next()).done;){var o=r.value;if(o&&!h(o[1]))return!1}return!0;default:return!1}}function d(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}(t,e)?"symbol":t}function f(e){if(void 0===e||null===e)return""+e;var t=d(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function p(e){var t=f(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}var m="function"==typeof Symbol&&Symbol.iterator,v="@@iterator",g="<<anonymous>>",y={array:l("array"),bool:l("boolean"),func:l("function"),number:l("number"),object:l("object"),string:l("string"),symbol:l("symbol"),any:u(r),arrayOf:function(e){return u(function(t,n,r,i,a){if("function"!=typeof e)return new c("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s))return new c("Invalid "+i+" `"+a+"` of type `"+d(s)+"` supplied to `"+r+"`, expected an array.");for(var u=0;u<s.length;u++){var l=e(s,u,r,i,a+"["+u+"]",o);if(l instanceof Error)return l}return null})},element:u(function(t,n,r,i,o){var a=t[n];return e(a)?null:new c("Invalid "+i+" `"+o+"` of type `"+d(a)+"` supplied to `"+r+"`, expected a single ReactElement.")}),instanceOf:function(e){return u(function(t,n,r,i,o){if(!(t[n]instanceof e)){var a=e.name||g;return new c("Invalid "+i+" `"+o+"` of type `"+function(e){return e.constructor&&e.constructor.name?e.constructor.name:g}(t[n])+"` supplied to `"+r+"`, expected instance of `"+a+"`.")}return null})},node:u(function(e,t,n,r,i){return h(e[t])?null:new c("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.")}),objectOf:function(e){return u(function(t,n,r,i,a){if("function"!=typeof e)return new c("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=t[n],u=d(s);if("object"!==u)return new c("Invalid "+i+" `"+a+"` of type `"+u+"` supplied to `"+r+"`, expected an object.");for(var l in s)if(s.hasOwnProperty(l)){var h=e(s,l,r,i,a+"."+l,o);if(h instanceof Error)return h}return null})},oneOf:function(e){return Array.isArray(e)?u(function(t,r,i,o,a){for(var s=t[r],u=0;u<e.length;u++)if(n(s,e[u]))return null;return new c("Invalid "+o+" `"+a+"` of value `"+s+"` supplied to `"+i+"`, expected one of "+JSON.stringify(e)+".")}):(s("Invalid argument supplied to oneOf, expected an instance of array."),r)},oneOfType:function(e){if(!Array.isArray(e))return s("Invalid argument supplied to oneOfType, expected an instance of array."),r;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return s("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+p(n)+" at index "+t+"."),r}return u(function(t,n,r,i,a){for(var s=0;s<e.length;s++)if(null==(0,e[s])(t,n,r,i,a,o))return null;return new c("Invalid "+i+" `"+a+"` supplied to `"+r+"`.")})},shape:function(e){return u(function(t,n,r,i,a){var s=t[n],u=d(s);if("object"!==u)return new c("Invalid "+i+" `"+a+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");for(var l in e){var h=e[l];if(h){var f=h(s,l,r,i,a+"."+l,o);if(f)return f}}return null})},exact:function(e){return u(function(t,n,r,a,s){var u=t[n],l=d(u);if("object"!==l)return new c("Invalid "+a+" `"+s+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");var h=i({},t[n],e);for(var f in h){var p=e[f];if(!p)return new c("Invalid "+a+" `"+s+"` key `"+f+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var m=p(u,f,r,a,s+"."+f,o);if(m)return m}return null})}};return c.prototype=Error.prototype,y.checkPropTypes=a,y.PropTypes=y,y}},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))i.call(n,u)&&(s[u]=n[u]);if(r){a=r(n);for(var l=0;l<a.length;l++)o.call(n,a[l])&&(s[a[l]]=n[a[l]])}}return s}},function(e,t,n){"use strict";var r=function(){},i=n(1),o={};r=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}},e.exports=function(e,t,n,a,s){for(var c in e)if(e.hasOwnProperty(c)){var u;try{if("function"!=typeof e[c]){var l=Error((a||"React class")+": "+n+" type `"+c+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[c]+"`.");throw l.name="Invariant Violation",l}u=e[c](t,c,a,n,null,i)}catch(e){u=e}if(!u||u instanceof Error||r((a||"React class")+": type specification of "+n+" `"+c+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof u+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),u instanceof Error&&!(u.message in o)){o[u.message]=!0;var h=s?s():"";r("Failed "+n+" type: "+u.message+(null!=h?h:""))}}}},function(e,t,n){"use strict";var r=n(10).match,i="undefined"!=typeof window?window.matchMedia:null;e.exports=function(e,t,n){return new function(e,t,n){function o(e){a.matches=e.matches,a.media=e.media}var a=this;if(i&&!n){var s=i.call(window,e);this.matches=s.matches,this.media=s.media,s.addListener(o)}else this.matches=r(e,t),this.media=e;this.addListener=function(e){s&&s.addListener(e)},this.removeListener=function(e){s&&s.removeListener(e)},this.dispose=function(){s&&s.removeListener(o)}}(e,t,n)}},function(e,t,n){"use strict";function r(e){return e.split(",").map(function(e){var t=(e=e.trim()).match(s),n=t[1],r=t[2],i=t[3]||"",o={};return o.inverse=!!n&&"not"===n.toLowerCase(),o.type=r?r.toLowerCase():"all",i=i.match(/\([^\)]+\)/g)||[],o.expressions=i.map(function(e){var t=e.match(c),n=t[1].toLowerCase().match(u);return{modifier:n[1],feature:n[2],value:t[2]}}),o})}function i(e){var t,n=Number(e);return n||(t=e.match(/^(\d+)\s*\/\s*(\d+)$/),n=t[1]/t[2]),n}function o(e){var t=parseFloat(e);switch(String(e).match(h)[1]){case"dpcm":return t/2.54;case"dppx":return 96*t;default:return t}}function a(e){var t=parseFloat(e);switch(String(e).match(l)[1]){case"em":case"rem":return 16*t;case"cm":return 96*t/2.54;case"mm":return 96*t/2.54/10;case"in":return 96*t;case"pt":return 72*t;case"pc":return 72*t/12;default:return t}}t.match=function(e,t){return r(e).some(function(e){var n=e.inverse,r="all"===e.type||t.type===e.type;if(r&&n||!r&&!n)return!1;var s=e.expressions.every(function(e){var n=e.feature,r=e.modifier,s=e.value,c=t[n];if(!c)return!1;switch(n){case"orientation":case"scan":return c.toLowerCase()===s.toLowerCase();case"width":case"height":case"device-width":case"device-height":s=a(s),c=a(c);break;case"resolution":s=o(s),c=o(c);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":s=i(s),c=i(c);break;case"grid":case"color":case"color-index":case"monochrome":s=parseInt(s,10)||1,c=parseInt(c,10)||0}switch(r){case"min":return c>=s;case"max":return c<=s;default:return c===s}});return s&&!n||!s&&n})},t.parse=r;var s=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,c=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,u=/^(?:(min|max)-)?(.+)/,l=/(em|rem|px|cm|mm|in|pt|pc)?$/,h=/(dpi|dpcm|dppx)?$/},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];return Object.keys(s.default.all).forEach(function(n){var r=e[n];null!=r&&t.push(function(e,t){var n=(0,o.default)(e);return"number"==typeof t&&(t+="px"),!0===t?e:!1===t?c(e):"("+n+": "+t+")"}(n,r))}),function(e){return e.join(" and ")}(t)};var i=n(2),o=r(i),a=n(3),s=r(a),c=function(e){return"not "+e};e.exports=t.default}])}(n("8af190b70a6bc55c6f1b"))},"2aec3e82eb0e43bbbba2":function(e,t,n){"use strict";t.__esModule=!0;var r=c(n("49a47d064cfbf2949ee5")),i=c(n("8af190b70a6bc55c6f1b")),o=c(n("8a2d1b95e05b6a321e74")),a=n("12ba4fef039ee145f0aa"),s=c(n("3ddbfa7ffbc97506f3e4"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=u(this,e.call.apply(e,[this].concat(o))),r.history=(0,a.createHashHistory)(r.props),u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){(0,r.default)(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},t.prototype.render=function(){return i.default.createElement(s.default,{history:this.history,children:this.props.children})},t}(i.default.Component);l.propTypes={basename:o.default.string,getUserConfirmation:o.default.func,hashType:o.default.oneOf(["hashbang","noslash","slash"]),children:o.default.node},t.default=l},"2aec7b6edb2a47e3521f":function(e,t,n){e.exports=function(){"use strict";return function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,o,a,s,c,u,l,h){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===u)return r+"/*|*/";break;case 3:switch(u){case 102:case 112:return e(i[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}}()},"2b4a4ef7612f955b8d3d":function(e,t,n){n("02fcd2201285b358795d")("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},"2c09af3fb5c4ba3698b3":function(e,t,n){(function(t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"==typeof e,l=t.regeneratorRuntime;if(l)u&&(e.exports=l);else{(l=t.regeneratorRuntime=u?e.exports:{}).wrap=x;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",m={},v={};v[a]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(O([])));y&&y!==r&&i.call(y,a)&&(v=y);var b=M.prototype=_.prototype=Object.create(v);S.prototype=b.constructor=M,M.constructor=S,M[c]=S.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===S||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,M):(e.__proto__=M,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(b),e},l.awrap=function(e){return{__await:e}},T(A.prototype),A.prototype[s]=function(){return this},l.AsyncIterator=A,l.async=function(e,t,n,r){var i=new A(x(e,t,n,r));return l.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},T(b),b[c]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=O,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function x(e,t,n,r){var i=t&&t.prototype instanceof _?t:_,o=Object.create(i.prototype),a=new L(r||[]);return o._invoke=function(e,t,n){var r=h;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return N()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=w(e,t,n);if("normal"===c.type){if(r=n.done?p:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function w(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function _(){}function S(){}function M(){}function T(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function A(e){function n(t,r,o,a){var s=w(e[t],e,r);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then(function(e){n("next",e,o,a)},function(e){n("throw",e,o,a)}):Promise.resolve(u).then(function(e){c.value=e,o(c)},a)}a(s.arg)}var r;"object"==typeof t.process&&t.process.domain&&(n=t.process.domain.bind(n)),this._invoke=function(e,t){function i(){return new Promise(function(r,i){n(e,t,r,i)})}return r=r?r.then(i,i):i()}}function E(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,E(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=w(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,m;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function O(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:n,done:!0}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,n("698d75b157f24ae829cc"))},"2c407c4438ef2794ef23":function(e,t,n){var r=n("a459ab805827640a27e8");e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},"2c54555c94aa6b1cce4a":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("98e9f3c3a8d686f8cc0f"),o=n("5abe37fc05566b7b9eff");r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},"2d13d93c336705cd8ff9":function(e,t,n){var r=n("1139de1233fd67f45bd7"),i=n("5925dad3c5243ffee3db"),o=n("5f25c015bbbf9d42c661"),a=n("88db22626e6c88b175cf"),s=n("0e717e1f47872428608d"),c=function(e,t,n){var u,l,h,d,f=e&c.F,p=e&c.G,m=e&c.S,v=e&c.P,g=e&c.B,y=p?r:m?r[t]||(r[t]={}):(r[t]||{}).prototype,b=p?i:i[t]||(i[t]={}),x=b.prototype||(b.prototype={});for(u in p&&(n=t),n)h=((l=!f&&y&&void 0!==y[u])?y:n)[u],d=g&&l?s(h,r):v&&"function"==typeof h?s(Function.call,h):h,y&&a(y,u,h,e&c.U),b[u]!=h&&o(b,u,d),v&&x[u]!=h&&(x[u]=h)};r.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},"2d6ca68360dece574932":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},"2d8c8264a871cfe44bc2":function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=c(n("8af190b70a6bc55c6f1b")),o=c(n("8a2d1b95e05b6a321e74")),a=c(n("5ef9de3df8d92ea0e41c")),s=c(n("35440e3d539ea8d61c51"));function c(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=function(t){var n=t.wrappedComponentRef,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["wrappedComponentRef"]);return i.default.createElement(s.default,{children:function(t){return i.default.createElement(e,r({},o,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:o.default.func},(0,a.default)(t,e)}},"2dc5be6768ca6c7f0d4d":function(e,t,n){var r=n("1f3157d073736826d4fa"),i=n("ca19e32ab6ee3b3692aa");e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length!");return n}},"2e1d5004a01df935693d":function(e,t,n){"use strict";var r=n("ec9de96ce27c00ac79c5"),i=n("277cfc1331526160cbd4"),o=n("68a9e58f394bd4c836d2"),a=n("83406643bfb209d249f4"),s=n("6d8be12a50447a7c97b1"),c=n("d5aa26791992324990d2");e.exports=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,u="@@iterator";var l="<<anonymous>>",h={array:m("array"),bool:m("boolean"),func:m("function"),number:m("number"),object:m("object"),string:m("string"),symbol:m("symbol"),any:p(r.thatReturnsNull),arrayOf:function(e){return p(function(t,n,r,i,o){if("function"!=typeof e)return new f("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var a=t[n];if(!Array.isArray(a)){var c=g(a);return new f("Invalid "+i+" `"+o+"` of type `"+c+"` supplied to `"+r+"`, expected an array.")}for(var u=0;u<a.length;u++){var l=e(a,u,r,i,o+"["+u+"]",s);if(l instanceof Error)return l}return null})},element:function(){return p(function(t,n,r,i,o){var a=t[n];if(!e(a)){var s=g(a);return new f("Invalid "+i+" `"+o+"` of type `"+s+"` supplied to `"+r+"`, expected a single ReactElement.")}return null})}(),instanceOf:function(e){return p(function(t,n,r,i,o){if(!(t[n]instanceof e)){var a=e.name||l,s=function(e){if(!e.constructor||!e.constructor.name)return l;return e.constructor.name}(t[n]);return new f("Invalid "+i+" `"+o+"` of type `"+s+"` supplied to `"+r+"`, expected instance of `"+a+"`.")}return null})},node:function(){return p(function(e,t,n,r,i){if(!v(e[t]))return new f("Invalid "+r+" `"+i+"` supplied to `"+n+"`, expected a ReactNode.");return null})}(),objectOf:function(e){return p(function(t,n,r,i,o){if("function"!=typeof e)return new f("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var a=t[n],c=g(a);if("object"!==c)return new f("Invalid "+i+" `"+o+"` of type `"+c+"` supplied to `"+r+"`, expected an object.");for(var u in a)if(a.hasOwnProperty(u)){var l=e(a,u,r,i,o+"."+u,s);if(l instanceof Error)return l}return null})},oneOf:function(e){if(!Array.isArray(e))return o(!1,"Invalid argument supplied to oneOf, expected an instance of array."),r.thatReturnsNull;return p(function(t,n,r,i,o){for(var a=t[n],s=0;s<e.length;s++)if(d(a,e[s]))return null;var c=JSON.stringify(e);return new f("Invalid "+i+" `"+o+"` of value `"+a+"` supplied to `"+r+"`, expected one of "+c+".")})},oneOfType:function(e){if(!Array.isArray(e))return o(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),r.thatReturnsNull;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return o(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",b(n),t),r.thatReturnsNull}return p(function(t,n,r,i,o){for(var a=0;a<e.length;a++){var c=e[a];if(null==c(t,n,r,i,o,s))return null}return new f("Invalid "+i+" `"+o+"` supplied to `"+r+"`.")})},shape:function(e){return p(function(t,n,r,i,o){var a=t[n],c=g(a);if("object"!==c)return new f("Invalid "+i+" `"+o+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");for(var u in e){var l=e[u];if(l){var h=l(a,u,r,i,o+"."+u,s);if(h)return h}}return null})},exact:function(e){return p(function(t,n,r,i,o){var c=t[n],u=g(c);if("object"!==u)return new f("Invalid "+i+" `"+o+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.");var l=a({},t[n],e);for(var h in l){var d=e[h];if(!d)return new f("Invalid "+i+" `"+o+"` key `"+h+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var p=d(c,h,r,i,o+"."+h,s);if(p)return p}return null})}};function d(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function f(e){this.message=e,this.stack=""}function p(e){var n={},r=0;function a(a,c,u,h,d,p,m){if(h=h||l,p=p||u,m!==s)if(t)i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("undefined"!=typeof console){var v=h+":"+u;!n[v]&&r<3&&(o(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",p,h),n[v]=!0,r++)}return null==c[u]?a?null===c[u]?new f("The "+d+" `"+p+"` is marked as required in `"+h+"`, but its value is `null`."):new f("The "+d+" `"+p+"` is marked as required in `"+h+"`, but its value is `undefined`."):null:e(c,u,h,d,p)}var c=a.bind(null,!1);return c.isRequired=a.bind(null,!0),c}function m(e){return p(function(t,n,r,i,o,a){var s=t[n];return g(s)!==e?new f("Invalid "+i+" `"+o+"` of type `"+y(s)+"` supplied to `"+r+"`, expected `"+e+"`."):null})}function v(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(v);if(null===t||e(t))return!0;var r=function(e){var t=e&&(n&&e[n]||e[u]);if("function"==typeof t)return t}(t);if(!r)return!1;var i,o=r.call(t);if(r!==t.entries){for(;!(i=o.next()).done;)if(!v(i.value))return!1}else for(;!(i=o.next()).done;){var a=i.value;if(a&&!v(a[1]))return!1}return!0;default:return!1}}function g(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}(t,e)?"symbol":t}function y(e){if(void 0===e||null===e)return""+e;var t=g(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function b(e){var t=y(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return f.prototype=Error.prototype,h.checkPropTypes=c,h.PropTypes=h,h}},"2e20dfefd16154e6ed7b":function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.routerReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,a=t.payload;if(n===i)return r({},e,{location:a});return e};var i=t.LOCATION_CHANGE="@@router/LOCATION_CHANGE",o={location:null}},"2ecd99f9ea85b44ffe1d":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},"2f2c658b8d03e5165a06":function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("58a762c5dd9e5f9d6ad3"));t.default=r.default},"2fea013a9d0e76560f8b":function(e,t,n){"use strict";n("03ba1ede2f4706d1e7f7")("anchor",function(e){return function(t){return e(this,"a","name",t)}})},"3009383f3d0ad6342c19":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Math",{umulh:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r,a=n>>>16,s=r>>>16,c=(a*o>>>0)+(i*o>>>16);return a*s+(c>>>16)+((i*s>>>0)+(65535&c)>>>16)}})},"307014e72ed12da69e15":function(e,t,n){"use strict";var r=n("a5e6f0092ff0290e0bcf"),i=n("dabaabbe8ba08d59975f"),o=n("224ae09e536c09e69a0a"),a=n("efae14a3f8cd9a616256");e.exports=n("429cfc8e3ed333e40618")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},"30d14b3a3295666f3aba":function(e,t){function n(){return"serviceWorker"in navigator&&("https:"===window.location.protocol||"localhost"===window.location.hostname||0===window.location.hostname.indexOf("127."))}t.install=function(e){e||(e={}),n()&&navigator.serviceWorker.register("sw.js",{})},t.applyUpdate=function(e,t){},t.update=function(){n()&&navigator.serviceWorker.getRegistration().then(function(e){if(e)return e.update()})}},"3179bff1ebe47c49d3eb":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("1139de1233fd67f45bd7"),o=n("5925dad3c5243ffee3db"),a=n("00c22f5845a5f3d8fe8c")(),s=n("621a65702ee1a566fd32")("observable"),c=n("4d073e2fededcdd3f3d3"),u=n("79c91dcd8cd554c59c7b"),l=n("fd8b6034a9a06242cc87"),h=n("503a0df91bcab33c39b8"),d=n("5f25c015bbbf9d42c661"),f=n("4133d6461867e9751fc3"),p=f.RETURN,m=function(e){return null==e?void 0:c(e)},v=function(e){var t=e._c;t&&(e._c=void 0,t())},g=function(e){return void 0===e._o},y=function(e){g(e)||(e._o=void 0,v(e))},b=function(e,t){u(e),this._c=void 0,this._o=e,e=new x(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:c(n),this._c=n)}catch(t){return void e.error(t)}g(this)&&v(this)};b.prototype=h({},{unsubscribe:function(){y(this)}});var x=function(e){this._s=e};x.prototype=h({},{next:function(e){var t=this._s;if(!g(t)){var n=t._o;try{var r=m(n.next);if(r)return r.call(n,e)}catch(e){try{y(t)}finally{throw e}}}},error:function(e){var t=this._s;if(g(t))throw e;var n=t._o;t._o=void 0;try{var r=m(n.error);if(!r)throw e;e=r.call(n,e)}catch(e){try{v(t)}finally{throw e}}return v(t),e},complete:function(e){var t=this._s;if(!g(t)){var n=t._o;t._o=void 0;try{var r=m(n.complete);e=r?r.call(n,e):void 0}catch(e){try{v(t)}finally{throw e}}return v(t),e}}});var w=function(e){l(this,w,"Observable","_f")._f=c(e)};h(w.prototype,{subscribe:function(e){return new b(e,this._f)},forEach:function(e){var t=this;return new(o.Promise||i.Promise)(function(n,r){c(e);var i=t.subscribe({next:function(t){try{return e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:n})})}}),h(w,{from:function(e){var t="function"==typeof this?this:w,n=m(u(e)[s]);if(n){var r=u(n.call(e));return r.constructor===t?r:new t(function(e){return r.subscribe(e)})}return new t(function(t){var n=!1;return a(function(){if(!n){try{if(f(e,!1,function(e){if(t.next(e),n)return p})===p)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,n=new Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:w)(function(e){var t=!1;return a(function(){if(!t){for(var r=0;r<n.length;++r)if(e.next(n[r]),t)return;e.complete()}}),function(){t=!0}})}}),d(w.prototype,s,function(){return this}),r(r.G,{Observable:w}),n("89a21af31babcdc56725")("Observable")},"318358f29560c8862a62":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Math",{sign:n("edb183dfe43ad4a21ef0")})},"31acd5ae212d901071a3":function(e,t,n){"use strict";var r=n("79c91dcd8cd554c59c7b"),i=n("4ef7a75a1d1957a7c5c0");e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return i(r(this),"number"!=e)}},"32b716d95af2fd3c5c23":function(e,t,n){var r=n("0116c75136b233002fb9"),i=n("621a65702ee1a566fd32")("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},"32c85c5c621c55a6b3ab":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S+r.F,"Object",{assign:n("94fb07840c0fda6ca6a4")})},"336cae077811264f3d1e":function(e,t,n){var r=n("145c4f2bdc487b2578df"),i=n("efae14a3f8cd9a616256"),o=n("0091fa8d74c45e0dd589").f;e.exports=function(e){return function(t){for(var n,a=i(t),s=r(a),c=s.length,u=0,l=[];c>u;)o.call(a,n=s[u++])&&l.push(e?[n,a[n]]:a[n]);return l}}},"33ac025fdf0477f401a7":function(e,t,n){"use strict";t.__esModule=!0;t.addLeadingSlash=function(e){return"/"===e.charAt(0)?e:"/"+e},t.stripLeadingSlash=function(e){return"/"===e.charAt(0)?e.substr(1):e};var r=t.hasBasename=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)};t.stripBasename=function(e,t){return r(e,t)?e.substr(t.length):e},t.stripTrailingSlash=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},t.parsePath=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}},t.createPath=function(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}},"33e73011281ee8023d77":function(e,t,n){var r=n("67042e57ad02a5947bc9"),i=n("4b93c5a7bb60dd6ab0f4"),o="[object Arguments]";e.exports=function(e){return i(e)&&r(e)==o}},"340dbda6fe6f17098a91":function(e,t,n){"use strict";var r=n("770f76c876afc046e4e0")(!0);n("429cfc8e3ed333e40618")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},"3430f3e283af0cf06931":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("61fcea04092a9580d371").f,o=n("79c91dcd8cd554c59c7b");r(r.S,"Reflect",{deleteProperty:function(e,t){var n=i(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},"3478ed78d76c28060dce":function(e,t,n){var r=n("98e5f258a85d7fd22ef8"),i=n("ab33744f6df37edcb9b2"),o=n("c9327538105d995811b8");e.exports=function(e){return o(e)?r(e):i(e)}},"34c27cd73a2e6a6b0450":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},"35440e3d539ea8d61c51":function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=u(n("49a47d064cfbf2949ee5")),o=u(n("6a4f9c383785f9168266")),a=u(n("8af190b70a6bc55c6f1b")),s=u(n("8a2d1b95e05b6a321e74")),c=u(n("56f612169e8c0cac4c0c"));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){return 0===a.default.Children.count(e)},d=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=l(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props,r.context.router)},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:r({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,r=e.location,i=e.path,a=e.strict,s=e.exact,u=e.sensitive;if(n)return n;(0,o.default)(t,"You should not use <Route> or withRouter() outside a <Router>");var l=t.route,h=(r||l.location).pathname;return(0,c.default)(h,{path:i,strict:a,exact:s,sensitive:u},l.match)},t.prototype.componentWillMount=function(){(0,i.default)(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),(0,i.default)(!(this.props.component&&this.props.children&&!h(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),(0,i.default)(!(this.props.render&&this.props.children&&!h(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){(0,i.default)(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),(0,i.default)(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,r=t.component,i=t.render,o=this.context.router,s=o.history,c=o.route,u=o.staticContext,l={match:e,location:this.props.location||c.location,history:s,staticContext:u};return r?e?a.default.createElement(r,l):null:i?e?i(l):null:"function"==typeof n?n(l):n&&!h(n)?a.default.Children.only(n):null},t}(a.default.Component);d.propTypes={computedMatch:s.default.object,path:s.default.string,exact:s.default.bool,strict:s.default.bool,sensitive:s.default.bool,component:s.default.func,render:s.default.func,children:s.default.oneOfType([s.default.func,s.default.node]),location:s.default.object},d.contextTypes={router:s.default.shape({history:s.default.object.isRequired,route:s.default.object.isRequired,staticContext:s.default.object})},d.childContextTypes={router:s.default.object.isRequired},t.default=d},"36a2a8f008a24a4063b9":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateNextState=t.getUnexpectedInvocationParameterMessage=t.getStateName=void 0;var r=a(n("a36c797149bbcb96646f")),i=a(n("f6c1259b6a257e147998")),o=a(n("9130a6b385cb6030d86a"));function a(e){return e&&e.__esModule?e:{default:e}}t.getStateName=r.default,t.getUnexpectedInvocationParameterMessage=i.default,t.validateNextState=o.default},"36fb70620452ffd2d407":function(e,t,n){n("02fcd2201285b358795d")("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},"380c0734c088ca78ccda":function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"392615e2ae5e100214bd":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.P+r.R,"Set",{toJSON:n("b319470fdda47fb5d046")("Set")})},"3932316ffef991f5d157":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("ecd0e0fb36455021f082")(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("a5e6f0092ff0290e0bcf")("find")},"397198bb1217376bf441":function(e,t,n){"use strict";var r=/([A-Z])/g;e.exports=function(e){return e.replace(r,"-$1").toLowerCase()}},"39dac2a92593ee9501cd":function(e,t,n){var r=n("1582553a0f2276f66f2f"),i=n("7ad2c0eb9a8edcc472a4");e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(e))}},"39dc0152a90b3f79e9c4":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},"39e786b6f73d0c2dc9e4":function(e,t,n){var r=n("a459ab805827640a27e8"),i=n("87f7b2a2f3e179b5c40a").onFreeze;n("f34797c0b42452934317")("preventExtensions",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},"3a6600337fc4dae8f6f1":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("d394d0a4c1838202489d"),o=n("4ef7a75a1d1957a7c5c0"),a=n("12323e1413cbffdabe02"),s=n("61fcea04092a9580d371").f;n("5975c7ea3ecd56e534e3")&&r(r.P+n("615b8c1bc8c3f66221bc"),"Object",{__lookupGetter__:function(e){var t,n=i(this),r=o(e,!0);do{if(t=s(n,r))return t.get}while(n=a(n))}})},"3bd50fa414ae910eb455":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Number",{isInteger:n("f5ddf41194f6969220b2")})},"3ca1626832512beb31ab":function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("56f612169e8c0cac4c0c"));t.default=r.default},"3cf3ac9966b923e35829":function(e,t,n){var r=n("edb183dfe43ad4a21ef0"),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),c=i(2,-126);e.exports=Math.fround||function(e){var t,n,i=Math.abs(e),u=r(e);return i<c?u*function(e){return e+1/o-1/o}(i/c/a)*c*a:(n=(t=(1+a/o)*i)-(t-i))>s||n!=n?u*(1/0):u*n}},"3d514c6d979a6ce94521":function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.defaultMergeProps=o,t.wrapMergePropsFunc=a,t.whenMergePropsIsFunction=s,t.whenMergePropsIsOmitted=c;var i=function(e){return e&&e.__esModule?e:{default:e}}(n("b452ab1ee9229ca9f134"));function o(e,t,n){return r({},n,e,t)}function a(e){return function(t,n){var r=n.displayName,o=n.pure,a=n.areMergedPropsEqual,s=!1,c=void 0;return function(t,n,u){var l=e(t,n,u);return s?o&&a(l,c)||(c=l):(s=!0,c=l,(0,i.default)(c,r,"mergeProps")),c}}}function s(e){return"function"==typeof e?a(e):void 0}function c(e){return e?void 0:function(){return o}}t.default=[s,c]},"3dd7e3cb81b24cbd63d6":function(e,t,n){"use strict";var r=n("8f648b1026e01323935b"),i=n("a459ab805827640a27e8"),o=n("ca19e32ab6ee3b3692aa"),a=n("0e717e1f47872428608d"),s=n("621a65702ee1a566fd32")("isConcatSpreadable");e.exports=function e(t,n,c,u,l,h,d,f){for(var p,m,v=l,g=0,y=!!d&&a(d,f,3);g<u;){if(g in c){if(p=y?y(c[g],g,n):c[g],m=!1,i(p)&&(m=void 0!==(m=p[s])?!!m:r(p)),m&&h>0)v=e(t,n,p,o(p.length),v,h-1)-1;else{if(v>=9007199254740991)throw TypeError();t[v]=p}v++}g++}return v}},"3ddbfa7ffbc97506f3e4":function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("07a2173bac8ab93c3080"));t.default=r.default},"3f2012daa60f226e86ec":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("8de492c765fbfb624515");r(r.S+r.F*n("7a7739dd8a198a2cfcb5")(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)i(n,e,arguments[e++]);return n.length=t,n}})},"3fb509045374147eb7e3":function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=l(n("412479c5138fb85aa19f")),o=l(n("6a4f9c383785f9168266")),a=n("92274ddfec80152892bc"),s=n("33ac025fdf0477f401a7"),c=l(n("ab8261c9b33ea00e4f82")),u=n("4a0368fb5bf578c56890");function l(e){return e&&e.__esModule?e:{default:e}}var h={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+(0,s.stripLeadingSlash)(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:s.stripLeadingSlash,decodePath:s.addLeadingSlash},slash:{encodePath:s.addLeadingSlash,decodePath:s.addLeadingSlash}},d=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},f=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(u.canUseDOM,"Hash history needs a DOM");var t=window.history,n=(0,u.supportsGoWithoutReloadUsingHash)(),l=e.getUserConfirmation,p=void 0===l?u.getConfirmation:l,m=e.hashType,v=void 0===m?"slash":m,g=e.basename?(0,s.stripTrailingSlash)((0,s.addLeadingSlash)(e.basename)):"",y=h[v],b=y.encodePath,x=y.decodePath,w=function(){var e=x(d());return(0,i.default)(!g||(0,s.hasBasename)(e,g),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+g+'".'),g&&(e=(0,s.stripBasename)(e,g)),(0,a.createLocation)(e)},_=(0,c.default)(),S=function(e){r(k,e),k.length=t.length,_.notifyListeners(k.location,k.action)},M=!1,T=null,A=function(){var e=d(),t=b(e);if(e!==t)f(t);else{var n=w(),r=k.location;if(!M&&(0,a.locationsAreEqual)(r,n))return;if(T===(0,s.createPath)(n))return;T=null,E(n)}},E=function(e){M?(M=!1,S()):_.confirmTransitionTo(e,"POP",p,function(t){t?S({action:"POP",location:e}):C(e)})},C=function(e){var t=k.location,n=N.lastIndexOf((0,s.createPath)(t));-1===n&&(n=0);var r=N.lastIndexOf((0,s.createPath)(e));-1===r&&(r=0);var i=n-r;i&&(M=!0,R(i))},P=d(),L=b(P);P!==L&&f(L);var O=w(),N=[(0,s.createPath)(O)],R=function(e){(0,i.default)(n,"Hash history go(n) causes a full page reload in this browser"),t.go(e)},I=0,D=function(e){1===(I+=e)?(0,u.addEventListener)(window,"hashchange",A):0===I&&(0,u.removeEventListener)(window,"hashchange",A)},F=!1,k={length:t.length,action:"POP",location:O,createHref:function(e){return"#"+b(g+(0,s.createPath)(e))},push:function(e,t){(0,i.default)(void 0===t,"Hash history cannot push state; it is ignored");var n=(0,a.createLocation)(e,void 0,void 0,k.location);_.confirmTransitionTo(n,"PUSH",p,function(e){if(e){var t=(0,s.createPath)(n),r=b(g+t);if(d()!==r){T=t,function(e){window.location.hash=e}(r);var o=N.lastIndexOf((0,s.createPath)(k.location)),a=N.slice(0,-1===o?0:o+1);a.push(t),N=a,S({action:"PUSH",location:n})}else(0,i.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),S()}})},replace:function(e,t){(0,i.default)(void 0===t,"Hash history cannot replace state; it is ignored");var n=(0,a.createLocation)(e,void 0,void 0,k.location);_.confirmTransitionTo(n,"REPLACE",p,function(e){if(e){var t=(0,s.createPath)(n),r=b(g+t);d()!==r&&(T=t,f(r));var i=N.indexOf((0,s.createPath)(k.location));-1!==i&&(N[i]=t),S({action:"REPLACE",location:n})}})},go:R,goBack:function(){return R(-1)},goForward:function(){return R(1)},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=_.setPrompt(e);return F||(D(1),F=!0),function(){return F&&(F=!1,D(-1)),t()}},listen:function(e){var t=_.appendListener(e);return D(1),function(){D(-1),t()}}};return k}},"3fc8b4ca32b0aebd9ff3":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("ecd0e0fb36455021f082")(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("a5e6f0092ff0290e0bcf")(o)},"40b064d4eb439c0c1c2b":function(e,t,n){"use strict";var r=n("7a7739dd8a198a2cfcb5");e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},"412479c5138fb85aa19f":function(e,t,n){"use strict";var r=function(){};r=function(e,t,n){var r=arguments.length;n=new Array(r>2?r-2:0);for(var i=2;i<r;i++)n[i-2]=arguments[i];if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(t.length<10||/^[s\W]*$/.test(t))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+t);if(!e){var o=0,a="Warning: "+t.replace(/%s/g,function(){return n[o++]});"undefined"!=typeof console&&console.error(a);try{throw new Error(a)}catch(e){}}},e.exports=r},"413112319aa96af919d4":function(e,t,n){"use strict";var r=n("1a5381b6e12121a4e33d"),i=n("2c407c4438ef2794ef23");e.exports=n("0633550d227682cecd10")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},"4133d6461867e9751fc3":function(e,t,n){var r=n("0e717e1f47872428608d"),i=n("4357234160788ed77205"),o=n("71d3ec5bd65418e28ebc"),a=n("79c91dcd8cd554c59c7b"),s=n("ca19e32ab6ee3b3692aa"),c=n("f88518adc3004bf8d923"),u={},l={};(t=e.exports=function(e,t,n,h,d){var f,p,m,v,g=d?function(){return e}:c(e),y=r(n,h,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(f=s(e.length);f>b;b++)if((v=t?y(a(p=e[b])[0],p[1]):y(e[b]))===u||v===l)return v}else for(m=g.call(e);!(p=m.next()).done;)if((v=i(m,y,p.value,t))===u||v===l)return v}).BREAK=u,t.RETURN=l},"41d819f9275ef20244e7":function(e,t,n){"use strict";var r=n("1139de1233fd67f45bd7"),i=n("d34390b928ecadc11dc8"),o=n("5975c7ea3ecd56e534e3"),a=n("2d13d93c336705cd8ff9"),s=n("88db22626e6c88b175cf"),c=n("87f7b2a2f3e179b5c40a").KEY,u=n("7a7739dd8a198a2cfcb5"),l=n("43a62b7f9a94dda95bf8"),h=n("62828dc3ffa96c06b7c9"),d=n("273d2eedcd369c189e70"),f=n("621a65702ee1a566fd32"),p=n("42d2ac6d92467eceff72"),m=n("c68991e63a6e99ff2511"),v=n("a37430c2bf749b8b8f88"),g=n("8f648b1026e01323935b"),y=n("79c91dcd8cd554c59c7b"),b=n("a459ab805827640a27e8"),x=n("efae14a3f8cd9a616256"),w=n("4ef7a75a1d1957a7c5c0"),_=n("9d5592e83ab7f3d08974"),S=n("ef09ce044ac3210bc947"),M=n("92efe77f5aacb0dee3db"),T=n("61fcea04092a9580d371"),A=n("1b01d0e59d3af79760a0"),E=n("145c4f2bdc487b2578df"),C=T.f,P=A.f,L=M.f,O=r.Symbol,N=r.JSON,R=N&&N.stringify,I=f("_hidden"),D=f("toPrimitive"),F={}.propertyIsEnumerable,k=l("symbol-registry"),U=l("symbols"),B=l("op-symbols"),z=Object.prototype,j="function"==typeof O,V=r.QObject,G=!V||!V.prototype||!V.prototype.findChild,W=o&&u(function(){return 7!=S(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=C(z,t);r&&delete z[t],P(e,t,n),r&&e!==z&&P(z,t,r)}:P,H=function(e){var t=U[e]=S(O.prototype);return t._k=e,t},X=j&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},q=function(e,t,n){return e===z&&q(B,t,n),y(e),t=w(t,!0),y(n),i(U,t)?(n.enumerable?(i(e,I)&&e[I][t]&&(e[I][t]=!1),n=S(n,{enumerable:_(0,!1)})):(i(e,I)||P(e,I,_(1,{})),e[I][t]=!0),W(e,t,n)):P(e,t,n)},Y=function(e,t){y(e);for(var n,r=v(t=x(t)),i=0,o=r.length;o>i;)q(e,n=r[i++],t[n]);return e},J=function(e){var t=F.call(this,e=w(e,!0));return!(this===z&&i(U,e)&&!i(B,e))&&(!(t||!i(this,e)||!i(U,e)||i(this,I)&&this[I][e])||t)},Q=function(e,t){if(e=x(e),t=w(t,!0),e!==z||!i(U,t)||i(B,t)){var n=C(e,t);return!n||!i(U,t)||i(e,I)&&e[I][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=L(x(e)),r=[],o=0;n.length>o;)i(U,t=n[o++])||t==I||t==c||r.push(t);return r},K=function(e){for(var t,n=e===z,r=L(n?B:x(e)),o=[],a=0;r.length>a;)!i(U,t=r[a++])||n&&!i(z,t)||o.push(U[t]);return o};j||(s((O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===z&&t.call(B,n),i(this,I)&&i(this[I],e)&&(this[I][e]=!1),W(this,e,_(1,n))};return o&&G&&W(z,e,{configurable:!0,set:t}),H(e)}).prototype,"toString",function(){return this._k}),T.f=Q,A.f=q,n("a9e0e4b5ca884ed0dd59").f=M.f=Z,n("0091fa8d74c45e0dd589").f=J,n("f71a7c9d37f996326dd6").f=K,o&&!n("46a1a30d151cac60057c")&&s(z,"propertyIsEnumerable",J,!0),p.f=function(e){return H(f(e))}),a(a.G+a.W+a.F*!j,{Symbol:O});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;$.length>ee;)f($[ee++]);for(var te=E(f.store),ne=0;te.length>ne;)m(te[ne++]);a(a.S+a.F*!j,"Symbol",{for:function(e){return i(k,e+="")?k[e]:k[e]=O(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in k)if(k[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),a(a.S+a.F*!j,"Object",{create:function(e,t){return void 0===t?S(e):Y(S(e),t)},defineProperty:q,defineProperties:Y,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:K}),N&&a(a.S+a.F*(!j||u(function(){var e=O();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!X(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!X(t))return t}),r[1]=t,R.apply(N,r)}}),O.prototype[D]||n("5f25c015bbbf9d42c661")(O.prototype,D,O.prototype.valueOf),h(O,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},"41f6983f842d46fa6592":function(e,t,n){"use strict";var r=n("1139de1233fd67f45bd7"),i=n("5975c7ea3ecd56e534e3"),o=n("46a1a30d151cac60057c"),a=n("622bea1a0aa515bde59f"),s=n("5f25c015bbbf9d42c661"),c=n("503a0df91bcab33c39b8"),u=n("7a7739dd8a198a2cfcb5"),l=n("fd8b6034a9a06242cc87"),h=n("1f3157d073736826d4fa"),d=n("ca19e32ab6ee3b3692aa"),f=n("2dc5be6768ca6c7f0d4d"),p=n("a9e0e4b5ca884ed0dd59").f,m=n("1b01d0e59d3af79760a0").f,v=n("03192b087bb464f059c0"),g=n("62828dc3ffa96c06b7c9"),y="prototype",b="Wrong index!",x=r.ArrayBuffer,w=r.DataView,_=r.Math,S=r.RangeError,M=r.Infinity,T=x,A=_.abs,E=_.pow,C=_.floor,P=_.log,L=_.LN2,O=i?"_b":"buffer",N=i?"_l":"byteLength",R=i?"_o":"byteOffset";function I(e,t,n){var r,i,o,a=new Array(n),s=8*n-t-1,c=(1<<s)-1,u=c>>1,l=23===t?E(2,-24)-E(2,-77):0,h=0,d=e<0||0===e&&1/e<0?1:0;for((e=A(e))!=e||e===M?(i=e!=e?1:0,r=c):(r=C(P(e)/L),e*(o=E(2,-r))<1&&(r--,o*=2),(e+=r+u>=1?l/o:l*E(2,1-u))*o>=2&&(r++,o/=2),r+u>=c?(i=0,r=c):r+u>=1?(i=(e*o-1)*E(2,t),r+=u):(i=e*E(2,u-1)*E(2,t),r=0));t>=8;a[h++]=255&i,i/=256,t-=8);for(r=r<<t|i,s+=t;s>0;a[h++]=255&r,r/=256,s-=8);return a[--h]|=128*d,a}function D(e,t,n){var r,i=8*n-t-1,o=(1<<i)-1,a=o>>1,s=i-7,c=n-1,u=e[c--],l=127&u;for(u>>=7;s>0;l=256*l+e[c],c--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=t;s>0;r=256*r+e[c],c--,s-=8);if(0===l)l=1-a;else{if(l===o)return r?NaN:u?-M:M;r+=E(2,t),l-=a}return(u?-1:1)*r*E(2,l-t)}function F(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function k(e){return[255&e]}function U(e){return[255&e,e>>8&255]}function B(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function z(e){return I(e,52,8)}function j(e){return I(e,23,4)}function V(e,t,n){m(e[y],t,{get:function(){return this[n]}})}function G(e,t,n,r){var i=f(+n);if(i+t>e[N])throw S(b);var o=e[O]._b,a=i+e[R],s=o.slice(a,a+t);return r?s:s.reverse()}function W(e,t,n,r,i,o){var a=f(+n);if(a+t>e[N])throw S(b);for(var s=e[O]._b,c=a+e[R],u=r(+i),l=0;l<t;l++)s[c+l]=u[o?l:t-l-1]}if(a.ABV){if(!u(function(){x(1)})||!u(function(){new x(-1)})||u(function(){return new x,new x(1.5),new x(NaN),"ArrayBuffer"!=x.name})){for(var H,X=(x=function(e){return l(this,x),new T(f(e))})[y]=T[y],q=p(T),Y=0;q.length>Y;)(H=q[Y++])in x||s(x,H,T[H]);o||(X.constructor=x)}var J=new w(new x(2)),Q=w[y].setInt8;J.setInt8(0,2147483648),J.setInt8(1,2147483649),!J.getInt8(0)&&J.getInt8(1)||c(w[y],{setInt8:function(e,t){Q.call(this,e,t<<24>>24)},setUint8:function(e,t){Q.call(this,e,t<<24>>24)}},!0)}else x=function(e){l(this,x,"ArrayBuffer");var t=f(e);this._b=v.call(new Array(t),0),this[N]=t},w=function(e,t,n){l(this,w,"DataView"),l(e,x,"DataView");var r=e[N],i=h(t);if(i<0||i>r)throw S("Wrong offset!");if(i+(n=void 0===n?r-i:d(n))>r)throw S("Wrong length!");this[O]=e,this[R]=i,this[N]=n},i&&(V(x,"byteLength","_l"),V(w,"buffer","_b"),V(w,"byteLength","_l"),V(w,"byteOffset","_o")),c(w[y],{getInt8:function(e){return G(this,1,e)[0]<<24>>24},getUint8:function(e){return G(this,1,e)[0]},getInt16:function(e){var t=G(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=G(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return F(G(this,4,e,arguments[1]))},getUint32:function(e){return F(G(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return D(G(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return D(G(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){W(this,1,e,k,t)},setUint8:function(e,t){W(this,1,e,k,t)},setInt16:function(e,t){W(this,2,e,U,t,arguments[2])},setUint16:function(e,t){W(this,2,e,U,t,arguments[2])},setInt32:function(e,t){W(this,4,e,B,t,arguments[2])},setUint32:function(e,t){W(this,4,e,B,t,arguments[2])},setFloat32:function(e,t){W(this,4,e,j,t,arguments[2])},setFloat64:function(e,t){W(this,8,e,z,t,arguments[2])}});g(x,"ArrayBuffer"),g(w,"DataView"),s(w[y],a.VIEW,!0),t.ArrayBuffer=x,t.DataView=w},"4245b1933f7026101770":function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=l(n("8af190b70a6bc55c6f1b")),o=l(n("8a2d1b95e05b6a321e74")),a=l(n("49a47d064cfbf2949ee5")),s=l(n("6a4f9c383785f9168266")),c=n("12ba4fef039ee145f0aa"),u=l(n("d14c3129375a94963214"));function l(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){(0,s.default)(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=(0,c.createLocation)(e.to),n=(0,c.createLocation)(this.props.to);(0,c.locationsAreEqual)(t,n)?(0,a.default)(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"'):this.perform()},t.prototype.computeTo=function(e){var t=e.computedMatch,n=e.to;return t?"string"==typeof n?(0,u.default)(n,t.params):r({},n,{pathname:(0,u.default)(n.pathname,t.params)}):n},t.prototype.perform=function(){var e=this.context.router.history,t=this.props.push,n=this.computeTo(this.props);t?e.push(n):e.replace(n)},t.prototype.render=function(){return null},t}(i.default.Component);h.propTypes={computedMatch:o.default.object,push:o.default.bool,from:o.default.string,to:o.default.oneOfType([o.default.string,o.default.object]).isRequired},h.defaultProps={push:!1},h.contextTypes={router:o.default.shape({history:o.default.shape({push:o.default.func.isRequired,replace:o.default.func.isRequired}).isRequired,staticContext:o.default.object}).isRequired},t.default=h},"429cfc8e3ed333e40618":function(e,t,n){"use strict";var r=n("46a1a30d151cac60057c"),i=n("2d13d93c336705cd8ff9"),o=n("88db22626e6c88b175cf"),a=n("5f25c015bbbf9d42c661"),s=n("224ae09e536c09e69a0a"),c=n("5c5d334c57135891e397"),u=n("62828dc3ffa96c06b7c9"),l=n("12323e1413cbffdabe02"),h=n("621a65702ee1a566fd32")("iterator"),d=!([].keys&&"next"in[].keys()),f=function(){return this};e.exports=function(e,t,n,p,m,v,g){c(n,t,p);var y,b,x,w=function(e){if(!d&&e in T)return T[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},_=t+" Iterator",S="values"==m,M=!1,T=e.prototype,A=T[h]||T["@@iterator"]||m&&T[m],E=A||w(m),C=m?S?w("entries"):E:void 0,P="Array"==t&&T.entries||A;if(P&&(x=l(P.call(new e)))!==Object.prototype&&x.next&&(u(x,_,!0),r||"function"==typeof x[h]||a(x,h,f)),S&&A&&"values"!==A.name&&(M=!0,E=function(){return A.call(this)}),r&&!g||!d&&!M&&T[h]||a(T,h,E),s[t]=E,s[_]=f,m)if(y={values:S?E:w("values"),keys:v?E:w("keys"),entries:C},g)for(b in y)b in T||o(T,b,y[b]);else i(i.P+i.F*(d||M),t,y);return y}},"42d2ac6d92467eceff72":function(e,t,n){t.f=n("621a65702ee1a566fd32")},"42f5768b7d8d9a994222":function(e,t,n){n("7519864545a89c83682d")("split",2,function(e,t,r){"use strict";var i=n("1582553a0f2276f66f2f"),o=r,a=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var s=void 0===/()??/.exec("")[1];r=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!i(e))return o.call(n,e,t);var r,c,u,l,h,d=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,m=void 0===t?4294967295:t>>>0,v=new RegExp(e.source,f+"g");for(s||(r=new RegExp("^"+v.source+"$(?!\\s)",f));(c=v.exec(n))&&!((u=c.index+c[0].length)>p&&(d.push(n.slice(p,c.index)),!s&&c.length>1&&c[0].replace(r,function(){for(h=1;h<arguments.length-2;h++)void 0===arguments[h]&&(c[h]=void 0)}),c.length>1&&c.index<n.length&&a.apply(d,c.slice(1)),l=c[0].length,p=u,d.length>=m));)v.lastIndex===c.index&&v.lastIndex++;return p===n.length?!l&&v.test("")||d.push(""):d.push(n.slice(p)),d.length>m?d.slice(0,m):d}}else"0".split(void 0,0).length&&(r=function(e,t){return void 0===e&&0===t?[]:o.call(this,e,t)});return[function(n,i){var o=e(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},r]})},"4357234160788ed77205":function(e,t,n){var r=n("79c91dcd8cd554c59c7b");e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},"43a62b7f9a94dda95bf8":function(e,t,n){var r=n("5925dad3c5243ffee3db"),i=n("1139de1233fd67f45bd7"),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n("46a1a30d151cac60057c")?"pure":"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})},"43dd891ba6876544e540":function(e,t,n){var r=n("4be2c15021f717a728f0")(n("18caba858d9ea0f67284"),"WeakMap");e.exports=r},"444c26bc43eec64c837a":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("23d432718b3e8ce32362"),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}})},"454dda5a76e3e8fad966":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Math",{log1p:n("7fd90dee1f5cbd901d1c")})},"45c7f885186b325fe183":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("622bea1a0aa515bde59f"),o=n("41f6983f842d46fa6592"),a=n("79c91dcd8cd554c59c7b"),s=n("23d432718b3e8ce32362"),c=n("ca19e32ab6ee3b3692aa"),u=n("a459ab805827640a27e8"),l=n("1139de1233fd67f45bd7").ArrayBuffer,h=n("8b246eab22bc34690d38"),d=o.ArrayBuffer,f=o.DataView,p=i.ABV&&l.isView,m=d.prototype.slice,v=i.VIEW;r(r.G+r.W+r.F*(l!==d),{ArrayBuffer:d}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return p&&p(e)||u(e)&&v in e}}),r(r.P+r.U+r.F*n("7a7739dd8a198a2cfcb5")(function(){return!new d(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==m&&void 0===t)return m.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(h(this,d))(c(i-r)),u=new f(this),l=new f(o),p=0;r<i;)l.setUint8(p++,u.getUint8(r++));return o}}),n("89a21af31babcdc56725")("ArrayBuffer")},"46a1a30d151cac60057c":function(e,t){e.exports=!1},"47e9e16a3e339321eec5":function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},"481c1f0e850b0c8d0f7d":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("1e0f00d296712713afe6");r(r.P+r.F*!n("40b064d4eb439c0c1c2b")([].reduce,!0),"Array",{reduce:function(e){return i(this,e,arguments.length,arguments[1],!1)}})},"4824055ce03b0869d111":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.G+r.W+r.F*!n("622bea1a0aa515bde59f").ABV,{DataView:n("41f6983f842d46fa6592").DataView})},"4901eb5005bcc482eb97":function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("2d8c8264a871cfe44bc2"));t.default=r.default},"49112c95d93be1863904":function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=n("8af190b70a6bc55c6f1b"),c=n("8a2d1b95e05b6a321e74"),u=[],l=[];function h(e){var t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then(function(e){return n.loading=!1,n.loaded=e,e}).catch(function(e){throw n.loading=!1,n.error=e,e}),n}function d(e){var t={loading:!1,loaded:{},error:null},n=[];try{Object.keys(e).forEach(function(r){var i=h(e[r]);i.loading?t.loading=!0:(t.loaded[r]=i.loaded,t.error=i.error),n.push(i.promise),i.promise.then(function(e){t.loaded[r]=e}).catch(function(e){t.error=e})})}catch(e){t.error=e}return t.promise=Promise.all(n).then(function(e){return t.loading=!1,e}).catch(function(e){throw t.loading=!1,e}),t}function f(e,t){return s.createElement(function(e){return e&&e.__esModule?e.default:e}(e),t)}function p(e,t){var h,d;if(!t.loading)throw new Error("react-loadable requires a `loading` component");var p=Object.assign({loader:null,loading:null,delay:200,timeout:null,render:f,webpack:null,modules:null},t),m=null;function v(){return m||(m=e(p.loader)),m.promise}return u.push(v),"function"==typeof p.webpack&&l.push(function(){if(function(e){return"object"===r(n.m)&&e().every(function(e){return void 0!==e&&void 0!==n.m[e]})}(p.webpack))return v()}),d=h=function(t){function n(r){i(this,n);var a=o(this,t.call(this,r));return a.retry=function(){a.setState({error:null,loading:!0}),m=e(p.loader),a._loadModule()},v(),a.state={error:m.error,pastDelay:!1,timedOut:!1,loading:m.loading,loaded:m.loaded},a}return a(n,t),n.preload=function(){return v()},n.prototype.componentWillMount=function(){this._mounted=!0,this._loadModule()},n.prototype._loadModule=function(){var e=this;if(this.context.loadable&&Array.isArray(p.modules)&&p.modules.forEach(function(t){e.context.loadable.report(t)}),m.loading){"number"==typeof p.delay&&(0===p.delay?this.setState({pastDelay:!0}):this._delay=setTimeout(function(){e.setState({pastDelay:!0})},p.delay)),"number"==typeof p.timeout&&(this._timeout=setTimeout(function(){e.setState({timedOut:!0})},p.timeout));var t=function(){e._mounted&&(e.setState({error:m.error,loaded:m.loaded,loading:m.loading}),e._clearTimeouts())};m.promise.then(function(){t()}).catch(function(e){t()})}},n.prototype.componentWillUnmount=function(){this._mounted=!1,this._clearTimeouts()},n.prototype._clearTimeouts=function(){clearTimeout(this._delay),clearTimeout(this._timeout)},n.prototype.render=function(){return this.state.loading||this.state.error?s.createElement(p.loading,{isLoading:this.state.loading,pastDelay:this.state.pastDelay,timedOut:this.state.timedOut,error:this.state.error,retry:this.retry}):this.state.loaded?p.render(this.state.loaded,this.props):null},n}(s.Component),h.contextTypes={loadable:c.shape({report:c.func.isRequired})},d}function m(e){return p(h,e)}m.Map=function(e){if("function"!=typeof e.render)throw new Error("LoadableMap requires a `render(loaded, props)` function");return p(d,e)};var v=function(e){function t(){return i(this,t),o(this,e.apply(this,arguments))}return a(t,e),t.prototype.getChildContext=function(){return{loadable:{report:this.props.report}}},t.prototype.render=function(){return s.Children.only(this.props.children)},t}(s.Component);function g(e){for(var t=[];e.length;){var n=e.pop();t.push(n())}return Promise.all(t).then(function(){if(e.length)return g(e)})}v.propTypes={report:c.func.isRequired},v.childContextTypes={loadable:c.shape({report:c.func.isRequired}).isRequired},m.Capture=v,m.preloadAll=function(){return new Promise(function(e,t){g(u).then(e,t)})},m.preloadReady=function(){return new Promise(function(e,t){g(l).then(e,e)})},e.exports=m},"494d4966d2dbdf891514":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=Math.imul;r(r.S+r.F*n("7a7739dd8a198a2cfcb5")(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},"49555589e35fce2252cc":function(e,t,n){"use strict";function r(e){return"/"===e.charAt(0)}function i(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}t.__esModule=!0,t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],o=t&&t.split("/")||[],a=e&&r(e),s=t&&r(t),c=a||s;if(e&&r(e)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";var u=void 0;if(o.length){var l=o[o.length-1];u="."===l||".."===l||""===l}else u=!1;for(var h=0,d=o.length;d>=0;d--){var f=o[d];"."===f?i(o,d):".."===f?(i(o,d),h++):h&&(i(o,d),h--)}if(!c)for(;h--;h)o.unshift("..");!c||""===o[0]||o[0]&&r(o[0])||o.unshift("");var p=o.join("/");return u&&"/"!==p.substr(-1)&&(p+="/"),p},e.exports=t.default},"49737199b59f0ac62d15":function(e,t,n){"use strict";var r=n("1139de1233fd67f45bd7"),i=n("d34390b928ecadc11dc8"),o=n("0116c75136b233002fb9"),a=n("cf8d6afd09746a2b5bc3"),s=n("4ef7a75a1d1957a7c5c0"),c=n("7a7739dd8a198a2cfcb5"),u=n("a9e0e4b5ca884ed0dd59").f,l=n("61fcea04092a9580d371").f,h=n("1b01d0e59d3af79760a0").f,d=n("57e7a4ee5fd1ce9280ef").trim,f=r.Number,p=f,m=f.prototype,v="Number"==o(n("ef09ce044ac3210bc947")(m)),g="trim"in String.prototype,y=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){var n,r,i,o=(t=g?t.trim():d(t,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=t.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,c=t.slice(2),u=0,l=c.length;u<l;u++)if((a=c.charCodeAt(u))<48||a>i)return NaN;return parseInt(c,r)}}return+t};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof f&&(v?c(function(){m.valueOf.call(n)}):"Number"!=o(n))?a(new p(y(t)),n,f):y(t)};for(var b,x=n("5975c7ea3ecd56e534e3")?u(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;x.length>w;w++)i(p,b=x[w])&&!i(f,b)&&h(f,b,l(p,b));f.prototype=m,m.constructor=f,n("88db22626e6c88b175cf")(r,"Number",f)}},"49a47d064cfbf2949ee5":function(e,t,n){"use strict";var r=function(){};r=function(e,t,n){var r=arguments.length;n=new Array(r>2?r-2:0);for(var i=2;i<r;i++)n[i-2]=arguments[i];if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||function(e,t){var n=arguments.length;t=new Array(n>2?n-2:0);for(var r=2;r<n;r++)t[r-2]=arguments[r];var i=0,o="Warning: "+e.replace(/%s/g,function(){return t[i++]});"undefined"!=typeof console&&console.error(o);try{throw new Error(o)}catch(e){}}.apply(null,[t].concat(n))},e.exports=r},"4a0368fb5bf578c56890":function(e,t,n){"use strict";t.__esModule=!0;t.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),t.addEventListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},t.removeEventListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.getConfirmation=function(e,t){return t(window.confirm(e))},t.supportsHistory=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},t.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},t.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},t.isExtraneousPopstateEvent=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},"4b277a517db3f3e840ae":function(e,t,n){"use strict";var r=n("397198bb1217376bf441"),i=/^ms-/;e.exports=function(e){return r(e).replace(i,"-ms-")}},"4b6c3e2b96a7fdc95a33":function(e,t,n){"use strict";var r,i=n("ecd0e0fb36455021f082")(0),o=n("88db22626e6c88b175cf"),a=n("87f7b2a2f3e179b5c40a"),s=n("94fb07840c0fda6ca6a4"),c=n("ccf730c83e7100f675a4"),u=n("a459ab805827640a27e8"),l=n("7a7739dd8a198a2cfcb5"),h=n("2c407c4438ef2794ef23"),d=a.getWeak,f=Object.isExtensible,p=c.ufstore,m={},v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(e){if(u(e)){var t=d(e);return!0===t?p(h(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return c.def(h(this,"WeakMap"),e,t)}},y=e.exports=n("0633550d227682cecd10")("WeakMap",v,g,c,!0,!0);l(function(){return 7!=(new y).set((Object.freeze||Object)(m),7).get(m)})&&(s((r=c.getConstructor(v,"WeakMap")).prototype,g),a.NEED=!0,i(["delete","has","get","set"],function(e){var t=y.prototype,n=t[e];o(t,e,function(t,i){if(u(t)&&!f(t)){this._f||(this._f=new r);var o=this._f[e](t,i);return"set"==e?this:o}return n.call(this,t,i)})}))},"4b80994996621a6e63f3":function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(i(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!r.call(t,n[a])||!i(e[n[a]],t[n[a]]))return!1;return!0};var r=Object.prototype.hasOwnProperty;function i(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}},"4b93c5a7bb60dd6ab0f4":function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},"4be2c15021f717a728f0":function(e,t,n){var r=n("65955717fc58c97d7378"),i=n("dba25a6f599687a5b44e");e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},"4cc77e026250beeef142":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("efae14a3f8cd9a616256"),o=[].join;r(r.P+r.F*(n("a537d0accb907bf9d41f")!=Object||!n("40b064d4eb439c0c1c2b")(o)),"Array",{join:function(e){return o.call(i(this),void 0===e?",":e)}})},"4cd9a60f042223c9ba2c":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("0d694d86343010af9d4f");i&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},"4d073e2fededcdd3f3d3":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"4e2e9348dad8fe460c1d":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineReducers=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("eb3400b937b92a185016"));t.combineReducers=r.default},"4eb232e665ed4f2fa5b1":function(e,t,n){var r=n("a459ab805827640a27e8");n("f34797c0b42452934317")("isFrozen",function(e){return function(t){return!r(t)||!!e&&e(t)}})},"4ef7a75a1d1957a7c5c0":function(e,t,n){var r=n("a459ab805827640a27e8");e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"4faad91abd2171602dcc":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=180/Math.PI;r(r.S,"Math",{degrees:function(e){return e*i}})},"5024bbbb57e5994af657":function(e,t,n){(function(e,n,r){var i={};"undefined"!=typeof Window?i&&i instanceof Window?i=i:e&&e instanceof Window?i=e:GLOBAL&&GLOBAL instanceof Window?i=GLOBAL:console.warn("Unable to find classic window global variable declaration. Some dependencies that depending on global window variable could not work properly."):console.warn("It seems you are using this package in a non-browser environment. Some dependencies that depending on global window variable could not work properly."),Object.defineProperty(t,"__esModule",{value:!0}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){var t=arguments;if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=t[r];if(void 0!==i&&null!==i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n});var o={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*o.DEG2RAD},radToDeg:function(e){return e*o.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function a(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("Matrix4: the constructor no longer reads arguments. use .set() instead.")}function s(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function c(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function u(){}function l(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||l.DefaultOrder}function h(){this.mask=1}function d(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(a.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,c,u,l,h,d,f,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=c,v[6]=u,v[10]=l,v[14]=h,v[3]=d,v[7]=f,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new a).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new s;return function(t){var n=this.elements,r=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),c=Math.sin(r),u=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){var h=o*u,d=o*l,f=a*u,p=a*l;t[0]=s*u,t[4]=-s*l,t[8]=c,t[1]=d+f*c,t[5]=h-p*c,t[9]=-a*s,t[2]=p-h*c,t[6]=f+d*c,t[10]=o*s}else if("YXZ"===e.order){var m=s*u,v=s*l,g=c*u,y=c*l;t[0]=m+y*a,t[4]=g*a-v,t[8]=o*c,t[1]=o*l,t[5]=o*u,t[9]=-a,t[2]=v*a-g,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){m=s*u,v=s*l,g=c*u,y=c*l;t[0]=m-y*a,t[4]=-o*l,t[8]=g+v*a,t[1]=v+g*a,t[5]=o*u,t[9]=y-m*a,t[2]=-o*c,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){h=o*u,d=o*l,f=a*u,p=a*l;t[0]=s*u,t[4]=f*c-d,t[8]=h*c+p,t[1]=s*l,t[5]=p*c+h,t[9]=d*c-f,t[2]=-c,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var b=o*s,x=o*c,w=a*s,_=a*c;t[0]=s*u,t[4]=_-b*l,t[8]=w*l+x,t[1]=l,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=x*l+w,t[10]=b-_*l}else if("XZY"===e.order){b=o*s,x=o*c,w=a*s,_=a*c;t[0]=s*u,t[4]=-l,t[8]=c*u,t[1]=b*l+_,t[5]=o*u,t[9]=x*l-w,t[2]=w*l-x,t[6]=a*u,t[10]=_*l+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(){var e=new s(0,0,0),t=new s(1,1,1);return function(n){return this.compose(e,n,t)}}(),lookAt:function(){var e=new s,t=new s,n=new s;return function(r,i,o){var a=this.elements;return n.subVectors(r,i),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(o,n),0===e.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(o,n)),e.normalize(),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],c=n[12],u=n[1],l=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],x=n[15],w=r[0],_=r[4],S=r[8],M=r[12],T=r[1],A=r[5],E=r[9],C=r[13],P=r[2],L=r[6],O=r[10],N=r[14],R=r[3],I=r[7],D=r[11],F=r[15];return i[0]=o*w+a*T+s*P+c*R,i[4]=o*_+a*A+s*L+c*I,i[8]=o*S+a*E+s*O+c*D,i[12]=o*M+a*C+s*N+c*F,i[1]=u*w+l*T+h*P+d*R,i[5]=u*_+l*A+h*L+d*I,i[9]=u*S+l*E+h*O+d*D,i[13]=u*M+l*C+h*N+d*F,i[2]=f*w+p*T+m*P+v*R,i[6]=f*_+p*A+m*L+v*I,i[10]=f*S+p*E+m*O+v*D,i[14]=f*M+p*C+m*N+v*F,i[3]=g*w+y*T+b*P+x*R,i[7]=g*_+y*A+b*L+x*I,i[11]=g*S+y*E+b*O+x*D,i[15]=g*M+y*C+b*N+x*F,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new s;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],c=e[13],u=e[2],l=e[6],h=e[10],d=e[14];return e[3]*(+i*s*l-r*c*l-i*a*h+n*c*h+r*a*d-n*s*d)+e[7]*(+t*s*d-t*c*h+i*o*h-r*o*d+r*c*u-i*s*u)+e[11]*(+t*c*l-t*a*d-i*o*l+n*o*d+i*a*u-n*c*u)+e[15]*(-r*a*u-t*s*l+t*a*h+r*o*l-n*o*h+n*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],c=r[4],u=r[5],l=r[6],h=r[7],d=r[8],f=r[9],p=r[10],m=r[11],v=r[12],g=r[13],y=r[14],b=r[15],x=f*y*h-g*p*h+g*l*m-u*y*m-f*l*b+u*p*b,w=v*p*h-d*y*h-v*l*m+c*y*m+d*l*b-c*p*b,_=d*g*h-v*f*h+v*u*m-c*g*m-d*u*b+c*f*b,S=v*f*l-d*g*l-v*u*p+c*g*p+d*u*y-c*f*y,M=i*x+o*w+a*_+s*S;if(0===M){var T="Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(T);return console.warn(T),this.identity()}var A=1/M;return n[0]=x*A,n[1]=(g*p*s-f*y*s-g*a*m+o*y*m+f*a*b-o*p*b)*A,n[2]=(u*y*s-g*l*s+g*a*h-o*y*h-u*a*b+o*l*b)*A,n[3]=(f*l*s-u*p*s-f*a*h+o*p*h+u*a*m-o*l*m)*A,n[4]=w*A,n[5]=(d*y*s-v*p*s+v*a*m-i*y*m-d*a*b+i*p*b)*A,n[6]=(v*l*s-c*y*s-v*a*h+i*y*h+c*a*b-i*l*b)*A,n[7]=(c*p*s-d*l*s+d*a*h-i*p*h-c*a*m+i*l*m)*A,n[8]=_*A,n[9]=(v*f*s-d*g*s-v*o*m+i*g*m+d*o*b-i*f*b)*A,n[10]=(c*g*s-v*u*s+v*o*h-i*g*h-c*o*b+i*u*b)*A,n[11]=(d*u*s-c*f*s-d*o*h+i*f*h+c*o*m-i*u*m)*A,n[12]=S*A,n[13]=(d*g*a-v*f*a+v*o*p-i*g*p-d*o*y+i*f*y)*A,n[14]=(v*u*a-c*g*a-v*o*l+i*g*l+c*o*y-i*u*y)*A,n[15]=(c*f*a-d*u*a+d*o*l-i*f*l-c*o*p+i*u*p)*A,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,c=i*o,u=i*a;return this.set(c*o+n,c*a-r*s,c*s+r*a,0,c*a+r*s,u*a+n,u*s-r*o,0,c*s-r*a,u*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,c=i+i,u=o+o,l=a+a,h=i*c,d=i*u,f=i*l,p=o*u,m=o*l,v=a*l,g=s*c,y=s*u,b=s*l,x=n.x,w=n.y,_=n.z;return r[0]=(1-(p+v))*x,r[1]=(d+b)*x,r[2]=(f-y)*x,r[3]=0,r[4]=(d-b)*w,r[5]=(1-(h+v))*w,r[6]=(m+g)*w,r[7]=0,r[8]=(f+y)*_,r[9]=(m-g)*_,r[10]=(1-(h+p))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(){var e=new s,t=new a;return function(n,r,i){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),c=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.copy(this);var u=1/a,l=1/s,h=1/c;return t.elements[0]*=u,t.elements[1]*=u,t.elements[2]*=u,t.elements[4]*=l,t.elements[5]*=l,t.elements[6]*=l,t.elements[8]*=h,t.elements[9]*=h,t.elements[10]*=h,r.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=c,this}}(),makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),c=2*i/(n-r),u=(t+e)/(t-e),l=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),c=1/(n-r),u=1/(o-i),l=(t+e)*s,h=(n+r)*c,d=(o+i)*u;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(s.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new c;return function(t){return t&&t.isEuler||console.error("Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new c;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,c=s*t+o*r-a*n,u=s*n+a*t-i*r,l=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=c*s+h*-i+u*-a-l*-o,this.y=u*s+h*-o+l*-i-c*-a,this.z=l*s+h*-a+c*-o-u*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(){var e=new a;return function(t){return this.applyMatrix4(e.getInverse(t.projectionMatrix)).applyMatrix4(t.matrixWorld)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new s,t=new s;return function(n,r){return e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new s;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new s;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(o.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(c,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],c=n[r+1],u=n[r+2],l=n[r+3],h=i[o+0],d=i[o+1],f=i[o+2],p=i[o+3];if(l!==p||s!==h||c!==d||u!==f){var m=1-a,v=s*h+c*d+u*f+l*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,v*g);m=Math.sin(m*x)/b,a=Math.sin(a*x)/b}var w=a*g;if(s=s*m+h*w,c=c*m+d*w,u=u*m+f*w,l=l*m+p*w,m===1-a){var _=1/Math.sqrt(s*s+c*c+u*u+l*l);s*=_,c*=_,u*=_,l*=_}}e[t]=s,e[t+1]=c,e[t+2]=u,e[t+3]=l}}),Object.defineProperties(c.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(c.prototype,{set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,c=a(n/2),u=a(r/2),l=a(i/2),h=s(n/2),d=s(r/2),f=s(i/2);return"XYZ"===o?(this._x=h*u*l+c*d*f,this._y=c*d*l-h*u*f,this._z=c*u*f+h*d*l,this._w=c*u*l-h*d*f):"YXZ"===o?(this._x=h*u*l+c*d*f,this._y=c*d*l-h*u*f,this._z=c*u*f-h*d*l,this._w=c*u*l+h*d*f):"ZXY"===o?(this._x=h*u*l-c*d*f,this._y=c*d*l+h*u*f,this._z=c*u*f+h*d*l,this._w=c*u*l-h*d*f):"ZYX"===o?(this._x=h*u*l-c*d*f,this._y=c*d*l+h*u*f,this._z=c*u*f-h*d*l,this._w=c*u*l+h*d*f):"YZX"===o?(this._x=h*u*l+c*d*f,this._y=c*d*l+h*u*f,this._z=c*u*f-h*d*l,this._w=c*u*l-h*d*f):"XZY"===o&&(this._x=h*u*l-c*d*f,this._y=c*d*l-h*u*f,this._z=c*u*f+h*d*l,this._w=c*u*l+h*d*f),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],c=n[9],u=n[2],l=n[6],h=n[10],d=r+s+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(l-c)*t,this._y=(o-u)*t,this._z=(a-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(l-c)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+u)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(o-u)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(c+l)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+u)/t,this._y=(c+l)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new s;return function(n,r){return void 0===t&&(t=new s),(e=n.dot(r)+1)<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),angleTo:function(e){return 2*Math.acos(Math.abs(o.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,c=t._z,u=t._w;return this._x=n*u+o*a+r*c-i*s,this._y=r*u+o*s+i*a-n*c,this._z=i*u+o*c+n*s-r*a,this._w=o*u-n*a-r*s-i*c,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var c=1-t;return this._w=c*o+t*this._w,this._x=c*n+t*this._x,this._y=c*r+t*this._y,this._z=c*i+t*this._z,this.normalize()}var u=Math.sqrt(s),l=Math.atan2(u,a),h=Math.sin((1-t)*l)/u,d=Math.sin(t*l)/u;return this._w=o*h+this._w*d,this._x=n*h+this._x*d,this._y=r*h+this._y*d,this._z=i*h+this._z*d,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(u.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}}),l.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],l.DefaultOrder="XYZ",Object.defineProperties(l.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(l.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=o.clamp,i=e.elements,a=i[0],s=i[4],c=i[8],u=i[1],l=i[5],h=i[9],d=i[2],f=i[6],p=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(f,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(c,p),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-d,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(u,a))):"ZYX"===t?(this._y=Math.asin(-r(d,-1,1)),Math.abs(d)<.99999?(this._x=Math.atan2(f,p),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-s,l))):"YZX"===t?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(c,p))):"XZY"===t?(this._z=Math.asin(-r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(f,l),this._y=Math.atan2(c,a)):(this._x=Math.atan2(-h,p),this._y=0)):console.warn("Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new a;return function(t,n,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new c;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new s(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(h.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}}),Object.assign(d.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,c){var u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=i,u[5]=s,u[6]=n,u[7]=o,u[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new s;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],c=n[1],u=n[4],l=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],v=r[6],g=r[1],y=r[4],b=r[7],x=r[2],w=r[5],_=r[8];return i[0]=o*p+a*g+s*x,i[3]=o*m+a*y+s*w,i[6]=o*v+a*b+s*_,i[1]=c*p+u*g+l*x,i[4]=c*m+u*y+l*w,i[7]=c*v+u*b+l*_,i[2]=h*p+d*g+f*x,i[5]=h*m+d*y+f*w,i[8]=h*v+d*b+f*_,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-n*i*u+n*a*s+r*i*c-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],c=n[4],u=n[5],l=n[6],h=n[7],d=n[8],f=d*c-u*h,p=u*l-d*s,m=h*s-c*l,v=i*f+o*p+a*m;if(0===v){var g="Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=f*y,r[1]=(a*h-d*o)*y,r[2]=(u*o-a*c)*y,r[3]=p*y,r[4]=(d*i-a*l)*y,r[5]=(a*s-u*i)*y,r[6]=m*y,r[7]=(o*l-h*i)*y,r[8]=(c*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(i),c=Math.sin(i);this.set(n*s,n*c,-n*(s*o+c*a)+o+e,-r*c,r*s,-r*(-c*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],c=r[4],u=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*c,r[6]=t*a+n*u,r[1]=-n*i+t*s,r[4]=-n*o+t*c,r[7]=-n*a+t*u,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var f=0;function p(){Object.defineProperty(this,"id",{value:f++}),this.uuid=o.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=p.DefaultUp.clone();var e=new s,t=new l,n=new c,r=new s(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new a},normalMatrix:{value:new d}}),this.matrix=new a,this.matrixWorld=new a,this.matrixAutoUpdate=p.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new h,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}p.DefaultUp=new s(0,1,0),p.DefaultMatrixAutoUpdate=!0,p.prototype=Object.assign(Object.create(u.prototype),{constructor:p,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new c;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new c;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new s(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new s(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new s(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new s;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new s(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new s(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new s(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new a;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new c,t=new a,n=new s,r=new s;return function(i,o,a){i.isVector3?n.copy(i):n.set(i,o,a);var s=this.parent;this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld),this.isCamera?t.lookAt(r,n,this.up):t.lookAt(n,r,this.up),this.quaternion.setFromRotationMatrix(t),s&&(t.extractRotation(s.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse()))}}(),add:function(e){var t=arguments;if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(t[n]);return this}return e===this?(console.error("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("Object3D.add: object not an instance of Object3D.",e),this)},remove:function(e){var t=arguments;if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.remove(t[n]);return this}var r=this.children.indexOf(e);return-1!==r&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(r,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("Object3D: .getWorldPosition() target is now required"),e=new s),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new s,t=new s;return function(n){return void 0===n&&(console.warn("Object3D: .getWorldQuaternion() target is now required"),n=new c),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldScale:function(){var e=new s,t=new c;return function(n){return void 0===n&&(console.warn("Object3D: .getWorldScale() target is now required"),n=new s),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(e){void 0===e&&(console.warn("Object3D: .getWorldDirection() target is now required"),e=new s),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,c=a.length;s<c;s++){var u=a[s];i(e.shapes,u)}else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,c=this.material.length;s<c;s++)l.push(i(e.materials,this.material[s]));r.material=l}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object)}if(t){var h=m(e.geometries),d=m(e.materials),f=m(e.textures),p=m(e.images);a=m(e.shapes);h.length>0&&(n.geometries=h),d.length>0&&(n.materials=d),f.length>0&&(n.textures=f),p.length>0&&(n.images=p),a.length>0&&(n.shapes=a)}return n.object=r,n;function m(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}});var m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function v(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function g(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new s,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new v,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}function y(e,t){this.min=void 0!==e?e:new s(1/0,1/0,1/0),this.max=void 0!==t?t:new s(-1/0,-1/0,-1/0)}function b(e,t){this.center=void 0!==e?e:new s,this.radius=void 0!==t?t:0}function x(e,t){this.x=e||0,this.y=t||0}Object.assign(v.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=o.euclideanModulo(t,1),n=o.clamp(n,0,1),r=o.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,a=2*r-i;this.r=e(a,i,t+1/3),this.g=e(a,i,t),this.b=e(a,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,c=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,c)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u,l=(u=n[1]).length;if(3===l)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(u=m[e])?this.setHex(u):console.warn("Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),c=(s+a)/2;if(s===a)t=0,n=0;else{var u=a-s;switch(n=c<=.5?u/(a+s):u/(2-a-s),a){case r:t=(i-o)/u+(i<o?6:0);break;case i:t=(o-r)/u+2;break;case o:t=(r-i)/u+4}t/=6}return e.h=t,e.s=n,e.l=c,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,n,r){return this.getHSL(e),e.h+=t,e.s+=n,e.l+=r,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(){var e={h:0,s:0,l:0},t={h:0,s:0,l:0};return function(n,r){this.getHSL(e),n.getHSL(t);var i=o.lerp(e.h,t.h,r),a=o.lerp(e.s,t.s,r),s=o.lerp(e.l,t.l,r);return this.setHSL(i,a,s),this}}(),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}}),Object.assign(g.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}),Object.assign(y.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.length;s<c;s+=3){var u=e[s],l=e[s+1],h=e[s+2];u<t&&(t=u),l<n&&(n=l),h<r&&(r=h),u>i&&(i=u),l>o&&(o=l),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.count;s<c;s++){var u=e.getX(s),l=e.getY(s),h=e.getZ(s);u<t&&(t=u),l<n&&(n=l),h<r&&(r=h),u>i&&(i=u),l>o&&(o=l),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new s;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("Box3: .getCenter() target is now required"),e=new s),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("Box3: .getSize() target is now required"),e=new s),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,r=new s;function i(i){var o=i.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(t=0,n=a.length;t<n;t++)r.copy(a[t]),r.applyMatrix4(i.matrixWorld),e.expandByPoint(r)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(t=0,n=s.count;t<n;t++)r.fromBufferAttribute(s,t).applyMatrix4(i.matrixWorld),e.expandByPoint(r)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(i),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("Box3: .getParameter() target is now required"),t=new s),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new s;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},intersectsTriangle:function(){var e=new s,t=new s,n=new s,r=new s,i=new s,o=new s,a=new s,c=new s,u=new s,l=new s;function h(r){var i,o;for(i=0,o=r.length-3;i<=o;i+=3){a.fromArray(r,i);var s=u.x*Math.abs(a.x)+u.y*Math.abs(a.y)+u.z*Math.abs(a.z),c=e.dot(a),l=t.dot(a),h=n.dot(a);if(Math.max(-Math.max(c,l,h),Math.min(c,l,h))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(c),u.subVectors(this.max,c),e.subVectors(a.a,c),t.subVectors(a.b,c),n.subVectors(a.c,c),r.subVectors(t,e),i.subVectors(n,t),o.subVectors(e,n);var s=[0,-r.z,r.y,0,-i.z,i.y,0,-o.z,o.y,r.z,0,-r.x,i.z,0,-i.x,o.z,0,-o.x,-r.y,r.x,0,-i.y,i.x,0,-o.y,o.x,0];return!!h(s)&&(!!h(s=[1,0,0,0,1,0,0,0,1])&&(l.crossVectors(r,i),h(s=[l.x,l.y,l.z])))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("Box3: .clampPoint() target is now required"),t=new s),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new s;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new s;return function(t){return void 0===t&&(console.warn("Box3: .getBoundingSphere() target is now required"),t=new b),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new s,new s,new s,new s,new s,new s,new s,new s];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(b.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new y;return function(t,n){var r=this.center;void 0!==n?r.copy(n):e.setFromPoints(t).getCenter(r);for(var i=0,o=0,a=t.length;o<a;o++)i=Math.max(i,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("Sphere: .clampPoint() target is now required"),t=new s),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("Sphere: .getBoundingBox() target is now required"),e=new y),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.defineProperties(x.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(x.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new x,t=new x;return function(n,r){return e.set(n,n),t.set(r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}});var w=0;function _(){Object.defineProperty(this,"id",{value:w+=2}),this.uuid=o.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function S(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function M(e,t,n){if(Array.isArray(e))throw new TypeError("BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function T(e,t,n){M.call(this,new Int8Array(e),t,n)}function A(e,t,n){M.call(this,new Uint8Array(e),t,n)}function E(e,t,n){M.call(this,new Uint8ClampedArray(e),t,n)}function C(e,t,n){M.call(this,new Int16Array(e),t,n)}function P(e,t,n){M.call(this,new Uint16Array(e),t,n)}function L(e,t,n){M.call(this,new Int32Array(e),t,n)}function O(e,t,n){M.call(this,new Uint32Array(e),t,n)}function N(e,t,n){M.call(this,new Float32Array(e),t,n)}function R(e,t,n){M.call(this,new Float64Array(e),t,n)}function I(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function D(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}_.prototype=Object.assign(Object.create(u.prototype),{constructor:_,isGeometry:!0,applyMatrix:function(e){for(var t=(new d).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(e)}for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new a;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new a;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new a;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new a;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new a;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new p;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes,i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,c=void 0!==r.uv?r.uv.array:void 0,u=void 0!==r.uv2?r.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var l=[],h=[],d=[],f=0,p=0;f<i.length;f+=3,p+=2)t.vertices.push(new s(i[f],i[f+1],i[f+2])),void 0!==o&&l.push(new s(o[f],o[f+1],o[f+2])),void 0!==a&&t.colors.push(new v(a[f],a[f+1],a[f+2])),void 0!==c&&h.push(new x(c[p],c[p+1])),void 0!==u&&d.push(new x(u[p],u[p+1]));function m(e,n,r,i){var s=new g(e,n,r,void 0!==o?[l[e].clone(),l[n].clone(),l[r].clone()]:[],void 0!==a?[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()]:[],i);t.faces.push(s),void 0!==c&&t.faceVertexUvs[0].push([h[e].clone(),h[n].clone(),h[r].clone()]),void 0!==u&&t.faceVertexUvs[1].push([d[e].clone(),d[n].clone(),d[r].clone()])}var y=e.groups;if(y.length>0)for(f=0;f<y.length;f++)for(var b=y[f],w=b.start,_=(p=w,w+b.count);p<_;p+=3)void 0!==n?m(n[p],n[p+1],n[p+2],b.materialIndex):m(p,p+1,p+2,b.materialIndex);else if(void 0!==n)for(f=0;f<n.length;f+=3)m(n[f],n[f+1],n[f+2]);else for(f=0;f<i.length/3;f+=3)m(f,f+1,f+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new s;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new a;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new s,t=new s,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],c=this.vertices[i.c];e.subVectors(c,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new s;if(e){var c,u,l,h=new s,d=new s;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],c=this.vertices[o.a],u=this.vertices[o.b],l=this.vertices[o.c],h.subVectors(l,u),d.subVectors(c,u),h.cross(d),a[o.a].add(h),a[o.b].add(h),a[o.c].add(h)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){var f=(o=this.faces[r]).vertexNormals;3===f.length?(f[0].copy(a[o.a]),f[1].copy(a[o.b]),f[2].copy(a[o.c])):(f[0]=a[o.a].clone(),f[1]=a[o.b].clone(),f[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(n=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new _;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,c=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)u=new s,l={a:new s,b:new s,c:new s},a.push(u),c.push(l)}var u,l,h=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],u=h.faceNormals[n],l=h.vertexNormals[n],u.copy(i.normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new y),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new b),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,c=e.faces,u=this.faceVertexUvs[0],l=e.faceVertexUvs[0],h=this.colors,f=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new d).getNormalMatrix(t));for(var p=0,m=a.length;p<m;p++){var v=a[p].clone();void 0!==t&&v.applyMatrix4(t),o.push(v)}for(p=0,m=f.length;p<m;p++)h.push(f[p].clone());for(p=0,m=c.length;p<m;p++){var y,b,x,w=c[p],_=w.vertexNormals,S=w.vertexColors;(y=new g(w.a+i,w.b+i,w.c+i)).normal.copy(w.normal),void 0!==r&&y.normal.applyMatrix3(r).normalize();for(var M=0,T=_.length;M<T;M++)b=_[M].clone(),void 0!==r&&b.applyMatrix3(r).normalize(),y.vertexNormals.push(b);y.color.copy(w.color);for(M=0,T=S.length;M<T;M++)x=S[M],y.vertexColors.push(x.clone());y.materialIndex=w.materialIndex+n,s.push(y)}for(p=0,m=l.length;p<m;p++){var A=l[p],E=[];if(void 0!==A){for(M=0,T=A.length;M<T;M++)E.push(A[M].clone());u.push(E)}}}else console.error("Geometry.merge(): geometry not an instance of Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("Geometry.mergeMesh(): mesh not an instance of Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,o,a,s,c={},u=[],l=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],void 0===c[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(c[t]=n,u.push(this.vertices[n]),l[n]=u.length-1):l[n]=l[c[t]];var d=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=l[i.a],i.b=l[i.b],i.c=l[i.c],o=[i.a,i.b,i.c];for(var f=0;f<3;f++)if(o[f]===o[(f+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var p=d[n];for(this.faces.splice(p,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(p,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new s(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]);for(n=0;n<t;n++){var s=e[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],c={},u=[],l={},h=[],d={};for(i=0;i<this.faces.length;i++){var f=this.faces[i],p=void 0!==this.faceVertexUvs[0][i],m=f.normal.length()>0,v=f.vertexNormals.length>0,g=1!==f.color.r||1!==f.color.g||1!==f.color.b,y=f.vertexColors.length>0,b=0;if(b=S(b=S(b=S(b=S(b=S(b=S(b=S(b=S(b,0,0),1,!0),2,!1),3,p),4,m),5,v),6,g),7,y),a.push(b),a.push(f.a,f.b,f.c),a.push(f.materialIndex),p){var x=this.faceVertexUvs[0][i];a.push(A(x[0]),A(x[1]),A(x[2]))}if(m&&a.push(M(f.normal)),v){var w=f.vertexNormals;a.push(M(w[0]),M(w[1]),M(w[2]))}if(g&&a.push(T(f.color)),y){var _=f.vertexColors;a.push(T(_[0]),T(_[1]),T(_[2]))}}function S(e,t,n){return n?e|1<<t:e&~(1<<t)}function M(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]?c[t]:(c[t]=s.length/3,s.push(e.x,e.y,e.z),c[t])}function T(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==l[t]?l[t]:(l[t]=u.length,u.push(e.getHex()),l[t])}function A(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]?d[t]:(d[t]=h.length/2,h.push(e.x,e.y),d[t])}return e.data={},e.data.vertices=r,e.data.normals=s,u.length>0&&(e.data.colors=u),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new _).copy(this)},copy:function(e){var t,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var c=e.colors;for(t=0,n=c.length;t<n;t++)this.colors.push(c[t].clone());var u=e.faces;for(t=0,n=u.length;t<n;t++)this.faces.push(u[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var l=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,i=l.length;r<i;r++){var h=l[r],d=[];for(o=0,a=h.length;o<a;o++){var f=h[o];d.push(f.clone())}this.faceVertexUvs[t].push(d)}}var p=e.morphTargets;for(t=0,n=p.length;t<n;t++){var m={};if(m.name=p[t].name,void 0!==p[t].vertices)for(m.vertices=[],r=0,i=p[t].vertices.length;r<i;r++)m.vertices.push(p[t].vertices[r].clone());if(void 0!==p[t].normals)for(m.normals=[],r=0,i=p[t].normals.length;r<i;r++)m.normals.push(p[t].normals[r].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,n=v.length;t<n;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],r=0,i=v[t].vertexNormals.length;r<i;r++){var y=v[t].vertexNormals[r],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),g.vertexNormals.push(b)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],r=0,i=v[t].faceNormals.length;r<i;r++)g.faceNormals.push(v[t].faceNormals[r].clone());this.morphNormals.push(g)}var x=e.skinWeights;for(t=0,n=x.length;t<n;t++)this.skinWeights.push(x[t].clone());var w=e.skinIndices;for(t=0,n=w.length;t<n;t++)this.skinIndices.push(w[t].clone());var _=e.lineDistances;for(t=0,n=_.length;t<n;t++)this.lineDistances.push(_[t]);var S=e.boundingBox;null!==S&&(this.boundingBox=S.clone());var M=e.boundingSphere;return null!==M&&(this.boundingSphere=M.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.assign(S.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=e.elements,a=o[0],s=o[4],c=o[8],u=o[1],l=o[5],h=o[9],d=o[2],f=o[6],p=o[10];if(Math.abs(s-u)<.01&&Math.abs(c-d)<.01&&Math.abs(h-f)<.01){if(Math.abs(s+u)<.1&&Math.abs(c+d)<.1&&Math.abs(h+f)<.1&&Math.abs(a+l+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,v=(l+1)/2,g=(p+1)/2,y=(s+u)/4,b=(c+d)/4,x=(h+f)/4;return m>v&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(m)),i=b/n):v>g?v<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(v)),i=x/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=b/(i=Math.sqrt(g)),r=x/i),this.set(n,r,i,t),this}var w=Math.sqrt((f-h)*(f-h)+(c-d)*(c-d)+(u-s)*(u-s));return Math.abs(w)<.001&&(w=1),this.x=(f-h)/w,this.y=(c-d)/w,this.z=(u-s)/w,this.w=Math.acos((a+l+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new S,t=new S),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Object.defineProperty(M.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(M.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("BufferAttribute.copyColorsArray(): color is undefined",r),o=new v),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new x),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new s),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new S),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),T.prototype=Object.create(M.prototype),T.prototype.constructor=T,A.prototype=Object.create(M.prototype),A.prototype.constructor=A,E.prototype=Object.create(M.prototype),E.prototype.constructor=E,C.prototype=Object.create(M.prototype),C.prototype.constructor=C,P.prototype=Object.create(M.prototype),P.prototype.constructor=P,L.prototype=Object.create(M.prototype),L.prototype.constructor=L,O.prototype=Object.create(M.prototype),O.prototype.constructor=O,N.prototype=Object.create(M.prototype),N.prototype.constructor=N,R.prototype=Object.create(M.prototype),R.prototype.constructor=R,Object.assign(I.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,c=s.length;if(c>0){t=[];for(var u=0;u<c;u++)t[u]={name:s[u].name,data:[]};this.morphTargets.position=t}var l,h=e.morphNormals,d=h.length;if(d>0){l=[];for(u=0;u<d;u++)l[u]={name:h[u].name,data:[]};this.morphTargets.normal=l}var f=e.skinIndices,p=e.skinWeights,m=f.length===r.length,v=p.length===r.length;r.length>0&&0===n.length&&console.error("DirectGeometry: Faceless geometries are not supported.");for(u=0;u<n.length;u++){var g=n[u];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=g.normal;this.normals.push(b,b,b)}var w,_=g.vertexColors;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var S=g.color;this.colors.push(S,S,S)}if(!0===o)void 0!==(w=i[0][u])?this.uvs.push(w[0],w[1],w[2]):(console.warn("DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new x,new x,new x));if(!0===a)void 0!==(w=i[1][u])?this.uvs2.push(w[0],w[1],w[2]):(console.warn("DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new x,new x,new x));for(var M=0;M<c;M++){var T=s[M].vertices;t[M].data.push(T[g.a],T[g.b],T[g.c])}for(M=0;M<d;M++){var A=h[M].vertexNormals[u];l[M].data.push(A.a,A.b,A.c)}m&&this.skinIndices.push(f[g.a],f[g.b],f[g.c]),v&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var F=1;function k(){Object.defineProperty(this,"id",{value:F+=2}),this.uuid=o.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function U(e,t,n,r,i,o,a){_.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new B(e,t,n,r,i,o,a)),this.mergeVertices()}function B(e,t,n,r,i,o,a){k.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var c,u,l=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),h=0,d=[],f=new s,p=new s,m=[],v=[],g=[],y=[];for(u=0;u<=n;u++){var b=[],x=u/n;for(c=0;c<=t;c++){var w=c/t;f.x=-e*Math.cos(r+w*i)*Math.sin(o+x*a),f.y=e*Math.cos(o+x*a),f.z=e*Math.sin(r+w*i)*Math.sin(o+x*a),v.push(f.x,f.y,f.z),p.set(f.x,f.y,f.z).normalize(),g.push(p.x,p.y,p.z),y.push(w,1-x),b.push(h++)}d.push(b)}for(u=0;u<n;u++)for(c=0;c<t;c++){var _=d[u][c+1],S=d[u][c],M=d[u+1][c],T=d[u+1][c+1];(0!==u||o>0)&&m.push(_,S,T),(u!==n-1||l<Math.PI)&&m.push(S,M,T)}this.setIndex(m),this.addAttribute("position",new N(v,3)),this.addAttribute("normal",new N(g,3)),this.addAttribute("uv",new N(y,2))}k.prototype=Object.assign(Object.create(u.prototype),{constructor:k,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(D(e)>65535?O:P)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new M(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new d).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new a;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new a;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new a;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new a;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new a;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new p;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new s;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new N(3*t.vertices.length,3),r=new N(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new N(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new N(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new I).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new M(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new M(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new M(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new M(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new M(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],c=e.morphTargets[a],u=0,l=c.length;u<l;u++){var h=c[u],d=new N(3*h.data.length,3);d.name=h.name,s.push(d.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var f=new N(4*e.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var p=new N(4*e.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new y);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new y,t=new s;return function(){null===this.boundingSphere&&(this.boundingSphere=new b);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(r);for(var i=0,o=0,a=n.count;o<a;o++)t.x=n.getX(o),t.y=n.getY(o),t.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new M(new Float32Array(n.length),3));else for(var r=t.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;var a,c,u,l=t.normal.array,h=new s,d=new s,f=new s,p=new s,m=new s;if(e){var v=e.array;for(i=0,o=e.count;i<o;i+=3)a=3*v[i+0],c=3*v[i+1],u=3*v[i+2],h.fromArray(n,a),d.fromArray(n,c),f.fromArray(n,u),p.subVectors(f,d),m.subVectors(h,d),p.cross(m),l[a]+=p.x,l[a+1]+=p.y,l[a+2]+=p.z,l[c]+=p.x,l[c+1]+=p.y,l[c+2]+=p.z,l[u]+=p.x,l[u+1]+=p.y,l[u+2]+=p.z}else for(i=0,o=n.length;i<o;i+=9)h.fromArray(n,i),d.fromArray(n,i+3),f.fromArray(n,i+6),p.subVectors(f,d),m.subVectors(h,d),p.cross(m),l[i]=p.x,l[i+1]=p.y,l[i+2]=p.z,l[i+3]=p.x,l[i+4]=p.y,l[i+5]=p.z,l[i+6]=p.x,l[i+7]=p.y,l[i+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=0,c=o.itemSize*t;s<a.length;s++,c++)i[c]=a[s];return this}console.error("BufferGeometry.merge(): geometry not an instance of BufferGeometry.",e)},normalizeNormals:function(){var e=new s;return function(){for(var t=this.attributes.normal,n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new k,t=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,a=i.itemSize,s=new o.constructor(t.length*a),c=0,u=0,l=0,h=t.length;l<h;l++){c=t[l]*a;for(var d=0;d<a;d++)s[u++]=o[c++]}e.addAttribute(r,new M(s,a))}var f=this.groups;for(l=0,h=f.length;l<h;l++){var p=f[l];e.addGroup(p.start,p.count,p.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var a=o[n];i=Array.prototype.slice.call(a.array);e.data.attributes[n]={itemSize:a.itemSize,type:a.array.constructor.name,array:i,normalized:a.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return null!==c&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e},clone:function(){return(new k).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o){var a=o[t];this.addAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var c=[],u=s[t];for(n=0,r=u.length;n<r;n++)c.push(u[n].clone());this.morphAttributes[t]=c}var l=e.groups;for(n=0,r=l.length;n<r;n++){var h=l[n];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),U.prototype=Object.create(_.prototype),U.prototype.constructor=U,B.prototype=Object.create(k.prototype),B.prototype.constructor=B;var z="96",j={LEFT:0,MIDDLE:1,RIGHT:2},V=0,G=1,W=2,H=1,X=2,q=0,Y=1,J=2,Q=0,Z=1,K=2,$=0,ee=1,te=2,ne=3,re=4,ie=5,oe=100,ae=101,se=102,ce=103,ue=104,le=200,he=201,de=202,fe=203,pe=204,me=205,ve=206,ge=207,ye=208,be=209,xe=210,we=0,_e=1,Se=2,Me=3,Te=4,Ae=5,Ee=6,Ce=7,Pe=0,Le=1,Oe=2,Ne=0,Re=1,Ie=2,De=3,Fe=4,ke=300,Ue=301,Be=302,ze=303,je=304,Ve=305,Ge=306,We=307,He=1e3,Xe=1001,qe=1002,Ye=1003,Je=1004,Qe=1005,Ze=1006,Ke=1007,$e=1008,et=1009,tt=1010,nt=1011,rt=1012,it=1013,ot=1014,at=1015,st=1016,ct=1017,ut=1018,lt=1019,ht=1020,dt=1021,ft=1022,pt=1023,mt=1024,vt=1025,gt=pt,yt=1026,bt=1027,xt=33776,wt=33777,_t=33778,St=33779,Mt=35840,Tt=35841,At=35842,Et=35843,Ct=36196,Pt=37808,Lt=37809,Ot=37810,Nt=37811,Rt=37812,It=37813,Dt=37814,Ft=37815,kt=37816,Ut=37817,Bt=37818,zt=37819,jt=37820,Vt=37821,Gt=2201,Wt=2300,Ht=2400,Xt=0,qt=1,Yt=2,Jt=3e3,Qt=3001,Zt=3007,Kt=3002,$t=3004,en=3005,tn=3006,nn=3200,rn=3201,on=0,an=1,sn=0;function cn(){Object.defineProperty(this,"id",{value:sn++}),this.uuid=o.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=ee,this.side=q,this.flatShading=!1,this.vertexColors=Q,this.opacity=1,this.transparent=!1,this.blendSrc=pe,this.blendDst=me,this.blendEquation=oe,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Me,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function un(e){cn.call(this),this.type="MeshBasicMaterial",this.color=new v(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function ln(e){cn.call(this),this.type="LineBasicMaterial",this.color=new v(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function hn(e,t){this.origin=void 0!==e?e:new s,this.direction=void 0!==t?t:new s}function dn(e,t,n){this.a=void 0!==e?e:new s,this.b=void 0!==t?t:new s,this.c=void 0!==n?n:new s}function fn(e,t){p.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new k,this.material=void 0!==t?t:new un({color:16777215*Math.random()}),this.drawMode=Xt,this.updateMorphTargets()}function pn(e,t,n){1===n&&console.error("Line: parameter LinePieces no longer supported. Use LineSegments instead."),p.call(this),this.type="Line",this.geometry=void 0!==e?e:new k,this.material=void 0!==t?t:new ln({color:16777215*Math.random()})}cn.prototype=Object.assign(Object.create(u.prototype),{constructor:cn,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]="overdraw"===t?Number(n):n:console.warn(this.type+": '"+t+"' is not a property of this material.")}else console.warn(this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==ee&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==q&&(n.side=this.side),this.vertexColors!==Q&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),un.prototype=Object.create(cn.prototype),un.prototype.constructor=un,un.prototype.isMeshBasicMaterial=!0,un.prototype.copy=function(e){return cn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},ln.prototype=Object.create(cn.prototype),ln.prototype.constructor=ln,ln.prototype.isLineBasicMaterial=!0,ln.prototype.copy=function(e){return cn.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Object.assign(hn.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("Ray: .at() target is now required"),t=new s),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new s;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("Ray: .closestPointToPoint() target is now required"),t=new s),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new s;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new s,t=new s,n=new s;return function(r,i,o,a){e.copy(r).add(i).multiplyScalar(.5),t.copy(i).sub(r).normalize(),n.copy(this.origin).sub(e);var s,c,u,l,h=.5*r.distanceTo(i),d=-this.direction.dot(t),f=n.dot(this.direction),p=-n.dot(t),m=n.lengthSq(),v=Math.abs(1-d*d);if(v>0)if(c=d*f-p,l=h*v,(s=d*p-f)>=0)if(c>=-l)if(c<=l){var g=1/v;u=(s*=g)*(s+d*(c*=g)+2*f)+c*(d*s+c+2*p)+m}else c=h,u=-(s=Math.max(0,-(d*c+f)))*s+c*(c+2*p)+m;else c=-h,u=-(s=Math.max(0,-(d*c+f)))*s+c*(c+2*p)+m;else c<=-l?u=-(s=Math.max(0,-(-d*h+f)))*s+(c=s>0?-h:Math.min(Math.max(-h,-p),h))*(c+2*p)+m:c<=l?(s=0,u=(c=Math.min(Math.max(-h,-p),h))*(c+2*p)+m):u=-(s=Math.max(0,-(d*h+f)))*s+(c=s>0?h:Math.min(Math.max(-h,-p),h))*(c+2*p)+m;else c=d>0?-h:h,u=-(s=Math.max(0,-(d*c+f)))*s+c*(c+2*p)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(c).add(e),u}}(),intersectSphere:function(){var e=new s;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,c=r+a;return s<0&&c<0?null:s<0?this.at(c,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,c=1/this.direction.x,u=1/this.direction.y,l=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(i=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),l>=0?(a=(e.min.z-h.z)*l,s=(e.max.z-h.z)*l):(a=(e.max.z-h.z)*l,s=(e.min.z-h.z)*l),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(){var e=new s;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new s,t=new s,n=new s,r=new s;return function(i,o,a,s,c){t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n);var u,l=this.direction.dot(r);if(l>0){if(s)return null;u=1}else{if(!(l<0))return null;u=-1,l=-l}e.subVectors(this.origin,i);var h=u*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var d=u*this.direction.dot(t.cross(e));if(d<0)return null;if(h+d>l)return null;var f=-u*e.dot(r);return f<0?null:this.at(f/l,c)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(dn,{getNormal:function(){var e=new s;return function(t,n,r,i){void 0===i&&(console.warn("Triangle: .getNormal() target is now required"),i=new s),i.subVectors(r,n),e.subVectors(t,n),i.cross(e);var o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}}(),getBarycoord:function(){var e=new s,t=new s,n=new s;return function(r,i,o,a,c){e.subVectors(a,i),t.subVectors(o,i),n.subVectors(r,i);var u=e.dot(e),l=e.dot(t),h=e.dot(n),d=t.dot(t),f=t.dot(n),p=u*d-l*l;if(void 0===c&&(console.warn("Triangle: .getBarycoord() target is now required"),c=new s),0===p)return c.set(-2,-1,-1);var m=1/p,v=(d*h-l*f)*m,g=(u*f-l*h)*m;return c.set(1-v-g,g,v)}}(),containsPoint:function(){var e=new s;return function(t,n,r,i){return dn.getBarycoord(t,n,r,i,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}(),getUV:function(){var e=new s;return function(t,n,r,i,o,a,s,c){return this.getBarycoord(t,n,r,i,e),c.set(0,0),c.addScaledVector(o,e.x),c.addScaledVector(a,e.y),c.addScaledVector(s,e.z),c}}()}),Object.assign(dn.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new s,t=new s;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("Triangle: .getMidpoint() target is now required"),e=new s),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return dn.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("Triangle: .getPlane() target is now required"),e=new s),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return dn.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return dn.containsPoint(e,this.a,this.b,this.c)},getUV:function(e,t,n,r,i){return dn.getUV(e,this.a,this.b,this.c,t,n,r,i)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new s,t=new s,n=new s,r=new s,i=new s,o=new s;return function(a,c){void 0===c&&(console.warn("Triangle: .closestPointToPoint() target is now required"),c=new s);var u,l,h=this.a,d=this.b,f=this.c;e.subVectors(d,h),t.subVectors(f,h),r.subVectors(a,h);var p=e.dot(r),m=t.dot(r);if(p<=0&&m<=0)return c.copy(h);i.subVectors(a,d);var v=e.dot(i),g=t.dot(i);if(v>=0&&g<=v)return c.copy(d);var y=p*g-v*m;if(y<=0&&p>=0&&v<=0)return u=p/(p-v),c.copy(h).addScaledVector(e,u);o.subVectors(a,f);var b=e.dot(o),x=t.dot(o);if(x>=0&&b<=x)return c.copy(f);var w=b*m-p*x;if(w<=0&&m>=0&&x<=0)return l=m/(m-x),c.copy(h).addScaledVector(t,l);var _=v*x-b*g;if(_<=0&&g-v>=0&&b-x>=0)return n.subVectors(f,d),l=(g-v)/(g-v+(b-x)),c.copy(d).addScaledVector(n,l);var S=1/(_+w+y);return u=w*S,l=y*S,c.copy(h).addScaledVector(e,u).addScaledVector(t,l)}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),fn.prototype=Object.assign(Object.create(p.prototype),{constructor:fn,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return p.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){var e=new a,t=new hn,n=new b,r=new s,i=new s,o=new s,c=new s,u=new s,l=new s,h=new x,d=new x,f=new x,p=new s,m=new s;function v(e,t,n,r,i,o,a,s){if(null===(t.side===Y?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==J,s)))return null;m.copy(s),m.applyMatrix4(e.matrixWorld);var c=n.ray.origin.distanceTo(m);return c<n.near||c>n.far?null:{distance:c,point:m.clone(),object:e}}function y(e,t,n,a,s,c,u,l,m){r.fromBufferAttribute(s,u),i.fromBufferAttribute(s,l),o.fromBufferAttribute(s,m);var y=v(e,t,n,a,r,i,o,p);if(y){c&&(h.fromBufferAttribute(c,u),d.fromBufferAttribute(c,l),f.fromBufferAttribute(c,m),y.uv=dn.getUV(p,r,i,o,h,d,f,new x));var b=new g(u,l,m);dn.getNormal(r,i,o,b.normal),y.face=b}return y}return function(a,s){var m,g=this.geometry,b=this.material,w=this.matrixWorld;if(void 0!==b&&(null===g.boundingSphere&&g.computeBoundingSphere(),n.copy(g.boundingSphere),n.applyMatrix4(w),!1!==a.ray.intersectsSphere(n)&&(e.getInverse(w),t.copy(a.ray).applyMatrix4(e),null===g.boundingBox||!1!==t.intersectsBox(g.boundingBox))))if(g.isBufferGeometry){var _,S,M,T,A,E,C,P,L,O=g.index,N=g.attributes.position,R=g.attributes.uv,I=g.groups,D=g.drawRange;if(null!==O)if(Array.isArray(b))for(T=0,E=I.length;T<E;T++)for(L=b[(P=I[T]).materialIndex],A=Math.max(P.start,D.start),C=Math.min(P.start+P.count,D.start+D.count);A<C;A+=3)_=O.getX(A),S=O.getX(A+1),M=O.getX(A+2),(m=y(this,L,a,t,N,R,_,S,M))&&(m.faceIndex=Math.floor(A/3),s.push(m));else for(T=Math.max(0,D.start),E=Math.min(O.count,D.start+D.count);T<E;T+=3)_=O.getX(T),S=O.getX(T+1),M=O.getX(T+2),(m=y(this,b,a,t,N,R,_,S,M))&&(m.faceIndex=Math.floor(T/3),s.push(m));else if(void 0!==N)if(Array.isArray(b))for(T=0,E=I.length;T<E;T++)for(L=b[(P=I[T]).materialIndex],A=Math.max(P.start,D.start),C=Math.min(P.start+P.count,D.start+D.count);A<C;A+=3)(m=y(this,L,a,t,N,R,_=A,S=A+1,M=A+2))&&(m.faceIndex=Math.floor(A/3),s.push(m));else for(T=Math.max(0,D.start),E=Math.min(N.count,D.start+D.count);T<E;T+=3)(m=y(this,b,a,t,N,R,_=T,S=T+1,M=T+2))&&(m.faceIndex=Math.floor(T/3),s.push(m))}else if(g.isGeometry){var F,k,U,B,z=Array.isArray(b),j=g.vertices,V=g.faces,G=g.faceVertexUvs[0];G.length>0&&(B=G);for(var W=0,H=V.length;W<H;W++){var X=V[W],q=z?b[X.materialIndex]:b;if(void 0!==q){if(F=j[X.a],k=j[X.b],U=j[X.c],!0===q.morphTargets){var Y=g.morphTargets,J=this.morphTargetInfluences;r.set(0,0,0),i.set(0,0,0),o.set(0,0,0);for(var Q=0,Z=Y.length;Q<Z;Q++){var K=J[Q];if(0!==K){var $=Y[Q].vertices;r.addScaledVector(c.subVectors($[X.a],F),K),i.addScaledVector(u.subVectors($[X.b],k),K),o.addScaledVector(l.subVectors($[X.c],U),K)}}r.add(F),i.add(k),o.add(U),F=r,k=i,U=o}if(m=v(this,q,a,t,F,k,U,p)){if(B&&B[W]){var ee=B[W];h.copy(ee[0]),d.copy(ee[1]),f.copy(ee[2]),m.uv=dn.getUV(p,F,k,U,h,d,f,new x)}m.face=X,m.faceIndex=W,s.push(m)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),pn.prototype=Object.assign(Object.create(p.prototype),{constructor:pn,isLine:!0,computeLineDistances:function(){var e=new s,t=new s;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[0],o=1,a=r.count;o<a;o++)e.fromBufferAttribute(r,o-1),t.fromBufferAttribute(r,o),i[o]=i[o-1],i[o]+=e.distanceTo(t);n.addAttribute("lineDistance",new N(i,1))}else console.error("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;(i=n.lineDistances)[0]=0;for(o=1,a=s.length;o<a;o++)i[o]=i[o-1],i[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var e=new a,t=new hn,n=new b;return function(r,i){var o=r.linePrecision,a=this.geometry,c=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(c),n.radius+=o,!1!==r.ray.intersectsSphere(n)){e.getInverse(c),t.copy(r.ray).applyMatrix4(e);var u=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=u*u,h=new s,d=new s,f=new s,p=new s,m=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var v=a.index,g=a.attributes.position.array;if(null!==v)for(var y=v.array,b=0,x=y.length-1;b<x;b+=m){var w=y[b],_=y[b+1];if(h.fromArray(g,3*w),d.fromArray(g,3*_),!(t.distanceSqToSegment(h,d,p,f)>l))p.applyMatrix4(this.matrixWorld),(T=r.ray.origin.distanceTo(p))<r.near||T>r.far||i.push({distance:T,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}else for(b=0,x=g.length/3-1;b<x;b+=m){if(h.fromArray(g,3*b),d.fromArray(g,3*b+3),!(t.distanceSqToSegment(h,d,p,f)>l))p.applyMatrix4(this.matrixWorld),(T=r.ray.origin.distanceTo(p))<r.near||T>r.far||i.push({distance:T,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else if(a.isGeometry){var S=a.vertices,M=S.length;for(b=0;b<M-1;b+=m){var T;if(!(t.distanceSqToSegment(S[b],S[b+1],p,f)>l))p.applyMatrix4(this.matrixWorld),(T=r.ray.origin.distanceTo(p))<r.near||T>r.far||i.push({distance:T,point:f.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var mn=function(){function e(e,t){this.mesh=e,this.iks=t||[],this._valid()}function t(e,t){p.call(this),this.root=e,this.iks=t||[],this.matrix.copy(e.matrixWorld),this.matrixAutoUpdate=!1,this.sphereGeometry=new B(.25,16,8),this.targetSphereMaterial=new un({color:new v(16746632),depthTest:!1,depthWrite:!1,transparent:!0}),this.effectorSphereMaterial=new un({color:new v(8978312),depthTest:!1,depthWrite:!1,transparent:!0}),this.linkSphereMaterial=new un({color:new v(8947967),depthTest:!1,depthWrite:!1,transparent:!0}),this.lineMaterial=new ln({color:new v(16711680),depthTest:!1,depthWrite:!1,transparent:!0}),this._init()}return e.prototype={constructor:e,update:function(){var e=new c,t=new s,n=new s,r=new s,i=new s,o=new s,a=new c,u=new s,l=new s,h=new s;return function(){for(var s=this.mesh.skeleton.bones,c=this.iks,d=Math,f=0,p=c.length;f<p;f++){var m=c[f],v=s[m.effector],g=s[m.target];t.setFromMatrixPosition(g.matrixWorld);for(var y=m.links,b=void 0!==m.iteration?m.iteration:1,x=0;x<b;x++){for(var w=!1,_=0,S=y.length;_<S;_++){var M=s[y[_].index];if(!1===y[_].enabled)break;var T=y[_].limitation,A=y[_].rotationMin,E=y[_].rotationMax;M.matrixWorld.decompose(o,a,u),a.inverse(),r.setFromMatrixPosition(v.matrixWorld),i.subVectors(r,o),i.applyQuaternion(a),i.normalize(),n.subVectors(t,o),n.applyQuaternion(a),n.normalize();var C=n.dot(i);if(C>1?C=1:C<-1&&(C=-1),!((C=d.acos(C))<1e-5)){if(void 0!==m.minAngle&&C<m.minAngle&&(C=m.minAngle),void 0!==m.maxAngle&&C>m.maxAngle&&(C=m.maxAngle),l.crossVectors(i,n),l.normalize(),e.setFromAxisAngle(l,C),M.quaternion.multiply(e),void 0!==T){var P=M.quaternion.w;P>1&&(P=1);var L=d.sqrt(1-P*P);M.quaternion.set(T.x*L,T.y*L,T.z*L,P)}void 0!==A&&M.rotation.setFromVector3(M.rotation.toVector3(h).max(A)),void 0!==E&&M.rotation.setFromVector3(M.rotation.toVector3(h).min(E)),M.updateMatrixWorld(!0),w=!0}}if(!w)break}}return this}}(),createHelper:function(){return new t(this.mesh,this.mesh.geometry.userData.MMD.iks)},_valid:function(){for(var e=this.iks,t=this.mesh.skeleton.bones,n=0,r=e.length;n<r;n++){var i,o,a=e[n],s=t[a.effector],c=a.links;i=s;for(var u=0,l=c.length;u<l;u++)o=t[c[u].index],i.parent!==o&&console.warn("CCDIKSolver: bone "+i.name+" is not the child of bone "+o.name),i=o}}},t.prototype=Object.assign(Object.create(p.prototype),{constructor:t,updateMatrixWorld:function(){var e=new a,t=new s;function n(e,n){return t.setFromMatrixPosition(e.matrixWorld).applyMatrix4(n)}function r(e,t,r,i){var o=n(r,i);e[3*t+0]=o.x,e[3*t+1]=o.y,e[3*t+2]=o.z}return function(t){var i=this.root;if(this.visible){var o=0,a=this.iks,s=i.skeleton.bones;e.getInverse(i.matrixWorld);for(var c=0,u=a.length;c<u;c++){var l=a[c],h=s[l.target],d=s[l.effector],f=this.children[o++],m=this.children[o++];f.position.copy(n(h,e)),m.position.copy(n(d,e));for(var v=0,g=l.links.length;v<g;v++){var y=s[l.links[v].index];this.children[o++].position.copy(n(y,e))}var b=this.children[o++],x=b.geometry.attributes.position.array;r(x,0,h,e),r(x,1,d,e);for(v=0,g=l.links.length;v<g;v++){r(x,v+2,y=s[l.links[v].index],e)}b.geometry.attributes.position.needsUpdate=!0}}this.matrix.copy(i.matrixWorld),p.prototype.updateMatrixWorld.call(this,t)}}(),_init:function(){var e=this,t=this.iks;function n(t){return new pn(function(e){var t=new k,n=new Float32Array(3*(2+e.links.length));return t.addAttribute("position",new M(n,3)),t}(t),e.lineMaterial)}for(var r=0,i=t.length;r<i;r++){var o=t[r];this.add(new fn(e.sphereGeometry,e.targetSphereMaterial)),this.add(new fn(e.sphereGeometry,e.effectorSphereMaterial));for(var a=0,s=o.links.length;a<s;a++)this.add(new fn(e.sphereGeometry,e.linkSphereMaterial));this.add(n(o))}}}),e}();function vn(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:Ht,endingEnd:Ht},s=0;s!==i;++s){var c=r[s].createInterpolant(null);o[s]=c,c.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Gt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function gn(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function yn(e,t,n,r){gn.call(this,e,t,n,r)}Object.assign(vn.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,c=o.sampleValues;return s[0]=i,s[1]=i+n,c[0]=e/a,c[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var c=this._interpolants,u=this._propertyBindings,l=0,h=c.length;l!==h;++l)c[l].evaluate(a),u[l].accumulate(r,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,r=this.loop,i=this._loopCount,o=2202===r;if(0===e)return-1===i?t:o&&1==(1&i)?n-t:t;if(2200===r){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&i))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:Ht:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:Ht:2402)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}),Object.assign(gn.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,e<(r=t[++n]))break t}o=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,e>=(i=t[--n-1]))break t}o=n,n=0}for(;n<o;){var c=n+o>>>1;e<t[c]?o=c:n=c+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(gn.prototype,{beforeStart_:gn.prototype.copySampleValue_,afterEnd_:gn.prototype.copySampleValue_}),yn.prototype=Object.assign(Object.create(gn.prototype),{constructor:yn,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,u=(n-t)/(r-t),l=1-u,h=0;h!==a;++h)i[h]=o[c+h]*l+o[s+h]*u;return i}});function bn(e,t,n){var r=n||xn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function xn(e,t,n){this.path=t,this.parsedPath=n||xn.parseTrackName(t),this.node=xn.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function wn(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(bn.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(xn,{Composite:bn,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new xn.Composite(e,t,n):new xn(e,t,n)},sanitizeNodeName:function(){var e=new RegExp("[\\[\\]\\.:\\/]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^\\[\\]\\.:\\/]",t="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",e),r=/(WCOD+)?/.source.replace("WCOD",t),i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),a=new RegExp("^"+n+r+i+o+"$"),s=["material","materials","bones"];return function(e){var t=a.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==s.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t||i.uuid===t)return i;var o=r(i.children);if(o)return o}return null},i=r(e.children);if(i)return i}return null}}),Object.assign(xn.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=xn.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[r];if(void 0!==s){var c=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(u=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][c]}else{var l=t.nodeName;console.error("PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e)}}else console.error("PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(xn.prototype,{_getValue_unbound:xn.prototype.getValue,_setValue_unbound:xn.prototype.setValue}),Object.assign(wn.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(n,r,a,1-i,t)}for(var s=t,c=t+t;s!==c;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){c.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}});var _n={arraySlice:function(e,t,n){return _n.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,c=0;c!==t;++c)i[a++]=e[s+c];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}}};function Sn(e,t,n,r){gn.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Mn(e,t,n,r){gn.call(this,e,t,n,r)}function Tn(e,t,n,r){if(void 0===e)throw new Error("KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=_n.convertArray(t,this.TimeBufferType),this.values=_n.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function An(e,t,n){Tn.call(this,e,t,n)}function En(e,t,n,r){Tn.call(this,e,t,n,r)}function Cn(e,t,n,r){Tn.call(this,e,t,n,r)}function Pn(e,t,n,r){gn.call(this,e,t,n,r)}function Ln(e,t,n,r){Tn.call(this,e,t,n,r)}function On(e,t,n,r){Tn.call(this,e,t,n,r)}function Nn(e,t,n,r){Tn.call(this,e,t,n,r)}function Rn(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=o.generateUUID(),this.duration<0&&this.resetDuration()}function In(e){if(void 0===e.type)throw new Error("KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Cn;case"vector":case"vector2":case"vector3":case"vector4":return Nn;case"color":return En;case"quaternion":return Ln;case"bool":case"boolean":return An;case"string":return On}throw new Error("KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];_n.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}function Dn(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Fn(){p.call(this),this.type="Bone"}function kn(e,t,n,r,i,o){_.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new Un(e,t,n,r,i,o)),this.mergeVertices()}function Un(e,t,n,r,i,o){k.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1;var c=[],u=[],l=[],h=[],d=0,f=0;function p(e,t,n,r,i,o,p,m,v,g,y){var b,x,w=o/v,_=p/g,S=o/2,M=p/2,T=m/2,A=v+1,E=g+1,C=0,P=0,L=new s;for(x=0;x<E;x++){var O=x*_-M;for(b=0;b<A;b++){var N=b*w-S;L[e]=N*r,L[t]=O*i,L[n]=T,u.push(L.x,L.y,L.z),L[e]=0,L[t]=0,L[n]=m>0?1:-1,l.push(L.x,L.y,L.z),h.push(b/v),h.push(1-x/g),C+=1}}for(x=0;x<g;x++)for(b=0;b<v;b++){var R=d+b+A*x,I=d+b+A*(x+1),D=d+(b+1)+A*(x+1),F=d+(b+1)+A*x;c.push(R,I,F),c.push(I,D,F),P+=6}a.addGroup(f,P,y),f+=P,d+=C}p("z","y","x",-1,-1,n,t,e,o=Math.floor(o)||1,i,0),p("z","y","x",1,-1,n,t,-e,o,i,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(c),this.addAttribute("position",new N(u,3)),this.addAttribute("normal",new N(l,3)),this.addAttribute("uv",new N(h,2))}function Bn(e,t,n,r,i,o,a,s){_.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new zn(e,t,n,r,i,o,a,s)),this.mergeVertices()}function zn(e,t,n,r,i,o,a,c){k.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:c};var u=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,c=void 0!==c?c:2*Math.PI;var l=[],h=[],d=[],f=[],p=0,m=[],v=n/2,g=0;function y(n){var i,o,m,y=new x,b=new s,w=0,_=!0===n?e:t,S=!0===n?1:-1;for(o=p,i=1;i<=r;i++)h.push(0,v*S,0),d.push(0,S,0),f.push(.5,.5),p++;for(m=p,i=0;i<=r;i++){var M=i/r*c+a,T=Math.cos(M),A=Math.sin(M);b.x=_*A,b.y=v*S,b.z=_*T,h.push(b.x,b.y,b.z),d.push(0,S,0),y.x=.5*T+.5,y.y=.5*A*S+.5,f.push(y.x,y.y),p++}for(i=0;i<r;i++){var E=o+i,C=m+i;!0===n?l.push(C,C+1,E):l.push(C+1,C,E),w+=3}u.addGroup(g,w,!0===n?1:2),g+=w}!function(){var o,y,b=new s,x=new s,w=0,_=(t-e)/n;for(y=0;y<=i;y++){var S=[],M=y/i,T=M*(t-e)+e;for(o=0;o<=r;o++){var A=o/r,E=A*c+a,C=Math.sin(E),P=Math.cos(E);x.x=T*C,x.y=-M*n+v,x.z=T*P,h.push(x.x,x.y,x.z),b.set(C,_,P).normalize(),d.push(b.x,b.y,b.z),f.push(A,1-M),S.push(p++)}m.push(S)}for(o=0;o<r;o++)for(y=0;y<i;y++){var L=m[y][o],O=m[y+1][o],N=m[y+1][o+1],R=m[y][o+1];l.push(L,O,R),l.push(O,N,R),w+=6}u.addGroup(g,w,0),g+=w}(),!1===o&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(l),this.addAttribute("position",new N(h,3)),this.addAttribute("normal",new N(d,3)),this.addAttribute("uv",new N(f,2))}Sn.prototype=Object.assign(Object.create(gn.prototype),{constructor:Sn,DefaultSettings_:{endingStart:Ht,endingEnd:Ht},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:a=t+r[i=r.length-2]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*n-t;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var c=.5*(n-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(s-n),this._offsetPrev=i*u,this._offsetNext=o*u},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,u=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,v=-h*m+2*h*p-h*f,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,b=d*m-d*p,x=0;x!==a;++x)i[x]=v*o[u+x]+g*o[c+x]+y*o[s+x]+b*o[l+x];return i}}),Mn.prototype=Object.assign(Object.create(gn.prototype),{constructor:Mn,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(Tn,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:_n.convertArray(e.times,Array),values:_n.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}),Object.assign(Tn.prototype,{constructor:Tn,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new Mn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new yn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Sn(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case Wt:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Wt;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=_n.arraySlice(n,i,o),this.values=_n.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&_n.isTypedArray(r)){a=0;for(var c=r.length;a!==c;++a){var u=r[a];if(isNaN(u)){console.error("KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=2302===this.getInterpolation(),i=1,o=e.length-1,a=1;a<o;++a){var s=!1,c=e[a];if(c!==e[a+1]&&(1!==a||c!==c[0]))if(r)s=!0;else for(var u=a*n,l=u-n,h=u+n,d=0;d!==n;++d){var f=t[u+d];if(f!==t[l+d]||f!==t[h+d]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var p=a*n,m=i*n;for(d=0;d!==n;++d)t[m+d]=t[p+d]}++i}}if(o>0){e[i]=e[o];for(p=o*n,m=i*n,d=0;d!==n;++d)t[m+d]=t[p+d];++i}return i!==e.length&&(this.times=_n.arraySlice(e,0,i),this.values=_n.arraySlice(t,0,i*n)),this}}),An.prototype=Object.assign(Object.create(Tn.prototype),{constructor:An,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Wt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),En.prototype=Object.assign(Object.create(Tn.prototype),{constructor:En,ValueTypeName:"color"}),Cn.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Cn,ValueTypeName:"number"}),Pn.prototype=Object.assign(Object.create(gn.prototype),{constructor:Pn,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=(n-t)/(r-t),l=s+a;s!==l;s+=4)c.slerpFlat(i,0,o,s-a,o,s,u);return i}}),Ln.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Ln,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new Pn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),On.prototype=Object.assign(Object.create(Tn.prototype),{constructor:On,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Wt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Nn.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Nn,ValueTypeName:"vector"}),Object.assign(Rn,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(In(n[i]).scale(r));return new Rn(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,o=n.length;i!==o;++i)t.push(Tn.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],c=[];s.push((a+i-1)%i,a,(a+1)%i),c.push(0,1,0);var u=_n.getKeyframeOrder(s);s=_n.sortedArray(s,1,u),c=_n.sortedArray(c,1,u),r||0!==s[0]||(s.push(i),c.push(c[0])),o.push(new Cn(".morphTargetInfluences["+t[a].name+"]",s,c).scale(1/n))}return new Rn(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],c=s.name.match(i);if(c&&c.length>1){var u=r[h=c[1]];u||(r[h]=u=[]),u.push(s)}}var l=[];for(var h in r)l.push(Rn.CreateFromMorphTargetSequence(h,r[h],t,n));return l},parseAnimation:function(e,t){if(!e)return console.error("AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];_n.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],c=0;c<s.length;c++){var u=s[c].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var l={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var d=0;d<u[h].morphTargets.length;d++)l[u[h].morphTargets[d]]=-1;for(var f in l){var p=[],m=[];for(d=0;d!==u[h].morphTargets.length;++d){var v=u[h];p.push(v.time),m.push(v.morphTarget===f?1:0)}r.push(new Cn(".morphTargetInfluence["+f+"]",p,m))}o=l.length*(a||1)}else{var g=".bones["+t[c].name+"]";n(Nn,g+".position",u,"pos",r),n(Ln,g+".quaternion",u,"rot",r),n(Nn,g+".scale",u,"scl",r)}}return 0===r.length?null:new Rn(i,o,r)}}),Object.assign(Rn.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Dn.prototype=Object.assign(Object.create(u.prototype),{constructor:Dn,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,c=this._bindingsByRootAndName,u=c[s];void 0===u&&(u={},c[s]=u);for(var l=0;l!==i;++l){var h=r[l],d=h.name,f=u[d];if(void 0!==f)o[l]=f;else{if(void 0!==(f=o[l])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,d));continue}var p=t&&t._propertyBindings[l].binding.parsedPath;++(f=new wn(xn.create(n,d,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(f,s,d),o[l]=f}a[l].resultBuffer=f.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,c=s[s.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,s[u]=c,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete a[i];e:{for(var u in a)break e;delete o[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new yn(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Rn.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var c=a.actionByRoot[r];if(void 0!==c)return c;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var u=new vn(this,i,t);return this._bindAction(u,s),this._addInactiveAction(u,o,r),u},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Rn.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){t[a]._update(r,e,i,o)}var s=this._bindings,c=this._nActiveBindings;for(a=0;a!==c;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var c=o[a];this._deactivateAction(c);var u=c._cacheIndex,l=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,l._cacheIndex=u,t[u]=l,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Fn.prototype=Object.assign(Object.create(p.prototype),{constructor:Fn,isBone:!0}),kn.prototype=Object.create(_.prototype),kn.prototype.constructor=kn,Un.prototype=Object.create(k.prototype),Un.prototype.constructor=Un,Bn.prototype=Object.create(_.prototype),Bn.prototype.constructor=Bn,zn.prototype=Object.create(k.prototype),zn.prototype.constructor=zn;var jn=function(){function e(e,n,r,i){if("undefined"==typeof Ammo)throw new Error("MMDPhysics: Import ammo.js https://github.com/kripken/ammo.js");r=r||[],i=i||{},this.manager=new t,this.mesh=e,this.unitStep=void 0!==i.unitStep?i.unitStep:1/65,this.maxStepNum=void 0!==i.maxStepNum?i.maxStepNum:3,this.gravity=new s(0,-98,0),void 0!==i.gravity&&this.gravity.copy(gravity),this.world=void 0!==i.world?i.world:null,this.bodies=[],this.constraints=[],this._init(e,n,r)}function t(){this.threeVector3s=[],this.threeMatrix4s=[],this.threeQuaternions=[],this.threeEulers=[],this.transforms=[],this.quaternions=[],this.vector3s=[]}function n(e,t,n,r){this.mesh=e,this.world=t,this.params=n,this.manager=r,this.body=null,this.bone=null,this.boneOffsetForm=null,this.boneOffsetFormInverse=null,this._init()}function r(e,t,n,r,i,o){this.mesh=e,this.world=t,this.bodyA=n,this.bodyB=r,this.params=i,this.manager=o,this.constraint=null,this._init()}function i(e,t){p.call(this),this.root=e,this.physics=t,this.matrix.copy(e.matrixWorld),this.matrixAutoUpdate=!1,this.materials=[],this.materials.push(new un({color:new v(16746632),wireframe:!0,depthTest:!1,depthWrite:!1,opacity:.25,transparent:!0})),this.materials.push(new un({color:new v(8978312),wireframe:!0,depthTest:!1,depthWrite:!1,opacity:.25,transparent:!0})),this.materials.push(new un({color:new v(8947967),wireframe:!0,depthTest:!1,depthWrite:!1,opacity:.25,transparent:!0})),this._init()}return e.prototype={constructor:e,update:function(e){var t,n=this.manager,r=this.mesh,i=!1,o=n.allocThreeVector3(),a=n.allocThreeQuaternion(),s=n.allocThreeVector3();return r.matrixWorld.decompose(o,a,s),1===s.x&&1===s.y&&1===s.z||(i=!0),i&&(null!==(t=r.parent)&&(r.parent=null),s.copy(this.mesh.scale),r.scale.set(1,1,1),r.updateMatrixWorld(!0)),this._updateRigidBodies(),this._stepSimulation(e),this._updateBones(),i&&(null!==t&&(t.parent=t),r.scale.copy(s)),n.freeThreeVector3(s),n.freeThreeQuaternion(a),n.freeThreeVector3(o),this},reset:function(){for(var e=0,t=this.bodies.length;e<t;e++)this.bodies[e].reset();return this},warmup:function(e){for(var t=0;t<e;t++)this.update(1/60);return this},setGravity:function(e){return this.world.setGravity(new Ammo.btVector3(e.x,e.y,e.z)),this.gravity.copy(e),this},createHelper:function(){return new i(this.mesh,this)},_init:function(e,t,n){var r=this.manager,i=e.parent;null!==i&&(i=null);var o=r.allocThreeVector3(),a=r.allocThreeQuaternion(),s=r.allocThreeVector3();o.copy(e.position),a.copy(e.quaternion),s.copy(e.scale),e.position.set(0,0,0),e.quaternion.set(0,0,0,1),e.scale.set(1,1,1),e.updateMatrixWorld(!0),null===this.world&&(this.world=this._createWorld(),this.setGravity(this.gravity)),this._initRigidBodies(t),this._initConstraints(n),null!==i&&(e.parent=i),e.position.copy(o),e.quaternion.copy(a),e.scale.copy(s),e.updateMatrixWorld(!0),this.reset(),r.freeThreeVector3(o),r.freeThreeQuaternion(a),r.freeThreeVector3(s)},_createWorld:function(){var e=new Ammo.btDefaultCollisionConfiguration,t=new Ammo.btCollisionDispatcher(e),n=new Ammo.btDbvtBroadphase,r=new Ammo.btSequentialImpulseConstraintSolver;return new Ammo.btDiscreteDynamicsWorld(t,n,r,e)},_initRigidBodies:function(e){for(var t=0,r=e.length;t<r;t++)this.bodies.push(new n(this.mesh,this.world,e[t],this.manager))},_initConstraints:function(e){for(var t=0,n=e.length;t<n;t++){var i=e[t],o=this.bodies[i.rigidBodyIndex1],a=this.bodies[i.rigidBodyIndex2];this.constraints.push(new r(this.mesh,this.world,o,a,i,this.manager))}},_stepSimulation:function(e){var t=this.unitStep,n=e,r=1+(e/t|0);n<t&&(n=t,r=1),r>this.maxStepNum&&(r=this.maxStepNum),this.world.stepSimulation(n,r,t)},_updateRigidBodies:function(){for(var e=0,t=this.bodies.length;e<t;e++)this.bodies[e].updateFromBone()},_updateBones:function(){for(var e=0,t=this.bodies.length;e<t;e++)this.bodies[e].updateBone()}},t.prototype={constructor:t,allocThreeVector3:function(){return this.threeVector3s.length>0?this.threeVector3s.pop():new s},freeThreeVector3:function(e){this.threeVector3s.push(e)},allocThreeMatrix4:function(){return this.threeMatrix4s.length>0?this.threeMatrix4s.pop():new a},freeThreeMatrix4:function(e){this.threeMatrix4s.push(e)},allocThreeQuaternion:function(){return this.threeQuaternions.length>0?this.threeQuaternions.pop():new c},freeThreeQuaternion:function(e){this.threeQuaternions.push(e)},allocThreeEuler:function(){return this.threeEulers.length>0?this.threeEulers.pop():new l},freeThreeEuler:function(e){this.threeEulers.push(e)},allocTransform:function(){return this.transforms.length>0?this.transforms.pop():new Ammo.btTransform},freeTransform:function(e){this.transforms.push(e)},allocQuaternion:function(){return this.quaternions.length>0?this.quaternions.pop():new Ammo.btQuaternion},freeQuaternion:function(e){this.quaternions.push(e)},allocVector3:function(){return this.vector3s.length>0?this.vector3s.pop():new Ammo.btVector3},freeVector3:function(e){this.vector3s.push(e)},setIdentity:function(e){e.setIdentity()},getBasis:function(e){var t=this.allocQuaternion();return e.getBasis().getRotation(t),t},getBasisAsMatrix3:function(e){var t=this.getBasis(e),n=this.quaternionToMatrix3(t);return this.freeQuaternion(t),n},getOrigin:function(e){return e.getOrigin()},setOrigin:function(e,t){e.getOrigin().setValue(t.x(),t.y(),t.z())},copyOrigin:function(e,t){var n=t.getOrigin();this.setOrigin(e,n)},setBasis:function(e,t){e.setRotation(t)},setBasisFromMatrix3:function(e,t){var n=this.matrix3ToQuaternion(t);this.setBasis(e,n),this.freeQuaternion(n)},setOriginFromArray3:function(e,t){e.getOrigin().setValue(t[0],t[1],t[2])},setOriginFromThreeVector3:function(e,t){e.getOrigin().setValue(t.x,t.y,t.z)},setBasisFromArray3:function(e,t){var n=this.allocThreeQuaternion(),r=this.allocThreeEuler();r.set(t[0],t[1],t[2]),this.setBasisFromThreeQuaternion(e,n.setFromEuler(r)),this.freeThreeEuler(r),this.freeThreeQuaternion(n)},setBasisFromThreeQuaternion:function(e,t){var n=this.allocQuaternion();n.setX(t.x),n.setY(t.y),n.setZ(t.z),n.setW(t.w),this.setBasis(e,n),this.freeQuaternion(n)},multiplyTransforms:function(e,t){var n=this.allocTransform();this.setIdentity(n);var r=this.getBasisAsMatrix3(e),i=this.getBasisAsMatrix3(t),o=this.getOrigin(e),a=this.getOrigin(t),s=this.multiplyMatrix3ByVector3(r,a),c=this.addVector3(s,o);this.setOrigin(n,c);var u=this.multiplyMatrices3(r,i);return this.setBasisFromMatrix3(n,u),this.freeVector3(s),this.freeVector3(c),n},inverseTransform:function(e){var t=this.allocTransform(),n=this.getBasisAsMatrix3(e),r=this.getOrigin(e),i=this.transposeMatrix3(n),o=this.negativeVector3(r),a=this.multiplyMatrix3ByVector3(i,o);return this.setOrigin(t,a),this.setBasisFromMatrix3(t,i),this.freeVector3(o),this.freeVector3(a),t},multiplyMatrices3:function(e,t){var n=[],r=this.rowOfMatrix3(e,0),i=this.rowOfMatrix3(e,1),o=this.rowOfMatrix3(e,2),a=this.columnOfMatrix3(t,0),s=this.columnOfMatrix3(t,1),c=this.columnOfMatrix3(t,2);return n[0]=this.dotVectors3(r,a),n[1]=this.dotVectors3(r,s),n[2]=this.dotVectors3(r,c),n[3]=this.dotVectors3(i,a),n[4]=this.dotVectors3(i,s),n[5]=this.dotVectors3(i,c),n[6]=this.dotVectors3(o,a),n[7]=this.dotVectors3(o,s),n[8]=this.dotVectors3(o,c),this.freeVector3(r),this.freeVector3(i),this.freeVector3(o),this.freeVector3(a),this.freeVector3(s),this.freeVector3(c),n},addVector3:function(e,t){var n=this.allocVector3();return n.setValue(e.x()+t.x(),e.y()+t.y(),e.z()+t.z()),n},dotVectors3:function(e,t){return e.x()*t.x()+e.y()*t.y()+e.z()*t.z()},rowOfMatrix3:function(e,t){var n=this.allocVector3();return n.setValue(e[3*t+0],e[3*t+1],e[3*t+2]),n},columnOfMatrix3:function(e,t){var n=this.allocVector3();return n.setValue(e[t+0],e[t+3],e[t+6]),n},negativeVector3:function(e){var t=this.allocVector3();return t.setValue(-e.x(),-e.y(),-e.z()),t},multiplyMatrix3ByVector3:function(e,t){var n=this.allocVector3(),r=this.rowOfMatrix3(e,0),i=this.rowOfMatrix3(e,1),o=this.rowOfMatrix3(e,2),a=this.dotVectors3(r,t),s=this.dotVectors3(i,t),c=this.dotVectors3(o,t);return n.setValue(a,s,c),this.freeVector3(r),this.freeVector3(i),this.freeVector3(o),n},transposeMatrix3:function(e){var t=[];return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t},quaternionToMatrix3:function(e){var t=[],n=e.x(),r=e.y(),i=e.z(),o=e.w(),a=n*n,s=r*r,c=i*i,u=n*r,l=r*i,h=i*n,d=n*o,f=r*o,p=i*o;return t[0]=1-2*(s+c),t[1]=2*(u-p),t[2]=2*(h+f),t[3]=2*(u+p),t[4]=1-2*(c+a),t[5]=2*(l-d),t[6]=2*(h-f),t[7]=2*(l+d),t[8]=1-2*(a+s),t},matrix3ToQuaternion:function(e){var t,n,r,i,o,a=e[0]+e[4]+e[8];a>0?(o=.25*(t=2*Math.sqrt(a+1)),n=(e[7]-e[5])/t,r=(e[2]-e[6])/t,i=(e[3]-e[1])/t):e[0]>e[4]&&e[0]>e[8]?(t=2*Math.sqrt(1+e[0]-e[4]-e[8]),o=(e[7]-e[5])/t,n=.25*t,r=(e[1]+e[3])/t,i=(e[2]+e[6])/t):e[4]>e[8]?(t=2*Math.sqrt(1+e[4]-e[0]-e[8]),o=(e[2]-e[6])/t,n=(e[1]+e[3])/t,r=.25*t,i=(e[5]+e[7])/t):(t=2*Math.sqrt(1+e[8]-e[0]-e[4]),o=(e[3]-e[1])/t,n=(e[2]+e[6])/t,r=(e[5]+e[7])/t,i=.25*t);var s=this.allocQuaternion();return s.setX(n),s.setY(r),s.setZ(i),s.setW(o),s}},n.prototype={constructor:e.RigidBody,reset:function(){return this._setTransformFromBone(),this},updateFromBone:function(){return-1!==this.params.boneIndex&&0===this.params.type&&this._setTransformFromBone(),this},updateBone:function(){return 0===this.params.type||-1===this.params.boneIndex?this:(this._updateBoneRotation(),1===this.params.type&&this._updateBonePosition(),this.bone.updateMatrixWorld(!0),2===this.params.type&&this._setPositionFromBone(),this)},_init:function(){var e=this.manager,t=this.params,n=this.mesh.skeleton.bones,r=-1===t.boneIndex?new Fn:n[t.boneIndex],i=function(e){switch(e.shapeType){case 0:return new Ammo.btSphereShape(e.width);case 1:return new Ammo.btBoxShape(new Ammo.btVector3(e.width,e.height,e.depth));case 2:return new Ammo.btCapsuleShape(e.width,e.height);default:throw"unknown shape type "+e.shapeType}}(t),o=0===t.type?0:t.weight,a=e.allocVector3();a.setValue(0,0,0),0!==o&&i.calculateLocalInertia(o,a);var s=e.allocTransform();e.setIdentity(s),e.setOriginFromArray3(s,t.position),e.setBasisFromArray3(s,t.rotation);var c=e.allocThreeVector3(),u=e.allocTransform();e.setIdentity(u),e.setOriginFromThreeVector3(u,r.getWorldPosition(c));var l=e.multiplyTransforms(u,s),h=new Ammo.btDefaultMotionState(l),d=new Ammo.btRigidBodyConstructionInfo(o,h,i,a);d.set_m_friction(t.friction),d.set_m_restitution(t.restitution);var f=new Ammo.btRigidBody(d);0===t.type&&(f.setCollisionFlags(2|f.getCollisionFlags()),f.setActivationState(4)),f.setDamping(t.positionDamping,t.rotationDamping),f.setSleepingThresholds(0,0),this.world.addRigidBody(f,1<<t.groupIndex,t.groupTarget),this.body=f,this.bone=r,this.boneOffsetForm=s,this.boneOffsetFormInverse=e.inverseTransform(s),e.freeVector3(a),e.freeTransform(l),e.freeTransform(u),e.freeThreeVector3(c)},_getBoneTransform:function(){var e=this.manager,t=e.allocThreeVector3(),n=e.allocThreeQuaternion(),r=e.allocThreeVector3();this.bone.matrixWorld.decompose(t,n,r);var i=e.allocTransform();e.setOriginFromThreeVector3(i,t),e.setBasisFromThreeQuaternion(i,n);var o=e.multiplyTransforms(i,this.boneOffsetForm);return e.freeTransform(i),e.freeThreeVector3(r),e.freeThreeQuaternion(n),e.freeThreeVector3(t),o},_getWorldTransformForBone:function(){var e=this.manager,t=e.allocTransform();this.body.getMotionState().getWorldTransform(t);var n=e.multiplyTransforms(t,this.boneOffsetFormInverse);return e.freeTransform(t),n},_setTransformFromBone:function(){var e=this.manager,t=this._getBoneTransform();this.body.setCenterOfMassTransform(t),this.body.getMotionState().setWorldTransform(t),e.freeTransform(t)},_setPositionFromBone:function(){var e=this.manager,t=this._getBoneTransform(),n=e.allocTransform();this.body.getMotionState().getWorldTransform(n),e.copyOrigin(n,t),this.body.setCenterOfMassTransform(n),this.body.getMotionState().setWorldTransform(n),e.freeTransform(n),e.freeTransform(t)},_updateBoneRotation:function(){var e=this.manager,t=this._getWorldTransformForBone(),n=e.getBasis(t),r=e.allocThreeQuaternion(),i=e.allocThreeQuaternion(),o=e.allocThreeQuaternion();r.set(n.x(),n.y(),n.z(),n.w()),i.setFromRotationMatrix(this.bone.matrixWorld),i.conjugate(),i.multiply(r),o.setFromRotationMatrix(this.bone.matrix),this.bone.quaternion.copy(i.multiply(o)),e.freeThreeQuaternion(r),e.freeThreeQuaternion(i),e.freeThreeQuaternion(o),e.freeQuaternion(n),e.freeTransform(t)},_updateBonePosition:function(){var e=this.manager,t=this._getWorldTransformForBone(),n=e.allocThreeVector3(),r=e.getOrigin(t);n.set(r.x(),r.y(),r.z());var i=this.bone.worldToLocal(n);this.bone.position.add(i),e.freeThreeVector3(n),e.freeTransform(t)}},r.prototype={constructor:r,_init:function(){var e=this.manager,t=this.params,n=this.bodyA,r=this.bodyB,i=e.allocTransform();e.setIdentity(i),e.setOriginFromArray3(i,t.position),e.setBasisFromArray3(i,t.rotation);var o=e.allocTransform(),a=e.allocTransform();n.body.getMotionState().getWorldTransform(o),r.body.getMotionState().getWorldTransform(a);var s=e.inverseTransform(o),c=e.inverseTransform(a),u=e.multiplyTransforms(s,i),l=e.multiplyTransforms(c,i),h=new Ammo.btGeneric6DofSpringConstraint(n.body,r.body,u,l,!0),d=e.allocVector3(),f=e.allocVector3(),p=e.allocVector3(),m=e.allocVector3();d.setValue(t.translationLimitation1[0],t.translationLimitation1[1],t.translationLimitation1[2]),f.setValue(t.translationLimitation2[0],t.translationLimitation2[1],t.translationLimitation2[2]),p.setValue(t.rotationLimitation1[0],t.rotationLimitation1[1],t.rotationLimitation1[2]),m.setValue(t.rotationLimitation2[0],t.rotationLimitation2[1],t.rotationLimitation2[2]),h.setLinearLowerLimit(d),h.setLinearUpperLimit(f),h.setAngularLowerLimit(p),h.setAngularUpperLimit(m);for(var v=0;v<3;v++)0!==t.springPosition[v]&&(h.enableSpring(v,!0),h.setStiffness(v,t.springPosition[v]));for(v=0;v<3;v++)0!==t.springRotation[v]&&(h.enableSpring(v+3,!0),h.setStiffness(v+3,t.springRotation[v]));if(void 0!==h.setParam)for(v=0;v<6;v++)h.setParam(2,.475,v);this.world.addConstraint(h,!0),this.constraint=h,e.freeTransform(i),e.freeTransform(o),e.freeTransform(a),e.freeTransform(s),e.freeTransform(c),e.freeTransform(u),e.freeTransform(l),e.freeVector3(d),e.freeVector3(f),e.freeVector3(p),e.freeVector3(m)}},i.prototype=Object.assign(Object.create(p.prototype),{constructor:i,updateMatrixWorld:function(){var e=new s,t=new c,n=new s,r=new a;return function(i){var o=this.root;if(this.visible){var a=this.physics.bodies;r.copy(o.matrixWorld).decompose(e,t,n).compose(e,t,n.set(1,1,1)).getInverse(r);for(var s=0,c=a.length;s<c;s++){var u=a[s].body,l=this.children[s],h=u.getCenterOfMassTransform(),d=h.getOrigin(),f=h.getRotation();l.position.set(d.x(),d.y(),d.z()).applyMatrix4(r),l.quaternion.setFromRotationMatrix(r).multiply(t.set(f.x(),f.y(),f.z(),f.w()))}}this.matrix.copy(o.matrixWorld).decompose(e,t,n).compose(e,t,n.set(1,1,1)),p.prototype.updateMatrixWorld.call(this,i)}}(),_init:function(){var e=this.physics.bodies;function t(e){switch(e.shapeType){case 0:return new B(e.width,16,8);case 1:return new Un(2*e.width,2*e.height,2*e.depth,8,8,8);case 2:return new function(e,t,n,r){var i=new zn(e,e,t,n,r,!0),o=new fn(new B(e,n,r,0,2*Math.PI,0,Math.PI/2)),a=new fn(new B(e,n,r,0,2*Math.PI,Math.PI/2,Math.PI/2));return o.position.set(0,t/2,0),a.position.set(0,-t/2,0),o.updateMatrix(),a.updateMatrix(),i.merge(o.geometry,o.matrix),i.merge(a.geometry,a.matrix),i}(e.width,e.height,16,8);default:return null}}for(var n=0,r=e.length;n<r;n++){var i=e[n].params;this.add(new fn(t(i),this.materials[i.type]))}}}),e}(),Vn=function(){function e(e){e=e||{},this.meshes=[],this.camera=null,this.cameraTarget=new p,this.cameraTarget.name="target",this.audio=null,this.audioManager=null,this.objects=new WeakMap,this.configuration={sync:void 0===e.sync||e.sync,afterglow:void 0!==e.afterglow?e.afterglow:0,resetPhysicsOnLoop:void 0===e.resetPhysicsOnLoop||e.resetPhysicsOnLoop},this.enabled={animation:!0,ik:!0,grant:!0,physics:!0,cameraAnimation:!0},this.onBeforePhysics=function(e){},this.sharedPhysics=!1,this.masterPhysics=null}function t(e,t){t=t||{},this.audio=e,this.elapsedTime=0,this.currentTime=0,this.delayTime=void 0!==t.delayTime?t.delayTime:0,this.audioDuration=this.audio.buffer.duration,this.duration=this.audioDuration+this.delayTime}function n(e,t){this.mesh=e,this.grants=t||[]}return e.prototype={constructor:e,add:function(e,t){if(t=t||{},e.isSkinnedMesh)this._addMesh(e,t);else if(e.isCamera)this._setupCamera(e,t);else{if("Audio"!==e.type)throw new Error("MMDAnimationHelper.add: accepts only SkinnedMesh or Camera or Audio instance.");this._setupAudio(e,t)}return this.configuration.sync&&this._syncDuration(),this},remove:function(e){if(e.isSkinnedMesh)this._removeMesh(e);else if(e.isCamera)this._clearCamera(e);else{if("Audio"!==e.type)throw new Error("MMDAnimationHelper.remove: accepts only SkinnedMesh or Camera or Audio instance.");this._clearAudio(e)}return this.configuration.sync&&this._syncDuration(),this},update:function(e){null!==this.audioManager&&this.audioManager.control(e);for(var t=0;t<this.meshes.length;t++)this._animateMesh(this.meshes[t],e);return this.sharedPhysics&&this._updateSharedPhysics(e),null!==this.camera&&this._animateCamera(this.camera,e),this},pose:function(e,t,n){!1!==(n=n||{}).resetPose&&e.pose();for(var r=e.skeleton.bones,i=t.bones,o={},a=0,u=r.length;a<u;a++)o[r[a].name]=a;var l=new s,h=new c;for(a=0,u=i.length;a<u;a++){var d=i[a],f=o[d.name];if(void 0!==f){var p=r[f];p.position.add(l.fromArray(d.translation)),p.quaternion.multiply(h.fromArray(d.quaternion))}}return e.updateMatrixWorld(!0),!1!==n.ik&&this._createCCDIKSolver(e).update(n.saveOriginalBonesBeforeIK),!1!==n.grant&&this.createGrantSolver(e).update(),this},enable:function(e,t){if(void 0===this.enabled[e])throw new Error("MMDAnimationHelper.enable: unknown key "+e);if(this.enabled[e]=t,"physics"===e)for(var n=0,r=this.meshes.length;n<r;n++)this._optimizeIK(this.meshes[n],t);return this},createGrantSolver:function(e){return new n(e,e.geometry.userData.MMD.grants)},_addMesh:function(e,t){if(this.meshes.indexOf(e)>=0)throw new Error("MMDAnimationHelper._addMesh: SkinnedMesh '"+e.name+"' has already been added.");return this.meshes.push(e),this.objects.set(e,{looped:!1}),this._setupMeshAnimation(e,t.animation),!1!==t.physics&&this._setupMeshPhysics(e,t),this},_setupCamera:function(e,t){if(this.camera===e)throw new Error("MMDAnimationHelper._setupCamera: Camera '"+e.name+"' has already been set.");return this.camera&&this.clearCamera(this.camera),this.camera=e,e.add(this.cameraTarget),this.objects.set(e,{}),void 0!==t.animation&&this._setupCameraAnimation(e,t.animation),this},_setupAudio:function(e,n){if(this.audio===e)throw new Error("MMDAnimationHelper._setupAudio: Audio '"+e.name+"' has already been set.");return this.audio&&this.clearAudio(this.audio),this.audio=e,this.audioManager=new t(e,n),this.objects.set(this.audioManager,{duration:this.audioManager.duration}),this},_removeMesh:function(e){for(var t=!1,n=0,r=0,i=this.meshes.length;r<i;r++)this.meshes[r]!==e?this.meshes[n++]=this.meshes[r]:(this.objects.delete(e),t=!0);if(!t)throw new Error("MMDAnimationHelper._removeMesh: SkinnedMesh '"+e.name+"' has not been added yet.");return this.meshes.length=n,this},_clearCamera:function(e){if(e!==this.camera)throw new Error("MMDAnimationHelper._clearCamera: Camera '"+e.name+"' has not been set yet.");return this.camera.remove(this.cameraTarget),this.objects.delete(this.camera),this.camera=null,this},_clearAudio:function(e){if(e!==this.audio)throw new Error("MMDAnimationHelper._clearAudio: Audio '"+e.name+"' has not been set yet.");return this.objects.delete(this.audioManager),this.audio=null,this.audioManager=null,this},_setupMeshAnimation:function(e,t){var n=this.objects.get(e);if(void 0!==t){var r=Array.isArray(t)?t:[t];n.mixer=new Dn(e);for(var i=0,o=r.length;i<o;i++)n.mixer.clipAction(r[i]).play();n.mixer.addEventListener("loop",function(e){var t=e.action._clip.tracks;t.length>0&&".bones"!==t[0].name.slice(0,6)||(n.looped=!0)})}return n.ikSolver=this._createCCDIKSolver(e),n.grantSolver=this.createGrantSolver(e),this},_setupCameraAnimation:function(e,t){var n=Array.isArray(t)?t:[t],r=this.objects.get(e);r.mixer=new Dn(e);for(var i=0,o=n.length;i<o;i++)r.mixer.clipAction(n[i]).play()},_setupMeshPhysics:function(e,t){var n=this.objects.get(e);if(void 0===t.world&&this.sharedPhysics){var r=this._getMasterPhysics();null!==r&&(world=r.world)}n.physics=this._createMMDPhysics(e,t),n.mixer&&!1!==t.animationWarmup&&(this._animateMesh(e,0),n.physics.reset()),n.physics.warmup(void 0!==t.warmup?t.warmup:60),this._optimizeIK(e,!0)},_animateMesh:function(e,t){var n=this.objects.get(e),r=n.mixer,i=n.ikSolver,o=n.grantSolver,a=n.physics,s=n.looped;r&&this.enabled.animation&&(this._restoreBones(e),r.update(t),this._saveBones(e),i&&this.enabled.ik&&(e.updateMatrixWorld(!0),i.update()),o&&this.enabled.grant&&o.update()),!0===s&&this.enabled.physics&&(a&&this.configuration.resetPhysicsOnLoop&&a.reset(),n.looped=!1),a&&this.enabled.physics&&!this.sharedPhysics&&(this.onBeforePhysics(e),a.update(t))},_animateCamera:function(e,t){var n=this.objects.get(e).mixer;n&&this.enabled.cameraAnimation&&(n.update(t),e.updateProjectionMatrix(),e.up.set(0,1,0),e.up.applyQuaternion(e.quaternion),e.lookAt(this.cameraTarget.position))},_optimizeIK:function(e,t){for(var n=e.geometry.userData.MMD.iks,r=e.geometry.userData.MMD.bones,i=0,o=n.length;i<o;i++)for(var a=n[i].links,s=0,c=a.length;s<c;s++){var u=a[s];u.enabled=!0!==t||!(r[u.index].rigidBodyType>0)}},_createCCDIKSolver:function(e){if(void 0===mn)throw new Error("MMDAnimationHelper: Import CCDIKSolver.");return new mn(e,e.geometry.userData.MMD.iks)},_createMMDPhysics:function(e,t){if(void 0===jn)throw new Error("MMDPhysics: Import MMDPhysics.");return new jn(e,e.geometry.userData.MMD.rigidBodies,e.geometry.userData.MMD.constraints,t)},_syncDuration:function(){for(var e=0,t=this.objects,n=this.meshes,r=this.camera,i=this.audioManager,o=0,a=n.length;o<a;o++){if(void 0!==(u=this.objects.get(n[o]).mixer))for(var s=0;s<u._actions.length;s++){var c=u._actions[s]._clip;t.has(c)||t.set(c,{duration:c.duration}),e=Math.max(e,t.get(c).duration)}}if(null!==r&&void 0!==(u=this.objects.get(r).mixer))for(o=0,a=u._actions.length;o<a;o++){c=u._actions[o]._clip;t.has(c)||t.set(c,{duration:c.duration}),e=Math.max(e,t.get(c).duration)}null!==i&&(e=Math.max(e,t.get(i).duration)),e+=this.configuration.afterglow;for(o=0,a=this.meshes.length;o<a;o++){var u;if(void 0!==(u=this.objects.get(this.meshes[o]).mixer)){s=0;for(var l=u._actions.length;s<l;s++)u._actions[s]._clip.duration=e}}if(null!==r&&void 0!==(u=this.objects.get(r).mixer))for(o=0,a=u._actions.length;o<a;o++)u._actions[o]._clip.duration=e;null!==i&&(i.duration=e)},_updatePropertyMixersBuffer:function(e){for(var t=this.objects.get(e).mixer,n=t._bindings,r=t._accuIndex,i=0,o=n.length;i<o;i++){var a=n[i],s=a.buffer,c=(r+1)*a.valueSize;a.binding.getValue(s,c)}},_saveBones:function(e){var t=this.objects.get(e),n=e.skeleton.bones,r=t.backupBones;void 0===r&&(r=new Float32Array(7*n.length),t.backupBones=r);for(var i=0,o=n.length;i<o;i++){var a=n[i];a.position.toArray(r,7*i),a.quaternion.toArray(r,7*i+3)}},_restoreBones:function(e){var t=this.objects.get(e).backupBones;if(void 0!==t)for(var n=e.skeleton.bones,r=0,i=n.length;r<i;r++){var o=n[r];o.position.fromArray(t,7*r),o.quaternion.fromArray(t,7*r+3)}},_getMasterPhysics:function(){if(null!==this.masterPhysics)return this.masterPhysics;for(var e=0,t=this.meshes.length;e<t;e++){var n=this.meshes[e].physics;if(void 0!==n&&null!==n)return this.masterPhysics=n,this.masterPhysics}return null},_updateSharedPhysics:function(e){if(0!==this.meshes.length&&this.enabled.physics&&this.sharedPhysics){var t=this._getMasterPhysics();if(null!==t){for(var n=0,r=this.meshes.length;n<r;n++){null!==(i=this.meshes[n].physics)&&void 0!==i&&i.updateRigidBodies()}t.stepSimulation(e);for(n=0,r=this.meshes.length;n<r;n++){var i;null!==(i=this.meshes[n].physics)&&void 0!==i&&i.updateBones()}}}}},t.prototype={constructor:t,control:function(e){return this.elapsed+=e,this.currentTime+=e,this._shouldStopAudio()&&this.audio.stop(),this._shouldStartAudio()&&this.audio.play(),this},_shouldStartAudio:function(){if(this.audio.isPlaying)return!1;for(;this.currentTime>=this.duration;)this.currentTime-=this.duration;return!(this.currentTime<this.delayTime)&&(this.audio.startTime=this.currentTime-this.delayTime,!0)},_shouldStopAudio:function(){return this.audio.isPlaying&&this.currentTime>=this.duration}},n.prototype={constructor:n,update:function(){var e=new c;return function(){for(var t=this.mesh.skeleton.bones,n=this.grants,r=0,i=n.length;r<i;r++){var o=n[r],a=t[o.index],s=t[o.parentIndex];o.isLocal?(o.affectPosition,o.affectRotation):(o.affectPosition,o.affectRotation&&(e.set(0,0,0,1),e.slerp(s.quaternion,o.ratio),a.quaternion.multiply(e)))}return this}}()},e}(),Gn=function(){};function Wn(){p.call(this),this.type="Camera",this.matrixWorldInverse=new a,this.projectionMatrix=new a,this.projectionMatrixInverse=new a}function Hn(e,t,n,r){Wn.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Gn.CreateRotationAnimation=function(e,t){return new Rn(null,e,[new Cn(".rotation["+(t=t||"x")+"]",[0,e],[0,360])])},Gn.CreateScaleAxisAnimation=function(e,t){return new Rn(null,e,[new Cn(".scale["+(t=t||"x")+"]",[0,e],[0,1])])},Gn.CreateShakeAnimation=function(e,t){for(var n=[],r=[],i=new s,o=0;o<10*e;o++)n.push(o/10),i.set(2*Math.random()-1,2*Math.random()-1,2*Math.random()-1).multiply(t).toArray(r,r.length);return new Rn(null,e,[new Nn(".position",n,r)])},Gn.CreatePulsationAnimation=function(e,t){for(var n=[],r=[],i=new s,o=0;o<10*e;o++){n.push(o/10);var a=Math.random()*t;i.set(a,a,a).toArray(r,r.length)}return new Rn(null,e,[new Nn(".scale",n,r)])},Gn.CreateVisibilityAnimation=function(e){return new Rn(null,e,[new An(".visible",[0,e/2,e],[!0,!1,!0])])},Gn.CreateMaterialColorAnimation=function(e,t){for(var n=[],r=[],i=e/t.length,o=0;o<=t.length;o++)n.push(o*i),r.push(t[o%t.length]);return new Rn(null,e,[new En(".material[0].color",n,r)])},Wn.prototype=Object.assign(Object.create(p.prototype),{constructor:Wn,isCamera:!0,copy:function(e,t){return p.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("Camera: .getWorldDirection() target is now required"),e=new s),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){p.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Hn.prototype=Object.assign(Object.create(Wn.prototype),{constructor:Hn,isPerspectiveCamera:!0,copy:function(e,t){return Wn.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*o.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*o.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*o.RAD2DEG*Math.atan(Math.tan(.5*o.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*o.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var s=a.fullWidth,c=a.fullHeight;i+=a.offsetX*r/s,t-=a.offsetY*n/c,r*=a.width/s,n*=a.height/c}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=p.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});var Xn={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}};function qn(e){cn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("ShaderMaterial: attributes should now be defined in BufferGeometry instead."),this.setValues(e))}function Yn(){p.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Jn(e,t,n,r,i,o){Wn.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}qn.prototype=Object.create(cn.prototype),qn.prototype.constructor=qn,qn.prototype.isShaderMaterial=!0,qn.prototype.copy=function(e){return cn.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Xn.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},qn.prototype.toJSON=function(e){var t=cn.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var r=this.uniforms[n].value;r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}return Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Yn.prototype=Object.assign(Object.create(p.prototype),{constructor:Yn,copy:function(e,t){return p.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=p.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Jn.prototype=Object.assign(Object.create(Wn.prototype),{constructor:Jn,isOrthographicCamera:!0,copy:function(e,t){return Wn.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var c=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;o=(i+=l*(this.view.offsetX/c))+l*(this.view.width/c),s=(a-=h*(this.view.offsetY/u))-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=p.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}});var Qn={getDataURL:function(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height;var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},Zn=0;function Kn(e,t,n,r,i,a,s,c,u,l){Object.defineProperty(this,"id",{value:Zn++}),this.uuid=o.generateUUID(),this.name="",this.image=void 0!==e?e:Kn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Kn.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Xe,this.wrapT=void 0!==r?r:Xe,this.magFilter=void 0!==i?i:Ze,this.minFilter=void 0!==a?a:$e,this.anisotropy=void 0!==u?u:1,this.format=void 0!==s?s:pt,this.type=void 0!==c?c:et,this.offset=new x(0,0),this.repeat=new x(1,1),this.center=new x(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new d,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:Jt,this.version=0,this.onUpdate=null}function $n(e,t,n){this.width=e,this.height=t,this.scissor=new S(0,0,e,t),this.scissorTest=!1,this.viewport=new S(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=Ze),this.texture=new Kn(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0===n.generateMipmaps||n.generateMipmaps,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function er(e,t,n,r){_.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new tr(e,t,n,r)),this.mergeVertices()}function tr(e,t,n,r){k.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i,o,a=(e=e||1)/2,s=(t=t||1)/2,c=Math.floor(n)||1,u=Math.floor(r)||1,l=c+1,h=u+1,d=e/c,f=t/u,p=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*f-s;for(i=0;i<l;i++){var b=i*d-a;m.push(b,-y,0),v.push(0,0,1),g.push(i/c),g.push(1-o/u)}}for(o=0;o<u;o++)for(i=0;i<c;i++){var x=i+l*o,w=i+l*(o+1),_=i+1+l*(o+1),S=i+1+l*o;p.push(x,w,S),p.push(w,_,S)}this.setIndex(p),this.addAttribute("position",new N(m,3)),this.addAttribute("normal",new N(v,3)),this.addAttribute("uv",new N(g,2))}Kn.DEFAULT_IMAGE=void 0,Kn.DEFAULT_MAPPING=ke,Kn.prototype=Object.assign(Object.create(u.prototype),{constructor:Kn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=o.generateUUID()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var a=0,s=r.length;a<s;a++)i.push(Qn.getDataURL(r[a]))}else i=Qn.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==ke)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case He:e.x=e.x-Math.floor(e.x);break;case Xe:e.x=e.x<0?0:1;break;case qe:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case He:e.y=e.y-Math.floor(e.y);break;case Xe:e.y=e.y<0?0:1;break;case qe:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Kn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),$n.prototype=Object.assign(Object.create(u.prototype),{constructor:$n,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),er.prototype=Object.create(_.prototype),er.prototype.constructor=er,tr.prototype=Object.create(k.prototype),tr.prototype.constructor=tr;var nr={defines:{DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tColor:{value:null},tDepth:{value:null},focus:{value:1},aspect:{value:1},aperture:{value:.025},maxblur:{value:1},nearClip:{value:1},farClip:{value:1e3}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","uniform sampler2D tColor;","uniform sampler2D tDepth;","uniform float maxblur;","uniform float aperture;","uniform float nearClip;","uniform float farClip;","uniform float focus;","uniform float aspect;","#include <packing>","float getDepth( const in vec2 screenPosition ) {","\t#if DEPTH_PACKING == 1","\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","\t#else","\treturn texture2D( tDepth, screenPosition ).x;","\t#endif","}","float getViewZ( const in float depth ) {","\t#if PERSPECTIVE_CAMERA == 1","\treturn perspectiveDepthToViewZ( depth, nearClip, farClip );","\t#else","\treturn orthographicDepthToViewZ( depth, nearClip, farClip );","\t#endif","}","void main() {","vec2 aspectcorrect = vec2( 1.0, aspect );","float viewZ = getViewZ( getDepth( vUv ) );","float factor = ( focus + viewZ );","vec2 dofblur = vec2 ( clamp( factor * aperture, -maxblur, maxblur ) );","vec2 dofblur9 = dofblur * 0.9;","vec2 dofblur7 = dofblur * 0.7;","vec2 dofblur4 = dofblur * 0.4;","vec4 col = vec4( 0.0 );","col += texture2D( tColor, vUv.xy );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15,  0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37,  0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37, -0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15, -0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.15,  0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.37,  0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.37, -0.15 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.15, -0.37 ) * aspectcorrect ) * dofblur9 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.40,  0.0  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur7 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29,  0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.4,   0.0  ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.29, -0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,  -0.4  ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29,  0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.4,   0.0  ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2( -0.29, -0.29 ) * aspectcorrect ) * dofblur4 );","col += texture2D( tColor, vUv.xy + ( vec2(  0.0,   0.4  ) * aspectcorrect ) * dofblur4 );","gl_FragColor = col / 41.0;","gl_FragColor.a = 1.0;","}"].join("\n")},rr={uniforms:{textureWidth:{value:1},textureHeight:{value:1},focalDepth:{value:1},focalLength:{value:24},fstop:{value:.9},tColor:{value:null},tDepth:{value:null},maxblur:{value:1},showFocus:{value:0},manualdof:{value:0},vignetting:{value:0},depthblur:{value:0},threshold:{value:.5},gain:{value:2},bias:{value:.5},fringe:{value:.7},znear:{value:.1},zfar:{value:100},noise:{value:1},dithering:{value:1e-4},pentagon:{value:0},shaderFocus:{value:1},focusCoords:{value:new x}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","uniform sampler2D tColor;","uniform sampler2D tDepth;","uniform float textureWidth;","uniform float textureHeight;","uniform float focalDepth;  //focal distance value in meters, but you may use autofocus option below","uniform float focalLength; //focal length in mm","uniform float fstop; //f-stop value","uniform bool showFocus; //show debug focus point and focal range (red = focal point, green = focal range)","","uniform float znear; // camera clipping start","uniform float zfar; // camera clipping end","//------------------------------------------","//user variables","const int samples = SAMPLES; //samples on the first ring","const int rings = RINGS; //ring count","const int maxringsamples = rings * samples;","uniform bool manualdof; // manual dof calculation","float ndofstart = 1.0; // near dof blur start","float ndofdist = 2.0; // near dof blur falloff distance","float fdofstart = 1.0; // far dof blur start","float fdofdist = 3.0; // far dof blur falloff distance","float CoC = 0.03; //circle of confusion size in mm (35mm film = 0.03mm)","uniform bool vignetting; // use optical lens vignetting","float vignout = 1.3; // vignetting outer border","float vignin = 0.0; // vignetting inner border","float vignfade = 22.0; // f-stops till vignete fades","uniform bool shaderFocus;","// disable if you use external focalDepth value","uniform vec2 focusCoords;","// autofocus point on screen (0.0,0.0 - left lower corner, 1.0,1.0 - upper right)","// if center of screen use vec2(0.5, 0.5);","uniform float maxblur;","//clamp value of max blur (0.0 = no blur, 1.0 default)","uniform float threshold; // highlight threshold;","uniform float gain; // highlight gain;","uniform float bias; // bokeh edge bias","uniform float fringe; // bokeh chromatic aberration / fringing","uniform bool noise; //use noise instead of pattern for sample dithering","uniform float dithering;","uniform bool depthblur; // blur the depth buffer","float dbsize = 1.25; // depth blur size","","uniform bool pentagon; //use pentagon as bokeh shape?","float feather = 0.4; //pentagon shape feather","//------------------------------------------","float penta(vec2 coords) {","//pentagonal shape","float scale = float(rings) - 1.3;","vec4  HS0 = vec4( 1.0,         0.0,         0.0,  1.0);","vec4  HS1 = vec4( 0.309016994, 0.951056516, 0.0,  1.0);","vec4  HS2 = vec4(-0.809016994, 0.587785252, 0.0,  1.0);","vec4  HS3 = vec4(-0.809016994,-0.587785252, 0.0,  1.0);","vec4  HS4 = vec4( 0.309016994,-0.951056516, 0.0,  1.0);","vec4  HS5 = vec4( 0.0        ,0.0         , 1.0,  1.0);","vec4  one = vec4( 1.0 );","vec4 P = vec4((coords),vec2(scale, scale));","vec4 dist = vec4(0.0);","float inorout = -4.0;","dist.x = dot( P, HS0 );","dist.y = dot( P, HS1 );","dist.z = dot( P, HS2 );","dist.w = dot( P, HS3 );","dist = smoothstep( -feather, feather, dist );","inorout += dot( dist, one );","dist.x = dot( P, HS4 );","dist.y = HS5.w - abs( P.z );","dist = smoothstep( -feather, feather, dist );","inorout += dist.x;","return clamp( inorout, 0.0, 1.0 );","}","float bdepth(vec2 coords) {","// Depth buffer blur","float d = 0.0;","float kernel[9];","vec2 offset[9];","vec2 wh = vec2(1.0/textureWidth,1.0/textureHeight) * dbsize;","offset[0] = vec2(-wh.x,-wh.y);","offset[1] = vec2( 0.0, -wh.y);","offset[2] = vec2( wh.x -wh.y);","offset[3] = vec2(-wh.x,  0.0);","offset[4] = vec2( 0.0,   0.0);","offset[5] = vec2( wh.x,  0.0);","offset[6] = vec2(-wh.x, wh.y);","offset[7] = vec2( 0.0,  wh.y);","offset[8] = vec2( wh.x, wh.y);","kernel[0] = 1.0/16.0;   kernel[1] = 2.0/16.0;   kernel[2] = 1.0/16.0;","kernel[3] = 2.0/16.0;   kernel[4] = 4.0/16.0;   kernel[5] = 2.0/16.0;","kernel[6] = 1.0/16.0;   kernel[7] = 2.0/16.0;   kernel[8] = 1.0/16.0;","for( int i=0; i<9; i++ ) {","float tmp = texture2D(tDepth, coords + offset[i]).r;","d += tmp * kernel[i];","}","return d;","}","vec3 color(vec2 coords,float blur) {","//processing the sample","vec3 col = vec3(0.0);","vec2 texel = vec2(1.0/textureWidth,1.0/textureHeight);","col.r = texture2D(tColor,coords + vec2(0.0,1.0)*texel*fringe*blur).r;","col.g = texture2D(tColor,coords + vec2(-0.866,-0.5)*texel*fringe*blur).g;","col.b = texture2D(tColor,coords + vec2(0.866,-0.5)*texel*fringe*blur).b;","vec3 lumcoeff = vec3(0.299,0.587,0.114);","float lum = dot(col.rgb, lumcoeff);","float thresh = max((lum-threshold)*gain, 0.0);","return col+mix(vec3(0.0),col,thresh*blur);","}","vec3 debugFocus(vec3 col, float blur, float depth) {","float edge = 0.002*depth; //distance based edge smoothing","float m = clamp(smoothstep(0.0,edge,blur),0.0,1.0);","float e = clamp(smoothstep(1.0-edge,1.0,blur),0.0,1.0);","col = mix(col,vec3(1.0,0.5,0.0),(1.0-m)*0.6);","col = mix(col,vec3(0.0,0.5,1.0),((1.0-e)-(1.0-m))*0.2);","return col;","}","float linearize(float depth) {","return -zfar * znear / (depth * (zfar - znear) - zfar);","}","float vignette() {","float dist = distance(vUv.xy, vec2(0.5,0.5));","dist = smoothstep(vignout+(fstop/vignfade), vignin+(fstop/vignfade), dist);","return clamp(dist,0.0,1.0);","}","float gather(float i, float j, int ringsamples, inout vec3 col, float w, float h, float blur) {","float rings2 = float(rings);","float step = PI*2.0 / float(ringsamples);","float pw = cos(j*step)*i;","float ph = sin(j*step)*i;","float p = 1.0;","if (pentagon) {","p = penta(vec2(pw,ph));","}","col += color(vUv.xy + vec2(pw*w,ph*h), blur) * mix(1.0, i/rings2, bias) * p;","return 1.0 * mix(1.0, i /rings2, bias) * p;","}","void main() {","//scene depth calculation","float depth = linearize(texture2D(tDepth,vUv.xy).x);","// Blur depth?","if ( depthblur ) {","depth = linearize(bdepth(vUv.xy));","}","//focal plane calculation","float fDepth = focalDepth;","if (shaderFocus) {","fDepth = linearize(texture2D(tDepth,focusCoords).x);","}","// dof blur factor calculation","float blur = 0.0;","if (manualdof) {","float a = depth-fDepth; // Focal plane","float b = (a-fdofstart)/fdofdist; // Far DoF","float c = (-a-ndofstart)/ndofdist; // Near Dof","blur = (a>0.0) ? b : c;","} else {","float f = focalLength; // focal length in mm","float d = fDepth*1000.0; // focal plane in mm","float o = depth*1000.0; // depth in mm","float a = (o*f)/(o-f);","float b = (d*f)/(d-f);","float c = (d-f)/(d*fstop*CoC);","blur = abs(a-b)*c;","}","blur = clamp(blur,0.0,1.0);","// calculation of pattern for dithering","vec2 noise = vec2(rand(vUv.xy), rand( vUv.xy + vec2( 0.4, 0.6 ) ) )*dithering*blur;","// getting blur x and y step factor","float w = (1.0/textureWidth)*blur*maxblur+noise.x;","float h = (1.0/textureHeight)*blur*maxblur+noise.y;","// calculation of final color","vec3 col = vec3(0.0);","if(blur < 0.05) {","//some optimization thingy","col = texture2D(tColor, vUv.xy).rgb;","} else {","col = texture2D(tColor, vUv.xy).rgb;","float s = 1.0;","int ringsamples;","for (int i = 1; i <= rings; i++) {","","ringsamples = i * samples;","for (int j = 0 ; j < maxringsamples ; j++) {","if (j >= ringsamples) break;","s += gather(float(i), float(j), ringsamples, col, w, h, blur);","}","","}","col /= s; //divide by sample count","}","if (showFocus) {","col = debugFocus(col, blur, depth);","}","if (vignetting) {","col *= vignette();","}","gl_FragColor.rgb = col;","gl_FragColor.a = 1.0;","} "].join("\n")},ir={uniforms:{mNear:{value:1},mFar:{value:1e3}},vertexShader:["varying float vViewZDepth;","void main() {","\t#include <begin_vertex>","\t#include <project_vertex>","\tvViewZDepth = - mvPosition.z;","}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","varying float vViewZDepth;","void main() {","\tfloat color = 1.0 - smoothstep( mNear, mFar, vViewZDepth );","\tgl_FragColor = vec4( vec3( color ), 1.0 );","} "].join("\n")},or=function(e,t,n,r){Hn.call(this,e,t,n,r),this.type="CinematicCamera",this.postprocessing={enabled:!0},this.shaderSettings={rings:3,samples:4};var i=ir;this.materialDepth=new qn({uniforms:i.uniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader}),this.materialDepth.uniforms.mNear.value=n,this.materialDepth.uniforms.mFar.value=r,this.setLens(),this.initPostProcessing()};(or.prototype=Object.create(Hn.prototype)).constructor=or,or.prototype.setLens=function(e,t,n,r){void 0===e&&(e=35),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e),void 0===n&&(n=8),void 0===r&&(r=.019),this.fNumber=n,this.coc=r,this.aperture=e/this.fNumber,this.hyperFocal=e*e/(this.aperture*this.coc)},or.prototype.linearize=function(e){var t=this.far,n=this.near;return-t*n/(e*(t-n)-t)},or.prototype.smoothstep=function(e,t,n){var r=this.saturate((n-e)/(t-e));return r*r*(3-2*r)},or.prototype.saturate=function(e){return Math.max(0,Math.min(1,e))},or.prototype.focusAt=function(e){void 0===e&&(e=20);var t=this.getFocalLength();this.focus=e,this.nearPoint=this.hyperFocal*this.focus/(this.hyperFocal+(this.focus-t)),this.farPoint=this.hyperFocal*this.focus/(this.hyperFocal-(this.focus-t)),this.depthOfField=this.farPoint-this.nearPoint,this.depthOfField<0&&(this.depthOfField=0),this.sdistance=this.smoothstep(this.near,this.far,this.focus),this.ldistance=this.linearize(1-this.sdistance),this.postprocessing.bokeh_uniforms.focalDepth.value=this.ldistance},or.prototype.initPostProcessing=function(){if(this.postprocessing.enabled){this.postprocessing.scene=new Yn,this.postprocessing.camera=new Jn(i.innerWidth/-2,i.innerWidth/2,i.innerHeight/2,i.innerHeight/-2,-1e4,1e4),this.postprocessing.scene.add(this.postprocessing.camera);var e={minFilter:Ze,magFilter:Ze,format:ft};this.postprocessing.rtTextureDepth=new $n(i.innerWidth,i.innerHeight,e),this.postprocessing.rtTextureColor=new $n(i.innerWidth,i.innerHeight,e);var t=nr;this.postprocessing.bokeh_uniforms=Xn.clone(t.uniforms),this.postprocessing.bokeh_uniforms.tColor.value=this.postprocessing.rtTextureColor.texture,this.postprocessing.bokeh_uniforms.tDepth.value=this.postprocessing.rtTextureDepth.texture,this.postprocessing.bokeh_uniforms.manualdof.value=0,this.postprocessing.bokeh_uniforms.shaderFocus.value=0,this.postprocessing.bokeh_uniforms.fstop.value=2.8,this.postprocessing.bokeh_uniforms.showFocus.value=1,this.postprocessing.bokeh_uniforms.focalDepth.value=.1,this.postprocessing.bokeh_uniforms.znear.value=this.near,this.postprocessing.bokeh_uniforms.zfar.value=this.near,this.postprocessing.bokeh_uniforms.textureWidth.value=i.innerWidth,this.postprocessing.bokeh_uniforms.textureHeight.value=i.innerHeight,this.postprocessing.materialBokeh=new qn({uniforms:this.postprocessing.bokeh_uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,defines:{RINGS:this.shaderSettings.rings,SAMPLES:this.shaderSettings.samples,DEPTH_PACKING:1}}),this.postprocessing.quad=new fn(new tr(i.innerWidth,i.innerHeight),this.postprocessing.materialBokeh),this.postprocessing.quad.position.z=-500,this.postprocessing.scene.add(this.postprocessing.quad)}},or.prototype.renderCinematic=function(e,t){this.postprocessing.enabled&&(t.clear(),e.overrideMaterial=null,t.render(e,camera,this.postprocessing.rtTextureColor,!0),e.overrideMaterial=this.materialDepth,t.render(e,camera,this.postprocessing.rtTextureDepth,!0),t.render(this.postprocessing.scene,this.postprocessing.camera))};var ar={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function sr(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var cr=new sr,ur={};function lr(e){this.manager=void 0!==e?e:cr}function hr(e){ln.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function dr(e){cn.call(this),this.type="MeshDepthMaterial",this.depthPacking=nn,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function fr(e){cn.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new s,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function pr(e){cn.call(this),this.type="MeshLambertMaterial",this.color=new v(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new v(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function mr(e){cn.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=on,this.normalScale=new x(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function vr(e){cn.call(this),this.type="MeshPhongMaterial",this.color=new v(16777215),this.specular=new v(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new v(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=on,this.normalScale=new x(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Pe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function gr(e){cn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new v(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new v(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=on,this.normalScale=new x(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function yr(e){gr.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function br(e){vr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function xr(e){cn.call(this),this.type="PointsMaterial",this.color=new v(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function wr(e){qn.call(this,e),this.type="RawShaderMaterial"}function _r(e){cn.call(this),this.type="ShadowMaterial",this.color=new v(0),this.transparent=!0,this.setValues(e)}function Sr(e){cn.call(this),this.type="SpriteMaterial",this.color=new v(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function Mr(e){this.manager=void 0!==e?e:cr,this.textures={}}function Tr(e){this.manager=void 0!==e?e:cr}function Ar(e){this.manager=void 0!==e?e:cr}function Er(){}Object.assign(lr.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var o=this,a=ar.get(e);if(void 0!==a)return o.manager.itemStart(e),setTimeout(function(){t&&t(a),o.manager.itemEnd(e)},0),a;if(void 0===ur[e]){var s=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var c=s[1],u=!!s[2],l=s[3];l=i.decodeURIComponent(l),u&&(l=i.atob(l));try{var h,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var f=new Uint8Array(l.length),p=0;p<l.length;p++)f[p]=l.charCodeAt(p);h="blob"===d?new Blob([f.buffer],{type:c}):f.buffer;break;case"document":var m=new DOMParser;h=m.parseFromString(l,c);break;case"json":h=JSON.parse(l);break;default:h=l}i.setTimeout(function(){t&&t(h),o.manager.itemEnd(e)},0)}catch(t){i.setTimeout(function(){r&&r(t),o.manager.itemEnd(e),o.manager.itemError(e)},0)}}else{ur[e]=[],ur[e].push({onLoad:t,onProgress:n,onError:r});var v=new XMLHttpRequest;for(var g in v.open("GET",e,!0),v.addEventListener("load",function(t){var n=this.response;ar.add(e,n);var r=ur[e];if(delete ur[e],200===this.status||0===this.status){0===this.status&&console.warn("FileLoader: HTTP Status 0 received.");for(var i=0,a=r.length;i<a;i++){(s=r[i]).onLoad&&s.onLoad(n)}o.manager.itemEnd(e)}else{for(i=0,a=r.length;i<a;i++){var s;(s=r[i]).onError&&s.onError(t)}o.manager.itemEnd(e),o.manager.itemError(e)}},!1),v.addEventListener("progress",function(t){for(var n=ur[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}},!1),v.addEventListener("error",function(t){var n=ur[e];delete ur[e];for(var r=0,i=n.length;r<i;r++){var a=n[r];a.onError&&a.onError(t)}o.manager.itemEnd(e),o.manager.itemError(e)},!1),v.addEventListener("abort",function(t){var n=ur[e];delete ur[e];for(var r=0,i=n.length;r<i;r++){var a=n[r];a.onError&&a.onError(t)}o.manager.itemEnd(e),o.manager.itemError(e)},!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)v.setRequestHeader(g,this.requestHeader[g]);v.send(null)}return o.manager.itemStart(e),v}ur[e].push({onLoad:t,onProgress:n,onError:r})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),hr.prototype=Object.create(ln.prototype),hr.prototype.constructor=hr,hr.prototype.isLineDashedMaterial=!0,hr.prototype.copy=function(e){return ln.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this},dr.prototype=Object.create(cn.prototype),dr.prototype.constructor=dr,dr.prototype.isMeshDepthMaterial=!0,dr.prototype.copy=function(e){return cn.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},fr.prototype=Object.create(cn.prototype),fr.prototype.constructor=fr,fr.prototype.isMeshDistanceMaterial=!0,fr.prototype.copy=function(e){return cn.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},pr.prototype=Object.create(cn.prototype),pr.prototype.constructor=pr,pr.prototype.isMeshLambertMaterial=!0,pr.prototype.copy=function(e){return cn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},mr.prototype=Object.create(cn.prototype),mr.prototype.constructor=mr,mr.prototype.isMeshNormalMaterial=!0,mr.prototype.copy=function(e){return cn.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},vr.prototype=Object.create(cn.prototype),vr.prototype.constructor=vr,vr.prototype.isMeshPhongMaterial=!0,vr.prototype.copy=function(e){return cn.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},gr.prototype=Object.create(cn.prototype),gr.prototype.constructor=gr,gr.prototype.isMeshStandardMaterial=!0,gr.prototype.copy=function(e){return cn.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},yr.prototype=Object.create(gr.prototype),yr.prototype.constructor=yr,yr.prototype.isMeshPhysicalMaterial=!0,yr.prototype.copy=function(e){return gr.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},br.prototype=Object.create(vr.prototype),br.prototype.constructor=br,br.prototype.isMeshToonMaterial=!0,br.prototype.copy=function(e){return vr.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},xr.prototype=Object.create(cn.prototype),xr.prototype.constructor=xr,xr.prototype.isPointsMaterial=!0,xr.prototype.copy=function(e){return cn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},wr.prototype=Object.create(qn.prototype),wr.prototype.constructor=wr,wr.prototype.isRawShaderMaterial=!0,_r.prototype=Object.create(cn.prototype),_r.prototype.constructor=_r,_r.prototype.isShadowMaterial=!0,_r.prototype.copy=function(e){return cn.prototype.copy.call(this,e),this.color.copy(e.color),this},Sr.prototype=Object.create(cn.prototype),Sr.prototype.constructor=Sr,Sr.prototype.isSpriteMaterial=!0,Sr.prototype.copy=function(e){return cn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this},Object.assign(Mr.prototype,{load:function(e,t,n,r){var i=this;new lr(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("MaterialLoader: Undefined texture",e),t[e]}var r=new{LineBasicMaterial:ln,LineDashedMaterial:hr,MeshBasicMaterial:un,MeshDepthMaterial:dr,MeshDistanceMaterial:fr,MeshLambertMaterial:pr,MeshNormalMaterial:mr,MeshPhongMaterial:vr,MeshPhysicalMaterial:yr,MeshStandardMaterial:gr,MeshToonMaterial:br,PointsMaterial:xr,RawShaderMaterial:wr,ShaderMaterial:qn,ShadowMaterial:_r,SpriteMaterial:Sr}[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.uniforms)for(var i in e.uniforms){var o=e.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=(new v).setHex(o.value);break;case"v2":r.uniforms[i].value=(new x).fromArray(o.value);break;case"v3":r.uniforms[i].value=(new s).fromArray(o.value);break;case"v4":r.uniforms[i].value=(new S).fromArray(o.value);break;case"m4":r.uniforms[i].value=(new a).fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var c=e.normalScale;!1===Array.isArray(c)&&(c=[c,c]),r.normalScale=(new x).fromArray(c)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),r}}),Object.assign(Tr.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=ar.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout(function(){t&&t(o),i.manager.itemEnd(e)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),ar.add(e,this),t&&t(this),i.manager.itemEnd(e)}function c(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ar.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new Kn,o=new Tr(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(n){i.image=n;var r=e.search(/\.jpe?g$/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?ft:pt,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Er.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],o=t[n+1];if(i.test(e))return o}return null}},Object.assign(Er.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:function(){var e={NoBlending:$,NormalBlending:ee,AdditiveBlending:te,SubtractiveBlending:ne,MultiplyBlending:re,CustomBlending:ie},t=new v,n=new Ar,r=new Mr;return function(i,a,s){var c={};function u(e,t,r,i,u){var l,h=a+e,d=Er.Handlers.get(h);null!==d?l=d.load(h):(n.setCrossOrigin(s),l=n.load(h)),void 0!==t&&(l.repeat.fromArray(t),1!==t[0]&&(l.wrapS=He),1!==t[1]&&(l.wrapT=He)),void 0!==r&&l.offset.fromArray(r),void 0!==i&&("repeat"===i[0]&&(l.wrapS=He),"mirror"===i[0]&&(l.wrapS=qe),"repeat"===i[1]&&(l.wrapT=He),"mirror"===i[1]&&(l.wrapT=qe)),void 0!==u&&(l.anisotropy=u);var f=o.generateUUID();return c[f]=l,f}var l={uuid:o.generateUUID(),type:"MeshLambertMaterial"};for(var h in i){var d=i[h];switch(h){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=d;break;case"blending":l.blending=e[d];break;case"colorAmbient":case"mapAmbient":console.warn("Loader.createMaterial:",h,"is no longer supported.");break;case"colorDiffuse":l.color=t.fromArray(d).getHex();break;case"colorSpecular":l.specular=t.fromArray(d).getHex();break;case"colorEmissive":l.emissive=t.fromArray(d).getHex();break;case"specularCoef":l.shininess=d;break;case"shading":"basic"===d.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===d.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===d.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=u(d,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=u(d,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=u(d,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=u(d,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=u(d,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=d;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=u(d,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=d;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=u(d,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=u(d,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=u(d,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=u(d,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=Y;break;case"doubleSided":l.side=J;break;case"transparency":console.warn("Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=d;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[h]=d;break;case"vertexColors":!0===d&&(l.vertexColors=K),"face"===d&&(l.vertexColors=Z);break;default:console.error("Loader.createMaterial: Unsupported",h,d)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),r.setTextures(c),r.parse(l)}}()});var Cr={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function Pr(e){"boolean"==typeof e&&(console.warn("JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:cr,this.withCredentials=!1}Object.assign(Pr.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Cr.extractUrlBase(e),a=new lr(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,function(n){var r=JSON.parse(n),a=r.metadata;if(void 0!==a){var s=a.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("JSONLoader: "+e+" should be loaded with ObjectLoader instead.")}var c=i.parse(r,o);t(c.geometry,c.materials)},n,r)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setTexturePath:function(e){return this.texturePath=e,this},parse:function(){return function(e,t){void 0!==e.data&&(e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var n=new _;return function(e,t){function n(e,t){return e&1<<t}var r,i,o,a,c,u,l,h,d,f,p,m,y,b,w,_,S,M,T,A,E,C,P,L,O,N=e.faces,R=e.vertices,I=e.normals,D=e.colors,F=e.scale,k=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&k++;for(r=0;r<k;r++)t.faceVertexUvs[r]=[]}for(a=0,c=R.length;a<c;)(M=new s).x=R[a++]*F,M.y=R[a++]*F,M.z=R[a++]*F,t.vertices.push(M);for(a=0,c=N.length;a<c;)if(p=n(f=N[a++],0),m=n(f,1),y=n(f,3),b=n(f,4),w=n(f,5),_=n(f,6),S=n(f,7),p){if((A=new g).a=N[a],A.b=N[a+1],A.c=N[a+3],(E=new g).a=N[a+1],E.b=N[a+2],E.c=N[a+3],a+=4,m&&(d=N[a++],A.materialIndex=d,E.materialIndex=d),o=t.faces.length,y)for(r=0;r<k;r++)for(L=e.uvs[r],t.faceVertexUvs[r][o]=[],t.faceVertexUvs[r][o+1]=[],i=0;i<4;i++)O=new x(L[2*(h=N[a++])],L[2*h+1]),2!==i&&t.faceVertexUvs[r][o].push(O),0!==i&&t.faceVertexUvs[r][o+1].push(O);if(b&&(l=3*N[a++],A.normal.set(I[l++],I[l++],I[l]),E.normal.copy(A.normal)),w)for(r=0;r<4;r++)l=3*N[a++],P=new s(I[l++],I[l++],I[l]),2!==r&&A.vertexNormals.push(P),0!==r&&E.vertexNormals.push(P);if(_&&(C=D[u=N[a++]],A.color.setHex(C),E.color.setHex(C)),S)for(r=0;r<4;r++)C=D[u=N[a++]],2!==r&&A.vertexColors.push(new v(C)),0!==r&&E.vertexColors.push(new v(C));t.faces.push(A),t.faces.push(E)}else{if((T=new g).a=N[a++],T.b=N[a++],T.c=N[a++],m&&(d=N[a++],T.materialIndex=d),o=t.faces.length,y)for(r=0;r<k;r++)for(L=e.uvs[r],t.faceVertexUvs[r][o]=[],i=0;i<3;i++)O=new x(L[2*(h=N[a++])],L[2*h+1]),t.faceVertexUvs[r][o].push(O);if(b&&(l=3*N[a++],T.normal.set(I[l++],I[l++],I[l])),w)for(r=0;r<3;r++)l=3*N[a++],P=new s(I[l++],I[l++],I[l]),T.vertexNormals.push(P);if(_&&(u=N[a++],T.color.setHex(D[u])),S)for(r=0;r<3;r++)u=N[a++],T.vertexColors.push(new v(D[u]));t.faces.push(T)}}(e,n),function(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;r<i;r+=n){var o=e.skinWeights[r],a=n>1?e.skinWeights[r+1]:0,s=n>2?e.skinWeights[r+2]:0,c=n>3?e.skinWeights[r+3]:0;t.skinWeights.push(new S(o,a,s,c))}if(e.skinIndices)for(r=0,i=e.skinIndices.length;r<i;r+=n){var u=e.skinIndices[r],l=n>1?e.skinIndices[r+1]:0,h=n>2?e.skinIndices[r+2]:0,d=n>3?e.skinIndices[r+3]:0;t.skinIndices.push(new S(u,l,h,d))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,n),function(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var r=0,i=e.morphTargets.length;r<i;r++){t.morphTargets[r]={},t.morphTargets[r].name=e.morphTargets[r].name,t.morphTargets[r].vertices=[];for(var o=t.morphTargets[r].vertices,a=e.morphTargets[r].vertices,c=0,u=a.length;c<u;c+=3){var l=new s;l.x=a[c]*n,l.y=a[c+1]*n,l.z=a[c+2]*n,o.push(l)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('JSONLoader: "morphColors" no longer supported. Using them as face colors.');var h=t.faces,d=e.morphColors[0].colors;for(r=0,i=h.length;r<i;r++)h[r].color.fromArray(d,3*r)}}(e,n),function(e,t){var n=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var i=0;i<r.length;i++){var o=Rn.parseAnimation(r[i],t.bones);o&&n.push(o)}if(t.morphTargets){var a=Rn.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(a)}n.length>0&&(t.animations=n)}(e,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:{geometry:n,materials:Er.prototype.initMaterials(e.materials,t,this.crossOrigin)}}}()});var Lr=function(e){"boolean"==typeof e&&(console.warn("BinaryLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:cr};Lr.prototype={constructor:Lr,crossOrigin:"anonymous",load:function(e,t,n,r){var i=this.texturePath||Cr.extractUrlBase(e),o=this.binaryPath||Cr.extractUrlBase(e),a=this;new lr(this.manager).load(e,function(e){var s=JSON.parse(e),c=o+s.buffers,u=new lr(a.manager);u.setResponseType("arraybuffer"),u.load(c,function(e){a.parse(e,t,i,s.materials)},n,r)},n,r)},setBinaryPath:function(e){return this.binaryPath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},setTexturePath:function(e){return this.texturePath=e,this},parse:function(e,t,n,r){var i=function(){var t,n,r,i,o,a,c,u,l,h,d,f,p,m,v,y,b,w,S=this,M=0,T=[],A=[];function E(e){return e%4?4-e%4:0}function C(e,t){return new Uint8Array(e,t,1)[0]}function P(e,t){return new Uint32Array(e,t,1)[0]}function L(t,n){var r,i,o,a,s,c,u,l,h,d,f=new Uint32Array(e,n,3*t);for(r=0;r<t;r++)i=f[3*r],o=f[3*r+1],a=f[3*r+2],s=A[2*i],l=A[2*i+1],c=A[2*o],h=A[2*o+1],u=A[2*a],d=A[2*a+1],S.faceVertexUvs[0].push([new x(s,l),new x(c,h),new x(u,d)])}function O(t,n){var r,i,o,a,s,c,u,l,h,d,f,p,m,v=new Uint32Array(e,n,4*t);for(r=0;r<t;r++)i=v[4*r],o=v[4*r+1],a=v[4*r+2],s=v[4*r+3],c=A[2*i],d=A[2*i+1],u=A[2*o],f=A[2*o+1],l=A[2*a],p=A[2*a+1],h=A[2*s],m=A[2*s+1],S.faceVertexUvs[0].push([new x(c,d),new x(u,f),new x(h,m)]),S.faceVertexUvs[0].push([new x(u,f),new x(l,p),new x(h,m)])}function N(t,n,r){var i,o,a,s,c,u=new Uint32Array(e,n,3*t),l=new Uint16Array(e,r,t);for(i=0;i<t;i++)o=u[3*i],a=u[3*i+1],s=u[3*i+2],c=l[i],S.faces.push(new g(o,a,s,null,null,c))}function R(t,n,r){var i,o,a,s,c,u,l=new Uint32Array(e,n,4*t),h=new Uint16Array(e,r,t);for(i=0;i<t;i++)o=l[4*i],a=l[4*i+1],s=l[4*i+2],c=l[4*i+3],u=h[i],S.faces.push(new g(o,a,c,null,null,u)),S.faces.push(new g(a,s,c,null,null,u))}function I(t,n,r,i){var o,a,c,u,l,h,d,f,p=new Uint32Array(e,n,3*t),m=new Uint32Array(e,r,3*t),v=new Uint16Array(e,i,t);for(o=0;o<t;o++){a=p[3*o],c=p[3*o+1],u=p[3*o+2],h=m[3*o],d=m[3*o+1],f=m[3*o+2],l=v[o];var y=T[3*h],b=T[3*h+1],x=T[3*h+2],w=T[3*d],_=T[3*d+1],M=T[3*d+2],A=T[3*f],E=T[3*f+1],C=T[3*f+2];S.faces.push(new g(a,c,u,[new s(y,b,x),new s(w,_,M),new s(A,E,C)],null,l))}}function D(t,n,r,i){var o,a,c,u,l,h,d,f,p,m,v=new Uint32Array(e,n,4*t),y=new Uint32Array(e,r,4*t),b=new Uint16Array(e,i,t);for(o=0;o<t;o++){a=v[4*o],c=v[4*o+1],u=v[4*o+2],l=v[4*o+3],d=y[4*o],f=y[4*o+1],p=y[4*o+2],m=y[4*o+3],h=b[o];var x=T[3*d],w=T[3*d+1],_=T[3*d+2],M=T[3*f],A=T[3*f+1],E=T[3*f+2],C=T[3*p],P=T[3*p+1],L=T[3*p+2],O=T[3*m],N=T[3*m+1],R=T[3*m+2];S.faces.push(new g(a,c,l,[new s(x,w,_),new s(M,A,E),new s(O,N,R)],null,h)),S.faces.push(new g(c,u,l,[new s(M,A,E),new s(C,P,L),new s(O,N,R)],null,h))}}_.call(this),M+=(t=function(e,t){return{signature:function(e,t,n){return Cr.decodeText(new Uint8Array(e,t,n))}(e,t,12),header_bytes:C(e,t+12),vertex_coordinate_bytes:C(e,t+13),normal_coordinate_bytes:C(e,t+14),uv_coordinate_bytes:C(e,t+15),vertex_index_bytes:C(e,t+16),normal_index_bytes:C(e,t+17),uv_index_bytes:C(e,t+18),material_index_bytes:C(e,t+19),nvertices:P(e,t+20),nnormals:P(e,t+20+4),nuvs:P(e,t+20+8),ntri_flat:P(e,t+20+12),ntri_smooth:P(e,t+20+16),ntri_flat_uv:P(e,t+20+20),ntri_smooth_uv:P(e,t+20+24),nquad_flat:P(e,t+20+28),nquad_smooth:P(e,t+20+32),nquad_flat_uv:P(e,t+20+36),nquad_smooth_uv:P(e,t+20+40)}}(e,M)).header_bytes,h=3*t.vertex_index_bytes+t.material_index_bytes,d=4*t.vertex_index_bytes+t.material_index_bytes,f=t.ntri_flat*h,p=t.ntri_smooth*(h+3*t.normal_index_bytes),m=t.ntri_flat_uv*(h+3*t.uv_index_bytes),v=t.ntri_smooth_uv*(h+3*t.normal_index_bytes+3*t.uv_index_bytes),y=t.nquad_flat*d,b=t.nquad_smooth*(d+4*t.normal_index_bytes),w=t.nquad_flat_uv*(d+4*t.uv_index_bytes),M+=function(n){var r,i,o,a,c=t.nvertices,u=new Float32Array(e,n,3*c);for(r=0;r<c;r++)i=u[3*r],o=u[3*r+1],a=u[3*r+2],S.vertices.push(new s(i,o,a));return 3*c*Float32Array.BYTES_PER_ELEMENT}(M),M+=function(n){var r=t.nnormals;if(r){var i,o,a,s,c=new Int8Array(e,n,3*r);for(i=0;i<r;i++)o=c[3*i],a=c[3*i+1],s=c[3*i+2],T.push(o/127,a/127,s/127)}return 3*r*Int8Array.BYTES_PER_ELEMENT}(M),M+=E(3*t.nnormals),l=(u=(c=(a=(o=(i=(r=(n=M+=function(n){var r=t.nuvs;if(r){var i,o,a,s=new Float32Array(e,n,2*r);for(i=0;i<r;i++)o=s[2*i],a=s[2*i+1],A.push(o,a)}return 2*r*Float32Array.BYTES_PER_ELEMENT}(M))+f+E(2*t.ntri_flat))+p+E(2*t.ntri_smooth))+m+E(2*t.ntri_flat_uv))+v+E(2*t.ntri_smooth_uv))+y+E(2*t.nquad_flat))+b+E(2*t.nquad_smooth))+w+E(2*t.nquad_flat_uv),function(e){var n=t.ntri_flat_uv;if(n){var r=e+n*Uint32Array.BYTES_PER_ELEMENT*3,i=r+n*Uint32Array.BYTES_PER_ELEMENT*3;N(n,e,i),L(n,r)}}(i),function(e){var n=t.ntri_smooth_uv;if(n){var r=e+n*Uint32Array.BYTES_PER_ELEMENT*3,i=r+n*Uint32Array.BYTES_PER_ELEMENT*3,o=i+n*Uint32Array.BYTES_PER_ELEMENT*3;I(n,e,r,o),L(n,i)}}(o),function(e){var n=t.nquad_flat_uv;if(n){var r=e+n*Uint32Array.BYTES_PER_ELEMENT*4,i=r+n*Uint32Array.BYTES_PER_ELEMENT*4;R(n,e,i),O(n,r)}}(u),function(e){var n=t.nquad_smooth_uv;if(n){var r=e+n*Uint32Array.BYTES_PER_ELEMENT*4,i=r+n*Uint32Array.BYTES_PER_ELEMENT*4,o=i+n*Uint32Array.BYTES_PER_ELEMENT*4;D(n,e,r,o),O(n,i)}}(l),function(e){var n=t.ntri_flat;if(n){var r=e+n*Uint32Array.BYTES_PER_ELEMENT*3;N(n,e,r)}}(n),function(e){var n=t.ntri_smooth;if(n){var r=e+n*Uint32Array.BYTES_PER_ELEMENT*3,i=r+n*Uint32Array.BYTES_PER_ELEMENT*3;I(n,e,r,i)}}(r),function(e){var n=t.nquad_flat;if(n){var r=e+n*Uint32Array.BYTES_PER_ELEMENT*4;R(n,e,r)}}(a),function(e){var n=t.nquad_smooth;if(n){var r=e+n*Uint32Array.BYTES_PER_ELEMENT*4,i=r+n*Uint32Array.BYTES_PER_ELEMENT*4;D(n,e,r,i)}}(c),this.computeFaceNormals()};(i.prototype=Object.create(_.prototype)).constructor=i,t(new i,Er.prototype.initMaterials(r,n,this.crossOrigin))}};function Or(e,t){this.normal=void 0!==e?e:new s(1,0,0),this.constant=void 0!==t?t:0}function Nr(e,t,n,r){this.ray=new hn(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Rr(e,t){return e.distance-t.distance}function Ir(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)Ir(i[o],t,n,!0)}Object.assign(Or.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new s,t=new s;return function(n,r,i){var o=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("Plane: .projectPoint() target is now required"),t=new s),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new s;return function(t,n){void 0===n&&(console.warn("Plane: .intersectLine() target is now required"),n=new s);var r=t.delta(e),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/i;return o<0||o>1?void 0:n.copy(r).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("Plane: .coplanarPoint() target is now required"),e=new s),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new s,t=new d;return function(n,r){var i=r||t.getNormalMatrix(n),o=this.coplanarPoint(e).applyMatrix4(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(Nr.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return Ir(e,this,r,t),r.sort(Rr),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=e.length;i<o;i++)Ir(e[i],this,r,t);return r.sort(Rr),r}});var Dr=function(e,t,n){if(e instanceof Wn){console.warn("DragControls: Constructor now expects ( objects, camera, domElement )");var r=e;e=t,t=r}var i=new Or,o=new Nr,a=new x,c=new s,u=new s,l=null,h=null,d=this;function f(){n.addEventListener("mousemove",m,!1),n.addEventListener("mousedown",v,!1),n.addEventListener("mouseup",g,!1),n.addEventListener("mouseleave",g,!1),n.addEventListener("touchmove",y,!1),n.addEventListener("touchstart",b,!1),n.addEventListener("touchend",w,!1)}function p(){n.removeEventListener("mousemove",m,!1),n.removeEventListener("mousedown",v,!1),n.removeEventListener("mouseup",g,!1),n.removeEventListener("mouseleave",g,!1),n.removeEventListener("touchmove",y,!1),n.removeEventListener("touchstart",b,!1),n.removeEventListener("touchend",w,!1)}function m(r){r.preventDefault();var s=n.getBoundingClientRect();if(a.x=(r.clientX-s.left)/s.width*2-1,a.y=-(r.clientY-s.top)/s.height*2+1,o.setFromCamera(a,t),l&&d.enabled)return o.ray.intersectPlane(i,u)&&l.position.copy(u.sub(c)),void d.dispatchEvent({type:"drag",object:l});o.setFromCamera(a,t);var f=o.intersectObjects(e);if(f.length>0){var p=f[0].object;i.setFromNormalAndCoplanarPoint(t.getWorldDirection(i.normal),p.position),h!==p&&(d.dispatchEvent({type:"hoveron",object:p}),n.style.cursor="pointer",h=p)}else null!==h&&(d.dispatchEvent({type:"hoveroff",object:h}),n.style.cursor="auto",h=null)}function v(r){r.preventDefault(),o.setFromCamera(a,t);var s=o.intersectObjects(e);s.length>0&&(l=s[0].object,o.ray.intersectPlane(i,u)&&c.copy(u).sub(l.position),n.style.cursor="move",d.dispatchEvent({type:"dragstart",object:l}))}function g(e){e.preventDefault(),l&&(d.dispatchEvent({type:"dragend",object:l}),l=null),n.style.cursor=h?"pointer":"auto"}function y(e){e.preventDefault(),e=e.changedTouches[0];var r=n.getBoundingClientRect();if(a.x=(e.clientX-r.left)/r.width*2-1,a.y=-(e.clientY-r.top)/r.height*2+1,o.setFromCamera(a,t),l&&d.enabled)return o.ray.intersectPlane(i,u)&&l.position.copy(u.sub(c)),void d.dispatchEvent({type:"drag",object:l})}function b(r){r.preventDefault(),r=r.changedTouches[0];var s=n.getBoundingClientRect();a.x=(r.clientX-s.left)/s.width*2-1,a.y=-(r.clientY-s.top)/s.height*2+1,o.setFromCamera(a,t);var h=o.intersectObjects(e);h.length>0&&(l=h[0].object,i.setFromNormalAndCoplanarPoint(t.getWorldDirection(i.normal),l.position),o.ray.intersectPlane(i,u)&&c.copy(u).sub(l.position),n.style.cursor="move",d.dispatchEvent({type:"dragstart",object:l}))}function w(e){e.preventDefault(),l&&(d.dispatchEvent({type:"dragend",object:l}),l=null),n.style.cursor="auto"}f(),this.enabled=!0,this.activate=f,this.deactivate=p,this.dispose=function(){p()},this.setObjects=function(){console.error("DragControls: setObjects() has been removed.")},this.on=function(e,t){console.warn("DragControls: on() has been deprecated. Use addEventListener() instead."),d.addEventListener(e,t)},this.off=function(e,t){console.warn("DragControls: off() has been deprecated. Use removeEventListener() instead."),d.removeEventListener(e,t)},this.notify=function(e){console.error("DragControls: notify() has been deprecated. Use dispatchEvent() instead."),d.dispatchEvent({type:e})}};function Fr(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}(Dr.prototype=Object.create(u.prototype)).constructor=Dr,Object.assign(Fr.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(o.clamp(t/this.radius,-1,1))),this}});var kr=function(e,t){t=void 0!==t?t:document,this.enabled=!0,this.center=new s,this.panSpeed=.001,this.zoomSpeed=.1,this.rotationSpeed=.005;var n=this,r=new s,i=new s,o=new y,a={NONE:-1,ROTATE:0,ZOOM:1,PAN:2},c=a.NONE,u=this.center,l=new d,h=new x,f=new x,p=new Fr,m={type:"change"};function v(e){!1!==n.enabled&&(0===e.button?c=a.ROTATE:1===e.button?c=a.ZOOM:2===e.button&&(c=a.PAN),f.set(e.clientX,e.clientY),t.addEventListener("mousemove",g,!1),t.addEventListener("mouseup",b,!1),t.addEventListener("mouseout",b,!1),t.addEventListener("dblclick",b,!1))}function g(e){if(!1!==n.enabled){h.set(e.clientX,e.clientY);var t=h.x-f.x,r=h.y-f.y;c===a.ROTATE?n.rotate(i.set(-t*n.rotationSpeed,-r*n.rotationSpeed,0)):c===a.ZOOM?n.zoom(i.set(0,0,r)):c===a.PAN&&n.pan(i.set(-t,r,0)),f.set(e.clientX,e.clientY)}}function b(e){t.removeEventListener("mousemove",g,!1),t.removeEventListener("mouseup",b,!1),t.removeEventListener("mouseout",b,!1),t.removeEventListener("dblclick",b,!1),c=a.NONE}function w(e){e.preventDefault(),n.zoom(i.set(0,0,e.deltaY>0?1:-1))}function _(e){e.preventDefault()}this.focus=function(t){var r;o.setFromObject(t),!1===o.isEmpty()?(u.copy(o.getCenter()),r=o.getBoundingSphere().radius):(u.setFromMatrixPosition(t.matrixWorld),r=.1),i.set(0,0,1),i.applyQuaternion(e.quaternion),i.multiplyScalar(4*r),e.position.copy(u).add(i),n.dispatchEvent(m)},this.pan=function(t){var r=e.position.distanceTo(u);t.multiplyScalar(r*n.panSpeed),t.applyMatrix3(l.getNormalMatrix(e.matrix)),e.position.add(t),u.add(t),n.dispatchEvent(m)},this.zoom=function(t){var r=e.position.distanceTo(u);t.multiplyScalar(r*n.zoomSpeed),t.length()>r||(t.applyMatrix3(l.getNormalMatrix(e.matrix)),e.position.add(t),n.dispatchEvent(m))},this.rotate=function(t){r.copy(e.position).sub(u),p.setFromVector3(r),p.theta+=t.x,p.phi+=t.y,p.makeSafe(),r.setFromSpherical(p),e.position.copy(u).add(r),e.lookAt(u),n.dispatchEvent(m)},this.dispose=function(){t.removeEventListener("contextmenu",_,!1),t.removeEventListener("mousedown",v,!1),t.removeEventListener("wheel",w,!1),t.removeEventListener("mousemove",g,!1),t.removeEventListener("mouseup",b,!1),t.removeEventListener("mouseout",b,!1),t.removeEventListener("dblclick",b,!1),t.removeEventListener("touchstart",A,!1),t.removeEventListener("touchmove",E,!1)},t.addEventListener("contextmenu",_,!1),t.addEventListener("mousedown",v,!1),t.addEventListener("wheel",w,!1);var S=[new s,new s,new s],M=[new s,new s,new s],T=null;function A(e){if(!1!==n.enabled){switch(e.touches.length){case 1:S[0].set(e.touches[0].pageX,e.touches[0].pageY,0),S[1].set(e.touches[0].pageX,e.touches[0].pageY,0);break;case 2:S[0].set(e.touches[0].pageX,e.touches[0].pageY,0),S[1].set(e.touches[1].pageX,e.touches[1].pageY,0),T=S[0].distanceTo(S[1])}M[0].copy(S[0]),M[1].copy(S[1])}}function E(e){if(!1!==n.enabled){switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:S[0].set(e.touches[0].pageX,e.touches[0].pageY,0),S[1].set(e.touches[0].pageX,e.touches[0].pageY,0),n.rotate(S[0].sub(a(S[0],M)).multiplyScalar(-n.rotationSpeed));break;case 2:S[0].set(e.touches[0].pageX,e.touches[0].pageY,0),S[1].set(e.touches[1].pageX,e.touches[1].pageY,0);var t=S[0].distanceTo(S[1]);n.zoom(i.set(0,0,T-t)),T=t;var r=S[0].clone().sub(a(S[0],M)),o=S[1].clone().sub(a(S[1],M));r.x=-r.x,o.x=-o.x,n.pan(r.add(o).multiplyScalar(.5))}M[0].copy(S[0]),M[1].copy(S[1])}function a(e,t){var n=t[0];for(var r in t)n.distanceTo(e)>t[r].distanceTo(e)&&(n=t[r]);return n}}t.addEventListener("touchstart",A,!1),t.addEventListener("touchmove",E,!1)};(kr.prototype=Object.create(u.prototype)).constructor=kr;var Ur=function(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new s,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:j.LEFT,MIDDLE:j.MIDDLE,RIGHT:j.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return d.phi},this.getAzimuthalAngle=function(){return d.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),l=u.NONE},this.update=function(){var t=new s,i=(new c).setFromUnitVectors(e.up,new s(0,1,0)),o=i.clone().inverse(),a=new s,g=new c;return function(){var e=n.object.position;return t.copy(e).sub(n.target),t.applyQuaternion(i),d.setFromVector3(t),n.autoRotate&&l===u.NONE&&R(2*Math.PI/60/60*n.autoRotateSpeed),d.theta+=f.theta,d.phi+=f.phi,d.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,d.theta)),d.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=p,d.radius=Math.max(n.minDistance,Math.min(n.maxDistance,d.radius)),n.target.add(m),t.setFromSpherical(d),t.applyQuaternion(o),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(f.theta*=1-n.dampingFactor,f.phi*=1-n.dampingFactor,m.multiplyScalar(1-n.dampingFactor)):(f.set(0,0,0),m.set(0,0,0)),p=1,!!(v||a.distanceToSquared(n.object.position)>h||8*(1-g.dot(n.object.quaternion))>h)&&(n.dispatchEvent(r),a.copy(n.object.position),g.copy(n.object.quaternion),v=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",$,!1),n.domElement.removeEventListener("mousedown",H,!1),n.domElement.removeEventListener("wheel",Y,!1),n.domElement.removeEventListener("touchstart",Q,!1),n.domElement.removeEventListener("touchend",K,!1),n.domElement.removeEventListener("touchmove",Z,!1),document.removeEventListener("mousemove",X,!1),document.removeEventListener("mouseup",q,!1),i.removeEventListener("keydown",J,!1)};var n=this,r={type:"change"},o={type:"start"},a={type:"end"},u={NONE:0,ROTATE_UP:1,ROTATE_LEFT:2,ROTATE:3,DOLLY:4,DOLLY_ROTATE:7,PAN:8,DOLLY_PAN:12},l=u.NONE,h=1e-6,d=new Fr,f=new Fr,p=1,m=new s,v=!1,g=new x,y=new x,b=new x,w=new x,_=new x,S=new x,M=new x,T=new x,A=new x,E=new x,C=new x,P=new x,L=new x,O=new x;function N(){return Math.pow(.95,n.zoomSpeed)}function R(e){f.theta-=e}function I(e){f.phi-=e}var D=function(){var e=new s;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),m.add(e)}}(),F=function(){var e=new s;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),m.add(e)}}(),k=function(){var e=new s;return function(t,r){var i=n.domElement===document?n.domElement.body:n.domElement;if(n.object.isPerspectiveCamera){var o=n.object.position;e.copy(o).sub(n.target);var a=e.length();a*=Math.tan(n.object.fov/2*Math.PI/180),D(2*t*a/i.clientHeight,n.object.matrix),F(2*r*a/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(D(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),F(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: MapControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function U(e){n.object.isPerspectiveCamera?p/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function B(e){n.object.isPerspectiveCamera?p*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: MapControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function z(e){g.set(e.clientX,e.clientY)}function V(e){if(!1!==n.enableRotate&&0!=(l&u.ROTATE)){if(b.set(e.touches[0].pageX,e.touches[0].pageY),w.set(e.touches[1].pageX,e.touches[1].pageY),_.subVectors(b,g),S.subVectors(w,y),M.subVectors(y,g),T.subVectors(w,b),function(){if(!G(M))return!1;if(!G(T))return!1;if(!W(_))return!1;if(!W(S))return!1;return _.dot(S)>0}()){var t=n.domElement===document?n.domElement.body:n.domElement;I(2*Math.PI*_.y/t.clientHeight),l=u.ROTATE_UP}else 0!=(l&u.ROTATE_LEFT)&&R((M.angle()-T.angle())*n.rotateSpeed);g.copy(b),y.copy(w)}}var G=function(){var e=Math.sin(Math.PI/6);return function(t){return Math.abs(Math.sin(t.angle()))<e}}(),W=function(){var e=Math.cos(Math.PI/2-Math.PI/6);return function(t){return Math.abs(Math.cos(t.angle()))<e}}();function H(e){if(!1!==n.enabled){switch(e.preventDefault(),e.button){case n.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey){if(!1===n.enableRotate)return;z(e),l=u.ROTATE}else{if(!1===n.enablePan)return;!function(e){A.set(e.clientX,e.clientY)}(e),l=u.PAN}break;case n.mouseButtons.MIDDLE:if(!1===n.enableZoom)return;!function(e){P.set(e.clientX,e.clientY)}(e),l=u.DOLLY;break;case n.mouseButtons.RIGHT:if(!1===n.enableRotate)return;z(e),l=u.ROTATE}l!==u.NONE&&(document.addEventListener("mousemove",X,!1),document.addEventListener("mouseup",q,!1),n.dispatchEvent(o))}}function X(e){if(!1!==n.enabled)switch(e.preventDefault(),l){case u.ROTATE:if(!1===n.enableRotate)return;!function(e){b.set(e.clientX,e.clientY),_.subVectors(b,g).multiplyScalar(n.rotateSpeed);var t=n.domElement===document?n.domElement.body:n.domElement;R(2*Math.PI*_.x/t.clientHeight),I(2*Math.PI*_.y/t.clientHeight),g.copy(b),n.update()}(e);break;case u.DOLLY:if(!1===n.enableZoom)return;!function(e){L.set(e.clientX,e.clientY),O.subVectors(L,P),O.y>0?U(N()):O.y<0&&B(N()),P.copy(L),n.update()}(e);break;case u.PAN:if(!1===n.enablePan)return;!function(e){E.set(e.clientX,e.clientY),C.subVectors(E,A).multiplyScalar(n.panSpeed),k(C.x,C.y),A.copy(E),n.update()}(e)}}function q(e){!1!==n.enabled&&(document.removeEventListener("mousemove",X,!1),document.removeEventListener("mouseup",q,!1),n.dispatchEvent(a),l=u.NONE)}function Y(e){!1===n.enabled||!1===n.enableZoom||l!==u.NONE&&l!==u.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(o),function(e){e.deltaY<0?B(N()):e.deltaY>0&&U(N()),n.update()}(e),n.dispatchEvent(a))}function J(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&function(e){switch(e.keyCode){case n.keys.UP:k(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:k(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:k(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:k(-n.keyPanSpeed,0),n.update()}}(e)}function Q(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===n.enablePan)return;!function(e){n.enablePan&&A.set(e.touches[0].pageX,e.touches[0].pageY)}(e),l=u.PAN;break;case 2:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){g.set(e.touches[0].pageX,e.touches[0].pageY),y.set(e.touches[1].pageX,e.touches[1].pageY)}(e),function(e){if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+r*r);P.set(0,i)}}(e),l=u.DOLLY_ROTATE;break;default:l=u.NONE}l!==u.NONE&&n.dispatchEvent(o)}}function Z(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===n.enablePan)return;if(l!==u.PAN)return;!function(e){!1!==n.enablePan&&0!=(l&u.PAN)&&(E.set(e.touches[0].pageX,e.touches[0].pageY),C.subVectors(E,A).multiplyScalar(n.panSpeed),k(C.x,C.y),A.copy(E))}(e),n.update();break;case 2:if(!1===n.enableZoom&&!1===n.enableRotate)return;if(0==(l&u.DOLLY_ROTATE))return;V(e),function(e){if(!1!==n.enableZoom&&0!=(l&u.DOLLY)){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+r*r);L.set(0,i),O.set(0,Math.pow(L.y/P.y,n.zoomSpeed)),U(O.y),P.copy(L)}}(e),n.update();break;default:l=u.NONE}}function K(e){!1!==n.enabled&&(n.dispatchEvent(a),l=u.NONE)}function $(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",$,!1),n.domElement.addEventListener("mousedown",H,!1),n.domElement.addEventListener("wheel",Y,!1),n.domElement.addEventListener("touchstart",Q,!1),n.domElement.addEventListener("touchend",K,!1),n.domElement.addEventListener("touchmove",Z,!1),i.addEventListener("keydown",J,!1),this.update()};(Ur.prototype=Object.create(u.prototype)).constructor=Ur,Object.defineProperties(Ur.prototype,{center:{get:function(){return console.warn("MapControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("MapControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("MapControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("MapControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("MapControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("MapControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("MapControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("MapControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("MapControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("MapControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("MapControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("MapControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("MapControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});var Br=function(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new s,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:j.LEFT,MIDDLE:j.MIDDLE,RIGHT:j.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return d.phi},this.getAzimuthalAngle=function(){return d.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),l=u.NONE},this.update=function(){var t=new s,i=(new c).setFromUnitVectors(e.up,new s(0,1,0)),o=i.clone().inverse(),a=new s,g=new c;return function(){var e=n.object.position;return t.copy(e).sub(n.target),t.applyQuaternion(i),d.setFromVector3(t),n.autoRotate&&l===u.NONE&&C(2*Math.PI/60/60*n.autoRotateSpeed),d.theta+=f.theta,d.phi+=f.phi,d.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,d.theta)),d.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=p,d.radius=Math.max(n.minDistance,Math.min(n.maxDistance,d.radius)),n.target.add(m),t.setFromSpherical(d),t.applyQuaternion(o),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(f.theta*=1-n.dampingFactor,f.phi*=1-n.dampingFactor,m.multiplyScalar(1-n.dampingFactor)):(f.set(0,0,0),m.set(0,0,0)),p=1,!!(v||a.distanceToSquared(n.object.position)>h||8*(1-g.dot(n.object.quaternion))>h)&&(n.dispatchEvent(r),a.copy(n.object.position),g.copy(n.object.quaternion),v=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",H,!1),n.domElement.removeEventListener("mousedown",F,!1),n.domElement.removeEventListener("wheel",B,!1),n.domElement.removeEventListener("touchstart",V,!1),n.domElement.removeEventListener("touchend",W,!1),n.domElement.removeEventListener("touchmove",G,!1),document.removeEventListener("mousemove",k,!1),document.removeEventListener("mouseup",U,!1),i.removeEventListener("keydown",z,!1)};var n=this,r={type:"change"},o={type:"start"},a={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},l=u.NONE,h=1e-6,d=new Fr,f=new Fr,p=1,m=new s,v=!1,g=new x,y=new x,b=new x,w=new x,_=new x,S=new x,M=new x,T=new x,A=new x;function E(){return Math.pow(.95,n.zoomSpeed)}function C(e){f.theta-=e}function P(e){f.phi-=e}var L=function(){var e=new s;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),m.add(e)}}(),O=function(){var e=new s;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),m.add(e)}}(),N=function(){var e=new s;return function(t,r){var i=n.domElement===document?n.domElement.body:n.domElement;if(n.object.isPerspectiveCamera){var o=n.object.position;e.copy(o).sub(n.target);var a=e.length();a*=Math.tan(n.object.fov/2*Math.PI/180),L(2*t*a/i.clientHeight,n.object.matrix),O(2*r*a/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(L(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),O(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function R(e){n.object.isPerspectiveCamera?p/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function I(e){n.object.isPerspectiveCamera?p*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function D(e){w.set(e.clientX,e.clientY)}function F(e){if(!1!==n.enabled){switch(e.preventDefault(),e.button){case n.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey){if(!1===n.enablePan)return;D(e),l=u.PAN}else{if(!1===n.enableRotate)return;!function(e){g.set(e.clientX,e.clientY)}(e),l=u.ROTATE}break;case n.mouseButtons.MIDDLE:if(!1===n.enableZoom)return;!function(e){M.set(e.clientX,e.clientY)}(e),l=u.DOLLY;break;case n.mouseButtons.RIGHT:if(!1===n.enablePan)return;D(e),l=u.PAN}l!==u.NONE&&(document.addEventListener("mousemove",k,!1),document.addEventListener("mouseup",U,!1),n.dispatchEvent(o))}}function k(e){if(!1!==n.enabled)switch(e.preventDefault(),l){case u.ROTATE:if(!1===n.enableRotate)return;!function(e){y.set(e.clientX,e.clientY),b.subVectors(y,g).multiplyScalar(n.rotateSpeed);var t=n.domElement===document?n.domElement.body:n.domElement;C(2*Math.PI*b.x/t.clientHeight),P(2*Math.PI*b.y/t.clientHeight),g.copy(y),n.update()}(e);break;case u.DOLLY:if(!1===n.enableZoom)return;!function(e){T.set(e.clientX,e.clientY),A.subVectors(T,M),A.y>0?R(E()):A.y<0&&I(E()),M.copy(T),n.update()}(e);break;case u.PAN:if(!1===n.enablePan)return;!function(e){_.set(e.clientX,e.clientY),S.subVectors(_,w).multiplyScalar(n.panSpeed),N(S.x,S.y),w.copy(_),n.update()}(e)}}function U(e){!1!==n.enabled&&(document.removeEventListener("mousemove",k,!1),document.removeEventListener("mouseup",U,!1),n.dispatchEvent(a),l=u.NONE)}function B(e){!1===n.enabled||!1===n.enableZoom||l!==u.NONE&&l!==u.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(o),function(e){e.deltaY<0?I(E()):e.deltaY>0&&R(E()),n.update()}(e),n.dispatchEvent(a))}function z(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&function(e){switch(e.keyCode){case n.keys.UP:N(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:N(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:N(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:N(-n.keyPanSpeed,0),n.update()}}(e)}function V(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===n.enableRotate)return;!function(e){g.set(e.touches[0].pageX,e.touches[0].pageY)}(e),l=u.TOUCH_ROTATE;break;case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+r*r);M.set(0,i)}if(n.enablePan){var o=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(o,a)}}(e),l=u.TOUCH_DOLLY_PAN;break;default:l=u.NONE}l!==u.NONE&&n.dispatchEvent(o)}}function G(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===n.enableRotate)return;if(l!==u.TOUCH_ROTATE)return;!function(e){y.set(e.touches[0].pageX,e.touches[0].pageY),b.subVectors(y,g).multiplyScalar(n.rotateSpeed);var t=n.domElement===document?n.domElement.body:n.domElement;C(2*Math.PI*b.x/t.clientHeight),P(2*Math.PI*b.y/t.clientHeight),g.copy(y),n.update()}(e);break;case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;if(l!==u.TOUCH_DOLLY_PAN)return;!function(e){if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+r*r);T.set(0,i),A.set(0,Math.pow(T.y/M.y,n.zoomSpeed)),R(A.y),M.copy(T)}if(n.enablePan){var o=.5*(e.touches[0].pageX+e.touches[1].pageX),a=.5*(e.touches[0].pageY+e.touches[1].pageY);_.set(o,a),S.subVectors(_,w).multiplyScalar(n.panSpeed),N(S.x,S.y),w.copy(_)}n.update()}(e);break;default:l=u.NONE}}function W(e){!1!==n.enabled&&(n.dispatchEvent(a),l=u.NONE)}function H(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("contextmenu",H,!1),n.domElement.addEventListener("mousedown",F,!1),n.domElement.addEventListener("wheel",B,!1),n.domElement.addEventListener("touchstart",V,!1),n.domElement.addEventListener("touchend",W,!1),n.domElement.addEventListener("touchmove",G,!1),i.addEventListener("keydown",z,!1),this.update()};(Br.prototype=Object.create(u.prototype)).constructor=Br,Object.defineProperties(Br.prototype,{center:{get:function(){return console.warn("OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});var zr=function(e,t){var n=this,r={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.radius=0,this.rotateSpeed=1,this.zoomSpeed=1.2,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.noRoll=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.keys=[65,83,68],this.target=new s;var o=!0,a=r.NONE,u=r.NONE,l=new s,h=new s,d=new s,f=new x,p=new x,m=0,v=0,g=new x,y=new x;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.left0=this.object.left,this.right0=this.object.right,this.top0=this.object.top,this.bottom0=this.object.bottom;var b={type:"change"},w={type:"start"},_={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=i.innerWidth,this.screen.height=i.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+i.pageXOffset-t.clientLeft,this.screen.top=e.top+i.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}this.radius=.5*Math.min(this.screen.width,this.screen.height),this.left0=this.object.left,this.right0=this.object.right,this.top0=this.object.top,this.bottom0=this.object.bottom};var S=function(){var e=new x;return function(t,r){return e.set((t-n.screen.left)/n.screen.width,(r-n.screen.top)/n.screen.height),e}}(),M=function(){var e=new s,t=new s,r=new s;return function(i,o){r.set((i-.5*n.screen.width-n.screen.left)/n.radius,(.5*n.screen.height+n.screen.top-o)/n.radius,0);var a=r.length();return n.noRoll?a<Math.SQRT1_2?r.z=Math.sqrt(1-a*a):r.z=.5/a:a>1?r.normalize():r.z=Math.sqrt(1-a*a),l.copy(n.object.position).sub(n.target),e.copy(n.object.up).setLength(r.y),e.add(t.copy(n.object.up).cross(l).setLength(r.x)),e.add(l.setLength(r.z)),e}}();function T(e){!1!==n.enabled&&(i.removeEventListener("keydown",T),u=a,a===r.NONE&&(e.keyCode!==n.keys[r.ROTATE]||n.noRotate?e.keyCode!==n.keys[r.ZOOM]||n.noZoom?e.keyCode!==n.keys[r.PAN]||n.noPan||(a=r.PAN):a=r.ZOOM:a=r.ROTATE))}function A(e){!1!==n.enabled&&(a=u,i.addEventListener("keydown",T,!1))}function E(e){!1!==n.enabled&&(e.preventDefault(),e.stopPropagation(),a===r.NONE&&(a=e.button),a!==r.ROTATE||n.noRotate?a!==r.ZOOM||n.noZoom?a!==r.PAN||n.noPan||(g.copy(S(e.pageX,e.pageY)),y.copy(g)):(f.copy(S(e.pageX,e.pageY)),p.copy(f)):(h.copy(M(e.pageX,e.pageY)),d.copy(h)),document.addEventListener("mousemove",C,!1),document.addEventListener("mouseup",P,!1),n.dispatchEvent(w))}function C(e){!1!==n.enabled&&(e.preventDefault(),e.stopPropagation(),a!==r.ROTATE||n.noRotate?a!==r.ZOOM||n.noZoom?a!==r.PAN||n.noPan||y.copy(S(e.pageX,e.pageY)):p.copy(S(e.pageX,e.pageY)):d.copy(M(e.pageX,e.pageY)))}function P(e){!1!==n.enabled&&(e.preventDefault(),e.stopPropagation(),a=r.NONE,document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",P),n.dispatchEvent(_))}function L(e){!1!==n.enabled&&(e.preventDefault(),e.stopPropagation(),f.y+=.01*e.deltaY,n.dispatchEvent(w),n.dispatchEvent(_))}function O(e){if(!1!==n.enabled){switch(e.touches.length){case 1:a=r.TOUCH_ROTATE,h.copy(M(e.touches[0].pageX,e.touches[0].pageY)),d.copy(h);break;case 2:a=r.TOUCH_ZOOM_PAN;var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY;v=m=Math.sqrt(t*t+i*i);var o=(e.touches[0].pageX+e.touches[1].pageX)/2,s=(e.touches[0].pageY+e.touches[1].pageY)/2;g.copy(S(o,s)),y.copy(g);break;default:a=r.NONE}n.dispatchEvent(w)}}function N(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:d.copy(M(e.touches[0].pageX,e.touches[0].pageY));break;case 2:var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY;v=Math.sqrt(t*t+i*i);var o=(e.touches[0].pageX+e.touches[1].pageX)/2,s=(e.touches[0].pageY+e.touches[1].pageY)/2;y.copy(S(o,s));break;default:a=r.NONE}}function R(e){if(!1!==n.enabled){switch(e.touches.length){case 1:d.copy(M(e.touches[0].pageX,e.touches[0].pageY)),h.copy(d);break;case 2:m=v=0;var t=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;y.copy(S(t,i)),g.copy(y)}a=r.NONE,n.dispatchEvent(_)}}function I(e){e.preventDefault()}this.rotateCamera=function(){var e=new s,t=new c;return function(){var r=Math.acos(h.dot(d)/h.length()/d.length());r&&(e.crossVectors(h,d).normalize(),r*=n.rotateSpeed,t.setFromAxisAngle(e,-r),l.applyQuaternion(t),n.object.up.applyQuaternion(t),d.applyQuaternion(t),n.staticMoving?h.copy(d):(t.setFromAxisAngle(e,r*(n.dynamicDampingFactor-1)),h.applyQuaternion(t)),o=!0)}}(),this.zoomCamera=function(){if(a===r.TOUCH_ZOOM_PAN){var e=v/m;m=v,n.object.zoom*=e,o=!0}else{e=1+(p.y-f.y)*n.zoomSpeed;Math.abs(e-1)>1e-6&&e>0&&(n.object.zoom/=e,n.staticMoving?f.copy(p):f.y+=(p.y-f.y)*this.dynamicDampingFactor,o=!0)}},this.panCamera=function(){var e=new x,t=new s,r=new s;return function(){if(e.copy(y).sub(g),e.lengthSq()){var i=(n.object.right-n.object.left)/n.object.zoom,a=(n.object.top-n.object.bottom)/n.object.zoom;e.x*=i,e.y*=a,r.copy(l).cross(n.object.up).setLength(e.x),r.add(t.copy(n.object.up).setLength(e.y)),n.object.position.add(r),n.target.add(r),n.staticMoving?g.copy(y):g.add(e.subVectors(y,g).multiplyScalar(n.dynamicDampingFactor)),o=!0}}}(),this.update=function(){l.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||(n.zoomCamera(),o&&n.object.updateProjectionMatrix()),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,l),n.object.lookAt(n.target),o&&(n.dispatchEvent(b),o=!1)},this.reset=function(){a=r.NONE,u=r.NONE,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),l.subVectors(n.object.position,n.target),n.object.left=n.left0,n.object.right=n.right0,n.object.top=n.top0,n.object.bottom=n.bottom0,n.object.lookAt(n.target),n.dispatchEvent(b),o=!1},this.dispose=function(){this.domElement.removeEventListener("contextmenu",I,!1),this.domElement.removeEventListener("mousedown",E,!1),this.domElement.removeEventListener("wheel",L,!1),this.domElement.removeEventListener("touchstart",O,!1),this.domElement.removeEventListener("touchend",R,!1),this.domElement.removeEventListener("touchmove",N,!1),document.removeEventListener("mousemove",C,!1),document.removeEventListener("mouseup",P,!1),i.removeEventListener("keydown",T,!1),i.removeEventListener("keyup",A,!1)},this.domElement.addEventListener("contextmenu",I,!1),this.domElement.addEventListener("mousedown",E,!1),this.domElement.addEventListener("wheel",L,!1),this.domElement.addEventListener("touchstart",O,!1),this.domElement.addEventListener("touchend",R,!1),this.domElement.addEventListener("touchmove",N,!1),i.addEventListener("keydown",T,!1),i.addEventListener("keyup",A,!1),this.handleResize(),this.update()};(zr.prototype=Object.create(u.prototype)).constructor=zr;var jr=function(e,t){var n=this,r={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.target=new s;var o=new s,a=r.NONE,u=r.NONE,l=new s,h=new x,d=new x,f=new s,p=0,m=new x,v=new x,g=0,y=0,b=new x,w=new x;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone();var _={type:"change"},S={type:"start"},M={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=i.innerWidth,this.screen.height=i.innerHeight;else{var e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+i.pageXOffset-t.clientLeft,this.screen.top=e.top+i.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height}};var T=function(){var e=new x;return function(t,r){return e.set((t-n.screen.left)/n.screen.width,(r-n.screen.top)/n.screen.height),e}}(),A=function(){var e=new x;return function(t,r){return e.set((t-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-r))/n.screen.width),e}}();function E(e){!1!==n.enabled&&(i.removeEventListener("keydown",E),u=a,a===r.NONE&&(e.keyCode!==n.keys[r.ROTATE]||n.noRotate?e.keyCode!==n.keys[r.ZOOM]||n.noZoom?e.keyCode!==n.keys[r.PAN]||n.noPan||(a=r.PAN):a=r.ZOOM:a=r.ROTATE))}function C(e){!1!==n.enabled&&(a=u,i.addEventListener("keydown",E,!1))}function P(e){!1!==n.enabled&&(e.preventDefault(),e.stopPropagation(),a===r.NONE&&(a=e.button),a!==r.ROTATE||n.noRotate?a!==r.ZOOM||n.noZoom?a!==r.PAN||n.noPan||(b.copy(T(e.pageX,e.pageY)),w.copy(b)):(m.copy(T(e.pageX,e.pageY)),v.copy(m)):(d.copy(A(e.pageX,e.pageY)),h.copy(d)),document.addEventListener("mousemove",L,!1),document.addEventListener("mouseup",O,!1),n.dispatchEvent(S))}function L(e){!1!==n.enabled&&(e.preventDefault(),e.stopPropagation(),a!==r.ROTATE||n.noRotate?a!==r.ZOOM||n.noZoom?a!==r.PAN||n.noPan||w.copy(T(e.pageX,e.pageY)):v.copy(T(e.pageX,e.pageY)):(h.copy(d),d.copy(A(e.pageX,e.pageY))))}function O(e){!1!==n.enabled&&(e.preventDefault(),e.stopPropagation(),a=r.NONE,document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",O),n.dispatchEvent(M))}function N(e){if(!1!==n.enabled&&!0!==n.noZoom){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:m.y-=.025*e.deltaY;break;case 1:m.y-=.01*e.deltaY;break;default:m.y-=25e-5*e.deltaY}n.dispatchEvent(S),n.dispatchEvent(M)}}function R(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:a=r.TOUCH_ROTATE,d.copy(A(e.touches[0].pageX,e.touches[0].pageY)),h.copy(d);break;default:a=r.TOUCH_ZOOM_PAN;var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY;y=g=Math.sqrt(t*t+i*i);var o=(e.touches[0].pageX+e.touches[1].pageX)/2,s=(e.touches[0].pageY+e.touches[1].pageY)/2;b.copy(T(o,s)),w.copy(b)}n.dispatchEvent(S)}}function I(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:h.copy(d),d.copy(A(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY;y=Math.sqrt(t*t+r*r);var i=(e.touches[0].pageX+e.touches[1].pageX)/2,o=(e.touches[0].pageY+e.touches[1].pageY)/2;w.copy(T(i,o))}}function D(e){if(!1!==n.enabled){switch(e.touches.length){case 0:a=r.NONE;break;case 1:a=r.TOUCH_ROTATE,d.copy(A(e.touches[0].pageX,e.touches[0].pageY)),h.copy(d)}n.dispatchEvent(M)}}function F(e){!1!==n.enabled&&e.preventDefault()}this.rotateCamera=function(){var e,t=new s,r=new c,i=new s,o=new s,a=new s,u=new s;return function(){u.set(d.x-h.x,d.y-h.y,0),(e=u.length())?(l.copy(n.object.position).sub(n.target),i.copy(l).normalize(),o.copy(n.object.up).normalize(),a.crossVectors(o,i).normalize(),o.setLength(d.y-h.y),a.setLength(d.x-h.x),u.copy(o.add(a)),t.crossVectors(u,l).normalize(),e*=n.rotateSpeed,r.setFromAxisAngle(t,e),l.applyQuaternion(r),n.object.up.applyQuaternion(r),f.copy(t),p=e):!n.staticMoving&&p&&(p*=Math.sqrt(1-n.dynamicDampingFactor),l.copy(n.object.position).sub(n.target),r.setFromAxisAngle(f,p),l.applyQuaternion(r),n.object.up.applyQuaternion(r)),h.copy(d)}}(),this.zoomCamera=function(){var e;a===r.TOUCH_ZOOM_PAN?(e=g/y,g=y,l.multiplyScalar(e)):(1!==(e=1+(v.y-m.y)*n.zoomSpeed)&&e>0&&l.multiplyScalar(e),n.staticMoving?m.copy(v):m.y+=(v.y-m.y)*this.dynamicDampingFactor)},this.panCamera=function(){var e=new x,t=new s,r=new s;return function(){e.copy(w).sub(b),e.lengthSq()&&(e.multiplyScalar(l.length()*n.panSpeed),r.copy(l).cross(n.object.up).setLength(e.x),r.add(t.copy(n.object.up).setLength(e.y)),n.object.position.add(r),n.target.add(r),n.staticMoving?b.copy(w):b.add(e.subVectors(w,b).multiplyScalar(n.dynamicDampingFactor)))}}(),this.checkDistances=function(){n.noZoom&&n.noPan||(l.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,l.setLength(n.maxDistance)),m.copy(v)),l.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,l.setLength(n.minDistance)),m.copy(v)))},this.update=function(){l.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,l),n.checkDistances(),n.object.lookAt(n.target),o.distanceToSquared(n.object.position)>1e-6&&(n.dispatchEvent(_),o.copy(n.object.position))},this.reset=function(){a=r.NONE,u=r.NONE,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),l.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(_),o.copy(n.object.position)},this.dispose=function(){this.domElement.removeEventListener("contextmenu",F,!1),this.domElement.removeEventListener("mousedown",P,!1),this.domElement.removeEventListener("wheel",N,!1),this.domElement.removeEventListener("touchstart",R,!1),this.domElement.removeEventListener("touchend",D,!1),this.domElement.removeEventListener("touchmove",I,!1),document.removeEventListener("mousemove",L,!1),document.removeEventListener("mouseup",O,!1),i.removeEventListener("keydown",E,!1),i.removeEventListener("keyup",C,!1)},this.domElement.addEventListener("contextmenu",F,!1),this.domElement.addEventListener("mousedown",P,!1),this.domElement.addEventListener("wheel",N,!1),this.domElement.addEventListener("touchstart",R,!1),this.domElement.addEventListener("touchend",D,!1),this.domElement.addEventListener("touchmove",I,!1),i.addEventListener("keydown",E,!1),i.addEventListener("keyup",C,!1),this.handleResize(),this.update()};function Vr(e,t,n,r){_.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Gr(e,t,n,r)),this.mergeVertices()}function Gr(e,t,n,r){k.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],o=[];function a(e,t,n,r){var i,o,a=Math.pow(2,r),s=[];for(i=0;i<=a;i++){s[i]=[];var u=e.clone().lerp(n,i/a),l=t.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)s[i][o]=0===o&&i===a?u:u.clone().lerp(l,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var d=Math.floor(o/2);o%2==0?(c(s[i][d+1]),c(s[i+1][d]),c(s[i][d])):(c(s[i][d+1]),c(s[i+1][d+1]),c(s[i+1][d]))}}function c(e){i.push(e.x,e.y,e.z)}function u(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function l(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function h(e){return Math.atan2(e.z,-e.x)}function d(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){for(var n=new s,r=new s,i=new s,o=0;o<t.length;o+=3)u(t[o+0],n),u(t[o+1],r),u(t[o+2],i),a(n,r,i,e)}(r=r||0),function(e){for(var t=new s,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new s,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=h(e)/2/Math.PI+.5,r=d(e)/Math.PI+.5;o.push(n,1-r)}(function(){for(var e=new s,t=new s,n=new s,r=new s,a=new x,c=new x,u=new x,d=0,f=0;d<i.length;d+=9,f+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),a.set(o[f+0],o[f+1]),c.set(o[f+2],o[f+3]),u.set(o[f+4],o[f+5]),r.copy(e).add(t).add(n).divideScalar(3);var p=h(r);l(a,f+0,e,p),l(c,f+2,t,p),l(u,f+4,n,p)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.addAttribute("position",new N(i,3)),this.addAttribute("normal",new N(i.slice(),3)),this.addAttribute("uv",new N(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Wr(e,t){_.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Hr(e,t)),this.mergeVertices()}function Hr(e,t){Gr.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Xr(e,t,n,r,i){_.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new qr(e,t,n,r,i)),this.mergeVertices()}function qr(e,t,n,r,i){k.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,c=[],u=[],l=[],h=[],d=new s,f=new s,p=new s;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var m=a/r*i,v=o/n*Math.PI*2;f.x=(e+t*Math.cos(v))*Math.cos(m),f.y=(e+t*Math.cos(v))*Math.sin(m),f.z=t*Math.sin(v),u.push(f.x,f.y,f.z),d.x=e*Math.cos(m),d.y=e*Math.sin(m),p.subVectors(f,d).normalize(),l.push(p.x,p.y,p.z),h.push(a/r),h.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var g=(r+1)*o+a-1,y=(r+1)*(o-1)+a-1,b=(r+1)*(o-1)+a,x=(r+1)*o+a;c.push(g,y,x),c.push(y,b,x)}this.setIndex(c),this.addAttribute("position",new N(u,3)),this.addAttribute("normal",new N(l,3)),this.addAttribute("uv",new N(h,2))}(jr.prototype=Object.create(u.prototype)).constructor=jr,Vr.prototype=Object.create(_.prototype),Vr.prototype.constructor=Vr,Gr.prototype=Object.create(k.prototype),Gr.prototype.constructor=Gr,Wr.prototype=Object.create(_.prototype),Wr.prototype.constructor=Wr,Hr.prototype=Object.create(Gr.prototype),Hr.prototype.constructor=Hr,Xr.prototype=Object.create(_.prototype),Xr.prototype.constructor=Xr,qr.prototype=Object.create(k.prototype),qr.prototype.constructor=qr;var Yr=function(e,t){p.call(this),t=void 0!==t?t:document,this.visible=!1;var n=new Jr;this.add(n);var r=new Qr;this.add(r);var i=this;B("camera",e),B("object",void 0),B("enabled",!0),B("axis",null),B("mode","translate"),B("translationSnap",null),B("rotationSnap",null),B("space","world"),B("size",1),B("dragging",!1),B("showX",!0),B("showY",!0),B("showZ",!0);var o={type:"change"},a={type:"mouseDown"},u={type:"mouseUp",mode:i.mode},l={type:"objectChange"},h=new Nr,d=new s,f=new s,m=new c,v={X:new s(1,0,0),Y:new s(0,1,0),Z:new s(0,0,1)},g=new c,y=new s,b=new s,x=new s,w=new s,_=0,S=new s,M=new c,T=new s,A=new s,E=new c,C=new s,P=new s,L=new c,O=new s,N=new s,R=new c,I=new s,D=new s,F=new s,k=new c,U=new s;function B(e,t){var a=t;Object.defineProperty(i,e,{get:function(){return void 0!==a?a:t},set:function(t){a!==t&&(a=t,r[e]=t,n[e]=t,i.dispatchEvent({type:e+"-changed",value:t}),i.dispatchEvent(o))}}),i[e]=t,r[e]=t,n[e]=t}function z(e){var n=e.changedTouches?e.changedTouches[0]:e,r=t.getBoundingClientRect();return{x:(n.clientX-r.left)/r.width*2-1,y:-(n.clientY-r.top)/r.height*2+1,button:e.button}}function j(e){e.preventDefault()}function V(e){i.enabled&&i.pointerHover(z(e))}function G(e){i.enabled&&(e.preventDefault(),i.pointerHover(z(e)),i.pointerDown(z(e)))}function W(e){i.enabled&&(e.preventDefault(),i.pointerMove(z(e)))}function H(e){i.enabled&&(e.preventDefault(),i.pointerUp(z(e)))}B("parentQuaternion",E),B("worldPosition",N),B("worldPositionStart",P),B("worldQuaternion",R),B("worldQuaternionStart",L),B("cameraPosition",S),B("cameraQuaternion",M),B("pointStart",b),B("pointEnd",x),B("rotationAxis",w),B("rotationAngle",_),B("eye",D),t.addEventListener("mousedown",G,!1),t.addEventListener("touchstart",G,!1),t.addEventListener("mousemove",V,!1),t.addEventListener("touchmove",V,!1),document.addEventListener("mousemove",W,!1),t.addEventListener("touchmove",W,!1),document.addEventListener("mouseup",H,!1),t.addEventListener("touchend",H,!1),t.addEventListener("touchcancel",H,!1),t.addEventListener("touchleave",H,!1),t.addEventListener("contextmenu",j,!1),this.dispose=function(){t.removeEventListener("mousedown",G),t.removeEventListener("touchstart",G),t.removeEventListener("mousemove",V),t.removeEventListener("touchmove",V),document.removeEventListener("mousemove",W),t.removeEventListener("touchmove",W),document.removeEventListener("mouseup",H),t.removeEventListener("touchend",H),t.removeEventListener("touchcancel",H),t.removeEventListener("touchleave",H),t.removeEventListener("contextmenu",j)},this.attach=function(e){this.object=e,this.visible=!0},this.detach=function(){this.object=void 0,this.visible=!1,this.axis=null},this.updateMatrixWorld=function(){void 0!==this.object&&(this.object.updateMatrixWorld(),this.object.parent.matrixWorld.decompose(A,E,C),this.object.matrixWorld.decompose(N,R,I)),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(S,M,T),this.camera instanceof Hn?D.copy(S).sub(N).normalize():this.camera instanceof Jn&&D.copy(S).normalize(),p.prototype.updateMatrixWorld.call(this)},this.pointerHover=function(e){if(void 0!==this.object&&!0!==this.dragging&&(void 0===e.button||0===e.button)){h.setFromCamera(e,this.camera);var t=h.intersectObjects(n.picker[this.mode].children,!0)[0]||!1;this.axis=t?t.object.name:null}},this.pointerDown=function(e){if(!(void 0===this.object||!0===this.dragging||void 0!==e.button&&0!==e.button||0!==e.button&&void 0!==e.button||null===this.axis)){h.setFromCamera(e,this.camera);var t=h.intersectObjects([r],!0)[0]||!1;if(t){var n=this.space;if("scale"===this.mode?n="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(n="world"),"local"===n&&"rotate"===this.mode){var i=this.rotationSnap;"X"===this.axis&&i&&(this.object.rotation.x=Math.round(this.object.rotation.x/i)*i),"Y"===this.axis&&i&&(this.object.rotation.y=Math.round(this.object.rotation.y/i)*i),"Z"===this.axis&&i&&(this.object.rotation.z=Math.round(this.object.rotation.z/i)*i)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),F.copy(this.object.position),k.copy(this.object.quaternion),U.copy(this.object.scale),this.object.matrixWorld.decompose(P,L,O),b.copy(t.point).sub(P),"local"===n&&b.applyQuaternion(L.clone().inverse())}this.dragging=!0,a.mode=this.mode,this.dispatchEvent(a)}},this.pointerMove=function(e){var t=this.axis,n=this.mode,i=this.object,a=this.space;if("scale"===n?a="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(a="world"),void 0!==i&&null!==t&&!1!==this.dragging&&(void 0===e.button||0===e.button)){h.setFromCamera(e,this.camera);var s=h.intersectObjects([r],!0)[0]||!1;if(!1!==s){if(x.copy(s.point).sub(P),"local"===a&&x.applyQuaternion(L.clone().inverse()),"translate"===n)-1===t.search("X")&&(x.x=b.x),-1===t.search("Y")&&(x.y=b.y),-1===t.search("Z")&&(x.z=b.z),"local"===a?i.position.copy(x).sub(b).applyQuaternion(k):i.position.copy(x).sub(b),i.position.add(F),this.translationSnap&&("local"===a&&(i.position.applyQuaternion(m.copy(k).inverse()),-1!==t.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.position.applyQuaternion(k)),"world"===a&&(i.parent&&i.position.add(d.setFromMatrixPosition(i.parent.matrixWorld)),-1!==t.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.parent&&i.position.sub(d.setFromMatrixPosition(i.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){var c=x.length()/b.length();x.dot(b)<0&&(c*=-1),d.set(c,c,c)}else d.copy(x).divide(b),-1===t.search("X")&&(d.x=1),-1===t.search("Y")&&(d.y=1),-1===t.search("Z")&&(d.z=1);i.scale.copy(U).multiply(d)}else if("rotate"===n){var u=20/N.distanceTo(d.setFromMatrixPosition(this.camera.matrixWorld)),p="local"===this.space?R:g,S=v[t];"E"===t?(d.copy(x).cross(b),w.copy(D),_=x.angleTo(b)*(d.dot(D)<0?1:-1)):"XYZE"===t?(d.copy(x).sub(b).cross(D).normalize(),w.copy(d),_=x.sub(b).dot(d.cross(D))*u):"X"!==t&&"Y"!==t&&"Z"!==t||(y.copy(S).applyQuaternion(p),w.copy(S),d=S.clone(),f=x.clone().sub(b),"local"===a&&(d.applyQuaternion(p),f.applyQuaternion(L)),_=f.dot(d.cross(D).normalize())*u),this.rotationSnap&&(_=Math.round(_/this.rotationSnap)*this.rotationSnap),this.rotationAngle=_,"local"===a?(i.quaternion.copy(k),i.quaternion.multiply(m.setFromAxisAngle(w,_))):(i.quaternion.copy(m.setFromAxisAngle(w,_)),i.quaternion.multiply(k))}this.dispatchEvent(o),this.dispatchEvent(l)}}},this.pointerUp=function(e){void 0!==e.button&&0!==e.button||(this.dragging&&null!==this.axis&&(u.mode=this.mode,this.dispatchEvent(u)),this.dragging=!1,void 0===e.button&&(this.axis=null))},this.getMode=function(){return i.mode},this.setMode=function(e){i.mode=e},this.setTranslationSnap=function(e){i.translationSnap=e},this.setRotationSnap=function(e){i.rotationSnap=e},this.setSize=function(e){i.size=e},this.setSpace=function(e){i.space=e},this.update=function(){console.warn("TransformControls: update function has been depricated.")}};Yr.prototype=Object.assign(Object.create(p.prototype),{constructor:Yr,isTransformControls:!0});var Jr=function(){p.call(this),this.type="TransformControlsGizmo";var e=new un({depthTest:!1,depthWrite:!1,transparent:!0,side:J,fog:!1}),t=new ln({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1}),n=e.clone();n.opacity=.15;var r=e.clone();r.opacity=.33;var i=e.clone();i.color.set(16711680);var o=e.clone();o.color.set(65280);var u=e.clone();u.color.set(255);var h=e.clone();h.opacity=.25;var d=h.clone();d.color.set(16776960);var f=h.clone();f.color.set(65535);var m=h.clone();m.color.set(16711935),e.clone().color.set(16776960);var g=t.clone();g.color.set(16711680);var y=t.clone();y.color.set(65280);var b=t.clone();b.color.set(255);var x=t.clone();x.color.set(65535);var w=t.clone();w.color.set(16711935);var _=t.clone();_.color.set(16776960);var S=t.clone();S.color.set(7895160);var M=_.clone();M.opacity=.25;var T=new zn(0,.05,.2,12,1,!1),A=new Un(.125,.125,.125),E=new k;E.addAttribute("position",new N([0,0,0,1,0,0],3));var C=function(e,t){for(var n=new k,r=[],i=0;i<=64*t;++i)r.push(0,Math.cos(i/32*Math.PI)*e,Math.sin(i/32*Math.PI)*e);return n.addAttribute("position",new N(r,3)),n},P={X:[[new fn(T,i),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new fn(T,i),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new pn(E,g)]],Y:[[new fn(T,o),[0,1,0],null,null,"fwd"],[new fn(T,o),[0,1,0],[Math.PI,0,0],null,"bwd"],[new pn(E,y),null,[0,0,Math.PI/2]]],Z:[[new fn(T,u),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new fn(T,u),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new pn(E,b),null,[0,-Math.PI/2,0]]],XYZ:[[new fn(new Hr(.1,0),h),[0,0,0],[0,0,0]]],XY:[[new fn(new tr(.295,.295),d),[.15,.15,0]],[new pn(E,_),[.18,.3,0],null,[.125,1,1]],[new pn(E,_),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new fn(new tr(.295,.295),f),[0,.15,.15],[0,Math.PI/2,0]],[new pn(E,x),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new pn(E,x),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new fn(new tr(.295,.295),m),[.15,0,.15],[-Math.PI/2,0,0]],[new pn(E,w),[.18,0,.3],null,[.125,1,1]],[new pn(E,w),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},L={X:[[new fn(new zn(.2,0,1,4,1,!1),n),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new fn(new zn(.2,0,1,4,1,!1),n),[0,.6,0]]],Z:[[new fn(new zn(.2,0,1,4,1,!1),n),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new fn(new Hr(.2,0),n)]],XY:[[new fn(new tr(.4,.4),n),[.2,.2,0]]],YZ:[[new fn(new tr(.4,.4),n),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new fn(new tr(.4,.4),n),[.2,0,.2],[-Math.PI/2,0,0]]]},O={START:[[new fn(new Hr(.01,2),r),null,null,null,"helper"]],END:[[new fn(new Hr(.01,2),r),null,null,null,"helper"]],DELTA:[[new pn(function(e,t){var n=new k;return n.addAttribute("position",new N([0,0,0,1,1,1],3)),n}(),r),null,null,null,"helper"]],X:[[new pn(E,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new pn(E,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new pn(E,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},R={X:[[new pn(C(1,.5),g)],[new fn(new Hr(.04,0),i),[0,0,.99],null,[1,3,1]]],Y:[[new pn(C(1,.5),y),null,[0,0,-Math.PI/2]],[new fn(new Hr(.04,0),o),[0,0,.99],null,[3,1,1]]],Z:[[new pn(C(1,.5),b),null,[0,Math.PI/2,0]],[new fn(new Hr(.04,0),u),[.99,0,0],null,[1,3,1]]],E:[[new pn(C(1.25,1),M),null,[0,Math.PI/2,0]],[new fn(new zn(.03,0,.15,4,1,!1),M),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new fn(new zn(.03,0,.15,4,1,!1),M),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new fn(new zn(.03,0,.15,4,1,!1),M),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new fn(new zn(.03,0,.15,4,1,!1),M),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new pn(C(1,1),S),null,[0,Math.PI/2,0]]]},I={AXIS:[[new pn(E,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},D={X:[[new fn(new qr(1,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new fn(new qr(1,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new fn(new qr(1,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new fn(new qr(1.25,.1,2,24),n)]],XYZE:[[new fn(new B(.7,10,8),n)]]},F={X:[[new fn(A,i),[.8,0,0],[0,0,-Math.PI/2]],[new pn(E,g),null,null,[.8,1,1]]],Y:[[new fn(A,o),[0,.8,0]],[new pn(E,y),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new fn(A,u),[0,0,.8],[Math.PI/2,0,0]],[new pn(E,b),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new fn(A,d),[.85,.85,0],null,[2,2,.2]],[new pn(E,_),[.855,.98,0],null,[.125,1,1]],[new pn(E,_),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new fn(A,f),[0,.85,.85],null,[.2,2,2]],[new pn(E,x),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new pn(E,x),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new fn(A,m),[.85,0,.85],null,[2,.2,2]],[new pn(E,w),[.855,0,.98],null,[.125,1,1]],[new pn(E,w),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new fn(new Un(.125,.125,.125),h),[1.1,0,0]]],XYZY:[[new fn(new Un(.125,.125,.125),h),[0,1.1,0]]],XYZZ:[[new fn(new Un(.125,.125,.125),h),[0,0,1.1]]]},U={X:[[new fn(new zn(.2,0,.8,4,1,!1),n),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new fn(new zn(.2,0,.8,4,1,!1),n),[0,.5,0]]],Z:[[new fn(new zn(.2,0,.8,4,1,!1),n),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new fn(A,n),[.85,.85,0],null,[3,3,.2]]],YZ:[[new fn(A,n),[0,.85,.85],null,[.2,3,3]]],XZ:[[new fn(A,n),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new fn(new Un(.2,.2,.2),n),[1.1,0,0]]],XYZY:[[new fn(new Un(.2,.2,.2),n),[0,1.1,0]]],XYZZ:[[new fn(new Un(.2,.2,.2),n),[0,0,1.1]]]},z={X:[[new pn(E,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new pn(E,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new pn(E,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},j=function(e){var t=new p;for(var n in e)for(var r=e[n].length;r--;){var i=e[n][r][0].clone(),o=e[n][r][1],a=e[n][r][2],s=e[n][r][3],c=e[n][r][4];i.name=n,i.tag=c,o&&i.position.set(o[0],o[1],o[2]),a&&i.rotation.set(a[0],a[1],a[2]),s&&i.scale.set(s[0],s[1],s[2]),i.updateMatrix();var u=i.geometry.clone();u.applyMatrix(i.matrix),i.geometry=u,i.position.set(0,0,0),i.rotation.set(0,0,0),i.scale.set(1,1,1),t.add(i)}return t},V=new s(0,0,0),G=new l,W=new s(0,1,0),H=new s(0,0,0),X=new a,q=new c,Y=new c,Q=new c,Z=new s(1,0,0),K=new s(0,1,0),$=new s(0,0,1);this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=j(P)),this.add(this.gizmo.rotate=j(R)),this.add(this.gizmo.scale=j(F)),this.add(this.picker.translate=j(L)),this.add(this.picker.rotate=j(D)),this.add(this.picker.scale=j(U)),this.add(this.helper.translate=j(O)),this.add(this.helper.rotate=j(I)),this.add(this.helper.scale=j(z)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1,this.updateMatrixWorld=function(){var e=this.space;"scale"===this.mode&&(e="local");var t="local"===e?this.worldQuaternion:Q;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var n=[];n=(n=(n=n.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var r=0;r<n.length;r++){var i=n[r];i.visible=!0,i.rotation.set(0,0,0),i.position.copy(this.worldPosition);var o=this.worldPosition.distanceTo(this.cameraPosition);if(i.scale.set(1,1,1).multiplyScalar(o*this.size/7),"helper"!==i.tag){if(i.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){"X"!==i.name&&"XYZX"!==i.name||Math.abs(W.copy(Z).applyQuaternion(t).dot(this.eye))>.99&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Y"!==i.name&&"XYZY"!==i.name||Math.abs(W.copy(K).applyQuaternion(t).dot(this.eye))>.99&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Z"!==i.name&&"XYZZ"!==i.name||Math.abs(W.copy($).applyQuaternion(t).dot(this.eye))>.99&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XY"===i.name&&Math.abs(W.copy($).applyQuaternion(t).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"YZ"===i.name&&Math.abs(W.copy(Z).applyQuaternion(t).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XZ"===i.name&&Math.abs(W.copy(K).applyQuaternion(t).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),-1!==i.name.search("X")&&(W.copy(Z).applyQuaternion(t).dot(this.eye)<-.4?"fwd"===i.tag?i.visible=!1:i.scale.x*=-1:"bwd"===i.tag&&(i.visible=!1)),-1!==i.name.search("Y")&&(W.copy(K).applyQuaternion(t).dot(this.eye)<-.4?"fwd"===i.tag?i.visible=!1:i.scale.y*=-1:"bwd"===i.tag&&(i.visible=!1)),-1!==i.name.search("Z")&&(W.copy($).applyQuaternion(t).dot(this.eye)<-.4?"fwd"===i.tag?i.visible=!1:i.scale.z*=-1:"bwd"===i.tag&&(i.visible=!1))}else"rotate"===this.mode&&(Y.copy(t),W.copy(this.eye).applyQuaternion(q.copy(t).inverse()),-1!==i.name.search("E")&&i.quaternion.setFromRotationMatrix(X.lookAt(this.eye,H,K)),"X"===i.name&&(q.setFromAxisAngle(Z,Math.atan2(-W.y,W.z)),q.multiplyQuaternions(Y,q),i.quaternion.copy(q)),"Y"===i.name&&(q.setFromAxisAngle(K,Math.atan2(W.x,W.z)),q.multiplyQuaternions(Y,q),i.quaternion.copy(q)),"Z"===i.name&&(q.setFromAxisAngle($,Math.atan2(W.y,W.x)),q.multiplyQuaternions(Y,q),i.quaternion.copy(q)));i.visible=i.visible&&(-1===i.name.indexOf("X")||this.showX),i.visible=i.visible&&(-1===i.name.indexOf("Y")||this.showY),i.visible=i.visible&&(-1===i.name.indexOf("Z")||this.showZ),i.visible=i.visible&&(-1===i.name.indexOf("E")||this.showX&&this.showY&&this.showZ),i.material._opacity=i.material._opacity||i.material.opacity,i.material._color=i.material._color||i.material.color.clone(),i.material.color.copy(i.material._color),i.material.opacity=i.material._opacity,this.enabled?this.axis&&(i.name===this.axis?(i.material.opacity=1,i.material.color.lerp(new v(1,1,1),.5)):this.axis.split("").some(function(e){return i.name===e})?(i.material.opacity=1,i.material.color.lerp(new v(1,1,1),.5)):(i.material.opacity*=.25,i.material.color.lerp(new v(1,1,1),.5))):(i.material.opacity*=.5,i.material.color.lerp(new v(1,1,1),.5))}else i.visible=!1,"AXIS"===i.name?(i.position.copy(this.worldPositionStart),i.visible=!!this.axis,"X"===this.axis&&(q.setFromEuler(G.set(0,0,0)),i.quaternion.copy(t).multiply(q),Math.abs(W.copy(Z).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),"Y"===this.axis&&(q.setFromEuler(G.set(0,0,Math.PI/2)),i.quaternion.copy(t).multiply(q),Math.abs(W.copy(K).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),"Z"===this.axis&&(q.setFromEuler(G.set(0,Math.PI/2,0)),i.quaternion.copy(t).multiply(q),Math.abs(W.copy($).applyQuaternion(t).dot(this.eye))>.9&&(i.visible=!1)),"XYZE"===this.axis&&(q.setFromEuler(G.set(0,Math.PI/2,0)),W.copy(this.rotationAxis),i.quaternion.setFromRotationMatrix(X.lookAt(H,W,K)),i.quaternion.multiply(q),i.visible=this.dragging),"E"===this.axis&&(i.visible=!1)):"START"===i.name?(i.position.copy(this.worldPositionStart),i.visible=this.dragging):"END"===i.name?(i.position.copy(this.worldPosition),i.visible=this.dragging):"DELTA"===i.name?(i.position.copy(this.worldPositionStart),i.quaternion.copy(this.worldQuaternionStart),V.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),V.applyQuaternion(this.worldQuaternionStart.clone().inverse()),i.scale.copy(V),i.visible=this.dragging):(i.quaternion.copy(t),this.dragging?i.position.copy(this.worldPositionStart):i.position.copy(this.worldPosition),this.axis&&(i.visible=-1!==this.axis.search(i.name)))}p.prototype.updateMatrixWorld.call(this)}};Jr.prototype=Object.assign(Object.create(p.prototype),{constructor:Jr,isTransformControlsGizmo:!0});var Qr=function(){fn.call(this,new tr(1e5,1e5,2,2),new un({visible:!1,wireframe:!0,side:J,transparent:!0,opacity:.1})),this.type="TransformControlsPlane";var e=new s(1,0,0),t=new s(0,1,0),n=new s(0,0,1),r=new s,i=new s,o=new s,u=new a,l=new c;this.updateMatrixWorld=function(){var a=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(a="local"),e.set(1,0,0).applyQuaternion("local"===a?this.worldQuaternion:l),t.set(0,1,0).applyQuaternion("local"===a?this.worldQuaternion:l),n.set(0,0,1).applyQuaternion("local"===a?this.worldQuaternion:l),o.copy(t),this.mode){case"translate":case"scale":switch(this.axis){case"X":o.copy(this.eye).cross(e),i.copy(e).cross(o);break;case"Y":o.copy(this.eye).cross(t),i.copy(t).cross(o);break;case"Z":o.copy(this.eye).cross(n),i.copy(n).cross(o);break;case"XY":i.copy(n);break;case"YZ":i.copy(e);break;case"XZ":o.copy(n),i.copy(t);break;case"XYZ":case"E":i.set(0,0,0)}break;case"rotate":default:i.set(0,0,0)}0===i.length()?this.quaternion.copy(this.cameraQuaternion):(u.lookAt(r.set(0,0,0),i,o),this.quaternion.setFromRotationMatrix(u)),p.prototype.updateMatrixWorld.call(this)}};function Zr(e,t){this.start=void 0!==e?e:new s,this.end=void 0!==t?t:new s}Qr.prototype=Object.assign(Object.create(fn.prototype),{constructor:Qr,isTransformControlsPlane:!0}),Object.assign(Zr.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("Line3: .getCenter() target is now required"),e=new s),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("Line3: .delta() target is now required"),e=new s),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("Line3: .at() target is now required"),t=new s),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new s,t=new s;return function(n,r){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),a=t.dot(e)/i;return r&&(a=o.clamp(a,0,1)),a}}(),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("Line3: .closestPointToPoint() target is now required"),n=new s),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}});var Kr=0;function $r(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new ri,this.unassigned=new ri,this.vertices=[]}function ei(){this.normal=new s,this.midpoint=new s,this.area=0,this.constant=0,this.outside=null,this.mark=Kr,this.edge=null}function ti(e,t){this.vertex=e,this.prev=null,this.next=null,this.twin=null,this.face=t}function ni(e){this.point=e,this.prev=null,this.next=null,this.face=null}function ri(){this.head=null,this.tail=null}function ii(e){_.call(this),this.fromBufferGeometry(new oi(e)),this.mergeVertices()}function oi(e){k.call(this);var t=[],n=[];void 0===$r&&console.error("ConvexBufferGeometry: ConvexBufferGeometry relies on QuickHull");for(var r=(new $r).setFromPoints(e).faces,i=0;i<r.length;i++){var o=r[i],a=o.edge;do{var s=a.head().point;t.push(s.x,s.y,s.z),n.push(o.normal.x,o.normal.y,o.normal.z),a=a.next}while(a!==o.edge)}this.addAttribute("position",new N(t,3)),this.addAttribute("normal",new N(n,3))}Object.assign($r.prototype,{setFromPoints:function(e){!0!==Array.isArray(e)&&console.error("QuickHull: Points parameter is not an array."),e.length<4&&console.error("QuickHull: The algorithm needs at least four points."),this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.vertices.push(new ni(e[t]));return this.compute(),this},setFromObject:function(e){var t=[];return e.updateMatrixWorld(!0),e.traverse(function(e){var n,r,i,o=e.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(n=0,r=a.length;n<r;n++)(i=a[n].clone()).applyMatrix4(e.matrixWorld),t.push(i)}else if(o.isBufferGeometry){var c=o.attributes.position;if(void 0!==c)for(n=0,r=c.count;n<r;n++)(i=new s).fromBufferAttribute(c,n).applyMatrix4(e.matrixWorld),t.push(i)}}),this.setFromPoints(t)},makeEmpty:function(){return this.faces=[],this.vertices=[],this},addVertexToFace:function(e,t){return e.face=t,null===t.outside?this.assigned.append(e):this.assigned.insertBefore(t.outside,e),t.outside=e,this},removeVertexFromFace:function(e,t){return e===t.outside&&(null!==e.next&&e.next.face===t?t.outside=e.next:t.outside=null),this.assigned.remove(e),this},removeAllVerticesFromFace:function(e){if(null!==e.outside){for(var t=e.outside,n=e.outside;null!==n.next&&n.next.face===e;)n=n.next;return this.assigned.removeSubList(t,n),t.prev=n.next=null,e.outside=null,t}},deleteFaceVertices:function(e,t){var n=this.removeAllVerticesFromFace(e);if(void 0!==n)if(void 0===t)this.unassigned.appendChain(n);else{var r=n;do{var i=r.next;t.distanceToPoint(r.point)>this.tolerance?this.addVertexToFace(r,t):this.unassigned.append(r),r=i}while(null!==r)}return this},resolveUnassignedPoints:function(e){if(!1===this.unassigned.isEmpty()){var t=this.unassigned.first();do{for(var n=t.next,r=this.tolerance,i=null,o=0;o<e.length;o++){var a=e[o];if(a.mark===Kr){var s=a.distanceToPoint(t.point);if(s>r&&(r=s,i=a),r>1e3*this.tolerance)break}}null!==i&&this.addVertexToFace(t,i),t=n}while(null!==t)}return this},computeExtremes:function(){var e,t,n,r=new s,i=new s,o=[],a=[];for(e=0;e<3;e++)o[e]=a[e]=this.vertices[0];for(r.copy(this.vertices[0].point),i.copy(this.vertices[0].point),e=0,t=this.vertices.length;e<t;e++){var c=this.vertices[e],u=c.point;for(n=0;n<3;n++)u.getComponent(n)<r.getComponent(n)&&(r.setComponent(n,u.getComponent(n)),o[n]=c);for(n=0;n<3;n++)u.getComponent(n)>i.getComponent(n)&&(i.setComponent(n,u.getComponent(n)),a[n]=c)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(r.x),Math.abs(i.x))+Math.max(Math.abs(r.y),Math.abs(i.y))+Math.max(Math.abs(r.z),Math.abs(i.z))),{min:o,max:a}},computeInitialHull:function(){var e,t,n;return function(){void 0===e&&(e=new Zr,t=new Or,n=new s);var r,i,o,a,c,u,l,h,d,f=this.vertices,p=this.computeExtremes(),m=p.min,v=p.max,g=0,y=0;for(u=0;u<3;u++)(d=v[u].point.getComponent(u)-m[u].point.getComponent(u))>g&&(g=d,y=u);for(i=m[y],o=v[y],g=0,e.set(i.point,o.point),u=0,l=this.vertices.length;u<l;u++)(r=f[u])!==i&&r!==o&&(e.closestPointToPoint(r.point,!0,n),(d=n.distanceToSquared(r.point))>g&&(g=d,a=r));for(g=-1,t.setFromCoplanarPoints(i.point,o.point,a.point),u=0,l=this.vertices.length;u<l;u++)(r=f[u])!==i&&r!==o&&r!==a&&(d=Math.abs(t.distanceToPoint(r.point)))>g&&(g=d,c=r);var b=[];if(t.distanceToPoint(c.point)<0)for(b.push(ei.create(i,o,a),ei.create(c,o,i),ei.create(c,a,o),ei.create(c,i,a)),u=0;u<3;u++)h=(u+1)%3,b[u+1].getEdge(2).setTwin(b[0].getEdge(h)),b[u+1].getEdge(1).setTwin(b[h+1].getEdge(0));else for(b.push(ei.create(i,a,o),ei.create(c,i,o),ei.create(c,o,a),ei.create(c,a,i)),u=0;u<3;u++)h=(u+1)%3,b[u+1].getEdge(2).setTwin(b[0].getEdge((3-u)%3)),b[u+1].getEdge(0).setTwin(b[h+1].getEdge(1));for(u=0;u<4;u++)this.faces.push(b[u]);for(u=0,l=f.length;u<l;u++)if((r=f[u])!==i&&r!==o&&r!==a&&r!==c){g=this.tolerance;var x=null;for(h=0;h<4;h++)(d=this.faces[h].distanceToPoint(r.point))>g&&(g=d,x=this.faces[h]);null!==x&&this.addVertexToFace(r,x)}return this}}(),reindexFaces:function(){for(var e=[],t=0;t<this.faces.length;t++){var n=this.faces[t];n.mark===Kr&&e.push(n)}return this.faces=e,this},nextVertexToAdd:function(){if(!1===this.assigned.isEmpty()){var e,t=0,n=this.assigned.first().face,r=n.outside;do{var i=n.distanceToPoint(r.point);i>t&&(t=i,e=r),r=r.next}while(null!==r&&r.face===n);return e}},computeHorizon:function(e,t,n,r){var i;this.deleteFaceVertices(n),n.mark=1,i=null===t?t=n.getEdge(0):t.next;do{var o=i.twin,a=o.face;a.mark===Kr&&(a.distanceToPoint(e)>this.tolerance?this.computeHorizon(e,o,a,r):r.push(i)),i=i.next}while(i!==t);return this},addAdjoiningFace:function(e,t){var n=ei.create(e,t.tail(),t.head());return this.faces.push(n),n.getEdge(-1).setTwin(t.twin),n.getEdge(0)},addNewFaces:function(e,t){this.newFaces=[];for(var n=null,r=null,i=0;i<t.length;i++){var o=t[i],a=this.addAdjoiningFace(e,o);null===n?n=a:a.next.setTwin(r),this.newFaces.push(a.face),r=a}return n.next.setTwin(r),this},addVertexToHull:function(e){var t=[];return this.unassigned.clear(),this.removeVertexFromFace(e,e.face),this.computeHorizon(e.point,null,e.face,t),this.addNewFaces(e,t),this.resolveUnassignedPoints(this.newFaces),this},cleanup:function(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this},compute:function(){var e;for(this.computeInitialHull();void 0!==(e=this.nextVertexToAdd());)this.addVertexToHull(e);return this.reindexFaces(),this.cleanup(),this}}),Object.assign(ei,{create:function(e,t,n){var r=new ei,i=new ti(e,r),o=new ti(t,r),a=new ti(n,r);return i.next=a.prev=o,o.next=i.prev=a,a.next=o.prev=i,r.edge=i,r.compute()}}),Object.assign(ei.prototype,{getEdge:function(e){for(var t=this.edge;e>0;)t=t.next,e--;for(;e<0;)t=t.prev,e++;return t},compute:function(){var e;return function(){void 0===e&&(e=new dn);var t=this.edge.tail(),n=this.edge.head(),r=this.edge.next.head();return e.set(t.point,n.point,r.point),e.getNormal(this.normal),e.getMidpoint(this.midpoint),this.area=e.getArea(),this.constant=this.normal.dot(this.midpoint),this}}(),distanceToPoint:function(e){return this.normal.dot(e)-this.constant}}),Object.assign(ti.prototype,{head:function(){return this.vertex},tail:function(){return this.prev?this.prev.vertex:null},length:function(){var e=this.head(),t=this.tail();return null!==t?t.point.distanceTo(e.point):-1},lengthSquared:function(){var e=this.head(),t=this.tail();return null!==t?t.point.distanceToSquared(e.point):-1},setTwin:function(e){return this.twin=e,e.twin=this,this}}),Object.assign(ri.prototype,{first:function(){return this.head},last:function(){return this.tail},clear:function(){return this.head=this.tail=null,this},insertBefore:function(e,t){return t.prev=e.prev,t.next=e,null===t.prev?this.head=t:t.prev.next=t,e.prev=t,this},insertAfter:function(e,t){return t.prev=e,t.next=e.next,null===t.next?this.tail=t:t.next.prev=t,e.next=t,this},append:function(e){return null===this.head?this.head=e:this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e,this},appendChain:function(e){for(null===this.head?this.head=e:this.tail.next=e,e.prev=this.tail;null!==e.next;)e=e.next;return this.tail=e,this},remove:function(e){return null===e.prev?this.head=e.next:e.prev.next=e.next,null===e.next?this.tail=e.prev:e.next.prev=e.prev,this},removeSubList:function(e,t){return null===e.prev?this.head=t.next:e.prev.next=t.next,null===t.next?this.tail=e.prev:t.next.prev=e.prev,this},isEmpty:function(){return null===this.head}}),ii.prototype=Object.create(_.prototype),ii.prototype.constructor=ii,oi.prototype=Object.create(k.prototype),oi.prototype.constructor=oi;var ai=function(e,t){this.minSizeForBreak=e||1.4,this.smallDelta=t||1e-4,this.tempLine1=new Zr,this.tempPlane1=new Or,this.tempPlane2=new Or,this.tempPlane_Cut=new Or,this.tempCM1=new s,this.tempCM2=new s,this.tempVector3=new s,this.tempVector3_2=new s,this.tempVector3_3=new s,this.tempVector3_P0=new s,this.tempVector3_P1=new s,this.tempVector3_P2=new s,this.tempVector3_N0=new s,this.tempVector3_N1=new s,this.tempVector3_AB=new s,this.tempVector3_CB=new s,this.tempResultObjects={object1:null,object2:null},this.segments=[];for(var n=0;n<900;n++)this.segments[n]=!1};function si(){this.type="Curve",this.arcLengthDivisions=200}function ci(){si.call(this)}function ui(e){si.call(this),this.scale=void 0===e?5:e}function li(e){si.call(this),this.scale=void 0===e?70:e}function hi(){si.call(this)}function di(){si.call(this)}function fi(e){si.call(this),this.scale=void 0===e?10:e}function pi(e){si.call(this),this.scale=void 0===e?10:e}function mi(e){si.call(this),this.scale=void 0===e?10:e}function vi(e){si.call(this),this.scale=void 0===e?10:e}ai.prototype={constructor:ai,prepareBreakableObject:function(e,t,n,r,i){e.geometry.isBufferGeometry||console.error("ConvexObjectBreaker.prepareBreakableObject(): Parameter object must have a BufferGeometry.");var o=e.userData;o.mass=t,o.velocity=n.clone(),o.angularVelocity=r.clone(),o.breakable=i},subdivideByImpact:function(e,t,n,r,i){var o=[],a=this.tempPlane1,s=this.tempPlane2;this.tempVector3.addVectors(t,n),a.setFromCoplanarPoints(t,e.position,this.tempVector3);var c=i+r,u=this;return function i(l,h,d,f){if(Math.random()<.05*f||f>c)o.push(l);else{var p=Math.PI;0===f?(s.normal.copy(a.normal),s.constant=a.constant):f<=r?(p=(d-h)*(.2+.6*Math.random())+h,u.tempVector3_2.copy(e.position).sub(t).applyAxisAngle(n,p).add(t),s.setFromCoplanarPoints(t,u.tempVector3,u.tempVector3_2)):(p=(.5*(1&f)+.2*(2-Math.random()))*Math.PI,u.tempVector3_2.copy(t).sub(l.position).applyAxisAngle(n,p).add(l.position),u.tempVector3_3.copy(n).add(l.position),s.setFromCoplanarPoints(l.position,u.tempVector3_3,u.tempVector3_2)),u.cutByPlane(l,s,u.tempResultObjects);var m=u.tempResultObjects.object1,v=u.tempResultObjects.object2;m&&i(m,h,p,f+1),v&&i(v,p,d,f+1)}}(e,0,2*Math.PI,0),o},cutByPlane:function(e,t,n){var r=e.geometry,i=r.attributes.position.array,o=r.attributes.normal.array,a=i.length/3,c=a/3,u=r.getIndex();function l(e,t){var n=3*e+t;return u?u[n]:n}u&&(c=(u=u.array).length/3);for(var h=[],d=[],f=this.smallDelta,p=a*a,m=0;m<p;m++)this.segments[m]=!1;var v=this.tempVector3_P0,g=this.tempVector3_P1,y=this.tempVector3_N0,b=this.tempVector3_N1;for(m=0;m<c-1;m++){var x=l(m,0),w=l(m,1),_=l(m,2);y.set(o[x],o[x]+1,o[x]+2);for(var S=m+1;S<c;S++){var M=l(S,0),T=l(S,1),A=l(S,2);b.set(o[M],o[M]+1,o[M]+2),1-y.dot(b)<f&&(x===M||x===T||x===A?w===M||w===T||w===A?(this.segments[x*a+w]=!0,this.segments[w*a+x]=!0):(this.segments[_*a+x]=!0,this.segments[x*a+_]=!0):w!==M&&w!==T&&w!==A||(this.segments[_*a+w]=!0,this.segments[w*a+_]=!0))}}var E=this.tempPlane_Cut;e.updateMatrix(),ai.transformPlaneToLocalSpace(t,e.matrix,E);for(m=0;m<c;m++)for(var C=l(m,0),P=l(m,1),L=l(m,2),O=0;O<3;O++){var N=0===O?C:1===O?P:L,R=0===O?P:1===O?L:C;if(!this.segments[N*a+R]){this.segments[N*a+R]=!0,this.segments[R*a+N]=!0,v.set(i[3*N],i[3*N+1],i[3*N+2]),g.set(i[3*R],i[3*R+1],i[3*R+2]);var I=0;(D=E.distanceToPoint(v))>f?(I=2,d.push(v.clone())):D<-f?(I=1,h.push(v.clone())):(I=3,h.push(v.clone()),d.push(v.clone()));var D,F=0;if((D=E.distanceToPoint(g))>f?(F=2,d.push(g.clone())):D<-f?(F=1,h.push(g.clone())):(F=3,h.push(g.clone()),d.push(g.clone())),1===I&&2===F||2===I&&1===F){this.tempLine1.start.copy(v),this.tempLine1.end.copy(g);var k=new s;if(void 0===(k=E.intersectLine(this.tempLine1,k)))return console.error("Internal error: segment does not intersect plane."),n.segmentedObject1=null,n.segmentedObject2=null,0;h.push(k),d.push(k.clone())}}}var U=.5*e.userData.mass;this.tempCM1.set(0,0,0);var B=0,z=h.length;if(z>0){for(m=0;m<z;m++)this.tempCM1.add(h[m]);this.tempCM1.divideScalar(z);for(m=0;m<z;m++){(G=h[m]).sub(this.tempCM1),B=Math.max(B,G.x,G.y,G.z)}this.tempCM1.add(e.position)}this.tempCM2.set(0,0,0);var j=0,V=d.length;if(V>0){for(m=0;m<V;m++)this.tempCM2.add(d[m]);this.tempCM2.divideScalar(V);for(m=0;m<V;m++){var G;(G=d[m]).sub(this.tempCM2),j=Math.max(j,G.x,G.y,G.z)}this.tempCM2.add(e.position)}var W=null,H=null,X=0;return z>4&&((W=new fn(new oi(h),e.material)).position.copy(this.tempCM1),W.quaternion.copy(e.quaternion),this.prepareBreakableObject(W,U,e.userData.velocity,e.userData.angularVelocity,2*B>this.minSizeForBreak),X++),V>4&&((H=new fn(new oi(d),e.material)).position.copy(this.tempCM2),H.quaternion.copy(e.quaternion),this.prepareBreakableObject(H,U,e.userData.velocity,e.userData.angularVelocity,2*j>this.minSizeForBreak),X++),n.object1=W,n.object2=H,X}},ai.transformFreeVector=function(e,t){var n=e.x,r=e.y,i=e.z,o=t.elements;return e.x=o[0]*n+o[4]*r+o[8]*i,e.y=o[1]*n+o[5]*r+o[9]*i,e.z=o[2]*n+o[6]*r+o[10]*i,e},ai.transformFreeVectorInverse=function(e,t){var n=e.x,r=e.y,i=e.z,o=t.elements;return e.x=o[0]*n+o[1]*r+o[2]*i,e.y=o[4]*n+o[5]*r+o[6]*i,e.z=o[8]*n+o[9]*r+o[10]*i,e},ai.transformTiedVectorInverse=function(e,t){var n=e.x,r=e.y,i=e.z,o=t.elements;return e.x=o[0]*n+o[1]*r+o[2]*i-o[12],e.y=o[4]*n+o[5]*r+o[6]*i-o[13],e.z=o[8]*n+o[9]*r+o[10]*i-o[14],e},ai.transformPlaneToLocalSpace=function(){var e=new s;return function(t,n,r){r.normal.copy(t.normal),r.constant=t.constant;var i=ai.transformTiedVectorInverse(t.coplanarPoint(e),n);ai.transformFreeVectorInverse(r.normal,n),r.constant=-i.dot(r.normal)}}(),Object.assign(si.prototype,{getPoint:function(){return console.warn("Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,c=o-1;s<=c;)if((a=r[i=Math.floor(s+(c-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){c=i;break}c=i-1}if(r[i=c]===n)return i/(o-1);var u=r[i];return(i+(n-u)/(r[i+1]-u))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,c=new s,u=[],l=[],h=[],d=new s,f=new a;for(n=0;n<=e;n++)r=n/e,u[n]=this.getTangentAt(r),u[n].normalize();l[0]=new s,h[0]=new s;var p=Number.MAX_VALUE,m=Math.abs(u[0].x),v=Math.abs(u[0].y),g=Math.abs(u[0].z);for(m<=p&&(p=m,c.set(1,0,0)),v<=p&&(p=v,c.set(0,1,0)),g<=p&&c.set(0,0,1),d.crossVectors(u[0],c).normalize(),l[0].crossVectors(u[0],d),h[0].crossVectors(u[0],l[0]),n=1;n<=e;n++)l[n]=l[n-1].clone(),h[n]=h[n-1].clone(),d.crossVectors(u[n-1],u[n]),d.length()>Number.EPSILON&&(d.normalize(),i=Math.acos(o.clamp(u[n-1].dot(u[n]),-1,1)),l[n].applyMatrix4(f.makeRotationAxis(d,i))),h[n].crossVectors(u[n],l[n]);if(!0===t)for(i=Math.acos(o.clamp(l[0].dot(l[e]),-1,1)),i/=e,u[0].dot(d.crossVectors(l[0],l[e]))>0&&(i=-i),n=1;n<=e;n++)l[n].applyMatrix4(f.makeRotationAxis(u[n],i*n)),h[n].crossVectors(u[n],l[n]);return{tangents:u,normals:l,binormals:h}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),ci.prototype=Object.create(si.prototype),ci.prototype.constructor=ci,ci.prototype.getPoint=function(e,t){var n=t||new s;e=2*Math.PI*e;var r=-.22*Math.cos(e)-1.28*Math.sin(e)-.44*Math.cos(3*e)-.78*Math.sin(3*e),i=-.1*Math.cos(2*e)-.27*Math.sin(2*e)+.38*Math.cos(4*e)+.46*Math.sin(4*e),o=.7*Math.cos(3*e)-.4*Math.sin(3*e);return n.set(r,i,o).multiplyScalar(20)},ui.prototype=Object.create(si.prototype),ui.prototype.constructor=ui,ui.prototype.getPoint=function(e,t){var n=t||new s;e*=2*Math.PI;var r=16*Math.pow(Math.sin(e),3),i=13*Math.cos(e)-5*Math.cos(2*e)-2*Math.cos(3*e)-Math.cos(4*e);return n.set(r,i,0).multiplyScalar(this.scale)},li.prototype=Object.create(si.prototype),li.prototype.constructor=li,li.prototype.getPoint=function(e,t){var n=t||new s;e=4*e*Math.PI;var r=this.scale/2,i=r*(1+Math.cos(e)),o=r*Math.sin(e),a=2*r*Math.sin(e/2);return n.set(i,o,a)},hi.prototype=Object.create(si.prototype),hi.prototype.constructor=hi,hi.prototype.getPoint=function(e,t){var n=t||new s;e*=2*Math.PI;var r=50*Math.sin(e),i=Math.cos(e)*(10+50*Math.cos(e)),o=Math.sin(e)*(10+50*Math.cos(e));return n.set(r,i,o)},di.prototype=Object.create(si.prototype),di.prototype.constructor=di,di.prototype.getPoint=function(e,t){var n=t||new s,r=2*Math.PI*e*150/30,i=30*Math.cos(r),o=30*Math.sin(r),a=150*e;return n.set(i,o,a)},fi.prototype=Object.create(si.prototype),fi.prototype.constructor=fi,fi.prototype.getPoint=function(e,t){var n=t||new s;e*=2*Math.PI;var r=(2+Math.cos(3*e))*Math.cos(2*e),i=(2+Math.cos(3*e))*Math.sin(2*e),o=Math.sin(3*e);return n.set(r,i,o).multiplyScalar(this.scale)},pi.prototype=Object.create(si.prototype),pi.prototype.constructor=pi,pi.prototype.getPoint=function(e,t){var n=t||new s;e*=2*Math.PI;var r=(2+Math.cos(4*e))*Math.cos(3*e),i=(2+Math.cos(4*e))*Math.sin(3*e),o=Math.sin(4*e);return n.set(r,i,o).multiplyScalar(this.scale)},mi.prototype=Object.create(si.prototype),mi.prototype.constructor=mi,mi.prototype.getPoint=function(e,t){var n=t||new s;e*=2*Math.PI;var r=(2+Math.cos(5*e))*Math.cos(2*e),i=(2+Math.cos(5*e))*Math.sin(2*e),o=Math.sin(5*e);return n.set(r,i,o).multiplyScalar(this.scale)},vi.prototype=Object.create(si.prototype),vi.prototype.constructor=vi,vi.prototype.getPoint=function(e,t){var n=t||new s;e=4*e-2;var r=Math.pow(e,3)-3*e,i=Math.pow(e,4)-4*e*e,o=.2*Math.pow(e,5)-2*e;return n.set(r,i,o).multiplyScalar(this.scale)};function gi(e){si.call(this),this.scale=void 0===e?1:e}function yi(e){si.call(this),this.scale=void 0===e?40:e}function bi(e){si.call(this),this.scale=void 0===e?40:e}function xi(e){si.call(this),this.scale=void 0===e?40:e}function wi(e){si.call(this),this.scale=void 0===e?40:e}gi.prototype=Object.create(si.prototype),gi.prototype.constructor=gi,gi.prototype.getPoint=function(e,t){var n=t||new s,r=.4*(e=function(e,t,n){return n*(t-e)+e}(-4,4,e))*(e*e-7)*(e*e-10),i=Math.pow(e,4)-13*e*e,o=.1*e*(e*e-4)*(e*e-9)*(e*e-12);return n.set(r,i,o).multiplyScalar(this.scale)},yi.prototype=Object.create(si.prototype),yi.prototype.constructor=yi,yi.prototype.getPoint=function(e,t){var n=t||new s;e*=2*Math.PI;var r=Math.cos(2*e)*(1+.6*(Math.cos(5*e)+.75*Math.cos(10*e))),i=Math.sin(2*e)*(1+.6*(Math.cos(5*e)+.75*Math.cos(10*e))),o=.35*Math.sin(5*e);return n.set(r,i,o).multiplyScalar(this.scale)},bi.prototype=Object.create(si.prototype),bi.prototype.constructor=bi,bi.prototype.getPoint=function(e,t){var n=t||new s,r=e*Math.PI*2,i=Math.cos(2*r)*(1+.45*Math.cos(3*r)+.4*Math.cos(9*r)),o=Math.sin(2*r)*(1+.45*Math.cos(3*r)+.4*Math.cos(9*r)),a=.2*Math.sin(9*r);return n.set(i,o,a).multiplyScalar(this.scale)},xi.prototype=Object.create(si.prototype),xi.prototype.constructor=xi,xi.prototype.getPoint=function(e,t){var n=t||new s,r=e*Math.PI*2,i=Math.cos(3*r)*(1+.3*Math.cos(5*r)+.5*Math.cos(10*r)),o=Math.sin(3*r)*(1+.3*Math.cos(5*r)+.5*Math.cos(10*r)),a=.2*Math.sin(20*r);return n.set(i,o,a).multiplyScalar(this.scale)},wi.prototype=Object.create(si.prototype),wi.prototype.constructor=wi,wi.prototype.getPoint=function(e,t){var n=t||new s,r=e*Math.PI*2,i=Math.cos(4*r)*(1+.5*(Math.cos(5*r)+.4*Math.cos(20*r))),o=Math.sin(4*r)*(1+.5*(Math.cos(5*r)+.4*Math.cos(20*r))),a=.35*Math.sin(15*r);return n.set(i,o,a).multiplyScalar(this.scale)};var _i={findSpan:function(e,t,n){var r=n.length-e-1;if(t>=n[r])return r-1;if(t<=n[e])return e;for(var i=e,o=r,a=Math.floor((i+o)/2);t<n[a]||t>=n[a+1];)t<n[a]?o=a:i=a,a=Math.floor((i+o)/2);return a},calcBasisFunctions:function(e,t,n,r){var i=[],o=[],a=[];i[0]=1;for(var s=1;s<=n;++s){o[s]=t-r[e+1-s],a[s]=r[e+s]-t;for(var c=0,u=0;u<s;++u){var l=a[u+1],h=o[s-u],d=i[u]/(l+h);i[u]=c+l*d,c=h*d}i[s]=c}return i},calcBSplinePoint:function(e,t,n,r){for(var i=this.findSpan(e,r,t),o=this.calcBasisFunctions(i,r,e,t),a=new S(0,0,0,0),s=0;s<=e;++s){var c=n[i-e+s],u=o[s],l=c.w*u;a.x+=c.x*l,a.y+=c.y*l,a.z+=c.z*l,a.w+=c.w*u}return a},calcBasisFunctionDerivatives:function(e,t,n,r,i){for(var o=[],a=0;a<=n;++a)o[a]=0;var s=[];for(a=0;a<=r;++a)s[a]=o.slice(0);var c=[];for(a=0;a<=n;++a)c[a]=o.slice(0);c[0][0]=1;for(var u=o.slice(0),l=o.slice(0),h=1;h<=n;++h){u[h]=t-i[e+1-h],l[h]=i[e+h]-t;for(var d=0,f=0;f<h;++f){var p=l[f+1],m=u[h-f];c[h][f]=p+m;var v=c[f][h-1]/c[h][f];c[f][h]=d+p*v,d=m*v}c[h][h]=d}for(h=0;h<=n;++h)s[0][h]=c[h][n];for(f=0;f<=n;++f){var g=0,y=1,b=[];for(a=0;a<=n;++a)b[a]=o.slice(0);b[0][0]=1;for(var x=1;x<=r;++x){var w=0,_=f-x,S=n-x;f>=x&&(b[y][0]=b[g][0]/c[S+1][_],w=b[y][0]*c[_][S]);var M=f-1<=S?x-1:n-f;for(h=_>=-1?1:-_;h<=M;++h)b[y][h]=(b[g][h]-b[g][h-1])/c[S+1][_+h],w+=b[y][h]*c[_+h][S];f<=S&&(b[y][x]=-b[g][x-1]/c[S+1][f],w+=b[y][x]*c[f][S]),s[x][f]=w;h=g;g=y,y=h}}for(f=n,x=1;x<=r;++x){for(h=0;h<=n;++h)s[x][h]*=f;f*=n-x}return s},calcBSplineDerivatives:function(e,t,n,r,i){for(var o=i<e?i:e,a=[],s=this.findSpan(e,r,t),c=this.calcBasisFunctionDerivatives(s,r,e,o,t),u=[],l=0;l<n.length;++l){var h=(f=n[l].clone()).w;f.x*=h,f.y*=h,f.z*=h,u[l]=f}for(var d=0;d<=o;++d){for(var f=u[s-e].clone().multiplyScalar(c[d][0]),p=1;p<=e;++p)f.add(u[s-e+p].clone().multiplyScalar(c[d][p]));a[d]=f}for(d=o+1;d<=i+1;++d)a[d]=new S(0,0,0);return a},calcKoverI:function(e,t){for(var n=1,r=2;r<=e;++r)n*=r;var i=1;for(r=2;r<=t;++r)i*=r;for(r=2;r<=e-t;++r)i*=r;return n/i},calcRationalCurveDerivatives:function(e){for(var t=e.length,n=[],r=[],i=0;i<t;++i){var o=e[i];n[i]=new s(o.x,o.y,o.z),r[i]=o.w}for(var a=[],c=0;c<t;++c){var u=n[c].clone();for(i=1;i<=c;++i)u.sub(a[c-i].clone().multiplyScalar(this.calcKoverI(c,i)*r[i]));a[c]=u.divideScalar(r[0])}return a},calcNURBSDerivatives:function(e,t,n,r,i){var o=this.calcBSplineDerivatives(e,t,n,r,i);return this.calcRationalCurveDerivatives(o)},calcSurfacePoint:function(e,t,n,r,i,o,a,s){for(var c=this.findSpan(e,o,n),u=this.findSpan(t,a,r),l=this.calcBasisFunctions(c,o,e,n),h=this.calcBasisFunctions(u,a,t,r),d=[],f=0;f<=t;++f){d[f]=new S(0,0,0,0);for(var p=0;p<=e;++p){var m=i[c-e+p][u-t+f].clone(),v=m.w;m.x*=v,m.y*=v,m.z*=v,d[f].add(m.multiplyScalar(l[p]))}}var g=new S(0,0,0,0);for(f=0;f<=t;++f)g.add(d[f].multiplyScalar(h[f]));g.divideScalar(g.w),s.set(g.x,g.y,g.z)}},Si=function(e,t,n,r,i){si.call(this),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=i||this.knots.length-1;for(var o=0;o<n.length;++o){var a=n[o];this.controlPoints[o]=new S(a.x,a.y,a.z,a.w)}};(Si.prototype=Object.create(si.prototype)).constructor=Si,Si.prototype.getPoint=function(e){var t=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),n=_i.calcBSplinePoint(this.degree,this.knots,this.controlPoints,t);return 1!=n.w&&n.divideScalar(n.w),new s(n.x,n.y,n.z)},Si.prototype.getTangent=function(e){var t=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),n=_i.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,t,1)[1].clone();return n.normalize(),n};var Mi=function(e,t,n,r,i){this.degree1=e,this.degree2=t,this.knots1=n,this.knots2=r,this.controlPoints=[];for(var o=n.length-e-1,a=r.length-t-1,s=0;s<o;++s){this.controlPoints[s]=[];for(var c=0;c<a;++c){var u=i[s][c];this.controlPoints[s][c]=new S(u.x,u.y,u.z,u.w)}}};Mi.prototype={constructor:Mi,getPoint:function(e,t,n){var r=this.knots1[0]+e*(this.knots1[this.knots1.length-1]-this.knots1[0]),i=this.knots2[0]+t*(this.knots2[this.knots2.length-1]-this.knots2[0]);_i.calcSurfacePoint(this.degree1,this.degree2,this.knots1,this.knots2,this.controlPoints,r,i,n)}};var Ti={canvas:!!i.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!i.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}(),webgl2:function(){try{var e=document.createElement("canvas");return!(!i.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(e){return!1}}(),workers:!!i.Worker,fileapi:i.File&&i.FileReader&&i.FileList&&i.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=i.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(e){var t,n,r;t=void 0!==(e=e||{}).parent?e.parent:document.body,n=void 0!==e.id?e.id:"oldie",(r=Ti.getWebGLErrorMessage()).id=n,t.appendChild(r)}};function Ai(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Hn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Hn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}Object.assign(Ai.prototype,{update:function(){var e,t,n,r,i,s,c,u,l=new a,h=new a;return function(a){if(e!==this||t!==a.focus||n!==a.fov||r!==a.aspect*this.aspect||i!==a.near||s!==a.far||c!==a.zoom||u!==this.eyeSep){e=this,t=a.focus,n=a.fov,r=a.aspect*this.aspect,i=a.near,s=a.far,c=a.zoom;var d,f,p=a.projectionMatrix.clone(),m=(u=this.eyeSep/2)*i/t,v=i*Math.tan(o.DEG2RAD*n*.5)/c;h.elements[12]=-u,l.elements[12]=u,d=-v*r+m,f=v*r+m,p.elements[0]=2*i/(f-d),p.elements[8]=(f+d)/(f-d),this.cameraL.projectionMatrix.copy(p),d=-v*r-m,f=v*r-m,p.elements[0]=2*i/(f-d),p.elements[8]=(f+d)/(f-d),this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(a.matrixWorld).multiply(h),this.cameraR.matrixWorld.copy(a.matrixWorld).multiply(l)}}()});var Ei={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit(  ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit(  );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance(  const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance(  const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif\n",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance(  geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance(  geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance(  geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif\n",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\t\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\t\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n"},Ci={common:{diffuse:{value:new v(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new d},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new x(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new v(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new v(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new d}},sprite:{diffuse:{value:new v(15658734)},opacity:{value:1},center:{value:new x(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new d}}},Pi={basic:{uniforms:Xn.merge([Ci.common,Ci.specularmap,Ci.envmap,Ci.aomap,Ci.lightmap,Ci.fog]),vertexShader:Ei.meshbasic_vert,fragmentShader:Ei.meshbasic_frag},lambert:{uniforms:Xn.merge([Ci.common,Ci.specularmap,Ci.envmap,Ci.aomap,Ci.lightmap,Ci.emissivemap,Ci.fog,Ci.lights,{emissive:{value:new v(0)}}]),vertexShader:Ei.meshlambert_vert,fragmentShader:Ei.meshlambert_frag},phong:{uniforms:Xn.merge([Ci.common,Ci.specularmap,Ci.envmap,Ci.aomap,Ci.lightmap,Ci.emissivemap,Ci.bumpmap,Ci.normalmap,Ci.displacementmap,Ci.gradientmap,Ci.fog,Ci.lights,{emissive:{value:new v(0)},specular:{value:new v(1118481)},shininess:{value:30}}]),vertexShader:Ei.meshphong_vert,fragmentShader:Ei.meshphong_frag},standard:{uniforms:Xn.merge([Ci.common,Ci.envmap,Ci.aomap,Ci.lightmap,Ci.emissivemap,Ci.bumpmap,Ci.normalmap,Ci.displacementmap,Ci.roughnessmap,Ci.metalnessmap,Ci.fog,Ci.lights,{emissive:{value:new v(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Ei.meshphysical_vert,fragmentShader:Ei.meshphysical_frag},points:{uniforms:Xn.merge([Ci.points,Ci.fog]),vertexShader:Ei.points_vert,fragmentShader:Ei.points_frag},dashed:{uniforms:Xn.merge([Ci.common,Ci.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ei.linedashed_vert,fragmentShader:Ei.linedashed_frag},depth:{uniforms:Xn.merge([Ci.common,Ci.displacementmap]),vertexShader:Ei.depth_vert,fragmentShader:Ei.depth_frag},normal:{uniforms:Xn.merge([Ci.common,Ci.bumpmap,Ci.normalmap,Ci.displacementmap,{opacity:{value:1}}]),vertexShader:Ei.normal_vert,fragmentShader:Ei.normal_frag},sprite:{uniforms:Xn.merge([Ci.sprite,Ci.fog]),vertexShader:Ei.sprite_vert,fragmentShader:Ei.sprite_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ei.cube_vert,fragmentShader:Ei.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ei.equirect_vert,fragmentShader:Ei.equirect_frag},distanceRGBA:{uniforms:Xn.merge([Ci.common,Ci.displacementmap,{referencePosition:{value:new s},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ei.distanceRGBA_vert,fragmentShader:Ei.distanceRGBA_frag},shadow:{uniforms:Xn.merge([Ci.lights,Ci.fog,{color:{value:new v(0)},opacity:{value:1}}]),vertexShader:Ei.shadow_vert,fragmentShader:Ei.shadow_frag}};Pi.physical={uniforms:Xn.merge([Pi.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Ei.meshphysical_vert,fragmentShader:Ei.meshphysical_frag};var Li=function(){};Li.prototype={constructor:Li,parse:function(e,t,n){void 0===n&&(n={}),""!==(n=Object.assign({version:"1.4.1",author:null,textureDirectory:""},n)).textureDirectory&&(n.textureDirectory=(n.textureDirectory+"/").replace(/\\/g,"/").replace(/\/+/g,"/"));var r,i,o=n.version;if("1.4.1"!==o&&"1.5.0"!==o)return console.warn("ColladaExporter : Version "+o+" not supported for export. Only 1.4.1 and 1.5.0."),null;function s(e,t){return r=r||document.createElement("canvas"),i=i||r.getContext("2d"),r.width=e.naturalWidth,r.height=e.naturalHeight,i.drawImage(e,0,0),function(e){for(var t=atob(e),n=new Uint8Array(t.length),r=0,i=n.length;r<i;r++)n[r]=t.charCodeAt(r);return n}(r.toDataURL("image/"+t,1).replace(/^data:image\/(png|jpg);base64,/,""))}var c,u=["getX","getY","getZ","getW"];function l(e){if(e.isInterleavedBufferAttribute){for(var t=new e.array.constructor(e.count*e.itemSize),n=e.itemSize,r=0,i=e.count;r<i;r++)for(var o=0;o<n;o++)t[r*n+o]=e[u[o]](r);return t}return e.array}function h(e,t,n){return Array.isArray(e)?e.slice(t,t+n):new e.constructor(e.buffer,t*e.BYTES_PER_ELEMENT,n)}function d(e,t,n,r){var i=l(e);return'<source id="'+t+'"><float_array id="'+t+'-array" count="'+i.length+'">'+i.join(" ")+'</float_array><technique_common><accessor source="#'+t+'-array" count="'+Math.floor(i.length/e.itemSize)+'" stride="'+e.itemSize+'">'+n.map(function(e){return'<param name="'+e+'" type="'+r+'" />'}).join("")+"</accessor></technique_common></source>"}function f(e){var t=g.get(e);if(null==t){t="image-"+(b.length+1);var r=e.name||t,i='<image id="'+t+'" name="'+r+'">';i+="1.5.0"===o?"<init_from><ref>"+n.textureDirectory+r+".png</ref></init_from>":"<init_from>"+n.textureDirectory+r+".png</init_from>",i+="</image>",b.push(i),g.set(e,t),y.push({directory:n.textureDirectory,name:r,ext:"png",data:s(e.image,"png"),original:e})}return t}var p=new WeakMap,m=new WeakMap,g=new WeakMap,y=[],b=[],x=[],w=[],S=[],M=function e(t){var n='<node name="'+t.name+'">';if(n+=function(e){return e.updateMatrix(),(c=c||new a).copy(e.matrix),c.transpose(),"<matrix>"+c.toArray().join(" ")+"</matrix>"}(t),t instanceof fn&&null!=t.geometry){var r=function(e){var t=p.get(e);if(!t){var n=e;n instanceof _&&(n=(new k).fromGeometry(n));var r="Mesh"+(x.length+1),i=n.index?n.index.count*n.index.itemSize:n.attributes.position.count,o=null!=n.groups&&0!==n.groups.length?n.groups:[{start:0,count:i,materialIndex:0}],a='<geometry id="'+r+'" name="'+e.name+'"><mesh>',s=r+"-position",c=r+"-vertices";a+=d(n.attributes.position,s,["X","Y","Z"],"float"),a+='<vertices id="'+c+'"><input semantic="POSITION" source="#'+s+'" /></vertices>';var u='<input semantic="VERTEX" source="#'+c+'" offset="0" />';if("normal"in n.attributes){var f=r+"-normal";a+=d(n.attributes.normal,f,["X","Y","Z"],"float"),u+='<input semantic="NORMAL" source="#'+f+'" offset="0" />'}if("uv"in n.attributes){var m=r+"-texcoord";a+=d(n.attributes.uv,m,["S","T"],"float"),u+='<input semantic="TEXCOORD" source="#'+m+'" offset="0" set="0" />'}if("color"in n.attributes){var v=r+"-color";a+=d(n.attributes.color,v,["X","Y","Z"],"uint8"),u+='<input semantic="COLOR" source="#'+v+'" offset="0" />'}var g=null;if(n.index)g=l(n.index);else for(var y=0,b=(g=new Array(i)).length;y<b;y++)g[y]=y;for(y=0,b=o.length;y<b;y++){var w=o[y],S=h(g,w.start,w.count),M=S.length/3;a+='<triangles material="MESH_MATERIAL_'+w.materialIndex+'" count="'+M+'">',a+=u,a+="<p>"+S.join(" ")+"</p>",a+="</triangles>"}a+="</mesh></geometry>",x.push(a),t={meshid:r,bufferGeometry:n},p.set(e,t)}return t}(t.geometry),i=r.meshid,o=r.bufferGeometry,s=null,u=t.material||new un,g=Array.isArray(u)?u:[u];s=new Array(o.groups.length).fill().map(function(e,t){return function(e){var t=m.get(e);if(null==t){t="Mat"+(w.length+1);var n="phong";e instanceof pr?n="lambert":e instanceof un&&(n="constant");var r=e.emissive?e.emissive:new v(0,0,0),i=e.color?e.color:new v(0,0,0),o=e.specular?e.specular:new v(1,1,1),a=e.shininess||0,s=e.reflectivity||0,c="";!0===e.transparent&&(c+="<transparent>"+(e.map?'<texture texture="diffuse-sampler"></texture>':"<float>1</float>")+"</transparent>",e.opacity<1&&(c+="<transparency><float>"+e.opacity+"</float></transparency>"));var u='<technique sid="common"><'+n+"><emission>"+(e.emissiveMap?'<texture texture="emissive-sampler" texcoord="TEXCOORD" />':'<color sid="emission">'+r.r+" "+r.g+" "+r.b+" 1</color>")+"</emission><diffuse>"+(e.map?'<texture texture="diffuse-sampler" texcoord="TEXCOORD" />':'<color sid="diffuse">'+i.r+" "+i.g+" "+i.b+" 1</color>")+'</diffuse><specular><color sid="specular">'+o.r+" "+o.g+" "+o.b+" 1</color></specular><shininess>"+(e.specularMap?'<texture texture="specular-sampler" texcoord="TEXCOORD" />':'<float sid="shininess">'+a+"</float>")+"</shininess><reflective><color>"+i.r+" "+i.g+" "+i.b+" 1</color></reflective><reflectivity><float>"+s+"</float></reflectivity>"+c+"</"+n+"></technique>",l='<effect id="'+t+'-effect"><profile_COMMON>'+(e.map?'<newparam sid="diffuse-surface"><surface type="2D"><init_from>'+f(e.map)+'</init_from></surface></newparam><newparam sid="diffuse-sampler"><sampler2D><source>diffuse-surface</source></sampler2D></newparam>':"")+(e.specularMap?'<newparam sid="specular-surface"><surface type="2D"><init_from>'+f(e.specularMap)+'</init_from></surface></newparam><newparam sid="specular-sampler"><sampler2D><source>specular-surface</source></sampler2D></newparam>':"")+(e.emissiveMap?'<newparam sid="emissive-surface"><surface type="2D"><init_from>'+f(e.emissiveMap)+'</init_from></surface></newparam><newparam sid="emissive-sampler"><sampler2D><source>emissive-surface</source></sampler2D></newparam>':"")+u+(e.side===J?'<extra><technique><double_sided sid="double_sided" type="int">1</double_sided></technique></extra>':"")+"</profile_COMMON></effect>";S.push('<material id="'+t+'" name="'+e.name+'"><instance_effect url="#'+t+'-effect" /></material>'),w.push(l),m.set(e,t)}return t}(g[t%g.length])}),n+='<instance_geometry url="#'+i+'">'+(null!=s?"<bind_material><technique_common>"+s.map(function(e,t){return'<instance_material symbol="MESH_MATERIAL_'+t+'" target="#'+e+'" ><bind_vertex_input semantic="TEXCOORD" input_semantic="TEXCOORD" input_set="0" /></instance_material>'}).join("")+"</technique_common></bind_material>":"")+"</instance_geometry>"}return t.children.forEach(function(t){return n+=e(t)}),n+="</node>"}(e),T='<?xml version="1.0" encoding="UTF-8" standalone="no" ?><COLLADA xmlns="'+("1.4.1"===o?"http://www.collada.org/2005/11/COLLADASchema":"https://www.khronos.org/collada/")+'" version="'+o+'"><asset><contributor><authoring_tool>js Collada Exporter</authoring_tool>'+(null!==n.author?"<author>"+n.author+"</author>":"")+"</contributor><created>"+(new Date).toISOString()+"</created><modified>"+(new Date).toISOString()+"</modified><up_axis>Y_UP</up_axis></asset>";T+="<library_images>"+b.join("")+"</library_images>",T+="<library_effects>"+w.join("")+"</library_effects>",T+="<library_materials>"+S.join("")+"</library_materials>",T+="<library_geometries>"+x.join("")+"</library_geometries>",T+='<library_visual_scenes><visual_scene id="Scene" name="scene">'+M+"</visual_scene></library_visual_scenes>",T+='<scene><instance_visual_scene url="#Scene"/></scene>';var A={data:function(e){var t=/^<\//,n=/(\?>$)|(\/>$)/,r=/<[^>]+>[^<]*<\/[^<]+>/,i=function(e,t){return t>0?e+i(e,t-1):""},o=0;return e.match(/(<[^>]+>[^<]+<\/[^<]+>)|(<[^>]+>)/g).map(function(e){r.test(e)||n.test(e)||!t.test(e)||o--;var a=""+i("  ",o)+e;return r.test(e)||n.test(e)||t.test(e)||o++,a}).join("\n")}(T+="</COLLADA>"),textures:y};return"function"==typeof t&&requestAnimationFrame(function(){return t(A)}),A}};var Oi={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987},Ni={1003:Oi.NEAREST,1004:Oi.NEAREST_MIPMAP_NEAREST,1005:Oi.NEAREST_MIPMAP_LINEAR,1006:Oi.LINEAR,1007:Oi.LINEAR_MIPMAP_NEAREST,1008:Oi.LINEAR_MIPMAP_LINEAR},Ri={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},Ii=function(){};Ii.prototype={constructor:Ii,parse:function(e,t,n){(n=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,animations:[],forceIndices:!1,forcePowerOfTwoTextures:!1},n)).animations.length>0&&(n.trs=!0);var r,a={asset:{version:"2.0",generator:"GLTFExporter"}},c=0,u=[],l=[],h=new Map,d=[],f={},p={attributes:new Map,materials:new Map,textures:new Map,images:new Map};function m(e,t){return e.length===t.length&&e.every(function(e,n){return e===t[n]})}function v(e){return 4*Math.ceil(e/4)}function g(e,t){t=t||0;var n=v(e.byteLength);if(n!==e.byteLength){var r=new Uint8Array(n);if(r.set(new Uint8Array(e)),0!==t)for(var i=e.byteLength;i<n;i++)r[i]=t;return r.buffer}return e}function y(e){try{return JSON.parse(JSON.stringify(e.userData))}catch(t){return console.warn("GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+t.message),{}}}function b(e){return a.buffers||(a.buffers=[{byteLength:0}]),u.push(e),0}function x(e,t,r,i){var o;if(e.array.constructor===Float32Array)o=Oi.FLOAT;else if(e.array.constructor===Uint32Array)o=Oi.UNSIGNED_INT;else if(e.array.constructor===Uint16Array)o=Oi.UNSIGNED_SHORT;else{if(e.array.constructor!==Uint8Array)throw new Error("GLTFExporter: Unsupported bufferAttribute component type.");o=Oi.UNSIGNED_BYTE}if(void 0===r&&(r=0),void 0===i&&(i=e.count),n.truncateDrawRange&&void 0!==t&&null===t.index){var s=r+i,u=t.drawRange.count===1/0?e.count:t.drawRange.start+t.drawRange.count;r=Math.max(r,t.drawRange.start),(i=Math.min(s,u)-r)<0&&(i=0)}if(0===i)return null;var l,h=function(e,t,n){for(var r={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)},i=t;i<t+n;i++)for(var o=0;o<e.itemSize;o++){var a=e.array[i*e.itemSize+o];r.min[o]=Math.min(r.min[o],a),r.max[o]=Math.max(r.max[o],a)}return r}(e,r,i);void 0!==t&&(l=e===t.index?Oi.ELEMENT_ARRAY_BUFFER:Oi.ARRAY_BUFFER);var d=function(e,t,n,r,i){var o;a.bufferViews||(a.bufferViews=[]),o=t===Oi.UNSIGNED_BYTE?1:t===Oi.UNSIGNED_SHORT?2:4;for(var s=v(r*e.itemSize*o),u=new DataView(new ArrayBuffer(s)),l=0,h=n;h<n+r;h++)for(var d=0;d<e.itemSize;d++){var f=e.array[h*e.itemSize+d];t===Oi.FLOAT?u.setFloat32(l,f,!0):t===Oi.UNSIGNED_INT?u.setUint32(l,f,!0):t===Oi.UNSIGNED_SHORT?u.setUint16(l,f,!0):t===Oi.UNSIGNED_BYTE&&u.setUint8(l,f),l+=o}var p={buffer:b(u.buffer),byteOffset:c,byteLength:s};return void 0!==i&&(p.target=i),i===Oi.ARRAY_BUFFER&&(p.byteStride=e.itemSize*o),c+=s,a.bufferViews.push(p),{id:a.bufferViews.length-1,byteLength:0}}(e,o,r,i,l),f={bufferView:d.id,byteOffset:d.byteOffset,componentType:o,count:i,max:h.max,min:h.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"}[e.itemSize]};return a.accessors||(a.accessors=[]),a.accessors.push(f),a.accessors.length-1}function w(e,t,s){p.images.has(e)||p.images.set(e,{});var u=p.images.get(e),h=t===pt?"image/png":"image/jpeg",d=h+":flipY/"+s.toString();if(void 0!==u[d])return u[d];a.images||(a.images=[]);var f={mimeType:h};if(n.embedImages){var m=r=r||document.createElement("canvas");m.width=e.width,m.height=e.height,n.forcePowerOfTwoTextures&&!function(e){return o.isPowerOfTwo(e.width)&&o.isPowerOfTwo(e.height)}(e)&&(console.warn("GLTFExporter: Resized non-power-of-two image.",e),m.width=o.floorPowerOfTwo(m.width),m.height=o.floorPowerOfTwo(m.height));var v=m.getContext("2d");!0===s&&(v.translate(0,m.height),v.scale(1,-1)),v.drawImage(e,0,0,m.width,m.height),!0===n.binary?l.push(new Promise(function(e){m.toBlob(function(t){(function(e){return a.bufferViews||(a.bufferViews=[]),new Promise(function(t){var n=new i.FileReader;n.readAsArrayBuffer(e),n.onloadend=function(){var e=g(n.result),r={buffer:b(e),byteOffset:c,byteLength:e.byteLength};c+=e.byteLength,a.bufferViews.push(r),t(a.bufferViews.length-1)}})})(t).then(function(t){f.bufferView=t,e()})},h)})):f.uri=m.toDataURL(h)}else f.uri=e.src;a.images.push(f);var y=a.images.length-1;return u[d]=y,y}function _(e){if(p.textures.has(e))return p.textures.get(e);a.textures||(a.textures=[]);var t={sampler:function(e){a.samplers||(a.samplers=[]);var t={magFilter:Ni[e.magFilter],minFilter:Ni[e.minFilter],wrapS:Ni[e.wrapS],wrapT:Ni[e.wrapT]};return a.samplers.push(t),a.samplers.length-1}(e),source:w(e.image,e.format,e.flipY)};a.textures.push(t);var n=a.textures.length-1;return p.textures.set(e,n),n}function S(e){if(p.materials.has(e))return p.materials.get(e);if(a.materials||(a.materials=[]),e.isShaderMaterial)return console.warn("GLTFExporter: ShaderMaterial not supported."),null;var t={pbrMetallicRoughness:{}};e.isMeshBasicMaterial?(t.extensions={KHR_materials_unlit:{}},f.KHR_materials_unlit=!0):e.isMeshStandardMaterial||console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");var n=e.color.toArray().concat([e.opacity]);if(m(n,[1,1,1,1])||(t.pbrMetallicRoughness.baseColorFactor=n),e.isMeshStandardMaterial?(t.pbrMetallicRoughness.metallicFactor=e.metalness,t.pbrMetallicRoughness.roughnessFactor=e.roughness):e.isMeshBasicMaterial?(t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9):(t.pbrMetallicRoughness.metallicFactor=.5,t.pbrMetallicRoughness.roughnessFactor=.5),(e.metalnessMap||e.roughnessMap)&&(e.metalnessMap===e.roughnessMap?t.pbrMetallicRoughness.metallicRoughnessTexture={index:_(e.metalnessMap)}:console.warn("GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.")),e.map&&(t.pbrMetallicRoughness.baseColorTexture={index:_(e.map)}),e.isMeshBasicMaterial||e.isLineBasicMaterial||e.isPointsMaterial);else{var r=e.emissive.clone().multiplyScalar(e.emissiveIntensity).toArray();m(r,[0,0,0])||(t.emissiveFactor=r),e.emissiveMap&&(t.emissiveTexture={index:_(e.emissiveMap)})}e.normalMap&&(t.normalTexture={index:_(e.normalMap)},-1!==e.normalScale.x&&(e.normalScale.x!==e.normalScale.y&&console.warn("GLTFExporter: Normal scale components are different, ignoring Y and exporting X."),t.normalTexture.scale=e.normalScale.x)),e.aoMap&&(t.occlusionTexture={index:_(e.aoMap)},1!==e.aoMapIntensity&&(t.occlusionTexture.strength=e.aoMapIntensity)),(e.transparent||e.alphaTest>0)&&(t.alphaMode=e.opacity<1?"BLEND":"MASK",e.alphaTest>0&&.5!==e.alphaTest&&(t.alphaCutoff=e.alphaTest)),e.side===J&&(t.doubleSided=!0),""!==e.name&&(t.name=e.name),Object.keys(e.userData).length>0&&(t.extras=y(e)),a.materials.push(t);var i=a.materials.length-1;return p.materials.set(e,i),i}function T(e){var t,r=e.geometry;if(e.isLineSegments)t=Oi.LINES;else if(e.isLineLoop)t=Oi.LINE_LOOP;else if(e.isLine)t=Oi.LINE_STRIP;else if(e.isPoints)t=Oi.POINTS;else{if(!r.isBufferGeometry){var i=new k;i.fromGeometry(r),r=i}e.drawMode===Yt?(console.warn("GLTFExporter: TriangleFanDrawMode and wireframe incompatible."),t=Oi.TRIANGLE_FAN):t=e.drawMode===qt?e.material.wireframe?Oi.LINE_STRIP:Oi.TRIANGLE_STRIP:e.material.wireframe?Oi.LINES:Oi.TRIANGLES}var o={},c={},u=[],l=[],h={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},d=r.getAttribute("normal");for(var f in void 0===d||function(e){if(p.attributes.has(e))return!1;for(var t=new s,n=0,r=e.count;n<r;n++)if(Math.abs(t.fromArray(e.array,3*n).length()-1)>5e-4)return!1;return!0}(d)||(console.warn("GLTFExporter: Creating normalized normal attribute from the non-normalized one."),r.addAttribute("normal",function(e){if(p.attributes.has(e))return p.attributes.get(e);for(var t=e.clone(),n=new s,r=0,i=t.count;r<i;r++)n.fromArray(t.array,3*r),0===n.x&&0===n.y&&0===n.z?n.setX(1):n.normalize(),n.toArray(t.array,3*r);return p.attributes.set(e,t),t}(d))),r.attributes){var m=r.attributes[f];f=h[f]||f.toUpperCase();var v=m.array;if("JOINTS_0"!==f||v instanceof Uint16Array||v instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),m=new M(new Uint16Array(v),m.itemSize,m.normalized)),"MORPH"!==f.substr(0,5)){var g=x(m,r);null!==g&&(c[f]=g)}}if(void 0!==d&&r.addAttribute("normal",d),0===Object.keys(c).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){var b=[],w=[],_={};if(void 0!==e.morphTargetDictionary)for(var T in e.morphTargetDictionary)_[e.morphTargetDictionary[T]]=T;for(var A=0;A<e.morphTargetInfluences.length;++A){var E={},C=!1;for(var f in r.morphAttributes)if("position"===f||"normal"===f){m=r.morphAttributes[f][A];for(var P=r.attributes[f],L=m.clone(),O=0,N=m.count;O<N;O++)L.setXYZ(O,m.getX(O)-P.getX(O),m.getY(O)-P.getY(O),m.getZ(O)-P.getZ(O));E[f.toUpperCase()]=x(L,r)}else C||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),C=!0);l.push(E),b.push(e.morphTargetInfluences[A]),void 0!==e.morphTargetDictionary&&w.push(_[A])}o.weights=b,w.length>0&&(o.extras={},o.extras.targetNames=w)}var R=Object.keys(r.userData).length>0?y(r):void 0,I=n.forceIndices,D=Array.isArray(e.material);if(D&&0===r.groups.length)return null;!I&&null===r.index&&D&&(console.warn("GLTFExporter: Creating index for non-indexed multi-material mesh."),I=!0);var F=!1;if(null===r.index&&I){for(var U=[],B=(A=0,r.attributes.position.count);A<B;A++)U[A]=A;r.setIndex(U),F=!0}var z=D?e.material:[e.material],j=D?r.groups:[{materialIndex:0,start:void 0,count:void 0}];for(A=0,B=j.length;A<B;A++){var V={mode:t,attributes:c};R&&(V.extras=R),l.length>0&&(V.targets=l),null!==r.index&&(V.indices=x(r.index,r,j[A].start,j[A].count));var G=S(z[j[A].materialIndex]);null!==G&&(V.material=G),u.push(V)}return F&&r.setIndex(null),o.primitives=u,a.meshes||(a.meshes=[]),a.meshes.push(o),a.meshes.length-1}function A(e,t){a.animations||(a.animations=[]);for(var n=[],r=[],i=0;i<e.tracks.length;++i){var o=e.tracks[i],s=xn.parseTrackName(o.name),c=xn.findNode(t,s.nodeName),u=Ri[s.propertyName];if("bones"===s.objectName&&(c=!0===c.isSkinnedMesh?c.skeleton.getBoneByName(s.objectIndex):void 0),!c||!u)return console.warn('GLTFExporter: Could not export animation track "%s".',o.name),null;var l,d=o.values.length/o.times.length;if(u===Ri.morphTargetInfluences){if(1!==c.morphTargetInfluences.length&&void 0!==s.propertyIndex){console.warn('GLTFExporter: Skipping animation track "%s". Morph target keyframe tracks must target all available morph targets for the given mesh.',o.name);continue}d/=c.morphTargetInfluences.length}!0===o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(l="CUBICSPLINE",d/=3):l=o.getInterpolation()===Wt?"STEP":"LINEAR",r.push({input:x(new M(o.times,1)),output:x(new M(o.values,d)),interpolation:l}),n.push({sampler:r.length-1,target:{node:h.get(c),path:u}})}return a.animations.push({name:e.name||"clip_"+a.animations.length,samplers:r,channels:n}),a.animations.length-1}function E(e){var t=a.nodes[h.get(e)],n=e.skeleton,r=e.skeleton.bones[0];if(void 0===r)return null;for(var i=[],o=new Float32Array(16*n.bones.length),s=0;s<n.bones.length;++s)i.push(h.get(n.bones[s])),n.boneInverses[s].toArray(o,16*s);return void 0===a.skins&&(a.skins=[]),a.skins.push({inverseBindMatrices:x(new M(o,16)),joints:i,skeleton:h.get(r)}),t.skin=a.skins.length-1}function C(e){if(e.isLight)return console.warn("GLTFExporter: Unsupported node type:",e.constructor.name),null;a.nodes||(a.nodes=[]);var t={};if(n.trs){var r=e.quaternion.toArray(),i=e.position.toArray(),s=e.scale.toArray();m(r,[0,0,0,1])||(t.rotation=r),m(i,[0,0,0])||(t.translation=i),m(s,[1,1,1])||(t.scale=s)}else e.updateMatrix(),m(e.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])||(t.matrix=e.matrix.elements);if(""!==e.name&&(t.name=String(e.name)),e.userData&&Object.keys(e.userData).length>0&&(t.extras=y(e)),e.isMesh||e.isLine||e.isPoints){var c=T(e);null!==c&&(t.mesh=c)}else e.isCamera&&(t.camera=function(e){a.cameras||(a.cameras=[]);var t=e.isOrthographicCamera,n={type:t?"orthographic":"perspective"};return t?n.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:n.perspective={aspectRatio:e.aspect,yfov:o.degToRad(e.fov)/e.aspect,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(n.name=e.type),a.cameras.push(n),a.cameras.length-1}(e));if(e.isSkinnedMesh&&d.push(e),e.children.length>0){for(var u=[],l=0,f=e.children.length;l<f;l++){var p=e.children[l];if(p.visible||!1===n.onlyVisible){var v=C(p);null!==v&&u.push(v)}}u.length>0&&(t.children=u)}a.nodes.push(t);var g=a.nodes.length-1;return h.set(e,g),g}function P(e){a.scenes||(a.scenes=[],a.scene=0);var t={nodes:[]};""!==e.name&&(t.name=e.name),a.scenes.push(t);for(var r=[],i=0,o=e.children.length;i<o;i++){var s=e.children[i];if(s.visible||!1===n.onlyVisible){var c=C(s);null!==c&&r.push(c)}}r.length>0&&(t.nodes=r)}!function(e){e=e instanceof Array?e:[e];for(var t=[],r=0;r<e.length;r++)e[r]instanceof Yn?P(e[r]):t.push(e[r]);for(t.length>0&&function(e){var t=new Yn;t.name="AuxScene";for(var n=0;n<e.length;n++)t.children.push(e[n]);P(t)}(t),r=0;r<d.length;++r)E(d[r]);for(r=0;r<n.animations.length;++r)A(n.animations[r],e[0])}(e),Promise.all(l).then(function(){var e=new Blob(u,{type:"application/octet-stream"}),r=Object.keys(f);if(r.length>0&&(a.extensionsUsed=r),a.buffers&&a.buffers.length>0){a.buffers[0].byteLength=e.size;var o=new i.FileReader;if(!0===n.binary){o.readAsArrayBuffer(e),o.onloadend=function(){var e=g(o.result),n=new DataView(new ArrayBuffer(8));n.setUint32(0,e.byteLength,!0),n.setUint32(4,5130562,!0);var r=g(function(e){if(void 0!==i.TextEncoder)return(new TextEncoder).encode(e).buffer;for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);t[n]=o>255?32:o}return t.buffer}(JSON.stringify(a)),32),s=new DataView(new ArrayBuffer(8));s.setUint32(0,r.byteLength,!0),s.setUint32(4,1313821514,!0);var c=new ArrayBuffer(12),u=new DataView(c);u.setUint32(0,1179937895,!0),u.setUint32(4,2,!0);var l=12+s.byteLength+r.byteLength+n.byteLength+e.byteLength;u.setUint32(8,l,!0);var h=new Blob([c,s,r,n,e],{type:"application/octet-stream"}),d=new i.FileReader;d.readAsArrayBuffer(h),d.onloadend=function(){t(d.result)}}}else o.readAsDataURL(e),o.onloadend=function(){var e=o.result;a.buffers[0].uri=e,t(a)}}else t(a)})}};var Di=function(){};Di.prototype={constructor:Di,parse:function(e){var t,n,r,i,o,a="",c=0,u=0,l=0,h=new s,f=new s,p=new x,m=[];return e.traverse(function(e){e instanceof fn&&function(e){var r=0,s=0,v=0,g=e.geometry,y=new d;if(g instanceof _&&(g=(new k).setFromObject(e)),g instanceof k){var b=g.getAttribute("position"),x=g.getAttribute("normal"),w=g.getAttribute("uv"),S=g.getIndex();if(a+="o "+e.name+"\n",e.material&&e.material.name&&(a+="usemtl "+e.material.name+"\n"),void 0!==b)for(t=0,i=b.count;t<i;t++,r++)h.x=b.getX(t),h.y=b.getY(t),h.z=b.getZ(t),h.applyMatrix4(e.matrixWorld),a+="v "+h.x+" "+h.y+" "+h.z+"\n";if(void 0!==w)for(t=0,i=w.count;t<i;t++,v++)p.x=w.getX(t),p.y=w.getY(t),a+="vt "+p.x+" "+p.y+"\n";if(void 0!==x)for(y.getNormalMatrix(e.matrixWorld),t=0,i=x.count;t<i;t++,s++)f.x=x.getX(t),f.y=x.getY(t),f.z=x.getZ(t),f.applyMatrix3(y),a+="vn "+f.x+" "+f.y+" "+f.z+"\n";if(null!==S)for(t=0,i=S.count;t<i;t+=3){for(o=0;o<3;o++)n=S.getX(t+o)+1,m[o]=c+n+(x||w?"/"+(w?u+n:"")+(x?"/"+(l+n):""):"");a+="f "+m.join(" ")+"\n"}else for(t=0,i=b.count;t<i;t+=3){for(o=0;o<3;o++)n=t+o+1,m[o]=c+n+(x||w?"/"+(w?u+n:"")+(x?"/"+(l+n):""):"");a+="f "+m.join(" ")+"\n"}}else console.warn("OBJExporter.parseMesh(): geometry type unsupported",g);c+=r,u+=v,l+=s}(e),e instanceof pn&&function(e){var o=0,s=e.geometry,u=e.type;if(s instanceof _&&(s=(new k).setFromObject(e)),s instanceof k){var l=s.getAttribute("position");if(a+="o "+e.name+"\n",void 0!==l)for(t=0,i=l.count;t<i;t++,o++)h.x=l.getX(t),h.y=l.getY(t),h.z=l.getZ(t),h.applyMatrix4(e.matrixWorld),a+="v "+h.x+" "+h.y+" "+h.z+"\n";if("Line"===u){for(a+="l ",n=1,i=l.count;n<=i;n++)a+=c+n+" ";a+="\n"}if("LineSegments"===u)for(r=1+(n=1),i=l.count;n<i;r=(n+=2)+1)a+="l "+(c+n)+" "+(c+r)+"\n"}else console.warn("OBJExporter.parseLine(): geometry type unsupported",s);c+=o}(e)}),a}};var Fi=function(){};Fi.prototype={constructor:Fi,parse:function(e,t,n){function r(t){e.traverse(function(e){if(!0===e.isMesh){var n=e,r=n.geometry;!0===r.isGeometry&&(r=o.get(r)),!0===r.isBufferGeometry&&void 0!==r.getAttribute("position")&&t(n,r)}})}t&&"object"==typeof t&&(console.warn('PLYExporter: The options parameter is now the third argument to the "parse" function. See the documentation for the new API.'),n=t,t=void 0);var i=(n=Object.assign({binary:!1,excludeAttributes:[]},n)).excludeAttributes,o=new WeakMap,a=!1,c=!1,u=!1,l=0,h=0;e.traverse(function(e){if(!0===e.isMesh){var t=e,n=t.geometry;if(!0===n.isGeometry){var r=o.get(n)||(new k).setFromObject(t);o.set(n,r),n=r}if(!0===n.isBufferGeometry){var i=n.getAttribute("position"),s=n.getAttribute("normal"),d=n.getAttribute("uv"),f=n.getAttribute("color"),p=n.getIndex();if(void 0===i)return;l+=i.count,h+=p?p.count/3:i.count/3,void 0!==s&&(a=!0),void 0!==d&&(u=!0),void 0!==f&&(c=!0)}}});var f=-1===i.indexOf("index");if(a=a&&-1===i.indexOf("normal"),c=c&&-1===i.indexOf("color"),u=u&&-1===i.indexOf("uv"),f&&h!==Math.floor(h))return console.error("PLYExporter: Failed to generate a valid PLY file with triangle indices because the number of indices is not divisible by 3."),null;var p=1;l>256&&(p=2),l>65536&&(p=4);var m="ply\nformat "+(n.binary?"binary_big_endian":"ascii")+" 1.0\nelement vertex "+l+"\nproperty float x\nproperty float y\nproperty float z\n";!0===a&&(m+="property float nx\nproperty float ny\nproperty float nz\n"),!0===u&&(m+="property float s\nproperty float t\n"),!0===c&&(m+="property uchar red\nproperty uchar green\nproperty uchar blue\n"),!0===f&&(m+="element face "+h+"\nproperty list uchar uint"+8*p+" vertex_index\n"),m+="end_header\n";var v=new s,g=new d,y=null;if(!0===n.binary){var b=(new TextEncoder).encode(m),x=l*(12+(a?12:0)+(c?3:0)+(u?8:0)),w=f?h*(3*p+1):0,_=new DataView(new ArrayBuffer(b.length+x+w));new Uint8Array(_.buffer).set(b,0);var S=b.length,M=b.length+x,T=0;r(function(e,t){var n=t.getAttribute("position"),r=t.getAttribute("normal"),i=t.getAttribute("uv"),o=t.getAttribute("color"),s=t.getIndex();g.getNormalMatrix(e.matrixWorld);for(var l=0,h=n.count;l<h;l++)v.x=n.getX(l),v.y=n.getY(l),v.z=n.getZ(l),v.applyMatrix4(e.matrixWorld),_.setFloat32(S,v.x),S+=4,_.setFloat32(S,v.y),S+=4,_.setFloat32(S,v.z),S+=4,!0===a&&(null!=r?(v.x=r.getX(l),v.y=r.getY(l),v.z=r.getZ(l),v.applyMatrix3(g),_.setFloat32(S,v.x),S+=4,_.setFloat32(S,v.y),S+=4,_.setFloat32(S,v.z),S+=4):(_.setFloat32(S,0),S+=4,_.setFloat32(S,0),S+=4,_.setFloat32(S,0),S+=4)),!0===u&&(null!=i?(_.setFloat32(S,i.getX(l)),S+=4,_.setFloat32(S,i.getY(l)),S+=4):!1!==u&&(_.setFloat32(S,0),S+=4,_.setFloat32(S,0),S+=4)),!0===c&&(null!=o?(_.setUint8(S,Math.floor(255*o.getX(l))),S+=1,_.setUint8(S,Math.floor(255*o.getY(l))),S+=1,_.setUint8(S,Math.floor(255*o.getZ(l))),S+=1):(_.setUint8(S,255),S+=1,_.setUint8(S,255),S+=1,_.setUint8(S,255),S+=1));if(!0===f){var d="setUint"+8*p;if(null!==s)for(l=0,h=s.count;l<h;l+=3)_.setUint8(M,3),M+=1,_[d](M,s.getX(l+0)+T),M+=p,_[d](M,s.getX(l+1)+T),M+=p,_[d](M,s.getX(l+2)+T),M+=p;else for(l=0,h=n.count;l<h;l+=3)_.setUint8(M,3),M+=1,_[d](M,T+l),M+=p,_[d](M,T+l+1),M+=p,_[d](M,T+l+2),M+=p}T+=n.count}),y=_.buffer}else{T=0;var A="",E="";r(function(e,t){var n=t.getAttribute("position"),r=t.getAttribute("normal"),i=t.getAttribute("uv"),o=t.getAttribute("color"),s=t.getIndex();g.getNormalMatrix(e.matrixWorld);for(var l=0,d=n.count;l<d;l++){v.x=n.getX(l),v.y=n.getY(l),v.z=n.getZ(l),v.applyMatrix4(e.matrixWorld);var p=v.x+" "+v.y+" "+v.z;!0===a&&(null!=r?(v.x=r.getX(l),v.y=r.getY(l),v.z=r.getZ(l),v.applyMatrix3(g),p+=" "+v.x+" "+v.y+" "+v.z):p+=" 0 0 0"),!0===u&&(null!=i?p+=" "+i.getX(l)+" "+i.getY(l):!1!==u&&(p+=" 0 0")),!0===c&&(p+=null!=o?" "+Math.floor(255*o.getX(l))+" "+Math.floor(255*o.getY(l))+" "+Math.floor(255*o.getZ(l)):" 255 255 255"),A+=p+"\n"}if(!0===f){if(null!==s)for(l=0,d=s.count;l<d;l+=3)E+="3 "+(s.getX(l+0)+T),E+=" "+(s.getX(l+1)+T),E+=" "+(s.getX(l+2)+T)+"\n";else for(l=0,d=n.count;l<d;l+=3)E+="3 "+(T+l)+" "+(T+l+1)+" "+(T+l+2)+"\n";h+=s?s.count/3:n.count/3}T+=n.count}),y=""+m+A+"\n"+(f?E+"\n":"")}return"function"==typeof t&&requestAnimationFrame(function(){return t(y)}),y}};var ki=function(){};ki.prototype={constructor:ki,parse:function(){var e=new s,t=new d;return function(n,r){void 0===r&&(r={});var i=void 0!==r.binary&&r.binary,o=[],a=0;if(n.traverse(function(e){if(e.isMesh){var t=e.geometry;t.isBufferGeometry&&(t=(new _).fromBufferGeometry(t)),t.isGeometry&&(a+=t.faces.length,o.push({geometry:t,matrixWorld:e.matrixWorld}))}}),i){var s=80,c=new ArrayBuffer(2*a+3*a*4*4+80+4);(b=new DataView(c)).setUint32(s,a,!0),s+=4;for(var u=0,l=o.length;u<l;u++){var h=(x=o[u]).geometry.vertices,d=x.geometry.faces,f=x.matrixWorld;t.getNormalMatrix(f);for(var p=0,m=d.length;p<m;p++){var v=d[p];e.copy(v.normal).applyMatrix3(t).normalize(),b.setFloat32(s,e.x,!0),s+=4,b.setFloat32(s,e.y,!0),s+=4,b.setFloat32(s,e.z,!0),s+=4;for(var g=[v.a,v.b,v.c],y=0;y<3;y++)e.copy(h[g[y]]).applyMatrix4(f),b.setFloat32(s,e.x,!0),s+=4,b.setFloat32(s,e.y,!0),s+=4,b.setFloat32(s,e.z,!0),s+=4;b.setUint16(s,0,!0),s+=2}}return b}var b="";b+="solid exported\n";for(u=0,l=o.length;u<l;u++){var x;h=(x=o[u]).geometry.vertices,d=x.geometry.faces,f=x.matrixWorld;t.getNormalMatrix(f);for(p=0,m=d.length;p<m;p++){v=d[p];e.copy(v.normal).applyMatrix3(t).normalize(),b+="\tfacet normal "+e.x+" "+e.y+" "+e.z+"\n",b+="\t\touter loop\n";for(g=[v.a,v.b,v.c],y=0;y<3;y++)e.copy(h[g[y]]).applyMatrix4(f),b+="\t\t\tvertex "+e.x+" "+e.y+" "+e.z+"\n";b+="\t\tendloop\n",b+="\tendfacet\n"}}return b+="endsolid exported\n"}}()};var Ui=function(){};function Bi(e,t,n,r){k.call(this);var i=[],o=[],c=[],u=new s,l=new a;l.makeRotationFromEuler(n),l.setPosition(t);var h=(new a).getInverse(l);function d(t,n,r){n.applyMatrix4(e.matrixWorld),n.applyMatrix4(h),t.push(new zi(n.clone(),r.clone()))}function f(e,t){for(var n=[],i=.5*Math.abs(r.dot(t)),o=0;o<e.length;o+=3){var a,s,c,u,l,h,d,f=e[o+0].position.dot(t)-i;switch(s=e[o+1].position.dot(t)-i>0,c=e[o+2].position.dot(t)-i>0,((a=f>0)?1:0)+(s?1:0)+(c?1:0)){case 0:n.push(e[o]),n.push(e[o+1]),n.push(e[o+2]);break;case 1:if(a&&(u=e[o+1],l=e[o+2],h=p(e[o],u,t,i),d=p(e[o],l,t,i)),s){u=e[o],l=e[o+2],h=p(e[o+1],u,t,i),d=p(e[o+1],l,t,i),n.push(h),n.push(l.clone()),n.push(u.clone()),n.push(l.clone()),n.push(h.clone()),n.push(d);break}c&&(u=e[o],l=e[o+1],h=p(e[o+2],u,t,i),d=p(e[o+2],l,t,i)),n.push(u.clone()),n.push(l.clone()),n.push(h),n.push(d),n.push(h.clone()),n.push(l.clone());break;case 2:a||(l=p(u=e[o].clone(),e[o+1],t,i),h=p(u,e[o+2],t,i),n.push(u),n.push(l),n.push(h)),s||(l=p(u=e[o+1].clone(),e[o+2],t,i),h=p(u,e[o],t,i),n.push(u),n.push(l),n.push(h)),c||(l=p(u=e[o+2].clone(),e[o],t,i),h=p(u,e[o+1],t,i),n.push(u),n.push(l),n.push(h))}}return n}function p(e,t,n,r){var i=e.position.dot(n)-r,o=i/(i-(t.position.dot(n)-r));return new zi(new s(e.position.x+o*(t.position.x-e.position.x),e.position.y+o*(t.position.y-e.position.y),e.position.z+o*(t.position.z-e.position.z)),new s(e.normal.x+o*(t.normal.x-e.normal.x),e.normal.y+o*(t.normal.y-e.normal.y),e.normal.z+o*(t.normal.z-e.normal.z)))}!function(){var t,n=new k,a=[],h=new s,p=new s;e.geometry.isGeometry?n.fromGeometry(e.geometry):n.copy(e.geometry);var m=n.attributes.position,v=n.attributes.normal;if(null!==n.index){var g=n.index;for(t=0;t<g.count;t++)h.fromBufferAttribute(m,g.getX(t)),p.fromBufferAttribute(v,g.getX(t)),d(a,h,p)}else for(t=0;t<m.count;t++)h.fromBufferAttribute(m,t),p.fromBufferAttribute(v,t),d(a,h,p);for(a=f(a=f(a=f(a=f(a=f(a=f(a,u.set(1,0,0)),u.set(-1,0,0)),u.set(0,1,0)),u.set(0,-1,0)),u.set(0,0,1)),u.set(0,0,-1)),t=0;t<a.length;t++){var y=a[t];c.push(.5+y.position.x/r.x,.5+y.position.y/r.y),y.position.applyMatrix4(l),i.push(y.position.x,y.position.y,y.position.z),o.push(y.normal.x,y.normal.y,y.normal.z)}}(),this.addAttribute("position",new N(i,3)),this.addAttribute("normal",new N(o,3)),this.addAttribute("uv",new N(c,2))}function zi(e,t){this.position=e,this.normal=t}Ui.prototype={constructor:Ui,parse:function(e){var t={metadata:{version:4,type:"TypedGeometry",generator:"TypedGeometryExporter"}},n=["vertices","normals","uvs"];for(var r in n){for(var i=n[r],o=e[i],a=[],s=0,c=o.length;s<c;s++)a[s]=o[s];t[i]=a}var u=e.boundingSphere;return null!==u&&(t.boundingSphere={center:u.center.toArray(),radius:u.radius}),t}},Bi.prototype=Object.create(k.prototype),Bi.prototype.constructor=Bi,zi.prototype.clone=function(){return new zi(this.position.clone(),this.normal.clone())};var ji=function(e,t,n,r,i,o,c){var u=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,3,16,17,18,7,19,20,21,11,22,23,24,15,25,26,27,18,28,29,30,21,31,32,33,24,34,35,36,27,37,38,39,30,40,41,0,33,42,43,4,36,44,45,8,39,46,47,12,12,13,14,15,48,49,50,51,52,53,54,55,56,57,58,59,15,25,26,27,51,60,61,62,55,63,64,65,59,66,67,68,27,37,38,39,62,69,70,71,65,72,73,74,68,75,76,77,39,46,47,12,71,78,79,48,74,80,81,52,77,82,83,56,56,57,58,59,84,85,86,87,88,89,90,91,92,93,94,95,59,66,67,68,87,96,97,98,91,99,100,101,95,102,103,104,68,75,76,77,98,105,106,107,101,108,109,110,104,111,112,113,77,82,83,56,107,114,115,84,110,116,117,88,113,118,119,92,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,123,136,137,120,127,138,139,124,131,140,141,128,135,142,143,132,132,133,134,135,144,145,146,147,148,149,150,151,68,152,153,154,135,142,143,132,147,155,156,144,151,157,158,148,154,159,160,68,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,164,177,178,161,168,179,180,165,172,181,182,169,176,183,184,173,173,174,175,176,185,186,187,188,189,190,191,192,193,194,195,196,176,183,184,173,188,197,198,185,192,199,200,189,196,201,202,193,203,203,203,203,204,205,206,207,208,208,208,208,209,210,211,212,203,203,203,203,207,213,214,215,208,208,208,208,212,216,217,218,203,203,203,203,215,219,220,221,208,208,208,208,218,222,223,224,203,203,203,203,221,225,226,204,208,208,208,208,224,227,228,209,209,210,211,212,229,230,231,232,233,234,235,236,237,238,239,240,212,216,217,218,232,241,242,243,236,244,245,246,240,247,248,249,218,222,223,224,243,250,251,252,246,253,254,255,249,256,257,258,224,227,228,209,252,259,260,229,255,261,262,233,258,263,264,237,265,265,265,265,266,267,268,269,270,271,272,273,92,119,118,113,265,265,265,265,269,274,275,276,273,277,278,279,113,112,111,104,265,265,265,265,276,280,281,282,279,283,284,285,104,103,102,95,265,265,265,265,282,286,287,266,285,288,289,270,95,94,93,92],l=[1.4,0,2.4,1.4,-.784,2.4,.784,-1.4,2.4,0,-1.4,2.4,1.3375,0,2.53125,1.3375,-.749,2.53125,.749,-1.3375,2.53125,0,-1.3375,2.53125,1.4375,0,2.53125,1.4375,-.805,2.53125,.805,-1.4375,2.53125,0,-1.4375,2.53125,1.5,0,2.4,1.5,-.84,2.4,.84,-1.5,2.4,0,-1.5,2.4,-.784,-1.4,2.4,-1.4,-.784,2.4,-1.4,0,2.4,-.749,-1.3375,2.53125,-1.3375,-.749,2.53125,-1.3375,0,2.53125,-.805,-1.4375,2.53125,-1.4375,-.805,2.53125,-1.4375,0,2.53125,-.84,-1.5,2.4,-1.5,-.84,2.4,-1.5,0,2.4,-1.4,.784,2.4,-.784,1.4,2.4,0,1.4,2.4,-1.3375,.749,2.53125,-.749,1.3375,2.53125,0,1.3375,2.53125,-1.4375,.805,2.53125,-.805,1.4375,2.53125,0,1.4375,2.53125,-1.5,.84,2.4,-.84,1.5,2.4,0,1.5,2.4,.784,1.4,2.4,1.4,.784,2.4,.749,1.3375,2.53125,1.3375,.749,2.53125,.805,1.4375,2.53125,1.4375,.805,2.53125,.84,1.5,2.4,1.5,.84,2.4,1.75,0,1.875,1.75,-.98,1.875,.98,-1.75,1.875,0,-1.75,1.875,2,0,1.35,2,-1.12,1.35,1.12,-2,1.35,0,-2,1.35,2,0,.9,2,-1.12,.9,1.12,-2,.9,0,-2,.9,-.98,-1.75,1.875,-1.75,-.98,1.875,-1.75,0,1.875,-1.12,-2,1.35,-2,-1.12,1.35,-2,0,1.35,-1.12,-2,.9,-2,-1.12,.9,-2,0,.9,-1.75,.98,1.875,-.98,1.75,1.875,0,1.75,1.875,-2,1.12,1.35,-1.12,2,1.35,0,2,1.35,-2,1.12,.9,-1.12,2,.9,0,2,.9,.98,1.75,1.875,1.75,.98,1.875,1.12,2,1.35,2,1.12,1.35,1.12,2,.9,2,1.12,.9,2,0,.45,2,-1.12,.45,1.12,-2,.45,0,-2,.45,1.5,0,.225,1.5,-.84,.225,.84,-1.5,.225,0,-1.5,.225,1.5,0,.15,1.5,-.84,.15,.84,-1.5,.15,0,-1.5,.15,-1.12,-2,.45,-2,-1.12,.45,-2,0,.45,-.84,-1.5,.225,-1.5,-.84,.225,-1.5,0,.225,-.84,-1.5,.15,-1.5,-.84,.15,-1.5,0,.15,-2,1.12,.45,-1.12,2,.45,0,2,.45,-1.5,.84,.225,-.84,1.5,.225,0,1.5,.225,-1.5,.84,.15,-.84,1.5,.15,0,1.5,.15,1.12,2,.45,2,1.12,.45,.84,1.5,.225,1.5,.84,.225,.84,1.5,.15,1.5,.84,.15,-1.6,0,2.025,-1.6,-.3,2.025,-1.5,-.3,2.25,-1.5,0,2.25,-2.3,0,2.025,-2.3,-.3,2.025,-2.5,-.3,2.25,-2.5,0,2.25,-2.7,0,2.025,-2.7,-.3,2.025,-3,-.3,2.25,-3,0,2.25,-2.7,0,1.8,-2.7,-.3,1.8,-3,-.3,1.8,-3,0,1.8,-1.5,.3,2.25,-1.6,.3,2.025,-2.5,.3,2.25,-2.3,.3,2.025,-3,.3,2.25,-2.7,.3,2.025,-3,.3,1.8,-2.7,.3,1.8,-2.7,0,1.575,-2.7,-.3,1.575,-3,-.3,1.35,-3,0,1.35,-2.5,0,1.125,-2.5,-.3,1.125,-2.65,-.3,.9375,-2.65,0,.9375,-2,-.3,.9,-1.9,-.3,.6,-1.9,0,.6,-3,.3,1.35,-2.7,.3,1.575,-2.65,.3,.9375,-2.5,.3,1.125,-1.9,.3,.6,-2,.3,.9,1.7,0,1.425,1.7,-.66,1.425,1.7,-.66,.6,1.7,0,.6,2.6,0,1.425,2.6,-.66,1.425,3.1,-.66,.825,3.1,0,.825,2.3,0,2.1,2.3,-.25,2.1,2.4,-.25,2.025,2.4,0,2.025,2.7,0,2.4,2.7,-.25,2.4,3.3,-.25,2.4,3.3,0,2.4,1.7,.66,.6,1.7,.66,1.425,3.1,.66,.825,2.6,.66,1.425,2.4,.25,2.025,2.3,.25,2.1,3.3,.25,2.4,2.7,.25,2.4,2.8,0,2.475,2.8,-.25,2.475,3.525,-.25,2.49375,3.525,0,2.49375,2.9,0,2.475,2.9,-.15,2.475,3.45,-.15,2.5125,3.45,0,2.5125,2.8,0,2.4,2.8,-.15,2.4,3.2,-.15,2.4,3.2,0,2.4,3.525,.25,2.49375,2.8,.25,2.475,3.45,.15,2.5125,2.9,.15,2.475,3.2,.15,2.4,2.8,.15,2.4,0,0,3.15,.8,0,3.15,.8,-.45,3.15,.45,-.8,3.15,0,-.8,3.15,0,0,2.85,.2,0,2.7,.2,-.112,2.7,.112,-.2,2.7,0,-.2,2.7,-.45,-.8,3.15,-.8,-.45,3.15,-.8,0,3.15,-.112,-.2,2.7,-.2,-.112,2.7,-.2,0,2.7,-.8,.45,3.15,-.45,.8,3.15,0,.8,3.15,-.2,.112,2.7,-.112,.2,2.7,0,.2,2.7,.45,.8,3.15,.8,.45,3.15,.112,.2,2.7,.2,.112,2.7,.4,0,2.55,.4,-.224,2.55,.224,-.4,2.55,0,-.4,2.55,1.3,0,2.55,1.3,-.728,2.55,.728,-1.3,2.55,0,-1.3,2.55,1.3,0,2.4,1.3,-.728,2.4,.728,-1.3,2.4,0,-1.3,2.4,-.224,-.4,2.55,-.4,-.224,2.55,-.4,0,2.55,-.728,-1.3,2.55,-1.3,-.728,2.55,-1.3,0,2.55,-.728,-1.3,2.4,-1.3,-.728,2.4,-1.3,0,2.4,-.4,.224,2.55,-.224,.4,2.55,0,.4,2.55,-1.3,.728,2.55,-.728,1.3,2.55,0,1.3,2.55,-1.3,.728,2.4,-.728,1.3,2.4,0,1.3,2.4,.224,.4,2.55,.4,.224,2.55,.728,1.3,2.55,1.3,.728,2.55,.728,1.3,2.4,1.3,.728,2.4,0,0,0,1.425,0,0,1.425,.798,0,.798,1.425,0,0,1.425,0,1.5,0,.075,1.5,.84,.075,.84,1.5,.075,0,1.5,.075,-.798,1.425,0,-1.425,.798,0,-1.425,0,0,-.84,1.5,.075,-1.5,.84,.075,-1.5,0,.075,-1.425,-.798,0,-.798,-1.425,0,0,-1.425,0,-1.5,-.84,.075,-.84,-1.5,.075,0,-1.5,.075,.798,-1.425,0,1.425,-.798,0,.84,-1.5,.075,1.5,-.84,.075];k.call(this),e=e||50,t=void 0!==t?Math.max(2,Math.floor(t)||10):10,n=void 0===n||n,r=void 0===r||r,i=void 0===i||i,o=void 0===o||o;var h=3.15*((c=void 0===c||c)?1:1.3)/2,d=e/h,f=n?(8*t-4)*t:0;f+=r?(16*t-4)*t:0,f+=i?40*t*t:0;var p=new Uint32Array(3*f),m=n?4:0;m+=r?8:0,m+=i?20:0,m*=(t+1)*(t+1);var v=new Float32Array(3*m),g=new Float32Array(3*m),y=new Float32Array(2*m),b=new a;b.set(-1,3,-3,1,3,-6,3,0,-3,3,0,0,1,0,0,0);var x,w,_,T,A,E,C,P,L,O,N,R,I,D,F,U,B=[],z=[],j=[],V=[],G=[],W=[],H=[],X=[],q=[],Y=new s,J=0,Q=0,Z=new s,K=new a,$=new a,ee=new S,te=new S,ne=new S,re=new S,ie=new s,oe=new s,ae=b.clone();ae.transpose();var se=function(e,t,n){return!(v[3*e]===v[3*t]&&v[3*e+1]===v[3*t+1]&&v[3*e+2]===v[3*t+2]||v[3*e]===v[3*n]&&v[3*e+1]===v[3*n+1]&&v[3*e+2]===v[3*n+2]||v[3*t]===v[3*n]&&v[3*t+1]===v[3*n+1]&&v[3*t+2]===v[3*n+2])};for(x=0;x<3;x++)W[x]=new a;var ce=n?32:28;C=t+1;for(var ue=0,le=0,he=0,de=0,fe=0,pe=i?0:20;pe<ce;pe++)if(r||pe<20||pe>=28){for(x=0;x<3;x++){for(w=0;w<4;w++)for(_=0;_<4;_++)B[4*_+w]=l[3*u[16*pe+4*w+_]+x],o&&pe>=20&&pe<28&&2!==x&&(B[4*_+w]*=1.077),c||2!==x||(B[4*_+w]*=1.3);K.set(B[0],B[1],B[2],B[3],B[4],B[5],B[6],B[7],B[8],B[9],B[10],B[11],B[12],B[13],B[14],B[15]),$.multiplyMatrices(K,b),W[x].multiplyMatrices(ae,$)}for(A=0;A<=t;A++)for(P=A/t,E=0;E<=t;E++){for(L=E/t,R=4,O=N=1;R--;)z[R]=O,j[R]=N,O*=P,N*=L,3===R?(V[R]=G[R]=0,J=Q=1):(V[R]=J*(3-R),G[R]=Q*(3-R),J*=P,Q*=L);for(ee.fromArray(z),te.fromArray(j),ne.fromArray(V),re.fromArray(G),x=0;x<3;x++)(T=ee.clone()).applyMatrix4(W[x]),H[x]=T.dot(te),(T=ne.clone()).applyMatrix4(W[x]),X[x]=T.dot(te),(T=ee.clone()).applyMatrix4(W[x]),q[x]=T.dot(re);ie.fromArray(X),oe.fromArray(q),Y.crossVectors(oe,ie),Y.normalize(),0===H[0]&&0===H[1]?Z.set(0,H[2]>h?1:-1,0):Z.set(Y.x,Y.z,-Y.y),v[le++]=d*H[0],v[le++]=d*(H[2]-h),v[le++]=-d*H[1],g[he++]=Z.x,g[he++]=Z.y,g[he++]=Z.z,y[de++]=1-L,y[de++]=1-P}for(A=0;A<t;A++)for(E=0;E<t;E++)U=(I=ue*C*C+A*C+E)+C,se(I,D=I+1,F=D+C)&&(p[fe++]=I,p[fe++]=D,p[fe++]=F),se(I,F,U)&&(p[fe++]=I,p[fe++]=F,p[fe++]=U);ue++}this.setIndex(new M(p,1)),this.addAttribute("position",new M(v,3)),this.addAttribute("normal",new M(g,3)),this.addAttribute("uv",new M(y,2)),this.computeBoundingSphere()};function Vi(e,t,n,r,i,o,a,s,c,u,l,h){Kn.call(this,null,o,a,s,c,u,r,i,l,h),this.image={data:e,width:t,height:n},this.magFilter=void 0!==c?c:Ye,this.minFilter=void 0!==u?u:Ye,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function Gi(e,t){p.call(this),this.type="Points",this.geometry=void 0!==e?e:new k,this.material=void 0!==t?t:new xr({color:16777215*Math.random()})}(ji.prototype=Object.create(k.prototype)).constructor=ji,Vi.prototype=Object.create(Kn.prototype),Vi.prototype.constructor=Vi,Vi.prototype.isDataTexture=!0,Gi.prototype=Object.assign(Object.create(p.prototype),{constructor:Gi,isPoints:!0,raycast:function(){var e=new a,t=new hn,n=new b;return function(r,i){var o=this,a=this.geometry,c=this.matrixWorld,u=r.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(c),n.radius+=u,!1!==r.ray.intersectsSphere(n)){e.getInverse(c),t.copy(r.ray).applyMatrix4(e);var l=u/((this.scale.x+this.scale.y+this.scale.z)/3),h=l*l,d=new s,f=new s;if(a.isBufferGeometry){var p=a.index,m=a.attributes.position.array;if(null!==p)for(var v=p.array,g=0,y=v.length;g<y;g++){var b=v[g];d.fromArray(m,3*b),_(d,b)}else{g=0;for(var x=m.length/3;g<x;g++)d.fromArray(m,3*g),_(d,g)}}else{var w=a.vertices;for(g=0,x=w.length;g<x;g++)_(w[g],g)}}function _(e,n){var a=t.distanceSqToPoint(e);if(a<h){t.closestPointToPoint(e,f),f.applyMatrix4(c);var s=r.ray.origin.distanceTo(f);if(s<r.near||s>r.far)return;i.push({distance:s,distanceToRay:Math.sqrt(a),point:f.clone(),index:n,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Wi=function(e){p.apply(this,arguments),e=e||{},this.PARTICLE_COUNT=e.maxParticles||1e6,this.PARTICLE_CONTAINERS=e.containerCount||1,this.PARTICLE_NOISE_TEXTURE=e.particleNoiseTex||null,this.PARTICLE_SPRITE_TEXTURE=e.particleSpriteTex||null,this.PARTICLES_PER_CONTAINER=Math.ceil(this.PARTICLE_COUNT/this.PARTICLE_CONTAINERS),this.PARTICLE_CURSOR=0,this.time=0,this.particleContainers=[],this.rand=[];var t,n={vertexShader:["uniform float uTime;","uniform float uScale;","uniform sampler2D tNoise;","attribute vec3 positionStart;","attribute float startTime;","attribute vec3 velocity;","attribute float turbulence;","attribute vec3 color;","attribute float size;","attribute float lifeTime;","varying vec4 vColor;","varying float lifeLeft;","void main() {","\tvColor = vec4( color, 1.0 );","\tvec3 newPosition;","\tvec3 v;","\tfloat timeElapsed = uTime - startTime;","\tlifeLeft = 1.0 - ( timeElapsed / lifeTime );","\tgl_PointSize = ( uScale * size ) * lifeLeft;","\tv.x = ( velocity.x - 0.5 ) * 3.0;","\tv.y = ( velocity.y - 0.5 ) * 3.0;","\tv.z = ( velocity.z - 0.5 ) * 3.0;","\tnewPosition = positionStart + ( v * 10.0 ) * timeElapsed;","\tvec3 noise = texture2D( tNoise, vec2( newPosition.x * 0.015 + ( uTime * 0.05 ), newPosition.y * 0.02 + ( uTime * 0.015 ) ) ).rgb;","\tvec3 noiseVel = ( noise.rgb - 0.5 ) * 30.0;","\tnewPosition = mix( newPosition, newPosition + vec3( noiseVel * ( turbulence * 5.0 ) ), ( timeElapsed / lifeTime ) );","\tif( v.y > 0. && v.y < .05 ) {","\t\tlifeLeft = 0.0;","\t}","\tif( v.x < - 1.45 ) {","\t\tlifeLeft = 0.0;","\t}","\tif( timeElapsed > 0.0 ) {","\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );","\t} else {","\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\t\tlifeLeft = 0.0;","\t\tgl_PointSize = 0.;","\t}","}"].join("\n"),fragmentShader:["float scaleLinear( float value, vec2 valueDomain ) {","\treturn ( value - valueDomain.x ) / ( valueDomain.y - valueDomain.x );","}","float scaleLinear( float value, vec2 valueDomain, vec2 valueRange ) {","\treturn mix( valueRange.x, valueRange.y, scaleLinear( value, valueDomain ) );","}","varying vec4 vColor;","varying float lifeLeft;","uniform sampler2D tSprite;","void main() {","\tfloat alpha = 0.;","\tif( lifeLeft > 0.995 ) {","\t\talpha = scaleLinear( lifeLeft, vec2( 1.0, 0.995 ), vec2( 0.0, 1.0 ) );","\t} else {","\t\talpha = lifeLeft * 0.75;","\t}","\tvec4 tex = texture2D( tSprite, gl_PointCoord );","\tgl_FragColor = vec4( vColor.rgb * tex.a, alpha * tex.a );","}"].join("\n")};for(t=1e5;t>0;t--)this.rand.push(Math.random()-.5);this.random=function(){return++t>=this.rand.length?this.rand[t=1]:this.rand[t]};var r=new Ar;this.particleNoiseTex=this.PARTICLE_NOISE_TEXTURE||r.load("textures/perlin-512.png"),this.particleNoiseTex.wrapS=this.particleNoiseTex.wrapT=He,this.particleSpriteTex=this.PARTICLE_SPRITE_TEXTURE||r.load("textures/particle2.png"),this.particleSpriteTex.wrapS=this.particleSpriteTex.wrapT=He,this.particleShaderMat=new qn({transparent:!0,depthWrite:!1,uniforms:{uTime:{value:0},uScale:{value:1},tNoise:{value:this.particleNoiseTex},tSprite:{value:this.particleSpriteTex}},blending:te,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}),this.particleShaderMat.defaultAttributeValues.particlePositionsStartTime=[0,0,0,0],this.particleShaderMat.defaultAttributeValues.particleVelColSizeLife=[0,0,0,0],this.init=function(){for(var e=0;e<this.PARTICLE_CONTAINERS;e++){var t=new Hi(this.PARTICLES_PER_CONTAINER,this);this.particleContainers.push(t),this.add(t)}},this.spawnParticle=function(e){this.PARTICLE_CURSOR++,this.PARTICLE_CURSOR>=this.PARTICLE_COUNT&&(this.PARTICLE_CURSOR=1),this.particleContainers[Math.floor(this.PARTICLE_CURSOR/this.PARTICLES_PER_CONTAINER)].spawnParticle(e)},this.update=function(e){for(var t=0;t<this.PARTICLE_CONTAINERS;t++)this.particleContainers[t].update(e)},this.dispose=function(){this.particleShaderMat.dispose(),this.particleNoiseTex.dispose(),this.particleSpriteTex.dispose();for(var e=0;e<this.PARTICLE_CONTAINERS;e++)this.particleContainers[e].dispose()},this.init()};(Wi.prototype=Object.create(p.prototype)).constructor=Wi;var Hi=function(e,t){p.apply(this,arguments),this.PARTICLE_COUNT=e||1e5,this.PARTICLE_CURSOR=0,this.time=0,this.offset=0,this.count=0,this.DPR=i.devicePixelRatio,this.GPUParticleSystem=t,this.particleUpdate=!1,this.particleShaderGeo=new k,this.particleShaderGeo.addAttribute("position",new M(new Float32Array(3*this.PARTICLE_COUNT),3).setDynamic(!0)),this.particleShaderGeo.addAttribute("positionStart",new M(new Float32Array(3*this.PARTICLE_COUNT),3).setDynamic(!0)),this.particleShaderGeo.addAttribute("startTime",new M(new Float32Array(this.PARTICLE_COUNT),1).setDynamic(!0)),this.particleShaderGeo.addAttribute("velocity",new M(new Float32Array(3*this.PARTICLE_COUNT),3).setDynamic(!0)),this.particleShaderGeo.addAttribute("turbulence",new M(new Float32Array(this.PARTICLE_COUNT),1).setDynamic(!0)),this.particleShaderGeo.addAttribute("color",new M(new Float32Array(3*this.PARTICLE_COUNT),3).setDynamic(!0)),this.particleShaderGeo.addAttribute("size",new M(new Float32Array(this.PARTICLE_COUNT),1).setDynamic(!0)),this.particleShaderGeo.addAttribute("lifeTime",new M(new Float32Array(this.PARTICLE_COUNT),1).setDynamic(!0)),this.particleShaderMat=this.GPUParticleSystem.particleShaderMat;var n=new s,r=new s,a=new v;this.spawnParticle=function(e){var i=this.particleShaderGeo.getAttribute("positionStart"),s=this.particleShaderGeo.getAttribute("startTime"),c=this.particleShaderGeo.getAttribute("velocity"),u=this.particleShaderGeo.getAttribute("turbulence"),l=this.particleShaderGeo.getAttribute("color"),h=this.particleShaderGeo.getAttribute("size"),d=this.particleShaderGeo.getAttribute("lifeTime");n=void 0!==(e=e||{}).position?n.copy(e.position):n.set(0,0,0),r=void 0!==e.velocity?r.copy(e.velocity):r.set(0,0,0),a=void 0!==e.color?a.set(e.color):a.set(16777215);var f=void 0!==e.positionRandomness?e.positionRandomness:0,p=void 0!==e.velocityRandomness?e.velocityRandomness:0,m=void 0!==e.colorRandomness?e.colorRandomness:1,v=void 0!==e.turbulence?e.turbulence:1,g=void 0!==e.lifetime?e.lifetime:5,y=void 0!==e.size?e.size:10,b=void 0!==e.sizeRandomness?e.sizeRandomness:0,x=void 0!==e.smoothPosition&&e.smoothPosition;void 0!==this.DPR&&(y*=this.DPR);var w=this.PARTICLE_CURSOR;i.array[3*w+0]=n.x+t.random()*f,i.array[3*w+1]=n.y+t.random()*f,i.array[3*w+2]=n.z+t.random()*f,!0===x&&(i.array[3*w+0]+=-r.x*t.random(),i.array[3*w+1]+=-r.y*t.random(),i.array[3*w+2]+=-r.z*t.random());var _=r.x+t.random()*p,S=r.y+t.random()*p,M=r.z+t.random()*p;_=o.clamp((_- -2)/4,0,1),S=o.clamp((S- -2)/4,0,1),M=o.clamp((M- -2)/4,0,1),c.array[3*w+0]=_,c.array[3*w+1]=S,c.array[3*w+2]=M,a.r=o.clamp(a.r+t.random()*m,0,1),a.g=o.clamp(a.g+t.random()*m,0,1),a.b=o.clamp(a.b+t.random()*m,0,1),l.array[3*w+0]=a.r,l.array[3*w+1]=a.g,l.array[3*w+2]=a.b,u.array[w]=v,h.array[w]=y+t.random()*b,d.array[w]=g,s.array[w]=this.time+.02*t.random(),0===this.offset&&(this.offset=this.PARTICLE_CURSOR),this.count++,this.PARTICLE_CURSOR++,this.PARTICLE_CURSOR>=this.PARTICLE_COUNT&&(this.PARTICLE_CURSOR=0),this.particleUpdate=!0},this.init=function(){this.particleSystem=new Gi(this.particleShaderGeo,this.particleShaderMat),this.particleSystem.frustumCulled=!1,this.add(this.particleSystem)},this.update=function(e){this.time=e,this.particleShaderMat.uniforms.uTime.value=e,this.geometryUpdate()},this.geometryUpdate=function(){if(!0===this.particleUpdate){this.particleUpdate=!1;var e=this.particleShaderGeo.getAttribute("positionStart"),t=this.particleShaderGeo.getAttribute("startTime"),n=this.particleShaderGeo.getAttribute("velocity"),r=this.particleShaderGeo.getAttribute("turbulence"),i=this.particleShaderGeo.getAttribute("color"),o=this.particleShaderGeo.getAttribute("size"),a=this.particleShaderGeo.getAttribute("lifeTime");this.offset+this.count<this.PARTICLE_COUNT?(e.updateRange.offset=this.offset*e.itemSize,t.updateRange.offset=this.offset*t.itemSize,n.updateRange.offset=this.offset*n.itemSize,r.updateRange.offset=this.offset*r.itemSize,i.updateRange.offset=this.offset*i.itemSize,o.updateRange.offset=this.offset*o.itemSize,a.updateRange.offset=this.offset*a.itemSize,e.updateRange.count=this.count*e.itemSize,t.updateRange.count=this.count*t.itemSize,n.updateRange.count=this.count*n.itemSize,r.updateRange.count=this.count*r.itemSize,i.updateRange.count=this.count*i.itemSize,o.updateRange.count=this.count*o.itemSize,a.updateRange.count=this.count*a.itemSize):(e.updateRange.offset=0,t.updateRange.offset=0,n.updateRange.offset=0,r.updateRange.offset=0,i.updateRange.offset=0,o.updateRange.offset=0,a.updateRange.offset=0,e.updateRange.count=-1,t.updateRange.count=-1,n.updateRange.count=-1,r.updateRange.count=-1,i.updateRange.count=-1,o.updateRange.count=-1,a.updateRange.count=-1),e.needsUpdate=!0,t.needsUpdate=!0,n.needsUpdate=!0,r.needsUpdate=!0,i.needsUpdate=!0,o.needsUpdate=!0,a.needsUpdate=!0,this.offset=0,this.count=0}},this.dispose=function(){this.particleShaderGeo.dispose()},this.init()};Hi.prototype=Object.create(p.prototype),Hi.prototype.constructor=Hi;var Xi=function(){p.call(this)};(Xi.prototype=Object.create(p.prototype)).constructor=Xi,Xi.prototype.updateMatrixWorld=function(){var e=new s,t=new c,n=new s,r=new s,i=new c,o=new s;return function(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(null!==this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(r,i,o),this.matrix.decompose(e,t,n),this.matrixWorld.compose(r,t,o)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var s=0,c=this.children.length;s<c;s++)this.children[s].updateMatrixWorld(a)}}();function qi(){k.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Yi(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Ji(e,t,n){Yi.call(this,e,t),this.meshPerAttribute=n||1}function Qi(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function Zi(e){k.call(this),this.type="WireframeGeometry";var t,n,r,i,o,a,c,u,l,h,d=[],f=[0,0],p={},m=["a","b","c"];if(e&&e.isGeometry){var v=e.faces;for(t=0,r=v.length;t<r;t++){var g=v[t];for(n=0;n<3;n++)c=g[m[n]],u=g[m[(n+1)%3]],f[0]=Math.min(c,u),f[1]=Math.max(c,u),void 0===p[l=f[0]+","+f[1]]&&(p[l]={index1:f[0],index2:f[1]})}for(l in p)a=p[l],h=e.vertices[a.index1],d.push(h.x,h.y,h.z),h=e.vertices[a.index2],d.push(h.x,h.y,h.z)}else if(e&&e.isBufferGeometry){var y,b,x,w,_,S,M;if(h=new s,null!==e.index){for(y=e.attributes.position,b=e.index,0===(x=e.groups).length&&(x=[{start:0,count:b.count,materialIndex:0}]),i=0,o=x.length;i<o;++i)for(t=_=(w=x[i]).start,r=_+w.count;t<r;t+=3)for(n=0;n<3;n++)c=b.getX(t+n),u=b.getX(t+(n+1)%3),f[0]=Math.min(c,u),f[1]=Math.max(c,u),void 0===p[l=f[0]+","+f[1]]&&(p[l]={index1:f[0],index2:f[1]});for(l in p)a=p[l],h.fromBufferAttribute(y,a.index1),d.push(h.x,h.y,h.z),h.fromBufferAttribute(y,a.index2),d.push(h.x,h.y,h.z)}else for(t=0,r=(y=e.attributes.position).count/3;t<r;t++)for(n=0;n<3;n++)S=3*t+n,h.fromBufferAttribute(y,S),d.push(h.x,h.y,h.z),M=3*t+(n+1)%3,h.fromBufferAttribute(y,M),d.push(h.x,h.y,h.z)}this.addAttribute("position",new N(d,3))}qi.prototype=Object.assign(Object.create(k.prototype),{constructor:qi,isInstancedBufferGeometry:!0,copy:function(e){return k.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperty(Yi.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Yi.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Ji.prototype=Object.assign(Object.create(Yi.prototype),{constructor:Ji,isInstancedInterleavedBuffer:!0,copy:function(e){return Yi.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.defineProperties(Qi.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Qi.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),Zi.prototype=Object.create(k.prototype),Zi.prototype.constructor=Zi;var Ki=function(){qi.call(this),this.type="LineSegmentsGeometry";new k;this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.addAttribute("position",new N([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.addAttribute("uv",new N([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))};Ki.prototype=Object.assign(Object.create(qi.prototype),{constructor:Ki,isLineSegmentsGeometry:!0,applyMatrix:function(e){var t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==t&&(e.applyToBufferAttribute(t),e.applyToBufferAttribute(n),t.data.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},setPositions:function(e){var t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));var n=new Ji(t,6,1);return this.addAttribute("instanceStart",new Qi(n,3,0)),this.addAttribute("instanceEnd",new Qi(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},setColors:function(e){var t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));var n=new Ji(t,6,1);return this.addAttribute("instanceColorStart",new Qi(n,3,0)),this.addAttribute("instanceColorEnd",new Qi(n,3,3)),this},fromWireframeGeometry:function(e){return this.setPositions(e.attributes.position.array),this},fromEdgesGeometry:function(e){return this.setPositions(e.attributes.position.array),this},fromMesh:function(e){return this.fromWireframeGeometry(new Zi(e.geometry)),this},fromLineSegements:function(e){var t=e.geometry;return t.isGeometry?this.setPositions(t.vertices):t.isBufferGeometry&&this.setPositions(t.position.array),this},computeBoundingBox:function(){var e=new y;return function(){null===this.boundingBox&&(this.boundingBox=new y);var t=this.attributes.instanceStart,n=this.attributes.instanceEnd;void 0!==t&&void 0!==n&&(this.boundingBox.setFromBufferAttribute(t),e.setFromBufferAttribute(n),this.boundingBox.union(e))}}(),computeBoundingSphere:function(){var e=new s;return function(){null===this.boundingSphere&&(this.boundingSphere=new b),null===this.boundingBox&&this.computeBoundingBox();var t=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(void 0!==t&&void 0!==n){var r=this.boundingSphere.center;this.boundingBox.getCenter(r);for(var i=0,o=0,a=t.count;o<a;o++)e.fromBufferAttribute(t,o),i=Math.max(i,r.distanceToSquared(e)),e.fromBufferAttribute(n,o),i=Math.max(i,r.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}}(),toJSON:function(){},clone:function(){},copy:function(e){return this}}),Ci.line={linewidth:{value:1},resolution:{value:new x(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},Pi.line={uniforms:Xn.merge([Ci.common,Ci.fog,Ci.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\tvarying vec2 vUv;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\tvUv = uv;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec2 ndcStart = clipStart.xy / clipStart.w;\n\t\t\tvec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd - ndcStart;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t// perpendicular to dir\n\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\n\t\t\t// undo aspect ratio adjustment\n\t\t\tdir.x /= aspect;\n\t\t\toffset.x /= aspect;\n\n\t\t\t// sign flip\n\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t// endcaps\n\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\toffset += - dir;\n\n\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\toffset += dir;\n\n\t\t\t}\n\n\t\t\t// adjust for linewidth\n\t\t\toffset *= linewidth;\n\n\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\toffset /= resolution.y;\n\n\t\t\t// select end\n\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t// back to clip space\n\t\t\toffset *= clip.w;\n\n\t\t\tclip.xy += offset;\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\tfloat a = vUv.x;\n\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t}\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );\n\n\t\t\t#include <premultiplied_alpha_fragment>\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\n\t\t}\n\t\t"};var $i=function(e){qn.call(this,{type:"LineMaterial",uniforms:Xn.clone(Pi.line.uniforms),vertexShader:Pi.line.vertexShader,fragmentShader:Pi.line.fragmentShader}),this.dashed=!1,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(e){this.uniforms.gapSize.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}}}),this.setValues(e)};($i.prototype=Object.create(qn.prototype)).constructor=$i,$i.prototype.isLineMaterial=!0,$i.prototype.copy=function(e){return qn.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.resolution=e.resolution,this};var eo=function(e,t){fn.call(this),this.type="LineSegments2",this.geometry=void 0!==e?e:new Ki,this.material=void 0!==t?t:new $i({color:16777215*Math.random()})};eo.prototype=Object.assign(Object.create(fn.prototype),{constructor:eo,isLineSegments2:!0,computeLineDistances:function(){var e=new s,t=new s;return function(){for(var n=this.geometry,r=n.attributes.instanceStart,i=n.attributes.instanceEnd,o=new Float32Array(2*r.data.count),a=0,s=0,c=r.data.count;a<c;a++,s+=2)e.fromBufferAttribute(r,a),t.fromBufferAttribute(i,a),o[s]=0===s?0:o[s-1],o[s+1]=o[s]+e.distanceTo(t);var u=new Ji(o,2,1);return n.addAttribute("instanceDistanceStart",new Qi(u,1,0)),n.addAttribute("instanceDistanceEnd",new Qi(u,1,1)),this}}(),copy:function(e){return this}});var to=function(){Ki.call(this),this.type="LineGeometry"};to.prototype=Object.assign(Object.create(Ki.prototype),{constructor:to,isLineGeometry:!0,setPositions:function(e){for(var t=e.length-3,n=new Float32Array(2*t),r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return Ki.prototype.setPositions.call(this,n),this},setColors:function(e){for(var t=e.length-3,n=new Float32Array(2*t),r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return Ki.prototype.setColors.call(this,n),this},fromLine:function(e){var t=e.geometry;return t.isGeometry?this.setPositions(t.vertices):t.isBufferGeometry&&this.setPositions(t.position.array),this},copy:function(e){return this}});var no=function(e,t){eo.call(this),this.type="Line2",this.geometry=void 0!==e?e:new to,this.material=void 0!==t?t:new $i({color:16777215*Math.random()})};no.prototype=Object.assign(Object.create(eo.prototype),{constructor:no,isLine2:!0,copy:function(e){return this}});var ro=function(e,t){fn.call(this),this.type="Wireframe",this.geometry=void 0!==e?e:new Ki,this.material=void 0!==t?t:new $i({color:16777215*Math.random()})};ro.prototype=Object.assign(Object.create(fn.prototype),{constructor:ro,isWireframe:!0,computeLineDistances:function(){var e=new s,t=new s;return function(){for(var n=this.geometry,r=n.attributes.instanceStart,i=n.attributes.instanceEnd,o=new Float32Array(2*r.data.count),a=0,s=0,c=r.data.count;a<c;a++,s+=2)e.fromBufferAttribute(r,a),t.fromBufferAttribute(i,a),o[s]=0===s?0:o[s-1],o[s+1]=o[s]+e.distanceTo(t);var u=new Ji(o,2,1);return n.addAttribute("instanceDistanceStart",new Qi(u,1,0)),n.addAttribute("instanceDistanceEnd",new Qi(u,1,1)),this}}(),copy:function(e){return this}});var io=function(e){Ki.call(this),this.type="WireframeGeometry2",this.fromWireframeGeometry(new Zi(e))};function oo(){p.call(this),this.type="Group"}io.prototype=Object.assign(Object.create(Ki.prototype),{constructor:io,isWireframeGeometry2:!0,copy:function(e){return this}}),oo.prototype=Object.assign(Object.create(p.prototype),{constructor:oo,isGroup:!0});var ao=function(e){this.manager=void 0!==e?e:cr,this.availableExtensions=[]};ao.prototype={constructor:ao,load:function(e,t,n,r){var i=this,o=new lr(i.manager);o.setResponseType("arraybuffer"),o.load(e,function(e){t(i.parse(e))},n,r)},parse:function(e){var t=this;function n(e){var t={type:e.getAttribute("type")},n=e.getAttribute("id");n&&(t.id=n);var r=e.getAttribute("pid");r&&(t.pid=r);var i=e.getAttribute("pindex");i&&(t.pindex=i);var o=e.getAttribute("thumbnail");o&&(t.thumbnail=o);var a=e.getAttribute("partnumber");a&&(t.partnumber=a);var s=e.getAttribute("name");s&&(t.name=s);var c=e.querySelector("mesh");c&&(t.mesh=function(e,t){for(var n={},r=[],i=e.querySelectorAll("vertices vertex"),o=0;o<i.length;o++){var a=i[o],s=a.getAttribute("x"),c=a.getAttribute("y"),u=a.getAttribute("z");r.push(parseFloat(s),parseFloat(c),parseFloat(u))}for(n.vertices=new Float32Array(r.length),o=0;o<r.length;o++)n.vertices[o]=r[o];var l=[],h=[],d=e.querySelectorAll("triangles triangle");for(o=0;o<d.length;o++){var f=d[o],p=f.getAttribute("v1"),m=f.getAttribute("v2"),v=f.getAttribute("v3"),g=f.getAttribute("p1"),y=f.getAttribute("p2"),b=f.getAttribute("p3"),x=f.getAttribute("pid");h.push(parseInt(p,10),parseInt(m,10),parseInt(v,10));var w={};g&&(w.p1=parseInt(g,10)),y&&(w.p2=parseInt(y,10)),b&&(w.p3=parseInt(b,10)),x&&(w.pid=x),0<Object.keys(w).length&&l.push(w)}for(n.triangleProperties=l,n.triangles=new Uint32Array(h.length),o=0;o<h.length;o++)n.triangles[o]=h[o];return n}(c));var u=e.querySelector("components");return u&&(t.components=void 0),t}function r(e){var t={unit:e.getAttribute("unit")||"millimeter"},r=e.querySelectorAll("metadata");r&&(t.metadata=function(e){for(var t={},n=0;n<e.length;n++){var r=e[n],i=r.getAttribute("name");0<=["Title","Designer","Description","Copyright","LicenseTerms","Rating","CreationDate","ModificationDate"].indexOf(i)&&(t[i]=r.textContent)}return t}(r));var i=e.querySelector("resources");i&&(t.resources=function(e){var t={},r=e.querySelector("basematerials");r&&(t.basematerial=void 0),t.object={};for(var i=e.querySelectorAll("object"),o=0;o<i.length;o++){var a=n(i[o]);t.object[a.id]=a}return t}(i));var o=e.querySelector("build");return o&&(t.build=function(e){for(var t=[],n=e.querySelectorAll("item"),r=0;r<n.length;r++){var i=n[r],o={objectid:i.getAttribute("objectid")},s=i.getAttribute("transform");if(s){var c=[];s.split(" ").forEach(function(e){c.push(parseFloat(e))});var u=new a;o.transform=u.set(c[0],c[3],c[6],c[9],c[1],c[4],c[7],c[10],c[2],c[5],c[8],c[11],0,0,0,1)}t.push(o)}return t}(o)),t}function i(e,t){var n=new k;n.setIndex(new M(e.triangles,1)),n.addAttribute("position",new M(e.vertices,3)),e.colors&&n.addAttribute("color",new M(e.colors,3)),n.computeBoundingSphere();var r={flatShading:!0};return e.colors&&0<e.colors.length?r.vertexColors=K:r.color=11184895,new fn(n,new vr(r))}function o(e,n,r,i){if(e){for(var o=[],a=Object.keys(e),s=0;s<a.length;s++)for(var c=a[s],u=0;u<t.availableExtensions.length;u++){(l=t.availableExtensions[u]).ns===c&&o.push(l)}for(s=0;s<o.length;s++){var l;(l=o[s]).apply(r,e[l.ns],n)}}}var s=function(e){var t,n,i=null,o=null,a=[],s=[],c={},u={};try{i=new JSZip(e)}catch(e){if(e instanceof ReferenceError)return console.error("ThreeMFLoader: jszip missing and file is compressed."),null}for(o in i.files)o.match(/\.rels$/)?t=o:o.match(/^3D\/.*\.model$/)?a.push(o):o.match(/^3D\/Metadata\/.*\.xml$/)||(o.match(/^3D\/Textures\/.*/)?s.push(o):o.match(/^3D\/Other\/.*/));var l=new Uint8Array(i.file(t).asArrayBuffer());n=function(e){var t=(new DOMParser).parseFromString(e,"application/xml").querySelector("Relationship"),n=t.getAttribute("Target"),r=t.getAttribute("Id"),i=t.getAttribute("Type");return{target:n,id:r,type:i}}(Cr.decodeText(l));for(var h=0;h<a.length;h++){var d=a[h],f=new Uint8Array(i.file(d).asArrayBuffer()),p=Cr.decodeText(f),m=(new DOMParser).parseFromString(p,"application/xml");"model"!==m.documentElement.nodeName.toLowerCase()&&console.error("ThreeMFLoader: Error loading 3MF - no 3MF document found: ",d);var v=m.querySelector("model"),g={};for(h=0;h<v.attributes.length;h++){var y=v.attributes[h];y.name.match(/^xmlns:(.+)$/)&&(g[y.value]=RegExp.$1)}var b=r(v);b.xml=v,0<Object.keys(g).length&&(b.extensions=g),c[d]=b}for(h=0;h<s.length;h++){var x=s[h];u[x]=i.file(x).asBinary()}return{rels:n,model:c,printTicket:{},texture:u,other:{}}}(e);return function(e,t,n){for(var r=new oo,i=n.model[t.target.substring(1)].build,o=0;o<i.length;o++){var a=i[o],s=e[a.objectid];a.transform&&s.geometry.applyMatrix(a.transform),r.add(s)}return r}(function(e){for(var t=e.model,n={},r=Object.keys(t),a=0;a<r.length;a++)for(var s=t[r[a]],c=s.xml,u=s.extensions,l=Object.keys(s.resources.object),h=0;h<l.length;h++){var d=l[h],f=s.resources.object[d].mesh;o(u,f,c),n[d]=i(f)}return n}(s),s.rels,s)},addExtension:function(e){this.availableExtensions.push(e)}};var so=function(e){this.manager=void 0!==e?e:cr};so.prototype={constructor:so,load:function(e,t,n,r){var i=this,o=new lr(i.manager);o.setResponseType("arraybuffer"),o.load(e,function(e){t(i.parse(e))},n,r)},parse:function(e){function t(e){for(var t="AMF Material",r=e.attributes.id.textContent,i={r:1,g:1,b:1,a:1},o=null,a=0;a<e.childNodes.length;a++){var s=e.childNodes[a];"metadata"===s.nodeName&&void 0!==s.attributes.type?"name"===s.attributes.type.value&&(t=s.textContent):"color"===s.nodeName&&(i=n(s))}return o=new vr({flatShading:!0,color:new v(i.r,i.g,i.b),name:t}),1!==i.a&&(o.transparent=!0,o.opacity=i.a),{id:r,material:o}}function n(e){for(var t={r:1,g:1,b:1,a:1},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];"r"===r.nodeName?t.r=r.textContent:"g"===r.nodeName?t.g=r.textContent:"b"===r.nodeName?t.b=r.textContent:"a"===r.nodeName&&(t.a=r.textContent)}return t}function r(e){var t={name:"",triangles:[],materialid:null},n=e.firstElementChild;for(void 0!==e.attributes.materialid&&(t.materialId=e.attributes.materialid.nodeValue);n;){if("metadata"===n.nodeName)void 0!==n.attributes.type&&"name"===n.attributes.type.value&&(t.name=n.textContent);else if("triangle"===n.nodeName){var r=n.getElementsByTagName("v1")[0].textContent,i=n.getElementsByTagName("v2")[0].textContent,o=n.getElementsByTagName("v3")[0].textContent;t.triangles.push(r,i,o)}n=n.nextElementSibling}return t}function i(e){for(var t=[],n=[],r=e.firstElementChild;r;){if("vertex"===r.nodeName)for(var i=r.firstElementChild;i;){if("coordinates"===i.nodeName){var o=i.getElementsByTagName("x")[0].textContent,a=i.getElementsByTagName("y")[0].textContent,s=i.getElementsByTagName("z")[0].textContent;t.push(o,a,s)}else if("normal"===i.nodeName){var c=i.getElementsByTagName("nx")[0].textContent,u=i.getElementsByTagName("ny")[0].textContent,l=i.getElementsByTagName("nz")[0].textContent;n.push(c,u,l)}i=i.nextElementSibling}r=r.nextElementSibling}return{vertices:t,normals:n}}function o(e){for(var t=e.attributes.id.textContent,o={name:"amfobject",meshes:[]},a=null,s=e.firstElementChild;s;){if("metadata"===s.nodeName)void 0!==s.attributes.type&&"name"===s.attributes.type.value&&(o.name=s.textContent);else if("color"===s.nodeName)a=n(s);else if("mesh"===s.nodeName){for(var c=s.firstElementChild,u={vertices:[],normals:[],volumes:[],color:a};c;){if("vertices"===c.nodeName){var l=i(c);u.normals=u.normals.concat(l.normals),u.vertices=u.vertices.concat(l.vertices)}else"volume"===c.nodeName&&u.volumes.push(r(c));c=c.nextElementSibling}o.meshes.push(u)}s=s.nextElementSibling}return{id:t,obj:o}}var a,s,c=function(e){var t=new DataView(e);if("PK"===String.fromCharCode(t.getUint8(0),t.getUint8(1))){var n=null,r=null;console.log("AMFLoader: Loading Zip");try{n=new JSZip(e)}catch(e){if(e instanceof ReferenceError)return console.log("AMFLoader: jszip missing and file is compressed."),null}for(r in n.files)if(".amf"===r.toLowerCase().substr(-4))break;console.log("AMFLoader: Trying to load file asset: "+r),t=new DataView(n.file(r).asArrayBuffer())}var i=Cr.decodeText(t),o=(new DOMParser).parseFromString(i,"application/xml");return"amf"!==o.documentElement.nodeName.toLowerCase()?(console.log("AMFLoader: Error loading AMF - no AMF document found."),null):o}(e),u="",l="",h=function(e){var t=1,n="millimeter";void 0!==e.documentElement.attributes.unit&&(n=e.documentElement.attributes.unit.value.toLowerCase());var r={millimeter:1,inch:25.4,feet:304.8,meter:1e3,micron:.001};return void 0!==r[n]&&(t=r[n]),console.log("AMFLoader: Unit scale: "+t),t}(c),d={},f={},p=c.documentElement.childNodes;for(a=0;a<p.length;a++){var m=p[a];if("metadata"===m.nodeName)void 0!==m.attributes.type&&("name"===m.attributes.type.value?u=m.textContent:"author"===m.attributes.type.value&&(l=m.textContent));else if("material"===m.nodeName){var g=t(m);d[g.id]=g.material}else if("object"===m.nodeName){var y=o(m);f[y.id]=y.obj}}var b=new oo,x=new vr({color:11184895,flatShading:!0});for(var w in b.name=u,b.userData.author=l,b.userData.loader="AMF",f){var _=f[w],S=_.meshes,M=new oo;for(M.name=_.name||"",a=0;a<S.length;a++){var T=x,A=S[a],E=new N(A.vertices,3),C=null;if(A.normals.length&&(C=new N(A.normals,3)),A.color){var P=A.color;(T=x.clone()).color=new v(P.r,P.g,P.b),1!==P.a&&(T.transparent=!0,T.opacity=P.a)}var L=A.volumes;for(s=0;s<L.length;s++){var O=L[s],R=new k,I=T;R.setIndex(O.triangles),R.addAttribute("position",E.clone()),C&&R.addAttribute("normal",C.clone()),void 0!==d[O.materialId]&&(I=d[O.materialId]),R.scale(h,h,h),M.add(new fn(R,I.clone()))}}b.add(M)}return b}};var co=function(e){this.manager=void 0!==e?e:cr};function uo(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new a)}}function lo(e,t){fn.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new a,this.bindMatrixInverse=new a;var n=new uo(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}co.prototype={constructor:co,crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=Cr.extractUrlBase(e);new lr(this.manager).load(e,function(e){var n=JSON.parse(e),a=n.__metadata__;if(void 0!==a){if("assimp2json"!==a.format)return void r("AssimpJSONLoader: Not an assimp2json scene.");if(a.version<100&&a.version>=200)return void r("AssimpJSONLoader: Unsupported assimp2json file format version.")}t(i.parse(n,o))},n,r)},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){function n(e,t){for(var n=new Array(e.length),r=0;r<e.length;++r)n[r]=t.call(this,e[r]);return n}var r=new Ar(this.manager);r.setPath(t).setCrossOrigin(this.crossOrigin);var i=n(e.meshes,function(e){var t,n,r,i=new k,o=[],a=e.vertices||[],s=e.normals||[],c=e.texturecoords||[],u=e.colors||[];for(c=c[0]||[],t=0,n=e.faces.length;t<n;t++)r=e.faces[t],o.push(r[0],r[1],r[2]);return i.setIndex(o),i.addAttribute("position",new N(a,3)),s.length>0&&i.addAttribute("normal",new N(s,3)),c.length>0&&i.addAttribute("uv",new N(c,2)),u.length>0&&i.addAttribute("color",new N(u,3)),i.computeBoundingSphere(),i}),o=n(e.materials,function(e){var t=new vr;for(var n in e.properties){var i=e.properties[n],o=i.key,a=i.value;switch(o){case"$tex.file":var s=i.semantic;if(1===s||2===s||5===s||6===s){var c;switch(s){case 1:c="map";break;case 2:c="specularMap";break;case 5:c="bumpMap";break;case 6:c="normalMap"}var u=r.load(a);u.wrapS=u.wrapT=He,t[c]=u}break;case"?mat.name":t.name=a;break;case"$clr.diffuse":t.color.fromArray(a);break;case"$clr.specular":t.specular.fromArray(a);break;case"$clr.emissive":t.emissive.fromArray(a);break;case"$mat.shininess":t.shininess=a;break;case"$mat.shadingm":t.flatShading=1===a;break;case"$mat.opacity":a<1&&(t.opacity=a,t.transparent=!0)}}return t});return function e(t,n,r,i){var o,s,c=new p;for(c.name=n.name||"",c.matrix=(new a).fromArray(n.transformation).transpose(),c.matrix.decompose(c.position,c.quaternion,c.scale),o=0;n.meshes&&o<n.meshes.length;o++)s=n.meshes[o],c.add(new fn(r[s],i[t.meshes[s].materialindex]));for(o=0;n.children&&o<n.children.length;o++)c.add(e(t,n.children[o],r,i));return c}(e,e.rootnode,i,o)}},Object.assign(uo.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new a;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new a,t=new a;return function(){for(var n=this.bones,r=this.boneInverses,i=this.boneMatrices,o=this.boneTexture,a=0,s=n.length;a<s;a++){var c=n[a]?n[a].matrixWorld:t;e.multiplyMatrices(c,r[a]),e.toArray(i,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new uo(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),lo.prototype=Object.assign(Object.create(fn.prototype),{constructor:lo,isSkinnedMesh:!0,initBones:function(){var e,t,n,r,i=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,r=this.geometry.bones.length;n<r;n++)t=this.geometry.bones[n],e=new Fn,i.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,r=this.geometry.bones.length;n<r;n++)-1!==(t=this.geometry.bones[n]).parent&&null!==t.parent&&void 0!==i[t.parent]?i[t.parent].add(i[n]):this.add(i[n])}return this.updateMatrixWorld(!0),i},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];(e=1/n.manhattanLength())!==1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new S,i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++)r.x=i.getX(t),r.y=i.getY(t),r.z=i.getZ(t),r.w=i.getW(t),(e=1/r.manhattanLength())!==1/0?r.multiplyScalar(e):r.set(1,0,0,0),i.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){fn.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var ho=function(e){this.manager=void 0!==e?e:cr};ho.prototype={constructor:ho,crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=Cr.extractUrlBase(e),a=new lr(this.manager);a.setResponseType("arraybuffer"),a.load(e,function(e){t(i.parse(e,o))},n,r)},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=new Ar(this.manager);n.setPath(t).setCrossOrigin(this.crossOrigin);var r={KeyFrame:function(e,t){this.time=e,this.matrix=t.clone(),this.position=new s,this.quaternion=new c,this.scale=new s(1,1,1),this.matrix.decompose(this.position,this.quaternion,this.scale),this.clone=function(){return new r.KeyFrame(this.time,this.matrix)},this.lerp=function(e,t){var n=(t-=this.time)/(e.time-this.time),i=1-n,o=this.position,a=this.quaternion,s=e.position,c=e.quaternion;return r.KeyFrame.tempAniPos.x=o.x*i+s.x*n,r.KeyFrame.tempAniPos.y=o.y*i+s.y*n,r.KeyFrame.tempAniPos.z=o.z*i+s.z*n,r.KeyFrame.tempAniQuat.set(a.x,a.y,a.z,a.w),r.KeyFrame.tempAniQuat.slerp(c,n),r.KeyFrame.tempAniMatrix.compose(r.KeyFrame.tempAniPos,r.KeyFrame.tempAniQuat,r.KeyFrame.tempAniScale)}}};r.KeyFrame.tempAniPos=new s,r.KeyFrame.tempAniQuat=new c,r.KeyFrame.tempAniScale=new s(1,1,1),r.KeyFrame.tempAniMatrix=new a,r.KeyFrameTrack=function(){this.keys=[],this.target=null,this.time=0,this.length=0,this._accelTable={},this.fps=20,this.addKey=function(e){this.keys.push(e)},this.init=function(){if(this.sortKeys(),this.keys.length>0?this.length=this.keys[this.keys.length-1].time:this.length=0,this.fps)for(var e=0;e<this.length*this.fps;e++)for(var t=0;t<this.keys.length;t++){if(this.keys[t].time==e){this._accelTable[e]=t;break}if(this.keys[t].time<e/this.fps&&this.keys[t+1]&&this.keys[t+1].time>=e/this.fps){this._accelTable[e]=t;break}}},this.parseFromThree=function(e){var t=e.fps;this.target=e.node;for(var n=e.hierarchy[0].keys,i=0;i<n.length;i++)this.addKey(new r.KeyFrame(i/t||n[i].time,n[i].targets[0].data));this.init()},this.parseFromCollada=function(e){for(var t=e.keys,n=this.fps,i=0;i<t.length;i++)this.addKey(new r.KeyFrame(i/n||t[i].time,t[i].matrix));this.init()},this.sortKeys=function(){this.keys.sort(this.keySortFunc)},this.keySortFunc=function(e,t){return e.time-t.time},this.clone=function(){var e=new r.KeyFrameTrack;e.target=this.target,e.time=this.time,e.length=this.length;for(var t=0;t<this.keys.length;t++)e.addKey(this.keys[t].clone());return e.init(),e},this.reTarget=function(e,t){t||(t=r.TrackTargetNodeNameCompare),this.target=t(e,this.target)},this.keySearchAccel=function(e){return e*=this.fps,e=Math.floor(e),this._accelTable[e]||0},this.setTime=function(e){e=Math.abs(e),this.length&&(e=e%this.length+.05);for(var t=null,n=null,r=this.keySearchAccel(e);r<this.keys.length;r++){if(this.keys[r].time==e){t=this.keys[r],n=this.keys[r];break}if(this.keys[r].time<e&&this.keys[r+1]&&this.keys[r+1].time>e){t=this.keys[r],n=this.keys[r+1];break}if(this.keys[r].time<e&&r==this.keys.length-1){t=this.keys[r],(n=this.keys[0].clone()).time+=this.length+.05;break}}return t&&n&&t!==n?(this.target.matrixAutoUpdate=!1,this.target.matrix.copy(t.lerp(n,e)),void(this.target.matrixWorldNeedsUpdate=!0)):t&&n&&t==n?(this.target.matrixAutoUpdate=!1,this.target.matrix.copy(t.matrix),void(this.target.matrixWorldNeedsUpdate=!0)):void 0}},r.TrackTargetNodeNameCompare=function(e,t){return function e(t,n){if(t.name==n)return t;for(var r=0;r<t.children.length;r++){var i=e(t.children[r],n);if(i)return i}return null}(e,t.name)},r.Animation=function(){this.tracks=[],this.length=0,this.addTrack=function(e){this.tracks.push(e),this.length=Math.max(e.length,this.length)},this.setTime=function(e){this.time=e;for(var t=0;t<this.tracks.length;t++)this.tracks[t].setTime(e)},this.clone=function(e,t){t||(t=r.TrackTargetNodeNameCompare);var n=new r.Animation;n.target=e;for(var i=0;i<this.tracks.length;i++){var o=this.tracks[i].clone();o.reTarget(e,t),n.addTrack(o)}return n}};var i=4660,o=4661,u=4662,l=4663,h=4664,d=4665,f=4666,m=4667,g=4668,y=4669,b=4670,x=1,w=2,_=4,S=256,T=65536,A=1,E=4,C=1,P=3,L=1,O=6,N=8,R=10,I=4;function D(e){return S<<e}function F(e){return T<<e}function U(e,t){var n=new Fn;for(var r in n.matrix.copy(e.matrix),n.matrixWorld.copy(e.matrixWorld),n.position.copy(e.position),n.quaternion.copy(e.quaternion),n.scale.copy(e.scale),t.nodeCount++,n.name="bone_"+e.name+t.nodeCount.toString(),t.nodeToBoneMap[e.name]||(t.nodeToBoneMap[e.name]=[]),t.nodeToBoneMap[e.name].push(n),e.children){var i=U(e.children[r],t);i&&n.add(i)}return n}function B(e,t){for(var n=[],r=0;r<e.length;r++)n.push({i:e[r],w:t[r]});for(n.sort(function(e,t){return t.w-e.w});n.length<4;)n.push({i:0,w:0});n.length>4&&(n.length=4);var i=0;for(r=0;r<4;r++)i+=n[r].w*n[r].w;i=Math.sqrt(i);for(r=0;r<4;r++)n[r].w=n[r].w/i,e[r]=n[r].i,t[r]=n[r].w}function z(e,t){if(0==e.name.indexOf("bone_"+t))return e;for(var n in e.children){var r=z(e.children[n],t);if(r)return r}}function j(){this.mPrimitiveTypes=0,this.mNumVertices=0,this.mNumFaces=0,this.mNumBones=0,this.mMaterialIndex=0,this.mVertices=[],this.mNormals=[],this.mTangents=[],this.mBitangents=[],this.mColors=[[]],this.mTextureCoords=[[]],this.mFaces=[],this.mBones=[],this.hookupSkeletons=function(e,t){if(0!=this.mBones.length){for(var n=[],r=[],i=e.findNode(this.mBones[0].mName);i.mParent&&i.mParent.isBone;)i=i.mParent;var o=U(u=i.toTHREE(e),e);this.threeNode.add(o);for(var s=0;s<this.mBones.length;s++){if(l=z(o,this.mBones[s].mName)){var c=l;n.push(c),r.push(this.mBones[s].mOffsetMatrix.toTHREE())}else{if(!(i=e.findNode(this.mBones[s].mName)))return;var u;(u=i.toTHREE(e)).parent,o=U(u,e);this.threeNode.add(o);var l;c=l=z(o,this.mBones[s].mName);n.push(c),r.push(this.mBones[s].mOffsetMatrix.toTHREE())}}var h=new uo(n,r);this.threeNode.bind(h,new a),this.threeNode.material.skinning=!0}},this.toTHREE=function(e){if(this.threeNode)return this.threeNode;var t,n,r=new k;if(t=e.mMaterials[this.mMaterialIndex]?e.mMaterials[this.mMaterialIndex].toTHREE(e):new pr,r.setIndex(new M(new Uint32Array(this.mIndexArray),1)),r.addAttribute("position",new M(this.mVertexBuffer,3)),this.mNormalBuffer&&this.mNormalBuffer.length>0&&r.addAttribute("normal",new M(this.mNormalBuffer,3)),this.mColorBuffer&&this.mColorBuffer.length>0&&r.addAttribute("color",new M(this.mColorBuffer,4)),this.mTexCoordsBuffers[0]&&this.mTexCoordsBuffers[0].length>0&&r.addAttribute("uv",new M(new Float32Array(this.mTexCoordsBuffers[0]),2)),this.mTexCoordsBuffers[1]&&this.mTexCoordsBuffers[1].length>0&&r.addAttribute("uv1",new M(new Float32Array(this.mTexCoordsBuffers[1]),2)),this.mTangentBuffer&&this.mTangentBuffer.length>0&&r.addAttribute("tangents",new M(this.mTangentBuffer,3)),this.mBitangentBuffer&&this.mBitangentBuffer.length>0&&r.addAttribute("bitangents",new M(this.mBitangentBuffer,3)),this.mBones.length>0){for(var i=[],o=[],a=0;a<this.mBones.length;a++)for(var s=0;s<this.mBones[a].mWeights.length;s++){var c=this.mBones[a].mWeights[s];c&&(i[c.mVertexId]||(i[c.mVertexId]=[]),o[c.mVertexId]||(o[c.mVertexId]=[]),i[c.mVertexId].push(c.mWeight),o[c.mVertexId].push(parseInt(a)))}for(var a in o)B(o[a],i[a]);var u=[],l=[];for(a=0;a<i.length;a++)for(s=0;s<4;s++)i[a]&&o[a]?(u.push(i[a][s]),l.push(o[a][s])):(u.push(0),l.push(0));r.addAttribute("skinWeight",new M(new Float32Array(u),I)),r.addAttribute("skinIndex",new M(new Float32Array(l),I))}return 0==this.mBones.length&&(n=new fn(r,t)),this.mBones.length>0&&(n=new lo(r,t)),this.threeNode=n,n}}function V(){this.mNumIndices=0,this.mIndices=[]}function G(){this.data=[],this.toString=function(){var e="";return this.data.forEach(function(t){e+=String.fromCharCode(t)}),e.replace(/[^\x20-\x7E]+/g,"")}}function W(){this.mName="",this.mTransformation=[],this.mNumChildren=0,this.mNumMeshes=0,this.mMeshes=[],this.mChildren=[],this.toTHREE=function(e){if(this.threeNode)return this.threeNode;var t=new p;t.name=this.mName,t.matrix=this.mTransformation.toTHREE();for(var n=0;n<this.mChildren.length;n++)t.add(this.mChildren[n].toTHREE(e));for(n=0;n<this.mMeshes.length;n++)t.add(e.mMeshes[this.mMeshes[n]].toTHREE(e));return this.threeNode=t,t.matrix.decompose(t.position,t.quaternion,t.scale),t}}function H(){this.mName="",this.mNumWeights=0,this.mOffsetMatrix=0}function X(){this.mKey="",this.mSemantic=0,this.mIndex=0,this.mData=[],this.mDataLength=0,this.mType=0,this.dataAsColor=function(){var e=new Uint8Array(this.mData).buffer,t=new DataView(e);return new v(t.getFloat32(0,!0),t.getFloat32(4,!0),t.getFloat32(8,!0))},this.dataAsFloat=function(){var e=new Uint8Array(this.mData).buffer;return new DataView(e).getFloat32(0,!0)},this.dataAsBool=function(){var e=new Uint8Array(this.mData).buffer;return!!new DataView(e).getFloat32(0,!0)},this.dataAsString=function(){var e=new G;return e.data=this.mData,e.toString()},this.dataAsMap=function(){var e=new G;e.data=this.mData;var t=e.toString();return-1!=(t=t.replace(/\\/g,"/")).indexOf("/")&&(t=t.substr(t.lastIndexOf("/")+1)),n.load(t)}}var q={"?mat.name":"name","$mat.shadingm":"shading","$mat.twosided":"twoSided","$mat.wireframe":"wireframe","$clr.ambient":"ambient","$clr.diffuse":"color","$clr.specular":"specular","$clr.emissive":"emissive","$clr.transparent":"transparent","$clr.reflective":"reflect","$mat.shininess":"shininess","$mat.reflectivity":"reflectivity","$mat.refracti":"refraction","$tex.file":"map"},Y={"?mat.name":"string","$mat.shadingm":"bool","$mat.twosided":"bool","$mat.wireframe":"bool","$clr.ambient":"color","$clr.diffuse":"color","$clr.specular":"color","$clr.emissive":"color","$clr.transparent":"color","$clr.reflective":"color","$mat.shininess":"float","$mat.reflectivity":"float","$mat.refracti":"float","$tex.file":"map"};function J(){this.mNumAllocated=0,this.mNumProperties=0,this.mProperties=[],this.toTHREE=function(e){this.mProperties[0].dataAsString();for(var t=new vr,n=0;n<this.mProperties.length;n++)if("float"==Y[this.mProperties[n].mKey]&&(t[q[this.mProperties[n].mKey]]=this.mProperties[n].dataAsFloat()),"color"==Y[this.mProperties[n].mKey]&&(t[q[this.mProperties[n].mKey]]=this.mProperties[n].dataAsColor()),"bool"==Y[this.mProperties[n].mKey]&&(t[q[this.mProperties[n].mKey]]=this.mProperties[n].dataAsBool()),"string"==Y[this.mProperties[n].mKey]&&(t[q[this.mProperties[n].mKey]]=this.mProperties[n].dataAsString()),"map"==Y[this.mProperties[n].mKey]){var r=this.mProperties[n];r.mSemantic==L&&(t.map=this.mProperties[n].dataAsMap()),r.mSemantic==O&&(t.normalMap=this.mProperties[n].dataAsMap()),r.mSemantic==R&&(t.lightMap=this.mProperties[n].dataAsMap()),r.mSemantic==N&&(t.alphaMap=this.mProperties[n].dataAsMap())}return t.ambient.r=.53,t.ambient.g=.53,t.ambient.b=.53,t.color.r=1,t.color.g=1,t.color.b=1,t}}function Q(e,t,n){var r=new s,i=1-n;return r.x=e.x*n+t.x*i,r.y=e.y*n+t.y*i,r.z=e.z*n+t.z*i,r}function Z(e,t,n){return e.clone().slerp(t,1-n)}function K(e,t,n,r){if(1==e.length)return e[0].mValue.toTHREE();for(var i=1/0,o=null,a=null,s=0;s<e.length;s++){var c=Math.abs(e[s].mTime-t);c<i&&e[s].mTime<=t&&(i=c,o=e[s],a=e[s+1])}if(o){if(a){var u=a.mTime-o.mTime,l=(o.mTime-t)/u;return r(o.mValue.toTHREE(),a.mValue.toTHREE(),l)}(a=e[0].clone()).mTime+=n;u=a.mTime-o.mTime,l=(o.mTime-t)/u;return r(o.mValue.toTHREE(),a.mValue.toTHREE(),l)}return null}function $(){this.mNodeName="",this.mNumPositionKeys=0,this.mNumRotationKeys=0,this.mNumScalingKeys=0,this.mPositionKeys=[],this.mRotationKeys=[],this.mScalingKeys=[],this.mPreState="",this.mPostState="",this.init=function(e){function t(t){t.mTime/=e}e||(e=1),this.mPositionKeys.forEach(t),this.mRotationKeys.forEach(t),this.mScalingKeys.forEach(t)},this.sortKeys=function(){function e(e,t){return e.mTime-t.mTime}this.mPositionKeys.sort(e),this.mRotationKeys.sort(e),this.mScalingKeys.sort(e)},this.getLength=function(){return Math.max(Math.max.apply(null,this.mPositionKeys.map(function(e){return e.mTime})),Math.max.apply(null,this.mRotationKeys.map(function(e){return e.mTime})),Math.max.apply(null,this.mScalingKeys.map(function(e){return e.mTime})))},this.toTHREE=function(e,t){this.sortKeys();for(var n=this.getLength(),i=new r.KeyFrameTrack,o=0;o<n;o+=.05){var s=new a,c=o,u=K(this.mPositionKeys,c,n,Q),l=K(this.mScalingKeys,c,n,Q),h=K(this.mRotationKeys,c,n,Z);s.compose(u,h,l);var d=new r.KeyFrame(c,s);i.addKey(d)}i.target=e.findNode(this.mNodeName).toTHREE();var f=[i];if(e.nodeToBoneMap[this.mNodeName])for(o=0;o<e.nodeToBoneMap[this.mNodeName].length;o++){var p=i.clone();p.target=e.nodeToBoneMap[this.mNodeName][o],f.push(p)}return f}}function ee(){this.mName="",this.mDuration=0,this.mTicksPerSecond=0,this.mNumChannels=0,this.mChannels=[],this.toTHREE=function(e){var t=new r.Animation;for(var n in this.mChannels){this.mChannels[n].init(this.mTicksPerSecond);var i=this.mChannels[n].toTHREE(e);for(var o in i)i[o].init(),t.addTrack(i[o])}return t.length=Math.max.apply(null,t.tracks.map(function(e){return e.length})),t}}function te(){this.mWidth=0,this.mHeight=0,this.texAchFormatHint=[],this.pcData=[]}function ne(){this.mName="",this.mType=0,this.mAttenuationConstant=0,this.mAttenuationLinear=0,this.mAttenuationQuadratic=0,this.mAngleInnerCone=0,this.mAngleOuterCone=0,this.mColorDiffuse=null,this.mColorSpecular=null,this.mColorAmbient=null}function re(){this.mName="",this.mPosition=null,this.mLookAt=null,this.mUp=null,this.mHorizontalFOV=0,this.mClipPlaneNear=0,this.mClipPlaneFar=0,this.mAspect=0}var ie=!0;function oe(e){var t=e.getFloat32(e.readOffset,ie);return e.readOffset+=4,t}function ae(e){var t=e.getFloat64(e.readOffset,ie);return e.readOffset+=8,t}function se(e){var t=e.getUint8(e.readOffset);return e.readOffset+=1,t}function ce(e){var t=e.getUint16(e.readOffset,ie);return e.readOffset+=2,t}function ue(e){var t=e.getUint32(e.readOffset,ie);return e.readOffset+=4,t}function le(e){var t=e.getUint32(e.readOffset,ie);return e.readOffset+=4,t}function he(e){var t=new function(){this.x=0,this.y=0,this.z=0,this.toTHREE=function(){return new s(this.x,this.y,this.z)}};return t.x=oe(e),t.y=oe(e),t.z=oe(e),t}function de(e){var t=new function(){this.r=0,this.g=0,this.b=0,this.a=0,this.toTHREE=function(){return new v(this.r,this.g,this.b,1)}};return t.r=oe(e),t.g=oe(e),t.b=oe(e),t}function fe(e){var t=new function(){this.x=0,this.y=0,this.z=0,this.w=0,this.toTHREE=function(){return new c(this.x,this.y,this.z,this.w)}};return t.w=oe(e),t.x=oe(e),t.y=oe(e),t.z=oe(e),t}function pe(e){var t=new G,n=ue(e);return e.ReadBytes(t.data,1,n),t.toString()}function me(e){var t=new function(){this.mVertexId=0,this.mWeight=0};return t.mVertexId=ue(e),t.mWeight=oe(e),t}function ve(e){for(var t=new function(){this.elements=[[],[],[],[]],this.toTHREE=function(){for(var e=new a,t=0;t<4;++t)for(var n=0;n<4;++n)e.elements[4*t+n]=this.elements[n][t];return e}},n=0;n<4;++n)for(var r=0;r<4;++r)t.elements[n][r]=oe(e);return t}function ge(e){var t=new function(){this.mTime=0,this.mValue=null};return t.mTime=ae(e),t.mValue=he(e),t}function ye(e){var t=new function(){this.mTime=0,this.mValue=null};return t.mTime=ae(e),t.mValue=fe(e),t}function be(e,t,n){for(var r=0;r<n;r++)t[r]=ge(e)}function xe(e,t,n){return e.Seek(sizeof(t)*n,Ie)}function we(e){if(!e)throw"asset failed"}function _e(e,t){return we(le(e)==f),le(e),t.mName=pe(e),t.mNumWeights=ue(e),t.mOffsetMatrix=ve(e),Ne?xe(e,t.mWeights,t.mNumWeights):(t.mWeights=[],function(e,t,n){for(var r=0;r<n;r++)t[r]=me(e)}(e,t.mWeights,t.mNumWeights)),t}function Se(e,t){we(le(e)==l),le(e),t.mPrimitiveTypes=ue(e),t.mNumVertices=ue(e),t.mNumFaces=ue(e),t.mNumBones=ue(e),t.mMaterialIndex=ue(e),t.mNumUVComponents=[];var n=ue(e);n&x&&(Ne?xe(e,t.mVertices,t.mNumVertices):(t.mVertices=[],t.mVertexBuffer=e.subArray32(e.readOffset,e.readOffset+3*t.mNumVertices*4),e.Seek(3*t.mNumVertices*4,Ie))),n&w&&(Ne?xe(e,t.mNormals,t.mNumVertices):(t.mNormals=[],t.mNormalBuffer=e.subArray32(e.readOffset,e.readOffset+3*t.mNumVertices*4),e.Seek(3*t.mNumVertices*4,Ie))),n&_&&(Ne?(xe(e,t.mTangents,t.mNumVertices),xe(e,t.mBitangents,t.mNumVertices)):(t.mTangents=[],t.mTangentBuffer=e.subArray32(e.readOffset,e.readOffset+3*t.mNumVertices*4),e.Seek(3*t.mNumVertices*4,Ie),t.mBitangents=[],t.mBitangentBuffer=e.subArray32(e.readOffset,e.readOffset+3*t.mNumVertices*4),e.Seek(3*t.mNumVertices*4,Ie)));for(var r=0;r<A&&n&F(r);++r)Ne?xe(e,t.mColors[r],t.mNumVertices):(t.mColors[r]=[],t.mColorBuffer=e.subArray32(e.readOffset,e.readOffset+4*t.mNumVertices*4),e.Seek(4*t.mNumVertices*4,Ie));t.mTexCoordsBuffers=[];for(r=0;r<E&&n&D(r);++r)if(t.mNumUVComponents[r]=ue(e),Ne)xe(e,t.mTextureCoords[r],t.mNumVertices);else{t.mTextureCoords[r]=[],t.mTexCoordsBuffers[r]=[];for(var i=0;i<t.mNumVertices;i++)t.mTexCoordsBuffers[r].push(oe(e)),t.mTexCoordsBuffers[r].push(oe(e)),oe(e)}if(Ne)ue(e);else{t.mFaces=[],t.mIndexArray=[];for(var o=0;o<t.mNumFaces;++o){var a=t.mFaces[o]=new V;a.mNumIndices=ce(e),a.mIndices=[];for(var s=0;s<a.mNumIndices;++s)t.mNumVertices<65536?a.mIndices[s]=ce(e):a.mIndices[s]=ue(e);if(3===a.mNumIndices)t.mIndexArray.push(a.mIndices[0]),t.mIndexArray.push(a.mIndices[1]),t.mIndexArray.push(a.mIndices[2]);else{if(4!==a.mNumIndices)throw new Error("Sorry, can't currently triangulate polys. Use the triangulate preprocessor in Assimp.");t.mIndexArray.push(a.mIndices[0]),t.mIndexArray.push(a.mIndices[1]),t.mIndexArray.push(a.mIndices[2]),t.mIndexArray.push(a.mIndices[2]),t.mIndexArray.push(a.mIndices[3]),t.mIndexArray.push(a.mIndices[0])}}}if(t.mNumBones){t.mBones=[];for(s=0;s<t.mNumBones;++s)t.mBones[s]=new H,_e(e,t.mBones[s])}}function Me(e,t){we(le(e)==b),le(e),t.mKey=pe(e),t.mSemantic=ue(e),t.mIndex=ue(e),t.mDataLength=ue(e),t.mType=ue(e),t.mData=[],e.ReadBytes(t.mData,1,t.mDataLength)}function Te(e,t){if(we(le(e)==y),le(e),t.mNumAllocated=t.mNumProperties=ue(e),t.mNumProperties){t.mProperties&&delete t.mProperties,t.mProperties=[];for(var n=0;n<t.mNumProperties;++n)t.mProperties[n]=new X,Me(e,t.mProperties[n])}}function Ae(e,t){we(le(e)==h),le(e),t.mNodeName=pe(e),t.mNumPositionKeys=ue(e),t.mNumRotationKeys=ue(e),t.mNumScalingKeys=ue(e),t.mPreState=ue(e),t.mPostState=ue(e),t.mNumPositionKeys&&(Ne?xe(e,t.mPositionKeys,t.mNumPositionKeys):(t.mPositionKeys=[],be(e,t.mPositionKeys,t.mNumPositionKeys))),t.mNumRotationKeys&&(Ne?xe(e,t.mRotationKeys,t.mNumRotationKeys):(t.mRotationKeys=[],function(e,t,n){for(var r=0;r<n;r++)t[r]=ye(e)}(e,t.mRotationKeys,t.mNumRotationKeys))),t.mNumScalingKeys&&(Ne?xe(e,t.mScalingKeys,t.mNumScalingKeys):(t.mScalingKeys=[],be(e,t.mScalingKeys,t.mNumScalingKeys)))}function Ee(e,t){if(we(le(e)==m),le(e),t.mName=pe(e),t.mDuration=ae(e),t.mTicksPerSecond=ae(e),t.mNumChannels=ue(e),t.mNumChannels){t.mChannels=[];for(var n=0;n<t.mNumChannels;++n)t.mChannels[n]=new $,Ae(e,t.mChannels[n])}}function Ce(e,t){we(le(e)==u),le(e),t.mWidth=ue(e),t.mHeight=ue(e),e.ReadBytes(t.achFormatHint,1,4),Ne||(t.mHeight?(t.pcData=[],e.ReadBytes(t.pcData,1,t.mWidth*t.mHeight*4)):(t.pcData=[],e.ReadBytes(t.pcData,1,t.mWidth)))}function Pe(e,t){we(le(e)==o),le(e),t.mName=pe(e),t.mType=ue(e),t.mType!=C&&(t.mAttenuationConstant=oe(e),t.mAttenuationLinear=oe(e),t.mAttenuationQuadratic=oe(e)),t.mColorDiffuse=de(e),t.mColorSpecular=de(e),t.mColorAmbient=de(e),t.mType==P&&(t.mAngleInnerCone=oe(e),t.mAngleOuterCone=oe(e))}function Le(e,t){we(le(e)==i),le(e),t.mName=pe(e),t.mPosition=he(e),t.mLookAt=he(e),t.mUp=he(e),t.mHorizontalFOV=oe(e),t.mClipPlaneNear=oe(e),t.mClipPlaneFar=oe(e),t.mAspect=oe(e)}function Oe(e,t){if(we(le(e)==d),le(e),t.mFlags=ue(e),t.mNumMeshes=ue(e),t.mNumMaterials=ue(e),t.mNumAnimations=ue(e),t.mNumTextures=ue(e),t.mNumLights=ue(e),t.mNumCameras=ue(e),t.mRootNode=new W,t.mRootNode=function e(t,n,r){we(le(t)==g),le(t);var i=new W;if(i.mParent=n,i.mDepth=r,i.mName=pe(t),i.mTransformation=ve(t),i.mNumChildren=ue(t),i.mNumMeshes=ue(t),i.mNumMeshes){i.mMeshes=[];for(var o=0;o<i.mNumMeshes;++o)i.mMeshes[o]=ue(t)}if(i.mNumChildren)for(i.mChildren=[],o=0;o<i.mNumChildren;++o){var a=e(t,i,r++);i.mChildren[o]=a}return i}(e,null,0),t.mNumMeshes){t.mMeshes=[];for(var n=0;n<t.mNumMeshes;++n)t.mMeshes[n]=new j,Se(e,t.mMeshes[n])}if(t.mNumMaterials){t.mMaterials=[];for(n=0;n<t.mNumMaterials;++n)t.mMaterials[n]=new J,Te(e,t.mMaterials[n])}if(t.mNumAnimations){t.mAnimations=[];for(n=0;n<t.mNumAnimations;++n)t.mAnimations[n]=new ee,Ee(e,t.mAnimations[n])}if(t.mNumTextures){t.mTextures=[];for(n=0;n<t.mNumTextures;++n)t.mTextures[n]=new te,Ce(e,t.mTextures[n])}if(t.mNumLights){t.mLights=[];for(n=0;n<t.mNumLights;++n)t.mLights[n]=new ne,Pe(e,t.mLights[n])}if(t.mNumCameras){t.mCameras=[];for(n=0;n<t.mNumCameras;++n)t.mCameras[n]=new re,Le(e,t.mCameras[n])}}var Ne,Re,Ie=0,De=1;return function(e){var t=new function(){this.mFlags=0,this.mNumMeshes=0,this.mNumMaterials=0,this.mNumAnimations=0,this.mNumTextures=0,this.mNumLights=0,this.mNumCameras=0,this.mRootNode=null,this.mMeshes=[],this.mMaterials=[],this.mAnimations=[],this.mLights=[],this.mCameras=[],this.nodeToBoneMap={},this.findNode=function(e,t){if(t||(t=this.mRootNode),t.mName==e)return t;for(var n=0;n<t.mChildren.length;n++){var r=this.findNode(e,t.mChildren[n]);if(r)return r}return null},this.toTHREE=function(){this.nodeCount=0,function(e){for(var t in e.mMeshes){var n=e.mMeshes[t];for(var r in n.mBones){var i=e.findNode(n.mBones[r].mName);i&&(i.isBone=!0)}}}(this);var e=this.mRootNode.toTHREE(this);for(var t in this.mMeshes)this.mMeshes[t].hookupSkeletons(this,e);if(this.mAnimations.length>0)var n=this.mAnimations[0].toTHREE(this);return{object:e,animation:n}}},n=new DataView(e);if(function(e){e.readOffset=0,e.Seek=function(t,n){n==Ie&&(e.readOffset+=t),n==De&&(e.readOffset=t)},e.ReadBytes=function(e,t,n){for(var r=t*n,i=0;i<r;i++)e[i]=se(this)},e.subArray32=function(e,t){var n=this.buffer.slice(e,t);return new Float32Array(n)},e.subArrayUint16=function(e,t){var n=this.buffer.slice(e,t);return new Uint16Array(n)},e.subArrayUint8=function(e,t){var n=this.buffer.slice(e,t);return new Uint8Array(n)},e.subArrayUint32=function(e,t){var n=this.buffer.slice(e,t);return new Uint32Array(n)}}(n),n.Seek(44,Ie),ue(n),ue(n),ue(n),ue(n),Ne=ce(n)>0,Re=ce(n)>0,Ne)throw"Shortened binaries are not supported!";if(n.Seek(256,Ie),n.Seek(128,Ie),n.Seek(64,Ie),!Re)return Oe(n,t),t.toTHREE();var r=le(n),i=n.FileSize()-n.Tell(),o=[];n.Read(o,1,i);var a=[];uncompress(a,r,o,i),Oe(new ArrayBuffer(a),t)}(e)}};function fo(){this.id=0,this.data=null}function po(){}po.prototype={set:function(e,t){this[e]=t},get:function(e,t){return this.hasOwnProperty(e)?this[e]:t}};var mo=function(e){this.manager=void 0!==e?e:cr,this.trunk=new p,this.materialFactory=void 0,this._url="",this._baseDir="",this._data=void 0,this._ptr=0,this._version=[],this._streaming=!1,this._optimized_for_accuracy=!1,this._compression=0,this._bodylen=4294967295,this._blocks=[new fo],this._accuracyMatrix=!1,this._accuracyGeo=!1,this._accuracyProps=!1};function vo(e,t){p.call(this),this.type="Light",this.color=new v(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function go(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new x(512,512),this.map=null,this.matrix=new a}function yo(e,t,n,r){vo.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new go(new Hn(90,1,.5,500))}function bo(){go.call(this,new Jn(-5,5,5,-5,.5,500))}function xo(e,t){vo.call(this,e,t),this.type="DirectionalLight",this.position.copy(p.DefaultUp),this.updateMatrix(),this.target=new p,this.shadow=new bo}function wo(){go.call(this,new Hn(50,1,.5,500))}function _o(e,t,n,r,i,o){vo.call(this,e,t),this.type="SpotLight",this.position.copy(p.DefaultUp),this.updateMatrix(),this.target=new p,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new wo}function So(e,t,n){vo.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(p.DefaultUp),this.updateMatrix(),this.groundColor=new v(t)}mo.prototype={constructor:mo,load:function(e,t,n,r){var i=this;this._url=e,this._baseDir=e.substr(0,e.lastIndexOf("/")+1);var o=new lr(this.manager);o.setResponseType("arraybuffer"),o.load(e,function(e){t(i.parse(e))},n,r)},parse:function(e){var t=e.byteLength;for(this._ptr=0,this._data=new DataView(e),this._parseHeader(),0!=this._compression&&console.error("compressed AWD not supported"),this._streaming||this._bodylen==e.byteLength-this._ptr||console.error("AWDLoader: body len does not match file length",this._bodylen,t-this._ptr);this._ptr<t;)this.parseNextBlock();return this.trunk},parseNextBlock:function(){var e,t,n=this.readU32(),r=(this.readU8(),this.readU8()),i=(this.readU8(),this.readU32());switch(r){case 1:e=this.parseMeshData(i);break;case 22:e=this.parseContainer(i);break;case 23:e=this.parseMeshInstance(i);break;case 81:e=this.parseMaterial(i);break;case 82:e=this.parseTexture(i);break;case 101:e=this.parseSkeleton(i);break;case 112:e=this.parseMeshPoseAnimation(i,!1);break;case 113:e=this.parseVertexAnimationSet(i);break;case 102:e=this.parseSkeletonPose(i);break;case 103:e=this.parseSkeletonAnimation(i);break;case 122:e=this.parseAnimatorSet(i);break;default:this._ptr+=i}this._blocks[n]=t=new fo,t.data=e,t.id=n},_parseHeader:function(){var e=this._version;if(4282180!=(this.readU8()<<16|this.readU8()<<8|this.readU8()))throw new Error("AWDLoader - bad magic");e[0]=this.readU8(),e[1]=this.readU8();var t=this.readU16();this._streaming=1==(1&t),2===e[0]&&1===e[1]&&(this._accuracyMatrix=2==(2&t),this._accuracyGeo=4==(4&t),this._accuracyProps=8==(8&t)),this._geoNrType=this._accuracyGeo?8:7,this._matrixNrType=this._accuracyMatrix?8:7,this._propsNrType=this._accuracyProps?8:7,this._optimized_for_accuracy=2==(2&t),this._compression=this.readU8(),this._bodylen=this.readU32()},parseContainer:function(e){var t=new p,n=this.readU32(),r=this.parseMatrix4();return t.name=this.readUTF(),t.applyMatrix(r),(this._blocks[n].data||this.trunk).add(t),this.parseProperties({1:this._matrixNrType,2:this._matrixNrType,3:this._matrixNrType,4:4}),t.extra=this.parseUserAttributes(),t},parseMeshInstance:function(e){var t,n,r,i,o,a,s,c,u,l,h,d,f;for(a=this.readU32(),c=this.parseMatrix4(),t=this.readUTF(),s=this.readU32(),d=this.readU16(),r=this.getBlock(s),u=[],f=0;f<d;f++)h=this.readU32(),l=this.getBlock(h),u.push(l);if(o=[],(i=r.length)>1)for(n=new p,f=0;f<i;f++){var m=new fn(r[f]);o.push(m),n.add(m)}else n=new fn(r[0]),o.push(n);n.applyMatrix(c),n.name=t,(this.getBlock(a)||this.trunk).add(n);var v=u.length,g=Math.max(i,v);for(f=0;f<g;f++)o[f%i].material=u[f%v];return this.parseProperties(null),n.extra=this.parseUserAttributes(),n},parseMaterial:function(e){var t,n,r,i,o,a;for(t=this.readUTF(),n=this.readU8(),a=this.readU8(),r=this.parseProperties({1:3,2:23,11:21,12:7,13:21}),0;0<a;){this.readU16();this.parseProperties(null),this.parseUserAttributes()}if(o=this.parseUserAttributes(),void 0!==this.materialFactory&&(i=this.materialFactory(t)))return i;if(i=new vr,1===n)i.color.setHex(r.get(1,13421772));else if(2===n){var s=r.get(2,0);i.map=this.getBlock(s)}return i.extra=o,i.alphaThreshold=r.get(12,0),i.repeat=r.get(13,!1),i},parseTexture:function(e){var t,n;this.readUTF();if(0===this.readU8()){n=this.readU32();var r=this.readUTFBytes(n);console.log(r),t=this.loadTexture(r)}return this.parseProperties(null),this.parseUserAttributes(),t},loadTexture:function(e){var t=new Kn;return new Tr(this.manager).load(this._baseDir+e,function(e){t.image=e,t.needsUpdate=!0}),t},parseSkeleton:function(e){this.readUTF();var t=this.readU16(),n=[],r=0;for(this.parseProperties(null);r<t;){var i,o;this.readU16(),(i=new Fn).parent=this.readU16()-1,i.name=this.readUTF(),o=this.parseMatrix4(),i.skinMatrix=o,this.parseProperties(null),this.parseUserAttributes(),n.push(i),r++}return this.parseUserAttributes(),n},parseSkeletonPose:function(e){this.readUTF();var t=this.readU16();this.parseProperties(null);for(var n=[],r=0;r<t;){var i;i=1===this.readU8()?this.parseMatrix4():new a,n[r]=i,r++}return this.parseUserAttributes(),n},parseSkeletonAnimation:function(e){this.readUTF();var t,n,r,i=[],o=this.readU16();this.parseProperties(null);for(var a=0;a<o;)n=this.readU32(),t=this.readU16(),r=this._blocks[n].data,i.push({pose:r,duration:t}),a++;if(0!==i.length)return this.parseUserAttributes(),i},parseVertexAnimationSet:function(e){this.readUTF();for(var t,n=this.readU16(),r=(this.parseProperties({1:5}),0),i=[];r<n;)t=this.readU32(),i.push(this._blocks[t].data),r++;return this.parseUserAttributes(),i},parseAnimatorSet:function(e){this.readUTF();var t,n,r=this.readU16(),i=this.parseProperties({1:23});t=this.readU32();for(var o=this.readU16(),a=[],s=0;s<o;s++)a.push(this.readU32());this.readU16(),Boolean(this.readU8());this.parseUserAttributes(),this.parseUserAttributes();var c,u=[];for(s=0;s<a.length;s++)u.push(this._blocks[a[s]].data);for(n=this._blocks[t].data,1==r&&(c={animationSet:n,skeleton:this._blocks[i.get(1,0)].data}),s=0;s<u.length;s++)u[s].animator=c;return c},parseMeshData:function(e){var t,n,r=this.readUTF(),i=this.readU16(),o=0,a=[];for(this.parseProperties({1:this._geoNrType,2:this._geoNrType});o<i;){var s,c,u;for((t=new k).name=r,a.push(t),s=this.readU32(),c=this._ptr+s,this.parseProperties({1:this._geoNrType,2:this._geoNrType});this._ptr<c;){var l=0,h=this.readU8(),d=(this.readU8(),this.readU32()),f=d+this._ptr;if(1===h)for(u=new M(n=new Float32Array(d/12*3),3),t.addAttribute("position",u),l=0;this._ptr<f;)n[l]=-this.readF32(),n[l+1]=this.readF32(),n[l+2]=this.readF32(),l+=3;else if(2===h)for(u=new M(n=new Uint16Array(d/2),1),t.setIndex(u),l=0;this._ptr<f;)n[l+1]=this.readU16(),n[l]=this.readU16(),n[l+2]=this.readU16(),l+=3;else if(3===h)for(u=new M(n=new Float32Array(d/8*2),2),t.addAttribute("uv",u),l=0;this._ptr<f;)n[l]=this.readF32(),n[l+1]=1-this.readF32(),l+=2;else if(4===h)for(u=new M(n=new Float32Array(d/12*3),3),t.addAttribute("normal",u),l=0;this._ptr<f;)n[l]=-this.readF32(),n[l+1]=this.readF32(),n[l+2]=this.readF32(),l+=3;else this._ptr=f}this.parseUserAttributes(),t.computeBoundingSphere(),o++}return this.parseUserAttributes(),a},parseMeshPoseAnimation:function(e,t){var n,r,i,o,a,s,c,u,l,h=1,d=0,f={},p=[],m=(this.readUTF(),this.readU32()),v=this.getBlock(m);if(null!==v){for((s=v.geometry).morphTargets=[],t||(h=this.readU16()),n=this.readU16(),c=this.readU16(),u=0;u<c;)p.push(this.readU16()),u++;for(l=this.parseProperties({1:21,2:21}),f.looping=l.get(1,!0),f.stitchFinalFrame=l.get(2,!1),r=0;r<h;){for(this.readU16(),i=0;i<n;)for(u=0,o=this.readU32(),a=this._ptr+o;u<c;){if(1===p[u]){var g=new Float32Array(o/4);for(s.morphTargets.push({array:g}),d=0;this._ptr<a;)g[d]=this.readF32(),g[d+1]=this.readF32(),g[d+2]=this.readF32(),d+=3;i++}else this._ptr=a;u++}r++}return this.parseUserAttributes(),null}console.log("parseMeshPoseAnimation target mesh not found at:",m)},getBlock:function(e){return this._blocks[e].data},parseMatrix4:function(){var e=new a,t=e.elements;return t[0]=this.readF32(),t[1]=this.readF32(),t[2]=this.readF32(),t[3]=0,t[4]=this.readF32(),t[5]=this.readF32(),t[6]=this.readF32(),t[7]=0,t[8]=this.readF32(),t[9]=this.readF32(),t[10]=this.readF32(),t[11]=0,t[12]=-this.readF32(),t[13]=this.readF32(),t[14]=this.readF32(),t[15]=1,e},parseProperties:function(e){var t=this.readU32(),n=this._ptr+t,r=new po;if(e)for(;this._ptr<n;){var i,o=this.readU16(),a=this.readU32();e.hasOwnProperty(o)?(i=e[o],r.set(o,this.parseAttrValue(i,a))):this._ptr+=a}return r},parseUserAttributes:function(){return this._ptr=this.readU32()+this._ptr,null},parseAttrValue:function(e,t){var n,r;switch(e){case 1:n=1,r=this.readI8;break;case 2:n=2,r=this.readI16;break;case 3:n=4,r=this.readI32;break;case 21:case 4:n=1,r=this.readU8;break;case 5:n=2,r=this.readU16;break;case 6:case 23:n=4,r=this.readU32;break;case 7:n=4,r=this.readF32;break;case 8:n=8,r=this.readF64;break;case 41:case 42:case 43:case 44:case 45:case 46:case 47:n=8,r=this.readF64}if(n<t){var i,o,a;for(i=[],o=0,a=t/n;o<a;)i.push(r.call(this)),o++;return i}return r.call(this)},readU8:function(){return this._data.getUint8(this._ptr++)},readI8:function(){return this._data.getInt8(this._ptr++)},readU16:function(){var e=this._data.getUint16(this._ptr,!0);return this._ptr+=2,e},readI16:function(){var e=this._data.getInt16(this._ptr,!0);return this._ptr+=2,e},readU32:function(){var e=this._data.getUint32(this._ptr,!0);return this._ptr+=4,e},readI32:function(){var e=this._data.getInt32(this._ptr,!0);return this._ptr+=4,e},readF32:function(){var e=this._data.getFloat32(this._ptr,!0);return this._ptr+=4,e},readF64:function(){var e=this._data.getFloat64(this._ptr,!0);return this._ptr+=8,e},readUTF:function(){var e=this.readU16();return this.readUTFBytes(e)},readUTFBytes:function(e){for(var t=[],n=0;t.length<e;){var r=this._data.getUint8(this._ptr++,!0);if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){var i=this._data.getUint8(this._ptr++,!0);t[n++]=String.fromCharCode((31&r)<<6|63&i)}else{i=this._data.getUint8(this._ptr++,!0);var o=this._data.getUint8(this._ptr++,!0);t[n++]=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o)}}return t.join("")}},vo.prototype=Object.assign(Object.create(p.prototype),{constructor:vo,isLight:!0,copy:function(e){return p.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=p.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Object.assign(go.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),yo.prototype=Object.assign(Object.create(vo.prototype),{constructor:yo,isPointLight:!0,copy:function(e){return vo.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),bo.prototype=Object.assign(Object.create(go.prototype),{constructor:bo}),xo.prototype=Object.assign(Object.create(vo.prototype),{constructor:xo,isDirectionalLight:!0,copy:function(e){return vo.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),wo.prototype=Object.assign(Object.create(go.prototype),{constructor:wo,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*o.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix())}}),_o.prototype=Object.assign(Object.create(vo.prototype),{constructor:_o,isSpotLight:!0,copy:function(e){return vo.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),So.prototype=Object.assign(Object.create(vo.prototype),{constructor:So,isHemisphereLight:!0,copy:function(e){return vo.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}});var Mo=function(e){this.manager=void 0!==e?e:cr};Mo.prototype={constructor:Mo,load:function(e,t,n,r){var i=this;new lr(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){function t(e){var t=new k,n=e.indices,r=e.positions,i=e.normals,o=e.uvs;t.setIndex(n);for(var a=2,s=r.length;a<s;a+=3)r[a]=-r[a];if(t.addAttribute("position",new N(r,3)),i){for(a=2,s=i.length;a<s;a+=3)i[a]=-i[a];t.addAttribute("normal",new N(i,3))}o&&t.addAttribute("uv",new N(o,2));var c=e.subMeshes;if(c)for(a=0,s=c.length;a<s;a++){var u=c[a];t.addGroup(u.indexStart,u.indexCount)}return t}return function(e,n){for(var r={},i=new Yn,o=e.cameras,a=0,s=o.length;a<s;a++){var c=new Hn((d=o[a]).fov/Math.PI*180,1.33,d.minZ,d.maxZ);c.name=d.name,c.position.fromArray(d.position),d.rotation&&c.rotation.fromArray(d.rotation),r[d.id]=c}var u=e.lights;for(a=0,s=u.length;a<s;a++){var l;switch((d=u[a]).type){case 0:l=new yo;break;case 1:l=new xo;break;case 2:l=new _o;break;case 3:l=new So}l.name=d.name,d.position&&l.position.set(d.position[0],d.position[1],-d.position[2]),l.color.fromArray(d.diffuse),d.groundColor&&l.groundColor.fromArray(d.groundColor),d.intensity&&(l.intensity=d.intensity),r[d.id]=l,i.add(l)}var h=e.meshes;for(a=0,s=h.length;a<s;a++){var d,f;(f=(d=h[a]).indices?new fn(t(d),n[d.materialId]):new oo).name=d.name,f.position.set(d.position[0],d.position[1],-d.position[2]),f.rotation.fromArray(d.rotation),d.rotationQuaternion&&f.quaternion.fromArray(d.rotationQuaternion),f.scale.fromArray(d.scaling),d.parentId?r[d.parentId].add(f):i.add(f),r[d.id]=f}return i}(e,function(e){for(var t={},n=0,r=e.materials.length;n<r;n++){var i=e.materials[n],o=new vr;o.name=i.name,o.color.fromArray(i.diffuse),o.emissive.fromArray(i.emissive),o.specular.fromArray(i.specular),o.shininess=i.specularPower,o.opacity=i.alpha,t[i.id]=o}if(e.multiMaterials)for(n=0,r=e.multiMaterials.length;n<r;n++)i=e.multiMaterials[n],console.warn("BabylonLoader: Multi materials not yet supported."),t[i.id]=new vr;return t}(e))}};var To=function(e){this.manager=void 0!==e?e:cr,this.animateBonePositions=!0,this.animateBoneRotations=!0};function Ao(e,t){vo.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Eo(e,t){pn.call(this,e,t),this.type="LineSegments"}To.prototype={constructor:To,load:function(e,t,n,r){var i=this;new lr(i.manager).load(e,function(e){t(i.parse(e))},n,r)},parse:function(e){function t(e,n,r){if("ENDSITE"!==r.type){var i={time:n,position:new s,rotation:new c};r.frames.push(i);for(var o=new c,a=new s(1,0,0),u=new s(0,1,0),l=new s(0,0,1),h=0;h<r.channels.length;h++)switch(r.channels[h]){case"Xposition":i.position.x=parseFloat(e.shift().trim());break;case"Yposition":i.position.y=parseFloat(e.shift().trim());break;case"Zposition":i.position.z=parseFloat(e.shift().trim());break;case"Xrotation":o.setFromAxisAngle(a,parseFloat(e.shift().trim())*Math.PI/180),i.rotation.multiply(o);break;case"Yrotation":o.setFromAxisAngle(u,parseFloat(e.shift().trim())*Math.PI/180),i.rotation.multiply(o);break;case"Zrotation":o.setFromAxisAngle(l,parseFloat(e.shift().trim())*Math.PI/180),i.rotation.multiply(o);break;default:console.warn("BVHLoader: Invalid channel type.")}for(h=0;h<r.children.length;h++)t(e,n,r.children[h])}}function n(e){for(var t;0===(t=e.shift().trim()).length;);return t}var r=this,i=function(e){"HIERARCHY"!==n(e)&&console.error("BVHLoader: HIERARCHY expected.");var r=[],i=function e(t,r,i){var o={name:"",type:"",frames:[]};i.push(o);var a=r.split(/[\s]+/);"END"===a[0].toUpperCase()&&"SITE"===a[1].toUpperCase()?(o.type="ENDSITE",o.name="ENDSITE"):(o.name=a[1],o.type=a[0].toUpperCase()),"{"!==n(t)&&console.error("BVHLoader: Expected opening { after type & name"),"OFFSET"!==(a=n(t).split(/[\s]+/))[0]&&console.error("BVHLoader: Expected OFFSET but got: "+a[0]),4!==a.length&&console.error("BVHLoader: Invalid number of values for OFFSET.");var c=new s(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]));if((isNaN(c.x)||isNaN(c.y)||isNaN(c.z))&&console.error("BVHLoader: Invalid values of OFFSET."),o.offset=c,"ENDSITE"!==o.type){"CHANNELS"!==(a=n(t).split(/[\s]+/))[0]&&console.error("BVHLoader: Expected CHANNELS definition.");var u=parseInt(a[1]);o.channels=a.splice(2,u),o.children=[]}for(;;){var l=n(t);if("}"===l)return o;o.children.push(e(t,l,i))}}(e,n(e),r);"MOTION"!==n(e)&&console.error("BVHLoader: MOTION expected.");var o=n(e).split(/[\s]+/),a=parseInt(o[1]);isNaN(a)&&console.error("BVHLoader: Failed to read number of frames."),o=n(e).split(/[\s]+/);var c=parseFloat(o[2]);isNaN(c)&&console.error("BVHLoader: Failed to read frame time.");for(var u=0;u<a;u++)t(o=n(e).split(/[\s]+/),u*c,i);return r}(e.split(/[\r\n]+/g)),o=[];!function e(t,n){var r=new Fn;if(n.push(r),r.position.add(t.offset),r.name=t.name,"ENDSITE"!==t.type)for(var i=0;i<t.children.length;i++)r.add(e(t.children[i],n));return r}(i[0],o);var a=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];if("ENDSITE"!==i.type){for(var o=[],a=[],s=[],c=0;c<i.frames.length;c++){var u=i.frames[c];o.push(u.time),a.push(u.position.x+i.offset.x),a.push(u.position.y+i.offset.y),a.push(u.position.z+i.offset.z),s.push(u.rotation.x),s.push(u.rotation.y),s.push(u.rotation.z),s.push(u.rotation.w)}r.animateBonePositions&&t.push(new Nn(".bones["+i.name+"].position",o,a)),r.animateBoneRotations&&t.push(new Ln(".bones["+i.name+"].quaternion",o,s))}}return new Rn("animation",-1,t)}(i);return{skeleton:new uo(o),clip:a}}},Ao.prototype=Object.assign(Object.create(vo.prototype),{constructor:Ao,isAmbientLight:!0}),Eo.prototype=Object.assign(Object.create(pn.prototype),{constructor:Eo,isLineSegments:!0,computeLineDistances:function(){var e=new s,t=new s;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)e.fromBufferAttribute(r,o),t.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);n.addAttribute("lineDistance",new N(i,1))}else console.warn("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(i=n.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t)}return this}}()});var Co=function(e){this.manager=void 0!==e?e:cr};Co.prototype={constructor:Co,load:function(e,t,n,r){var i=this,o=new Kn,a=new lr(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(e,function(e){o.image=i.parse(e),o.needsUpdate=!0,void 0!==t&&t(o)},n,r),o},parse:function(e){var t=0,n=1,r=2,i=3,o=9,a=10,s=11,c=48,u=4,l=0,h=1,d=2,f=3;e.length<19&&console.error("TGALoader: Not enough data to contain header.");var p=new Uint8Array(e),m=0,v={id_length:p[m++],colormap_type:p[m++],image_type:p[m++],colormap_index:p[m++]|p[m++]<<8,colormap_length:p[m++]|p[m++]<<8,colormap_size:p[m++],origin:[p[m++]|p[m++]<<8,p[m++]|p[m++]<<8],width:p[m++]|p[m++]<<8,height:p[m++]|p[m++]<<8,pixel_size:p[m++],flags:p[m++]};!function(e){switch(e.image_type){case n:case o:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("TGALoader: Invalid type colormap data for indexed type.");break;case r:case i:case a:case s:e.colormap_type&&console.error("TGALoader: Invalid type colormap data for colormap type.");break;case t:console.error("TGALoader: No data.");default:console.error('TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&console.error("TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('TGALoader: Invalid pixel size "%s".',e.pixel_size)}(v),v.id_length+m>e.length&&console.error("TGALoader: No data."),m+=v.id_length;var g=!1,y=!1,b=!1;switch(v.image_type){case o:g=!0,y=!0;break;case n:y=!0;break;case a:g=!0;break;case r:break;case s:g=!0,b=!0;break;case i:b=!0}var x=document.createElement("canvas");x.width=v.width,x.height=v.height;var w=x.getContext("2d"),_=w.createImageData(v.width,v.height),S=function(e,t,n,r,i){var o,a,s,c;if(a=n.pixel_size>>3,s=n.width*n.height*a,t&&(c=i.subarray(r,r+=n.colormap_length*(n.colormap_size>>3))),e){var u,l,h;o=new Uint8Array(s);for(var d=0,f=new Uint8Array(a);d<s;)if(l=1+(127&(u=i[r++])),128&u){for(h=0;h<a;++h)f[h]=i[r++];for(h=0;h<l;++h)o.set(f,d+h*a);d+=a*l}else{for(l*=a,h=0;h<l;++h)o[d+h]=i[r++];d+=l}}else o=i.subarray(r,r+=t?n.width*n.height:s);return{pixel_data:o,palettes:c}}(g,y,v,m,p);!function(e,t,n,r,i){var o,a,s,p,m,g;switch((v.flags&c)>>u){default:case d:o=0,s=1,m=t,a=0,p=1,g=n;break;case l:o=0,s=1,m=t,a=n-1,p=-1,g=-1;break;case f:o=t-1,s=-1,m=-1,a=0,p=1,g=n;break;case h:o=t-1,s=-1,m=-1,a=n-1,p=-1,g=-1}if(b)switch(v.pixel_size){case 8:!function(e,t,n,r,i,o,a,s){var c,u,l,h=0,d=v.width;for(l=t;l!==r;l+=n)for(u=i;u!==a;u+=o,h++)c=s[h],e[4*(u+d*l)+0]=c,e[4*(u+d*l)+1]=c,e[4*(u+d*l)+2]=c,e[4*(u+d*l)+3]=255}(e,a,p,g,o,s,m,r);break;case 16:!function(e,t,n,r,i,o,a,s){var c,u,l=0,h=v.width;for(u=t;u!==r;u+=n)for(c=i;c!==a;c+=o,l+=2)e[4*(c+h*u)+0]=s[l+0],e[4*(c+h*u)+1]=s[l+0],e[4*(c+h*u)+2]=s[l+0],e[4*(c+h*u)+3]=s[l+1]}(e,a,p,g,o,s,m,r);break;default:console.error("TGALoader: Format not supported.")}else switch(v.pixel_size){case 8:!function(e,t,n,r,i,o,a,s,c){var u,l,h,d=c,f=0,p=v.width;for(h=t;h!==r;h+=n)for(l=i;l!==a;l+=o,f++)u=s[f],e[4*(l+p*h)+3]=255,e[4*(l+p*h)+2]=d[3*u+0],e[4*(l+p*h)+1]=d[3*u+1],e[4*(l+p*h)+0]=d[3*u+2]}(e,a,p,g,o,s,m,r,i);break;case 16:!function(e,t,n,r,i,o,a,s){var c,u,l,h=0,d=v.width;for(l=t;l!==r;l+=n)for(u=i;u!==a;u+=o,h+=2)c=s[h+0]+(s[h+1]<<8),e[4*(u+d*l)+0]=(31744&c)>>7,e[4*(u+d*l)+1]=(992&c)>>2,e[4*(u+d*l)+2]=(31&c)>>3,e[4*(u+d*l)+3]=32768&c?0:255}(e,a,p,g,o,s,m,r);break;case 24:!function(e,t,n,r,i,o,a,s){var c,u,l=0,h=v.width;for(u=t;u!==r;u+=n)for(c=i;c!==a;c+=o,l+=3)e[4*(c+h*u)+3]=255,e[4*(c+h*u)+2]=s[l+0],e[4*(c+h*u)+1]=s[l+1],e[4*(c+h*u)+0]=s[l+2]}(e,a,p,g,o,s,m,r);break;case 32:!function(e,t,n,r,i,o,a,s){var c,u,l=0,h=v.width;for(u=t;u!==r;u+=n)for(c=i;c!==a;c+=o,l+=4)e[4*(c+h*u)+2]=s[l+0],e[4*(c+h*u)+1]=s[l+1],e[4*(c+h*u)+0]=s[l+2],e[4*(c+h*u)+3]=s[l+3]}(e,a,p,g,o,s,m,r);break;default:console.error("TGALoader: Format not supported.")}}(_.data,v.width,v.height,S.pixel_data,S.palettes);return w.putImageData(_,0,0),x},setPath:function(e){return this.path=e,this}};var Po=function(e){this.manager=void 0!==e?e:cr};function Lo(e,t,n,r,i,o,a,s,c,u,l,h){Kn.call(this,null,o,a,s,c,u,r,i,l,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Oo(e){this.manager=void 0!==e?e:cr,this._parser=null}Po.prototype={constructor:Po,crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=void 0===i.path?Cr.extractUrlBase(e):i.path;new lr(i.manager).load(e,function(e){t(i.parse(e,o))},n,r)},setPath:function(e){return this.path=e,this},options:{set convertUpAxis(e){console.warn("ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.")}},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){function n(e,t){for(var n=[],r=e.childNodes,i=0,o=r.length;i<o;i++){var a=r[i];a.nodeName===t&&n.push(a)}return n}function r(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),n=new Array(t.length),r=0,i=t.length;r<i;r++)n[r]=t[r];return n}function i(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),n=new Array(t.length),r=0,i=t.length;r<i;r++)n[r]=parseFloat(t[r]);return n}function u(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),n=new Array(t.length),r=0,i=t.length;r<i;r++)n[r]=parseInt(t[r]);return n}function h(e){return e.substring(1)}function d(e){return 0===Object.keys(e).length}function f(e,t,r,i){var o=n(e,t)[0];if(void 0!==o)for(var a=n(o,r),s=0;s<a.length;s++)i(a[s])}function p(e,t){for(var n in e){e[n].build=t(e[n])}}function m(e,t){return void 0!==e.build?e.build:(e.build=t(e),e.build)}function g(e){for(var t={inputs:{}},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"input":var o=h(i.getAttribute("source")),a=i.getAttribute("semantic");t.inputs[a]=o}}return t}function y(e){var t={},n=e.getAttribute("target").split("/"),r=n.shift(),i=n.shift(),o=-1!==i.indexOf("("),a=-1!==i.indexOf(".");if(a)i=(n=i.split(".")).shift(),t.member=n.shift();else if(o){var s=i.split("(");i=s.shift();for(var c=0;c<s.length;c++)s[c]=parseInt(s[c].replace(/\)/,""));t.indices=s}return t.id=r,t.sid=i,t.arraySyntax=o,t.memberSyntax=a,t.sampler=h(e.getAttribute("source")),t}function b(e){var t=[],n=e.channels,r=e.samplers,i=e.sources;for(var o in n)if(n.hasOwnProperty(o)){var a=n[o],s=r[a.sampler],c=s.inputs.INPUT,u=s.inputs.OUTPUT;T(w(a,i[c],i[u]),t)}return t}function x(e){return m(nt.animations[e],b)}function w(e,t,n){var r,i,o,a,s,c,u=nt.nodes[e.id],l=Ve(u.id),h=u.transforms[e.sid],d=u.matrix.clone().transpose(),f={};switch(h){case"matrix":for(o=0,a=t.array.length;o<a;o++)if(r=t.array[o],i=o*n.stride,void 0===f[r]&&(f[r]={}),!0===e.arraySyntax){var p=n.array[i],m=e.indices[0]+4*e.indices[1];f[r][m]=p}else for(s=0,c=n.stride;s<c;s++)f[r][s]=n.array[i+s];break;case"translate":case"rotate":case"scale":console.warn('ColladaLoader: Animation transform type "%s" not yet implemented.',h)}var v=function(e,t){var n=[];for(var r in e)n.push({time:parseFloat(r),value:e[r]});n.sort(function(e,t){return e.time-t.time});for(var i=0;i<16;i++)A(n,i,t.elements[i]);return n}(f,d);return{name:l.uuid,keyframes:v}}var _=new s,S=new s,M=new c;function T(e,t){for(var n=e.keyframes,r=e.name,i=[],o=[],a=[],s=[],c=0,u=n.length;c<u;c++){var l=n[c],h=l.time,d=l.value;Oe.fromArray(d).transpose(),Oe.decompose(_,M,S),i.push(h),o.push(_.x,_.y,_.z),a.push(M.x,M.y,M.z,M.w),s.push(S.x,S.y,S.z)}return o.length>0&&t.push(new Nn(r+".position",i,o)),a.length>0&&t.push(new Ln(r+".quaternion",i,a)),s.length>0&&t.push(new Nn(r+".scale",i,s)),t}function A(e,t,n){var r,i,o,a=!0;for(i=0,o=e.length;i<o;i++)void 0===(r=e[i]).value[t]?r.value[t]=null:a=!1;if(!0===a)for(i=0,o=e.length;i<o;i++)(r=e[i]).value[t]=n;else!function(e,t){for(var n,r,i=0,o=e.length;i<o;i++){var a=e[i];if(null===a.value[t]){if(n=E(e,i,t),r=C(e,i,t),null===n){a.value[t]=r.value[t];continue}if(null===r){a.value[t]=n.value[t];continue}P(a,n,r,t)}}}(e,t)}function E(e,t,n){for(;t>=0;){var r=e[t];if(null!==r.value[n])return r;t--}return null}function C(e,t,n){for(;t<e.length;){var r=e[t];if(null!==r.value[n])return r;t++}return null}function P(e,t,n,r){n.time-t.time!=0?e.value[r]=(e.time-t.time)*(n.value[r]-t.value[r])/(n.time-t.time)+t.value[r]:e.value[r]=t.value[r]}function L(e){for(var t=[],n=e.name,r=e.end-e.start||-1,i=e.animations,o=0,a=i.length;o<a;o++)for(var s=x(i[o]),c=0,u=s.length;c<u;c++)t.push(s[c]);return new Rn(n,r,t)}function O(e){return m(nt.clips[e],L)}function R(e){for(var t={sources:{}},n=0,r=e.childNodes.length;n<r;n++){var o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"bind_shape_matrix":t.bindShapeMatrix=i(o.textContent);break;case"source":var a=o.getAttribute("id");t.sources[a]=de(o);break;case"joints":t.joints=I(o);break;case"vertex_weights":t.vertexWeights=D(o)}}return t}function I(e){for(var t={inputs:{}},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"input":var o=i.getAttribute("semantic"),a=h(i.getAttribute("source"));t.inputs[o]=a}}return t}function D(e){for(var t={inputs:{}},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"input":var o=i.getAttribute("semantic"),a=h(i.getAttribute("source")),s=parseInt(i.getAttribute("offset"));t.inputs[o]={id:a,offset:s};break;case"vcount":t.vcount=u(i.textContent);break;case"v":t.v=u(i.textContent)}}return t}function F(e){var t={id:e.id},n=nt.geometries[t.id];return void 0!==e.skin&&(t.skin=function(e){var t,n,r,i={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},o=e.sources,s=e.vertexWeights,c=s.vcount,u=s.v,l=s.inputs.JOINT.offset,h=s.inputs.WEIGHT.offset,d=e.sources[e.joints.inputs.JOINT],f=e.sources[e.joints.inputs.INV_BIND_MATRIX],p=o[s.inputs.WEIGHT.id].array,m=0;for(t=0,r=c.length;t<r;t++){var v=c[t],g=[];for(n=0;n<v;n++){var y=u[m+l],b=u[m+h],x=p[b];g.push({index:y,weight:x}),m+=2}for(g.sort(M),n=0;n<4;n++){var w=g[n];void 0!==w?(i.indices.array.push(w.index),i.weights.array.push(w.weight)):(i.indices.array.push(0),i.weights.array.push(0))}}e.bindShapeMatrix?i.bindMatrix=(new a).fromArray(e.bindShapeMatrix).transpose():i.bindMatrix=(new a).identity();for(t=0,r=d.array.length;t<r;t++){var _=d.array[t],S=(new a).fromArray(f.array,t*f.stride).transpose();i.joints.push({name:_,boneInverse:S})}return i;function M(e,t){return t.weight-e.weight}}(e.skin),n.sources.skinIndices=t.skin.indices,n.sources.skinWeights=t.skin.weights),t}function U(e){return m(nt.controllers[e],F)}function B(e){return void 0!==e.build?e.build:e.init_from}function z(e){var t=nt.images[e];return void 0!==t?m(t,B):(console.warn("ColladaLoader: Couldn't find image with ID:",e),null)}function j(e){for(var t={surfaces:{},samplers:{}},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"newparam":V(i,t);break;case"technique":t.technique=H(i);break;case"extra":t.extra=K(i)}}return t}function V(e,t){for(var n=e.getAttribute("sid"),r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"surface":t.surfaces[n]=G(o);break;case"sampler2D":t.samplers[n]=W(o)}}}function G(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"init_from":t.init_from=i.textContent}}return t}function W(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"source":t.source=i.textContent}}return t}function H(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"constant":case"lambert":case"blinn":case"phong":t.type=i.nodeName,t.parameters=X(i)}}return t}function X(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"emission":case"diffuse":case"specular":case"shininess":case"transparency":t[i.nodeName]=q(i);break;case"transparent":t[i.nodeName]={opaque:i.getAttribute("opaque"),data:q(i)}}}return t}function q(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"color":t[o.nodeName]=i(o.textContent);break;case"float":t[o.nodeName]=parseFloat(o.textContent);break;case"texture":t[o.nodeName]={id:o.getAttribute("texture"),extra:Y(o)}}}return t}function Y(e){for(var t={technique:{}},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"extra":Q(i,t)}}return t}function Q(e,t){for(var n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"technique":Z(i,t)}}}function Z(e,t){for(var n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":t.technique[i.nodeName]=parseFloat(i.textContent);break;case"wrapU":case"wrapV":"TRUE"===i.textContent.toUpperCase()?t.technique[i.nodeName]=1:"FALSE"===i.textContent.toUpperCase()?t.technique[i.nodeName]=0:t.technique[i.nodeName]=parseInt(i.textContent)}}}function K(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"technique":t.technique=$(i)}}return t}function $(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"double_sided":t[i.nodeName]=parseInt(i.textContent)}}return t}function ee(e){return e}function te(e){var t,n=function(e){return m(nt.effects[e],ee)}(e.url),r=n.profile.technique,i=n.profile.extra;switch(r.type){case"phong":case"blinn":t=new vr;break;case"lambert":t=new pr;break;default:t=new un}function o(e){var t=n.profile.samplers[e.id],r=null;void 0!==t?r=z(n.profile.surfaces[t.source].init_from):(console.warn("ColladaLoader: Undefined sampler. Access image directly (see #12530)."),r=z(e.id));if(null!==r){var i=function(e){var t,n=e.slice(2+(e.lastIndexOf(".")-1>>>0));switch(n=n.toLowerCase()){case"tga":t=Qe;break;default:t=Ke}return t}(r);if(void 0!==i){var o=i.load(r),a=e.extra;if(void 0!==a&&void 0!==a.technique&&!1===d(a.technique)){var s=a.technique;o.wrapS=s.wrapU?He:Xe,o.wrapT=s.wrapV?He:Xe,o.offset.set(s.offsetU||0,s.offsetV||0),o.repeat.set(s.repeatU||1,s.repeatV||1)}else o.wrapS=He,o.wrapT=He;return o}return console.warn("ColladaLoader: Loader for texture %s not found.",r),null}return console.warn("ColladaLoader: Couldn't create texture with ID:",e.id),null}t.name=e.name;var a=r.parameters;for(var s in a){var c=a[s];switch(s){case"diffuse":c.color&&t.color.fromArray(c.color),c.texture&&(t.map=o(c.texture));break;case"specular":c.color&&t.specular&&t.specular.fromArray(c.color),c.texture&&(t.specularMap=o(c.texture));break;case"shininess":c.float&&t.shininess&&(t.shininess=c.float);break;case"emission":c.color&&t.emissive&&t.emissive.fromArray(c.color),c.texture&&(t.emissiveMap=o(c.texture))}}var u=a.transparent,l=a.transparency;if(void 0===l&&u&&(l={float:1}),void 0===u&&l&&(u={opaque:"A_ONE",data:{color:[1,1,1,1]}}),u&&l)if(u.data.texture)t.transparent=!0;else{var h=u.data.color;switch(u.opaque){case"A_ONE":t.opacity=h[3]*l.float;break;case"RGB_ZERO":t.opacity=1-h[0]*l.float;break;case"A_ZERO":t.opacity=1-h[3]*l.float;break;case"RGB_ONE":t.opacity=h[0]*l.float;break;default:console.warn('ColladaLoader: Invalid opaque type "%s" of transparent tag.',u.opaque)}t.opacity<1&&(t.transparent=!0)}return void 0!==i&&void 0!==i.technique&&1===i.technique.double_sided&&(t.side=J),t}function ne(e){return m(nt.materials[e],te)}function re(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"technique_common":return ie(n)}}return{}}function ie(e){for(var t={},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];switch(r.nodeName){case"perspective":case"orthographic":t.technique=r.nodeName,t.parameters=oe(r)}}return t}function oe(e){for(var t={},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];switch(r.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":t[r.nodeName]=parseFloat(r.textContent)}}return t}function ae(e){var t;switch(e.optics.technique){case"perspective":t=new Hn(e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":var n=e.optics.parameters.ymag,r=e.optics.parameters.xmag,i=e.optics.parameters.aspect_ratio;r=void 0===r?n*i:r,n=void 0===n?r/i:n,t=new Jn(-(r*=.5),r,n*=.5,-n,e.optics.parameters.znear,e.optics.parameters.zfar);break;default:t=new Hn}return t.name=e.name,t}function se(e){var t=nt.cameras[e];return void 0!==t?m(t,ae):(console.warn("ColladaLoader: Couldn't find camera with ID:",e),null)}function ce(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"directional":case"point":case"spot":case"ambient":t.technique=i.nodeName,t.parameters=ue(i)}}return t}function ue(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"color":var a=i(o.textContent);t.color=(new v).fromArray(a);break;case"falloff_angle":t.falloffAngle=parseFloat(o.textContent);break;case"quadratic_attenuation":var s=parseFloat(o.textContent);t.distance=s?Math.sqrt(1/s):0}}return t}function le(e){var t;switch(e.technique){case"directional":t=new xo;break;case"point":t=new yo;break;case"spot":t=new _o;break;case"ambient":t=new Ao}return e.parameters.color&&t.color.copy(e.parameters.color),e.parameters.distance&&(t.distance=e.parameters.distance),t}function he(e){var t=nt.lights[e];return void 0!==t?m(t,le):(console.warn("ColladaLoader: Couldn't find light with ID:",e),null)}function de(e){for(var t={array:[],stride:3},o=0;o<e.childNodes.length;o++){var a=e.childNodes[o];if(1===a.nodeType)switch(a.nodeName){case"float_array":t.array=i(a.textContent);break;case"Name_array":t.array=r(a.textContent);break;case"technique_common":var s=n(a,"accessor")[0];void 0!==s&&(t.stride=parseInt(s.getAttribute("stride")))}}return t}function fe(e){for(var t={},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];1===r.nodeType&&(t[r.getAttribute("semantic")]=h(r.getAttribute("source")))}return t}function pe(e){for(var t={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0,hasUV:!1},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"input":var o=h(i.getAttribute("source")),a=i.getAttribute("semantic"),s=parseInt(i.getAttribute("offset"));t.inputs[a]={id:o,offset:s},t.stride=Math.max(t.stride,s+1),"TEXCOORD"===a&&(t.hasUV=!0);break;case"vcount":t.vcount=u(i.textContent);break;case"p":t.p=u(i.textContent)}}return t}function me(e){for(var t=0,n=0,r=e.length;n<r;n++){!0===e[n].hasUV&&t++}t>0&&t<e.length&&(e.uvsNeedsFix=!0)}function ve(e){var t={},n=e.sources,r=e.vertices,i=e.primitives;if(0===i.length)return{};var o=function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];void 0===t[r.type]&&(t[r.type]=[]),t[r.type].push(r)}return t}(i);for(var a in o){var s=o[a];me(s),t[a]=ge(s,n,r)}return t}function ge(e,t,n){for(var r={},i={array:[],stride:0},o={array:[],stride:0},a={array:[],stride:0},s={array:[],stride:0},c=[],u=4,l=[],h=4,d=new k,f=[],p=0,m=0;m<e.length;m++){var v=e[m],g=v.inputs,y=0;switch(v.type){case"lines":case"linestrips":y=2*v.count;break;case"triangles":y=3*v.count;break;case"polylist":for(var b=0;b<v.count;b++){var x=v.vcount[b];switch(x){case 3:y+=3;break;case 4:y+=6;break;default:y+=3*(x-2)}}break;default:console.warn("ColladaLoader: Unknow primitive type:",v.type)}for(var w in d.addGroup(p,y,m),p+=y,v.material&&f.push(v.material),g){var _=g[w];switch(w){case"VERTEX":for(var S in n){var M=n[S];switch(S){case"POSITION":var T=i.array.length;if(ye(v,t[M],_.offset,i.array),i.stride=t[M].stride,t.skinWeights&&t.skinIndices&&(ye(v,t.skinIndices,_.offset,c),ye(v,t.skinWeights,_.offset,l)),!1===v.hasUV&&!0===e.uvsNeedsFix){y=(i.array.length-T)/i.stride;for(var A=0;A<y;A++)a.array.push(0,0)}break;case"NORMAL":ye(v,t[M],_.offset,o.array),o.stride=t[M].stride;break;case"COLOR":ye(v,t[M],_.offset,s.array),s.stride=t[M].stride;break;case"TEXCOORD":ye(v,t[M],_.offset,a.array),a.stride=t[M].stride;break;default:console.warn('ColladaLoader: Semantic "%s" not handled in geometry build process.',S)}}break;case"NORMAL":ye(v,t[_.id],_.offset,o.array),o.stride=t[_.id].stride;break;case"COLOR":ye(v,t[_.id],_.offset,s.array),s.stride=t[_.id].stride;break;case"TEXCOORD":ye(v,t[_.id],_.offset,a.array),a.stride=t[_.id].stride}}}return i.array.length>0&&d.addAttribute("position",new N(i.array,i.stride)),o.array.length>0&&d.addAttribute("normal",new N(o.array,o.stride)),s.array.length>0&&d.addAttribute("color",new N(s.array,s.stride)),a.array.length>0&&d.addAttribute("uv",new N(a.array,a.stride)),c.length>0&&d.addAttribute("skinIndex",new N(c,u)),l.length>0&&d.addAttribute("skinWeight",new N(l,h)),r.data=d,r.type=e[0].type,r.materialKeys=f,r}function ye(e,t,n,r){var i=e.p,o=e.stride,a=e.vcount;function s(e){for(var t=i[e+n]*u,o=t+u;t<o;t++)r.push(c[t])}var c=t.array,u=t.stride;if(void 0!==e.vcount)for(var l=0,h=0,d=a.length;h<d;h++){var f=a[h];if(4===f){var p=l+1*o,m=l+2*o,v=l+3*o;s(l+0*o),s(p),s(v),s(p),s(m),s(v)}else if(3===f){p=l+1*o,m=l+2*o;s(l+0*o),s(p),s(m)}else if(f>4)for(var g=1,y=f-2;g<=y;g++){p=l+o*g,m=l+o*(g+1);s(l+0*o),s(p),s(m)}l+=o*f}else for(h=0,d=i.length;h<d;h+=o)s(h)}function be(e){return m(nt.geometries[e],ve)}function xe(e){return void 0!==e.build?e.build:e}function we(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"joint":t.joints[r.getAttribute("sid")]=_e(r);break;case"link":t.links.push(Me(r))}}}function _e(e){for(var t,n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"prismatic":case"revolute":t=Se(r)}}return t}function Se(e,t){t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new s,limits:{min:0,max:0},type:e.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"axis":var o=i(r.textContent);t.axis.fromArray(o);break;case"limits":var a=r.getElementsByTagName("max")[0],c=r.getElementsByTagName("min")[0];t.limits.max=parseFloat(a.textContent),t.limits.min=parseFloat(c.textContent)}}return t.limits.min>=t.limits.max&&(t.static=!0),t.middlePosition=(t.limits.min+t.limits.max)/2,t}function Me(e){for(var t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",attachments:[],transforms:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"attachment_full":t.attachments.push(Te(r));break;case"matrix":case"translate":case"rotate":t.transforms.push(Ae(r))}}return t}function Te(e){for(var t={joint:e.getAttribute("joint").split("/").pop(),transforms:[],links:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"link":t.links.push(Me(r));break;case"matrix":case"translate":case"rotate":t.transforms.push(Ae(r))}}return t}function Ae(e){var t={type:e.nodeName},n=i(e.textContent);switch(t.type){case"matrix":t.obj=new a,t.obj.fromArray(n).transpose();break;case"translate":t.obj=new s,t.obj.fromArray(n);break;case"rotate":t.obj=new s,t.obj.fromArray(n),t.angle=o.degToRad(n[3])}return t}function Ee(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"technique_common":Ce(r,t)}}}function Ce(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"inertia":t.inertia=i(r.textContent);break;case"mass":t.mass=i(r.textContent)[0]}}}function Pe(e){for(var t={target:e.getAttribute("target").split("/").pop()},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"axis":var i=r.getElementsByTagName("param")[0];t.axis=i.textContent;var o=t.axis.split("inst_").pop().split("axis")[0];t.jointIndex=o.substr(0,o.length-1)}}return t}function Le(e){return void 0!==e.build?e.build:e}var Oe=new a,Ne=new s;function Re(e){for(var t={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new a,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"node":t.nodes.push(r.getAttribute("id")),Re(r);break;case"instance_camera":t.instanceCameras.push(h(r.getAttribute("url")));break;case"instance_controller":t.instanceControllers.push(Ie(r));break;case"instance_light":t.instanceLights.push(h(r.getAttribute("url")));break;case"instance_geometry":t.instanceGeometries.push(Ie(r));break;case"instance_node":t.instanceNodes.push(h(r.getAttribute("url")));break;case"matrix":var s=i(r.textContent);t.matrix.multiply(Oe.fromArray(s).transpose()),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"translate":s=i(r.textContent);Ne.fromArray(s),t.matrix.multiply(Oe.makeTranslation(Ne.x,Ne.y,Ne.z)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"rotate":s=i(r.textContent);var c=o.degToRad(s[3]);t.matrix.multiply(Oe.makeRotationAxis(Ne.fromArray(s),c)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"scale":s=i(r.textContent);t.matrix.scale(Ne.fromArray(s)),t.transforms[r.getAttribute("sid")]=r.nodeName;break;case"extra":break;default:console.log(r)}}return je(t.id)?console.warn("ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",t.id):nt.nodes[t.id]=t,t}function Ie(e){for(var t={id:h(e.getAttribute("url")),materials:{},skeletons:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];switch(r.nodeName){case"bind_material":for(var i=r.getElementsByTagName("instance_material"),o=0;o<i.length;o++){var a=i[o],s=a.getAttribute("symbol"),c=a.getAttribute("target");t.materials[s]=h(c)}break;case"skeleton":t.skeletons.push(h(r.textContent))}}return t}function De(e,t){var n,r,i=[],o=[];for(n=0;n<e.length;n++){var a=e[n];if(je(a))Fe(Ve(a),t,i);else if(We(a))for(var s=nt.visualScenes[a].children,c=0;c<s.length;c++){var u=s[c];if("JOINT"===u.type)Fe(Ve(u.id),t,i)}else console.error("ColladaLoader: Unable to find root bone of skeleton with ID:",a)}for(n=0;n<t.length;n++)for(c=0;c<i.length;c++)if((r=i[c]).bone.name===t[n].name){o[n]=r,r.processed=!0;break}for(n=0;n<i.length;n++)!1===(r=i[n]).processed&&(o.push(r),r.processed=!0);var l=[],h=[];for(n=0;n<o.length;n++)r=o[n],l.push(r.bone),h.push(r.boneInverse);return new uo(l,h)}function Fe(e,t,n){e.traverse(function(e){if(!0===e.isBone){for(var r,i=0;i<t.length;i++){var o=t[i];if(o.name===e.name){r=o.boneInverse;break}}void 0===r&&(r=new a),n.push({bone:e,boneInverse:r,processed:!1})}})}function ke(e){for(var t=[],n=e.matrix,r=e.nodes,i=e.type,o=e.instanceCameras,a=e.instanceControllers,s=e.instanceLights,c=e.instanceGeometries,u=e.instanceNodes,l=0,h=r.length;l<h;l++)t.push(Ve(r[l]));for(l=0,h=o.length;l<h;l++){var d=se(o[l]);null!==d&&t.push(d.clone())}for(l=0,h=a.length;l<h;l++)for(var f=U((x=a[l]).id),p=ze(be(f.id),x.materials),m=De(x.skeletons,f.skin.joints),v=0,g=p.length;v<g;v++){var y;(y=p[v]).isSkinnedMesh&&(y.bind(m,f.skin.bindMatrix),y.normalizeSkinWeights()),t.push(y)}for(l=0,h=s.length;l<h;l++){var b=he(s[l]);null!==b&&t.push(b.clone())}for(l=0,h=c.length;l<h;l++){var x;for(v=0,g=(p=ze(be((x=c[l]).id),x.materials)).length;v<g;v++)t.push(p[v])}for(l=0,h=u.length;l<h;l++)t.push(Ve(u[l]).clone());if(0===r.length&&1===t.length)y=t[0];else{y="JOINT"===i?new Fn:new oo;for(l=0;l<t.length;l++)y.add(t[l])}return""===y.name&&(y.name="JOINT"===i?e.sid:e.name),y.matrix.copy(n),y.matrix.decompose(y.position,y.quaternion,y.scale),y}var Ue=new un({color:16711935});function Be(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=t[e[r]];void 0===o?(console.warn("ColladaLoader: Material with key %s not found. Apply fallback material.",e[r]),n.push(Ue)):n.push(ne(o))}return n}function ze(e,t){var n=[];for(var r in e){var i=e[r],o=Be(i.materialKeys,t);0===o.length&&("lines"===r||"linestrips"===r?o.push(new ln):o.push(new vr));var a=void 0!==i.data.attributes.skinIndex;if(a)for(var s=0,c=o.length;s<c;s++)o[s].skinning=!0;var u,l=1===o.length?o[0]:o;switch(r){case"lines":u=new Eo(i.data,l);break;case"linestrips":u=new pn(i.data,l);break;case"triangles":case"polylist":u=a?new lo(i.data,l):new fn(i.data,l)}n.push(u)}return n}function je(e){return void 0!==nt.nodes[e]}function Ve(e){return m(nt.nodes[e],ke)}function Ge(e){var t=new oo;t.name=e.name;for(var n=e.children,r=0;r<n.length;r++){var i=n[r];t.add(Ve(i.id))}return t}function We(e){return void 0!==nt.visualScenes[e]}function qe(e){return m(nt.visualScenes[e],Ge)}if(0===e.length)return{scene:new Yn};var Ye=n((new DOMParser).parseFromString(e,"application/xml"),"COLLADA")[0],Je=Ye.getAttribute("version");console.log("ColladaLoader: File version",Je);var Qe,Ze=function(e){return{unit:function(e){return void 0!==e&&!0===e.hasAttribute("meter")?parseFloat(e.getAttribute("meter")):1}(n(e,"unit")[0]),upAxis:function(e){return void 0!==e?e.textContent:"Y_UP"}(n(e,"up_axis")[0])}}(n(Ye,"asset")[0]),Ke=new Ar(this.manager);Ke.setPath(t).setCrossOrigin(this.crossOrigin),Co&&(Qe=new Co(this.manager)).setPath(t);var $e=[],et={},tt=0,nt={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};f(Ye,"library_animations","animation",function(e){for(var t={sources:{},samplers:{},channels:{}},n=0,r=e.childNodes.length;n<r;n++){var i,o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"source":i=o.getAttribute("id"),t.sources[i]=de(o);break;case"sampler":i=o.getAttribute("id"),t.samplers[i]=g(o);break;case"channel":i=o.getAttribute("target"),t.channels[i]=y(o);break;default:console.log(o)}}nt.animations[e.getAttribute("id")]=t}),f(Ye,"library_animation_clips","animation_clip",function(e){for(var t={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"instance_animation":t.animations.push(h(i.getAttribute("url")))}}nt.clips[e.getAttribute("id")]=t}),f(Ye,"library_controllers","controller",function(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"skin":t.id=h(i.getAttribute("source")),t.skin=R(i);break;case"morph":t.id=h(i.getAttribute("source")),console.warn("ColladaLoader: Morph target animation not supported yet.")}}nt.controllers[e.getAttribute("id")]=t}),f(Ye,"library_images","image",function(e){var t={init_from:n(e,"init_from")[0].textContent};nt.images[e.getAttribute("id")]=t}),f(Ye,"library_effects","effect",function(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"profile_COMMON":t.profile=j(i)}}nt.effects[e.getAttribute("id")]=t}),f(Ye,"library_materials","material",function(e){for(var t={name:e.getAttribute("name")},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"instance_effect":t.url=h(i.getAttribute("url"))}}nt.materials[e.getAttribute("id")]=t}),f(Ye,"library_cameras","camera",function(e){for(var t={name:e.getAttribute("name")},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"optics":t.optics=re(i)}}nt.cameras[e.getAttribute("id")]=t}),f(Ye,"library_lights","light",function(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"technique_common":t=ce(i)}}nt.lights[e.getAttribute("id")]=t}),f(Ye,"library_geometries","geometry",function(e){var t={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},r=n(e,"mesh")[0];if(void 0!==r){for(var i=0;i<r.childNodes.length;i++){var o=r.childNodes[i];if(1===o.nodeType){var a=o.getAttribute("id");switch(o.nodeName){case"source":t.sources[a]=de(o);break;case"vertices":t.vertices=fe(o);break;case"polygons":console.warn("ColladaLoader: Unsupported primitive type: ",o.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":t.primitives.push(pe(o));break;default:console.log(o)}}}nt.geometries[e.getAttribute("id")]=t}}),f(Ye,"library_nodes","node",Re),f(Ye,"library_visual_scenes","visual_scene",function(e){var t={name:e.getAttribute("name"),children:[]};!function(e){for(var t=e.getElementsByTagName("node"),n=0;n<t.length;n++){var r=t[n];!1===r.hasAttribute("id")&&r.setAttribute("id","three_default_"+tt++)}}(e);for(var r=n(e,"node"),i=0;i<r.length;i++)t.children.push(Re(r[i]));nt.visualScenes[e.getAttribute("id")]=t}),f(Ye,"library_kinematics_models","kinematics_model",function(e){for(var t={name:e.getAttribute("name")||"",joints:{},links:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"technique_common":we(r,t)}}nt.kinematicsModels[e.getAttribute("id")]=t}),f(Ye,"library_physics_models","physics_model",function(e){for(var t={name:e.getAttribute("name")||"",rigidBodies:{}},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"rigid_body":t.rigidBodies[r.getAttribute("name")]={},Ee(r,t.rigidBodies[r.getAttribute("name")])}}nt.physicsModels[e.getAttribute("id")]=t}),f(Ye,"scene","instance_kinematics_scene",function(e){for(var t={bindJointAxis:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"bind_joint_axis":t.bindJointAxis.push(Pe(r))}}nt.kinematicsScenes[h(e.getAttribute("url"))]=t}),p(nt.animations,b),p(nt.clips,L),p(nt.controllers,F),p(nt.images,B),p(nt.effects,ee),p(nt.materials,te),p(nt.cameras,ae),p(nt.lights,le),p(nt.geometries,ve),p(nt.visualScenes,Ge),function(){var e=nt.clips;if(!0===d(e)){if(!1===d(nt.animations)){var t=[];for(var n in nt.animations)for(var r=x(n),i=0,o=r.length;i<o;i++)t.push(r[i]);$e.push(new Rn("default",-1,t))}}else for(var n in e)$e.push(O(n))}(),function(){var e=Object.keys(nt.kinematicsModels)[0],t=Object.keys(nt.kinematicsScenes)[0],n=Object.keys(nt.visualScenes)[0];if(void 0!==e&&void 0!==t){for(var r=function(e){return m(nt.kinematicsModels[e],xe)}(e),c=function(e){return m(nt.kinematicsScenes[e],Le)}(t),u=qe(n),l=c.bindJointAxis,h={},d=0,f=l.length;d<f;d++){var p=l[d],v=Ye.querySelector('[sid="'+p.target+'"]');if(v){var g=v.parentElement;b(p.jointIndex,g)}}var y=new a;et={joints:r&&r.joints,getJointValue:function(e){var t=h[e];if(t)return t.position;console.warn("ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,t){var n=h[e];if(n){var r=n.joint;if(t>r.limits.max||t<r.limits.min)console.warn("ColladaLoader: Joint "+e+" value "+t+" outside of limits (min: "+r.limits.min+", max: "+r.limits.max+").");else if(r.static)console.warn("ColladaLoader: Joint "+e+" is static.");else{var i=n.object,a=r.axis,s=n.transforms;Oe.identity();for(var c=0;c<s.length;c++){var u=s[c];if(u.sid&&-1!==u.sid.indexOf(e))switch(r.type){case"revolute":Oe.multiply(y.makeRotationAxis(a,o.degToRad(t)));break;case"prismatic":Oe.multiply(y.makeTranslation(a.x*t,a.y*t,a.z*t));break;default:console.warn("ColladaLoader: Unknown joint type: "+r.type)}else switch(u.type){case"matrix":Oe.multiply(u.obj);break;case"translate":Oe.multiply(y.makeTranslation(u.obj.x,u.obj.y,u.obj.z));break;case"scale":Oe.scale(u.obj);break;case"rotate":Oe.multiply(y.makeRotationAxis(u.obj,u.angle))}}i.matrix.copy(Oe),i.matrix.decompose(i.position,i.quaternion,i.scale),h[e].position=t}}else console.log("ColladaLoader: "+e+" does not exist.")}}}function b(e,t){var n=t.getAttribute("name"),c=r.joints[e];u.traverse(function(r){r.name===n&&(h[e]={object:r,transforms:function(e){for(var t=[],n=Ye.querySelector('[id="'+e.id+'"]'),r=0;r<n.childNodes.length;r++){var c=n.childNodes[r];if(1===c.nodeType)switch(c.nodeName){case"matrix":var u=i(c.textContent),l=(new a).fromArray(u).transpose();t.push({sid:c.getAttribute("sid"),type:c.nodeName,obj:l});break;case"translate":case"scale":var u=i(c.textContent),h=(new s).fromArray(u);t.push({sid:c.getAttribute("sid"),type:c.nodeName,obj:h});break;case"rotate":var u=i(c.textContent),h=(new s).fromArray(u),d=o.degToRad(u[3]);t.push({sid:c.getAttribute("sid"),type:c.nodeName,obj:h,angle:d})}}return t}(t),joint:c,position:c.zeroPosition})})}}();var rt=function(e){return qe(h(n(e,"instance_visual_scene")[0].getAttribute("url")))}(n(Ye,"scene")[0]);return"Z_UP"===Ze.upAxis&&rt.quaternion.setFromEuler(new l(-Math.PI/2,0,0)),rt.scale.multiplyScalar(Ze.unit),{animations:$e,kinematics:et,library:nt,scene:rt}}},Lo.prototype=Object.create(Kn.prototype),Lo.prototype.constructor=Lo,Lo.prototype.isCompressedTexture=!0,Object.assign(Oo.prototype,{load:function(e,t,n,r){var i=this,o=[],a=new Lo;a.image=o;var s=new lr(this.manager);function c(c){s.load(e[c],function(e){var n=i._parser(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(u+=1)&&(1===n.mipmapCount&&(a.minFilter=Ze),a.format=n.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,l=0,h=e.length;l<h;++l)c(l);else s.load(e,function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var c=0;c<n.mipmapCount;c++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+c]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=Ze),a.format=n.format,a.needsUpdate=!0,t&&t(a)},n,r);return a},setPath:function(e){return this.path=e,this}});var No=function(e){Oo.call(this,e),this._parser=No.parse};function Ro(e,t){pn.call(this,e,t),this.type="LineLoop"}No.prototype=Object.create(Oo.prototype),No.prototype.constructor=No,No.parse=function(e,t){var n={mipmaps:[],width:0,height:0,format:null,mipmapCount:1};function r(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function i(e,t,n,r){for(var i=n*r*4,o=new Uint8Array(e,t,i),a=new Uint8Array(i),s=0,c=0,u=0;u<r;u++)for(var l=0;l<n;l++){var h=o[c],d=o[++c],f=o[++c],p=o[++c];c++,a[s]=f,a[++s]=d,a[++s]=h,a[++s]=p,s++}return a}var o,a=r("DXT1"),s=r("DXT3"),c=r("DXT5"),u=r("ETC1"),l=new Int32Array(e,0,31);if(542327876!==l[0])return console.error("DDSLoader.parse: Invalid magic number in DDS header."),n;if(4&!l[20])return console.error("DDSLoader.parse: Unsupported format, must contain a FourCC code."),n;var h=l[21],d=!1;switch(h){case a:o=8,n.format=xt;break;case s:o=16,n.format=_t;break;case c:o=16,n.format=St;break;case u:o=8,n.format=Ct;break;default:if(!(32===l[22]&&16711680&l[23]&&65280&l[24]&&255&l[25]&&4278190080&l[26]))return console.error("DDSLoader.parse: Unsupported FourCC code ",function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}(h)),n;d=!0,o=64,n.format=pt}n.mipmapCount=1,131072&l[2]&&!1!==t&&(n.mipmapCount=Math.max(1,l[7]));var f=l[28];if(n.isCubemap=!!(512&f),n.isCubemap&&(!(1024&f)||!(2048&f)||!(4096&f)||!(8192&f)||!(16384&f)||!(32768&f)))return console.error("DDSLoader.parse: Incomplete cubemap faces"),n;n.width=l[4],n.height=l[3];for(var p=l[1]+4,m=n.isCubemap?6:1,v=0;v<m;v++)for(var g=n.width,y=n.height,b=0;b<n.mipmapCount;b++){if(d)var x=(w=i(e,p,g,y)).length;else{x=Math.max(4,g)/4*Math.max(4,y)/4*o;var w=new Uint8Array(e,p,x)}var _={data:w,width:g,height:y};n.mipmaps.push(_),p+=x,g=Math.max(g>>1,1),y=Math.max(y>>1,1)}return n},Ro.prototype=Object.assign(Object.create(pn.prototype),{constructor:Ro,isLineLoop:!0});var Io=function(){function e(e){this.manager=void 0!==e?e:cr}function t(e,t){var n={},r=e.material.uniforms;for(var i in r){var o=r[i];if(o.semantic){var s=o.node,c=e;s&&(c=t[s]),n[i]={semantic:o.semantic,sourceNode:c,targetNode:e,uniform:o}}}this.boundUniforms=n,this._m4=new a}e.prototype={constructor:e,crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=this.path&&"string"==typeof this.path?this.path:Cr.extractUrlBase(e),a=new lr(i.manager);a.setResponseType("arraybuffer"),a.load(e,function(e){i.parse(e,o,t)},n,r)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){this.path=e},parse:function(e,t,i){var o,a={};Cr.decodeText(new Uint8Array(e,0,4))===r.magic?(a[n.KHR_BINARY_GLTF]=new u(e),o=a[n.KHR_BINARY_GLTF].content):o=Cr.decodeText(new Uint8Array(e));var s=JSON.parse(o);s.extensionsUsed&&s.extensionsUsed.indexOf(n.KHR_MATERIALS_COMMON)>=0&&(a[n.KHR_MATERIALS_COMMON]=new function(e){this.name=n.KHR_MATERIALS_COMMON,this.lights={};var t=(e.extensions&&e.extensions[n.KHR_MATERIALS_COMMON]||{}).lights||{};for(var r in t){var i,o=t[r],a=o[o.type],s=(new v).fromArray(a.color);switch(o.type){case"directional":(i=new xo(s)).position.set(0,0,1);break;case"point":i=new yo(s);break;case"spot":(i=new _o(s)).position.set(0,0,1);break;case"ambient":i=new Ao(s)}i&&(this.lights[r]=i)}}(s)),new I(s,a,{crossOrigin:this.crossOrigin,manager:this.manager,path:t||this.path}).parse(function(e,t,n,r){i({scene:e,scenes:t,cameras:n,animations:r})})}},e.Shaders={update:function(){console.warn("LegacyGLTFLoader.Shaders has been deprecated, and now updates automatically.")}},t.prototype.update=function(e,t){var n=this.boundUniforms;for(var r in n){var i=n[r];switch(i.semantic){case"MODELVIEW":i.uniform.value.multiplyMatrices(t.matrixWorldInverse,i.sourceNode.matrixWorld);break;case"MODELVIEWINVERSETRANSPOSE":var o=i.uniform.value;this._m4.multiplyMatrices(t.matrixWorldInverse,i.sourceNode.matrixWorld),o.getNormalMatrix(this._m4);break;case"PROJECTION":i.uniform.value.copy(t.projectionMatrix);break;case"JOINTMATRIX":for(var a=i.uniform.value,s=0;s<a.length;s++)a[s].getInverse(i.sourceNode.matrixWorld).multiply(i.targetNode.skeleton.bones[s].matrixWorld).multiply(i.targetNode.skeleton.boneInverses[s]).multiply(i.targetNode.bindMatrix);break;default:console.warn("Unhandled shader semantic: "+i.semantic)}}},e.Animations={update:function(){console.warn("LegacyGLTFLoader.Animation has been deprecated. Use AnimationMixer instead.")}};var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_MATERIALS_COMMON:"KHR_materials_common"};var r={magic:"glTF",version:1,contentFormat:0},c=20;function u(e){this.name=n.KHR_BINARY_GLTF;var t=new DataView(e,0,c),i={magic:Cr.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0),contentLength:t.getUint32(12,!0),contentFormat:t.getUint32(16,!0)};for(var o in r){var a=r[o];if(i[o]!==a)throw new Error('Unsupported glTF-Binary header: Expected "%s" to be "%s".',o,a)}var s=new Uint8Array(e,c,i.contentLength);this.header=i,this.content=Cr.decodeText(s),this.body=e.slice(c+i.contentLength,i.length)}u.prototype.loadShader=function(e,t){var r=t[e.extensions[n.KHR_BINARY_GLTF].bufferView],i=new Uint8Array(r);return Cr.decodeText(i)};var l={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,TRIANGLES:4,LINES:1,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,VERTEX_SHADER:35633,FRAGMENT_SHADER:35632},h={5126:Number,35675:d,35676:a,35664:x,35665:s,35666:S,35678:Kn},f={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},m={9728:Ye,9729:Ze,9984:Je,9985:Ke,9986:Qe,9987:$e},g={33071:Xe,33648:qe,10497:He},y={6406:dt,6407:ft,6408:pt,6409:mt,6410:vt},b={5121:et,32819:ct,32820:ut,33635:lt},w={1028:Y,1029:q},_={512:we,513:Se,514:Te,515:Me,516:Ae,517:Ce,518:Ae,519:_e},T={32774:oe,32778:ae,32779:se},A={0:le,1:he,768:de,769:fe,770:pe,771:me,772:ve,773:ge,774:ye,775:be,776:xe},E={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},C={scale:"scale",translation:"position",rotation:"quaternion"},P={LINEAR:2301,STEP:Wt},L={2884:"CULL_FACE",2929:"DEPTH_TEST",3042:"BLEND",3089:"SCISSOR_TEST",32823:"POLYGON_OFFSET_FILL",32926:"SAMPLE_ALPHA_TO_COVERAGE"};function O(e,t,n){var r;if(!e)return Promise.resolve();var i=[];if("[object Array]"===Object.prototype.toString.call(e)){r=[];for(var o=e.length,a=0;a<o;a++){(c=t.call(n||this,e[a],a))&&(i.push(c),c instanceof Promise?c.then(function(e,t){r[e]=t}.bind(this,a)):r[a]=c)}}else for(var s in r={},e){var c;if(e.hasOwnProperty(s))(c=t.call(n||this,e[s],s))&&(i.push(c),c instanceof Promise?c.then(function(e,t){r[e]=t}.bind(this,s)):r[s]=c)}return Promise.all(i).then(function(){return r})}function N(e,t){return"string"!=typeof e||""===e?"":/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:(t||"")+e}function R(e){this.isDeferredShaderMaterial=!0,this.params=e}function I(e,t,n){this.json=e||{},this.extensions=t||{},this.options=n||{},this.cache=new function(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}},update:function(t,n){for(var r in e){var i=e[r];i.update&&i.update(t,n)}}}}}return R.prototype.create=function(){var e=Xn.clone(this.params.uniforms);for(var t in this.params.uniforms){var n=this.params.uniforms[t];n.value instanceof Kn&&(e[t].value=n.value,e[t].value.needsUpdate=!0),e[t].semantic=n.semantic,e[t].node=n.node}return this.params.uniforms=e,new wr(this.params)},I.prototype._withDependencies=function(e){for(var t={},n=0;n<e.length;n++){var r=e[n],i="load"+r.charAt(0).toUpperCase()+r.slice(1),o=this.cache.get(r);if(void 0!==o)t[r]=o;else if(this[i]){var a=this[i]();this.cache.add(r,a),t[r]=a}}return O(t,function(e){return e})},I.prototype.parse=function(e){var t=this.json;this.cache.removeAll(),this._withDependencies(["scenes","cameras","animations"]).then(function(n){var r=[];for(var i in n.scenes)r.push(n.scenes[i]);var o=void 0!==t.scene?n.scenes[t.scene]:r[0],a=[];for(var i in n.cameras){var s=n.cameras[i];a.push(s)}var c=[];for(var i in n.animations)c.push(n.animations[i]);e(o,r,a,c)})},I.prototype.loadShaders=function(){var e=this.json,t=this.extensions,r=this.options;return this._withDependencies(["bufferViews"]).then(function(i){return O(e.shaders,function(e){return e.extensions&&e.extensions[n.KHR_BINARY_GLTF]?t[n.KHR_BINARY_GLTF].loadShader(e,i.bufferViews):new Promise(function(t){var n=new lr(r.manager);n.setResponseType("text"),n.load(N(e.uri,r.path),function(e){t(e)})})})})},I.prototype.loadBuffers=function(){var e=this.json,t=this.extensions,r=this.options;return O(e.buffers,function(e,i){return"binary_glTF"===i?t[n.KHR_BINARY_GLTF].body:"arraybuffer"===e.type||void 0===e.type?new Promise(function(t){var n=new lr(r.manager);n.setResponseType("arraybuffer"),n.load(N(e.uri,r.path),function(e){t(e)})}):void console.warn("LegacyGLTFLoader: "+e.type+" buffer type is not supported")})},I.prototype.loadBufferViews=function(){var e=this.json;return this._withDependencies(["buffers"]).then(function(t){return O(e.bufferViews,function(e){var n=t.buffers[e.buffer],r=void 0!==e.byteLength?e.byteLength:0;return n.slice(e.byteOffset,e.byteOffset+r)})})},I.prototype.loadAccessors=function(){var e=this.json;return this._withDependencies(["bufferViews"]).then(function(t){return O(e.accessors,function(e){var n=t.bufferViews[e.bufferView],r=E[e.type],i=f[e.componentType],o=i.BYTES_PER_ELEMENT,a=o*r;if(e.byteStride&&e.byteStride!==a){var s=new i(n);return new Qi(new Yi(s,e.byteStride/o),r,e.byteOffset/o)}return new M(s=new i(n,e.byteOffset,e.count*r),r)})})},I.prototype.loadTextures=function(){var e=this.json,t=(this.extensions,this.options);return this._withDependencies(["bufferViews"]).then(function(r){return O(e.textures,function(i){if(i.source)return new Promise(function(o){var a=e.images[i.source],s=a.uri,c=!1;if(a.extensions&&a.extensions[n.KHR_BINARY_GLTF]){var u=a.extensions[n.KHR_BINARY_GLTF],l=r.bufferViews[u.bufferView],h=new Blob([l],{type:u.mimeType});s=URL.createObjectURL(h),c=!0}var d=Er.Handlers.get(s);null===d&&(d=new Ar(t.manager)),d.setCrossOrigin(t.crossOrigin),d.load(N(s,t.path),function(t){if(c&&URL.revokeObjectURL(s),t.flipY=!1,void 0!==i.name&&(t.name=i.name),t.format=void 0!==i.format?y[i.format]:pt,void 0!==i.internalFormat&&t.format!==y[i.internalFormat]&&console.warn("LegacyGLTFLoader: Three.js doesn't support texture internalFormat which is different from texture format. internalFormat will be forced to be the same value as format."),t.type=void 0!==i.type?b[i.type]:et,i.sampler){var n=e.samplers[i.sampler];t.magFilter=m[n.magFilter]||Ze,t.minFilter=m[n.minFilter]||Qe,t.wrapS=g[n.wrapS]||He,t.wrapT=g[n.wrapT]||He}o(t)},void 0,function(){c&&URL.revokeObjectURL(s),o()})})})})},I.prototype.loadMaterials=function(){var e=this.json;return this._withDependencies(["shaders","textures"]).then(function(t){return O(e.materials,function(r){var i,o,a={},s={};if(r.extensions&&r.extensions[n.KHR_MATERIALS_COMMON]&&(o=r.extensions[n.KHR_MATERIALS_COMMON]),o){var c=["ambient","emission","transparent","transparency","doubleSided"];switch(o.technique){case"BLINN":case"PHONG":i=vr,c.push("diffuse","specular","shininess");break;case"LAMBERT":i=pr,c.push("diffuse");break;case"CONSTANT":default:i=un}c.forEach(function(e){void 0!==o.values[e]&&(a[e]=o.values[e])}),(o.doubleSided||a.doubleSided)&&(s.side=J),(o.transparent||a.transparent)&&(s.transparent=!0,s.opacity=void 0!==a.transparency?a.transparency:1)}else if(void 0===r.technique)i=vr,Object.assign(a,r.values);else{i=R;var u=e.techniques[r.technique];s.uniforms={};var d=e.programs[u.program];if(d){s.fragmentShader=t.shaders[d.fragmentShader],s.fragmentShader||(console.warn("ERROR: Missing fragment shader definition:",d.fragmentShader),i=vr);var f=t.shaders[d.vertexShader];f||(console.warn("ERROR: Missing vertex shader definition:",d.vertexShader),i=vr),s.vertexShader=function(e,t){var n={};for(var r in t.attributes){var i=t.attributes[r],o=(h=t.parameters[i]).type,a=h.semantic;n[r]={type:o,semantic:a}}var s=t.parameters,c=t.attributes,u={};for(var r in n){var l=s[i=c[r]];(a=l.semantic)&&(u[r]=l)}for(var i in u){a=(h=u[i]).semantic;var h,d=new RegExp("\\b"+i+"\\b","g");switch(a){case"POSITION":e=e.replace(d,"position");break;case"NORMAL":e=e.replace(d,"normal");break;case"TEXCOORD_0":case"TEXCOORD0":case"TEXCOORD":e=e.replace(d,"uv");break;case"TEXCOORD_1":e=e.replace(d,"uv2");break;case"COLOR_0":case"COLOR0":case"COLOR":e=e.replace(d,"color");break;case"WEIGHT":e=e.replace(d,"skinWeight");break;case"JOINT":e=e.replace(d,"skinIndex")}}return e}(f,u);var p=u.uniforms;for(var m in p){var g=p[m],y=u.parameters[g],b=y.type;if(!h[b])throw new Error("Unknown shader uniform param type: "+b);var x,S=y.count;void 0!==r.values&&(x=r.values[g]);var M=new h[b],E=y.semantic,C=y.node;switch(b){case l.FLOAT:M=y.value,"transparency"==g&&(s.transparent=!0),void 0!==x&&(M=x);break;case l.FLOAT_VEC2:case l.FLOAT_VEC3:case l.FLOAT_VEC4:case l.FLOAT_MAT3:y&&y.value&&M.fromArray(y.value),x&&M.fromArray(x);break;case l.FLOAT_MAT2:console.warn("FLOAT_MAT2 is not a supported uniform type");break;case l.FLOAT_MAT4:if(S){M=new Array(S);for(var P=0;P<S;P++)M[P]=new h[b];if(y&&y.value){var O=y.value;M.fromArray(O)}x&&M.fromArray(x)}else{if(y&&y.value){var N=y.value;M.fromArray(N)}x&&M.fromArray(x)}break;case l.SAMPLER_2D:M=void 0!==x?t.textures[x]:void 0!==y.value?t.textures[y.value]:null}s.uniforms[m]={value:M,semantic:E,node:C}}for(var I=u.states||{},D=I.enable||[],F=I.functions||{},k=!1,U=!1,B=!1,z=0,j=D.length;z<j;z++){var V=D[z];switch(L[V]){case"CULL_FACE":k=!0;break;case"DEPTH_TEST":U=!0;break;case"BLEND":B=!0;break;case"SCISSOR_TEST":case"POLYGON_OFFSET_FILL":case"SAMPLE_ALPHA_TO_COVERAGE":break;default:throw new Error("Unknown technique.states.enable: "+V)}}s.side=k?void 0!==F.cullFace?w[F.cullFace]:q:J,s.depthTest=U,s.depthFunc=void 0!==F.depthFunc?_[F.depthFunc]:Se,s.depthWrite=void 0===F.depthMask||F.depthMask[0],s.blending=B?ie:$,s.transparent=B;var G=F.blendEquationSeparate;void 0!==G?(s.blendEquation=T[G[0]],s.blendEquationAlpha=T[G[1]]):(s.blendEquation=oe,s.blendEquationAlpha=oe);var W=F.blendFuncSeparate;void 0!==W?(s.blendSrc=A[W[0]],s.blendDst=A[W[1]],s.blendSrcAlpha=A[W[2]],s.blendDstAlpha=A[W[3]]):(s.blendSrc=he,s.blendDst=le,s.blendSrcAlpha=he,s.blendDstAlpha=le)}}Array.isArray(a.diffuse)?s.color=(new v).fromArray(a.diffuse):"string"==typeof a.diffuse&&(s.map=t.textures[a.diffuse]),delete s.diffuse,"string"==typeof a.reflective&&(s.envMap=t.textures[a.reflective]),"string"==typeof a.bump&&(s.bumpMap=t.textures[a.bump]),Array.isArray(a.emission)?i===un?s.color=(new v).fromArray(a.emission):s.emissive=(new v).fromArray(a.emission):"string"==typeof a.emission&&(i===un?s.map=t.textures[a.emission]:s.emissiveMap=t.textures[a.emission]),Array.isArray(a.specular)?s.specular=(new v).fromArray(a.specular):"string"==typeof a.specular&&(s.specularMap=t.textures[a.specular]),void 0!==a.shininess&&(s.shininess=a.shininess);var H=new i(s);return void 0!==r.name&&(H.name=r.name),H})})},I.prototype.loadMeshes=function(){var e=this.json;return this._withDependencies(["accessors","materials"]).then(function(t){return O(e.meshes,function(n){var r=new oo;void 0!==n.name&&(r.name=n.name),n.extras&&(r.userData=n.extras);var i=n.primitives||[];for(var o in i){var a=i[o];if(a.mode===l.TRIANGLES||void 0===a.mode){var s=new k,c=a.attributes;for(var u in c){if(!(p=c[u]))return;var h=t.accessors[p];switch(u){case"POSITION":s.addAttribute("position",h);break;case"NORMAL":s.addAttribute("normal",h);break;case"TEXCOORD_0":case"TEXCOORD0":case"TEXCOORD":s.addAttribute("uv",h);break;case"TEXCOORD_1":s.addAttribute("uv2",h);break;case"COLOR_0":case"COLOR0":case"COLOR":s.addAttribute("color",h);break;case"WEIGHT":s.addAttribute("skinWeight",h);break;case"JOINT":s.addAttribute("skinIndex",h);break;default:if(!a.material)break;if(!(v=e.materials[a.material]).technique)break;var d=e.techniques[v.technique].parameters||{};for(var f in d)d[f].semantic===u&&s.addAttribute(f,h)}}a.indices&&s.setIndex(t.accessors[a.indices]),(m=new fn(s,v=void 0!==t.materials?t.materials[a.material]:new vr({color:0,emissive:8947848,specular:0,shininess:0,transparent:!1,depthTest:!0,side:q}))).castShadow=!0,m.name="0"===o?r.name:r.name+o,a.extras&&(m.userData=a.extras),r.add(m)}else if(a.mode===l.LINES){s=new k,c=a.attributes;for(var u in c){var p;if(!(p=c[u]))return;h=t.accessors[p];switch(u){case"POSITION":s.addAttribute("position",h);break;case"COLOR_0":case"COLOR0":case"COLOR":s.addAttribute("color",h)}}var m,v=t.materials[a.material];a.indices?(s.setIndex(t.accessors[a.indices]),m=new Eo(s,v)):m=new pn(s,v),m.name="0"===o?r.name:r.name+o,a.extras&&(m.userData=a.extras),r.add(m)}else console.warn("Only triangular and line primitives are supported")}return r})})},I.prototype.loadCameras=function(){return O(this.json.cameras,function(e){if("perspective"==e.type&&e.perspective){var t=e.perspective.yfov,n=void 0!==e.perspective.aspectRatio?e.perspective.aspectRatio:1,r=t*n,a=new Hn(o.radToDeg(r),n,e.perspective.znear||1,e.perspective.zfar||2e6);return void 0!==e.name&&(a.name=e.name),e.extras&&(a.userData=e.extras),a}if("orthographic"==e.type&&e.orthographic){a=new Jn(i.innerWidth/-2,i.innerWidth/2,i.innerHeight/2,i.innerHeight/-2,e.orthographic.znear,e.orthographic.zfar);return void 0!==e.name&&(a.name=e.name),e.extras&&(a.userData=e.extras),a}})},I.prototype.loadSkins=function(){var e=this.json;return this._withDependencies(["accessors"]).then(function(t){return O(e.skins,function(e){var n=new a;return void 0!==e.bindShapeMatrix&&n.fromArray(e.bindShapeMatrix),{bindShapeMatrix:n,jointNames:e.jointNames,inverseBindMatrices:t.accessors[e.inverseBindMatrices]}})})},I.prototype.loadAnimations=function(){var e=this.json;return this._withDependencies(["accessors","nodes"]).then(function(t){return O(e.animations,function(e,n){var r=[];for(var i in e.channels){var o=e.channels[i],a=e.samplers[o.sampler];if(a){var s=o.target,c=s.id,u=void 0!==e.parameters?e.parameters[a.input]:a.input,l=void 0!==e.parameters?e.parameters[a.output]:a.output,h=t.accessors[u],d=t.accessors[l],f=t.nodes[c];if(f){f.updateMatrix(),f.matrixAutoUpdate=!0;var p=C[s.path]===C.rotation?Ln:Nn,m=f.name?f.name:f.uuid,v=void 0!==a.interpolation?P[a.interpolation]:2301;r.push(new p(m+"."+C[s.path],_n.arraySlice(h.array,0),_n.arraySlice(d.array,0),v))}}}return new Rn(c=void 0!==e.name?e.name:"animation_"+n,void 0,r)})})},I.prototype.loadNodes=function(){var e=this.json,t=this.extensions,r=this;return O(e.nodes,function(e){var t,n=new a;return e.jointName?((t=new Fn).name=void 0!==e.name?e.name:e.jointName,t.jointName=e.jointName):(t=new p,void 0!==e.name&&(t.name=e.name)),e.extras&&(t.userData=e.extras),void 0!==e.matrix?(n.fromArray(e.matrix),t.applyMatrix(n)):(void 0!==e.translation&&t.position.fromArray(e.translation),void 0!==e.rotation&&t.quaternion.fromArray(e.rotation),void 0!==e.scale&&t.scale.fromArray(e.scale)),t}).then(function(i){return r._withDependencies(["meshes","skins","cameras"]).then(function(r){return O(i,function(o,s){var c=e.nodes[s];if(void 0!==c.meshes)for(var u in c.meshes){var l=c.meshes[u],h=r.meshes[l];if(void 0!==h)for(var d in h.children){var f,p=h.children[d],m=p.material,v=p.geometry,g=p.userData,y=p.name;switch(m.isDeferredShaderMaterial?m=b=m.create():b=m,p.type){case"LineSegments":p=new Eo(v,b);break;case"LineLoop":p=new Ro(v,b);break;case"Line":p=new pn(v,b);break;default:p=new fn(v,b)}if(p.castShadow=!0,p.userData=g,p.name=y,c.skin&&(f=r.skins[c.skin]),f){var b,x=function(e){for(var t=Object.keys(i),n=0,r=t.length;n<r;n++){var o=i[t[n]];if(o.jointName===e)return o}return null},w=v;(b=m).skinning=!0,(p=new lo(w,b)).castShadow=!0,p.userData=g,p.name=y;for(var _=[],S=[],M=0,T=f.jointNames.length;M<T;M++){var A=f.jointNames[M],E=x(A);if(E){_.push(E);var C=f.inverseBindMatrices.array,P=(new a).fromArray(C,16*M);S.push(P)}else console.warn("WARNING: joint: '"+A+"' could not be found")}p.bind(new uo(_,S),f.bindShapeMatrix);var L=function(t,n,r){var o=t[r];if(void 0!==o)for(var a=0,s=o.length;a<s;a++){var c=o[a],u=i[c],l=e.nodes[c];void 0!==u&&!0===u.isBone&&void 0!==l&&(n.add(u),L(l,u,"children"))}};L(c,p,"skeletons")}o.add(p)}else console.warn("LegacyGLTFLoader: Couldn't find node \""+l+'".')}if(void 0!==c.camera){var O=r.cameras[c.camera];o.add(O)}if(c.extensions&&c.extensions[n.KHR_MATERIALS_COMMON]&&c.extensions[n.KHR_MATERIALS_COMMON].light){var N=t[n.KHR_MATERIALS_COMMON].lights[c.extensions[n.KHR_MATERIALS_COMMON].light];o.add(N)}return o})})})},I.prototype.loadScenes=function(){var e=this.json;function n(t,r,i){var o=i[t];r.add(o);var a=e.nodes[t];if(a.children)for(var s=a.children,c=0,u=s.length;c<u;c++){n(s[c],o,i)}}return this._withDependencies(["nodes"]).then(function(r){return O(e.scenes,function(e){var i=new Yn;void 0!==e.name&&(i.name=e.name),e.extras&&(i.userData=e.extras);for(var o=e.nodes||[],a=0,s=o.length;a<s;a++){n(o[a],i,r.nodes)}return i.traverse(function(e){e.material&&e.material.isRawShaderMaterial&&(e.gltfShader=new t(e,r.nodes),e.onBeforeRender=function(e,t,n){this.gltfShader.update(t,n)})}),i})})},e}(),Do=function(e){this.timeLoaded=0,this.manager=e||cr,this.materials=null,this.verbosity=0,this.attributeOptions={},this.drawMode=Xt,this.nativeAttributeMap={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"}};function Fo(e,t,n){$n.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}Do.prototype={constructor:Do,load:function(e,t,n,r){var i=this,o=new lr(i.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.load(e,function(e){i.decodeDracoFile(e,t)},n,r)},setPath:function(e){return this.path=e,this},setVerbosity:function(e){return this.verbosity=e,this},setDrawMode:function(e){return this.drawMode=e,this},setSkipDequantization:function(e,t){var n=!0;return void 0!==t&&(n=t),this.getAttributeOptions(e).skipDequantization=n,this},decodeDracoFile:function(e,t,n,r){var i=this;Do.getDecoderModule().then(function(o){i.decodeDracoFileInternal(e,o.decoder,t,n||{},r||{})})},decodeDracoFileInternal:function(e,t,n,r,i){var o=new t.DecoderBuffer;o.Init(new Int8Array(e),e.byteLength);var a=new t.Decoder,s=a.GetEncodedGeometryType(o);if(s==t.TRIANGULAR_MESH)this.verbosity>0&&console.log("Loaded a mesh.");else{if(s!=t.POINT_CLOUD){var c="DRACOLoader: Unknown geometry type.";throw console.error(c),new Error(c)}this.verbosity>0&&console.log("Loaded a point cloud.")}n(this.convertDracoGeometryTo3JS(t,a,s,o,r,i))},addAttributeToGeometry:function(e,t,n,r,i,o,a,s){if(0===o.ptr){var c="DRACOLoader: No attribute "+r;throw console.error(c),new Error(c)}var u,l,h=o.num_components(),d=n.num_points()*h;switch(i){case Float32Array:u=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(n,o,u),s[r]=new Float32Array(d),l=N;break;case Int8Array:u=new e.DracoInt8Array,t.GetAttributeInt8ForAllPoints(n,o,u),s[r]=new Int8Array(d),l=T;break;case Int16Array:u=new e.DracoInt16Array,t.GetAttributeInt16ForAllPoints(n,o,u),s[r]=new Int16Array(d),l=C;break;case Int32Array:u=new e.DracoInt32Array,t.GetAttributeInt32ForAllPoints(n,o,u),s[r]=new Int32Array(d),l=L;break;case Uint8Array:u=new e.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(n,o,u),s[r]=new Uint8Array(d),l=A;break;case Uint16Array:u=new e.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(n,o,u),s[r]=new Uint16Array(d),l=P;break;case Uint32Array:u=new e.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(n,o,u),s[r]=new Uint32Array(d),l=O;break;default:c="DRACOLoader: Unexpected attribute type.";throw console.error(c),new Error(c)}for(var f=0;f<d;f++)s[r][f]=u.GetValue(f);a.addAttribute(r,new l(s[r],h)),e.destroy(u)},convertDracoGeometryTo3JS:function(e,t,n,r,i,o){var a,s;!0===this.getAttributeOptions("position").skipDequantization&&t.SkipAttributeTransform(e.POSITION);var c=performance.now();if(n===e.TRIANGULAR_MESH?(a=new e.Mesh,s=t.DecodeBufferToMesh(r,a)):(a=new e.PointCloud,s=t.DecodeBufferToPointCloud(r,a)),!s.ok()||0==a.ptr){var u="DRACOLoader: Decoding failed: ";throw u+=s.error_msg(),console.error(u),e.destroy(t),e.destroy(a),new Error(u)}var l,h=performance.now();e.destroy(r),n==e.TRIANGULAR_MESH?(l=a.num_faces(),this.verbosity>0&&console.log("Number of faces loaded: "+l.toString())):l=0;var d=a.num_points(),f=a.num_attributes();this.verbosity>0&&(console.log("Number of points loaded: "+d.toString()),console.log("Number of attributes loaded: "+f.toString()));var p=t.GetAttributeId(a,e.POSITION);if(-1==p){u="DRACOLoader: No position attribute found.";throw console.error(u),e.destroy(t),e.destroy(a),new Error(u)}var m=t.GetAttribute(a,p),v={},g=new k;for(var y in this.nativeAttributeMap)if(void 0===i[y]){var b=t.GetAttributeId(a,e[this.nativeAttributeMap[y]]);if(-1!==b){this.verbosity>0&&console.log("Loaded "+y+" attribute.");var x=t.GetAttribute(a,b);this.addAttributeToGeometry(e,t,a,y,Float32Array,x,g,v)}}for(var y in i){var w=o[y]||Float32Array,_=i[y];x=t.GetAttributeByUniqueId(a,_);this.addAttributeToGeometry(e,t,a,y,w,x,g,v)}if(n==e.TRIANGULAR_MESH)if(this.drawMode===qt){var S=new e.DracoInt32Array;t.GetTriangleStripsFromMesh(a,S);v.indices=new Uint32Array(S.size());for(var M=0;M<S.size();++M)v.indices[M]=S.GetValue(M);e.destroy(S)}else{var T=3*l;v.indices=new Uint32Array(T);var A=new e.DracoInt32Array;for(M=0;M<l;++M){t.GetFaceFromMesh(a,M,A);var E=3*M;v.indices[E]=A.GetValue(0),v.indices[E+1]=A.GetValue(1),v.indices[E+2]=A.GetValue(2)}e.destroy(A)}g.drawMode=this.drawMode,n==e.TRIANGULAR_MESH&&g.setIndex(new(v.indices.length>65535?O:P)(v.indices,1));var C=new e.AttributeQuantizationTransform;if(C.InitFromAttribute(m)){g.attributes.position.isQuantized=!0,g.attributes.position.maxRange=C.range(),g.attributes.position.numQuantizationBits=C.quantization_bits(),g.attributes.position.minValues=new Float32Array(3);for(M=0;M<3;++M)g.attributes.position.minValues[M]=C.min_value(M)}return e.destroy(C),e.destroy(t),e.destroy(a),this.decode_time=h-c,this.import_time=performance.now()-h,this.verbosity>0&&(console.log("Decode time: "+this.decode_time),console.log("Import time: "+this.import_time)),g},isVersionSupported:function(e,t){Do.getDecoderModule().then(function(n){t(n.decoder.isVersionSupported(e))})},getAttributeOptions:function(e){return void 0===this.attributeOptions[e]&&(this.attributeOptions[e]={}),this.attributeOptions[e]}},Do.decoderPath="./",Do.decoderConfig={},Do.decoderModulePromise=null,Do.setDecoderPath=function(e){Do.decoderPath=e},Do.setDecoderConfig=function(e){var t=Do.decoderConfig.wasmBinary;Do.decoderConfig=e||{},Do.releaseDecoderModule(),t&&(Do.decoderConfig.wasmBinary=t)},Do.releaseDecoderModule=function(){Do.decoderModulePromise=null},Do.getDecoderModule=function(){var e=this,t=Do.decoderPath,n=Do.decoderConfig,r=Do.decoderModulePromise;return r||("undefined"!=typeof DracoDecoderModule?r=Promise.resolve():"object"!=typeof WebAssembly||"js"===n.type?r=Do._loadScript(t+"draco_decoder.js"):(n.wasmBinaryFile=t+"draco_decoder.wasm",r=Do._loadScript(t+"draco_wasm_wrapper.js").then(function(){return Do._loadArrayBuffer(n.wasmBinaryFile)}).then(function(e){n.wasmBinary=e})),r=r.then(function(){return new Promise(function(t){n.onModuleLoaded=function(n){e.timeLoaded=performance.now(),t({decoder:n})},DracoDecoderModule(n)})}),Do.decoderModulePromise=r,r)},Do._loadScript=function(e){var t=document.getElementById("decoder_script");null!==t&&t.parentNode.removeChild(t);var n=document.getElementsByTagName("head")[0],r=document.createElement("script");return r.id="decoder_script",r.type="text/javascript",r.src=e,new Promise(function(e){r.onload=e,n.appendChild(r)})},Do._loadArrayBuffer=function(e){var t=new lr;return t.setResponseType("arraybuffer"),new Promise(function(n,r){t.load(e,n,void 0,r)})},Fo.prototype=Object.create($n.prototype),Fo.prototype.constructor=Fo,Fo.prototype.isWebGLRenderTargetCube=!0;var ko=function(e,t){this.sourceTexture=e,this.resolution=t.resolution||512,this.views=[{t:[1,0,0],u:[0,-1,0]},{t:[-1,0,0],u:[0,-1,0]},{t:[0,1,0],u:[0,0,1]},{t:[0,-1,0],u:[0,0,-1]},{t:[0,0,1],u:[0,-1,0]},{t:[0,0,-1],u:[0,-1,0]}],this.camera=new Hn(90,1,.1,10),this.boxMesh=new fn(new Un(1,1,1),this.getShader()),this.boxMesh.material.side=Y,this.scene=new Yn,this.scene.add(this.boxMesh);var n={format:t.format||this.sourceTexture.format,magFilter:this.sourceTexture.magFilter,minFilter:this.sourceTexture.minFilter,type:t.type||this.sourceTexture.type,generateMipmaps:this.sourceTexture.generateMipmaps,anisotropy:this.sourceTexture.anisotropy,encoding:this.sourceTexture.encoding};this.renderTarget=new Fo(this.resolution,this.resolution,n)};function Uo(e){this.manager=void 0!==e?e:cr,this._parser=null}ko.prototype={constructor:ko,update:function(e){for(var t=0;t<6;t++){this.renderTarget.activeCubeFace=t;var n=this.views[t];this.camera.position.set(0,0,0),this.camera.up.set(n.u[0],n.u[1],n.u[2]),this.camera.lookAt(n.t[0],n.t[1],n.t[2]),e.render(this.scene,this.camera,this.renderTarget,!0)}return this.renderTarget.texture},getShader:function(){var e=new qn({uniforms:{equirectangularMap:{value:this.sourceTexture}},vertexShader:"varying vec3 localPosition;\n\t\t\t\t\n\t\t\t\tvoid main() {\n\t\t\t\t\tlocalPosition = position;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec3 localPosition;\n\t\t\t\tuniform sampler2D equirectangularMap;\n\t\t\t\t\n\t\t\t\tvec2 EquirectangularSampleUV(vec3 v) {\n\t\t\t    vec2 uv = vec2(atan(v.z, v.x), asin(v.y));\n\t\t\t    uv *= vec2(0.1591, 0.3183); // inverse atan\n\t\t\t    uv += 0.5;\n\t\t\t    return uv;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 uv = EquirectangularSampleUV(normalize(localPosition));\n    \t\t\tvec3 color = texture2D(equirectangularMap, uv).rgb;\n    \t\t\t\n\t\t\t\t\tgl_FragColor = vec4( color, 1.0 );\n\t\t\t\t}",blending:$});return e.type="EquirectangularToCubeGenerator",e},dispose:function(){this.boxMesh.geometry.dispose(),this.boxMesh.material.dispose(),this.renderTarget.dispose()}},Object.assign(Uo.prototype,{load:function(e,t,n,r){var i=this,o=new Vi,a=new lr(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){var n=i._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Xe,o.wrapT=void 0!==n.wrapT?n.wrapT:Xe,o.magFilter=void 0!==n.magFilter?n.magFilter:Ze,o.minFilter=void 0!==n.minFilter?n.minFilter:$e,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=Ze),o.needsUpdate=!0,t&&t(o,n))},n,r),o}});var Bo=function(e){this.manager=void 0!==e?e:cr};(Bo.prototype=Object.create(Uo.prototype))._parser=function(e){var t=65536,n=t>>3,r=14,i=65537,o=1<<r,a=o-1,s=59,c=63,u=2+c-s,l=8,h=4,d=4,f=2,p=1;var m={l:0,c:0,lc:0};function v(e,t,n,r,i){for(;n<e;)t=t<<8|I(r,i),n+=8;n-=e,m.l=t>>n&(1<<e)-1,m.c=t,m.lc=n}var g=new Array(59);function y(e,t,n,r,o,a,l){for(var h=n,d=0,f=0;o<=a;o++){if(h.value-n.value>r)return!1;v(6,d,f,e,h);var p=m.l;if(d=m.c,f=m.lc,l[o]=p,p==c){if(h.value-n.value>r)throw"Something wrong with hufUnpackEncTable";v(8,d,f,e,h);var y=m.l+u;if(d=m.c,f=m.lc,o+y>a+1)throw"Something wrong with hufUnpackEncTable";for(;y--;)l[o++]=0;o--}else if(p>=s){if(o+(y=p-s+2)>a+1)throw"Something wrong with hufUnpackEncTable";for(;y--;)l[o++]=0;o--}}!function(e){for(var t=0;t<=58;++t)g[t]=0;for(t=0;t<i;++t)g[e[t]]+=1;var n=0;for(t=58;t>0;--t){var r=n+g[t]>>1;g[t]=n,n=r}for(t=0;t<i;++t){var o=e[t];o>0&&(e[t]=o|g[o]++<<6)}}(l)}function b(e){return 63&e}function x(e){return e>>6}var w={c:0,lc:0};function _(e,t,n,r){e=e<<8|I(n,r),t+=8,w.c=e,w.lc=t}var S={c:0,lc:0};function M(e,t,n,r,i,o,a,s,c,u){if(e==t){r<8&&(_(n,r,i,a),n=w.c,r=w.lc);var l=n>>(r-=8);l=new Uint8Array([l])[0];if(c.value+l>u)return!1;for(var h=s[c.value-1];l-- >0;)s[c.value++]=h}else{if(!(c.value<u))return!1;s[c.value++]=e}S.c=n,S.lc=r}function T(e){var t=function(e){return 65535&e}(e);return t>32767?t-65536:t}var A={a:0,b:0};function E(e,t){var n=T(e),r=T(t),i=n+(1&r)+(r>>1),o=i,a=i-r;A.a=o,A.b=a}function C(e,t,n,r,i,o,a){for(var s,c=n>i?i:n,u=1;u<=c;)u<<=1;for(s=u>>=1,u>>=1;u>=1;){for(var l,h,d,f,p=0,m=p+o*(i-s),v=o*u,g=o*s,y=r*u,b=r*s;p<=m;p+=g){for(var x=p,w=p+r*(n-s);x<=w;x+=b){var _=x+y,S=(M=x+v)+y;E(t[x+e],t[M+e]),l=A.a,d=A.b,E(t[_+e],t[S+e]),h=A.a,f=A.b,E(l,h),t[x+e]=A.a,t[_+e]=A.b,E(d,f),t[M+e]=A.a,t[S+e]=A.b}if(n&u){var M=x+v;E(t[x+e],t[M+e]),l=A.a,t[M+e]=A.b,t[x+e]=l}}if(i&u)for(x=p,w=p+r*(n-s);x<=w;x+=b){_=x+y;E(t[x+e],t[_+e]),l=A.a,t[_+e]=A.b,t[x+e]=l}s=u,u>>=1}return p}function P(e,t,n,s,c,u,l){var h=n.value,d=R(t,n),f=R(t,n);n.value+=4;var p=R(t,n);if(n.value+=4,d<0||d>=i||f<0||f>=i)throw"Something wrong with HUF_ENCSIZE";var m=new Array(i),v=new Array(o);if(function(e){for(var t=0;t<o;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(v),y(e,0,n,s-(n.value-h),d,f,m),p>8*(s-(n.value-h)))throw"Something wrong with hufUncompress";!function(e,t,n,i){for(;t<=n;t++){var o=x(e[t]),a=b(e[t]);if(o>>a)throw"Invalid table entry";if(a>r){if((l=i[o>>a-r]).len)throw"Invalid table entry";if(l.lit++,l.p){var s=l.p;l.p=new Array(l.lit);for(var c=0;c<l.lit-1;++c)l.p[c]=s[c]}else l.p=new Array(1);l.p[l.lit-1]=t}else if(a){var u=0;for(c=1<<r-a;c>0;c--){var l;if((l=i[(o<<r-a)+u]).len||l.p)throw"Invalid table entry";l.len=a,l.lit=t,u++}}}}(m,d,f,v),function(e,t,n,i,o,s,c,u,l,h){for(var d=0,f=0,p=u,m=Math.trunc(o.value+(s+7)/8);o.value<m;)for(_(d,f,n,o),d=w.c,f=w.lc;f>=r;)if((T=t[d>>f-r&a]).len)f-=T.len,M(T.lit,c,d,f,n,0,o,l,h,p),d=S.c,f=S.lc;else{if(!T.p)throw"hufDecode issues";var v;for(v=0;v<T.lit;v++){for(var g=b(e[T.p[v]]);f<g&&o.value<m;)_(d,f,n,o),d=w.c,f=w.lc;if(f>=g&&x(e[T.p[v]])==(d>>f-g&(1<<g)-1)){f-=g,M(T.p[v],c,d,f,n,0,o,l,h,p),d=S.c,f=S.lc;break}}if(v==T.lit)throw"hufDecode issues"}var y=8-s&7;for(d>>=y,f-=y;f>0;){var T;if(!(T=t[d<<r-f&a]).len)throw"hufDecode issues";f-=T.len,M(T.lit,c,d,f,n,0,o,l,h,p),d=S.c,f=S.lc}}(m,v,e,0,n,p,f,l,c,u)}function L(e,r,i,o,a,s,c,u,l,h){var d=new Uint8Array(n),f=U(o,a),p=U(o,a);if(p>=n)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(f<=p)for(var m=0;m<p-f+1;m++)d[m+f]=D(o,a);var v=new Uint16Array(t);!function(e,n){for(var r=0,i=0;i<t;++i)(0==i||e[i>>3]&1<<(7&i))&&(n[r++]=i);for(var o=r-1;r<t;)n[r++]=0}(d,v);P(i,o,a,R(o,a),e,r,s);var g=new Array(c),y=0;for(m=0;m<c;m++){u[m];g[m]={},g[m].start=y,g[m].end=g[m].start,g[m].nx=l,g[m].ny=h,g[m].size=1,y+=g[m].nx*g[m].ny*g[m].size}var b=0;for(m=0;m<c;m++)for(var x=0;x<g[m].size;++x)b+=C(x+b,e,g[m].nx,g[m].size,g[m].ny,g[m].nx*g[m].size);return function(e,t,n){for(var r=0;r<n;++r)t[r]=e[t[r]]}(v,e,y),!0}function O(e,t){for(var n=new Uint8Array(e),r=0;0!=n[t.value+r];)r+=1;var i=(new TextDecoder).decode(n.slice(t.value,t.value+r));return t.value=t.value+r+1,i}function N(e,t){var n=e.getUint32(0,!0);return t.value=t.value+l,n}function R(e,t){var n=e.getUint32(t.value,!0);return t.value=t.value+d,n}function I(e,t){var n=e[t.value];return t.value=t.value+p,n}function D(e,t){var n=e.getUint8(t.value);return t.value=t.value+p,n}function F(e,t){var n=e.getFloat32(t.value,!0);return t.value+=h,n}function k(e){var t=(31744&e)>>10,n=1023&e;return(e>>15?-1:1)*(t?31===t?n?NaN:1/0:Math.pow(2,t-15)*(1+n/1024):n/1024*6103515625e-14)}function U(e,t){var n=e.getUint16(t.value,!0);return t.value+=f,n}function B(e,t){return k(U(e,t))}function z(e,t,n,r,i){if("string"===r||"iccProfile"===r)return function(e,t,n){var r=(new TextDecoder).decode(new Uint8Array(e).slice(t.value,t.value+n));return t.value=t.value+n,r}(t,n,i);if("chlist"===r)return function(e,t,n,r){for(var i=n.value,o=[];n.value<i+r-1;){var a=O(t,n),s=R(e,n),c=D(e,n);n.value+=3;var u=R(e,n),l=R(e,n);o.push({name:a,pixelType:s,pLinear:c,xSampling:u,ySampling:l})}return n.value+=1,o}(e,t,n,i);if("chromaticities"===r)return function(e,t){return{redX:F(e,t),redY:F(e,t),greenX:F(e,t),greenY:F(e,t),blueX:F(e,t),blueY:F(e,t),whiteX:F(e,t),whiteY:F(e,t)}}(e,n);if("compression"===r)return function(e,t){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION"][D(e,t)]}(e,n);if("box2i"===r)return function(e,t){return{xMin:R(e,t),yMin:R(e,t),xMax:R(e,t),yMax:R(e,t)}}(e,n);if("lineOrder"===r)return function(e,t){return["INCREASING_Y"][D(e,t)]}(e,n);if("float"===r)return F(e,n);if("v2f"===r)return function(e,t){return[F(e,t),F(e,t)]}(e,n);if("int"===r)return R(e,n);throw"Cannot parse value for unsupported type: "+r}for(var j=new DataView(e),V=new Uint8Array(e),G={},W=(j.getUint32(0,!0),j.getUint8(4,!0),j.getUint8(5,!0),{value:8}),H=!0;H;){var X=O(e,W);if(0==X)H=!1;else{var q=z(j,e,W,O(e,W),R(j,W));G[X]=q}}var Y=G.dataWindow.yMax+1,J=1;"PIZ_COMPRESSION"===G.compression&&(J=32);for(var Q=Y/J,Z=0;Z<Q;Z++)N(j,W);var K=G.dataWindow.xMax-G.dataWindow.xMin+1,$=G.dataWindow.yMax-G.dataWindow.yMin+1,ee=G.channels.length,te=new Float32Array(K*$*ee),ne={R:0,G:1,B:2,A:3};if("NO_COMPRESSION"===G.compression)for(var re=0;re<$;re++)for(var ie=R(j,W),oe=(R(j,W),0);oe<G.channels.length;oe++){var ae=ne[G.channels[oe].name];if(1!==G.channels[oe].pixelType)throw"Only supported pixel format is HALF";for(var se=0;se<K;se++){var ce=B(j,W);te[K*ee*($-ie)+se*ee+ae]=ce}}else{if("PIZ_COMPRESSION"!==G.compression)throw"Cannot decompress unsupported compression";for(var ue=0;ue<$/J;ue++){R(j,W),R(j,W);var le=K*J*(2*G.channels.length),he=new Uint16Array(le);L(he,{value:0},V,j,W,le,ee,G.channels,K,J);for(var de=0;de<J;de++)for(oe=0;oe<G.channels.length;oe++){ae=ne[G.channels[oe].name];if(1!==G.channels[oe].pixelType)throw"Only supported pixel format is HALF";for(se=0;se<K;se++){ce=k(he[oe*(J*K)+de*K+se]);te[K*ee*($-(de+ue*J))+se*ee+ae]=ce}}}}return{header:G,width:K,height:$,data:te,format:4==G.channels.length?pt:ft,type:at}};var zo=function(){var e,t,n;function r(e){this.manager=void 0!==e?e:cr}function u(e){this.textureLoader=e}function h(){}function f(){}function m(){}function g(){}function y(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}function b(){}function x(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("FBXLoader: Cannot find the version number for the file given.")}function w(e){return e/46186158e3}r.prototype={constructor:r,crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=Cr.extractUrlBase(e),a=new lr(this.manager);a.setResponseType("arraybuffer"),a.load(e,function(n){try{var a=i.parse(n,o);t(a)}catch(t){setTimeout(function(){r&&r(t),i.manager.itemError(e)},0)}},n,r)},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(t,n){if(function(e){var t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===F(e,0,t.length)}(t))e=(new g).parse(t);else{var r=F(t);if(!function(e){var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],n=0;function r(t){var r=e[t-1];return e=e.slice(n+t),n++,r}for(var i=0;i<t.length;++i){var o=r(1);if(o===t[i])return!1}return!0}(r))throw new Error("FBXLoader: Unknown format.");if(x(r)<7e3)throw new Error("FBXLoader: FBX version not supported, FileVersion: "+x(r));e=(new m).parse(r)}return new u(new Ar(this.manager).setPath(n).setCrossOrigin(this.crossOrigin)).parse(e)}},u.prototype={constructor:u,parse:function(){t=this.parseConnections();var e=this.parseImages(),r=this.parseTextures(e),i=this.parseMaterials(r),o=this.parseDeformers(),a=(new h).parse(o);return this.parseScene(o,a,i),n},parseConnections:function(){var t=new Map;"Connections"in e&&e.Connections.connections.forEach(function(e){var n=e[0],r=e[1],i=e[2];t.has(n)||t.set(n,{parents:[],children:[]});var o={ID:r,relationship:i};t.get(n).parents.push(o),t.has(r)||t.set(r,{parents:[],children:[]});var a={ID:n,relationship:i};t.get(r).children.push(a)});return t},parseImages:function(){var t={},n={};if("Video"in e.Objects){var r=e.Objects.Video;for(var i in r){var o=r[i];if(t[u=parseInt(i)]=o.RelativeFilename||o.Filename,"Content"in o){var a=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,s="string"==typeof o.Content&&""!==o.Content;if(a||s){var c=this.parseImage(r[i]);n[o.RelativeFilename||o.Filename]=c}}}}for(var u in t){var l=t[u];void 0!==n[l]?t[u]=n[l]:t[u]=t[u].split("\\").pop()}return t},parseImage:function(e){var t,n=e.Content,r=e.RelativeFilename||e.Filename,o=r.slice(r.lastIndexOf(".")+1).toLowerCase();switch(o){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":null===Loader.Handlers.get(".tga")&&Loader.Handlers.add(/\.tga$/i,new Co),t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+o+'" is not supported.')}if("string"==typeof n)return"data:"+t+";base64,"+n;var a=new Uint8Array(n);return i.URL.createObjectURL(new Blob([a],{type:t}))},parseTextures:function(t){var n=new Map;if("Texture"in e.Objects){var r=e.Objects.Texture;for(var i in r){var o=this.parseTexture(r[i],t);n.set(parseInt(i),o)}}return n},parseTexture:function(e,t){var n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;var r=e.WrapModeU,i=e.WrapModeV,o=void 0!==r?r.value:0,a=void 0!==i?i.value:0;if(n.wrapS=0===o?He:Xe,n.wrapT=0===a?He:Xe,"Scaling"in e){var s=e.Scaling.value;n.repeat.x=s[0],n.repeat.y=s[1]}return n},loadTexture:function(e,n){var r,i,o=this.textureLoader.path,a=t.get(e.id).children;void 0!==a&&a.length>0&&void 0!==n[a[0].ID]&&(0!==(r=n[a[0].ID]).indexOf("blob:")&&0!==r.indexOf("data:")||this.textureLoader.setPath(void 0));var s=e.FileName.slice(-3).toLowerCase();if("tga"===s){var c=Loader.Handlers.get(".tga");null===c?(console.warn("FBXLoader: TGALoader not found, creating empty placeholder texture for",r),i=new Kn):i=c.load(r)}else"psd"===s?(console.warn("FBXLoader: PSD textures are not supported, creating empty placeholder texture for",r),i=new Kn):i=this.textureLoader.load(r);return this.textureLoader.setPath(o),i},parseMaterials:function(t){var n=new Map;if("Material"in e.Objects){var r=e.Objects.Material;for(var i in r){var o=this.parseMaterial(r[i],t);null!==o&&n.set(parseInt(i),o)}}return n},parseMaterial:function(e,n){var r=e.id,i=e.attrName,o=e.ShadingModel;if("object"==typeof o&&(o=o.value),!t.has(r))return null;var a,s=this.parseParameters(e,n,r);switch(o.toLowerCase()){case"phong":a=new vr;break;case"lambert":a=new pr;break;default:console.warn('FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),a=new vr({color:3342591})}return a.setValues(s),a.name=i,a},parseParameters:function(e,n,r){var i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=(new v).fromArray(e.Diffuse.value):e.DiffuseColor&&"Color"===e.DiffuseColor.type&&(i.color=(new v).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=(new v).fromArray(e.Emissive.value):e.EmissiveColor&&"Color"===e.EmissiveColor.type&&(i.emissive=(new v).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=(new v).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(i.specular=(new v).fromArray(e.SpecularColor.value));var o=this;return t.get(r).children.forEach(function(e){var t=e.relationship;switch(t){case"Bump":i.bumpMap=o.getTexture(n,e.ID);break;case"DiffuseColor":i.map=o.getTexture(n,e.ID);break;case"DisplacementColor":i.displacementMap=o.getTexture(n,e.ID);break;case"EmissiveColor":i.emissiveMap=o.getTexture(n,e.ID);break;case"NormalMap":i.normalMap=o.getTexture(n,e.ID);break;case"ReflectionColor":i.envMap=o.getTexture(n,e.ID),i.envMap.mapping=ze;break;case"SpecularColor":i.specularMap=o.getTexture(n,e.ID);break;case"TransparentColor":i.alphaMap=o.getTexture(n,e.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("FBXLoader: %s map is not supported in three.js, skipping texture.",t)}}),i},getTexture:function(n,r){return"LayeredTexture"in e.Objects&&r in e.Objects.LayeredTexture&&(console.warn("FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),r=t.get(r).children[0].ID),n.get(r)},parseDeformers:function(){var n={},r={};if("Deformer"in e.Objects){var i=e.Objects.Deformer;for(var o in i){var a=i[o],s=t.get(parseInt(o));if("Skin"===a.attrType){var c=this.parseSkeleton(s,i);c.ID=o,s.parents.length>1&&console.warn("FBXLoader: skeleton attached to more than one geometry is not supported."),c.geometryID=s.parents[0].ID,n[o]=c}else if("BlendShape"===a.attrType){var u={id:o};u.rawTargets=this.parseMorphTargets(s,i),u.id=o,s.parents.length>1&&console.warn("FBXLoader: morph target attached to more than one geometry is not supported."),r[o]=u}}}return{skeletons:n,morphTargets:r}},parseSkeleton:function(e,t){var n=[];return e.children.forEach(function(e){var r=t[e.ID];if("Cluster"===r.attrType){var i={ID:e.ID,indices:[],weights:[],transform:(new a).fromArray(r.Transform.a),transformLink:(new a).fromArray(r.TransformLink.a),linkMode:r.Mode};"Indexes"in r&&(i.indices=r.Indexes.a,i.weights=r.Weights.a),n.push(i)}}),{rawBones:n,bones:[]}},parseMorphTargets:function(e,n){for(var r=[],i=0;i<e.children.length;i++){if(8===i){console.warn("FBXLoader: maximum of 8 morph targets supported. Ignoring additional targets.");break}var o=e.children[i],a=n[o.ID],s={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if("BlendShapeChannel"!==a.attrType)return;t.get(parseInt(o.ID)).children.forEach(function(e){void 0===e.relationship&&(s.geoID=e.ID)}),r.push(s)}return r},parseScene:function(r,i,o){n=new oo;var a=this.parseModels(r.skeletons,i,o),s=e.Objects.Model,c=this;a.forEach(function(e){var r=s[e.ID];c.setLookAtProperties(e,r),t.get(e.ID).parents.forEach(function(t){var n=a.get(t.ID);void 0!==n&&n.add(e)}),null===e.parent&&n.add(e)}),this.bindSkeleton(r.skeletons,i,a),this.createAmbientLight(),this.setupMorphMaterials();var u=(new f).parse();1===n.children.length&&n.children[0].isGroup&&(n.children[0].animations=u,n=n.children[0]),n.animations=u},parseModels:function(n,r,i){var o=new Map,a=e.Objects.Model;for(var s in a){var c=parseInt(s),u=a[s],l=t.get(c),h=this.buildSkeleton(l,n,c,u.attrName);if(!h){switch(u.attrType){case"Camera":h=this.createCamera(l);break;case"Light":h=this.createLight(l);break;case"Mesh":h=this.createMesh(l,r,i);break;case"NurbsCurve":h=this.createCurve(l,r);break;case"LimbNode":case"Null":default:h=new oo}h.name=xn.sanitizeNodeName(u.attrName),h.ID=c}this.setModelTransforms(h,u),o.set(c,h)}return o},buildSkeleton:function(e,t,n,r){var i=null;return e.parents.forEach(function(e){for(var o in t){var a=t[o];a.rawBones.forEach(function(t,o){if(t.ID===e.ID){var s=i;(i=new Fn).matrixWorld.copy(t.transformLink),i.name=xn.sanitizeNodeName(r),i.ID=n,a.bones[o]=i,null!==s&&i.add(s)}})}}),i},createCamera:function(t){var n,r;if(t.children.forEach(function(t){var n=e.Objects.NodeAttribute[t.ID];void 0!==n&&(r=n)}),void 0===r)n=new p;else{var o=0;void 0!==r.CameraProjectionType&&1===r.CameraProjectionType.value&&(o=1);var a=1;void 0!==r.NearPlane&&(a=r.NearPlane.value/1e3);var s=1e3;void 0!==r.FarPlane&&(s=r.FarPlane.value/1e3);var c=i.innerWidth,u=i.innerHeight;void 0!==r.AspectWidth&&void 0!==r.AspectHeight&&(c=r.AspectWidth.value,u=r.AspectHeight.value);var l=c/u,h=45;void 0!==r.FieldOfView&&(h=r.FieldOfView.value);var d=r.FocalLength?r.FocalLength.value:null;switch(o){case 0:n=new Hn(h,l,a,s),null!==d&&n.setFocalLength(d);break;case 1:n=new Jn(-c/2,c/2,u/2,-u/2,a,s);break;default:console.warn("FBXLoader: Unknown camera type "+o+"."),n=new p}}return n},createLight:function(t){var n,r;if(t.children.forEach(function(t){var n=e.Objects.NodeAttribute[t.ID];void 0!==n&&(r=n)}),void 0===r)n=new p;else{var i;i=void 0===r.LightType?0:r.LightType.value;var a=16777215;void 0!==r.Color&&(a=(new v).fromArray(r.Color.value));var s=void 0===r.Intensity?1:r.Intensity.value/100;void 0!==r.CastLightOnObject&&0===r.CastLightOnObject.value&&(s=0);var c=0;void 0!==r.FarAttenuationEnd&&(c=void 0!==r.EnableFarAttenuation&&0===r.EnableFarAttenuation.value?0:r.FarAttenuationEnd.value);switch(i){case 0:n=new yo(a,s,c,1);break;case 1:n=new xo(a,s);break;case 2:var u=Math.PI/3;void 0!==r.InnerAngle&&(u=o.degToRad(r.InnerAngle.value));var l=0;void 0!==r.OuterAngle&&(l=o.degToRad(r.OuterAngle.value),l=Math.max(l,1)),n=new _o(a,s,c,u,l,1);break;default:console.warn("FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),n=new yo(a,s)}void 0!==r.CastShadows&&1===r.CastShadows.value&&(n.castShadow=!0)}return n},createMesh:function(e,t,n){var r,i=null,o=null,a=[];return e.children.forEach(function(e){t.has(e.ID)&&(i=t.get(e.ID)),n.has(e.ID)&&a.push(n.get(e.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new vr({color:13421772}),a.push(o)),"color"in i.attributes&&a.forEach(function(e){e.vertexColors=K}),i.FBX_Deformer?(a.forEach(function(e){e.skinning=!0}),r=new lo(i,o)):r=new fn(i,o),r},createCurve:function(e,t){return new pn(e.children.reduce(function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e},null),new ln({color:3342591,linewidth:1}))},setModelTransforms:function(e,t){var n={};"RotationOrder"in t&&(n.eulerOrder=parseInt(t.RotationOrder.value)),"Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value);var r=R(n);e.applyMatrix(r)},setLookAtProperties:function(r,i){"LookAtProperty"in i&&t.get(r.ID).children.forEach(function(t){if("LookAtProperty"===t.relationship){var i=e.Objects.Model[t.ID];if("Lcl_Translation"in i){var o=i.Lcl_Translation.value;void 0!==r.target?(r.target.position.fromArray(o),n.add(r.target)):r.lookAt((new s).fromArray(o))}}})},bindSkeleton:function(e,n,r){var i=this.parsePoseNodes();for(var o in e){var a=e[o];t.get(parseInt(a.ID)).parents.forEach(function(e){if(n.has(e.ID)){var o=e.ID;t.get(o).parents.forEach(function(e){r.has(e.ID)&&r.get(e.ID).bind(new uo(a.bones),i[e.ID])})}})}},parsePoseNodes:function(){var t={};if("Pose"in e.Objects){var n=e.Objects.Pose;for(var r in n)if("BindPose"===n[r].attrType){var i=n[r].PoseNode;Array.isArray(i)?i.forEach(function(e){t[e.Node]=(new a).fromArray(e.Matrix.a)}):t[i.Node]=(new a).fromArray(i.Matrix.a)}}return t},createAmbientLight:function(){if("GlobalSettings"in e&&"AmbientColor"in e.GlobalSettings){var t=e.GlobalSettings.AmbientColor.value,r=t[0],i=t[1],o=t[2];if(0!==r||0!==i||0!==o){var a=new v(r,i,o);n.add(new Ao(a,1))}}},setupMorphMaterials:function(){n.traverse(function(e){if(e.isMesh&&(e.geometry.morphAttributes.position||e.geometry.morphAttributes.normal)){var t=e.uuid,r=e.material.uuid,i=!1;n.traverse(function(e){e.isMesh&&e.material.uuid===r&&e.uuid!==t&&(i=!0)}),!0===i&&(e.material=e.material.clone()),e.material.morphTargets=!0}})}},h.prototype={constructor:h,parse:function(n){var r=new Map;if("Geometry"in e.Objects){var i=e.Objects.Geometry;for(var o in i){var a=t.get(parseInt(o)),s=this.parseGeometry(a,i[o],n);r.set(parseInt(o),s)}}return r},parseGeometry:function(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}},parseMeshGeometry:function(t,n,r){var i=r.skeletons,o=r.morphTargets,a=t.parents.map(function(t){return e.Objects.Model[t.ID]});if(0!==a.length){var s=t.children.reduce(function(e,t){return void 0!==i[t.ID]&&(e=i[t.ID]),e},null),c=t.children.reduce(function(e,t){return void 0!==o[t.ID]&&(e=o[t.ID]),e},null),u=a[0],l={};"RotationOrder"in u&&(l.eulerOrder=u.RotationOrder.value),"GeometricTranslation"in u&&(l.translation=u.GeometricTranslation.value),"GeometricRotation"in u&&(l.rotation=u.GeometricRotation.value),"GeometricScaling"in u&&(l.scale=u.GeometricScaling.value);var h=R(l);return this.genGeometry(n,s,c,h)}},genGeometry:function(e,t,n,r){var i=new k;e.attrName&&(i.name=e.attrName);var o=this.parseGeoNode(e,t),a=this.genBuffers(o),s=new N(a.vertex,3);if(r.applyToBufferAttribute(s),i.addAttribute("position",s),a.colors.length>0&&i.addAttribute("color",new N(a.colors,3)),t&&(i.addAttribute("skinIndex",new P(a.weightsIndices,4)),i.addAttribute("skinWeight",new N(a.vertexWeights,4)),i.FBX_Deformer=t),a.normal.length>0){var c=new N(a.normal,3);(new d).getNormalMatrix(r).applyToBufferAttribute(c),i.addAttribute("normal",c)}if(a.uvs.forEach(function(e,t){var n="uv"+(t+1).toString();0===t&&(n="uv"),i.addAttribute(n,new N(a.uvs[t],2))}),o.material&&"AllSame"!==o.material.mappingType){var u=a.materialIndex[0],l=0;if(a.materialIndex.forEach(function(e,t){e!==u&&(i.addGroup(l,t-l,u),u=e,l=t)}),i.groups.length>0){var h=i.groups[i.groups.length-1],f=h.start+h.count;f!==a.materialIndex.length&&i.addGroup(f,a.materialIndex.length-f,u)}0===i.groups.length&&i.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(i,e,n,r),i},parseGeoNode:function(e,t){var n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];for(var r=0;e.LayerElementUV[r];)n.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach(function(e,t){e.indices.forEach(function(r,i){void 0===n.weightTable[r]&&(n.weightTable[r]=[]),n.weightTable[r].push({id:t,weight:e.weights[i]})})})),n},genBuffers:function(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},n=0,r=0,i=!1,o=[],a=[],s=[],c=[],u=[],l=[],h=this;return e.vertexIndices.forEach(function(d,f){var p=!1;d<0&&(d^=-1,p=!0);var m=[],v=[];if(o.push(3*d,3*d+1,3*d+2),e.color){var g=T(f,n,d,e.color);s.push(g[0],g[1],g[2])}if(e.skeleton){if(void 0!==e.weightTable[d]&&e.weightTable[d].forEach(function(e){v.push(e.weight),m.push(e.id)}),v.length>4){i||(console.warn("FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);var y=[0,0,0,0],b=[0,0,0,0];v.forEach(function(e,t){var n=e,r=m[t];b.forEach(function(e,t,i){if(n>e){i[t]=n,n=e;var o=y[t];y[t]=r,r=o}})}),m=y,v=b}for(;v.length<4;)v.push(0),m.push(0);for(var x=0;x<4;++x)u.push(v[x]),l.push(m[x])}if(e.normal){g=T(f,n,d,e.normal);a.push(g[0],g[1],g[2])}if(e.material&&"AllSame"!==e.material.mappingType)var w=T(f,n,d,e.material)[0];e.uv&&e.uv.forEach(function(e,t){var r=T(f,n,d,e);void 0===c[t]&&(c[t]=[]),c[t].push(r[0]),c[t].push(r[1])}),r++,p&&(h.genFace(t,e,o,w,a,s,c,u,l,r),n++,r=0,o=[],a=[],s=[],c=[],u=[],l=[])}),t},genFace:function(e,t,n,r,i,o,a,s,c,u){for(var l=2;l<u;l++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(l-1)]]),e.vertex.push(t.vertexPositions[n[3*(l-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(l-1)+2]]),e.vertex.push(t.vertexPositions[n[3*l]]),e.vertex.push(t.vertexPositions[n[3*l+1]]),e.vertex.push(t.vertexPositions[n[3*l+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(l-1)]),e.vertexWeights.push(s[4*(l-1)+1]),e.vertexWeights.push(s[4*(l-1)+2]),e.vertexWeights.push(s[4*(l-1)+3]),e.vertexWeights.push(s[4*l]),e.vertexWeights.push(s[4*l+1]),e.vertexWeights.push(s[4*l+2]),e.vertexWeights.push(s[4*l+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[4*(l-1)]),e.weightsIndices.push(c[4*(l-1)+1]),e.weightsIndices.push(c[4*(l-1)+2]),e.weightsIndices.push(c[4*(l-1)+3]),e.weightsIndices.push(c[4*l]),e.weightsIndices.push(c[4*l+1]),e.weightsIndices.push(c[4*l+2]),e.weightsIndices.push(c[4*l+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(l-1)]),e.colors.push(o[3*(l-1)+1]),e.colors.push(o[3*(l-1)+2]),e.colors.push(o[3*l]),e.colors.push(o[3*l+1]),e.colors.push(o[3*l+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(i[0]),e.normal.push(i[1]),e.normal.push(i[2]),e.normal.push(i[3*(l-1)]),e.normal.push(i[3*(l-1)+1]),e.normal.push(i[3*(l-1)+2]),e.normal.push(i[3*l]),e.normal.push(i[3*l+1]),e.normal.push(i[3*l+2])),t.uv&&t.uv.forEach(function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(a[n][0]),e.uvs[n].push(a[n][1]),e.uvs[n].push(a[n][2*(l-1)]),e.uvs[n].push(a[n][2*(l-1)+1]),e.uvs[n].push(a[n][2*l]),e.uvs[n].push(a[n][2*l+1])})},addMorphTargets:function(t,n,r,i){if(null!==r){t.morphAttributes.position=[],t.morphAttributes.normal=[];var o=this;r.rawTargets.forEach(function(r){var a=e.Objects.Geometry[r.geoID];void 0!==a&&o.genMorphGeometry(t,n,a,i)})}},genMorphGeometry:function(e,t,n,r){var i=new k;n.attrName&&(i.name=n.attrName);for(var o=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],a=void 0!==t.Vertices?t.Vertices.a.slice():[],s=void 0!==n.Vertices?n.Vertices.a:[],c=void 0!==n.Indexes?n.Indexes.a:[],u=0;u<c.length;u++){var l=3*c[u];a[l]+=s[3*u],a[l+1]+=s[3*u+1],a[l+2]+=s[3*u+2]}var h={vertexIndices:o,vertexPositions:a},d=new N(this.genBuffers(h).vertex,3);d.name=n.attrName,r.applyToBufferAttribute(d),e.morphAttributes.position.push(d)},parseNormals:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a,i=[];return"IndexToDirect"===n&&("NormalIndex"in e?i=e.NormalIndex.a:"NormalsIndex"in e&&(i=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:i,mappingType:t,referenceType:n}},parseUVs:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a,i=[];return"IndexToDirect"===n&&(i=e.UVIndex.a),{dataSize:2,buffer:r,indices:i,mappingType:t,referenceType:n}},parseVertexColors:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a,i=[];return"IndexToDirect"===n&&(i=e.ColorIndex.a),{dataSize:4,buffer:r,indices:i,mappingType:t,referenceType:n}},parseMaterialIndices:function(e){var t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};for(var r=e.Materials.a,i=[],o=0;o<r.length;++o)i.push(o);return{dataSize:1,buffer:r,indices:i,mappingType:t,referenceType:n}},parseNurbsGeometry:function(e){if(void 0===Si)return console.error("FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new k;var t=parseInt(e.Order);if(isNaN(t))return console.error("FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new k;for(var n,r,i=t-1,o=e.KnotVector.a,a=[],s=e.Points.a,c=0,u=s.length;c<u;c+=4)a.push((new S).fromArray(s,c));if("Closed"===e.Form)a.push(a[0]);else if("Periodic"===e.Form){n=i,r=o.length-1-n;for(c=0;c<i;++c)a.push(a[c])}var l=new Si(i,o,a,n,r).getPoints(7*a.length),h=new Float32Array(3*l.length);l.forEach(function(e,t){e.toArray(h,3*t)});var d=new k;return d.addAttribute("position",new M(h,3)),d}},f.prototype={constructor:f,parse:function(){var e=[],t=this.parseClips();if(void 0!==t){for(var n in t){var r=t[n],i=this.addClip(r);e.push(i)}return e}},parseClips:function(){if(void 0!==e.Objects.AnimationCurve){var t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);var n=this.parseAnimationLayers(t);return this.parseAnimStacks(n)}},parseAnimationCurveNodes:function(){var t=e.Objects.AnimationCurveNode,n=new Map;for(var r in t){var i=t[r];if(null!==i.attrName.match(/S|R|T|DeformPercent/)){var o={id:i.id,attr:i.attrName,curves:{}};n.set(o.id,o)}}return n},parseAnimationCurves:function(n){var r=e.Objects.AnimationCurve;for(var i in r){var o={id:r[i].id,times:r[i].KeyTime.a.map(w),values:r[i].KeyValueFloat.a},a=t.get(o.id);if(void 0!==a){var s=a.parents[0].ID,c=a.parents[0].relationship;c.match(/X/)?n.get(s).curves.x=o:c.match(/Y/)?n.get(s).curves.y=o:c.match(/Z/)?n.get(s).curves.z=o:c.match(/d|DeformPercent/)&&n.has(s)&&(n.get(s).curves.morph=o)}}},parseAnimationLayers:function(n){var r=e.Objects.AnimationLayer,i=new Map;for(var o in r){var a=[],s=t.get(parseInt(o));if(void 0!==s){var c=this;s.children.forEach(function(r,i){if(n.has(r.ID)){var o=n.get(r.ID);if(void 0!==o.curves.x||void 0!==o.curves.y||void 0!==o.curves.z){if(void 0===a[i]){t.get(r.ID).parents.forEach(function(e){void 0!==e.relationship&&(f=e.ID)});var s=e.Objects.Model[f.toString()],u={modelName:xn.sanitizeNodeName(s.attrName),initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1],transform:c.getModelAnimTransform(s)};"PreRotation"in s&&(u.preRotations=s.PreRotation.value),"PostRotation"in s&&(u.postRotations=s.PostRotation.value),a[i]=u}a[i][o.attr]=o}else if(void 0!==o.curves.morph){if(void 0===a[i]){var l;t.get(r.ID).parents.forEach(function(e){void 0!==e.relationship&&(l=e.ID)});var h=t.get(l).parents[0].ID,d=t.get(h).parents[0].ID,f=t.get(d).parents[0].ID;s=e.Objects.Model[f],u={modelName:xn.sanitizeNodeName(s.attrName),morphName:e.Objects.Deformer[l].attrName};a[i]=u}a[i][o.attr]=o}}}),i.set(parseInt(o),a)}}return i},getModelAnimTransform:function(e){var t={};return"RotationOrder"in e&&(t.eulerOrder=parseInt(e.RotationOrder.value)),"Lcl_Translation"in e&&(t.translation=e.Lcl_Translation.value),"RotationOffset"in e&&(t.rotationOffset=e.RotationOffset.value),"Lcl_Rotation"in e&&(t.rotation=e.Lcl_Rotation.value),"PreRotation"in e&&(t.preRotation=e.PreRotation.value),"PostRotation"in e&&(t.postRotation=e.PostRotation.value),"Lcl_Scaling"in e&&(t.scale=e.Lcl_Scaling.value),R(t)},parseAnimStacks:function(n){var r=e.Objects.AnimationStack,i={};for(var o in r){var a=t.get(parseInt(o)).children;a.length>1&&console.warn("FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var s=n.get(a[0].ID);i[o]={name:r[o].attrName,layer:s}}return i},addClip:function(e){var t=[],n=this;return e.layer.forEach(function(e){t=t.concat(n.generateTracks(e))}),new Rn(e.name,-1,t)},generateTracks:function(e){var t=[],n=new s,r=new c,i=new s;if(e.transform&&e.transform.decompose(n,r,i),n=n.toArray(),r=(new l).setFromQuaternion(r).toArray(),i=i.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){var o=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==o&&t.push(o)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var a=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotations,e.postRotations);void 0!==a&&t.push(a)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var u=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");void 0!==u&&t.push(u)}if(void 0!==e.DeformPercent){var h=this.generateMorphTrack(e);void 0!==h&&t.push(h)}return t},generateVectorTrack:function(e,t,n,r){var i=this.getTimesForAllAxes(t);return new Nn(e+"."+r,i,this.getKeyframeTrackValues(i,t,n))},generateRotationTrack:function(e,t,n,r,i){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(o.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(o.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(o.degToRad));var a=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(a,t,n);void 0!==r&&((r=r.map(o.degToRad)).push("ZYX"),r=(new l).fromArray(r),r=(new c).setFromEuler(r)),void 0!==i&&((i=i.map(o.degToRad)).push("ZYX"),i=(new l).fromArray(i),i=(new c).setFromEuler(i).inverse());for(var u=new c,h=new l,d=[],f=0;f<s.length;f+=3)h.set(s[f],s[f+1],s[f+2],"ZYX"),u.setFromEuler(h),void 0!==r&&u.premultiply(r),void 0!==i&&u.multiply(i),u.toArray(d,f/3*4);return new Ln(e+".quaternion",a,d)},generateMorphTrack:function(e){var t=e.DeformPercent.curves.morph,r=t.values.map(function(e){return e/100}),i=n.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Cn(e.modelName+".morphTargetInfluences["+i+"]",t.times,r)},getTimesForAllAxes:function(e){var t=[];return void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort(function(e,t){return e-t}).filter(function(e,t,n){return n.indexOf(e)==t})},getKeyframeTrackValues:function(e,t,n){var r=n,i=[],o=-1,a=-1,s=-1;return e.forEach(function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(a=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==o){var n=t.x.values[o];i.push(n),r[0]=n}else i.push(r[0]);if(-1!==a){var c=t.y.values[a];i.push(c),r[1]=c}else i.push(r[1]);if(-1!==s){var u=t.z.values[s];i.push(u),r[2]=u}else i.push(r[2])}),i},interpolateRotations:function(e){for(var t=1;t<e.values.length;t++){var n=e.values[t-1],r=e.values[t]-n,i=Math.abs(r);if(i>=180){for(var o=i/180,a=r/o,s=n+a,c=e.times[t-1],u=(e.times[t]-c)/o,l=c+u,h=[],d=[];l<e.times[t];)h.push(l),l+=u,d.push(s),s+=a;e.times=U(e.times,t,h),e.values=U(e.values,t,d)}}}},m.prototype={constructor:m,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,console.log("FBXTree: ",b),this.allNodes=new b,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,n=e.split(/[\r\n]+/);return n.forEach(function(e,r){var i=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(!i&&!o){var a=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=e.match("^\\t{"+(t.currentIndent-1)+"}}");a?t.parseNodeBegin(e,a):s?t.parseNodeProperty(e,s,n[++r]):c?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}}),this.allNodes},parseNodeBegin:function(e,t){var n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")}),i={name:n},o=this.parseNodeAttr(r),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,i):n in a?("PoseNode"===n?a.PoseNode.push(i):void 0!==a[n].id&&(a[n]={},a[n][a[n].id]=a[n]),""!==o.id&&(a[n][o.id]=i)):"number"==typeof o.id?(a[n]={},a[n][o.id]=i):"Properties70"!==n&&(a[n]="PoseNode"===n?[i]:i),"number"==typeof o.id&&(i.id=o.id),""!==o.name&&(i.attrName=o.name),""!==o.type&&(i.attrType=o.type),this.pushStack(i)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}},parseNodeProperty:function(e,t,n){var r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===i&&(i=n.replace(/"/g,"").replace(/,$/,"").trim());var o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===r){var a=i.split(",").slice(1),s=parseInt(a[0]),c=parseInt(a[1]),u=i.split(",").slice(3);r="connections",function(e,t){for(var n=0,r=e.length,i=t.length;n<i;n++,r++)e[r]=t[n]}(i=[s,c],u=u.map(function(e){return e.trim().replace(/^"/,"")})),void 0===o[r]&&(o[r]=[])}"Node"===r&&(o.id=i),r in o&&Array.isArray(o[r])?o[r].push(i):"a"!==r?o[r]=i:o.a=i,this.setCurrentProp(o,r),"a"===r&&","!==i.slice(-1)&&(o.a=D(i))}else this.parseNodeSpecialProperty(e,r,i)},parseNodePropertyContinued:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=D(t.a))},parseNodeSpecialProperty:function(e,t,n){var r=n.split('",').map(function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")}),i=r[0],o=r[1],a=r[2],s=r[3],c=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=D(c)}this.getPrevNode()[i]={type:o,type2:a,flag:s,value:c},this.setCurrentProp(this.getPrevNode(),i)}},g.prototype={constructor:g,parse:function(e){var t=new y(e);t.skip(23);var n=t.getUint32();console.log("FBXLoader: FBX binary version: "+n);for(var r=new b;!this.endOfContent(t);){var i=this.parseNode(t,n);null!==i&&r.add(i.name,i)}return r},endOfContent:function(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var n={},r=t>=7500?e.getUint64():e.getUint32(),i=t>=7500?e.getUint64():e.getUint32(),o=(t>=7500?e.getUint64():e.getUint32(),e.getUint8()),a=e.getString(o);if(0===r)return null;for(var s=[],c=0;c<i;c++)s.push(this.parseProperty(e));var u=s.length>0?s[0]:"",l=s.length>1?s[1]:"",h=s.length>2?s[2]:"";for(n.singleProperty=1===i&&e.getOffset()===r;r>e.getOffset();){var d=this.parseNode(e,t);null!==d&&this.parseSubNode(a,n,d)}return n.propertyList=s,"number"==typeof u&&(n.id=u),""!==l&&(n.attrName=l),""!==h&&(n.attrType=h),""!==a&&(n.name=a),n},parseSubNode:function(e,t,n){if(!0===n.singleProperty){var r=n.propertyList[0];Array.isArray(r)?(t[n.name]=n,n.a=r):t[n.name]=r}else if("Connections"===e&&"C"===n.name){var i=[];n.propertyList.forEach(function(e,t){0!==t&&i.push(e)}),void 0===t.connections&&(t.connections=[]),t.connections.push(i)}else if("Properties70"===n.name){Object.keys(n).forEach(function(e){t[e]=n[e]})}else if("Properties70"===e&&"P"===n.name){var o,a=n.propertyList[0],s=n.propertyList[1],c=n.propertyList[2],u=n.propertyList[3];0===a.indexOf("Lcl ")&&(a=a.replace("Lcl ","Lcl_")),0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),o="Color"===s||"ColorRGB"===s||"Vector"===s||"Vector3D"===s||0===s.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[a]={type:s,type2:c,flag:u,value:o}}else void 0===t[n.name]?"number"==typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)},parseProperty:function(e){var t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var n=e.getUint32();return e.getArrayBuffer(n);case"S":n=e.getUint32();return e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var r=e.getUint32(),i=e.getUint32(),o=e.getUint32();if(0===i)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}"undefined"==typeof Zlib&&console.error("FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var a=new y(new Zlib.Inflate(new Uint8Array(e.getArrayBuffer(o))).decompress().buffer);switch(t){case"b":case"c":return a.getBooleanArray(r);case"d":return a.getFloat64Array(r);case"f":return a.getFloat32Array(r);case"i":return a.getInt32Array(r);case"l":return a.getInt64Array(r)}default:throw new Error("FBXLoader: Unknown property type "+t)}}},y.prototype={constructor:y,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getBoolean());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295===(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e},getInt64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],n=0;n<e;n++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getString:function(e){for(var t=[],n=0;n<e;n++)t[n]=this.getUint8();var r=t.indexOf(0);return r>=0&&(t=t.slice(0,r)),Cr.decodeText(new Uint8Array(t))}},b.prototype={constructor:b,add:function(e,t){this[e]=t}};var _=[];function T(e,t,n,r){var i;switch(r.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(i=r.indices[i]);var o=i*r.dataSize,a=o+r.dataSize;return function(e,t,n,r){for(var i=n,o=0;i<r;i++,o++)e[o]=t[i];return e}(_,r.buffer,o,a)}var A=new a,E=new l,C=new s,L=new s,O=new a;function R(e){var t=new a;L.set(0,0,0),O.identity();var n,r=e.eulerOrder?I(e.eulerOrder):I(0);(e.translation&&L.fromArray(e.translation),e.rotationOffset&&L.add(C.fromArray(e.rotationOffset)),e.rotation)&&((n=e.rotation.map(o.degToRad)).push(r),O.makeRotationFromEuler(E.fromArray(n)));e.preRotation&&((n=e.preRotation.map(o.degToRad)).push(r),A.makeRotationFromEuler(E.fromArray(n)),O.premultiply(A));e.postRotation&&((n=e.postRotation.map(o.degToRad)).push(r),A.makeRotationFromEuler(E.fromArray(n)),A.getInverse(A),O.multiply(A));return e.scale&&t.scale(C.fromArray(e.scale)),t.setPosition(L),t.multiply(O),t}function I(e){var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===e?(console.warn("FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function D(e){return e.split(",").map(function(e){return parseFloat(e)})}function F(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),Cr.decodeText(new Uint8Array(e,t,n))}function U(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}return r}(),jo=function(e){this.manager=void 0!==e?e:cr,this.splitLayer=!1};jo.prototype.load=function(e,t,n,r){var i=this;new lr(i.manager).load(e,function(e){t(i.parse(e))},n,r)},jo.prototype.parse=function(e){var t={x:0,y:0,z:0,e:0,f:0,extruding:!1,relative:!1},n=[],r=void 0,i=new ln({color:16711680});i.name="path";var o=new ln({color:65280});function a(e){r={vertex:[],pathVertex:[],z:e.z},n.push(r)}function s(e,t){void 0===r&&a(e),v.extruding?(r.vertex.push(e.x,e.y,e.z),r.vertex.push(t.x,t.y,t.z)):(r.pathVertex.push(e.x,e.y,e.z),r.pathVertex.push(t.x,t.y,t.z))}function c(e,n){return t.relative?n:n-e}function u(e,n){return t.relative?e+n:n}o.name="extruded";for(var h=e.replace(/;.+/g,"").split("\n"),d=0;d<h.length;d++){var f=h[d].split(" "),p=f[0].toUpperCase(),m={};if(f.splice(1).forEach(function(e){if(void 0!==e[0]){var t=e[0].toLowerCase(),n=parseFloat(e.substring(1));m[t]=n}}),"G0"===p||"G1"===p){var v={x:void 0!==m.x?u(t.x,m.x):t.x,y:void 0!==m.y?u(t.y,m.y):t.y,z:void 0!==m.z?u(t.z,m.z):t.z,e:void 0!==m.e?u(t.e,m.e):t.e,f:void 0!==m.f?u(t.f,m.f):t.f};c(t.e,v.e)>0&&(v.extruding=c(t.e,v.e)>0,void 0!=r&&v.z==r.z||a(v)),s(t,v),t=v}else if("G2"===p||"G3"===p)console.warn("GCodeLoader: Arc command not supported");else if("G90"===p)t.relative=!1;else if("G91"===p)t.relative=!0;else if("G92"===p){(v=t).x=void 0!==m.x?m.x:v.x,v.y=void 0!==m.y?m.y:v.y,v.z=void 0!==m.z?m.z:v.z,v.e=void 0!==m.e?m.e:v.e,t=v}else console.warn("GCodeLoader: Command not supported:"+p)}function g(e,t){var n=new k;n.addAttribute("position",new N(e,3));var r=new Eo(n,t?o:i);r.name="layer"+d,y.add(r)}var y=new oo;if(y.name="gcode",this.splitLayer)for(d=0;d<n.length;d++){g((w=n[d]).vertex,!0),g(w.pathVertex,!1)}else{var b=[],x=[];for(d=0;d<n.length;d++){var w=n[d];b=b.concat(w.vertex),x=x.concat(w.pathVertex)}g(b,!0),g(x,!1)}return y.quaternion.setFromEuler(new l(-Math.PI/2,0,0)),y};var Vo={computeTangents:function(e){var t=e.index,n=e.attributes;if(null!==t&&void 0!==n.position&&void 0!==n.normal&&void 0!==n.uv){var r=t.array,i=n.position.array,o=n.normal.array,a=n.uv.array,c=i.length/3;void 0===n.tangent&&e.addAttribute("tangent",new M(new Float32Array(4*c),4));for(var u=n.tangent.array,l=[],h=[],d=0;d<c;d++)l[d]=new s,h[d]=new s;var f=new s,p=new s,m=new s,v=new x,g=new x,y=new x,b=new s,w=new s,_=e.groups;0===_.length&&(_=[{start:0,count:r.length}]);d=0;for(var S=_.length;d<S;++d)for(var T=D=(I=_[d]).start,A=D+I.count;T<A;T+=3)F(r[T+0],r[T+1],r[T+2]);var E,C,P,L=new s,O=new s,N=new s,R=new s;for(d=0,S=_.length;d<S;++d){var I,D;for(T=D=(I=_[d]).start,A=D+I.count;T<A;T+=3)k(r[T+0]),k(r[T+1]),k(r[T+2])}}else console.warn("BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function F(e,t,n){f.fromArray(i,3*e),p.fromArray(i,3*t),m.fromArray(i,3*n),v.fromArray(a,2*e),g.fromArray(a,2*t),y.fromArray(a,2*n);var r=p.x-f.x,o=m.x-f.x,s=p.y-f.y,c=m.y-f.y,u=p.z-f.z,d=m.z-f.z,x=g.x-v.x,_=y.x-v.x,S=g.y-v.y,M=y.y-v.y,T=1/(x*M-_*S);b.set((M*r-S*o)*T,(M*s-S*c)*T,(M*u-S*d)*T),w.set((x*o-_*r)*T,(x*c-_*s)*T,(x*d-_*u)*T),l[e].add(b),l[t].add(b),l[n].add(b),h[e].add(w),h[t].add(w),h[n].add(w)}function k(e){N.fromArray(o,3*e),R.copy(N),C=l[e],L.copy(C),L.sub(N.multiplyScalar(N.dot(C))).normalize(),O.crossVectors(R,C),P=O.dot(h[e]),E=P<0?-1:1,u[4*e]=L.x,u[4*e+1]=L.y,u[4*e+2]=L.z,u[4*e+3]=E}},mergeBufferGeometries:function(e,t){for(var n=null!==e[0].index,r=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),o={},a={},s=new k,c=0,u=0;u<e.length;++u){var l=e[u];if(n!==(null!==l.index))return null;for(var h in l.attributes){if(!r.has(h))return null;void 0===o[h]&&(o[h]=[]),o[h].push(l.attributes[h])}for(var h in l.morphAttributes){if(!i.has(h))return null;void 0===a[h]&&(a[h]=[]),a[h].push(l.morphAttributes[h])}if(s.userData.mergedUserData=s.userData.mergedUserData||[],s.userData.mergedUserData.push(l.userData),t){var d;if(n)d=l.index.count;else{if(void 0===l.attributes.position)return null;d=l.attributes.position.count}s.addGroup(c,d,u),c+=d}}if(n){var f=0,p=[];for(u=0;u<e.length;++u){for(var m=e[u].index,v=0;v<m.count;++v)p.push(m.getX(v)+f);f+=e[u].attributes.position.count}s.setIndex(p)}for(var h in o){var g=this.mergeBufferAttributes(o[h]);if(!g)return null;s.addAttribute(h,g)}for(var h in a){var y=a[h][0].length;if(0===y)break;s.morphAttributes=s.morphAttributes||{},s.morphAttributes[h]=[];for(u=0;u<y;++u){var b=[];for(v=0;v<a[h].length;++v)b.push(a[h][v][u]);var x=this.mergeBufferAttributes(b);if(!x)return null;s.morphAttributes[h].push(x)}}return s},mergeBufferAttributes:function(e){for(var t,n,r,i=0,o=0;o<e.length;++o){var a=e[o];if(a.isInterleavedBufferAttribute)return null;if(void 0===t&&(t=a.array.constructor),t!==a.array.constructor)return null;if(void 0===n&&(n=a.itemSize),n!==a.itemSize)return null;if(void 0===r&&(r=a.normalized),r!==a.normalized)return null;i+=a.array.length}var s=new t(i),c=0;for(o=0;o<e.length;++o)s.set(e[o].array,c),c+=e[o].array.length;return new M(s,n,r)}},Go=function(){function e(e){this.manager=void 0!==e?e:cr,this.dracoLoader=null}e.prototype={constructor:e,crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=void 0!==this.path?this.path:Cr.extractUrlBase(e);i.manager.itemStart(e);var a=function(t){r?r(t):console.error(t),i.manager.itemEnd(e),i.manager.itemError(e)},s=new lr(i.manager);s.setResponseType("arraybuffer"),s.load(e,function(n){try{i.parse(n,o,function(n){t(n),i.manager.itemEnd(e)},a)}catch(e){a(e)}},n,a)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},parse:function(e,i,o,a){var f,p={};if("string"==typeof e)f=e;else if(Cr.decodeText(new Uint8Array(e,0,4))===c){try{p[t.KHR_BINARY_GLTF]=new function(e){this.name=t.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(e,0,u);if(this.header={magic:Cr.decodeText(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==c)throw new Error("GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");var r=new DataView(e,u),i=0;for(;i<r.byteLength;){var o=r.getUint32(i,!0);i+=4;var a=r.getUint32(i,!0);if(i+=4,a===l.JSON){var s=new Uint8Array(e,u+i,o);this.content=Cr.decodeText(s)}else if(a===l.BIN){var h=u+i;this.body=e.slice(h,h+o)}i+=o}if(null===this.content)throw new Error("GLTFLoader: JSON content not found.")}(e)}catch(e){return void(a&&a(e))}f=p[t.KHR_BINARY_GLTF].content}else f=Cr.decodeText(new Uint8Array(e));var m=JSON.parse(f);if(void 0===m.asset||m.asset.version[0]<2)a&&a(new Error("GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(m.extensionsUsed)for(var v=0;v<m.extensionsUsed.length;++v){var g=m.extensionsUsed[v],y=m.extensionsRequired||[];switch(g){case t.KHR_LIGHTS_PUNCTUAL:p[g]=new r(m);break;case t.KHR_MATERIALS_UNLIT:p[g]=new s(m);break;case t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:p[g]=new d;break;case t.KHR_DRACO_MESH_COMPRESSION:p[g]=new h(m,this.dracoLoader);break;case t.MSFT_TEXTURE_DDS:p[t.MSFT_TEXTURE_DDS]=new n;break;default:y.indexOf(g)>=0&&console.warn('GLTFLoader: Unknown extension "'+g+'".')}}var b=new X(m,p,{path:i||this.path||"",crossOrigin:this.crossOrigin,manager:this.manager});b.parse(function(e,t,n,r,i){var a={scene:e,scenes:t,cameras:n,animations:r,asset:i.asset,parser:b,userData:{}};U(p,a,i),o(a)},a)}}};var t={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function n(){if(!No)throw new Error("GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=t.MSFT_TEXTURE_DDS,this.ddsLoader=new No}function r(e){this.name=t.KHR_LIGHTS_PUNCTUAL,this.lights=[];for(var n=(e.extensions&&e.extensions[t.KHR_LIGHTS_PUNCTUAL]||{}).lights||[],r=0;r<n.length;r++){var i,o=n[r],a=new v(16777215);void 0!==o.color&&a.fromArray(o.color);var s=void 0!==o.range?o.range:0;switch(o.type){case"directional":(i=new xo(a)).target.position.set(0,0,1),i.add(i.target);break;case"point":(i=new yo(a)).distance=s;break;case"spot":(i=new _o(a)).distance=s,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,i.angle=o.spot.outerConeAngle,i.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,i.target.position.set(0,0,1),i.add(i.target);break;default:throw new Error('GLTFLoader: Unexpected light type, "'+o.type+'".')}i.decay=2,void 0!==o.intensity&&(i.intensity=o.intensity),i.name=o.name||"light_"+r,this.lights.push(i)}}function s(e){this.name=t.KHR_MATERIALS_UNLIT}s.prototype.getMaterialType=function(e){return un},s.prototype.extendParams=function(e,t,n){var r=[];e.color=new v(1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var o=i.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture.index))}return Promise.all(r)};var c="glTF",u=12,l={JSON:1313821514,BIN:5130562};function h(e,n){if(!n)throw new Error("GLTFLoader: No DRACOLoader instance provided.");this.name=t.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n}function d(){return{name:t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return qn},extendParams:function(e,t,n){var r=t.extensions[this.name],i=Pi.standard,o=Xn.clone(i.uniforms),a=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),s=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),c=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),u=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),l=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),h=i.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",a).replace("#include <metalnessmap_pars_fragment>",s).replace("#include <roughnessmap_fragment>",c).replace("#include <metalnessmap_fragment>",u).replace("#include <lights_physical_fragment>",l);delete o.roughness,delete o.metalness,delete o.roughnessMap,delete o.metalnessMap,o.specular={value:(new v).setHex(1118481)},o.glossiness={value:.5},o.specularMap={value:null},o.glossinessMap={value:null},e.vertexShader=i.vertexShader,e.fragmentShader=h,e.uniforms=o,e.defines={STANDARD:""},e.color=new v(1,1,1),e.opacity=1;var d=[];if(Array.isArray(r.diffuseFactor)){var f=r.diffuseFactor;e.color.fromArray(f),e.opacity=f[3]}if(void 0!==r.diffuseTexture&&d.push(n.assignTexture(e,"map",r.diffuseTexture.index)),e.emissive=new v(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new v(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var p=r.specularGlossinessTexture.index;d.push(n.assignTexture(e,"glossinessMap",p)),d.push(n.assignTexture(e,"specularMap",p))}return Promise.all(d)},createMaterial:function(e){var t=new qn({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var n=this.specularGlossinessParams,r=0,i=n.length;r<i;r++)t[n[r]]=e[n[r]];return t},refreshUniforms:function(e,t,n,r,i,o){if(!0===i.isGLTFSpecularGlossinessMaterial){var a,s=i.uniforms,c=i.defines;s.opacity.value=i.opacity,s.diffuse.value.copy(i.color),s.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),s.map.value=i.map,s.specularMap.value=i.specularMap,s.alphaMap.value=i.alphaMap,s.lightMap.value=i.lightMap,s.lightMapIntensity.value=i.lightMapIntensity,s.aoMap.value=i.aoMap,s.aoMapIntensity.value=i.aoMapIntensity,i.map?a=i.map:i.specularMap?a=i.specularMap:i.displacementMap?a=i.displacementMap:i.normalMap?a=i.normalMap:i.bumpMap?a=i.bumpMap:i.glossinessMap?a=i.glossinessMap:i.alphaMap?a=i.alphaMap:i.emissiveMap&&(a=i.emissiveMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),s.uvTransform.value.copy(a.matrix)),s.envMap.value=i.envMap,s.envMapIntensity.value=i.envMapIntensity,s.flipEnvMap.value=i.envMap&&i.envMap.isCubeTexture?-1:1,s.refractionRatio.value=i.refractionRatio,s.specular.value.copy(i.specular),s.glossiness.value=i.glossiness,s.glossinessMap.value=i.glossinessMap,s.emissiveMap.value=i.emissiveMap,s.bumpMap.value=i.bumpMap,s.normalMap.value=i.normalMap,s.displacementMap.value=i.displacementMap,s.displacementScale.value=i.displacementScale,s.displacementBias.value=i.displacementBias,null!==s.glossinessMap.value&&void 0===c.USE_GLOSSINESSMAP&&(c.USE_GLOSSINESSMAP="",c.USE_ROUGHNESSMAP=""),null===s.glossinessMap.value&&void 0!==c.USE_GLOSSINESSMAP&&(delete c.USE_GLOSSINESSMAP,delete c.USE_ROUGHNESSMAP)}}}}function f(e,t,n,r){gn.call(this,e,t,n,r)}h.prototype.decodePrimitive=function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},c={};for(var u in o)u in P&&(a[P[u]]=o[u]);for(u in e.attributes)if(void 0!==P[u]&&void 0!==o[u]){var l=n.accessors[e.attributes[u]],h=T[l.componentType];c[P[u]]=h,s[P[u]]=!0===l.normalized}return t.getDependency("bufferView",i).then(function(e){return new Promise(function(t){r.decodeDracoFile(e,function(e){for(var n in e.attributes){var r=e.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}t(e)},a,c)})})},f.prototype=Object.create(gn.prototype),f.prototype.constructor=f,f.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,o=0;o!==r;o++)t[o]=n[i+o];return t},f.prototype.beforeStart_=f.prototype.copySampleValue_,f.prototype.afterEnd_=f.prototype.copySampleValue_,f.prototype.interpolate_=function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,c=3*a,u=r-t,l=(n-t)/u,h=l*l,d=h*l,f=e*c,p=f-c,m=2*d-3*h+1,v=d-2*h+l,g=-2*d+3*h,y=d-h,b=0;b!==a;b++){var x=o[p+b+a],w=o[p+b+s]*u,_=o[f+b+a],S=o[f+b]*u;i[b]=m*x+v*w+g*_+y*S}return i};var m=0,g=1,y=2,b=3,w=4,_=5,S=6,T={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},A={9728:Ye,9729:Ze,9984:Je,9985:Ke,9986:Qe,9987:$e},E={33071:Xe,33648:qe,10497:He},C={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},P={POSITION:"position",NORMAL:"normal",TEXCOORD_0:"uv",TEXCOORD0:"uv",TEXCOORD:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",COLOR0:"color",COLOR:"color",WEIGHTS_0:"skinWeight",WEIGHT:"skinWeight",JOINTS_0:"skinIndex",JOINT:"skinIndex"},L={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},O={CUBICSPLINE:2302,LINEAR:2301,STEP:Wt},N="OPAQUE",R="MASK",I="BLEND",D={"image/png":pt,"image/jpeg":ft};function F(e,t){return"string"!=typeof e||""===e?"":/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e}function U(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function B(e,t){void 0!==t.extras&&("object"==typeof t.extras?e.userData=t.extras:console.warn("GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function z(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(n=0,r=i.length;n<r;n++)e.morphTargetDictionary[i[n]]=n}else console.warn("GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function j(e,t){return e.indices===t.indices&&V(e.attributes,t.attributes)}function V(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}function G(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function W(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(j(i.primitive,t))return i.promise}return null}function H(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,n=e.itemSize,r=e.array.slice(0,t*n),i=0;i<t;++i)r[i]=e.getX(i),n>=2&&(r[i+1]=e.getY(i)),n>=3&&(r[i+2]=e.getZ(i)),n>=4&&(r[i+3]=e.getW(i));return new M(r,n,e.normalized)}return e.clone()}function X(e,t,n){this.json=e||{},this.extensions=t||{},this.options=n||{},this.cache=new function(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}},this.primitiveCache=[],this.multiplePrimitivesCache=[],this.multiPassGeometryCache=[],this.textureLoader=new Ar(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new lr(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}function Y(e,t,n){var r=t.attributes;for(var i in r){var o=P[i],a=n[r[i]];o&&(o in e.attributes||e.addAttribute(o,a))}void 0===t.indices||e.index||e.setIndex(n[t.indices]),void 0!==t.targets&&function(e,t,n){for(var r=!1,i=!1,o=0,a=t.length;o<a&&(void 0!==(u=t[o]).POSITION&&(r=!0),void 0!==u.NORMAL&&(i=!0),!r||!i);o++);if(r||i){var s=[],c=[];for(o=0,a=t.length;o<a;o++){var u=t[o],l="morphTarget"+o;if(r){if(void 0!==u.POSITION){var h=H(n[u.POSITION]);h.name=l;for(var d=e.attributes.position,f=0,p=h.count;f<p;f++)h.setXYZ(f,h.getX(f)+d.getX(f),h.getY(f)+d.getY(f),h.getZ(f)+d.getZ(f))}else h=e.attributes.position;s.push(h)}if(i){if(void 0!==u.NORMAL){var m;(m=H(n[u.NORMAL])).name=l;var v=e.attributes.normal;for(f=0,p=m.count;f<p;f++)m.setXYZ(f,m.getX(f)+v.getX(f),m.getY(f)+v.getY(f),m.getZ(f)+v.getZ(f))}else m=e.attributes.normal;c.push(m)}}r&&(e.morphAttributes.position=s),i&&(e.morphAttributes.normal=c)}}(e,t.targets,n),B(e,t)}return X.prototype.parse=function(e,t){var n=this.json;this.cache.removeAll(),this.markDefs(),this.getMultiDependencies(["scene","animation","camera"]).then(function(t){var r=t.scenes||[],i=r[n.scene||0],o=t.animations||[],a=t.cameras||[];e(i,r,a,o,n)}).catch(t)},X.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r={},i={},o=0,a=t.length;o<a;o++)for(var s=t[o].joints,c=0,u=s.length;c<u;c++)e[s[c]].isBone=!0;for(var l=0,h=e.length;l<h;l++){var d=e[l];void 0!==d.mesh&&(void 0===r[d.mesh]&&(r[d.mesh]=i[d.mesh]=0),r[d.mesh]++,void 0!==d.skin&&(n[d.mesh].isSkinnedMesh=!0))}this.json.meshReferences=r,this.json.meshUses=i},X.prototype.getDependency=function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this.loadMesh(t);break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this.loadBufferView(t);break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this.loadMaterial(t);break;case"texture":r=this.loadTexture(t);break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r},X.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map(function(t,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t},X.prototype.getMultiDependencies=function(e){for(var t={},n=[],r=0,i=e.length;r<i;r++){var o=e[r],a=this.getDependencies(o);a=a.then(function(e,n){t[e]=n}.bind(this,o+("mesh"===o?"es":"s"))),n.push(a)}return Promise.all(n).then(function(){return t})},X.prototype.loadBuffer=function(e){var n=this.json.buffers[e],r=this.fileLoader;if(n.type&&"arraybuffer"!==n.type)throw new Error("GLTFLoader: "+n.type+" buffer type is not supported.");if(void 0===n.uri&&0===e)return Promise.resolve(this.extensions[t.KHR_BINARY_GLTF].body);var i=this.options;return new Promise(function(e,t){r.load(F(n.uri,i.path),e,void 0,function(){t(new Error('GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})},X.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)})},X.prototype.loadAccessor=function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return null;var i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then(function(e){var i,o=e[0],a=C[r.type],s=T[r.componentType],c=s.BYTES_PER_ELEMENT,u=c*a,l=r.byteOffset||0,h=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,d=!0===r.normalized;if(h&&h!==u){var f="InterleavedBuffer:"+r.bufferView+":"+r.componentType,p=t.cache.get(f);p||(p=new Yi(new s(o),h/c),t.cache.add(f,p)),i=new Qi(p,a,l/c,d)}else i=new M(null===o?new s(r.count*a):new s(o,l,r.count*a),a,d);if(void 0!==r.sparse){var m=C.SCALAR,v=T[r.sparse.indices.componentType],g=r.sparse.indices.byteOffset||0,y=r.sparse.values.byteOffset||0,b=new v(e[1],g,r.sparse.count*m),x=new s(e[2],y,r.sparse.count*a);null!==o&&i.setArray(i.array.slice());for(var w=0,_=b.length;w<_;w++){var S=b[w];if(i.setX(S,x[w*a]),a>=2&&i.setY(S,x[w*a+1]),a>=3&&i.setZ(S,x[w*a+2]),a>=4&&i.setW(S,x[w*a+3]),a>=5)throw new Error("GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return i})},X.prototype.loadTexture=function(e){var n,r=this,o=this.json,a=this.options,s=this.textureLoader,c=i.URL||i.webkitURL,u=o.textures[e],l=u.extensions||{},h=(n=l[t.MSFT_TEXTURE_DDS]?o.images[l[t.MSFT_TEXTURE_DDS].source]:o.images[u.source]).uri,d=!1;return void 0!==n.bufferView&&(h=r.getDependency("bufferView",n.bufferView).then(function(e){d=!0;var t=new Blob([e],{type:n.mimeType});return h=c.createObjectURL(t)})),Promise.resolve(h).then(function(e){var n=Er.Handlers.get(e);return n||(n=l[t.MSFT_TEXTURE_DDS]?r.extensions[t.MSFT_TEXTURE_DDS].ddsLoader:s),new Promise(function(t,r){n.load(F(e,a.path),t,void 0,r)})}).then(function(e){!0===d&&c.revokeObjectURL(h),e.flipY=!1,void 0!==u.name&&(e.name=u.name),n.mimeType in D&&(e.format=D[n.mimeType]);var t=(o.samplers||{})[u.sampler]||{};return e.magFilter=A[t.magFilter]||Ze,e.minFilter=A[t.minFilter]||$e,e.wrapS=E[t.wrapS]||He,e.wrapT=E[t.wrapT]||He,e})},X.prototype.assignTexture=function(e,t,n){return this.getDependency("texture",n).then(function(n){e[t]=n})},X.prototype.loadMaterial=function(e){var n,r=this.json,i=this.extensions,o=r.materials[e],a={},s=o.extensions||{},c=[];if(s[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var u=i[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];n=u.getMaterialType(o),c.push(u.extendParams(a,o,this))}else if(s[t.KHR_MATERIALS_UNLIT]){var l=i[t.KHR_MATERIALS_UNLIT];n=l.getMaterialType(o),c.push(l.extendParams(a,o,this))}else{n=gr;var h=o.pbrMetallicRoughness||{};if(a.color=new v(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){var d=h.baseColorFactor;a.color.fromArray(d),a.opacity=d[3]}if(void 0!==h.baseColorTexture&&c.push(this.assignTexture(a,"map",h.baseColorTexture.index)),a.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,a.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture){var f=h.metallicRoughnessTexture.index;c.push(this.assignTexture(a,"metalnessMap",f)),c.push(this.assignTexture(a,"roughnessMap",f))}}!0===o.doubleSided&&(a.side=J);var p=o.alphaMode||N;return p===I?a.transparent=!0:(a.transparent=!1,p===R&&(a.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&n!==un&&(c.push(this.assignTexture(a,"normalMap",o.normalTexture.index)),a.normalScale=new x(1,1),void 0!==o.normalTexture.scale&&a.normalScale.set(o.normalTexture.scale,o.normalTexture.scale)),void 0!==o.occlusionTexture&&n!==un&&(c.push(this.assignTexture(a,"aoMap",o.occlusionTexture.index)),void 0!==o.occlusionTexture.strength&&(a.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&n!==un&&(a.emissive=(new v).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&n!==un&&c.push(this.assignTexture(a,"emissiveMap",o.emissiveTexture.index)),Promise.all(c).then(function(){var e;return e=n===qn?i[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new n(a),void 0!==o.name&&(e.name=o.name),e.normalScale&&(e.normalScale.y=-e.normalScale.y),e.map&&(e.map.encoding=Qt),e.emissiveMap&&(e.emissiveMap.encoding=Qt),e.specularMap&&(e.specularMap.encoding=Qt),B(e,o),o.extensions&&U(i,e,o),e})},X.prototype.loadGeometries=function(e){var n,r=this,i=this.extensions,o=this.primitiveCache,a=function(e){if(e.length<2)return!1;var t=e[0],n=t.targets||[];if(void 0===t.indices)return!1;for(var r=1,i=e.length;r<i;r++){var o=e[r];if(t.mode!==o.mode)return!1;if(void 0===o.indices)return!1;if(!V(t.attributes,o.attributes))return!1;var a=o.targets||[];if(n.length!==a.length)return!1;for(var s=0,c=n.length;s<c;s++)if(!V(n[s],a[s]))return!1}return!0}(e);return a&&(n=e,e=[e[0]]),this.getDependencies("accessor").then(function(s){for(var c=[],u=0,l=e.length;u<l;u++){var h=e[u],d=W(o,h);if(d)c.push(d);else if(h.extensions&&h.extensions[t.KHR_DRACO_MESH_COMPRESSION]){var f=i[t.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(h,r).then(function(e){return Y(e,h,s),e});o.push({primitive:h,promise:f}),c.push(f)}else{var p=new k;Y(p,h,s);f=Promise.resolve(p);o.push({primitive:h,promise:f}),c.push(f)}}return Promise.all(c).then(function(t){if(a){var i=t[0];if(null!==(g=function(e,t,n){for(var r=0,i=e.length;r<i;r++){var o=e[r];if(t===o.baseGeometry&&G(n,o.primitives))return o.geometry}return null}(v=r.multiPassGeometryCache,i,n)))return[g.geometry];var o=new k;for(var c in o.name=i.name,o.userData=i.userData,i.attributes)o.addAttribute(c,i.attributes[c]);for(var c in i.morphAttributes)o.morphAttributes[c]=i.morphAttributes[c];for(var u=[],l=0,h=0,d=n.length;h<d;h++){for(var f=s[n[h].indices],p=0,m=f.count;p<m;p++)u.push(f.array[p]);o.addGroup(l,f.count,h),l+=f.count}return o.setIndex(u),v.push({geometry:o,baseGeometry:i,primitives:n}),[o]}if(t.length>1&&void 0!==Vo){for(h=1,d=e.length;h<d;h++)if(e[0].mode!==e[h].mode)return t;var v,g;if(g=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(G(t,i.baseGeometries))return i.geometry}return null}(v=r.multiplePrimitivesCache,t)){if(null!==g.geometry)return[g.geometry]}else{o=Vo.mergeBufferGeometries(t,!0);if(v.push({geometry:o,baseGeometries:t}),null!==o)return[o]}}return t})})},X.prototype.loadMesh=function(e){var n=this,r=this.json,i=this.extensions,o=r.meshes[e];return this.getMultiDependencies(["accessor","material"]).then(function(r){for(var a=o.primitives,s=[],c=0,u=a.length;c<u;c++)s[c]=void 0===a[c].material?new gr({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:q}):r.materials[a[c].material];return n.loadGeometries(a).then(function(r){for(var c=1===r.length&&r[0].groups.length>0,u=[],l=0,h=r.length;l<h;l++){var d,f=r[l],p=a[l],v=c?s:s[l];if(p.mode===w||p.mode===_||p.mode===S||void 0===p.mode)d=!0===o.isSkinnedMesh?new lo(f,v):new fn(f,v),p.mode===_?d.drawMode=qt:p.mode===S&&(d.drawMode=Yt);else if(p.mode===g)d=new Eo(f,v);else if(p.mode===b)d=new pn(f,v);else if(p.mode===y)d=new Ro(f,v);else{if(p.mode!==m)throw new Error("GLTFLoader: Primitive mode unsupported: "+p.mode);d=new Gi(f,v)}Object.keys(d.geometry.morphAttributes).length>0&&z(d,o),d.name=o.name||"mesh_"+e,r.length>1&&(d.name+="_"+l),B(d,o),u.push(d);for(var x=c?d.material:[d.material],T=void 0!==f.attributes.color,A=void 0===f.attributes.normal,E=!0===d.isSkinnedMesh,C=Object.keys(f.morphAttributes).length>0,P=C&&void 0!==f.morphAttributes.normal,L=0,O=x.length;L<O;L++){v=x[L];if(d.isPoints){var N="PointsMaterial:"+v.uuid,R=n.cache.get(N);R||(R=new xr,cn.prototype.copy.call(R,v),R.color.copy(v.color),R.map=v.map,R.lights=!1,n.cache.add(N,R)),v=R}else if(d.isLine){N="LineBasicMaterial:"+v.uuid;var I=n.cache.get(N);I||(I=new ln,cn.prototype.copy.call(I,v),I.color.copy(v.color),I.lights=!1,n.cache.add(N,I)),v=I}if(T||A||E||C){N="ClonedMaterial:"+v.uuid+":";v.isGLTFSpecularGlossinessMaterial&&(N+="specular-glossiness:"),E&&(N+="skinning:"),T&&(N+="vertex-colors:"),A&&(N+="flat-shading:"),C&&(N+="morph-targets:"),P&&(N+="morph-normals:");var D=n.cache.get(N);D||(D=v.isGLTFSpecularGlossinessMaterial?i[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(v):v.clone(),E&&(D.skinning=!0),T&&(D.vertexColors=K),A&&(D.flatShading=!0),C&&(D.morphTargets=!0),P&&(D.morphNormals=!0),n.cache.add(N,D)),v=D}x[L]=v,v.aoMap&&void 0===f.attributes.uv2&&void 0!==f.attributes.uv&&(console.log("GLTFLoader: Duplicating UVs to support aoMap."),f.addAttribute("uv2",new M(f.attributes.uv.array,2))),v.isGLTFSpecularGlossinessMaterial&&(d.onBeforeRender=i[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms)}d.material=c?x:x[0]}if(1===u.length)return u[0];var F=new oo;for(l=0,h=u.length;l<h;l++)F.add(u[l]);return F})})},X.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new Hn(o.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new Jn(r.xmag/-2,r.xmag/2,r.ymag/2,r.ymag/-2,r.znear,r.zfar)),void 0!==n.name&&(t.name=n.name),B(t,n),Promise.resolve(t);console.warn("GLTFLoader: Missing camera parameters.")},X.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return n.inverseBindMatrices=e,n})},X.prototype.loadAnimation=function(e){var t=this.json.animations[e];return this.getMultiDependencies(["accessor","node"]).then(function(n){for(var r=[],i=0,o=t.channels.length;i<o;i++){var a=t.channels[i],s=t.samplers[a.sampler];if(s){var c=a.target,u=void 0!==c.node?c.node:c.id,l=void 0!==t.parameters?t.parameters[s.input]:s.input,h=void 0!==t.parameters?t.parameters[s.output]:s.output,d=n.accessors[l],p=n.accessors[h],m=n.nodes[u];if(m){var v;switch(m.updateMatrix(),m.matrixAutoUpdate=!0,L[c.path]){case L.weights:v=Cn;break;case L.rotation:v=Ln;break;case L.position:case L.scale:default:v=Nn}var g=m.name?m.name:m.uuid,y=void 0!==s.interpolation?O[s.interpolation]:2301,b=[];L[c.path]===L.weights?m.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&b.push(e.name?e.name:e.uuid)}):b.push(g);for(var x=0,w=b.length;x<w;x++){var _=new v(b[x]+"."+L[c.path],_n.arraySlice(d.array,0),_n.arraySlice(p.array,0),y);"CUBICSPLINE"===s.interpolation&&(_.createInterpolant=function(e){return new f(this.times,this.values,this.getValueSize()/3,e)},_.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),r.push(_)}}}}return new Rn(u=void 0!==t.name?t.name:"animation_"+e,void 0,r)})},X.prototype.loadNode=function(e){var n=this.json,r=this.extensions,i=n.meshReferences,o=n.meshUses,s=n.nodes[e];return this.getMultiDependencies(["mesh","skin","camera","light"]).then(function(e){var n;if(!0===s.isBone)n=new Fn;else if(void 0!==s.mesh){var c=e.meshes[s.mesh];if(i[s.mesh]>1){var u=o[s.mesh]++;(n=c.clone()).name+="_instance_"+u,n.onBeforeRender=c.onBeforeRender;for(var l=0,h=n.children.length;l<h;l++)n.children[l].name+="_instance_"+u,n.children[l].onBeforeRender=c.children[l].onBeforeRender}else n=c}else if(void 0!==s.camera)n=e.cameras[s.camera];else if(s.extensions&&s.extensions[t.KHR_LIGHTS_PUNCTUAL]&&void 0!==s.extensions[t.KHR_LIGHTS_PUNCTUAL].light){n=r[t.KHR_LIGHTS_PUNCTUAL].lights[s.extensions[t.KHR_LIGHTS_PUNCTUAL].light]}else n=new p;if(void 0!==s.name&&(n.name=xn.sanitizeNodeName(s.name)),B(n,s),s.extensions&&U(r,n,s),void 0!==s.matrix){var d=new a;d.fromArray(s.matrix),n.applyMatrix(d)}else void 0!==s.translation&&n.position.fromArray(s.translation),void 0!==s.rotation&&n.quaternion.fromArray(s.rotation),void 0!==s.scale&&n.scale.fromArray(s.scale);return n})},X.prototype.loadScene=function(){function e(t,n,r,i,o){var s=i[t],c=r.nodes[t];if(void 0!==c.skin)for(var u=!0===s.isGroup?s.children:[s],l=0,h=u.length;l<h;l++){for(var d=u[l],f=o[c.skin],p=[],m=[],v=0,g=f.joints.length;v<g;v++){var y=f.joints[v],b=i[y];if(b){p.push(b);var x=new a;void 0!==f.inverseBindMatrices&&x.fromArray(f.inverseBindMatrices.array,16*v),m.push(x)}else console.warn('GLTFLoader: Joint "%s" could not be found.',y)}d.bind(new uo(p,m),d.matrixWorld)}if(n.add(s),c.children){var w=c.children;for(l=0,h=w.length;l<h;l++){e(w[l],s,r,i,o)}}}return function(t){var n=this.json,r=this.extensions,i=this.json.scenes[t];return this.getMultiDependencies(["node","skin"]).then(function(t){var o=new Yn;void 0!==i.name&&(o.name=i.name),B(o,i),i.extensions&&U(r,o,i);for(var a=i.nodes||[],s=0,c=a.length;s<c;s++)e(a[s],o,n,t.nodes,t.skins);return o})}}(),e}(),Wo=function(e){this.manager=void 0!==e?e:cr};(Wo.prototype=Object.create(Uo.prototype))._parser=function(e){var t=function(e,t){switch(e){case 1:console.error("RGBELoader Read Error: "+(t||""));break;case 2:console.error("RGBELoader Write Error: "+(t||""));break;case 3:console.error("RGBELoader Bad File Format: "+(t||""));break;default:case 4:console.error("RGBELoader: Error: "+(t||""))}return-1},n=function(e,t,n){t=t||1024;for(var r=e.pos,i=-1,o=0,a="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));0>(i=s.indexOf("\n"))&&o<t&&r<e.byteLength;)a+=s,o+=s.length,r+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<i&&(!1!==n&&(e.pos+=o+i+1),a+s.slice(0,i))},r=new Uint8Array(e);r.pos=0;var i=function(e){var r,i,o=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,c=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(r=n(e)))return t(1,"no header found");if(!(i=r.match(/^#\?(\S+)$/)))return t(3,"bad initial token");for(u.valid|=1,u.programtype=i[1],u.string+=r+"\n";!1!==(r=n(e));)if(u.string+=r+"\n","#"!==r.charAt(0)){if((i=r.match(o))&&(u.gamma=parseFloat(i[1],10)),(i=r.match(a))&&(u.exposure=parseFloat(i[1],10)),(i=r.match(s))&&(u.valid|=2,u.format=i[1]),(i=r.match(c))&&(u.valid|=4,u.height=parseInt(i[1],10),u.width=parseInt(i[2],10)),2&u.valid&&4&u.valid)break}else u.comments+=r+"\n";return 2&u.valid?4&u.valid?u:t(3,"missing image size specifier"):t(3,"missing format specifier")}(r);if(-1!==i){var o=i.width,a=i.height,s=function(e,n,r){var i,o,a,s,c,u,l,h,d,f,p,m,v,g=n,y=r;if(g<8||g>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(g!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");if(!(i=new Uint8Array(4*n*r))||!i.length)return t(4,"unable to allocate buffer space");for(o=0,a=0,h=4*g,v=new Uint8Array(4),u=new Uint8Array(h);y>0&&a<e.byteLength;){if(a+4>e.byteLength)return t(1);if(v[0]=e[a++],v[1]=e[a++],v[2]=e[a++],v[3]=e[a++],2!=v[0]||2!=v[1]||(v[2]<<8|v[3])!=g)return t(3,"bad rgbe scanline format");for(l=0;l<h&&a<e.byteLength;){if((m=(s=e[a++])>128)&&(s-=128),0===s||l+s>h)return t(3,"bad scanline data");if(m)for(c=e[a++],d=0;d<s;d++)u[l++]=c;else u.set(e.subarray(a,a+s),l),l+=s,a+=s}for(f=g,d=0;d<f;d++)p=0,i[o]=u[d+p],p+=g,i[o+1]=u[d+p],p+=g,i[o+2]=u[d+p],p+=g,i[o+3]=u[d+p],o+=4;y--}return i}(r.subarray(r.pos),o,a);if(-1!==s)return{width:o,height:a,data:s,header:i.string,gamma:i.gamma,exposure:i.exposure,format:gt,type:et}}return null};var Ho=Wo;function Xo(e,t,n,r,i,o,a,s,c,u){e=void 0!==e?e:[],t=void 0!==t?t:Ue,Kn.call(this,e,t,n,r,i,o,a,s,c,u),this.flipY=!1}Xo.prototype=Object.create(Kn.prototype),Xo.prototype.constructor=Xo,Xo.prototype.isCubeTexture=!0,Object.defineProperty(Xo.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var qo=function(e){this.manager=void 0!==e?e:cr,this.hdrLoader=new Wo};qo.prototype.load=function(e,t,n,r,i){var o=function(e,t,n,r){var i=e[t+3],o=Math.pow(2,i-128)/255;n[r+0]=e[t+0]*o,n[r+1]=e[t+1]*o,n[r+2]=e[t+2]*o},a=function(){var e=new Float32Array(1),t=new Int32Array(e.buffer);function n(n){e[0]=n;var r=t[0],i=r>>16&32768,o=r>>12&2047,a=r>>23&255;return a<103?i:a>142?(i|=31744,i|=(255==a?0:1)&&8388607&r):a<113?i|=((o|=2048)>>114-a)+(o>>113-a&1):(i|=a-112<<10|o>>1,i+=1&o)}return function(e,t,r,i){var o=e[t+3],a=Math.pow(2,o-128)/255;r[i+0]=n(e[t+0]*a),r[i+1]=n(e[t+1]*a),r[i+2]=n(e[t+2]*a)}}(),s=new Xo;s.type=e,s.encoding=e===et?Kt:Jt,s.format=e===et?pt:ft,s.minFilter=s.encoding===Kt?Ye:Ze,s.magFilter=s.encoding===Kt?Ye:Ze,s.generateMipmaps=s.encoding!==Kt,s.anisotropy=0;var c=this.hdrLoader,u=0;function l(n,r,i,l){var h=new lr(c.manager);h.setResponseType("arraybuffer"),h.load(t[n],function(t){u++;var i=c._parser(t);if(i){if(e===at){for(var l=i.data.length/4*3,h=new Float32Array(l),d=0;d<l;d++)o(i.data,4*d,h,3*d);i.data=h}else if(e===st){l=i.data.length/4*3;var f=new Uint16Array(l);for(d=0;d<l;d++)a(i.data,4*d,f,3*d);i.data=f}if(void 0!==i.image)s[n].images=i.image;else if(void 0!==i.data){var p=new Vi(i.data,i.width,i.height);p.format=s.format,p.type=s.type,p.encoding=s.encoding,p.minFilter=s.minFilter,p.magFilter=s.magFilter,p.generateMipmaps=s.generateMipmaps,s.images[n]=p}6===u&&(s.needsUpdate=!0,r&&r(s))}},i,l)}for(var h=0;h<t.length;h++)l(h,n,r,i);return s};var Yo=function(e){this.manager=void 0!==e?e:cr};Yo.prototype={constructor:Yo,load:function(e,t,n,r){var i=this,o=new lr(i.manager);o.setResponseType("arraybuffer"),o.load(e,function(e){t(i.parse(e))},n,r)},parse:function(e){var t=new sr;t.setURLModifier(function(e){var t=function(e){for(var t in n.files)if(t.substr(-e.length)===e)return n.files[t]}(e);if(t){console.log("Loading",e);var r=new Blob([t.asArrayBuffer()],{type:"application/octet-stream"});return URL.createObjectURL(r)}return e});var n=new JSZip(e);if(n.files["doc.kml"]){var r=(new DOMParser).parseFromString(n.files["doc.kml"].asText(),"application/xml").querySelector("Placemark Model Link href");if(r)return new Po(t).parse(n.files[r.textContent].asText())}else for(var i in console.warn("KMZLoader: Missing doc.kml file."),n.files){if("dae"===i.split(".").pop().toLowerCase())return new Po(t).parse(n.files[i].asText())}return console.error("KMZLoader: Couldn't find .dae file."),{scene:new oo}}};var Jo=function(e){Oo.call(this,e),this._parser=Jo.parse};Jo.prototype=Object.create(Oo.prototype),Jo.prototype.constructor=Jo,Jo.parse=function(e,t){var n=new Qo(e,1);return{mipmaps:n.mipmaps(t),width:n.pixelWidth,height:n.pixelHeight,format:n.glInternalFormat,isCubemap:6===n.numberOfFaces,mipmapCount:n.numberOfMipmapLevels}};var Qo=function(){function e(t,n,r,i){this.arrayBuffer=t;var o=new Uint8Array(this.arrayBuffer,0,12);if(171===o[0]&&75===o[1]&&84===o[2]&&88===o[3]&&32===o[4]&&49===o[5]&&49===o[6]&&187===o[7]&&13===o[8]&&10===o[9]&&26===o[10]&&10===o[11]){var a=new Int32Array(this.arrayBuffer,12,13),s=16909060===a[0];this.glType=s?this.switchEndainness(a[1]):a[1],this.glTypeSize=s?this.switchEndainness(a[2]):a[2],this.glFormat=s?this.switchEndainness(a[3]):a[3],this.glInternalFormat=s?this.switchEndainness(a[4]):a[4],this.glBaseInternalFormat=s?this.switchEndainness(a[5]):a[5],this.pixelWidth=s?this.switchEndainness(a[6]):a[6],this.pixelHeight=s?this.switchEndainness(a[7]):a[7],this.pixelDepth=s?this.switchEndainness(a[8]):a[8],this.numberOfArrayElements=s?this.switchEndainness(a[9]):a[9],this.numberOfFaces=s?this.switchEndainness(a[10]):a[10],this.numberOfMipmapLevels=s?this.switchEndainness(a[11]):a[11],this.bytesOfKeyValueData=s?this.switchEndainness(a[12]):a[12],0===this.glType?(this.numberOfMipmapLevels=Math.max(1,this.numberOfMipmapLevels),0!==this.pixelHeight&&0===this.pixelDepth?0===this.numberOfArrayElements?this.numberOfFaces===n?this.loadType=e.COMPRESSED_2D:console.warn("number of faces expected"+n+", but found "+this.numberOfFaces):console.warn("texture arrays not currently supported"):console.warn("only 2D textures currently supported")):console.warn("only compressed formats currently supported")}else console.error("texture missing KTX identifier")}return e.prototype.switchEndainness=function(e){return(255&e)<<24|(65280&e)<<8|e>>8&65280|e>>24&255},e.prototype.mipmaps=function(t){for(var n=[],r=e.HEADER_LEN+this.bytesOfKeyValueData,i=this.pixelWidth,o=this.pixelHeight,a=t?this.numberOfMipmapLevels:1,s=0;s<a;s++){for(var c=new Int32Array(this.arrayBuffer,r,1)[0],u=0;u<this.numberOfFaces;u++){var l=new Uint8Array(this.arrayBuffer,r+4,c);n.push({data:l,width:i,height:o}),r+=c+4,r+=3-(c+3)%4}i=Math.max(1,.5*i),o=Math.max(1,.5*o)}return n},e.HEADER_LEN=64,e.COMPRESSED_2D=0,e.COMPRESSED_3D=1,e.TEX_2D=2,e.TEX_3D=3,e}(),Zo={Validator:{isValid:function(e){return null!==e&&void 0!==e},verifyInput:function(e,t){return null===e||void 0===e?t:e}}};Zo.Callbacks=function(){var e=Zo.Validator;function t(){this.onProgress=null,this.onReportError=null,this.onMeshAlter=null,this.onLoad=null,this.onLoadMaterials=null}return t.prototype.setCallbackOnProgress=function(t){this.onProgress=e.verifyInput(t,this.onProgress)},t.prototype.setCallbackOnReportError=function(t){this.onReportError=e.verifyInput(t,this.onReportError)},t.prototype.setCallbackOnMeshAlter=function(t){this.onMeshAlter=e.verifyInput(t,this.onMeshAlter)},t.prototype.setCallbackOnLoad=function(t){this.onLoad=e.verifyInput(t,this.onLoad)},t.prototype.setCallbackOnLoadMaterials=function(t){this.onLoadMaterials=e.verifyInput(t,this.onLoadMaterials)},t}(),Zo.LoadedMeshUserOverride=function(){function e(e,t){this.disregardMesh=!0===e,this.alteredMesh=!0===t,this.meshes=[]}return e.prototype.addMesh=function(e){this.meshes.push(e),this.alteredMesh=!0},e.prototype.isDisregardMesh=function(){return this.disregardMesh},e.prototype.providesAlteredMeshes=function(){return this.alteredMesh},e}(),Zo.ResourceDescriptor=function(){var e=Zo.Validator;function t(t,n){var r=t.split("/");r.length<2?(this.path=null,this.name=t,this.url=t):(this.path=e.verifyInput(r.slice(0,r.length-1).join("/")+"/",null),this.name=r[r.length-1],this.url=t),this.name=e.verifyInput(this.name,"Unnamed_Resource"),this.extension=e.verifyInput(n,"default"),this.extension=this.extension.trim(),this.content=null}return t.prototype.setContent=function(t){this.content=e.verifyInput(t,null)},t}(),Zo.PrepData=function(){var e=Zo.Validator;function t(t){this.logging={enabled:!0,debug:!1},this.modelName=e.verifyInput(t,""),this.resources=[],this.callbacks=new Zo.Callbacks}return t.prototype.setLogging=function(e,t){this.logging.enabled=!0===e,this.logging.debug=!0===t},t.prototype.getCallbacks=function(){return this.callbacks},t.prototype.addResource=function(e){this.resources.push(e)},t.prototype.clone=function(){var e,t,n=new Zo.PrepData(this.modelName);for(e in n.logging.enabled=this.logging.enabled,n.logging.debug=this.logging.debug,n.resources=this.resources,n.callbacks=this.callbacks,this)t=this[e],n.hasOwnProperty(e)||"function"==typeof this[e]||(n[e]=t);return n},t.prototype.checkResourceDescriptorFiles=function(t,n){var r,i,o,a,s={};for(var c in t)if(r=t[c],a=!1,e.isValid(r.name))if(e.isValid(r.content)){for(o=0;o<n.length&&!a;o++)if(i=n[o],r.extension.toLowerCase()===i.ext.toLowerCase())if(i.ignore)a=!0;else if("ArrayBuffer"===i.type){if(!(r.content instanceof ArrayBuffer||r.content instanceof Uint8Array))throw"Provided content is not of type ArrayBuffer! Aborting...";s[i.ext]=r,a=!0}else if("String"===i.type){if(!("string"==typeof r.content||r.content instanceof String))throw"Provided  content is not of type String! Aborting...";s[i.ext]=r,a=!0}if(!a)throw'Unidentified resource "'+r.name+'": '+r.url}else{if(!("string"==typeof r.name||r.name instanceof String))throw"Provided file is not properly defined! Aborting...";for(o=0;o<n.length&&!a;o++)i=n[o],r.extension.toLowerCase()===i.ext.toLowerCase()&&(i.ignore||(s[i.ext]=r),a=!0);if(!a)throw'Unidentified resource "'+r.name+'": '+r.url}return s},t}(),Zo.MeshBuilder=function(){var e="1.2.2",t=Zo.Validator;function n(){console.info("Using LoaderSupport.MeshBuilder version: "+e),this.logging={enabled:!0,debug:!1},this.callbacks=new Zo.Callbacks,this.materials=[]}return n.prototype.setLogging=function(e,t){this.logging.enabled=!0===e,this.logging.debug=!0===t},n.prototype.init=function(){var e=new gr({color:14479871});e.name="defaultMaterial";var t=new gr({color:14479871});t.name="defaultVertexColorMaterial",t.vertexColors=K;var n=new ln;n.name="defaultLineMaterial";var r=new xr({size:1});r.name="defaultPointMaterial";var i={};i[e.name]=e,i[t.name]=t,i[n.name]=n,i[r.name]=r,this.updateMaterials({cmd:"materialData",materials:{materialCloneInstructions:null,serializedMaterials:null,runtimeMaterials:i}})},n.prototype.setMaterials=function(e){var n={cmd:"materialData",materials:{materialCloneInstructions:null,serializedMaterials:null,runtimeMaterials:t.isValid(this.callbacks.onLoadMaterials)?this.callbacks.onLoadMaterials(e):e}};this.updateMaterials(n)},n.prototype._setCallbacks=function(e){t.isValid(e.onProgress)&&this.callbacks.setCallbackOnProgress(e.onProgress),t.isValid(e.onReportError)&&this.callbacks.setCallbackOnReportError(e.onReportError),t.isValid(e.onMeshAlter)&&this.callbacks.setCallbackOnMeshAlter(e.onMeshAlter),t.isValid(e.onLoad)&&this.callbacks.setCallbackOnLoad(e.onLoad),t.isValid(e.onLoadMaterials)&&this.callbacks.setCallbackOnLoadMaterials(e.onLoadMaterials)},n.prototype.processPayload=function(e){return"meshData"===e.cmd?this.buildMeshes(e):"materialData"===e.cmd?(this.updateMaterials(e),null):void 0},n.prototype.buildMeshes=function(e){var n,r,i,o=e.params.meshName,a=new k;a.addAttribute("position",new M(new Float32Array(e.buffers.vertices),3)),t.isValid(e.buffers.indices)&&a.setIndex(new M(new Uint32Array(e.buffers.indices),1)),t.isValid(e.buffers.colors)&&a.addAttribute("color",new M(new Float32Array(e.buffers.colors),3)),t.isValid(e.buffers.normals)?a.addAttribute("normal",new M(new Float32Array(e.buffers.normals),3)):a.computeVertexNormals(),t.isValid(e.buffers.uvs)&&a.addAttribute("uv",new M(new Float32Array(e.buffers.uvs),2));var s=e.materials.materialNames,c=e.materials.multiMaterial,u=[];for(i in s)r=s[i],n=this.materials[r],c&&u.push(n);if(c){n=u;var l,h=e.materials.materialGroups;for(i in h)l=h[i],a.addGroup(l.start,l.count,l.index)}var d,f,p,m=[],v=this.callbacks.onMeshAlter,g=!0,y=t.verifyInput(e.geometryType,0);if(t.isValid(v)&&(f=v({detail:{meshName:o,bufferGeometry:a,material:n,geometryType:y}}),t.isValid(f)))if(f.isDisregardMesh())g=!1;else if(f.providesAlteredMeshes()){for(var b in f.meshes)m.push(f.meshes[b]);g=!1}if(g&&(e.computeBoundingSphere&&a.computeBoundingSphere(),(d=0===y?new fn(a,n):1===y?new Eo(a,n):new Gi(a,n)).name=o,m.push(d)),t.isValid(m)&&m.length>0){var x=[];for(var b in m)d=m[b],x[b]=d.name;p="Adding mesh(es) ("+x.length+": "+x+") from input mesh: "+o,p+=" ("+(100*e.progress.numericalValue).toFixed(2)+"%)"}else p="Not adding mesh: "+o,p+=" ("+(100*e.progress.numericalValue).toFixed(2)+"%)";var w=this.callbacks.onProgress;t.isValid(w)&&w(new CustomEvent("MeshBuilderEvent",{detail:{type:"progress",modelName:e.params.meshName,text:p,numericalValue:e.progress.numericalValue}}));return m},n.prototype.updateMaterials=function(e){var n,r,i=e.materials.materialCloneInstructions;if(t.isValid(i)){var o=i.materialNameOrg,a=this.materials[o];if(t.isValid(o)){n=a.clone(),r=i.materialName,n.name=r;var s=i.materialProperties;for(var c in s)n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&(n[c]=s[c]);this.materials[r]=n}else console.warn('Requested material "'+o+'" is not available!')}var u=e.materials.serializedMaterials;if(t.isValid(u)&&Object.keys(u).length>0){var l,h=new Mr;for(r in u)l=u[r],t.isValid(l)&&(n=h.parse(l),this.logging.enabled&&console.info('De-serialized material with name "'+r+'" will be added.'),this.materials[r]=n)}if(u=e.materials.runtimeMaterials,t.isValid(u)&&Object.keys(u).length>0)for(r in u)n=u[r],this.logging.enabled&&console.info('Material with name "'+r+'" will be added.'),this.materials[r]=n},n.prototype.getMaterialsJSON=function(){var e,t={};for(var n in this.materials)e=this.materials[n],t[n]=e.toJSON();return t},n.prototype.getMaterials=function(){return this.materials},n}(),Zo.WorkerRunnerRefImpl=function(){function e(){var e=this;self.addEventListener("message",function(t){e.processMessage(t.data)},!1)}return e.prototype.applyProperties=function(e,t){var n,r,i;for(n in t)r="set"+n.substring(0,1).toLocaleUpperCase()+n.substring(1),i=t[n],"function"==typeof e[r]?e[r](i):e.hasOwnProperty(n)&&(e[n]=i)},e.prototype.processMessage=function(e){if("run"===e.cmd){var t={callbackMeshBuilder:function(e){self.postMessage(e)},callbackProgress:function(t){e.logging.enabled&&e.logging.debug&&console.debug("WorkerRunner: progress: "+t)}},n=new Parser;"function"==typeof n.setLogging&&n.setLogging(e.logging.enabled,e.logging.debug),this.applyProperties(n,e.params),this.applyProperties(n,e.materials),this.applyProperties(n,t),n.workerScope=self,n.parse(e.data.input,e.data.options),e.logging.enabled&&console.log("WorkerRunner: Run complete!"),t.callbackMeshBuilder({cmd:"complete",msg:"WorkerRunner completed run."})}else console.error("WorkerRunner: Received unknown command: "+e.cmd)},e}(),Zo.WorkerSupport=function(){var e="2.2.1",t=Zo.Validator,n=function(){function e(){this._reset()}return e.prototype._reset=function(){this.logging={enabled:!0,debug:!1},this.worker=null,this.runnerImplName=null,this.callbacks={meshBuilder:null,onLoad:null},this.terminateRequested=!1,this.queuedMessage=null,this.started=!1,this.forceCopy=!1},e.prototype.setLogging=function(e,t){this.logging.enabled=!0===e,this.logging.debug=!0===t},e.prototype.setForceCopy=function(e){this.forceCopy=!0===e},e.prototype.initWorker=function(e,t){this.runnerImplName=t;var n=new Blob([e],{type:"application/javascript"});this.worker=new Worker(i.URL.createObjectURL(n)),this.worker.onmessage=this._receiveWorkerMessage,this.worker.runtimeRef=this,this._postMessage()},e.prototype._receiveWorkerMessage=function(e){var t=e.data;switch(t.cmd){case"meshData":case"materialData":case"imageData":this.runtimeRef.callbacks.meshBuilder(t);break;case"complete":this.runtimeRef.queuedMessage=null,this.started=!1,this.runtimeRef.callbacks.onLoad(t.msg),this.runtimeRef.terminateRequested&&(this.runtimeRef.logging.enabled&&console.info("WorkerSupport ["+this.runtimeRef.runnerImplName+"]: Run is complete. Terminating application on request!"),this.runtimeRef._terminate());break;case"error":console.error("WorkerSupport ["+this.runtimeRef.runnerImplName+"]: Reported error: "+t.msg),this.runtimeRef.queuedMessage=null,this.started=!1,this.runtimeRef.callbacks.onLoad(t.msg),this.runtimeRef.terminateRequested&&(this.runtimeRef.logging.enabled&&console.info("WorkerSupport ["+this.runtimeRef.runnerImplName+"]: Run reported error. Terminating application on request!"),this.runtimeRef._terminate());break;default:console.error("WorkerSupport ["+this.runtimeRef.runnerImplName+"]: Received unknown command: "+t.cmd)}},e.prototype.setCallbacks=function(e,n){this.callbacks.meshBuilder=t.verifyInput(e,this.callbacks.meshBuilder),this.callbacks.onLoad=t.verifyInput(n,this.callbacks.onLoad)},e.prototype.run=function(e){if(t.isValid(this.queuedMessage))console.warn("Already processing message. Rejecting new run instruction");else{if(this.queuedMessage=e,this.started=!0,!t.isValid(this.callbacks.meshBuilder))throw'Unable to run as no "MeshBuilder" callback is set.';if(!t.isValid(this.callbacks.onLoad))throw'Unable to run as no "onLoad" callback is set.';"run"!==e.cmd&&(e.cmd="run"),t.isValid(e.logging)?(e.logging.enabled=!0===e.logging.enabled,e.logging.debug=!0===e.logging.debug):e.logging={enabled:!0,debug:!1},this._postMessage()}},e.prototype._postMessage=function(){var e;t.isValid(this.queuedMessage)&&t.isValid(this.worker)&&(this.queuedMessage.data.input instanceof ArrayBuffer?(e=this.forceCopy?this.queuedMessage.data.input.slice(0):this.queuedMessage.data.input,this.worker.postMessage(this.queuedMessage,[e])):this.worker.postMessage(this.queuedMessage))},e.prototype.setTerminateRequested=function(e){this.terminateRequested=!0===e,this.terminateRequested&&t.isValid(this.worker)&&!t.isValid(this.queuedMessage)&&this.started&&(this.logging.enabled&&console.info("Worker is terminated immediately as it is not running!"),this._terminate())},e.prototype._terminate=function(){this.worker.terminate(),this._reset()},e}();function r(){if(console.info("Using LoaderSupport.WorkerSupport version: "+e),this.logging={enabled:!0,debug:!1},void 0===i.Worker)throw"This browser does not support web workers!";if(void 0===i.Blob)throw"This browser does not support Blob!";if("function"!=typeof i.URL.createObjectURL)throw"This browser does not support Object creation from URL!";this.loaderWorker=new n}r.prototype.setLogging=function(e,t){this.logging.enabled=!0===e,this.logging.debug=!0===t,this.loaderWorker.setLogging(this.logging.enabled,this.logging.debug)},r.prototype.setForceWorkerDataCopy=function(e){this.loaderWorker.setForceCopy(e)},r.prototype.validate=function(e,n,r,i,s){if(!t.isValid(this.loaderWorker.worker)){this.logging.enabled&&(console.info("WorkerSupport: Building worker code..."),console.time("buildWebWorkerCode")),t.isValid(s)?this.logging.enabled&&console.info('WorkerSupport: Using "'+s.name+'" as Runner class for worker.'):(s=Zo.WorkerRunnerRefImpl,this.logging.enabled&&console.info('WorkerSupport: Using DEFAULT "LoaderSupport.WorkerRunnerRefImpl" as Runner class for worker.'));var c=e(o,a);c+="var Parser = "+n+";\n\n",c+=a(s.name,s),c+="new "+s.name+"();\n\n";var u=this;if(t.isValid(r)&&r.length>0){var l="",h=function(e,t){if(0===t.length)u.loaderWorker.initWorker(l+c,s.name),u.logging.enabled&&console.timeEnd("buildWebWorkerCode");else{var n=new lr;n.setPath(e),n.setResponseType("text"),n.load(t[0],function(n){l+=n,h(e,t)}),t.shift()}};h(i,r)}else this.loaderWorker.initWorker(c,s.name),this.logging.enabled&&console.timeEnd("buildWebWorkerCode")}},r.prototype.setCallbacks=function(e,t){this.loaderWorker.setCallbacks(e,t)},r.prototype.run=function(e){this.loaderWorker.run(e)},r.prototype.setTerminateRequested=function(e){this.loaderWorker.setTerminateRequested(e)};var o=function(e,t){var n,r=e+" = {\n";for(var i in t)"string"==typeof(n=t[i])||n instanceof String?r+="\t"+i+': "'+(n=(n=n.replace("\n","\\n")).replace("\r","\\r"))+'",\n':n instanceof Array?r+="\t"+i+": ["+n+"],\n":Number.isInteger(n)?r+="\t"+i+": "+n+",\n":"function"==typeof n&&(r+="\t"+i+": "+n+",\n");return r+="}\n\n"},a=function(e,n,r,i,o){var a,s,c="",u=t.isValid(r)?r:n.name;for(var l in o=t.verifyInput(o,[]),n.prototype)a=n.prototype[l],"constructor"===l?s="\tfunction "+u+a.toString().replace("function","")+";\n\n":"function"==typeof a&&o.indexOf(l)<0&&(c+="\t"+u+".prototype."+l+" = "+a.toString()+";\n\n");c+="\treturn "+u+";\n",c+="})();\n\n";var h="";return t.isValid(i)&&(h+="\n",h+=u+".prototype = Object.create( "+i+".prototype );\n",h+=u+".constructor = "+u+";\n",h+="\n"),t.isValid(s)?c=e+" = (function () {\n\n"+h+s+c:(s=e+" = (function () {\n\n",c=(s+=h+"\t"+n.prototype.constructor.toString()+"\n\n")+c),c};return r}(),Zo.WorkerDirector=function(){var e="2.2.2",t=Zo.Validator,n=16,r=8192;function i(i){if(console.info("Using LoaderSupport.WorkerDirector version: "+e),this.logging={enabled:!0,debug:!1},this.maxQueueSize=r,this.maxWebWorkers=n,this.crossOrigin=null,!t.isValid(i))throw"Provided invalid classDef: "+i;this.workerDescription={classDef:i,globalCallbacks:{},workerSupports:{},forceWorkerDataCopy:!0},this.objectsCompleted=0,this.instructionQueue=[],this.instructionQueuePointer=0,this.callbackOnFinishedProcessing=null}return i.prototype.setLogging=function(e,t){this.logging.enabled=!0===e,this.logging.debug=!0===t},i.prototype.getMaxQueueSize=function(){return this.maxQueueSize},i.prototype.getMaxWebWorkers=function(){return this.maxWebWorkers},i.prototype.setCrossOrigin=function(e){this.crossOrigin=e},i.prototype.setForceWorkerDataCopy=function(e){this.workerDescription.forceWorkerDataCopy=!0===e},i.prototype.prepareWorkers=function(e,i,o){t.isValid(e)&&(this.workerDescription.globalCallbacks=e),this.maxQueueSize=Math.min(i,r),this.maxWebWorkers=Math.min(o,n),this.maxWebWorkers=Math.min(this.maxWebWorkers,this.maxQueueSize),this.objectsCompleted=0,this.instructionQueue=[],this.instructionQueuePointer=0;for(var a=0;a<this.maxWebWorkers;a++){var s=new Zo.WorkerSupport;s.setLogging(this.logging.enabled,this.logging.debug),s.setForceWorkerDataCopy(this.workerDescription.forceWorkerDataCopy),this.workerDescription.workerSupports[a]={instanceNo:a,inUse:!1,terminateRequested:!1,workerSupport:s,loader:null}}},i.prototype.enqueueForRun=function(e){this.instructionQueue.length<this.maxQueueSize&&this.instructionQueue.push(e)},i.prototype.isRunning=function(){var e=Object.keys(this.workerDescription.workerSupports);return this.instructionQueue.length>0&&this.instructionQueuePointer<this.instructionQueue.length||e.length>0},i.prototype.processQueue=function(){var e,t;for(var n in this.workerDescription.workerSupports)(t=this.workerDescription.workerSupports[n]).inUse||(this.instructionQueuePointer<this.instructionQueue.length?(e=this.instructionQueue[this.instructionQueuePointer],this._kickWorkerRun(e,t),this.instructionQueuePointer++):this._deregister(t));this.isRunning()||null===this.callbackOnFinishedProcessing||(this.callbackOnFinishedProcessing(),this.callbackOnFinishedProcessing=null)},i.prototype._kickWorkerRun=function(e,n){n.inUse=!0,n.workerSupport.setTerminateRequested(n.terminateRequested),this.logging.enabled&&console.info("\nAssigning next item from queue to worker (queue length: "+this.instructionQueue.length+")\n\n");var r=this,i=e.getCallbacks(),o=this.workerDescription.globalCallbacks;n.loader=this._buildLoader(n.instanceNo);var a=new Zo.Callbacks;a.setCallbackOnLoad(function(e){t.isValid(o.onLoad)&&o.onLoad(e),t.isValid(i.onLoad)&&i.onLoad(e),r.objectsCompleted++,n.inUse=!1,r.processQueue()}),a.setCallbackOnProgress(function(e){t.isValid(o.onProgress)&&o.onProgress(e),t.isValid(i.onProgress)&&i.onProgress(e)}),a.setCallbackOnReportError(function(e){var a=!0;t.isValid(o.onReportError)&&(a=o.onReportError(n,e)),t.isValid(i.onReportError)&&(a=i.onReportError(n,e)),t.isValid(o.onReportError)||t.isValid(i.onReportError)||(console.error("Loader reported an error: "),console.error(e)),a&&(n.inUse=!1,r.processQueue())}),a.setCallbackOnMeshAlter(function(e,n){return t.isValid(o.onMeshAlter)&&(n=o.onMeshAlter(e,n)),t.isValid(i.onMeshAlter)&&(n=o.onMeshAlter(e,n)),n}),a.setCallbackOnLoadMaterials(function(e){return t.isValid(o.onLoadMaterials)&&(e=o.onLoadMaterials(e)),t.isValid(i.onLoadMaterials)&&(e=i.onLoadMaterials(e)),e}),e.callbacks=a,n.loader.run(e,n.workerSupport)},i.prototype._buildLoader=function(e){var n=this.workerDescription.classDef,r=Object.create(n.prototype);if(n.call(r,cr),!r.hasOwnProperty("instanceNo"))throw n.name+' has no property "instanceNo".';if(r.instanceNo=e,!r.hasOwnProperty("workerSupport"))throw n.name+' has no property "workerSupport".';if("function"!=typeof r.run)throw n.name+' has no function "run".';return r.hasOwnProperty("callbacks")&&t.isValid(r.callbacks)||(console.warn(n.name+' has an invalid property "callbacks". Will change to "LoaderSupport.Callbacks"'),r.callbacks=new Zo.Callbacks),r},i.prototype._deregister=function(e){if(t.isValid(e)){e.workerSupport.setTerminateRequested(!0),this.logging.enabled&&console.info("Requested termination of worker #"+e.instanceNo+".");var n=e.loader.callbacks;t.isValid(n.onProgress)&&n.onProgress({detail:{text:""}}),delete this.workerDescription.workerSupports[e.instanceNo]}},i.prototype.tearDown=function(e){for(var n in this.logging.enabled&&console.info("WorkerDirector received the deregister call. Terminating all workers!"),this.instructionQueuePointer=this.instructionQueue.length,this.callbackOnFinishedProcessing=t.verifyInput(e,null),this.workerDescription.workerSupports)this.workerDescription.workerSupports[n].terminateRequested=!0},i}();var Ko=function(e){this.manager=void 0!==e?e:cr};Ko.prototype={constructor:Ko,load:function(e,t,n,r){var i=this,o=new lr(i.manager);o.setResponseType("arraybuffer"),o.load(e,function(e){t(i.parse(e))},n,r)},parse:function(){var e=[[-.525731,0,.850651],[-.442863,.238856,.864188],[-.295242,0,.955423],[-.309017,.5,.809017],[-.16246,.262866,.951056],[0,0,1],[0,.850651,.525731],[-.147621,.716567,.681718],[.147621,.716567,.681718],[0,.525731,.850651],[.309017,.5,.809017],[.525731,0,.850651],[.295242,0,.955423],[.442863,.238856,.864188],[.16246,.262866,.951056],[-.681718,.147621,.716567],[-.809017,.309017,.5],[-.587785,.425325,.688191],[-.850651,.525731,0],[-.864188,.442863,.238856],[-.716567,.681718,.147621],[-.688191,.587785,.425325],[-.5,.809017,.309017],[-.238856,.864188,.442863],[-.425325,.688191,.587785],[-.716567,.681718,-.147621],[-.5,.809017,-.309017],[-.525731,.850651,0],[0,.850651,-.525731],[-.238856,.864188,-.442863],[0,.955423,-.295242],[-.262866,.951056,-.16246],[0,1,0],[0,.955423,.295242],[-.262866,.951056,.16246],[.238856,.864188,.442863],[.262866,.951056,.16246],[.5,.809017,.309017],[.238856,.864188,-.442863],[.262866,.951056,-.16246],[.5,.809017,-.309017],[.850651,.525731,0],[.716567,.681718,.147621],[.716567,.681718,-.147621],[.525731,.850651,0],[.425325,.688191,.587785],[.864188,.442863,.238856],[.688191,.587785,.425325],[.809017,.309017,.5],[.681718,.147621,.716567],[.587785,.425325,.688191],[.955423,.295242,0],[1,0,0],[.951056,.16246,.262866],[.850651,-.525731,0],[.955423,-.295242,0],[.864188,-.442863,.238856],[.951056,-.16246,.262866],[.809017,-.309017,.5],[.681718,-.147621,.716567],[.850651,0,.525731],[.864188,.442863,-.238856],[.809017,.309017,-.5],[.951056,.16246,-.262866],[.525731,0,-.850651],[.681718,.147621,-.716567],[.681718,-.147621,-.716567],[.850651,0,-.525731],[.809017,-.309017,-.5],[.864188,-.442863,-.238856],[.951056,-.16246,-.262866],[.147621,.716567,-.681718],[.309017,.5,-.809017],[.425325,.688191,-.587785],[.442863,.238856,-.864188],[.587785,.425325,-.688191],[.688191,.587785,-.425325],[-.147621,.716567,-.681718],[-.309017,.5,-.809017],[0,.525731,-.850651],[-.525731,0,-.850651],[-.442863,.238856,-.864188],[-.295242,0,-.955423],[-.16246,.262866,-.951056],[0,0,-1],[.295242,0,-.955423],[.16246,.262866,-.951056],[-.442863,-.238856,-.864188],[-.309017,-.5,-.809017],[-.16246,-.262866,-.951056],[0,-.850651,-.525731],[-.147621,-.716567,-.681718],[.147621,-.716567,-.681718],[0,-.525731,-.850651],[.309017,-.5,-.809017],[.442863,-.238856,-.864188],[.16246,-.262866,-.951056],[.238856,-.864188,-.442863],[.5,-.809017,-.309017],[.425325,-.688191,-.587785],[.716567,-.681718,-.147621],[.688191,-.587785,-.425325],[.587785,-.425325,-.688191],[0,-.955423,-.295242],[0,-1,0],[.262866,-.951056,-.16246],[0,-.850651,.525731],[0,-.955423,.295242],[.238856,-.864188,.442863],[.262866,-.951056,.16246],[.5,-.809017,.309017],[.716567,-.681718,.147621],[.525731,-.850651,0],[-.238856,-.864188,-.442863],[-.5,-.809017,-.309017],[-.262866,-.951056,-.16246],[-.850651,-.525731,0],[-.716567,-.681718,-.147621],[-.716567,-.681718,.147621],[-.525731,-.850651,0],[-.5,-.809017,.309017],[-.238856,-.864188,.442863],[-.262866,-.951056,.16246],[-.864188,-.442863,.238856],[-.809017,-.309017,.5],[-.688191,-.587785,.425325],[-.681718,-.147621,.716567],[-.442863,-.238856,.864188],[-.587785,-.425325,.688191],[-.309017,-.5,.809017],[-.147621,-.716567,.681718],[-.425325,-.688191,.587785],[-.16246,-.262866,.951056],[.442863,-.238856,.864188],[.16246,-.262866,.951056],[.309017,-.5,.809017],[.147621,-.716567,.681718],[0,-.525731,.850651],[.425325,-.688191,.587785],[.587785,-.425325,.688191],[.688191,-.587785,.425325],[-.955423,.295242,0],[-.951056,.16246,.262866],[-1,0,0],[-.850651,0,.525731],[-.955423,-.295242,0],[-.951056,-.16246,.262866],[-.864188,.442863,-.238856],[-.951056,.16246,-.262866],[-.809017,.309017,-.5],[-.864188,-.442863,-.238856],[-.951056,-.16246,-.262866],[-.809017,-.309017,-.5],[-.681718,.147621,-.716567],[-.681718,-.147621,-.716567],[-.850651,0,-.525731],[-.688191,.587785,-.425325],[-.587785,.425325,-.688191],[-.425325,.688191,-.587785],[-.425325,-.688191,-.587785],[-.587785,-.425325,-.688191],[-.688191,-.587785,-.425325]];return function(t){console.time("MD2Loader");for(var n=new DataView(t),r={},i=["ident","version","skinwidth","skinheight","framesize","num_skins","num_vertices","num_st","num_tris","num_glcmds","num_frames","offset_skins","offset_st","offset_tris","offset_frames","offset_glcmds","offset_end"],o=0;o<i.length;o++)r[i[o]]=n.getInt32(4*o,!0);if(844121161===r.ident&&8===r.version){if(r.offset_end===n.byteLength){for(var a=new k,c=[],u=r.offset_st,l=(o=0,r.num_st);o<l;o++){var h=n.getInt16(u+0,!0),d=n.getInt16(u+2,!0);c.push(h/r.skinwidth,1-d/r.skinheight),u+=4}u=r.offset_tris;var f=[],p=[];for(o=0,l=r.num_tris;o<l;o++)f.push(n.getUint16(u+0,!0),n.getUint16(u+2,!0),n.getUint16(u+4,!0)),p.push(n.getUint16(u+6,!0),n.getUint16(u+8,!0),n.getUint16(u+10,!0)),u+=12;var m=new s,v=new s,g=[],y=[];u=r.offset_frames;for(o=0,l=r.num_frames;o<l;o++){v.set(n.getFloat32(u+0,!0),n.getFloat32(u+4,!0),n.getFloat32(u+8,!0)),m.set(n.getFloat32(u+12,!0),n.getFloat32(u+16,!0),n.getFloat32(u+20,!0)),u+=24;for(var b=0;b<16;b++){var x=n.getUint8(u+b,!0);if(0===x)break;g[b]=x}var w={name:String.fromCharCode.apply(null,g),vertices:[],normals:[]};u+=16;for(b=0;b<r.num_vertices;b++){var _=n.getUint8(u++,!0),S=n.getUint8(u++,!0),M=n.getUint8(u++,!0),T=e[n.getUint8(u++,!0)];_=_*v.x+m.x,S=S*v.y+m.y,M=M*v.z+m.z,w.vertices.push(_,M,S),w.normals.push(T[0],T[2],T[1])}y.push(w)}var A=[],E=[],C=[],P=y[0].vertices,L=y[0].normals;for(o=0,l=f.length;o<l;o++){_=P[z=3*f[o]],S=P[z+1],M=P[z+2];A.push(_,S,M);var O=L[z],R=L[z+1],I=L[z+2];E.push(O,R,I);h=c[z=2*p[o]],d=c[z+1];C.push(h,d)}a.addAttribute("position",new N(A,3)),a.addAttribute("normal",new N(E,3)),a.addAttribute("uv",new N(C,2));var D=[],F=[];for(o=0,l=y.length;o<l;o++){var U=(w=y[o]).name;if(w.vertices.length>0){A=[],b=0;for(var B=f.length;b<B;b++){var z=3*f[b];_=w.vertices[z],S=w.vertices[z+1],M=w.vertices[z+2];A.push(_,S,M)}var j=new N(A,3);j.name=U,D.push(j)}if(w.normals.length>0){for(E=[],b=0,B=f.length;b<B;b++){z=3*f[b],O=w.normals[z],R=w.normals[z+1],I=w.normals[z+2];E.push(O,R,I)}var V=new N(E,3);V.name=U,F.push(V)}}return a.morphAttributes.position=D,a.morphAttributes.normal=F,a.animations=Rn.CreateClipsFromMorphTargetSequences(y,10),console.timeEnd("MD2Loader"),a}console.error("Corrupted MD2 file")}else console.error("Not a valid MD2 file")}}()};var $o=function(){function e(e){this.manager=void 0!==e?e:cr,this.loader=new lr(this.manager),this.parser=null,this.meshBuilder=new n(this.manager),this.animationBuilder=new o}e.prototype={constructor:e,crossOrigin:"anonymous",setCrossOrigin:function(e){return this.crossOrigin=e,this},load:function(e,t,n,r){var i=this.meshBuilder.setCrossOrigin(this.crossOrigin),o=Cr.extractUrlBase(e),a=this._extractExtension(e).toLowerCase();"pmd"===a||"pmx"===a?this["pmd"===a?"loadPMD":"loadPMX"](e,function(e){t(i.build(e,o,n,r))},n,r):r&&r(new Error("MMDLoader: Unknown model file extension ."+a+"."))},loadAnimation:function(e,t,n,r,i){var o=this.animationBuilder;this.loadVMD(e,function(e){n(t.isCamera?o.buildCameraAnimation(e):o.build(e,t))},r,i)},loadWithAnimation:function(e,t,n,r,i){var o=this;this.load(e,function(e){o.loadAnimation(t,e,function(t){n({mesh:e,animation:t})},r,i)},r,i)},loadPMD:function(e,t,n,r){var i=this._getParser();this.loader.setMimeType(void 0).setResponseType("arraybuffer").load(e,function(e){t(i.parsePmd(e,!0))},n,r)},loadPMX:function(e,t,n,r){var i=this._getParser();this.loader.setMimeType(void 0).setResponseType("arraybuffer").load(e,function(e){t(i.parsePmx(e,!0))},n,r)},loadVMD:function(e,t,n,r){var i=Array.isArray(e)?e:[e],o=[],a=i.length,s=this._getParser();this.loader.setMimeType(void 0).setResponseType("arraybuffer");for(var c=0,u=i.length;c<u;c++)this.loader.load(i[c],function(e){o.push(s.parseVmd(e,!0)),o.length===a&&t(s.mergeVmds(o))},n,r)},loadVPD:function(e,t,n,r,i){var o=this._getParser();this.loader.setMimeType(t?void 0:"text/plain; charset=shift_jis").setResponseType("text").load(e,function(e){n(o.parseVpd(e,!0))},r,i)},_extractExtension:function(e){var t=e.lastIndexOf(".");return t<0?"":e.slice(t+1)},_getParser:function(){if(null===this.parser){if("undefined"==typeof MMDParser)throw new Error("MMDLoader: Import MMDParser https://github.com/takahirox/mmd-parser");this.parser=new MMDParser.Parser}return this.parser}};var t=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAN0lEQVRYR+3WQREAMBACsZ5/bWiiMvgEBTt5cW37hjsBBAgQIECAwFwgyfYPCCBAgAABAgTWAh8aBHZBl14e8wAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAOUlEQVRYR+3WMREAMAwDsYY/yoDI7MLwIiP40+RJklfcCCBAgAABAgTqArfb/QMCCBAgQIAAgbbAB3z/e0F3js2cAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAN0lEQVRYR+3WQREAMBACsZ5/B5ilMvgEBTt5cW37hjsBBAgQIECAwFwgyfYPCCBAgAABAgTWAh81dWyx0gFwKAAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAOklEQVRYR+3WoREAMAwDsWb/UQtCy9wxTOQJ/oQ8SXKKGwEECBAgQIBAXeDt7f4BAQQIECBAgEBb4AOz8Hzx7WLY4wAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABPUlEQVRYR+1XwW7CMAy1+f9fZOMysSEOEweEOPRNdm3HbdOyIhAcklPrOs/PLy9RygBALxzcCDQFmgJNgaZAU6Ap0BR4PwX8gsRMVLssMRH5HcpzJEaWL7EVg9F1IHRlyqQohgVr4FGUlUcMJSjcUlDw0zvjeun70cLWmneoyf7NgBTQSniBTQQSuJAZsOnnaczjIMb5hCiuHKxokCrJfVnrctyZL0PkJAJe1HMil4nxeyi3Ypfn1kX51jpPvo/JeCNC4PhVdHdJw2XjBR8brF8PEIhNVn12AgP7uHsTBguBn53MUZCqv7Lp07Pn5k1Ro+uWmUNn7D+M57rtk7aG0Vo73xyF/fbFf0bPJjDXngnGocDTdFhygZjwUQrMNrDcmZlQT50VJ/g/UwNyHpu778+yW+/ksOz/BFo54P4AsUXMfRq7XWsAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACMElEQVRYR+2Xv4pTQRTGf2dubhLdICiii2KnYKHVolhauKWPoGAnNr6BD6CvIVaihYuI2i1ia0BY0MZGRHQXjZj/mSPnnskfNWiWZUlzJ5k7M2cm833nO5Mziej2DWWJRUoCpQKlAntSQCqgw39/iUWAGmh37jrRnVsKlgpiqmkoGVABA7E57fvY+pJDdgKqF6HzFCSADkDq+F6AHABtQ+UMVE5D7zXod7fFNhTEckTbj5XQgHzNN+5tQvc5NG7C6BNkp6D3EmpXHDR+dQAjFLchW3VS9rlw3JBh+B7ys5Cf9z0GW1C/7P32AyBAOAz1q4jGliIH3YPuBnSfQX4OGreTIgEYQb/pBDtPnEQ4CivXYPAWBk13oHrB54yA9QuSn2H4AcKRpEILDt0BUzj+RLR1V5EqjD66NPRBVpLcQwjHoHYJOhsQv6U4mnzmrIXJCFr4LDwm/xBUoboG9XX4cc9VKdYoSA2yk5NQLJaKDUjTBoveG3Z2TElTxwjNK4M3LEZgUdDdruvcXzKBpStgp2NPiWi3ks9ZXxIoFVi+AvHLdc9TqtjL3/aYjpPlrzOcEnK62Szhimdd7xX232zFDTgtxezOu3WNMRLjiKgjtOhHVMd1loynVHvOgjuIIJMaELEqhJAV/RCSLbWTcfPFakFgFlALTRRvx+ok6Hlp/Q+v3fmx90bMyUzaEAhmM3KvHlXTL5DxnbGf/1M8RNNACLL5MNtPxP/mypJAqcDSFfgFhpYqWUzhTEAAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII="];function n(e){this.geometryBuilder=new r,this.materialBuilder=new i(e)}function r(){}function i(e){this.manager=e,this.textureLoader=new Ar(this.manager),this.tgaLoader=null}function o(){}function a(e,t,n,r,i){gn.call(this,e,t,n,r),this.interpolationParams=i}return n.prototype={constructor:n,crossOrigin:"anonymous",setCrossOrigin:function(e){return this.crossOrigin=e,this},build:function(e,t,n,r){var i=this.geometryBuilder.build(e);return new lo(i,this.materialBuilder.setCrossOrigin(this.crossOrigin).setTexturePath(t).build(e,i,n,r))}},r.prototype={constructor:r,build:function(e){for(var t=[],n=[],r=[],i=[],o=[],a=[],c=[],u=[],l=[],h=[],d=[],f=[],p=[],m=[],v=0,g={},y=0;y<e.metadata.vertexCount;y++){for(var b=e.vertices[y],x=0,w=b.position.length;x<w;x++)t.push(b.position[x]);for(x=0,w=b.normal.length;x<w;x++)r.push(b.normal[x]);for(x=0,w=b.uv.length;x<w;x++)n.push(b.uv[x]);for(x=0;x<4;x++)c.push(b.skinIndices.length-1>=x?b.skinIndices[x]:0);for(x=0;x<4;x++)u.push(b.skinWeights.length-1>=x?b.skinWeights[x]:0)}for(y=0;y<e.metadata.faceCount;y++){var _=e.faces[y];for(x=0,w=_.indices.length;x<w;x++)i.push(_.indices[x])}for(y=0;y<e.metadata.materialCount;y++){var S=e.materials[y];o.push({offset:3*v,count:3*S.faceCount}),v+=S.faceCount}for(y=0;y<e.metadata.rigidBodyCount;y++){var M=e.rigidBodies[y],T=g[M.boneIndex];T=void 0===T?M.type:Math.max(M.type,T),g[M.boneIndex]=T}for(y=0;y<e.metadata.boneCount;y++){-1!==(X={parent:(D=e.bones[y]).parentIndex,name:D.name,pos:D.position.slice(0,3),rotq:[0,0,0,1],scl:[1,1,1],rigidBodyType:void 0!==g[y]?g[y]:-1}).parent&&(X.pos[0]-=e.bones[X.parent].position[0],X.pos[1]-=e.bones[X.parent].position[1],X.pos[2]-=e.bones[X.parent].position[2]),a.push(X)}if("pmd"===e.metadata.format)for(y=0;y<e.metadata.ikCount;y++){var A={target:(E=e.iks[y]).target,effector:E.effector,iteration:E.iteration,maxAngle:4*E.maxAngle,links:[]};for(x=0,w=E.links.length;x<w;x++){(C={}).index=E.links[x].index,C.enabled=!0,e.bones[C.index].name.indexOf("")>=0&&(C.limitation=new s(1,0,0)),A.links.push(C)}d.push(A)}else for(y=0;y<e.metadata.boneCount;y++){var E;if(void 0!==(E=e.bones[y].ik)){for(A={target:y,effector:E.effector,iteration:E.iteration,maxAngle:E.maxAngle,links:[]},x=0,w=E.links.length;x<w;x++){var C;if((C={}).index=E.links[x].index,C.enabled=!0,1===E.links[x].angleLimitation){var L=E.links[x].lowerLimitationAngle,O=E.links[x].upperLimitationAngle,R=-O[0],I=-O[1];O[0]=-L[0],O[1]=-L[1],L[0]=R,L[1]=I,C.rotationMin=(new s).fromArray(L),C.rotationMax=(new s).fromArray(O)}A.links.push(C)}d.push(A)}}if("pmx"===e.metadata.format){for(y=0;y<e.metadata.boneCount;y++){var D,F=(D=e.bones[y]).grant;if(void 0!==F){A={index:y,parentIndex:F.parentIndex,ratio:F.ratio,isLocal:F.isLocal,affectRotation:F.affectRotation,affectPosition:F.affectPosition,transformationClass:D.transformationClass};f.push(A)}}f.sort(function(e,t){return e.transformationClass-t.transformationClass})}function U(t,n,r){for(var i=0;i<n.elementCount;i++){var o,a=n.elements[i];o="pmd"===e.metadata.format?e.morphs[0].elements[a.index].index:a.index,t.array[3*o+0]+=a.position[0]*r,t.array[3*o+1]+=a.position[1]*r,t.array[3*o+2]+=a.position[2]*r}}for(y=0;y<e.metadata.morphCount;y++){var B=e.morphs[y],z={name:B.name},j=new N(3*e.metadata.vertexCount,3);j.name=B.name;for(x=0;x<3*e.metadata.vertexCount;x++)j.array[x]=t[x];if("pmd"===e.metadata.format)0!==y&&U(j,B,1);else if(0===B.type)for(x=0;x<B.elementCount;x++){var V=e.morphs[B.elements[x].index],G=B.elements[x].ratio;1===V.type&&U(j,V,G)}else 1===B.type?U(j,B,1):2===B.type||3===B.type||4===B.type||5===B.type||6===B.type||7===B.type||B.type;l.push(z),h.push(j)}for(y=0;y<e.metadata.rigidBodyCount;y++){var W=e.rigidBodies[y];z={};for(var H in W)z[H]=W[H];if("pmx"===e.metadata.format&&-1!==z.boneIndex){var X=e.bones[z.boneIndex];z.position[0]-=X.position[0],z.position[1]-=X.position[1],z.position[2]-=X.position[2]}p.push(z)}for(y=0;y<e.metadata.constraintCount;y++){var q=e.constraints[y];z={};for(var H in q)z[H]=q[H];var Y=p[z.rigidBodyIndex1],J=p[z.rigidBodyIndex2];0!==Y.type&&2===J.type&&-1!==Y.boneIndex&&-1!==J.boneIndex&&e.bones[J.boneIndex].parentIndex===Y.boneIndex&&(J.type=1),m.push(z)}var Q=new k;Q.addAttribute("position",new N(t,3)),Q.addAttribute("normal",new N(r,3)),Q.addAttribute("uv",new N(n,2)),Q.addAttribute("skinIndex",new P(c,4)),Q.addAttribute("skinWeight",new N(u,4)),Q.setIndex(i);y=0;for(var Z=o.length;y<Z;y++)Q.addGroup(o[y].offset,o[y].count,y);return Q.bones=a,Q.morphTargets=l,Q.morphAttributes.position=h,Q.userData.MMD={bones:a,iks:d,grants:f,rigidBodies:p,constraints:m,format:e.metadata.format},Q.computeBoundingSphere(),Q}},i.prototype={constructor:i,crossOrigin:"anonymous",texturePath:void 0,setCrossOrigin:function(e){return this.crossOrigin=e,this},setTexturePath:function(e){return this.texturePath=e,this},build:function(e,t,n,r){var i=[],o={};this.textureLoader.setCrossOrigin(this.crossOrigin);for(var a=0;a<e.metadata.materialCount;a++){var s=e.materials[a],c={userData:{}};if(void 0!==s.name&&(c.name=s.name),c.color=(new v).fromArray(s.diffuse),c.opacity=s.diffuse[3],c.specular=(new v).fromArray(s.specular),c.emissive=(new v).fromArray(s.ambient),c.shininess=Math.max(s.shininess,1e-4),c.transparent=1!==c.opacity,c.skinning=t.bones.length>0,c.morphTargets=t.morphTargets.length>0,c.lights=!0,c.fog=!0,c.blending=ie,c.blendSrc=pe,c.blendDst=me,c.blendSrcAlpha=pe,c.blendDstAlpha=ve,"pmx"===e.metadata.format&&1==(1&s.flag)?c.side=J:c.side=1===c.opacity?q:J,"pmd"===e.metadata.format){if(s.fileName){var u=s.fileName.split("*");if(c.map=this._loadTexture(u[0],o),u.length>1){var l=u[1].slice(-4).toLowerCase();c.envMap=this._loadTexture(u[1],o,{sphericalReflectionMapping:!0}),c.combine=".sph"===l?Pe:Oe}}var h=-1===s.toonIndex?"toon00.bmp":e.toonTextures[s.toonIndex].fileName;c.gradientMap=this._loadTexture(h,o,{isToonTexture:!0,isDefaultToonTexture:this._isDefaultToonTexture(h)}),c.userData.outlineParameters={thickness:1===s.edgeFlag?.003:0,color:[0,0,0],alpha:1,visible:1===s.edgeFlag}}else{var d;-1!==s.textureIndex&&(c.map=this._loadTexture(e.textures[s.textureIndex],o)),-1===s.envTextureIndex||1!==s.envFlag&&2!=s.envFlag||(c.envMap=this._loadTexture(e.textures[s.envTextureIndex],o,{sphericalReflectionMapping:!0}),c.combine=1===s.envFlag?Pe:Oe),-1===s.toonIndex||0!==s.toonFlag?(h="toon"+("0"+(s.toonIndex+1)).slice(-2)+".bmp",d=!0):(h=e.textures[s.toonIndex],d=!1),c.gradientMap=this._loadTexture(h,o,{isToonTexture:!0,isDefaultToonTexture:d}),c.userData.outlineParameters={thickness:s.edgeSize/300,color:s.edgeColor.slice(0,3),alpha:s.edgeColor[3],visible:0!=(16&s.flag)&&s.edgeSize>0}}void 0!==c.map&&(c.transparent||this._checkImageTransparency(c.map,t,a),c.emissive.multiplyScalar(.2)),i.push(new br(c))}if("pmx"===e.metadata.format){function f(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(-1!==i.index){var o=t[i.index];o.opacity!==i.diffuse[3]&&(o.transparent=!0)}}}a=0;for(var p=e.morphs.length;a<p;a++){var m=e.morphs[a],g=m.elements;if(0===m.type)for(var y=0,b=g.length;y<b;y++){var x=e.morphs[g[y].index];8===x.type&&f(x.elements,i)}else 8===m.type&&f(g,i)}}return i},_getTGALoader:function(){if(null===this.tgaLoader){if(void 0===Co)throw new Error("MMDLoader: Import TGALoader");this.tgaLoader=new Co(this.manager)}return this.tgaLoader},_isDefaultToonTexture:function(e){return 10===e.length&&/toon(10|0[0-9])\.bmp/.test(e)},_loadTexture:function(e,n,r,i,o){var a,s=this;if(!0===(r=r||{}).isDefaultToonTexture){var c;try{c=parseInt(e.match("toon([0-9]{2}).bmp$")[1])}catch(t){console.warn("MMDLoader: "+e+" seems like a not right default texture path. Using toon00.bmp instead."),c=0}a=t[c]}else a=this.texturePath+e;if(void 0!==n[a])return n[a];var u=Loader.Handlers.get(a);null===u&&(u=".tga"===e.slice(-4).toLowerCase()?this._getTGALoader():this.textureLoader);var l=u.load(a,function(e){!0===r.isToonTexture&&(e.image=s._getRotatedImage(e.image)),e.flipY=!1,e.wrapS=He,e.wrapT=He;for(var t=0;t<l.readyCallbacks.length;t++)l.readyCallbacks[t](l);delete l.readyCallbacks},i,o);return!0===r.sphericalReflectionMapping&&(l.mapping=Ve),l.readyCallbacks=[],n[a]=l,l},_getRotatedImage:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=e.width,i=e.height;return t.width=r,t.height=i,n.clearRect(0,0,r,i),n.translate(r/2,i/2),n.rotate(.5*Math.PI),n.translate(-r/2,-i/2),n.drawImage(e,0,0),n.getImageData(0,0,r,i)},_checkImageTransparency:function(e,t,n){e.readyCallbacks.push(function(r){function i(e,t){var n=e.width,r=e.height,i=Math.round(t.x*n)%n,o=Math.round(t.y*r)%r;i<0&&(i+=n),o<0&&(o+=r);var a=o*n+i;return e.data[4*a+3]}var o=void 0!==r.image.data?r.image:function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");return n.drawImage(e,0,0),n.getImageData(0,0,t.width,t.height)}(r.image),a=t.groups[n];(function(e,t,n){var r=e.width,o=e.height;if(e.data.length/(r*o)!=4)return!1;for(var a=0;a<n.length;a+=3){for(var s={x:0,y:0},c=0;c<3;c++){var u=n[3*a+c],l={x:t[2*u+0],y:t[2*u+1]};if(i(e,l)<253)return!0;s.x+=l.x,s.y+=l.y}if(s.x/=3,s.y/=3,i(e,s)<253)return!0}return!1})(o,t.attributes.uv.array,t.index.array.slice(a.start,a.start+a.count))&&(e.transparent=!0)})}},o.prototype={constructor:o,build:function(e,t){for(var n=this.buildSkeletalAnimation(e,t).tracks,r=this.buildMorphAnimation(e,t).tracks,i=0,o=r.length;i<o;i++)n.push(r[i]);return new Rn("",-1,n)},buildSkeletalAnimation:function(e,t){function n(e,t,n){e.push(t[n+0]/127),e.push(t[n+8]/127),e.push(t[n+4]/127),e.push(t[n+12]/127)}for(var r=[],i={},o=t.skeleton.bones,a={},s=0,c=o.length;s<c;s++)a[o[s].name]=!0;for(s=0;s<e.metadata.motionCount;s++){var u=e.motions[s],l=u.boneName;void 0!==a[l]&&(i[l]=i[l]||[],i[l].push(u))}for(var h in i){var d=i[h];d.sort(function(e,t){return e.frameNum-t.frameNum});var f=[],p=[],m=[],v=[],g=[],y=t.skeleton.getBoneByName(h).position.toArray();for(s=0,c=d.length;s<c;s++){var b=d[s].frameNum/30,x=d[s].position,w=d[s].rotation,_=d[s].interpolation;f.push(b);for(var S=0;S<3;S++)p.push(y[S]+x[S]);for(S=0;S<4;S++)m.push(w[S]);for(S=0;S<3;S++)n(v,_,S);n(g,_,3)}var M=".bones["+h+"]";r.push(this._createTrack(M+".position",VectorKeyframeTrack,f,p,v)),r.push(this._createTrack(M+".quaternion",QuaternionKeyframeTrack,f,m,g))}return new Rn("",-1,r)},buildMorphAnimation:function(e,t){for(var n=[],r={},i=t.morphTargetDictionary,o=0;o<e.metadata.morphCount;o++){var a=e.morphs[o],s=a.morphName;void 0!==i[s]&&(r[s]=r[s]||[],r[s].push(a))}for(var c in r){var u=r[c];u.sort(function(e,t){return e.frameNum-t.frameNum});for(var l=[],h=[],d=(o=0,u.length);o<d;o++)l.push(u[o].frameNum/30),h.push(u[o].weight);n.push(new Cn(".morphTargetInfluences["+i[c]+"]",l,h))}return new Rn("",-1,n)},buildCameraAnimation:function(e){function t(e,t){e.push(t.x),e.push(t.y),e.push(t.z)}function n(e,t){e.push(t.x),e.push(t.y),e.push(t.z),e.push(t.w)}function r(e,t,n){e.push(t[4*n+0]/127),e.push(t[4*n+1]/127),e.push(t[4*n+2]/127),e.push(t[4*n+3]/127)}var i=[],o=void 0===e.cameras?[]:e.cameras.slice();o.sort(function(e,t){return e.frameNum-t.frameNum});for(var a=[],u=[],h=[],d=[],f=[],p=[],m=[],v=[],g=[],y=new c,b=new l,x=new s,w=new s,_=0,S=o.length;_<S;_++){var M=o[_],T=M.frameNum/30,A=M.position,E=M.rotation,C=M.distance,P=M.fov,L=M.interpolation;a.push(T),x.set(0,0,-C),w.set(A[0],A[1],A[2]),b.set(-E[0],-E[1],-E[2]),y.setFromEuler(b),x.add(w),x.applyQuaternion(y),t(u,w),n(h,y),t(d,x),f.push(P);for(var O=0;O<3;O++)r(p,L,O);r(m,L,3);for(O=0;O<3;O++)r(v,L,4);r(g,L,5)}return(i=[]).push(this._createTrack("target.position",VectorKeyframeTrack,a,u,p)),i.push(this._createTrack(".quaternion",QuaternionKeyframeTrack,a,h,m)),i.push(this._createTrack(".position",VectorKeyframeTrack,a,d,v)),i.push(this._createTrack(".fov",Cn,a,f,g)),new Rn("",-1,i)},_createTrack:function(e,t,n,r,i){if(n.length>2){n=n.slice(),r=r.slice(),i=i.slice();for(var o=r.length/n.length,s=i.length/n.length,c=1,u=2,l=n.length;u<l;u++){for(var h=0;h<o;h++)if(r[c*o+h]!==r[(c-1)*o+h]||r[c*o+h]!==r[u*o+h]){c++;break}if(u>c){n[c]=n[u];for(h=0;h<o;h++)r[c*o+h]=r[u*o+h];for(h=0;h<s;h++)i[c*s+h]=i[u*s+h]}}n.length=c+1,r.length=(c+1)*o,i.length=(c+1)*s}var d=new t(e,n,r);return d.createInterpolant=function(e){return new a(this.times,this.values,this.getValueSize(),e,new Float32Array(i))},d}},a.prototype=Object.assign(Object.create(gn.prototype),{constructor:a,interpolate_:function(e,t,n,r){var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=this.interpolationParams,u=e*a,l=u-a,h=r-t<.05?0:(n-t)/(r-t);if(4===a){var d=s[4*e+0],f=s[4*e+1],p=s[4*e+2],m=s[4*e+3],v=this._calculate(d,f,p,m,h);c.slerpFlat(i,0,o,l,o,u,v)}else if(3===a)for(var g=0;g!==a;++g){d=s[12*e+4*g+0],f=s[12*e+4*g+1],p=s[12*e+4*g+2],m=s[12*e+4*g+3],v=this._calculate(d,f,p,m,h);i[g]=o[l+g]*(1-v)+o[u+g]*v}else{d=s[4*e+0],f=s[4*e+1],p=s[4*e+2],m=s[4*e+3],v=this._calculate(d,f,p,m,h);i[0]=o[l]*(1-v)+o[u]*v}return i},_calculate:function(e,t,n,r,i){for(var o,a,s,c=.5,u=c,l=1-u,h=Math,d=0;d<15;d++){var f=(o=3*l*l*u)*e+(a=3*l*u*u)*t+(s=u*u*u)-i;if(h.abs(f)<1e-5)break;c/=2,l=1-(u+=f<0?c:-c)}return o*n+a*r+s}}),e}(),ea=function(e){this.manager=void 0!==e?e:cr};function ta(e){this.uuid=o.generateUUID(),this.name="",this.type=e,this.userData={}}function na(e,t){ta.call(this,e),t=t||{},this.shared=void 0===t.shared||t.shared,this.unique=void 0!==t.unique&&t.unique}ea.prototype={constructor:ea,load:function(e,t,n,r){var i=this,o=new lr(this.manager);o.setPath(this.path),o.load(e,function(e){t(i.parse(e))},n,r)},setPath:function(e){return this.path=e,this},setTexturePath:function(e){return this.texturePath=e,this},setBaseUrl:function(e){return console.warn("MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(e)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setMaterialOptions:function(e){return this.materialOptions=e,this},parse:function(e){for(var t=e.split("\n"),n={},r=/\s+/,i={},o=0;o<t.length;o++){var a=t[o];if(0!==(a=a.trim()).length&&"#"!==a.charAt(0)){var s=a.indexOf(" "),c=s>=0?a.substring(0,s):a;c=c.toLowerCase();var u=s>=0?a.substring(s+1):"";if(u=u.trim(),"newmtl"===c)n={name:u},i[u]=n;else if(n)if("ka"===c||"kd"===c||"ks"===c){var l=u.split(r,3);n[c]=[parseFloat(l[0]),parseFloat(l[1]),parseFloat(l[2])]}else n[c]=u}}var h=new ea.MaterialCreator(this.texturePath||this.path,this.materialOptions);return h.setCrossOrigin(this.crossOrigin),h.setManager(this.manager),h.setMaterials(i),h}},(ea.MaterialCreator=function(e,t){this.baseUrl=e||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:q,this.wrap=this.options&&this.options.wrap?this.options.wrap:He}).prototype={constructor:ea.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(e){return this.crossOrigin=e,this},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var n in e){var r=e[n],i={};for(var o in t[n]=i,r){var a=!0,s=r[o],c=o.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(a=!1)}a&&(i[c]=s)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){var t=this,n=this.materialsInfo[e],r={name:e,side:this.side};function i(e,n){if(!r[e]){var i=t.getTextureParams(n,r),o=t.loadTexture(function(e,t){return"string"!=typeof t||""===t?"":/^https?:\/\//i.test(t)?t:e+t}(t.baseUrl,i.url));o.repeat.copy(i.scale),o.offset.copy(i.offset),o.wrapS=t.wrap,o.wrapT=t.wrap,r[e]=o}}for(var o in n){var a,s=n[o];if(""!==s)switch(o.toLowerCase()){case"kd":r.color=(new v).fromArray(s);break;case"ks":r.specular=(new v).fromArray(s);break;case"map_kd":i("map",s);break;case"map_ks":i("specularMap",s);break;case"norm":i("normalMap",s);break;case"map_bump":case"bump":i("bumpMap",s);break;case"ns":r.shininess=parseFloat(s);break;case"d":(a=parseFloat(s))<1&&(r.opacity=a,r.transparent=!0);break;case"tr":a=parseFloat(s),this.options&&this.options.invertTrProperty&&(a=1-a),a>0&&(r.opacity=1-a,r.transparent=!0)}}return this.materials[e]=new vr(r),this.materials[e]},getTextureParams:function(e,t){var n,r={scale:new x(1,1),offset:new x(0,0)},i=e.split(/\s+/);return(n=i.indexOf("-bm"))>=0&&(t.bumpScale=parseFloat(i[n+1]),i.splice(n,2)),(n=i.indexOf("-s"))>=0&&(r.scale.set(parseFloat(i[n+1]),parseFloat(i[n+2])),i.splice(n,4)),(n=i.indexOf("-o"))>=0&&(r.offset.set(parseFloat(i[n+1]),parseFloat(i[n+2])),i.splice(n,4)),r.url=i.join(" ").trim(),r},loadTexture:function(e,t,n,r,i){var o,a=Er.Handlers.get(e),s=void 0!==this.manager?this.manager:cr;return null===a&&(a=new Ar(s)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin),o=a.load(e,n,r,i),void 0!==t&&(o.mapping=t),o}},ta.prototype={constructor:ta,isNode:!0,parse:function(e,t){t=t||{},e.parsing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.parsing=!1},parseAndBuildCode:function(e,t,n){return n=n||{},this.parse(e,n),this.buildCode(e,t,n)},buildCode:function(e,t,n){n=n||{};var r={result:this.build(e.addFlow(n.slot,n.cache,n.context),t)};return r.code=e.clearNodeCode(),e.removeFlow(),r},build:function(e,t,n){t=t||this.getType(e,t);var r=e.getNodeData(n||this);return e.parsing&&this.appendDepsNode(e,r,t),-1===e.nodes.indexOf(this)&&e.nodes.push(this),void 0!==this.updateFrame&&-1===e.updaters.indexOf(this)&&e.updaters.push(this),this.generate(e,t,n)},appendDepsNode:function(e,t,n){t.deps=(t.deps||0)+1;var r=e.getTypeLength(n);(r>(t.outputMax||0)||this.getType(e,n))&&(t.outputMax=r,t.output=n)},setName:function(e){return this.name=e,this},getName:function(e){return this.name},getType:function(e,t){return"sampler2D"===t||"samplerCube"===t?t:this.type},getJSONNode:function(e){if(!(void 0===e||"string"==typeof e)&&void 0!==e.nodes[this.uuid])return e.nodes[this.uuid]},copy:function(e){void 0!==e.name&&(this.name=e.name),void 0!==e.userData&&(this.userData=JSON.parse(JSON.stringify(e.userData)))},createJSONNode:function(e){var t=void 0===e||"string"==typeof e,n={};if("string"!=typeof this.nodeType)throw new Error("Node does not allow serialization.");return n.uuid=this.uuid,n.nodeType=this.nodeType,""!==this.name&&(n.name=this.name),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.nodes[this.uuid]=n),n},toJSON:function(e){return this.getJSONNode(e)||this.createJSONNode(e)}},na.prototype=Object.create(ta.prototype),na.prototype.constructor=na,na.prototype.build=function(e,t,n,r){if(t=t||this.getType(e),this.isShared(e,t)){var i=this.isUnique(e,t);i&&void 0===this.constructor.uuid&&(this.constructor.uuid=o.generateUUID()),n=e.getUuid(n||this.getUuid(),!i);var a=e.getNodeData(n),s=a.output||this.getType(e);if(e.parsing)return(a.deps||0)>0?(this.appendDepsNode(e,a,t),this.generate(e,t,n)):ta.prototype.build.call(this,e,t,n);if(i)return a.name=a.name||ta.prototype.build.call(this,e,t,n),a.name;if(!this.isShared(e,s)||!e.optimize||1==a.deps)return ta.prototype.build.call(this,e,t,n);n=this.getUuid(!1);var c=this.getTemp(e,n);if(c)return e.format(c,s,t);c=na.prototype.generate.call(this,e,t,n,a.output,r);var u=this.generate(e,s,n);return e.addNodeCode(c+" = "+u+";"),e.format(c,s,t)}return ta.prototype.build.call(this,e,t,n)},na.prototype.isShared=function(e,t){return"sampler2D"!==t&&"samplerCube"!==t&&this.shared},na.prototype.isUnique=function(e,t){return this.unique},na.prototype.getUuid=function(e){var t=(e||void 0==e)&&this.constructor.uuid||this.uuid;return"string"==typeof this.scope&&(t=this.scope+"-"+t),t},na.prototype.getTemp=function(e,t){t=t||this.uuid;var n=e.getVars()[t];return n?n.name:void 0},na.prototype.generate=function(e,t,n,r,i){return this.isShared(e,t)||console.error("TempNode is not shared!"),n=n||this.uuid,e.getTempVar(n,r||this.getType(e),i).name};var ra=function(e,t,n,r){e=e||"",this.isMethod="string"!=typeof t,this.useKeywords=!0,na.call(this,this.isMethod?null:t),this.isMethod?this.eval(e,t,n,r):this.eval(e,n,r)};ra.rDeclaration=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\((.*?)\)/i,ra.rProperties=/[a-z_0-9]+/gi,ra.prototype=Object.create(na.prototype),ra.prototype.constructor=ra,ra.prototype.nodeType="Function",ra.prototype.eval=function(e,t,n,r){if(e=(e||"").trim(),this.includes=t||[],this.extensions=n||{},this.keywords=r||{},this.isMethod){var i=e.match(ra.rDeclaration);if(this.inputs=[],i&&4==i.length){this.type=i[1],this.name=i[2];var o=i[3].match(ra.rProperties);if(o)for(var a=0;a<o.length;){var s,c,u=o[a++];"in"==u||"out"==u||"inout"==u?s=o[a++]:(s=u,u=""),c=o[a++],this.inputs.push({name:c,type:s,qualifier:u})}}else this.type="",this.name=""}this.value=e};var ia={nodes:{},keywords:{},add:function(e){this.nodes[e.name]=e},addKeyword:function(e,t,n){n=void 0===n||n,this.keywords[e]={callback:t,cache:n}},remove:function(e){delete this.nodes[e.name]},removeKeyword:function(e){delete this.keywords[e]},get:function(e){return this.nodes[e]},getKeyword:function(e,t){return this.keywords[e].callback.call(this,t)},getKeywordData:function(e){return this.keywords[e]},contains:function(e){return void 0!=this.nodes[e]},containsKeyword:function(e){return void 0!=this.keywords[e]}},oa=["uv","uv2"],aa=["vUv","vUv2"];function sa(e){na.call(this,"v2",{shared:!1}),this.index=e||0}function ca(e){na.call(this,"v3"),this.scope=e||ca.LOCAL}function ua(e){na.call(this,"v3"),this.scope=e||ua.LOCAL}function la(e,t){(t=t||{}).shared=void 0!==t.shared&&t.shared,na.call(this,e,t),this.readonly=!1}function ha(e){la.call(this,"f"),this.value=e||0}function da(e,t,n){ha.call(this),this.scale=void 0!==e?e:1,this.scope=t||da.GLOBAL,this.timeScale=void 0!==n?n:1!==this.scale}sa.prototype=Object.create(na.prototype),sa.prototype.constructor=sa,sa.prototype.nodeType="UV",sa.prototype.generate=function(e,t){e.requires.uv[this.index]=!0;var n=e.isShader("vertex")?oa[this.index]:aa[this.index];return e.format(n,this.getType(e),t)},sa.prototype.copy=function(e){na.prototype.copy.call(this,e),this.index=e.index},sa.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).index=this.index),t},ia.addKeyword("uv",function(){return new sa}),ia.addKeyword("uv2",function(){return new sa(1)}),ca.LOCAL="local",ca.WORLD="world",ca.VIEW="view",ca.PROJECTION="projection",ca.prototype=Object.create(na.prototype),ca.prototype.constructor=ca,ca.prototype.nodeType="Position",ca.prototype.getType=function(){switch(this.scope){case ca.PROJECTION:return"v4"}return this.type},ca.prototype.isShared=function(e){switch(this.scope){case ca.LOCAL:case ca.WORLD:return!1}return!0},ca.prototype.generate=function(e,t){var n;switch(this.scope){case ca.LOCAL:e.requires.position=!0,n=e.isShader("vertex")?"transformed":"vPosition";break;case ca.WORLD:e.requires.worldPosition=!0,n="vWPosition";break;case ca.VIEW:n=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case ca.PROJECTION:n=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )"}return e.format(n,this.getType(e),t)},ca.prototype.copy=function(e){na.prototype.copy.call(this,e),this.scope=e.scope},ca.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t},ia.addKeyword("position",function(){return new ca}),ia.addKeyword("worldPosition",function(){return new ca(ca.WORLD)}),ia.addKeyword("viewPosition",function(){return new ca(NormalNode.VIEW)}),ua.LOCAL="local",ua.WORLD="world",ua.VIEW="view",ua.prototype=Object.create(na.prototype),ua.prototype.constructor=ua,ua.prototype.nodeType="Normal",ua.prototype.isShared=function(e){switch(this.scope){case ua.WORLD:return!0}return!1},ua.prototype.generate=function(e,t){var n;switch(this.scope){case ua.LOCAL:e.requires.normal=!0,n="normal";break;case ua.WORLD:e.requires.worldNormal=!0,n=e.isShader("vertex")?"( modelMatrix * vec4( objectNormal, 0.0 ) ).xyz":"vWNormal";break;case ua.VIEW:n="vNormal"}return e.format(n,this.getType(e),t)},ua.prototype.copy=function(e){na.prototype.copy.call(this,e),this.scope=e.scope},ua.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t},ia.addKeyword("normal",function(){return new ua}),ia.addKeyword("worldNormal",function(){return new ua(ua.WORLD)}),ia.addKeyword("viewNormal",function(){return new ua(ua.VIEW)}),la.prototype=Object.create(na.prototype),la.prototype.constructor=la,la.prototype.isReadonly=function(e){return this.readonly},la.prototype.copy=function(e){na.prototype.copy.call(this,e),void 0!==e.readonly&&(this.readonly=e.readonly)},la.prototype.createJSONNode=function(e){var t=na.prototype.createJSONNode.call(this,e);return!0===this.readonly&&(t.readonly=this.readonly),t},la.prototype.generate=function(e,t,n,r,i,o){n=e.getUuid(n||this.getUuid()),r=r||this.getType(e);var a=e.getNodeData(n);return this.isReadonly(e)&&void 0!==this.generateReadonly?this.generateReadonly(e,t,n,r,i,o):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(r,this,i,o)),e.format(a.vertex.name,r,t)):(a.fragment||(a.fragment=e.createFragmentUniform(r,this,i,o)),e.format(a.fragment.name,r,t))},ha.prototype=Object.create(la.prototype),ha.prototype.constructor=ha,ha.prototype.nodeType="Float",ha.prototype.generateReadonly=function(e,t,n,r,i,o){return e.format(this.value+(this.value%1?"":".0"),r,t)},ha.prototype.copy=function(e){la.prototype.copy.call(this,e),this.value=e.value},ha.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,!0===this.readonly&&(t.readonly=!0)),t},da.GLOBAL="global",da.LOCAL="local",da.DELTA="delta",da.prototype=Object.create(ha.prototype),da.prototype.constructor=da,da.prototype.nodeType="Timer",da.prototype.isReadonly=function(){return!1},da.prototype.isUnique=function(){return this.timeScale&&(this.scope===da.GLOBAL||this.scope===da.DELTA)},da.prototype.updateFrame=function(e){var t=this.timeScale?this.scale:1;switch(this.scope){case da.LOCAL:this.value+=e.delta*t;break;case da.DELTA:this.value=e.delta*t;break;default:this.value=e.time*t}},da.prototype.copy=function(e){ha.prototype.copy.call(this,e),this.scope=e.scope,this.scale=e.scale,this.timeScale=e.timeScale},da.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope,t.scale=this.scale,t.timeScale=this.timeScale),t},ia.addKeyword("time",function(){return new da});var fa=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i;function pa(e,t){na.call(this),this.eval(e||pa.PI,t)}function ma(e,t){na.call(this,"v3"),this.setScope(e||ma.POSITION),this.setCamera(t)}pa.PI="PI",pa.PI2="PI2",pa.RECIPROCAL_PI="RECIPROCAL_PI",pa.RECIPROCAL_PI2="RECIPROCAL_PI2",pa.LOG2="LOG2",pa.EPSILON="EPSILON",pa.prototype=Object.create(na.prototype),pa.prototype.constructor=pa,pa.prototype.nodeType="Const",pa.prototype.getType=function(e){return e.getTypeByFormat(this.type)},pa.prototype.eval=function(e,t){this.src=e||"";var n,r,i="",o=this.src.match(fa);this.useDefine=t||"#"===this.src.charAt(0),o&&o.length>1?(r=o[1],n=o[2],i=o[3]):(n=this.src,r="f"),this.name=n,this.type=r,this.value=i},pa.prototype.build=function(e,t){return"source"!==t?(e.include(this),e.format(this.name,this.getType(e),t)):this.value?this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";":this.useDefine?this.src:void 0},pa.prototype.generate=function(e,t){return e.format(this.name,this.getType(e),t)},pa.prototype.copy=function(e){na.prototype.copy.call(this,e),this.eval(e.src,e.useDefine)},pa.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).src=this.src,!0===t.useDefine&&(t.useDefine=!0)),t},ia.addKeyword("uv",function(){return new sa}),ia.addKeyword("uv2",function(){return new sa(1)}),ia.addKeyword("position",function(){return new ca}),ia.addKeyword("worldPosition",function(){return new ca(ca.WORLD)}),ia.addKeyword("normal",function(){return new ua}),ia.addKeyword("worldNormal",function(){return new ua(ua.WORLD)}),ia.addKeyword("viewPosition",function(){return new ca(ua.VIEW)}),ia.addKeyword("viewNormal",function(){return new ua(ua.VIEW)}),ia.addKeyword("time",function(){return new da}),ia.add(new pa("vec3 LUMA vec3(0.2125, 0.7154, 0.0721)")),ia.add(new ra(["vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 map, vec2 mUv, vec2 scale ) {","\tvec3 q0 = dFdx( eye_pos );","\tvec3 q1 = dFdy( eye_pos );","\tvec2 st0 = dFdx( mUv.st );","\tvec2 st1 = dFdy( mUv.st );","\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );","\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );","\tvec3 N = normalize( surf_norm );","\tvec3 mapN = map * 2.0 - 1.0;","\tmapN.xy = scale * mapN.xy;","\tmat3 tsn = mat3( S, T, N );","\treturn normalize( tsn * mapN );","}"].join("\n"),null,{derivatives:!0})),ia.add(new ra(["float snoise(vec2 co) {","\treturn fract( sin( dot(co.xy, vec2(12.9898,78.233) ) ) * 43758.5453 );","}"].join("\n"))),ia.add(new ra(["vec3 hue_rgb(vec3 rgb, float adjustment) {","\tconst mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.595716, -0.274453, -0.321263, 0.211456, -0.522591, 0.311135);","\tconst mat3 YIQtoRGB = mat3(1.0, 0.9563, 0.6210, 1.0, -0.2721, -0.6474, 1.0, -1.107, 1.7046);","\tvec3 yiq = RGBtoYIQ * rgb;","\tfloat hue = atan(yiq.z, yiq.y) + adjustment;","\tfloat chroma = sqrt(yiq.z * yiq.z + yiq.y * yiq.y);","\treturn YIQtoRGB * vec3(yiq.x, chroma * cos(hue), chroma * sin(hue));","}"].join("\n"))),ia.add(new ra(["vec3 saturation_rgb(vec3 rgb, float adjustment) {","\tvec3 intensity = vec3(dot(rgb, LUMA));","\treturn mix(intensity, rgb, adjustment);","}"].join("\n"))),ia.add(new ra(["float luminance_rgb(vec3 rgb) {","\treturn dot(rgb, LUMA);","}"].join("\n"))),ia.add(new ra(["vec3 vibrance_rgb(vec3 rgb, float adjustment) {","\tfloat average = (rgb.r + rgb.g + rgb.b) / 3.0;","\tfloat mx = max(rgb.r, max(rgb.g, rgb.b));","\tfloat amt = (mx - average) * (-3.0 * adjustment);","\treturn mix(rgb.rgb, vec3(mx), amt);","}"].join("\n"))),ra.prototype.isShared=function(e,t){return!this.isMethod},ra.prototype.getType=function(e){return e.getTypeByFormat(this.type)},ra.prototype.getInputByName=function(e){for(var t=this.inputs.length;t--;)if(this.inputs[t].name===e)return this.inputs[t]},ra.prototype.getIncludeByName=function(e){for(var t=this.includes.length;t--;)if(this.includes[t].name===e)return this.includes[t]},ra.prototype.generate=function(e,t){for(var n,r=0,i=this.value,o=0;o<this.includes.length;o++)e.include(this.includes[o],this);for(var a in this.extensions)e.material.extensions[a]=!0;for(;n=ra.rProperties.exec(this.value);){var s=n[0],c=!this.isMethod||!this.getInputByName(s),u=s;if(this.keywords[s]||this.useKeywords&&c&&ia.containsKeyword(s)){var l=this.keywords[s];if(!l){var h=ia.getKeywordData(s);h.cache&&(l=e.keywords[s]),l=l||ia.getKeyword(s,e),h.cache&&(e.keywords[s]=l)}u=l.build(e)}s!=u&&(i=i.substring(0,n.index+r)+u+i.substring(n.index+s.length+r),r+=u.length-s.length),void 0===this.getIncludeByName(u)&&ia.contains(u)&&e.include(ia.get(u))}return"source"===t?i:this.isMethod?(e.include(this,!1,i),this.name):e.format("("+i+")",this.getType(e),t)},ma.Nodes={depthColor:new ra(["float depthColor( float mNear, float mFar ) {","\t#ifdef USE_LOGDEPTHBUF_EXT","\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;","\t#else","\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;","\t#endif","\treturn 1.0 - smoothstep( mNear, mFar, depth );","}"].join("\n"))},ma.POSITION="position",ma.DEPTH="depth",ma.TO_VERTEX="toVertex",ma.prototype=Object.create(na.prototype),ma.prototype.constructor=ma,ma.prototype.nodeType="Camera",ma.prototype.setCamera=function(e){this.camera=e,this.updateFrame=void 0!==e?this.onUpdateFrame:void 0},ma.prototype.setScope=function(e){switch(this.scope){case ma.DEPTH:delete this.near,delete this.far}switch(this.scope=e,e){case ma.DEPTH:var t=this.camera;this.near=new ha(t?t.near:1),this.far=new ha(t?t.far:1200)}},ma.prototype.getType=function(e){switch(this.scope){case ma.DEPTH:return"f"}return this.type},ma.prototype.isUnique=function(e){switch(this.scope){case ma.DEPTH:case ma.TO_VERTEX:return!0}return!1},ma.prototype.isShared=function(e){switch(this.scope){case ma.POSITION:return!1}return!0},ma.prototype.generate=function(e,t){var n;switch(this.scope){case ma.POSITION:n="cameraPosition";break;case ma.DEPTH:n=e.include(ma.Nodes.depthColor)+"( "+this.near.build(e,"f")+", "+this.far.build(e,"f")+" )";break;case ma.TO_VERTEX:n="normalize( "+new ca(ca.WORLD).build(e,"v3")+" - cameraPosition )"}return e.format(n,this.getType(e),t)},ma.prototype.onUpdateFrame=function(e){switch(this.scope){case ma.DEPTH:var t=this.camera;this.near.value=t.near,this.far.value=t.far}},ma.prototype.copy=function(e){switch(na.prototype.copy.call(this,e),this.setScope(e.scope),e.camera&&this.setCamera(e.camera),e.scope){case ma.DEPTH:this.near.number=e.near,this.far.number=e.far}},ma.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t)switch((t=this.createJSONNode(e)).scope=this.scope,this.camera&&(t.camera=this.camera.uuid),this.scope){case ma.DEPTH:t.near=this.near.value,t.far=this.far.value}return t};var va=function(e,t){this.manager=void 0!==e?e:cr,this.nodes={},this.materials={},this.passes={},this.names={},this.library=t||{}};Object.assign(va.prototype,{load:function(e,t,n,r){var i=this;return new lr(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r),this},getObjectByName:function(e){return this.names[e]},getObjectById:function(e){return this.library[e]||this.nodes[e]||this.materials[e]||this.passes[e]||this.names[e]},getNode:function(e){var t=this.getObjectById(e);return t||console.warn('Node "'+e+'" not found.'),t},resolve:function(e){switch(typeof e){case"boolean":case"number":return e;case"string":return/^\w{8}-\w{4}-\w{4}-\w{4}-\w{12}$/i.test(e)||this.library[e]?this.getNode(e):e;default:if(Array.isArray(e))for(var t=0;t<e.length;t++)e[t]=this.resolve(e[t]);else for(var n in e)"uuid"!==n&&(e[n]=this.resolve(e[n]))}return e},declare:function(e){var t,r,i;for(t in e.nodes)r=e.nodes[t],i=new n[r.nodeType+"Node"],r.name&&(i.name=r.name,this.names[i.name]=i),this.nodes[t]=i;for(t in e.materials)r=e.materials[t],i=new n[r.type],r.name&&(i.name=r.name,this.names[i.name]=i),this.materials[t]=i;for(t in e.passes)r=e.passes[t],i=new n[r.type],r.name&&(i.name=r.name,this.names[i.name]=i),this.passes[t]=i;return e.material&&(this.material=this.materials[e.material]),e.pass&&(this.pass=this.passes[e.pass]),e},parse:function(e){var t;for(t in(e=this.resolve(this.declare(e))).nodes)this.nodes[t].copy(e.nodes[t]);for(t in e.materials)this.materials[t].copy(e.materials[t]);for(t in e.passes)this.passes[t].copy(e.passes[t]);return this.material||this.pass||this}});var ga=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,n=/^usemtl /;function r(e){this.manager=void 0!==e?e:cr,this.materials=null}return r.prototype={constructor:r,load:function(e,t,n,r){var i=this,o=new lr(i.manager);o.setPath(this.path),o.load(e,function(e){t(i.parse(e))},n,r)},setPath:function(e){return this.path=e,this},setMaterials:function(e){return this.materials=e,this},parse:function(r){console.time("OBJLoader");var i=new function(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){var r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){var r=this.vertices,i=this.object.geometry.vertices;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){var r=this.normals,i=this.object.geometry.normals;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addColor:function(e,t,n){var r=this.colors,i=this.object.geometry.colors;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){var r=this.uvs,i=this.object.geometry.uvs;i.push(r[e+0],r[e+1]),i.push(r[t+0],r[t+1]),i.push(r[n+0],r[n+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,i,o,a,s,c){var u=this.vertices.length,l=this.parseVertexIndex(e,u),h=this.parseVertexIndex(t,u),d=this.parseVertexIndex(n,u);if(this.addVertex(l,h,d),void 0!==r&&""!==r){var f=this.uvs.length;l=this.parseUVIndex(r,f),h=this.parseUVIndex(i,f),d=this.parseUVIndex(o,f),this.addUV(l,h,d)}if(void 0!==a&&""!==a){var p=this.normals.length;l=this.parseNormalIndex(a,p),h=a===s?l:this.parseNormalIndex(s,p),d=a===c?l:this.parseNormalIndex(c,p),this.addNormal(l,h,d)}this.colors.length>0&&this.addColor(l,h,d)},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,n=0,r=e.length;n<r;n++)this.addVertexPoint(this.parseVertexIndex(e[n],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var n=this.vertices.length,r=this.uvs.length,i=0,o=e.length;i<o;i++)this.addVertexLine(this.parseVertexIndex(e[i],n));var a=0;for(o=t.length;a<o;a++)this.addUVLine(this.parseUVIndex(t[a],r))}};return e.startObject("",!1),e};-1!==r.indexOf("\r\n")&&(r=r.replace(/\r\n/g,"\n")),-1!==r.indexOf("\\\n")&&(r=r.replace(/\\\n/g,""));for(var o=r.split("\n"),a="",s="",c=[],u="function"==typeof"".trimLeft,l=0,h=o.length;l<h;l++)if(a=o[l],0!==(a=u?a.trimLeft():a.trim()).length&&"#"!==(s=a.charAt(0)))if("v"===s){var d=a.split(/\s+/);switch(d[0]){case"v":i.vertices.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),8===d.length&&i.colors.push(parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6]));break;case"vn":i.normals.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));break;case"vt":i.uvs.push(parseFloat(d[1]),parseFloat(d[2]))}}else if("f"===s){for(var f=a.substr(1).trim().split(/\s+/),p=[],m=0,v=f.length;m<v;m++){var g=f[m];if(g.length>0){var y=g.split("/");p.push(y)}}var b=p[0];for(m=1,v=p.length-1;m<v;m++){var x=p[m],w=p[m+1];i.addFace(b[0],x[0],w[0],b[1],x[1],w[1],b[2],x[2],w[2])}}else if("l"===s){var _=a.substring(1).trim().split(" "),S=[],M=[];if(-1===a.indexOf("/"))S=_;else for(var T=0,A=_.length;T<A;T++){var E=_[T].split("/");""!==E[0]&&S.push(E[0]),""!==E[1]&&M.push(E[1])}i.addLineGeometry(S,M)}else if("p"===s){var C=a.substr(1).trim().split(" ");i.addPointGeometry(C)}else if(null!==(c=e.exec(a))){var P=(" "+c[0].substr(1).trim()).substr(1);i.startObject(P)}else if(n.test(a))i.object.startMaterial(a.substring(7).trim(),i.materialLibraries);else if(t.test(a))i.materialLibraries.push(a.substring(7).trim());else{if("s"!==s){if("\0"===a)continue;throw new Error('OBJLoader: Unexpected line: "'+a+'"')}if((c=a.split(" ")).length>1){var L=c[1].trim().toLowerCase();i.object.smooth="0"!==L&&"off"!==L}else i.object.smooth=!0;(X=i.object.currentMaterial())&&(X.smooth=i.object.smooth)}i.finalize();var O=new oo;O.materialLibraries=[].concat(i.materialLibraries);for(l=0,h=i.objects.length;l<h;l++){var R=i.objects[l],I=R.geometry,D=R.materials,F="Line"===I.type,U="Points"===I.type,B=!1;if(0!==I.vertices.length){var z=new k;z.addAttribute("position",new N(I.vertices,3)),I.normals.length>0?z.addAttribute("normal",new N(I.normals,3)):z.computeVertexNormals(),I.colors.length>0&&(B=!0,z.addAttribute("color",new N(I.colors,3))),I.uvs.length>0&&z.addAttribute("uv",new N(I.uvs,2));for(var j,V=[],G=0,W=D.length;G<W;G++){var H=D[G],X=void 0;if(null!==this.materials)if(X=this.materials.create(H.name),!F||!X||X instanceof ln){if(U&&X&&!(X instanceof xr)){var q=new xr({size:10,sizeAttenuation:!1});Y.copy(X),X=q}}else{var Y=new ln;Y.copy(X),Y.lights=!1,X=Y}X||((X=F?new ln:U?new xr({size:1,sizeAttenuation:!1}):new vr).name=H.name),X.flatShading=!H.smooth,X.vertexColors=B?K:Q,V.push(X)}if(V.length>1){for(G=0,W=D.length;G<W;G++){H=D[G];z.addGroup(H.groupStart,H.groupCount,G)}j=F?new Eo(z,V):U?new Gi(z,V):new fn(z,V)}else j=F?new Eo(z,V[0]):U?new Gi(z,V[0]):new fn(z,V[0]);j.name=R.name,O.add(j)}}return console.timeEnd("OBJLoader"),O}},r}();void 0===Zo&&console.error('"LoaderSupport" is not available. "OBJLoader2" requires it. Please include "LoaderSupport.js" in your HTML.');var ya=function(){var e="2.4.2",t=Zo.Validator;function n(n){console.info("Using OBJLoader2 version: "+e),this.manager=t.verifyInput(n,cr),this.logging={enabled:!0,debug:!1},this.modelName="",this.instanceNo=0,this.path="",this.useIndices=!1,this.disregardNormals=!1,this.materialPerSmoothingGroup=!1,this.useOAsMesh=!1,this.loaderRootNode=new oo,this.meshBuilder=new Zo.MeshBuilder,this.callbacks=new Zo.Callbacks,this.workerSupport=new Zo.WorkerSupport,this.terminateWorkerOnLoad=!0}n.prototype.setLogging=function(e,t){this.logging.enabled=!0===e,this.logging.debug=!0===t,this.meshBuilder.setLogging(this.logging.enabled,this.logging.debug)},n.prototype.setModelName=function(e){this.modelName=t.verifyInput(e,this.modelName)},n.prototype.setPath=function(e){this.path=t.verifyInput(e,this.path)},n.prototype.setStreamMeshesTo=function(e){this.loaderRootNode=t.verifyInput(e,this.loaderRootNode)},n.prototype.setMaterials=function(e){this.meshBuilder.setMaterials(e)},n.prototype.setUseIndices=function(e){this.useIndices=!0===e},n.prototype.setDisregardNormals=function(e){this.disregardNormals=!0===e},n.prototype.setMaterialPerSmoothingGroup=function(e){this.materialPerSmoothingGroup=!0===e},n.prototype.setUseOAsMesh=function(e){this.useOAsMesh=!0===e},n.prototype._setCallbacks=function(e){t.isValid(e.onProgress)&&this.callbacks.setCallbackOnProgress(e.onProgress),t.isValid(e.onReportError)&&this.callbacks.setCallbackOnReportError(e.onReportError),t.isValid(e.onMeshAlter)&&this.callbacks.setCallbackOnMeshAlter(e.onMeshAlter),t.isValid(e.onLoad)&&this.callbacks.setCallbackOnLoad(e.onLoad),t.isValid(e.onLoadMaterials)&&this.callbacks.setCallbackOnLoadMaterials(e.onLoadMaterials),this.meshBuilder._setCallbacks(this.callbacks)},n.prototype.onProgress=function(e,n,r){var i=t.isValid(n)?n:"",o={detail:{type:e,modelName:this.modelName,instanceNo:this.instanceNo,text:i,numericalValue:r}};t.isValid(this.callbacks.onProgress)&&this.callbacks.onProgress(o),this.logging.enabled&&this.logging.debug&&console.debug(i)},n.prototype._onError=function(e){var t="Error occurred while downloading!";e.currentTarget&&null!==e.currentTarget.statusText&&(t+="\nurl: "+e.currentTarget.responseURL+"\nstatus: "+e.currentTarget.statusText),this.onProgress("error",t,-1),this._throwError(t)},n.prototype._throwError=function(e){if(!t.isValid(this.callbacks.onReportError))throw e;this.callbacks.onReportError(e)},n.prototype.load=function(e,t,n,r,i,o){var a=new Zo.ResourceDescriptor(e,"OBJ");this._loadObj(a,t,n,r,i,o)},n.prototype._loadObj=function(e,n,r,i,o,a){var s=this;t.isValid(i)||(i=function(e){s._onError(e)}),t.isValid(e)||i("An invalid ResourceDescriptor was provided. Unable to continue!");var c=function(t){if(e.content=t,a)s.parseAsync(t,n);else{var r=new Zo.Callbacks;r.setCallbackOnMeshAlter(o),s._setCallbacks(r),n({detail:{loaderRootNode:s.parse(t),modelName:s.modelName,instanceNo:s.instanceNo}})}};if(!t.isValid(e.url)||t.isValid(e.content))c(t.isValid(e.content)?e.content:null);else{if(!t.isValid(r)){var u=0,l=0;r=function(t){if(t.lengthComputable&&(l=t.loaded/t.total)>u){u=l;var n='Download of "'+e.url+'": '+(100*l).toFixed(2)+"%";s.onProgress("progressLoad",n,l)}}}var h=new lr(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.load(e.url,c,r,i)}},n.prototype.run=function(e,n){this._applyPrepData(e);var r=e.checkResourceDescriptorFiles(e.resources,[{ext:"obj",type:"ArrayBuffer",ignore:!1},{ext:"mtl",type:"String",ignore:!1},{ext:"zip",type:"String",ignore:!0}]);t.isValid(n)&&(this.terminateWorkerOnLoad=!1,this.workerSupport=n,this.logging.enabled=this.workerSupport.logging.enabled,this.logging.debug=this.workerSupport.logging.debug);var i=this;this._loadMtl(r.mtl,function(t){null!==t&&i.meshBuilder.setMaterials(t),i._loadObj(r.obj,i.callbacks.onLoad,null,null,i.callbacks.onMeshAlter,e.useAsync)},null,null,e.crossOrigin,e.materialOptions)},n.prototype._applyPrepData=function(e){t.isValid(e)&&(this.setLogging(e.logging.enabled,e.logging.debug),this.setModelName(e.modelName),this.setStreamMeshesTo(e.streamMeshesTo),this.meshBuilder.setMaterials(e.materials),this.setUseIndices(e.useIndices),this.setDisregardNormals(e.disregardNormals),this.setMaterialPerSmoothingGroup(e.materialPerSmoothingGroup),this.setUseOAsMesh(e.useOAsMesh),this._setCallbacks(e.getCallbacks()))},n.prototype.parse=function(e){if(!t.isValid(e))return console.warn("Provided content is not a valid ArrayBuffer or String."),this.loaderRootNode;this.logging.enabled&&console.time("OBJLoader2 parse: "+this.modelName),this.meshBuilder.init();var n=new r;n.setLogging(this.logging.enabled,this.logging.debug),n.setMaterialPerSmoothingGroup(this.materialPerSmoothingGroup),n.setUseOAsMesh(this.useOAsMesh),n.setUseIndices(this.useIndices),n.setDisregardNormals(this.disregardNormals),n.setMaterials(this.meshBuilder.getMaterials());var i=this;n.setCallbackMeshBuilder(function(e){var t,n=i.meshBuilder.processPayload(e);for(var r in n)t=n[r],i.loaderRootNode.add(t)});return n.setCallbackProgress(function(e,t){i.onProgress("progressParse",e,t)}),e instanceof ArrayBuffer||e instanceof Uint8Array?(this.logging.enabled&&console.info("Parsing arrayBuffer..."),n.parse(e)):"string"==typeof e||e instanceof String?(this.logging.enabled&&console.info("Parsing text..."),n.parseText(e)):this._throwError("Provided content was neither of type String nor Uint8Array! Aborting..."),this.logging.enabled&&console.timeEnd("OBJLoader2 parse: "+this.modelName),this.loaderRootNode},n.prototype.parseAsync=function(e,n){var i=this,o=!1,a=function(){n({detail:{loaderRootNode:i.loaderRootNode,modelName:i.modelName,instanceNo:i.instanceNo}}),o&&i.logging.enabled&&console.timeEnd("OBJLoader2 parseAsync: "+i.modelName)};t.isValid(e)?o=!0:(console.warn("Provided content is not a valid ArrayBuffer."),a()),o&&this.logging.enabled&&console.time("OBJLoader2 parseAsync: "+this.modelName),this.meshBuilder.init();this.workerSupport.validate(function(e,n){var i="";return i+="\n\n",i+="THREE = { "+Zo.constructor.name+": {} };\n\n",i+=e(Zo.constructor.name+"."+Zo.Validator.constructor.name,t),i+=n("Parser",r)},"Parser"),this.workerSupport.setCallbacks(function(e){var t,n=i.meshBuilder.processPayload(e);for(var r in n)t=n[r],i.loaderRootNode.add(t)},a),i.terminateWorkerOnLoad&&this.workerSupport.setTerminateRequested(!0);var s={},c=this.meshBuilder.getMaterials();for(var u in c)s[u]=u;this.workerSupport.run({params:{useAsync:!0,materialPerSmoothingGroup:this.materialPerSmoothingGroup,useOAsMesh:this.useOAsMesh,useIndices:this.useIndices,disregardNormals:this.disregardNormals},logging:{enabled:this.logging.enabled,debug:this.logging.debug},materials:{materials:s},data:{input:e,options:null}})};var r=function(){function e(){this.callbackProgress=null,this.callbackMeshBuilder=null,this.contentRef=null,this.legacyMode=!1,this.materials={},this.useAsync=!1,this.materialPerSmoothingGroup=!1,this.useOAsMesh=!1,this.useIndices=!1,this.disregardNormals=!1,this.vertices=[],this.colors=[],this.normals=[],this.uvs=[],this.rawMesh={objectName:"",groupName:"",activeMtlName:"",mtllibName:"",faceType:-1,subGroups:[],subGroupInUse:null,smoothingGroup:{splitMaterials:!1,normalized:-1,real:-1},counts:{doubleIndicesCount:0,faceCount:0,mtlCount:0,smoothingGroupCount:0}},this.inputObjectCount=1,this.outputObjectCount=1,this.globalCounts={vertices:0,faces:0,doubleIndicesCount:0,lineByte:0,currentByte:0,totalBytes:0},this.logging={enabled:!0,debug:!1}}return e.prototype.resetRawMesh=function(){this.rawMesh.subGroups=[],this.rawMesh.subGroupInUse=null,this.rawMesh.smoothingGroup.normalized=-1,this.rawMesh.smoothingGroup.real=-1,this.pushSmoothingGroup(1),this.rawMesh.counts.doubleIndicesCount=0,this.rawMesh.counts.faceCount=0,this.rawMesh.counts.mtlCount=0,this.rawMesh.counts.smoothingGroupCount=0},e.prototype.setUseAsync=function(e){this.useAsync=e},e.prototype.setMaterialPerSmoothingGroup=function(e){this.materialPerSmoothingGroup=e},e.prototype.setUseOAsMesh=function(e){this.useOAsMesh=e},e.prototype.setUseIndices=function(e){this.useIndices=e},e.prototype.setDisregardNormals=function(e){this.disregardNormals=e},e.prototype.setMaterials=function(e){this.materials=Zo.Validator.verifyInput(e,this.materials),this.materials=Zo.Validator.verifyInput(this.materials,{})},e.prototype.setCallbackMeshBuilder=function(e){Zo.Validator.isValid(e)||this._throwError('Unable to run as no "MeshBuilder" callback is set.'),this.callbackMeshBuilder=e},e.prototype.setCallbackProgress=function(e){this.callbackProgress=e},e.prototype.setLogging=function(e,t){this.logging.enabled=!0===e,this.logging.debug=!0===t},e.prototype.configure=function(){if(this.pushSmoothingGroup(1),this.logging.enabled){var e=Object.keys(this.materials),t="OBJLoader2.Parser configuration:"+(e.length>0?"\n\tmaterialNames:\n\t\t- "+e.join("\n\t\t- "):"\n\tmaterialNames: None")+"\n\tuseAsync: "+this.useAsync+"\n\tmaterialPerSmoothingGroup: "+this.materialPerSmoothingGroup+"\n\tuseOAsMesh: "+this.useOAsMesh+"\n\tuseIndices: "+this.useIndices+"\n\tdisregardNormals: "+this.disregardNormals+"\n\tcallbackMeshBuilderName: "+this.callbackMeshBuilder.name+"\n\tcallbackProgressName: "+this.callbackProgress.name;console.info(t)}},e.prototype.parse=function(e){this.logging.enabled&&console.time("OBJLoader2.Parser.parse"),this.configure();var t=new Uint8Array(e);this.contentRef=t;var n=t.byteLength;this.globalCounts.totalBytes=n;for(var r,i=new Array(128),o="",a=0,s=0,c=0;c<n;c++)switch(r=t[c]){case 32:o.length>0&&(i[a++]=o),o="";break;case 47:o.length>0&&(i[a++]=o),s++,o="";break;case 10:o.length>0&&(i[a++]=o),o="",this.globalCounts.lineByte=this.globalCounts.currentByte,this.globalCounts.currentByte=c,this.processLine(i,a,s),a=0,s=0;break;case 13:break;default:o+=String.fromCharCode(r)}this.finalizeParsing(),this.logging.enabled&&console.timeEnd("OBJLoader2.Parser.parse")},e.prototype.parseText=function(e){this.logging.enabled&&console.time("OBJLoader2.Parser.parseText"),this.configure(),this.legacyMode=!0,this.contentRef=e;var t=e.length;this.globalCounts.totalBytes=t;for(var n,r=new Array(128),i="",o=0,a=0,s=0;s<t;s++)switch(n=e[s]){case" ":i.length>0&&(r[o++]=i),i="";break;case"/":i.length>0&&(r[o++]=i),a++,i="";break;case"\n":i.length>0&&(r[o++]=i),i="",this.globalCounts.lineByte=this.globalCounts.currentByte,this.globalCounts.currentByte=s,this.processLine(r,o,a),o=0,a=0;break;case"\r":break;default:i+=n}this.finalizeParsing(),this.logging.enabled&&console.timeEnd("OBJLoader2.Parser.parseText")},e.prototype.processLine=function(e,t,n){if(!(t<1)){var r,i,o,a,s=function(e,t,n,r){var i="";if(r>n){var o;if(t)for(o=n;o<r;o++)i+=e[o];else for(o=n;o<r;o++)i+=String.fromCharCode(e[o]);i=i.trim()}return i};switch(a=e[0]){case"v":this.vertices.push(parseFloat(e[1])),this.vertices.push(parseFloat(e[2])),this.vertices.push(parseFloat(e[3])),t>4&&(this.colors.push(parseFloat(e[4])),this.colors.push(parseFloat(e[5])),this.colors.push(parseFloat(e[6])));break;case"vt":this.uvs.push(parseFloat(e[1])),this.uvs.push(parseFloat(e[2]));break;case"vn":this.normals.push(parseFloat(e[1])),this.normals.push(parseFloat(e[2])),this.normals.push(parseFloat(e[3]));break;case"f":if(r=t-1,0===n)for(this.checkFaceType(0),o=2,i=r;o<i;o++)this.buildFace(e[1]),this.buildFace(e[o]),this.buildFace(e[o+1]);else if(r===2*n)for(this.checkFaceType(1),o=3,i=r-2;o<i;o+=2)this.buildFace(e[1],e[2]),this.buildFace(e[o],e[o+1]),this.buildFace(e[o+2],e[o+3]);else if(2*r==3*n)for(this.checkFaceType(2),o=4,i=r-3;o<i;o+=3)this.buildFace(e[1],e[2],e[3]),this.buildFace(e[o],e[o+1],e[o+2]),this.buildFace(e[o+3],e[o+4],e[o+5]);else for(this.checkFaceType(3),o=3,i=r-2;o<i;o+=2)this.buildFace(e[1],void 0,e[2]),this.buildFace(e[o],void 0,e[o+1]),this.buildFace(e[o+2],void 0,e[o+3]);break;case"l":case"p":if((r=t-1)===2*n)for(this.checkFaceType(4),o=1,i=r+1;o<i;o+=2)this.buildFace(e[o],e[o+1]);else for(this.checkFaceType("l"===a?5:6),o=1,i=r+1;o<i;o++)this.buildFace(e[o]);break;case"s":this.pushSmoothingGroup(e[1]);break;case"g":this.processCompletedMesh(),this.rawMesh.groupName=s(this.contentRef,this.legacyMode,this.globalCounts.lineByte+2,this.globalCounts.currentByte);break;case"o":this.useOAsMesh&&this.processCompletedMesh(),this.rawMesh.objectName=s(this.contentRef,this.legacyMode,this.globalCounts.lineByte+2,this.globalCounts.currentByte);break;case"mtllib":this.rawMesh.mtllibName=s(this.contentRef,this.legacyMode,this.globalCounts.lineByte+7,this.globalCounts.currentByte);break;case"usemtl":var c=s(this.contentRef,this.legacyMode,this.globalCounts.lineByte+7,this.globalCounts.currentByte);""!==c&&this.rawMesh.activeMtlName!==c&&(this.rawMesh.activeMtlName=c,this.rawMesh.counts.mtlCount++,this.checkSubGroup())}}},e.prototype.pushSmoothingGroup=function(e){var t=parseInt(e);isNaN(t)&&(t="off"===e?0:1);var n=this.rawMesh.smoothingGroup.normalized;this.rawMesh.smoothingGroup.normalized=this.rawMesh.smoothingGroup.splitMaterials?t:0===t?0:1,this.rawMesh.smoothingGroup.real=t,n!==t&&(this.rawMesh.counts.smoothingGroupCount++,this.checkSubGroup())},e.prototype.checkFaceType=function(e){this.rawMesh.faceType!==e&&(this.processCompletedMesh(),this.rawMesh.faceType=e,this.checkSubGroup())},e.prototype.checkSubGroup=function(){var e=this.rawMesh.activeMtlName+"|"+this.rawMesh.smoothingGroup.normalized;this.rawMesh.subGroupInUse=this.rawMesh.subGroups[e],Zo.Validator.isValid(this.rawMesh.subGroupInUse)||(this.rawMesh.subGroupInUse={index:e,objectName:this.rawMesh.objectName,groupName:this.rawMesh.groupName,materialName:this.rawMesh.activeMtlName,smoothingGroup:this.rawMesh.smoothingGroup.normalized,vertices:[],indexMappingsCount:0,indexMappings:[],indices:[],colors:[],uvs:[],normals:[]},this.rawMesh.subGroups[e]=this.rawMesh.subGroupInUse)},e.prototype.buildFace=function(e,t,n){this.disregardNormals&&(n=void 0);var r=this,i=function(){var i=parseInt(e),o=3*(i>0?i-1:i+r.vertices.length/3),a=r.rawMesh.subGroupInUse.vertices;a.push(r.vertices[o++]),a.push(r.vertices[o++]),a.push(r.vertices[o]);var s=r.colors.length>0?o+1:null;if(null!==s){var c=r.rawMesh.subGroupInUse.colors;c.push(r.colors[s++]),c.push(r.colors[s++]),c.push(r.colors[s])}if(t){var u=parseInt(t),l=2*(u>0?u-1:u+r.uvs.length/2),h=r.rawMesh.subGroupInUse.uvs;h.push(r.uvs[l++]),h.push(r.uvs[l])}if(n){var d=parseInt(n),f=3*(d>0?d-1:d+r.normals.length/3),p=r.rawMesh.subGroupInUse.normals;p.push(r.normals[f++]),p.push(r.normals[f++]),p.push(r.normals[f])}};if(this.useIndices){var o=e+(t?"_"+t:"_n")+(n?"_"+n:"_n"),a=this.rawMesh.subGroupInUse.indexMappings[o];Zo.Validator.isValid(a)?this.rawMesh.counts.doubleIndicesCount++:(a=this.rawMesh.subGroupInUse.vertices.length/3,i(),this.rawMesh.subGroupInUse.indexMappings[o]=a,this.rawMesh.subGroupInUse.indexMappingsCount++),this.rawMesh.subGroupInUse.indices.push(a)}else i();this.rawMesh.counts.faceCount++},e.prototype.createRawMeshReport=function(e){return"Input Object number: "+e+"\n\tObject name: "+this.rawMesh.objectName+"\n\tGroup name: "+this.rawMesh.groupName+"\n\tMtllib name: "+this.rawMesh.mtllibName+"\n\tVertex count: "+this.vertices.length/3+"\n\tNormal count: "+this.normals.length/3+"\n\tUV count: "+this.uvs.length/2+"\n\tSmoothingGroup count: "+this.rawMesh.counts.smoothingGroupCount+"\n\tMaterial count: "+this.rawMesh.counts.mtlCount+"\n\tReal MeshOutputGroup count: "+this.rawMesh.subGroups.length},e.prototype.finalizeRawMesh=function(){var e,t,n=[],r=0,i=0,o=0,a=0,s=0,c=0;for(var u in this.rawMesh.subGroups)if((e=this.rawMesh.subGroups[u]).vertices.length>0){if((t=e.indices).length>0&&i>0)for(var l in t)t[l]=t[l]+i;n.push(e),r+=e.vertices.length,i+=e.indexMappingsCount,o+=e.indices.length,a+=e.colors.length,c+=e.uvs.length,s+=e.normals.length}var h=null;return n.length>0&&(h={name:""!==this.rawMesh.groupName?this.rawMesh.groupName:this.rawMesh.objectName,subGroups:n,absoluteVertexCount:r,absoluteIndexCount:o,absoluteColorCount:a,absoluteNormalCount:s,absoluteUvCount:c,faceCount:this.rawMesh.counts.faceCount,doubleIndicesCount:this.rawMesh.counts.doubleIndicesCount}),h},e.prototype.processCompletedMesh=function(){var e=this.finalizeRawMesh();if(Zo.Validator.isValid(e)){this.colors.length>0&&this.colors.length!==this.vertices.length&&this._throwError("Vertex Colors were detected, but vertex count and color count do not match!"),this.logging.enabled&&this.logging.debug&&console.debug(this.createRawMeshReport(this.inputObjectCount)),this.inputObjectCount++,this.buildMesh(e);var t=this.globalCounts.currentByte/this.globalCounts.totalBytes;return this.callbackProgress("Completed [o: "+this.rawMesh.objectName+" g:"+this.rawMesh.groupName+"] Total progress: "+(100*t).toFixed(2)+"%",t),this.resetRawMesh(),!0}return!1},e.prototype.buildMesh=function(e){var t=e.subGroups,n=new Float32Array(e.absoluteVertexCount);this.globalCounts.vertices+=e.absoluteVertexCount/3,this.globalCounts.faces+=e.faceCount,this.globalCounts.doubleIndicesCount+=e.doubleIndicesCount;var r,i,o,a,s,c,u,l=e.absoluteIndexCount>0?new Uint32Array(e.absoluteIndexCount):null,h=e.absoluteColorCount>0?new Float32Array(e.absoluteColorCount):null,d=e.absoluteNormalCount>0?new Float32Array(e.absoluteNormalCount):null,f=e.absoluteUvCount>0?new Float32Array(e.absoluteUvCount):null,p=Zo.Validator.isValid(h),m=[],v=t.length>1,g=0,y=[],b=[],x=0,w=0,_=0,S=0,M=0,T=0,A=0;for(var E in t)if(t.hasOwnProperty(E)){if(u=(r=t[E]).materialName,c=this.rawMesh.faceType<4?u+(p?"_vertexColor":"")+(0===r.smoothingGroup?"_flat":""):6===this.rawMesh.faceType?"defaultPointMaterial":"defaultLineMaterial",a=this.materials[u],s=this.materials[c],!Zo.Validator.isValid(a)&&!Zo.Validator.isValid(s)){var C=p?"defaultVertexColorMaterial":"defaultMaterial";a=this.materials[C],this.logging.enabled&&console.warn('object_group "'+r.objectName+"_"+r.groupName+'" was defined with unresolvable material "'+u+'"! Assigning "'+C+'".'),(u=C)===c&&(s=a,c=C)}if(!Zo.Validator.isValid(s)){var P={materialNameOrg:u,materialName:c,materialProperties:{vertexColors:p?2:0,flatShading:0===r.smoothingGroup}},L={cmd:"materialData",materials:{materialCloneInstructions:P}};this.callbackMeshBuilder(L),this.useAsync&&(this.materials[c]=P)}if(v?((i=y[c])||(i=g,y[c]=g,m.push(c),g++),o={start:T,count:A=this.useIndices?r.indices.length:r.vertices.length/3,index:i},b.push(o),T+=A):m.push(c),n.set(r.vertices,x),x+=r.vertices.length,l&&(l.set(r.indices,w),w+=r.indices.length),h&&(h.set(r.colors,_),_+=r.colors.length),d&&(d.set(r.normals,S),S+=r.normals.length),f&&(f.set(r.uvs,M),M+=r.uvs.length),this.logging.enabled&&this.logging.debug){var O=Zo.Validator.isValid(i)?"\n\t\tmaterialIndex: "+i:"",N="\tOutput Object no.: "+this.outputObjectCount+"\n\t\tgroupName: "+r.groupName+"\n\t\tIndex: "+r.index+"\n\t\tfaceType: "+this.rawMesh.faceType+"\n\t\tmaterialName: "+r.materialName+"\n\t\tsmoothingGroup: "+r.smoothingGroup+O+"\n\t\tobjectName: "+r.objectName+"\n\t\t#vertices: "+r.vertices.length/3+"\n\t\t#indices: "+r.indices.length+"\n\t\t#colors: "+r.colors.length/3+"\n\t\t#uvs: "+r.uvs.length/2+"\n\t\t#normals: "+r.normals.length/3;console.debug(N)}}this.outputObjectCount++,this.callbackMeshBuilder({cmd:"meshData",progress:{numericalValue:this.globalCounts.currentByte/this.globalCounts.totalBytes},params:{meshName:e.name},materials:{multiMaterial:v,materialNames:m,materialGroups:b},buffers:{vertices:n,indices:l,colors:h,normals:d,uvs:f},geometryType:this.rawMesh.faceType<4?0:6===this.rawMesh.faceType?2:1},[n.buffer],Zo.Validator.isValid(l)?[l.buffer]:null,Zo.Validator.isValid(h)?[h.buffer]:null,Zo.Validator.isValid(d)?[d.buffer]:null,Zo.Validator.isValid(f)?[f.buffer]:null)},e.prototype.finalizeParsing=function(){if(this.logging.enabled&&console.info("Global output object count: "+this.outputObjectCount),this.processCompletedMesh()&&this.logging.enabled){var e="Overall counts: \n\tVertices: "+this.globalCounts.vertices+"\n\tFaces: "+this.globalCounts.faces+"\n\tMultiple definitions: "+this.globalCounts.doubleIndicesCount;console.info(e)}},e}();return n.prototype.loadMtl=function(e,t,n,r,i,o,a){var s=new Zo.ResourceDescriptor(e,"MTL");s.setContent(t),this._loadMtl(s,n,r,i,o,a)},n.prototype._loadMtl=function(e,n,r,i,o,a){void 0===ea&&console.error('"MTLLoader" is not available. "OBJLoader2" requires it for loading MTL files.'),t.isValid(e)&&this.logging.enabled&&console.time("Loading MTL: "+e.name);var s=[],c=this,u=function(r){var i=[];if(t.isValid(r))for(var o in r.preload(),i=r.materials)i.hasOwnProperty(o)&&(s[o]=i[o]);t.isValid(e)&&c.logging.enabled&&console.timeEnd("Loading MTL: "+e.name),n(s,r)};if(t.isValid(e)&&(t.isValid(e.content)||t.isValid(e.url))){var l=new ea(this.manager);o=t.verifyInput(o,"anonymous"),l.setCrossOrigin(o),l.setPath(e.path),t.isValid(a)&&l.setMaterialOptions(a);var h=function(e){var t=e;"string"==typeof e||e instanceof String||(e.length>0||e.byteLength>0?t=Cr.decodeText(e):this._throwError("Unable to parse mtl as it it seems to be neither a String, an Array or an ArrayBuffer!")),u(l.parse(t))};if(t.isValid(e.content))h(e.content);else if(t.isValid(e.url)){var d=new lr(this.manager);if(t.isValid(i)||(i=function(e){c._onError(e)}),!t.isValid(r)){var f=0,p=0;r=function(t){if(t.lengthComputable&&(p=t.loaded/t.total)>f){f=p;var n='Download of "'+e.url+'": '+(100*p).toFixed(2)+"%";c.onProgress("progressLoad",n,p)}}}d.load(e.url,h,r,i)}}else u()},n}(),ba=function(e){this.manager=void 0!==e?e:cr,this.littleEndian=!0};ba.prototype={constructor:ba,load:function(e,t,n,r){var i=this,o=new lr(i.manager);o.setResponseType("arraybuffer"),o.load(e,function(n){try{t(i.parse(n,e))}catch(e){if(!r)throw e;r(e)}},n,r)},parse:function(e,t){var n=Cr.decodeText(e),r=function(e){var t={},n=e.search(/[\r\n]DATA\s(\S*)\s/i),r=/[\r\n]DATA\s(\S*)\s/i.exec(e.substr(n-1));if(t.data=r[1],t.headerLen=r[0].length+n,t.str=e.substr(0,t.headerLen),t.str=t.str.replace(/\#.*/gi,""),t.version=/VERSION (.*)/i.exec(t.str),t.fields=/FIELDS (.*)/i.exec(t.str),t.size=/SIZE (.*)/i.exec(t.str),t.type=/TYPE (.*)/i.exec(t.str),t.count=/COUNT (.*)/i.exec(t.str),t.width=/WIDTH (.*)/i.exec(t.str),t.height=/HEIGHT (.*)/i.exec(t.str),t.viewpoint=/VIEWPOINT (.*)/i.exec(t.str),t.points=/POINTS (.*)/i.exec(t.str),null!==t.version&&(t.version=parseFloat(t.version[1])),null!==t.fields&&(t.fields=t.fields[1].split(" ")),null!==t.type&&(t.type=t.type[1].split(" ")),null!==t.width&&(t.width=parseInt(t.width[1])),null!==t.height&&(t.height=parseInt(t.height[1])),null!==t.viewpoint&&(t.viewpoint=t.viewpoint[1]),null!==t.points&&(t.points=parseInt(t.points[1],10)),null===t.points&&(t.points=t.width*t.height),null!==t.size&&(t.size=t.size[1].split(" ").map(function(e){return parseInt(e,10)})),null!==t.count)t.count=t.count[1].split(" ").map(function(e){return parseInt(e,10)});else{t.count=[];for(var i=0,o=t.fields.length;i<o;i++)t.count.push(1)}t.offset={};var a=0;for(i=0,o=t.fields.length;i<o;i++)"ascii"===t.data?t.offset[t.fields[i]]=i:(t.offset[t.fields[i]]=a,a+=t.size[i]);return t.rowSize=a,t}(n),i=[],o=[],a=[];if("ascii"===r.data)for(var s=r.offset,c=n.substr(r.headerLen).split("\n"),u=0,l=c.length;u<l;u++)if(""!==c[u]){var h=c[u].split(" ");if(void 0!==s.x&&(i.push(parseFloat(h[s.x])),i.push(parseFloat(h[s.y])),i.push(parseFloat(h[s.z]))),void 0!==s.rgb){var d=new Float32Array([parseFloat(h[s.rgb])]),f=new DataView(d.buffer,0);a.push(f.getUint8(0)/255),a.push(f.getUint8(1)/255),a.push(f.getUint8(2)/255)}void 0!==s.normal_x&&(o.push(parseFloat(h[s.normal_x])),o.push(parseFloat(h[s.normal_y])),o.push(parseFloat(h[s.normal_z])))}if("binary_compressed"!==r.data){if("binary"===r.data){f=new DataView(e,r.headerLen),s=r.offset,u=0;for(var p=0;u<r.points;u++,p+=r.rowSize)void 0!==s.x&&(i.push(f.getFloat32(p+s.x,this.littleEndian)),i.push(f.getFloat32(p+s.y,this.littleEndian)),i.push(f.getFloat32(p+s.z,this.littleEndian))),void 0!==s.rgb&&(a.push(f.getUint8(p+s.rgb+0)/255),a.push(f.getUint8(p+s.rgb+1)/255),a.push(f.getUint8(p+s.rgb+2)/255)),void 0!==s.normal_x&&(o.push(f.getFloat32(p+s.normal_x,this.littleEndian)),o.push(f.getFloat32(p+s.normal_y,this.littleEndian)),o.push(f.getFloat32(p+s.normal_z,this.littleEndian)))}var m=new k;i.length>0&&m.addAttribute("position",new N(i,3)),o.length>0&&m.addAttribute("normal",new N(o,3)),a.length>0&&m.addAttribute("color",new N(a,3)),m.computeBoundingSphere();var v=new xr({size:.005});a.length>0?v.vertexColors=!0:v.color.setHex(16777215*Math.random());var g=new Gi(m,v),y=t.split("").reverse().join("");return y=(y=/([^\/]*)/.exec(y))[1].split("").reverse().join(""),g.name=y,g}console.error("PCDLoader: binary_compressed files are not supported")}};var xa=function(e){this.manager=void 0!==e?e:cr};xa.prototype={constructor:xa,load:function(e,t,n,r){var i=this;new lr(i.manager).load(e,function(e){t(i.parse(e))},n,r)},parse:function(e){function t(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function n(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}function r(e,t){var n=parseInt(f[p].substr(e,t));if(n){var r=function(e,t){return"s"+Math.min(e,t)+"e"+Math.max(e,t)}(v,n);void 0===d[r]&&(h.push([v-1,n-1,1]),d[r]=h.length-1)}}for(var i,o,a,s,c,u={h:[255,255,255],he:[217,255,255],li:[204,128,255],be:[194,255,0],b:[255,181,181],c:[144,144,144],n:[48,80,248],o:[255,13,13],f:[144,224,80],ne:[179,227,245],na:[171,92,242],mg:[138,255,0],al:[191,166,166],si:[240,200,160],p:[255,128,0],s:[255,255,48],cl:[31,240,31],ar:[128,209,227],k:[143,64,212],ca:[61,255,0],sc:[230,230,230],ti:[191,194,199],v:[166,166,171],cr:[138,153,199],mn:[156,122,199],fe:[224,102,51],co:[240,144,160],ni:[80,208,80],cu:[200,128,51],zn:[125,128,176],ga:[194,143,143],ge:[102,143,143],as:[189,128,227],se:[255,161,0],br:[166,41,41],kr:[92,184,209],rb:[112,46,176],sr:[0,255,0],y:[148,255,255],zr:[148,224,224],nb:[115,194,201],mo:[84,181,181],tc:[59,158,158],ru:[36,143,143],rh:[10,125,140],pd:[0,105,133],ag:[192,192,192],cd:[255,217,143],in:[166,117,115],sn:[102,128,128],sb:[158,99,181],te:[212,122,0],i:[148,0,148],xe:[66,158,176],cs:[87,23,143],ba:[0,201,0],la:[112,212,255],ce:[255,255,199],pr:[217,255,199],nd:[199,255,199],pm:[163,255,199],sm:[143,255,199],eu:[97,255,199],gd:[69,255,199],tb:[48,255,199],dy:[31,255,199],ho:[0,255,156],er:[0,230,117],tm:[0,212,82],yb:[0,191,56],lu:[0,171,36],hf:[77,194,255],ta:[77,166,255],w:[33,148,214],re:[38,125,171],os:[38,102,150],ir:[23,84,135],pt:[208,208,224],au:[255,209,35],hg:[184,184,208],tl:[166,84,77],pb:[87,89,97],bi:[158,79,181],po:[171,92,0],at:[117,79,69],rn:[66,130,150],fr:[66,0,102],ra:[0,125,0],ac:[112,171,250],th:[0,186,255],pa:[0,161,255],u:[0,143,255],np:[0,128,255],pu:[0,107,255],am:[84,92,242],cm:[120,92,227],bk:[138,79,227],cf:[161,54,212],es:[179,31,212],fm:[179,31,186],md:[179,13,166],no:[189,13,135],lr:[199,0,102],rf:[204,0,89],db:[209,0,79],sg:[217,0,69],bh:[224,0,56],hs:[230,0,46],mt:[235,0,38],ds:[235,0,38],rg:[235,0,38],cn:[235,0,38],uut:[235,0,38],uuq:[235,0,38],uup:[235,0,38],uuh:[235,0,38],uus:[235,0,38],uuo:[235,0,38]},l=[],h=[],d={},f=e.split("\n"),p=0,m=f.length;p<m;p++)if("ATOM"===f[p].substr(0,4)||"HETATM"===f[p].substr(0,6))i=parseFloat(f[p].substr(30,7)),o=parseFloat(f[p].substr(38,7)),a=parseFloat(f[p].substr(46,7)),s=parseInt(f[p].substr(6,5))-1,""===(c=t(f[p].substr(76,2)).toLowerCase())&&(c=t(f[p].substr(12,2)).toLowerCase()),l[s]=[i,o,a,u[c],n(c)];else if("CONECT"===f[p].substr(0,6)){var v=parseInt(f[p].substr(6,5));r(11,5),r(16,5),r(21,5),r(26,5)}return function(){var e,t,n={geometryAtoms:new k,geometryBonds:new k,json:{atoms:l,bonds:h}},r=n.geometryAtoms,i=n.geometryBonds,o=[],a=[],s=[];for(e=0,t=l.length;e<t;e++){var c=l[e],u=c[0],d=c[1],f=c[2];o.push(u,d,f);var p=c[3][0]/255,m=c[3][1]/255,v=c[3][2]/255;a.push(p,m,v)}for(e=0,t=h.length;e<t;e++){var g=h[e],y=g[0],b=g[1];s.push(o[3*y+0]),s.push(o[3*y+1]),s.push(o[3*y+2]),s.push(o[3*b+0]),s.push(o[3*b+1]),s.push(o[3*b+2])}return r.addAttribute("position",new N(o,3)),r.addAttribute("color",new N(a,3)),i.addAttribute("position",new N(s,3)),n}()}};var wa=function(e){this.manager=void 0!==e?e:cr};wa.prototype={constructor:wa,load:function(e,t,n,r){var i=this;new lr(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){function t(e){var t={};for(var n in e){var r,i=e[n],o=i.type,a=i.components;switch(o){case"float32":r=new N(i.data,a);break;case"uint8":r=new A(i.data,a);break;case"uint16":r=new P(i.data,a);break;default:console.log('PlayCanvasLoader: Array type "%s" not yet supported.',o)}t[n]=r}e._attributes=t}function n(e){var t=new k;t.setIndex(e.indices);var n=o.vertices[e.vertices]._attributes;for(var r in n){var i=n[r];"texCoord0"===r&&(r="uv"),t.addAttribute(r,i)}e._geometry=t}function r(e){var t=o.nodes[e.node],n=o.meshes[e.mesh];void 0===t._geometries&&(t._geometries=[]),t._geometries.push(n._geometry)}function i(e){var t=new oo,n=e._geometries;if(void 0!==n)for(var r=new vr,i=0,o=n.length;i<o;i++){var a=n[i];t.add(new fn(a,r))}for(i=0,o=e.rotation.length;i<o;i++)e.rotation[i]*=Math.PI/180;t.name=e.name,t.position.fromArray(e.position),t.quaternion.setFromEuler((new l).fromArray(e.rotation)),t.scale.fromArray(e.scale),e._object=t}for(var o=e.model,a=0,s=o.vertices.length;a<s;a++)t(o.vertices[a]);for(a=0,s=o.meshes.length;a<s;a++)n(o.meshes[a]);for(a=0,s=o.meshInstances.length;a<s;a++)r(o.meshInstances[a]);for(a=0,s=o.nodes.length;a<s;a++)i(o.nodes[a]);for(a=0,s=o.parents.length;a<s;a++){var c=o.parents[a];-1!==c&&o.nodes[c]._object.add(o.nodes[a]._object)}return o.nodes[0]._object}};var _a=function(e){this.manager=void 0!==e?e:cr,this.propertyNameMapping={}};_a.prototype={constructor:_a,load:function(e,t,n,r){var i=this,o=new lr(this.manager);o.setResponseType("arraybuffer"),o.load(e,function(e){t(i.parse(e))},n,r)},setPropertyNameMapping:function(e){this.propertyNameMapping=e},parse:function(e){function t(e){var t="",n=0,r=/ply([\s\S]*)end_header\s/.exec(e);null!==r&&(t=r[1],n=r[0].length);var i,o,a,s={comments:[],elements:[],headerLength:n},c=t.split("\n");function u(e,t){var n={type:e[0]};return"list"===n.type?(n.name=e[3],n.countType=e[1],n.itemType=e[2]):n.name=e[1],n.name in t&&(n.name=t[n.name]),n}for(var h=0;h<c.length;h++){var d=c[h];if(""!==(d=d.trim()))switch(o=(a=d.split(/\s+/)).shift(),d=a.join(" "),o){case"format":s.format=a[0],s.version=a[1];break;case"comment":s.comments.push(d);break;case"element":void 0!==i&&s.elements.push(i),(i={}).name=a[0],i.count=parseInt(a[1]),i.properties=[];break;case"property":i.properties.push(u(a,l.propertyNameMapping));break;default:console.log("unhandled",o,a)}}return void 0!==i&&s.elements.push(i),s}function n(e,t){switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(e);case"float":case"double":case"float32":case"float64":return parseFloat(e)}}function r(e,t){for(var r=t.split(/\s+/),i={},o=0;o<e.length;o++)if("list"===e[o].type){for(var a=[],s=n(r.shift(),e[o].countType),c=0;c<s;c++)a.push(n(r.shift(),e[o].itemType));i[e[o].name]=a}else i[e[o].name]=n(r.shift(),e[o].type);return i}function i(e,t){var n,i={indices:[],vertices:[],normals:[],uvs:[],colors:[]},s="";null!==(n=/end_header\s([\s\S]*)$/.exec(e))&&(s=n[1]);for(var c=s.split("\n"),u=0,l=0,h=0;h<c.length;h++){var d=c[h];if(""!==(d=d.trim())){l>=t.elements[u].count&&(u++,l=0);var f=r(t.elements[u].properties,d);a(i,t.elements[u].name,f),l++}}return o(i)}function o(e){var t=new k;return e.indices.length>0&&t.setIndex(e.indices),t.addAttribute("position",new N(e.vertices,3)),e.normals.length>0&&t.addAttribute("normal",new N(e.normals,3)),e.uvs.length>0&&t.addAttribute("uv",new N(e.uvs,2)),e.colors.length>0&&t.addAttribute("color",new N(e.colors,3)),t.computeBoundingSphere(),t}function a(e,t,n){if("vertex"===t)e.vertices.push(n.x,n.y,n.z),"nx"in n&&"ny"in n&&"nz"in n&&e.normals.push(n.nx,n.ny,n.nz),"s"in n&&"t"in n&&e.uvs.push(n.s,n.t),"red"in n&&"green"in n&&"blue"in n&&e.colors.push(n.red/255,n.green/255,n.blue/255);else if("face"===t){var r=n.vertex_indices||n.vertex_index;3===r.length?e.indices.push(r[0],r[1],r[2]):4===r.length&&(e.indices.push(r[0],r[1],r[3]),e.indices.push(r[1],r[2],r[3]))}}function s(e,t,n,r){switch(n){case"int8":case"char":return[e.getInt8(t),1];case"uint8":case"uchar":return[e.getUint8(t),1];case"int16":case"short":return[e.getInt16(t,r),2];case"uint16":case"ushort":return[e.getUint16(t,r),2];case"int32":case"int":return[e.getInt32(t,r),4];case"uint32":case"uint":return[e.getUint32(t,r),4];case"float32":case"float":return[e.getFloat32(t,r),4];case"float64":case"double":return[e.getFloat64(t,r),8]}}function c(e,t,n,r){for(var i,o={},a=0,c=0;c<n.length;c++)if("list"===n[c].type){var u=[],l=(i=s(e,t+a,n[c].countType,r))[0];a+=i[1];for(var h=0;h<l;h++)i=s(e,t+a,n[c].itemType,r),u.push(i[0]),a+=i[1];o[n[c].name]=u}else i=s(e,t+a,n[c].type,r),o[n[c].name]=i[0],a+=i[1];return[o,a]}var u,l=this;if(e instanceof ArrayBuffer){var h=Cr.decodeText(new Uint8Array(e)),d=t(h);u="ascii"===d.format?i(h,d):function(e,t){for(var n,r={indices:[],vertices:[],normals:[],uvs:[],colors:[]},i="binary_little_endian"===t.format,s=new DataView(e,t.headerLength),u=0,l=0;l<t.elements.length;l++)for(var h=0;h<t.elements[l].count;h++){u+=(n=c(s,u,t.elements[l].properties,i))[1];var d=n[0];a(r,t.elements[l].name,d)}return o(r)}(e,d)}else u=i(e,t(e));return u}};var Sa=null;function Ma(){if(null===Sa){var e=new ArrayBuffer(2),t=new Uint8Array(e),n=new Uint16Array(e);t[0]=170,t[1]=187,Sa=43707===n[0]}return Sa}var Ta=[null,Float32Array,null,Int8Array,Int16Array,null,Int32Array,Uint8Array,Uint16Array,null,Uint32Array],Aa={Uint16Array:"getUint16",Uint32Array:"getUint32",Int16Array:"getInt16",Int32Array:"getInt32",Float32Array:"getFloat32",Float64Array:"getFloat64"};function Ea(e,t,n,r,i){var o,a=t.BYTES_PER_ELEMENT;if(i===Ma()||1===a)o=new t(e,n,r);else{var s=new DataView(e,n,r*a),c=Aa[t.name],u=!i,l=0;for(o=new t(r);l<r;l++)o[l]=s[c](l*a,u)}return o}var Ca=function(e){this.manager=void 0!==e?e:cr};Ca.prototype={constructor:Ca,load:function(e,t,n,r){var i=this,o=new lr(i.manager);o.setResponseType("arraybuffer"),e=e.replace(/\*/g,Ma()?"be":"le"),o.load(e,function(e){t(i.parse(e))},n,r)},parse:function(e){console.time("PRWMLoader");var t,n,r=function(e){var t=new Uint8Array(e),n=t[0],r=t[1],i=!!(r>>7&1),o=r>>6&1,a=1==(r>>5&1),s=31&r,c=0,u=0;if(a?(c=(t[2]<<16)+(t[3]<<8)+t[4],u=(t[5]<<16)+(t[6]<<8)+t[7]):(c=t[2]+(t[3]<<8)+(t[4]<<16),u=t[5]+(t[6]<<8)+(t[7]<<16)),0===n)throw new Error("PRWM decoder: Invalid format version: 0");if(1!==n)throw new Error("PRWM decoder: Unsupported format version: "+n);if(!i){if(0!==o)throw new Error("PRWM decoder: Indices type must be set to 0 for non-indexed geometries");if(0!==u)throw new Error("PRWM decoder: Number of indices must be set to 0 for non-indexed geometries")}var l,h,d,f,p,m,v,g,y=8,b={};for(g=0;g<s;g++){for(l="";y<t.length&&(h=t[y],y++,0!==h);)l+=String.fromCharCode(h);d=(r=t[y])>>7&1,f=1+(r>>4&3),y++,m=Ea(e,p=Ta[15&r],y=4*Math.ceil(y/4),f*c,a),y+=p.BYTES_PER_ELEMENT*f*c,b[l]={type:d,cardinality:f,values:m}}return y=4*Math.ceil(y/4),v=null,i&&(v=Ea(e,1===o?Uint32Array:Uint16Array,y,u,a)),{version:n,attributes:b,indices:v}}(e),i=Object.keys(r.attributes),o=new k;for(n=0;n<i.length;n++)t=r.attributes[i[n]],o.addAttribute(i[n],new M(t.values,t.cardinality,t.normalized));return null!==r.indices&&o.setIndex(new M(r.indices,1)),console.timeEnd("PRWMLoader"),o}},Ca.isBigEndianPlatform=function(){return Ma()};var Pa=function(e){Oo.call(this,e),this._parser=Pa.parse};Pa.prototype=Object.create(Oo.prototype),Pa.prototype.constructor=Pa,Pa.parse=function(e,t){var n=new Uint32Array(e,0,13),r={buffer:e,header:n,loadMipmaps:t};return 55727696===n[0]?Pa._parseV3(r):559044176===n[11]?Pa._parseV2(r):void console.error("PVRLoader: Unknown PVR format.")},Pa._parseV3=function(e){var t,n,r=e.header,i=r[12],o=r[2],a=r[6],s=r[7],c=r[10],u=r[11];switch(o){case 0:t=2,n=Tt;break;case 1:t=2,n=Et;break;case 2:t=4,n=Mt;break;case 3:t=4,n=At;break;default:console.error("PVRLoader: Unsupported PVR format:",o)}return e.dataPtr=52+i,e.bpp=t,e.format=n,e.width=s,e.height=a,e.numSurfaces=c,e.numMipmaps=u,e.isCubemap=6===c,Pa._extract(e)},Pa._parseV2=function(e){var t,n,r=e.header,i=r[0],o=r[1],a=r[2],s=r[3],c=r[4],u=r[10],l=r[12],h=255&c,d=u>0;return 25===h?(n=d?At:Mt,t=4):24===h?(n=d?Et:Tt,t=2):console.error("PVRLoader: Unknown PVR format:",h),e.dataPtr=i,e.bpp=t,e.format=n,e.width=a,e.height=o,e.numSurfaces=l,e.numMipmaps=s+1,e.isCubemap=6===l,Pa._extract(e)},Pa._extract=function(e){var t,n={mipmaps:[],width:e.width,height:e.height,format:e.format,mipmapCount:e.numMipmaps,isCubemap:e.isCubemap},r=e.buffer,i=e.dataPtr,o=e.bpp,a=e.numSurfaces,s=0,c=0,u=0,l=0,h=0;2===o?(c=8,u=4):(c=4,u=4),t=c*u*o/8,n.mipmaps.length=e.numMipmaps*a;for(var d=0;d<e.numMipmaps;){var f=e.width>>d,p=e.height>>d;h=p/u,(l=f/c)<2&&(l=2),h<2&&(h=2),s=l*h*t;for(var m=0;m<a;m++){var v={data:new Uint8Array(r,i,s),width:f,height:p};n.mipmaps[m*e.numMipmaps+d]=v,i+=s}d++}return n};var La=function(e){this.manager=void 0!==e?e:cr};function Oa(e,t,n,r,i,o,a,s){si.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Na(e,t,n,r,i,o){Oa.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function Ra(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var c=(t-e)/o-(n-e)/(o+a)+(n-t)/a,u=(n-t)/a-(r-t)/(a+s)+(r-n)/s;i(t,n,c*=a,u*=a)},calc:function(i){var o=i*i;return e+t*i+n*o+r*(o*i)}}}La.prototype={constructor:La,load:function(e,t,n,r){var i=this,o=new lr(i.manager);o.setResponseType("arraybuffer"),o.load(e,function(e){try{t(i.parse(e))}catch(e){r&&r(e)}},n,r)},parse:function(e){function t(e,t,n){for(var r=0,i=e.length;r<i;r++)if(e[r]!==t.getUint8(n+r,!1))return!1;return!0}var n=function(e){if("string"==typeof e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer||t}return e}(e);return function(e){var n;if(84+50*(n=new DataView(e)).getUint32(80,!0)===n.byteLength)return!0;for(var r=[115,111,108,105,100],i=0;i<5;i++)if(t(r,n,i))return!1;return!0}(n)?function(e){for(var t,n,r,i,o,a,s,c,u=new DataView(e),l=u.getUint32(80,!0),h=!1,d=0;d<70;d++)1129270351==u.getUint32(d,!1)&&82==u.getUint8(d+4)&&61==u.getUint8(d+5)&&(h=!0,i=[],o=u.getUint8(d+6)/255,a=u.getUint8(d+7)/255,s=u.getUint8(d+8)/255,c=u.getUint8(d+9)/255);for(var f=new k,p=[],m=[],v=0;v<l;v++){var g=84+50*v,y=u.getFloat32(g,!0),b=u.getFloat32(g+4,!0),x=u.getFloat32(g+8,!0);if(h){var w=u.getUint16(g+48,!0);0==(32768&w)?(t=(31&w)/31,n=(w>>5&31)/31,r=(w>>10&31)/31):(t=o,n=a,r=s)}for(var _=1;_<=3;_++){var S=g+12*_;p.push(u.getFloat32(S,!0)),p.push(u.getFloat32(S+4,!0)),p.push(u.getFloat32(S+8,!0)),m.push(y,b,x),h&&i.push(t,n,r)}}return f.addAttribute("position",new M(new Float32Array(p),3)),f.addAttribute("normal",new M(new Float32Array(m),3)),h&&(f.addAttribute("color",new M(new Float32Array(i),3)),f.hasColors=!0,f.alpha=c),f}(n):function(e){for(var t,n=new k,r=/facet([\s\S]*?)endfacet/g,i=0,o=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,a=new RegExp("vertex"+o+o+o,"g"),c=new RegExp("normal"+o+o+o,"g"),u=[],l=[],h=new s;null!==(t=r.exec(e));){for(var d=0,f=0,p=t[0];null!==(t=c.exec(p));)h.x=parseFloat(t[1]),h.y=parseFloat(t[2]),h.z=parseFloat(t[3]),f++;for(;null!==(t=a.exec(p));)u.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3])),l.push(h.x,h.y,h.z),d++;1!==f&&console.error("STLLoader: Something isn't right with the normal of face number "+i),3!==d&&console.error("STLLoader: Something isn't right with the vertices of face number "+i),i++}return n.addAttribute("position",new N(u,3)),n.addAttribute("normal",new N(l,3)),n}(function(e){return"string"!=typeof e?Cr.decodeText(new Uint8Array(e)):e}(e))}},Oa.prototype=Object.create(si.prototype),Oa.prototype.constructor=Oa,Oa.prototype.isEllipseCurve=!0,Oa.prototype.getPoint=function(e,t){for(var n=t||new x,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var u=Math.cos(this.aRotation),l=Math.sin(this.aRotation),h=s-this.aX,d=c-this.aY;s=h*u-d*l+this.aX,c=h*l+d*u+this.aY}return n.set(s,c)},Oa.prototype.copy=function(e){return si.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Oa.prototype.toJSON=function(){var e=si.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Oa.prototype.fromJSON=function(e){return si.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Na.prototype=Object.create(Oa.prototype),Na.prototype.constructor=Na,Na.prototype.isArcCurve=!0;var Ia=new s,Da=new Ra,Fa=new Ra,ka=new Ra;function Ua(e,t,n,r){si.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Ba(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function za(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function ja(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}function Va(e,t,n,r){si.call(this),this.type="CubicBezierCurve",this.v0=e||new x,this.v1=t||new x,this.v2=n||new x,this.v3=r||new x}function Ga(e,t,n,r){si.call(this),this.type="CubicBezierCurve3",this.v0=e||new s,this.v1=t||new s,this.v2=n||new s,this.v3=r||new s}function Wa(e,t){si.call(this),this.type="LineCurve",this.v1=e||new x,this.v2=t||new x}function Ha(e,t){si.call(this),this.type="LineCurve3",this.v1=e||new s,this.v2=t||new s}function Xa(e,t,n){si.call(this),this.type="QuadraticBezierCurve",this.v0=e||new x,this.v1=t||new x,this.v2=n||new x}function qa(e,t,n){si.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new s,this.v1=t||new s,this.v2=n||new s}function Ya(e){si.call(this),this.type="SplineCurve",this.points=e||[]}Ua.prototype=Object.create(si.prototype),Ua.prototype.constructor=Ua,Ua.prototype.isCatmullRomCurve3=!0,Ua.prototype.getPoint=function(e,t){var n,r,i,o,a=t||new s,c=this.points,u=c.length,l=(u-(this.closed?0:1))*e,h=Math.floor(l),d=l-h;if(this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/u)+1)*u:0===d&&h===u-1&&(h=u-2,d=1),this.closed||h>0?n=c[(h-1)%u]:(Ia.subVectors(c[0],c[1]).add(c[0]),n=Ia),r=c[h%u],i=c[(h+1)%u],this.closed||h+2<u?o=c[(h+2)%u]:(Ia.subVectors(c[u-1],c[u-2]).add(c[u-1]),o=Ia),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(r),f),m=Math.pow(r.distanceToSquared(i),f),v=Math.pow(i.distanceToSquared(o),f);m<1e-4&&(m=1),p<1e-4&&(p=m),v<1e-4&&(v=m),Da.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,p,m,v),Fa.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,p,m,v),ka.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,p,m,v)}else"catmullrom"===this.curveType&&(Da.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),Fa.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),ka.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(Da.calc(d),Fa.calc(d),ka.calc(d)),a},Ua.prototype.copy=function(e){si.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Ua.prototype.toJSON=function(){var e=si.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Ua.prototype.fromJSON=function(e){si.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new s).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Va.prototype=Object.create(si.prototype),Va.prototype.constructor=Va,Va.prototype.isCubicBezierCurve=!0,Va.prototype.getPoint=function(e,t){var n=t||new x,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(ja(e,r.x,i.x,o.x,a.x),ja(e,r.y,i.y,o.y,a.y)),n},Va.prototype.copy=function(e){return si.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Va.prototype.toJSON=function(){var e=si.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Va.prototype.fromJSON=function(e){return si.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Ga.prototype=Object.create(si.prototype),Ga.prototype.constructor=Ga,Ga.prototype.isCubicBezierCurve3=!0,Ga.prototype.getPoint=function(e,t){var n=t||new s,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(ja(e,r.x,i.x,o.x,a.x),ja(e,r.y,i.y,o.y,a.y),ja(e,r.z,i.z,o.z,a.z)),n},Ga.prototype.copy=function(e){return si.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Ga.prototype.toJSON=function(){var e=si.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Ga.prototype.fromJSON=function(e){return si.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Wa.prototype=Object.create(si.prototype),Wa.prototype.constructor=Wa,Wa.prototype.isLineCurve=!0,Wa.prototype.getPoint=function(e,t){var n=t||new x;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Wa.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Wa.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Wa.prototype.copy=function(e){return si.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Wa.prototype.toJSON=function(){var e=si.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Wa.prototype.fromJSON=function(e){return si.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ha.prototype=Object.create(si.prototype),Ha.prototype.constructor=Ha,Ha.prototype.isLineCurve3=!0,Ha.prototype.getPoint=function(e,t){var n=t||new s;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Ha.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Ha.prototype.copy=function(e){return si.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ha.prototype.toJSON=function(){var e=si.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ha.prototype.fromJSON=function(e){return si.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Xa.prototype=Object.create(si.prototype),Xa.prototype.constructor=Xa,Xa.prototype.isQuadraticBezierCurve=!0,Xa.prototype.getPoint=function(e,t){var n=t||new x,r=this.v0,i=this.v1,o=this.v2;return n.set(za(e,r.x,i.x,o.x),za(e,r.y,i.y,o.y)),n},Xa.prototype.copy=function(e){return si.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Xa.prototype.toJSON=function(){var e=si.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Xa.prototype.fromJSON=function(e){return si.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},qa.prototype=Object.create(si.prototype),qa.prototype.constructor=qa,qa.prototype.isQuadraticBezierCurve3=!0,qa.prototype.getPoint=function(e,t){var n=t||new s,r=this.v0,i=this.v1,o=this.v2;return n.set(za(e,r.x,i.x,o.x),za(e,r.y,i.y,o.y),za(e,r.z,i.z,o.z)),n},qa.prototype.copy=function(e){return si.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},qa.prototype.toJSON=function(){var e=si.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},qa.prototype.fromJSON=function(e){return si.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ya.prototype=Object.create(si.prototype),Ya.prototype.constructor=Ya,Ya.prototype.isSplineCurve=!0,Ya.prototype.getPoint=function(e,t){var n=t||new x,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],l=r[o>r.length-3?r.length-1:o+2];return n.set(Ba(a,s.x,c.x,u.x,l.x),Ba(a,s.y,c.y,u.y,l.y)),n},Ya.prototype.copy=function(e){si.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},Ya.prototype.toJSON=function(){var e=si.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},Ya.prototype.fromJSON=function(e){si.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new x).fromArray(r))}return this};var Ja={ArcCurve:Na,CatmullRomCurve3:Ua,CubicBezierCurve:Va,CubicBezierCurve3:Ga,EllipseCurve:Oa,LineCurve:Wa,LineCurve3:Ha,QuadraticBezierCurve:Xa,QuadraticBezierCurve3:qa,SplineCurve:Ya};function Qa(){si.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Za(e){Qa.call(this),this.type="Path",this.currentPoint=new x,e&&this.setFromPoints(e)}function Ka(e){Za.call(this,e),this.uuid=o.generateUUID(),this.type="Shape",this.holes=[]}Qa.prototype=Object.assign(Object.create(si.prototype),{constructor:Qa,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ja.LineCurve(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),c=0;c<s.length;c++){var u=s[c];t&&t.equals(u)||(n.push(u),t=u)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){si.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=si.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){si.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new Ja[r.type]).fromJSON(r))}return this}}),Za.prototype=Object.assign(Object.create(Qa.prototype),{constructor:Za,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new Wa(this.currentPoint.clone(),new x(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new Xa(this.currentPoint.clone(),new x(e,t),new x(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,o){var a=new Va(this.currentPoint.clone(),new x(e,t),new x(n,r),new x(i,o));this.curves.push(a),this.currentPoint.set(i,o)},splineThru:function(e){var t=new Ya([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){var c=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+c,t+u,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,o,a,s){var c=new Oa(e,t,n,r,i,o,a,s);if(this.curves.length>0){var u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);var l=c.getPoint(1);this.currentPoint.copy(l)},copy:function(e){return Qa.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Qa.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Qa.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Ka.prototype=Object.assign(Object.create(Za.prototype),{constructor:Ka,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Za.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=Za.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){Za.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new Za).fromJSON(r))}return this}});var $a={triangulate:function(e,t,n){n=n||2;var r,i,o,a,s,c,u,l=t&&t.length,h=l?t[0]*n:e.length,d=es(e,0,h,n,!0),f=[];if(!d)return f;if(l&&(d=function(e,t,n,r){var i,o,a,s,c,u=[];for(i=0,o=t.length;i<o;i++)a=t[i]*r,s=i<o-1?t[i+1]*r:e.length,(c=es(e,a,s,r,!1))===c.next&&(c.steiner=!0),u.push(ls(c));for(u.sort(ss),i=0;i<u.length;i++)cs(u[i],n),n=ts(n,n.next);return n}(e,t,d,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var p=n;p<h;p+=n)s=e[p],c=e[p+1],s<r&&(r=s),c<i&&(i=c),s>o&&(o=s),c>a&&(a=c);u=0!==(u=Math.max(o-r,a-i))?1/u:0}return ns(d,f,n,r,i,u),f}};function es(e,t,n,r,i){var o,a;if(i===function(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=ys(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=ys(o,e[o],e[o+1],a);return a&&ps(a,a.next)&&(bs(a),a=a.next),a}function ts(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!ps(r,r.next)&&0!==fs(r.prev,r,r.next))r=r.next;else{if(bs(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function ns(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=us(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,c,u=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(c=u;s>0||c>0&&r;)0!==s&&(0===c||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,c--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(e,r,i,o);for(var s,c,u=e;e.prev!==e.next;)if(s=e.prev,c=e.next,o?is(e,r,i,o):rs(e))t.push(s.i/n),t.push(e.i/n),t.push(c.i/n),bs(e),e=c.next,u=c.next;else if((e=c)===u){a?1===a?ns(e=os(e,t,n),t,n,r,i,o,2):2===a&&as(e,t,n,r,i,o):ns(ts(e),t,n,r,i,o,1);break}}}function rs(e){var t=e.prev,n=e,r=e.next;if(fs(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(hs(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&fs(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function is(e,t,n,r){var i=e.prev,o=e,a=e.next;if(fs(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,c=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,u=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=us(s,c,t,n,r),d=us(u,l,t,n,r),f=e.nextZ;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&hs(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&fs(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=e.prevZ;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&hs(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&fs(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function os(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!ps(i,o)&&ms(i,r,r.next,o)&&vs(i,o)&&vs(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),bs(r),bs(r.next),r=e=o),r=r.next}while(r!==e);return r}function as(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&ds(a,s)){var c=gs(a,s);return a=ts(a,a.next),c=ts(c,c.next),ns(a,t,n,r,i,o),void ns(c,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function ss(e,t){return e.x-t.x}function cs(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var c,u=n,l=n.x,h=n.y,d=1/0;r=n.next;for(;r!==u;)i>=r.x&&r.x>=l&&i!==r.x&&hs(o<h?i:a,o,l,h,o<h?a:i,o,r.x,r.y)&&((c=Math.abs(o-r.y)/(i-r.x))<d||c===d&&r.x>n.x)&&vs(r,e)&&(n=r,d=c),r=r.next;return n}(e,t)){var n=gs(t,e);ts(n,n.next)}}function us(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ls(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function hs(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function ds(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&ms(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&vs(e,t)&&vs(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function fs(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function ps(e,t){return e.x===t.x&&e.y===t.y}function ms(e,t,n,r){return!!(ps(e,t)&&ps(n,r)||ps(e,r)&&ps(n,t))||fs(e,t,n)>0!=fs(e,t,r)>0&&fs(n,r,e)>0!=fs(n,r,t)>0}function vs(e,t){return fs(e.prev,e,e.next)<0?fs(e,t,e.next)>=0&&fs(e,e.prev,t)>=0:fs(e,t,e.prev)<0||fs(e,e.next,t)<0}function gs(e,t){var n=new xs(e.i,e.x,e.y),r=new xs(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function ys(e,t,n,r){var i=new xs(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function bs(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function xs(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var ws={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return ws.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];_s(e),Ss(n,e);var o=e.length;t.forEach(_s);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,Ss(n,t[a]);var s=$a.triangulate(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function _s(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Ss(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function Ms(){this.type="ShapePath",this.color=new v,this.subPaths=[],this.currentPath=null}Object.assign(Ms.prototype,{moveTo:function(e,t){this.currentPath=new Za,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new Ka;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],c=s.x-a.x,u=s.y-a.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(a=t[o],c=-c,s=t[i],u=-u),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var l=u*(e.x-a.x)-c*(e.y-a.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=ws.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,c,u=[];if(1===o.length)return s=o[0],(c=new Ka).curves=s.curves,u.push(c),u;var l=!i(o[0].getPoints());l=e?!l:l;var h,d,f=[],p=[],m=[],v=0;p[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=i(h=(s=o[g]).getPoints()),(a=e?!a:a)?(!l&&p[v]&&v++,p[v]={s:new Ka,p:h},p[v].s.curves=s.curves,l&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!p[0])return n(o);if(p.length>1){for(var b=!1,x=[],w=0,_=p.length;w<_;w++)f[w]=[];for(w=0,_=p.length;w<_;w++)for(var S=m[w],M=0;M<S.length;M++){for(var T=S[M],A=!0,E=0;E<p.length;E++)r(T.p,p[E].p)&&(w!==E&&x.push({froms:w,tos:E,hole:M}),A?(A=!1,f[E].push(T)):b=!0);A&&f[w].push(T)}x.length>0&&(b||(m=f))}g=0;for(var C=p.length;g<C;g++){c=p[g].s,u.push(c);for(var P=0,L=(d=m[g]).length;P<L;P++)c.holes.push(d[P].h)}return u}});var Ts=function(e){this.manager=void 0!==e?e:cr};Ts.prototype={constructor:Ts,load:function(e,t,n,r){var i=this;new lr(i.manager).load(e,function(e){t(i.parse(e))},n,r)},parse:function(e){function t(e,t,r,i,o,a,s,c){i=i*Math.PI/180,t=Math.abs(t),r=Math.abs(r);var u=(s.x-c.x)/2,l=(s.y-c.y)/2,h=Math.cos(i)*u+Math.sin(i)*l,d=-Math.sin(i)*u+Math.cos(i)*l,f=t*t,p=r*r,m=h*h,v=d*d,g=m/f+v/p;if(g>1){var y=Math.sqrt(g);f=(t*=y)*t,p=(r*=y)*r}var b=f*v+p*m,x=(f*p-b)/b,w=Math.sqrt(Math.max(0,x));o===a&&(w=-w);var _=w*t*d/r,S=-w*r*h/t,M=Math.cos(i)*_-Math.sin(i)*S+(s.x+c.x)/2,T=Math.sin(i)*_+Math.cos(i)*S+(s.y+c.y)/2,A=n(1,0,(h-_)/t,(d-S)/r),E=n((h-_)/t,(d-S)/r,(-h-_)/t,(-d-S)/r)%(2*Math.PI);e.currentPath.absellipse(M,T,t,r,A,A+E,0===a,i)}function n(e,t,n,r){var i=e*n+t*r,o=Math.sqrt(e*e+t*t)*Math.sqrt(n*n+r*r),a=Math.acos(Math.max(-1,Math.min(1,i/o)));return e*r-t*n<0&&(a=-a),a}function r(e,t){return t=Object.assign({},t),e.hasAttribute("fill")&&(t.fill=e.getAttribute("fill")),""!==e.style.fill&&(t.fill=e.style.fill),t}function i(e){return"none"!==e.fill&&"transparent"!==e.fill}function o(e,t){return e-(t-e)}function a(e){for(var t=e.split(/[\s,]+|(?=\s?[+\-])/),n=0;n<t.length;n++){var r=t[n];if(r.indexOf(".")!==r.lastIndexOf("."))for(var i=r.split("."),o=2;o<i.length;o++)t.splice(n+o-1,0,"0."+i[o]);t[n]=parseFloat(r)}return t}function c(e){var t=e.elements;return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function u(e){var t=e.elements;return Math.sqrt(t[3]*t[3]+t[4]*t[4])}console.log("SVGLoader");var l=[],h=[],f=new d,p=new d,m=new d,v=new d;console.time("SVGLoader: DOMParser");var g=(new DOMParser).parseFromString(e,"image/svg+xml");return console.timeEnd("SVGLoader: DOMParser"),console.time("SVGLoader: Parse"),function e(n,g){if(1===n.nodeType){var y=function(e){if(!e.hasAttribute("transform"))return null;var t=function(e){var t=e.getAttribute("transform"),n=null,r=t.indexOf("("),i=t.indexOf(")");if(r>0&&r<i){var o=t.substr(0,r),s=a(t.substr(r+1,i-r-1));switch(o){case"translate":if(s.length>=1){n=new d;var c=s[0],u=c;s.length>=2&&(u=s[1]),n.translate(c,u)}break;case"rotate":if(s.length>=1){var l=0,h=0,v=0;n=new d,l=-s[0]*Math.PI/180,s.length>=3&&(h=s[1],v=s[2]),f.identity().translate(-h,-v),p.identity().rotate(l),m.multiplyMatrices(p,f),f.identity().translate(h,v),n.multiplyMatrices(f,m)}break;case"scale":if(s.length>=1){n=new d;var g=s[0],y=g;s.length>=2&&(y=s[1]),n.scale(g,y)}break;case"skewX":1===s.length&&(n=new d).set(1,Math.tan(s[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===s.length&&(n=new d).set(1,0,0,Math.tan(s[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===s.length&&(n=new d).set(s[0],s[2],s[4],s[1],s[3],s[5],0,0,1)}}return n}(e);return t&&(h.length>0&&t.premultiply(h[h.length-1]),v.copy(t),h.push(t)),t}(n),b=null;switch(n.nodeName){case"svg":break;case"g":g=r(n,g);break;case"path":g=r(n,g),n.hasAttribute("d")&&i(g)&&(b=function(e,n){var r=new Ms;r.color.setStyle(n.fill);for(var i=new x,s=new x,c=new x,u=!0,l=!1,h=e.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi),d=0,f=h.length;d<f;d++){var p=h[d],m=p.charAt(0),v=p.substr(1).trim();switch(u&&(l=!0),u=!1,m){case"M":for(var g=a(v),y=0,b=g.length;y<b;y+=2)i.x=g[y+0],i.y=g[y+1],s.x=i.x,s.y=i.y,0===y?r.moveTo(i.x,i.y):r.lineTo(i.x,i.y);break;case"H":for(var g=a(v),y=0,b=g.length;y<b;y++)i.x=g[y],s.x=i.x,s.y=i.y,r.lineTo(i.x,i.y);break;case"V":for(var g=a(v),y=0,b=g.length;y<b;y++)i.y=g[y],s.x=i.x,s.y=i.y,r.lineTo(i.x,i.y);break;case"L":for(var g=a(v),y=0,b=g.length;y<b;y+=2)i.x=g[y+0],i.y=g[y+1],s.x=i.x,s.y=i.y,r.lineTo(i.x,i.y);break;case"C":for(var g=a(v),y=0,b=g.length;y<b;y+=6)r.bezierCurveTo(g[y+0],g[y+1],g[y+2],g[y+3],g[y+4],g[y+5]),s.x=g[y+2],s.y=g[y+3],i.x=g[y+4],i.y=g[y+5];break;case"S":for(var g=a(v),y=0,b=g.length;y<b;y+=4)r.bezierCurveTo(o(i.x,s.x),o(i.y,s.y),g[y+0],g[y+1],g[y+2],g[y+3]),s.x=g[y+0],s.y=g[y+1],i.x=g[y+2],i.y=g[y+3];break;case"Q":for(var g=a(v),y=0,b=g.length;y<b;y+=4)r.quadraticCurveTo(g[y+0],g[y+1],g[y+2],g[y+3]),s.x=g[y+0],s.y=g[y+1],i.x=g[y+2],i.y=g[y+3];break;case"T":for(var g=a(v),y=0,b=g.length;y<b;y+=2){var w=o(i.x,s.x),_=o(i.y,s.y);r.quadraticCurveTo(w,_,g[y+0],g[y+1]),s.x=w,s.y=_,i.x=g[y+0],i.y=g[y+1]}break;case"A":for(var g=a(v),y=0,b=g.length;y<b;y+=7){var S=i.clone();i.x=g[y+5],i.y=g[y+6],s.x=i.x,s.y=i.y,t(r,g[y],g[y+1],g[y+2],g[y+3],g[y+4],S,i)}break;case"m":for(var g=a(v),y=0,b=g.length;y<b;y+=2)i.x+=g[y+0],i.y+=g[y+1],s.x=i.x,s.y=i.y,0===y?r.moveTo(i.x,i.y):r.lineTo(i.x,i.y);break;case"h":for(var g=a(v),y=0,b=g.length;y<b;y++)i.x+=g[y],s.x=i.x,s.y=i.y,r.lineTo(i.x,i.y);break;case"v":for(var g=a(v),y=0,b=g.length;y<b;y++)i.y+=g[y],s.x=i.x,s.y=i.y,r.lineTo(i.x,i.y);break;case"l":for(var g=a(v),y=0,b=g.length;y<b;y+=2)i.x+=g[y+0],i.y+=g[y+1],s.x=i.x,s.y=i.y,r.lineTo(i.x,i.y);break;case"c":for(var g=a(v),y=0,b=g.length;y<b;y+=6)r.bezierCurveTo(i.x+g[y+0],i.y+g[y+1],i.x+g[y+2],i.y+g[y+3],i.x+g[y+4],i.y+g[y+5]),s.x=i.x+g[y+2],s.y=i.y+g[y+3],i.x+=g[y+4],i.y+=g[y+5];break;case"s":for(var g=a(v),y=0,b=g.length;y<b;y+=4)r.bezierCurveTo(o(i.x,s.x),o(i.y,s.y),i.x+g[y+0],i.y+g[y+1],i.x+g[y+2],i.y+g[y+3]),s.x=i.x+g[y+0],s.y=i.y+g[y+1],i.x+=g[y+2],i.y+=g[y+3];break;case"q":for(var g=a(v),y=0,b=g.length;y<b;y+=4)r.quadraticCurveTo(i.x+g[y+0],i.y+g[y+1],i.x+g[y+2],i.y+g[y+3]),s.x=i.x+g[y+0],s.y=i.y+g[y+1],i.x+=g[y+2],i.y+=g[y+3];break;case"t":for(var g=a(v),y=0,b=g.length;y<b;y+=2){var w=o(i.x,s.x),_=o(i.y,s.y);r.quadraticCurveTo(w,_,i.x+g[y+0],i.y+g[y+1]),s.x=w,s.y=_,i.x=i.x+g[y+0],i.y=i.y+g[y+1]}break;case"a":for(var g=a(v),y=0,b=g.length;y<b;y+=7){var S=i.clone();i.x+=g[y+5],i.y+=g[y+6],s.x=i.x,s.y=i.y,t(r,g[y],g[y+1],g[y+2],g[y+3],g[y+4],S,i)}break;case"Z":case"z":r.currentPath.autoClose=!0,r.currentPath.curves.length>0&&(i.copy(c),r.currentPath.currentPoint.copy(i),u=!0);break;default:console.warn(p)}l&&(c.copy(i),l=!1)}return r}(n,g));break;case"rect":i(g=r(n,g))&&(b=function(e,t){var n=parseFloat(e.getAttribute("x")||0),r=parseFloat(e.getAttribute("y")||0),i=parseFloat(e.getAttribute("rx")||0),o=parseFloat(e.getAttribute("ry")||0),a=parseFloat(e.getAttribute("width")),s=parseFloat(e.getAttribute("height")),c=new Ms;return c.color.setStyle(t.fill),c.moveTo(n+2*i,r),c.lineTo(n+a-2*i,r),(0!==i||0!==o)&&c.bezierCurveTo(n+a,r,n+a,r,n+a,r+2*o),c.lineTo(n+a,r+s-2*o),(0!==i||0!==o)&&c.bezierCurveTo(n+a,r+s,n+a,r+s,n+a-2*i,r+s),c.lineTo(n+2*i,r+s),(0!==i||0!==o)&&c.bezierCurveTo(n,r+s,n,r+s,n,r+s-2*o),c.lineTo(n,r+2*o),(0!==i||0!==o)&&c.bezierCurveTo(n,r,n,r,n+2*i,r),c}(n,g));break;case"polygon":i(g=r(n,g))&&(b=function(e,t){var n=new Ms;n.color.setStyle(t.fill);var r=0;return e.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,function(e,t,i){var o=parseFloat(t),a=parseFloat(i);0===r?n.moveTo(o,a):n.lineTo(o,a),r++}),n.currentPath.autoClose=!0,n}(n,g));break;case"polyline":i(g=r(n,g))&&(b=function(e,t){var n=new Ms;n.color.setStyle(t.fill);var r=0;return e.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,function(e,t,i){var o=parseFloat(t),a=parseFloat(i);0===r?n.moveTo(o,a):n.lineTo(o,a),r++}),n.currentPath.autoClose=!1,n}(n,g));break;case"circle":i(g=r(n,g))&&(b=function(e,t){var n=parseFloat(e.getAttribute("cx")),r=parseFloat(e.getAttribute("cy")),i=parseFloat(e.getAttribute("r")),o=new Za;o.absarc(n,r,i,0,2*Math.PI);var a=new Ms;return a.color.setStyle(t.fill),a.subPaths.push(o),a}(n,g));break;case"ellipse":i(g=r(n,g))&&(b=function(e,t){var n=parseFloat(e.getAttribute("cx")),r=parseFloat(e.getAttribute("cy")),i=parseFloat(e.getAttribute("rx")),o=parseFloat(e.getAttribute("ry")),a=new Za;a.absellipse(n,r,i,o,0,2*Math.PI);var s=new Ms;return s.color.setStyle(t.fill),s.subPaths.push(a),s}(n,g));break;case"line":i(g=r(n,g))&&(b=function(e,t){var n=parseFloat(e.getAttribute("x1")),r=parseFloat(e.getAttribute("y1")),i=parseFloat(e.getAttribute("x2")),o=parseFloat(e.getAttribute("y2")),a=new Ms;return a.moveTo(n,r),a.lineTo(i,o),a.currentPath.autoClose=!1,a}(n));break;default:console.log(n)}b&&(function(e,t){function n(e){o.set(e.x,e.y,1).applyMatrix3(t),e.set(o.x,o.y)}for(var r=function(e){return 0!==e.elements[1]||0!==e.elements[3]}(t),i=new x,o=new s,a=e.subPaths,l=0,h=a.length;l<h;l++)for(var d=a[l],f=d.curves,p=0;p<f.length;p++){var m=f[p];m.isLineCurve?(n(m.v1),n(m.v2)):m.isCubicBezierCurve?(n(m.v0),n(m.v1),n(m.v2),n(m.v3)):m.isQuadraticBezierCurve?(n(m.v0),n(m.v1),n(m.v2)):m.isEllipseCurve&&(r&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),i.set(m.aX,m.aY),n(i),m.aX=i.x,m.aY=i.y,m.xRadius*=c(t),m.yRadius*=u(t))}}(b,v),l.push(b));for(var w=n.childNodes,_=0;_<w.length;_++)e(w[_],g);y&&v.copy(h.pop())}}(g.documentElement,{fill:"#000"}),console.timeEnd("SVGLoader: Parse"),l}};var As=function(e){this.manager=void 0!==e?e:cr,this.debug=!1,this.group=null,this.position=0,this.materials=[],this.meshes=[]};As.prototype={constructor:As,load:function(e,t,n,r){var i=this,o=void 0!==this.path?this.path:Cr.extractUrlBase(e),a=new lr(this.manager);a.setResponseType("arraybuffer"),a.load(e,function(e){t(i.parse(e,o))},n,r)},parse:function(e,t){this.group=new oo,this.position=0,this.materials=[],this.meshes=[],this.readFile(e,t);for(var n=0;n<this.meshes.length;n++)this.group.add(this.meshes[n]);return this.group},readFile:function(e,t){var n=new DataView(e),r=this.readChunk(n);if(r.id===Cs||r.id===Ps||r.id===Es)for(var i=this.nextChunk(n,r);0!==i;){if(i===Ls){var o=this.readDWord(n);this.debugMessage("3DS file version: "+o)}else i===Ds?(this.resetPosition(n),this.readMeshData(n,t)):this.debugMessage("Unknown main chunk: "+i.toString(16));i=this.nextChunk(n,r)}this.debugMessage("Parsed "+this.meshes.length+" meshes")},readMeshData:function(e,t){for(var n=this.readChunk(e),r=this.nextChunk(e,n);0!==r;){if(r===Fs){var i=+this.readDWord(e);this.debugMessage("Mesh Version: "+i)}else if(r===ks){var o=this.readFloat(e);this.debugMessage("Master scale: "+o),this.group.scale.set(o,o,o)}else r===rc?(this.debugMessage("Named Object"),this.resetPosition(e),this.readNamedObject(e)):r===Us?(this.debugMessage("Material"),this.resetPosition(e),this.readMaterialEntry(e,t)):this.debugMessage("Unknown MDATA chunk: "+r.toString(16));r=this.nextChunk(e,n)}},readNamedObject:function(e){var t=this.readChunk(e),n=this.readString(e,64);t.cur=this.position;for(var r=this.nextChunk(e,t);0!==r;){if(r===ic){this.resetPosition(e);var i=this.readMesh(e);i.name=n,this.meshes.push(i)}else this.debugMessage("Unknown named object chunk: "+r.toString(16));r=this.nextChunk(e,t)}this.endChunk(t)},readMaterialEntry:function(e,t){for(var n=this.readChunk(e),r=this.nextChunk(e,n),i=new vr;0!==r;){if(r===Bs)i.name=this.readString(e,64),this.debugMessage("   Name: "+i.name);else if(r===Xs)this.debugMessage("   Wireframe"),i.wireframe=!0;else if(r===qs){var o=this.readByte(e);i.wireframeLinewidth=o,this.debugMessage("   Wireframe Thickness: "+o)}else if(r===Ws)i.side=J,this.debugMessage("   DoubleSided");else if(r===Hs)this.debugMessage("   Additive Blending"),i.blending=te;else if(r===js)this.debugMessage("   Diffuse Color"),i.color=this.readColor(e);else if(r===Vs)this.debugMessage("   Specular Color"),i.specular=this.readColor(e);else if(r===zs)this.debugMessage("   Ambient color"),i.color=this.readColor(e);else if(r===Gs){var a=this.readWord(e);i.shininess=a,this.debugMessage("   Shininess : "+a)}else r===Ys?(this.debugMessage("   ColorMap"),this.resetPosition(e),i.map=this.readMap(e,t)):r===Qs?(this.debugMessage("   BumpMap"),this.resetPosition(e),i.bumpMap=this.readMap(e,t)):r===Js?(this.debugMessage("   OpacityMap"),this.resetPosition(e),i.alphaMap=this.readMap(e,t)):r===Zs?(this.debugMessage("   SpecularMap"),this.resetPosition(e),i.specularMap=this.readMap(e,t)):this.debugMessage("   Unknown material chunk: "+r.toString(16));r=this.nextChunk(e,n)}this.endChunk(n),this.materials[i.name]=i},readMesh:function(e){var t=this.readChunk(e),n=this.nextChunk(e,t),r=new k,i=[],o=new fn(r,new vr);for(o.name="mesh";0!==n;){if(n===oc){var s=this.readWord(e);this.debugMessage("   Vertex: "+s);for(var c=[],u=0;u<s;u++)c.push(this.readFloat(e)),c.push(this.readFloat(e)),c.push(this.readFloat(e));r.addAttribute("position",new N(c,3))}else if(n===ac)this.resetPosition(e),this.readFaceArray(e,o);else if(n===cc){var l=this.readWord(e);this.debugMessage("   UV: "+l);for(i=[],u=0;u<l;u++)i.push(this.readFloat(e)),i.push(this.readFloat(e));r.addAttribute("uv",new N(i,2))}else if(n===uc){this.debugMessage("   Tranformation Matrix (TODO)");var h=[];for(u=0;u<12;u++)h[u]=this.readFloat(e);var d=new a;d.elements[0]=h[0],d.elements[1]=h[6],d.elements[2]=h[3],d.elements[3]=h[9],d.elements[4]=h[2],d.elements[5]=h[8],d.elements[6]=h[5],d.elements[7]=h[11],d.elements[8]=h[1],d.elements[9]=h[7],d.elements[10]=h[4],d.elements[11]=h[10],d.elements[12]=0,d.elements[13]=0,d.elements[14]=0,d.elements[15]=1,d.transpose();var f=new a;f.getInverse(d,!0),r.applyMatrix(f),d.decompose(o.position,o.quaternion,o.scale)}else this.debugMessage("   Unknown mesh chunk: "+n.toString(16));n=this.nextChunk(e,t)}return this.endChunk(t),r.computeVertexNormals(),o},readFaceArray:function(e,t){var n=this.readChunk(e),r=this.readWord(e);this.debugMessage("   Faces: "+r);for(var i=[],o=0;o<r;++o){i.push(this.readWord(e),this.readWord(e),this.readWord(e));this.readWord(e)}for(t.geometry.setIndex(i);this.position<n.end;){if((n=this.readChunk(e)).id===sc){this.debugMessage("      Material Group"),this.resetPosition(e);var a=this.readMaterialGroup(e),s=this.materials[a.name];void 0!==s&&(t.material=s,""===s.name&&(s.name=t.name))}else this.debugMessage("      Unknown face array chunk: "+n.toString(16));this.endChunk(n)}this.endChunk(n)},readMap:function(e,t){var n=this.readChunk(e),r=this.nextChunk(e,n),i={},o=new Ar(this.manager);for(o.setPath(t);0!==r;){if(r===Ks){var a=this.readString(e,128);i=o.load(a),this.debugMessage("      File: "+t+a)}else r===tc?(i.offset.x=this.readFloat(e),this.debugMessage("      OffsetX: "+i.offset.x)):r===nc?(i.offset.y=this.readFloat(e),this.debugMessage("      OffsetY: "+i.offset.y)):r===$s?(i.repeat.x=this.readFloat(e),this.debugMessage("      RepeatX: "+i.repeat.x)):r===ec?(i.repeat.y=this.readFloat(e),this.debugMessage("      RepeatY: "+i.repeat.y)):this.debugMessage("      Unknown map chunk: "+r.toString(16));r=this.nextChunk(e,n)}return this.endChunk(n),i},readMaterialGroup:function(e){this.readChunk(e);var t=this.readString(e,64),n=this.readWord(e);this.debugMessage("         Name: "+t),this.debugMessage("         Faces: "+n);for(var r=[],i=0;i<n;++i)r.push(this.readWord(e));return{name:t,index:r}},readColor:function(e){var t=this.readChunk(e),n=new v;if(t.id===Ns||t.id===Rs){var r=this.readByte(e),i=this.readByte(e),o=this.readByte(e);n.setRGB(r/255,i/255,o/255),this.debugMessage("      Color: "+n.r+", "+n.g+", "+n.b)}else if(t.id===Os||t.id===Is){r=this.readFloat(e),i=this.readFloat(e),o=this.readFloat(e);n.setRGB(r,i,o),this.debugMessage("      Color: "+n.r+", "+n.g+", "+n.b)}else this.debugMessage("      Unknown color chunk: "+t.toString(16));return this.endChunk(t),n},readChunk:function(e){var t={};return t.cur=this.position,t.id=this.readWord(e),t.size=this.readDWord(e),t.end=t.cur+t.size,t.cur+=6,t},endChunk:function(e){this.position=e.end},nextChunk:function(e,t){if(t.cur>=t.end)return 0;this.position=t.cur;try{var n=this.readChunk(e);return t.cur+=n.size,n.id}catch(e){return this.debugMessage("Unable to read chunk at "+this.position),0}},resetPosition:function(){this.position-=6},readByte:function(e){var t=e.getUint8(this.position,!0);return this.position+=1,t},readFloat:function(e){try{var t=e.getFloat32(this.position,!0);return this.position+=4,t}catch(t){this.debugMessage(t+" "+this.position+" "+e.byteLength)}},readInt:function(e){var t=e.getInt32(this.position,!0);return this.position+=4,t},readShort:function(e){var t=e.getInt16(this.position,!0);return this.position+=2,t},readDWord:function(e){var t=e.getUint32(this.position,!0);return this.position+=4,t},readWord:function(e){var t=e.getUint16(this.position,!0);return this.position+=2,t},readString:function(e,t){for(var n="",r=0;r<t;r++){var i=this.readByte(e);if(!i)break;n+=String.fromCharCode(i)}return n},setPath:function(e){return this.path=e,this},debugMessage:function(e){this.debug&&console.log(e)}};var Es=19789,Cs=15786,Ps=49725,Ls=2,Os=16,Ns=17,Rs=18,Is=19,Ds=15677,Fs=15678,ks=256,Us=45055,Bs=40960,zs=40976,js=40992,Vs=41008,Gs=41024,Ws=41089,Hs=41091,Xs=41093,qs=41095,Ys=41472,Js=41488,Qs=41520,Zs=41476,Ks=41728,$s=41812,ec=41814,tc=41816,nc=41818,rc=16384,ic=16640,oc=16656,ac=16672,sc=16688,cc=16704,uc=16736,lc=function(e){this.manager=void 0!==e?e:cr,this.reversed=!1};lc.prototype={constructor:lc,load:function(e,t,n,r){var i=this,o=new lr(this.manager);o.setResponseType("arraybuffer"),o.load(e,function(e){t(i.parse(e))},n,r)},parse:function(e){function t(e){var t,n=[];e.forEach(function(e){"m"===e.type.toLowerCase()?(t=[e],n.push(t)):"z"!==e.type.toLowerCase()&&t.push(e)});var r=[];return n.forEach(function(e){var t={type:"m",x:e[e.length-1].x,y:e[e.length-1].y};r.push(t);for(var n=e.length-1;n>0;n--){var i=e[n];t={type:i.type};void 0!==i.x2&&void 0!==i.y2?(t.x1=i.x2,t.y1=i.y2,t.x2=i.x1,t.y2=i.y1):void 0!==i.x1&&void 0!==i.y1&&(t.x1=i.x1,t.y1=i.y1),t.x=e[n-1].x,t.y=e[n-1].y,r.push(t)}}),r}return"undefined"==typeof opentype?(console.warn("TTFLoader: The loader requires opentype.js. Make sure it's included before using the loader."),null):function(e,n){for(var r=Math.round,i={},o=1e5/(72*(e.unitsPerEm||2048)),a=0;a<e.glyphs.length;a++){var s=e.glyphs.glyphs[a];if(void 0!==s.unicode){var c={ha:r(s.advanceWidth*o),x_min:r(s.xMin*o),x_max:r(s.xMax*o),o:""};n&&(s.path.commands=t(s.path.commands)),s.path.commands.forEach(function(e,t){"c"===e.type.toLowerCase()&&(e.type="b"),c.o+=e.type.toLowerCase()+" ",void 0!==e.x&&void 0!==e.y&&(c.o+=r(e.x*o)+" "+r(e.y*o)+" "),void 0!==e.x1&&void 0!==e.y1&&(c.o+=r(e.x1*o)+" "+r(e.y1*o)+" "),void 0!==e.x2&&void 0!==e.y2&&(c.o+=r(e.x2*o)+" "+r(e.y2*o)+" ")}),i[String.fromCharCode(s.unicode)]=c}}return{glyphs:i,familyName:e.familyName,ascender:r(e.ascender*o),descender:r(e.descender*o),underlinePosition:e.tables.post.underlinePosition,underlineThickness:e.tables.post.underlineThickness,boundingBox:{xMin:e.tables.head.xMin,xMax:e.tables.head.xMax,yMin:e.tables.head.yMin,yMax:e.tables.head.yMax},resolution:1e3,original_font_information:e.tables.name}}(opentype.parse(e),this.reversed)}};var hc=function(e){this.manager=void 0!==e?e:cr};hc.prototype={constructor:hc,isRecordingPoints:!1,isRecordingFaces:!1,points:[],indexes:[],isRecordingAngles:!1,isRecordingColors:!1,angles:[],colors:[],recordingFieldname:null,crossOrigin:"anonymous",load:function(e,t,n,r){var i=this;new lr(this.manager).load(e,function(e){t(i.parse(e))},n,r)},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e){var t=this,n=this.texturePath||"",r=new Ar(this.manager);r.setCrossOrigin(this.crossOrigin);for(var i=new Yn,o=e.split("\n"),a=o.length-1;a>-1;a--){var c=o[a];if(/{.*[{\[]/.test(c))(u=c.split("{").join("{\n").split("\n")).unshift(1),u.unshift(a),o.splice.apply(o,u);else if(/\].*}/.test(c)){var u;(u=c.split("]").join("]\n").split("\n")).unshift(1),u.unshift(a),o.splice.apply(o,u)}if(/}.*}/.test(c))(u=c.split("}").join("}\n").split("\n")).unshift(1),u.unshift(a),o.splice.apply(o,u);/^\b[^\s]+\b$/.test(c.trim())?(o[a+1]=c+" "+o[a+1].trim(),o.splice(a,1)):c.indexOf("coord")>-1&&c.indexOf("[")<0&&c.indexOf("{")<0&&(o[a]+=" Coordinate {}")}var l=o.shift();return/V1.0/.exec(l)?console.warn("VRMLLoader: V1.0 not supported yet."):/V2.0/.exec(l)&&function(e,i){var o={},a=/(\b|\-|\+)([\d\.e]+)/,c=/([\d\.\+\-e]+)\s+([\d\.\+\-e]+)/g,u=/([\d\.\+\-e]+)\s+([\d\.\+\-e]+)\s+([\d\.\+\-e]+)/g;function l(e,t,n,r,i){for(var o=!0===i?1:-1,a=[],c={},u={},l=0;l<n.length;l++){var h={x:o*(Math.cos(n[l])*t),y:o*(Math.sin(n[l])*t)};a.push(h)}for(var d=e.index,f=e.attributes.position,p=new M(new Float32Array(3*e.attributes.position.count),3),m=new s,g=new v,y=0;y<d.count;y++){var b=d.getX(y);m.fromBufferAttribute(f,b);for(var x=0;x<r.length;x++)if(0===x?(c.x=0,c.y=!0===i?t:-1*t):(c.x=a[x-1].x,c.y=a[x-1].y),void 0!==(u=a[x]))if(!0==(!0===i?m.y<=c.y&&m.y>u.y:m.y>=c.y&&m.y<u.y)){var w=r[x],_=r[x+1],S=Math.abs(m.y-c.y)/(c.y-u.y);g.copy(w).lerp(_,S),p.setXYZ(b,g.r,g.g,g.b)}else{var T=r[!0===i?r.length-1:0];p.setXYZ(b,T.r,T.g,T.b)}}e.addAttribute("color",p)}var h=[];function d(e,n){for(var r,i,o,s=[],l={},d=/[^\s,\[\]]+/g;null!==(r=d.exec(n));)s.push(r[0]);switch(i=s[0]){case"skyAngle":case"groundAngle":t.recordingFieldname=i,t.isRecordingAngles=!0,t.angles=[];break;case"skyColor":case"groundColor":t.recordingFieldname=i,t.isRecordingColors=!0,t.colors=[];break;case"point":t.recordingFieldname=i,t.isRecordingPoints=!0,t.points=[];break;case"coordIndex":case"texCoordIndex":t.recordingFieldname=i,t.isRecordingFaces=!0,t.indexes=[]}if(t.isRecordingFaces){if(s.length>0)for(var f=0;f<s.length;f++)/(-?\d+)/.test(s[f])&&("-1"===s[f]?(h.length>0&&t.indexes.push(h),h=[]):h.push(parseInt(s[f])));/]/.exec(n)&&(h.length>0&&t.indexes.push(h),h=[],t.isRecordingFaces=!1,e[t.recordingFieldname]=t.indexes)}else if(t.isRecordingPoints){if("Coordinate"==e.nodeType)for(;null!==(s=u.exec(n));)o={x:parseFloat(s[1]),y:parseFloat(s[2]),z:parseFloat(s[3])},t.points.push(o);if("TextureCoordinate"==e.nodeType)for(;null!==(s=c.exec(n));)o={x:parseFloat(s[1]),y:parseFloat(s[2])},t.points.push(o);/]/.exec(n)&&(t.isRecordingPoints=!1,e.points=t.points)}else if(t.isRecordingAngles){if(s.length>0)for(f=0;f<s.length;f++)a.test(s[f])&&t.angles.push(parseFloat(s[f]));/]/.exec(n)&&(t.isRecordingAngles=!1,e[t.recordingFieldname]=t.angles)}else if(t.isRecordingColors){for(;null!==(s=u.exec(n));){var p={r:parseFloat(s[1]),g:parseFloat(s[2]),b:parseFloat(s[3])};t.colors.push(p)}/]/.exec(n)&&(t.isRecordingColors=!1,e[t.recordingFieldname]=t.colors)}else if("NULL"!==s[s.length-1]&&"children"!==i){switch(i){case"diffuseColor":case"emissiveColor":case"specularColor":case"color":if(4!==s.length){console.warn("VRMLLoader: Invalid color format detected for %s.",i);break}l={r:parseFloat(s[1]),g:parseFloat(s[2]),b:parseFloat(s[3])};break;case"location":case"direction":case"translation":case"scale":case"size":if(4!==s.length){console.warn("VRMLLoader: Invalid vector format detected for %s.",i);break}l={x:parseFloat(s[1]),y:parseFloat(s[2]),z:parseFloat(s[3])};break;case"intensity":case"cutOffAngle":case"radius":case"topRadius":case"bottomRadius":case"height":case"transparency":case"shininess":case"ambientIntensity":if(2!==s.length){console.warn("VRMLLoader: Invalid single float value specification detected for %s.",i);break}l=parseFloat(s[1]);break;case"rotation":if(5!==s.length){console.warn("VRMLLoader: Invalid quaternion format detected for %s.",i);break}l={x:parseFloat(s[1]),y:parseFloat(s[2]),z:parseFloat(s[3]),w:parseFloat(s[4])};break;case"on":case"ccw":case"solid":case"colorPerVertex":case"convex":if(2!==s.length){console.warn("VRMLLoader: Invalid format detected for %s.",i);break}l="TRUE"===s[1]}e[i]=l}return l}!function e(t,a){var c;if("string"!=typeof t){c=a,t.string.indexOf("AmbientLight")>-1&&"PointLight"===t.nodeType&&(t.nodeType="AmbientLight");var u=void 0===t.on||t.on,h=void 0!==t.intensity?t.intensity:1,d=new v;if(t.color&&d.copy(t.color),"AmbientLight"===t.nodeType)(c=new Ao(d,h)).visible=u,a.add(c);else if("PointLight"===t.nodeType){var f=0;void 0!==t.radius&&t.radius<1e3&&(f=t.radius),(c=new yo(d,h,f)).visible=u,a.add(c)}else if("SpotLight"===t.nodeType){h=1,f=0;var m=Math.PI/3;u=!0,void 0!==t.radius&&t.radius<1e3&&(f=t.radius),void 0!==t.cutOffAngle&&(m=t.cutOffAngle),(c=new _o(d,h,f,m,0)).visible=u,a.add(c)}else if("Transform"===t.nodeType||"Group"===t.nodeType){if(c=new p,/DEF/.exec(t.string)&&(c.name=/DEF\s+([^\s]+)/.exec(t.string)[1],o[c.name]=c),void 0!==t.translation){var g=t.translation;c.position.set(g.x,g.y,g.z)}if(void 0!==t.rotation){var y=t.rotation;c.quaternion.setFromAxisAngle(new s(y.x,y.y,y.z),y.w)}if(void 0!==t.scale){var b=t.scale;c.scale.set(b.x,b.y,b.z)}a.add(c)}else if("Shape"===t.nodeType)c=new fn,/DEF/.exec(t.string)&&(c.name=/DEF\s+([^\s]+)/.exec(t.string)[1],o[c.name]=c),a.add(c);else if("Background"===t.nodeType){var w=2e4,_=new B(w,20,20),S=new un({fog:!1,side:Y});if(t.skyColor.length>1)l(_,w,t.skyAngle,t.skyColor,!0),S.vertexColors=K;else{var M=t.skyColor[0];S.color.setRGB(M.r,M.b,M.g)}if(i.add(new fn(_,S)),void 0!==t.groundColor){var T=new B(w=12e3,20,20,0,2*Math.PI,.5*Math.PI,1.5*Math.PI),A=new un({fog:!1,side:Y,vertexColors:K});l(T,w,t.groundAngle,t.groundColor,!1),i.add(new fn(T,A))}}else{if(/geometry/.exec(t.string)){if("Box"===t.nodeType)b=t.size,a.geometry=new Un(b.x,b.y,b.z);else if("Cylinder"===t.nodeType)a.geometry=new zn(t.radius,t.radius,t.height);else if("Cone"===t.nodeType)a.geometry=new zn(t.topRadius,t.bottomRadius,t.height);else if("Sphere"===t.nodeType)a.geometry=new B(t.radius);else if("IndexedFaceSet"===t.nodeType){var E,C,P,L,O,R=new k,I=[],D=[];for(X=0,P=t.children.length;X<P;X++){if("TextureCoordinate"===(q=t.children[X]).nodeType&&q.points)for(L=0,O=q.points.length;L<O;L++)C=q.points[L],D.push(C.x,C.y);if("Coordinate"===q.nodeType){if(q.points)for(L=0,O=q.points.length;L<O;L++)E=q.points[L],I.push(E.x,E.y,E.z);if(q.string.indexOf("DEF")>-1){var F=/DEF\s+([^\s]+)/.exec(q.string)[1];o[F]=I.slice(0)}q.string.indexOf("USE")>-1&&(ne=/USE\s+([^\s]+)/.exec(q.string)[1],I=o[ne])}}var U=0;if(t.coordIndex){var z=[],j=[];for(E=new s,C=new x,X=0,P=t.coordIndex.length;X<P;X++){var V=t.coordIndex[X];for(U=0;V.length>=3&&U<V.length-2;){void 0===t.ccw&&(t.ccw=!0);var G=V[0],W=V[U+(t.ccw?1:2)],H=V[U+(t.ccw?2:1)];E.fromArray(I,3*G),C.fromArray(D,2*G),z.push(E.x,E.y,E.z),j.push(C.x,C.y),E.fromArray(I,3*W),C.fromArray(D,2*W),z.push(E.x,E.y,E.z),j.push(C.x,C.y),E.fromArray(I,3*H),C.fromArray(D,2*H),z.push(E.x,E.y,E.z),j.push(C.x,C.y),U++}}I=z,D=j}else a.parent.remove(a);!1===t.solid&&(a.material.side=J),R.solid=t.solid,R.addAttribute("position",new N(I,3)),D.length>0&&R.addAttribute("uv",new N(D,2)),R.computeVertexNormals(),R.computeBoundingSphere(),/DEF/.exec(t.string)&&(R.name=/DEF ([^\s]+)/.exec(t.string)[1],o[R.name]=R),a.geometry=R}return}if(/appearance/.exec(t.string)){for(var X=0;X<t.children.length;X++){var q;if("Material"===(q=t.children[X]).nodeType){var Q=new vr;if(void 0!==q.diffuseColor){var Z=q.diffuseColor;Q.color.setRGB(Z.r,Z.g,Z.b)}if(void 0!==q.emissiveColor){var $=q.emissiveColor;Q.emissive.setRGB($.r,$.g,$.b)}void 0!==q.specularColor&&(b=q.specularColor,Q.specular.setRGB(b.r,b.g,b.b)),void 0!==q.transparency&&(g=q.transparency,Q.opacity=Math.abs(1-g),Q.transparent=!0),/DEF/.exec(t.string)&&(Q.name=/DEF ([^\s]+)/.exec(t.string)[1],o[Q.name]=Q),a.material=Q}if("ImageTexture"===q.nodeType){var ee=/"([^"]+)"/.exec(q.children[0]);ee&&(a.material.name=ee[1],a.material.map=r.load(n+ee[1]))}}return}}X=0;for(var te=t.children.length;X<te;X++)e(t.children[X],c)}else if(/USE/.exec(t)){var ne=/USE\s+?([^\s]+)/.exec(t)[1];void 0==o[ne]?console.warn("VRMLLoader: %s is not defined.",ne):/appearance/.exec(t)&&ne?a.material=o[ne].clone():/geometry/.exec(t)&&ne?(a.geometry=o[ne].clone(),void 0!==o[ne].solid&&!1===o[ne].solid&&(a.geometry.solid=!1,a.material.side=J)):ne&&(c=o[ne].clone(),a.add(c))}}(function(e){for(var t,n,r={string:"Scene",children:[]},i=r,o=0;o<e.length;o++){var a="",s=e[o];if(null===/^\s+?$/g.exec(s)&&""!==(s=s.trim())){if(/#/.exec(s)){var c=s.split("#");s=c[0],a=c[1]}if(t=/([^\s]*){1}(?:\s+)?{/.exec(s)){var u={nodeType:t[1],string:s,parent:i,children:[],comment:a};i.children.push(u),i=u,/}/.exec(s)&&(n=/{(.*)}/.exec(s)[1],u.children.push(n),d(i,n),i=i.parent)}else/}/.exec(s)?i=i.parent:""!==s&&(d(i,s),i.children.push(s))}}return r}(e),i)}(o,i),i}};var dc=function(){function e(e){if(void 0===Go)throw new Error("VRMLoader: Import GLTFLoader.");this.manager=void 0!==e?e:cr,this.gltfLoader=new Go(this.manager)}return e.prototype={constructor:e,crossOrigin:"anonymous",load:function(e,t,n,r){var i=this;this.gltfLoader.load(e,function(e){i.parse(e,t)},n,r)},setCrossOrigin:function(e){return this.glTFLoader.setCrossOrigin(e),this},setPath:function(e){return this.glTFLoader.setPath(e),this},setDRACOLoader:function(e){return this.glTFLoader.setDRACOLoader(e),this},parse:function(e,t){e.parser,(e.userData.gltfExtensions||{}).VRM;t(e)}},e}(),fc=function(e){this.manager=void 0!==e?e:cr};function pc(e){p.call(this),this.material=e,this.render=function(){}}Object.assign(fc.prototype,u.prototype,{load:function(e,t,n,r){var i=this,o=new lr(i.manager);o.setResponseType("arraybuffer"),o.load(e,function(e){t(i.parse(e))},n,r)},parse:function(e){function t(e,t){var n=e.length,r=new Float32Array(n+t.length);return r.set(e),r.set(t,n),r}function n(e,t){var n=e.length,r=new Int32Array(n+t.length);return r.set(e),r.set(t,n),r}function r(e){for(var t="",n=new Uint8Array(e),r=0,i=n.length;i--;)t+=String.fromCharCode(n[r++]);return t}var o=Cr.decodeText(new Uint8Array(e,0,250)).split("\n");return-1!==o[0].indexOf("xml")?function(e){function r(e){var t,n,r,i,o,a,s="undefined"!=typeof Uint8Array?Uint8Array:Array,c=[],u=[],l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=l.length;for(t=0;t<h;t++)c[t]=l[t];for(t=0;t<h;++t)u[l.charCodeAt(t)]=t;if(u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63,(h=e.length)%4>0)throw new Error("Invalid string. Length must be a multiple of 4");a=new s(3*h/4-(o="="===e[h-2]?2:"="===e[h-1]?1:0)),r=o>0?h-4:h;var d=0;for(t=0,n=0;t<r;t+=4,n+=3)i=u[e.charCodeAt(t)]<<18|u[e.charCodeAt(t+1)]<<12|u[e.charCodeAt(t+2)]<<6|u[e.charCodeAt(t+3)],a[d++]=(16711680&i)>>16,a[d++]=(65280&i)>>8,a[d++]=255&i;return 2===o?(i=u[e.charCodeAt(t)]<<2|u[e.charCodeAt(t+1)]>>4,a[d++]=255&i):1===o&&(i=u[e.charCodeAt(t)]<<10|u[e.charCodeAt(t+1)]<<4|u[e.charCodeAt(t+2)]>>2,a[d++]=i>>8&255,a[d++]=255&i),a}function o(e,i){var o=0;if("UInt64"===s.attributes.header_type?o=8:"UInt32"===s.attributes.header_type&&(o=4),"binary"===e.attributes.format&&i){var a,c,u,l,h,d;if("Float32"===e.attributes.type)var f=new Float32Array;else"Int64"===e.attributes.type&&(f=new Int32Array);c=(a=r(e["#text"]))[0];for(var p=1;p<o-1;p++)c|=a[p]<<p*o;for(l=(c+3)*o,d=l+=l%3>0?3-l%3:0,(h=[]).push(d),u=3*o,p=0;p<c;p++){for(var m=a[p*o+u],v=1;v<o-1;v++)m|=a[p*o+u+v]<<8*v;d+=m,h.push(d)}for(p=0;p<h.length-1;p++)g=(g=new Zlib.Inflate(a.slice(h[p],h[p+1]),{resize:!0,verify:!0}).decompress()).buffer,"Float32"===e.attributes.type?f=t(f,g=new Float32Array(g)):"Int64"===e.attributes.type&&(f=n(f,g=new Int32Array(g)));delete e["#text"],"Float32"===e.attributes.type?"binary"===e.attributes.format&&(i||(f=f.filter(function(e,t){if(0!==t)return!0}))):"Int64"===e.attributes.type&&"binary"===e.attributes.format&&(i||(f=f.filter(function(e,t){if(0!==t)return!0})),f=f.filter(function(e,t){if(t%2!=1)return!0}))}else{if("binary"!==e.attributes.format||i)if(e["#text"])var g=e["#text"].split(/\s+/).filter(function(e){if(""!==e)return e});else g=new Int32Array(0).buffer;else g=(g=r(e["#text"])).slice(o).buffer;delete e["#text"],"Float32"===e.attributes.type?f=new Float32Array(g):"Int32"===e.attributes.type?f=new Int32Array(g):"Int64"===e.attributes.type&&(f=new Int32Array(g),"binary"===e.attributes.format&&(f=f.filter(function(e,t){if(t%2!=1)return!0})))}return f}var a=null;if(i.DOMParser)try{a=(new DOMParser).parseFromString(e,"text/xml")}catch(e){a=null}else{if(!i.ActiveXObject)throw new Error("Cannot parse xml string!");try{if((a=new ActiveXObject("Microsoft.XMLDOM")).async=!1,!a.loadXML())throw new Error(a.parseError.reason+a.parseError.srcText)}catch(e){a=null}}var s=function e(t){var n={};if(1===t.nodeType){if(t.attributes&&t.attributes.length>0){n.attributes={};for(var r=0;r<t.attributes.length;r++){var i=t.attributes.item(r);n.attributes[i.nodeName]=i.nodeValue.trim()}}}else 3===t.nodeType&&(n=t.nodeValue.trim());if(t.hasChildNodes())for(var o=0;o<t.childNodes.length;o++){var a=t.childNodes.item(o),s=a.nodeName;if(void 0===n[s])""!==(u=e(a))&&(n[s]=u);else{if(void 0===n[s].push){var c=n[s];n[s]=[c]}var u;""!==(u=e(a))&&n[s].push(u)}}return n}(a.documentElement),c=[],u=[],l=[];if(s.PolyData){for(var h=s.PolyData.Piece,d=s.attributes.hasOwnProperty("compressor"),f=["PointData","Points","Strips","Polys"],p=0,m=f.length;p<m;){var v=h[f[p]];if(v&&v.DataArray){if("[object Array]"===Object.prototype.toString.call(v.DataArray))var g=v.DataArray;else g=[v.DataArray];for(var y=0,b=g.length;y<b;)"#text"in g[y]&&g[y]["#text"].length>0&&(g[y].text=o(g[y],d)),y++;switch(f[p]){case"PointData":var x=parseInt(h.attributes.NumberOfPoints),w=v.attributes.Normals;if(x>0)for(var _=0,S=g.length;_<S;_++)if(w===g[_].attributes.Name){var T=g[_].attributes.NumberOfComponents;(u=new Float32Array(x*T)).set(g[_].text,0)}break;case"Points":(x=parseInt(h.attributes.NumberOfPoints))>0&&(T=v.DataArray.attributes.NumberOfComponents,(c=new Float32Array(x*T)).set(v.DataArray.text,0));break;case"Strips":var A=parseInt(h.attributes.NumberOfStrips);if(A>0){var E=new Int32Array(v.DataArray[0].text.length),C=new Int32Array(v.DataArray[1].text.length);E.set(v.DataArray[0].text,0),C.set(v.DataArray[1].text,0);var P=A+E.length;l=new Uint32Array(3*P-9*A);var L=0;for(_=0,S=A;_<S;_++){for(var O=[],N=0,R=C[_],I=0;N<R-I;N++)O.push(E[N]),_>0&&(I=C[_-1]);var D=0;for(R=C[_],I=0;D<R-I-2;D++)D%2?(l[L++]=O[D],l[L++]=O[D+2],l[L++]=O[D+1]):(l[L++]=O[D],l[L++]=O[D+1],l[L++]=O[D+2]),_>0&&(I=C[_-1])}}break;case"Polys":var F=parseInt(h.attributes.NumberOfPolys);if(F>0){E=new Int32Array(v.DataArray[0].text.length),C=new Int32Array(v.DataArray[1].text.length),E.set(v.DataArray[0].text,0),C.set(v.DataArray[1].text,0),P=F+E.length,l=new Uint32Array(3*P-9*F),L=0;var U=0;for(_=0,S=F,I=0;_<S;){var B=[];for(N=0,R=C[_];N<R-I;)B.push(E[U++]),N++;for(D=1;D<R-I-1;)l[L++]=B[0],l[L++]=B[D],l[L++]=B[D+1],D++;I=C[++_-1]}}}}p++}var z=new k;return z.setIndex(new M(l,1)),z.addAttribute("position",new M(c,3)),u.length===c.length&&z.addAttribute("normal",new M(u,3)),z}}(r(e)):o[2].includes("ASCII")?function(e){var t,n=[],r=[],i=[],o=[],a=/(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)/g,s=/^(\d+)\s+([\s\d]*)/,c=/^POINTS /,u=/^POLYGONS /,l=/^TRIANGLE_STRIPS /,h=/^POINT_DATA[ ]+(\d+)/,d=/^CELL_DATA[ ]+(\d+)/,f=/^COLOR_SCALARS[ ]+(\w+)[ ]+3/,p=/^NORMALS[ ]+(\w+)[ ]+(\w+)/,m=!1,v=!1,g=!1,y=!1,b=!1,x=!1,w=!1,_=e.split("\n");for(var S in _){var M=_[S];if(m)for(;null!==(t=a.exec(M));){var T=parseFloat(t[1]),A=parseFloat(t[2]),E=parseFloat(t[3]);r.push(T,A,E)}else if(v){if(null!==(t=s.exec(M))){var C=parseInt(t[1]),P=t[2].split(/\s+/);if(C>=3)for(var L=parseInt(P[0]),O=1,R=0;R<C-2;++R)I=parseInt(P[O]),D=parseInt(P[O+1]),n.push(L,I,D),O++}}else if(g){if(null!==(t=s.exec(M))){var I,D;if(C=parseInt(t[1]),P=t[2].split(/\s+/),C>=3)for(R=0;R<C-2;R++)R%2==1?(L=parseInt(P[R]),I=parseInt(P[R+2]),D=parseInt(P[R+1]),n.push(L,I,D)):(L=parseInt(P[R]),I=parseInt(P[R+1]),D=parseInt(P[R+2]),n.push(L,I,D))}}else if(y||b)if(x)for(;null!==(t=a.exec(M));){var F=parseFloat(t[1]),U=parseFloat(t[2]),B=parseFloat(t[3]);i.push(F,U,B)}else if(w)for(;null!==(t=a.exec(M));){var z=parseFloat(t[1]),j=parseFloat(t[2]),V=parseFloat(t[3]);o.push(z,j,V)}null!==u.exec(M)?(v=!0,m=!1,g=!1):null!==c.exec(M)?(v=!1,m=!0,g=!1):null!==l.exec(M)?(v=!1,m=!1,g=!0):null!==h.exec(M)?(y=!0,m=!1,v=!1,g=!1):null!==d.exec(M)?(b=!0,m=!1,v=!1,g=!1):null!==f.exec(M)?(x=!0,w=!1,m=!1,v=!1,g=!1):null!==p.exec(M)&&(w=!0,x=!1,m=!1,v=!1,g=!1)}var G=new k;if(G.setIndex(n),G.addAttribute("position",new N(r,3)),o.length===r.length&&G.addAttribute("normal",new N(o,3)),i.length!==n.length)i.length===r.length&&G.addAttribute("color",new N(i,3));else{var W=(G=G.toNonIndexed()).attributes.position.count/3;if(i.length===3*W){var H=[];for(S=0;S<W;S++)F=i[3*S+0],U=i[3*S+1],B=i[3*S+2],H.push(F,U,B),H.push(F,U,B),H.push(F,U,B);G.addAttribute("color",new N(H,3))}}return G}(r(e)):function(e){var t,n,r,i,o,a,s,c=new Uint8Array(e),u=new DataView(e),l=[],h=[],d=[],f=0;function p(e,t){for(var n=t,r=e[n],i=[];10!==r;)i.push(String.fromCharCode(r)),r=e[++n];return{start:t,end:n,next:n+1,parsedString:i.join("")}}for(;;){if(0===(s=(a=p(c,f)).parsedString).indexOf("POINTS")){for(t=4*(i=parseInt(s.split(" ")[1],10))*3,l=new Float32Array(3*i),n=a.next,r=0;r<i;r++)l[3*r]=u.getFloat32(n,!1),l[3*r+1]=u.getFloat32(n+4,!1),l[3*r+2]=u.getFloat32(n+8,!1),n+=12;a.next=a.next+t+1}else if(0===s.indexOf("TRIANGLE_STRIPS")){var m=parseInt(s.split(" ")[1],10);t=4*(x=parseInt(s.split(" ")[2],10)),d=new Uint32Array(3*x-9*m);var v=0;for(n=a.next,r=0;r<m;r++){var g=u.getInt32(n,!1),y=[];for(n+=4,o=0;o<g;o++)y.push(u.getInt32(n,!1)),n+=4;for(var b=0;b<g-2;b++)b%2?(d[v++]=y[b],d[v++]=y[b+2],d[v++]=y[b+1]):(d[v++]=y[b],d[v++]=y[b+1],d[v++]=y[b+2])}a.next=a.next+t+1}else if(0===s.indexOf("POLYGONS")){var x;for(m=parseInt(s.split(" ")[1],10),t=4*(x=parseInt(s.split(" ")[2],10)),d=new Uint32Array(3*x-9*m),v=0,n=a.next,r=0;r<m;r++){for(g=u.getInt32(n,!1),y=[],n+=4,o=0;o<g;o++)y.push(u.getInt32(n,!1)),n+=4;for(b=1;b<g-1;b++)d[v++]=y[0],d[v++]=y[b],d[v++]=y[b+1]}a.next=a.next+t+1}else if(0===s.indexOf("POINT_DATA")){for(i=parseInt(s.split(" ")[1],10),a=p(c,a.next),t=4*i*3,h=new Float32Array(3*i),n=a.next,r=0;r<i;r++)h[3*r]=u.getFloat32(n,!1),h[3*r+1]=u.getFloat32(n+4,!1),h[3*r+2]=u.getFloat32(n+8,!1),n+=12;a.next=a.next+t}if((f=a.next)>=c.byteLength)break}var w=new k;return w.setIndex(new M(d,1)),w.addAttribute("position",new M(l,3)),h.length===l.length&&w.addAttribute("normal",new M(h,3)),w}(e)}}),pc.prototype=Object.create(p.prototype),pc.prototype.constructor=pc,pc.prototype.isImmediateRenderObject=!0;var mc=function(e,t,n,r){pc.call(this,t);var i=this,o=new Float32Array(36),a=new Float32Array(36);function s(e,t,n){return e+(t-e)*n}function c(e,t,n,r,c,u,l,h){var d=(n-l)/(h-l),f=i.normal_cache;o[t+0]=r+d*i.delta,o[t+1]=c,o[t+2]=u,a[t+0]=s(f[e+0],f[e+3],d),a[t+1]=s(f[e+1],f[e+4],d),a[t+2]=s(f[e+2],f[e+5],d)}function u(e,t,n,r,c,u,l,h){var d=(n-l)/(h-l),f=i.normal_cache;o[t+0]=r,o[t+1]=c+d*i.delta,o[t+2]=u;var p=e+3*i.yd;a[t+0]=s(f[e+0],f[p+0],d),a[t+1]=s(f[e+1],f[p+1],d),a[t+2]=s(f[e+2],f[p+2],d)}function l(e,t,n,r,c,u,l,h){var d=(n-l)/(h-l),f=i.normal_cache;o[t+0]=r,o[t+1]=c,o[t+2]=u+d*i.delta;var p=e+3*i.zd;a[t+0]=s(f[e+0],f[p+0],d),a[t+1]=s(f[e+1],f[p+1],d),a[t+2]=s(f[e+2],f[p+2],d)}function h(e){var t=3*e;0===i.normal_cache[t]&&(i.normal_cache[t+0]=i.field[e-1]-i.field[e+1],i.normal_cache[t+1]=i.field[e-i.yd]-i.field[e+i.yd],i.normal_cache[t+2]=i.field[e-i.zd]-i.field[e+i.zd])}function d(e,t,n,r,s,d){var p=r+1,m=r+i.yd,v=r+i.zd,g=p+i.yd,y=p+i.zd,b=r+i.yd+i.zd,x=p+i.yd+i.zd,w=0,_=i.field[r],S=i.field[p],M=i.field[m],T=i.field[g],A=i.field[v],E=i.field[y],C=i.field[b],P=i.field[x];_<s&&(w|=1),S<s&&(w|=2),M<s&&(w|=8),T<s&&(w|=4),A<s&&(w|=16),E<s&&(w|=32),C<s&&(w|=128),P<s&&(w|=64);var L=gc[w];if(0===L)return 0;var O=i.delta,N=e+O,R=t+O,I=n+O;1&L&&(h(r),h(p),c(3*r,0,s,e,t,n,_,S)),2&L&&(h(p),h(g),u(3*p,3,s,N,t,n,S,T)),4&L&&(h(m),h(g),c(3*m,6,s,e,R,n,M,T)),8&L&&(h(r),h(m),u(3*r,9,s,e,t,n,_,M)),16&L&&(h(v),h(y),c(3*v,12,s,e,t,I,A,E)),32&L&&(h(y),h(x),u(3*y,15,s,N,t,I,E,P)),64&L&&(h(b),h(x),c(3*b,18,s,e,R,I,C,P)),128&L&&(h(v),h(b),u(3*v,21,s,e,t,I,A,C)),256&L&&(h(r),h(v),l(3*r,24,s,e,t,n,_,A)),512&L&&(h(p),h(y),l(3*p,27,s,N,t,n,S,E)),1024&L&&(h(g),h(x),l(3*g,30,s,N,R,n,T,P)),2048&L&&(h(m),h(b),l(3*m,33,s,e,R,n,M,C)),w<<=4;for(var D,F,k,U=0,B=0;-1!=yc[w+B];)F=(D=w+B)+1,k=D+2,f(o,a,3*yc[D],3*yc[F],3*yc[k],d),B+=3,U++;return U}function f(e,t,n,r,o,a){var s=3*i.count;if(i.positionArray[s+0]=e[n],i.positionArray[s+1]=e[n+1],i.positionArray[s+2]=e[n+2],i.positionArray[s+3]=e[r],i.positionArray[s+4]=e[r+1],i.positionArray[s+5]=e[r+2],i.positionArray[s+6]=e[o],i.positionArray[s+7]=e[o+1],i.positionArray[s+8]=e[o+2],!0===i.material.flatShading){var c=(t[n+0]+t[r+0]+t[o+0])/3,u=(t[n+1]+t[r+1]+t[o+1])/3,l=(t[n+2]+t[r+2]+t[o+2])/3;i.normalArray[s+0]=c,i.normalArray[s+1]=u,i.normalArray[s+2]=l,i.normalArray[s+3]=c,i.normalArray[s+4]=u,i.normalArray[s+5]=l,i.normalArray[s+6]=c,i.normalArray[s+7]=u,i.normalArray[s+8]=l}else i.normalArray[s+0]=t[n+0],i.normalArray[s+1]=t[n+1],i.normalArray[s+2]=t[n+2],i.normalArray[s+3]=t[r+0],i.normalArray[s+4]=t[r+1],i.normalArray[s+5]=t[r+2],i.normalArray[s+6]=t[o+0],i.normalArray[s+7]=t[o+1],i.normalArray[s+8]=t[o+2];if(i.enableUvs){var h=2*i.count;i.uvArray[h+0]=e[n+0],i.uvArray[h+1]=e[n+2],i.uvArray[h+2]=e[r+0],i.uvArray[h+3]=e[r+2],i.uvArray[h+4]=e[o+0],i.uvArray[h+5]=e[o+2]}i.enableColors&&(i.colorArray[s+0]=e[n+0],i.colorArray[s+1]=e[n+1],i.colorArray[s+2]=e[n+2],i.colorArray[s+3]=e[r+0],i.colorArray[s+4]=e[r+1],i.colorArray[s+5]=e[r+2],i.colorArray[s+6]=e[o+0],i.colorArray[s+7]=e[o+1],i.colorArray[s+8]=e[o+2]),i.count+=3,i.count>=i.maxCount-3&&(i.hasPositions=!0,i.hasNormals=!0,i.enableUvs&&(i.hasUvs=!0),i.enableColors&&(i.hasColors=!0),a(i))}function p(e,t,n){var r=new Float32Array(e.length+n);return r.set(e,0),r.set(t.slice(0,n),e.length),r}this.enableUvs=void 0!==n&&n,this.enableColors=void 0!==r&&r,this.init=function(e){this.resolution=e,this.isolation=80,this.size=e,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(3*this.size3),this.maxCount=4096,this.count=0,this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=new Float32Array(3*this.maxCount),this.normalArray=new Float32Array(3*this.maxCount),this.enableUvs&&(this.uvArray=new Float32Array(2*this.maxCount)),this.enableColors&&(this.colorArray=new Float32Array(3*this.maxCount))},this.begin=function(){this.count=0,this.hasPositions=!1,this.hasNormals=!1,this.hasUvs=!1,this.hasColors=!1},this.end=function(e){if(0!==this.count){for(var t=3*this.count;t<this.positionArray.length;t++)this.positionArray[t]=0;this.hasPositions=!0,this.hasNormals=!0,this.enableUvs&&this.material.map&&(this.hasUvs=!0),this.enableColors&&this.material.vertexColors!==Q&&(this.hasColors=!0),e(this)}},this.addBall=function(e,t,n,r,i){var o=Math.sign(r);r=Math.abs(r);var a=this.size*Math.sqrt(r/i),s=n*this.size,c=t*this.size,u=e*this.size,l=Math.floor(s-a);l<1&&(l=1);var h=Math.floor(s+a);h>this.size-1&&(h=this.size-1);var d=Math.floor(c-a);d<1&&(d=1);var f=Math.floor(c+a);f>this.size-1&&(f=this.size-1);var p=Math.floor(u-a);p<1&&(p=1);var m,v,g,y,b,x,w,_,S,M,T,A=Math.floor(u+a);for(A>this.size-1&&(A=this.size-1),g=l;g<h;g++)for(b=this.size2*g,S=(_=g/this.size-n)*_,v=d;v<f;v++)for(y=b+this.size*v,M=(w=v/this.size-t)*w,m=p;m<A;m++)(T=r/(1e-6+(x=m/this.size-e)*x+M+S)-i)>0&&(this.field[y+m]+=T*o)},this.addPlaneX=function(e,t){var n,r,i,o,a,s,c=this.size,u=this.yd,l=this.zd,h=this.field,d=c*Math.sqrt(e/t);for(d>c&&(d=c),n=0;n<d;n++)if((o=e/(1e-4+(a=n/c)*a)-t)>0)for(r=0;r<c;r++)for(s=n+r*u,i=0;i<c;i++)h[l*i+s]+=o},this.addPlaneY=function(e,t){var n,r,i,o,a,s,c,u=this.size,l=this.yd,h=this.zd,d=this.field,f=u*Math.sqrt(e/t);for(f>u&&(f=u),r=0;r<f;r++)if((o=e/(1e-4+(a=r/u)*a)-t)>0)for(s=r*l,n=0;n<u;n++)for(c=s+n,i=0;i<u;i++)d[h*i+c]+=o},this.addPlaneZ=function(e,t){var n,r,i,o,a,s,c,u=this.size,l=this.yd,h=this.zd,d=this.field,f=u*Math.sqrt(e/t);for(f>u&&(f=u),i=0;i<f;i++)if((o=e/(1e-4+(a=i/u)*a)-t)>0)for(s=h*i,r=0;r<u;r++)for(c=s+r*l,n=0;n<u;n++)d[c+n]+=o},this.reset=function(){var e;for(e=0;e<this.size3;e++)this.normal_cache[3*e]=0,this.field[e]=0},this.render=function(e){this.begin();for(var t=this.size-2,n=1;n<t;n++)for(var r=this.size2*n,i=(n-this.halfsize)/this.halfsize,o=1;o<t;o++)for(var a=r+this.size*o,s=(o-this.halfsize)/this.halfsize,c=1;c<t;c++){d((c-this.halfsize)/this.halfsize,s,i,a+c,this.isolation,e)}this.end(e)},this.generateGeometry=function(){return console.warn("MarchingCubes: generateGeometry() now returns BufferGeometry"),this.generateBufferGeometry()},this.generateBufferGeometry=function(){var e=new k,t=new Float32Array,n=new Float32Array,r=new Float32Array,i=new Float32Array,o=this;return this.render(function(e){o.hasPositions&&(t=p(t,e.positionArray,3*e.count)),o.hasNormals&&(n=p(n,e.normalArray,3*e.count)),o.hasColors&&(r=p(r,e.colorArray,3*e.count)),o.hasUvs&&(i=p(i,e.uvArray,2*e.count)),e.count=0}),this.hasPositions&&e.addAttribute("position",new M(t,3)),this.hasNormals&&e.addAttribute("normal",new M(n,3)),this.hasColors&&e.addAttribute("color",new M(r,3)),this.hasUvs&&e.addAttribute("uv",new M(i,2)),e},this.init(e)};(mc.prototype=Object.create(pc.prototype)).constructor=mc;var vc,gc=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),yc=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),bc={setHSV:function(e,t,n,r){return t=o.euclideanModulo(t,1),n=o.clamp(n,0,1),r=o.clamp(r,0,1),e.setHSL(t,n*r/((t=(2-n)*r)<1?t:2-t),.5*t)},getHSV:function(){var e={};return function(t,n){return void 0===n&&(console.warn("ColorConverter: .getHSV() target is now required"),n={h:0,s:0,l:0}),t.getHSL(e),e.s*=e.l<.5?e.l:1-e.l,n.h=e.h,n.s=2*e.s/(e.l+e.s),n.v=e.l+e.s,n}}(),setCMYK:function(e,t,n,r,i){var o=(1-t)*(1-i),a=(1-n)*(1-i),s=(1-r)*(1-i);return e.setRGB(o,a,s)},getCMYK:function(e,t){void 0===t&&(console.warn("ColorConverter: .getCMYK() target is now required"),t={c:0,m:0,y:0,k:0});var n=e.r,r=e.g,i=e.b,o=1-Math.max(n,r,i),a=(1-n-o)/(1-o),s=(1-r-o)/(1-o),c=(1-i-o)/(1-o);return t.c=a,t.m=s,t.y=c,t.k=o,t}};function xc(e,t,n,r,i,o,a,s,c){Kn.call(this,e,t,n,r,i,o,a,s,c),this.needsUpdate=!0}function wc(e){if(p.call(this),this.type="Sprite",void 0===vc){vc=new k;var t=new Yi(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);vc.setIndex([0,1,2,0,2,3]),vc.addAttribute("position",new Qi(t,3,0,!1)),vc.addAttribute("uv",new Qi(t,2,3,!1))}this.geometry=vc,this.material=void 0!==e?e:new Sr,this.center=new x(.5,.5)}xc.prototype=Object.create(Kn.prototype),xc.prototype.constructor=xc,xc.prototype.isCanvasTexture=!0,wc.prototype=Object.assign(Object.create(p.prototype),{constructor:wc,isSprite:!0,raycast:function(){var e=new s,t=new s,n=new s,r=new x,i=new x,o=new a,c=new s,u=new s,l=new s,h=new x,d=new x,f=new x;function p(e,t,n,a,s,c){r.subVectors(e,n).addScalar(.5).multiply(a),void 0!==s?(i.x=c*r.x-s*r.y,i.y=s*r.x+c*r.y):i.copy(r),e.copy(t),e.x+=i.x,e.y+=i.y,e.applyMatrix4(o)}return function(r,i){t.setFromMatrixScale(this.matrixWorld),o.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix);var a,s,m=this.material.rotation;0!==m&&(s=Math.cos(m),a=Math.sin(m));var v=this.center;p(c.set(-.5,-.5,0),n,v,t,a,s),p(u.set(.5,-.5,0),n,v,t,a,s),p(l.set(.5,.5,0),n,v,t,a,s),h.set(0,0),d.set(1,0),f.set(1,1);var g=r.ray.intersectTriangle(c,u,l,!1,e);if(null!==g||(p(u.set(-.5,.5,0),n,v,t,a,s),d.set(0,1),null!==(g=r.ray.intersectTriangle(c,l,u,!1,e)))){var y=r.ray.origin.distanceTo(e);y<r.near||y>r.far||i.push({distance:y,point:e.clone(),uv:dn.getUV(e,c,u,l,h,d,f,new x),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return p.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}});var _c=function(e,t){this.lut=[],this.map=Sc[e],this.n=t,this.mapname=e;for(var n=1/this.n,r=0;r<=1;r+=n)for(var i=0;i<this.map.length-1;i++)if(r>=this.map[i][0]&&r<this.map[i+1][0]){var o=this.map[i][0],a=this.map[i+1][0],s=new v(16777215).setHex(this.map[i][1]),c=new v(16777215).setHex(this.map[i+1][1]),u=s.lerp(c,(r-o)/(a-o));this.lut.push(u)}return this.set(this)};_c.prototype={constructor:_c,lut:[],map:[],mapname:"rainbow",n:256,minV:0,maxV:1,legend:null,set:function(e){return e instanceof _c&&this.copy(e),this},setMin:function(e){return this.minV=e,this},setMax:function(e){return this.maxV=e,this},changeNumberOfColors:function(e){return this.n=e,new _c(this.mapname,this.n)},changeColorMap:function(e){return this.mapname=e,new _c(this.mapname,this.n)},copy:function(e){return this.lut=e.lut,this.mapname=e.mapname,this.map=e.map,this.n=e.n,this.minV=e.minV,this.maxV=e.maxV,this},getColor:function(e){e<=this.minV?e=this.minV:e>=this.maxV&&(e=this.maxV),e=(e-this.minV)/(this.maxV-this.minV);var t=Math.round(e*this.n);return t==this.n&&(t-=1),this.lut[t]},addColorMap:function(e,t){Sc[e]=t},setLegendOn:function(e){void 0===e&&(e={}),this.legend={},this.legend.layout=e.hasOwnProperty("layout")?e.layout:"vertical",this.legend.position=e.hasOwnProperty("position")?e.position:{x:4,y:0,z:0},this.legend.dimensions=e.hasOwnProperty("dimensions")?e.dimensions:{width:.5,height:3},this.legend.canvas=document.createElement("canvas"),this.legend.canvas.setAttribute("id","legend"),this.legend.canvas.setAttribute("hidden",!0),document.body.appendChild(this.legend.canvas),this.legend.ctx=this.legend.canvas.getContext("2d"),this.legend.canvas.setAttribute("width",1),this.legend.canvas.setAttribute("height",this.n),this.legend.texture=new Kn(this.legend.canvas);var t=this.legend.ctx.getImageData(0,0,1,this.n),n=t.data;this.map=Sc[this.mapname];for(var r=0,i=1/this.n,o=1;o>=0;o-=i)for(var a=this.map.length-1;a>=0;a--)if(o<this.map[a][0]&&o>=this.map[a-1][0]){var s=this.map[a-1][0],c=this.map[a][0],u=new v(16777215).setHex(this.map[a-1][1]),l=new v(16777215).setHex(this.map[a][1]),h=u.lerp(l,(o-s)/(c-s));n[4*r]=Math.round(255*h.r),n[4*r+1]=Math.round(255*h.g),n[4*r+2]=Math.round(255*h.b),n[4*r+3]=255,r+=1}return this.legend.ctx.putImageData(t,0,0),this.legend.texture.needsUpdate=!0,this.legend.legendGeometry=new tr(this.legend.dimensions.width,this.legend.dimensions.height),this.legend.legendMaterial=new un({map:this.legend.texture,side:J}),this.legend.mesh=new fn(this.legend.legendGeometry,this.legend.legendMaterial),"horizontal"==this.legend.layout&&(this.legend.mesh.rotation.z=Math.PI/180*-90),this.legend.mesh.position.copy(this.legend.position),this.legend.mesh},setLegendOff:function(){return this.legend=null,this.legend},setLegendLayout:function(e){return!!this.legend&&(this.legend.layout!=e&&(("horizontal"==e||"vertical"==e)&&(this.layout=e,"horizontal"==e&&(this.legend.mesh.rotation.z=Math.PI/180*90),"vertical"==e&&(this.legend.mesh.rotation.z=Math.PI/180*-90),this.legend.mesh)))},setLegendPosition:function(e){return this.legend.position=new s(e.x,e.y,e.z),this.legend},setLegendLabels:function(e,t){if(!this.legend)return!1;"function"==typeof e&&(t=e),void 0===e&&(e={}),this.legend.labels={},this.legend.labels.fontsize=e.hasOwnProperty("fontsize")?e.fontsize:24,this.legend.labels.fontface=e.hasOwnProperty("fontface")?e.fontface:"Arial",this.legend.labels.title=e.hasOwnProperty("title")?e.title:"",this.legend.labels.um=e.hasOwnProperty("um")?" [ "+e.um+" ]":"",this.legend.labels.ticks=e.hasOwnProperty("ticks")?e.ticks:0,this.legend.labels.decimal=e.hasOwnProperty("decimal")?e.decimal:2,this.legend.labels.notation=e.hasOwnProperty("notation")?e.notation:"standard";var n=255,r=100,i=100,o=.8,a=255,c=0,u=0,l=1,h=document.createElement("canvas"),d=h.getContext("2d");d.font="Normal "+1.2*this.legend.labels.fontsize+"px "+this.legend.labels.fontface,d.fillStyle="rgba("+n+","+r+","+i+","+o+")",d.strokeStyle="rgba("+a+","+c+","+u+","+l+")",d.lineWidth=4,d.fillStyle="rgba( 0, 0, 0, 1.0 )",d.fillText(this.legend.labels.title.toString()+this.legend.labels.um.toString(),4,this.legend.labels.fontsize+4);var f=new xc(h);f.minFilter=Ze;var p=new wc(new Sr({map:f}));if(p.scale.set(2,1,1),"vertical"==this.legend.layout&&p.position.set(this.legend.position.x+this.legend.dimensions.width,this.legend.position.y+.45*this.legend.dimensions.height,this.legend.position.z),"horizontal"==this.legend.layout&&p.position.set(1.015*this.legend.position.x,this.legend.position.y+.03*this.legend.dimensions.height,this.legend.position.z),this.legend.labels.ticks>0){var m={},v={};if("vertical"==this.legend.layout)var g=this.legend.position.y+.36*this.legend.dimensions.height,y=this.legend.position.y-.61*this.legend.dimensions.height;if("horizontal"==this.legend.layout)var b=this.legend.position.x+.75*this.legend.dimensions.height,x=this.legend.position.x-1.2*this.legend.dimensions.width;for(var w=0;w<this.legend.labels.ticks;w++){var _=(this.maxV-this.minV)/(this.legend.labels.ticks-1)*w+this.minV;_=t?t(_):"scientific"==this.legend.labels.notation?_.toExponential(this.legend.labels.decimal):_.toFixed(this.legend.labels.decimal);var S=document.createElement("canvas"),M=S.getContext("2d");M.font="Normal "+this.legend.labels.fontsize+"px "+this.legend.labels.fontface,M.fillStyle="rgba("+n+","+r+","+i+","+o+")",M.strokeStyle="rgba("+a+","+c+","+u+","+l+")",M.lineWidth=4,M.fillStyle="rgba( 0, 0, 0, 1.0 )",M.fillText(_.toString(),4,this.legend.labels.fontsize+4);var T=new xc(S);T.minFilter=Ze;var A=new wc(new Sr({map:T}));if(A.scale.set(2,1,1),"vertical"==this.legend.layout){var E=y+(g-y)*((_-this.minV)/(this.maxV-this.minV));A.position.set(this.legend.position.x+2.7*this.legend.dimensions.width,E,this.legend.position.z)}if("horizontal"==this.legend.layout){E=x+(b-x)*((_-this.minV)/(this.maxV-this.minV));if(this.legend.labels.ticks>5)if(w%2==0)var C=1.7;else C=2.1;else C=1.7;A.position.set(E,this.legend.position.y-this.legend.dimensions.width*C,this.legend.position.z)}var P=new ln({color:0,linewidth:2}),L=[];if("vertical"==this.legend.layout){var O=this.legend.position.y-.5*this.legend.dimensions.height+.01+this.legend.dimensions.height*((_-this.minV)/(this.maxV-this.minV)*.99);L.push(new s(this.legend.position.x+.55*this.legend.dimensions.width,O,this.legend.position.z)),L.push(new s(this.legend.position.x+.7*this.legend.dimensions.width,O,this.legend.position.z))}if("horizontal"==this.legend.layout){O=this.legend.position.x-.5*this.legend.dimensions.height+.01+this.legend.dimensions.height*((_-this.minV)/(this.maxV-this.minV)*.99);L.push(new s(O,this.legend.position.y-.55*this.legend.dimensions.width,this.legend.position.z)),L.push(new s(O,this.legend.position.y-.7*this.legend.dimensions.width,this.legend.position.z))}var N=new pn((new k).setFromPoints(L),P);v[w]=N,m[w]=A}}return{title:p,ticks:m,lines:v}}};var Sc={rainbow:[[0,"0x0000FF"],[.2,"0x00FFFF"],[.5,"0x00FF00"],[.8,"0xFFFF00"],[1,"0xFF0000"]],cooltowarm:[[0,"0x3C4EC2"],[.2,"0x9BBCFF"],[.5,"0xDCDCDC"],[.8,"0xF6A385"],[1,"0xB40426"]],blackbody:[[0,"0x000000"],[.2,"0x780000"],[.5,"0xE63200"],[.8,"0xFFFF00"],[1,"0xFFFFFF"]],grayscale:[[0,"0x000000"],[.2,"0x404040"],[.5,"0x7F7F80"],[.8,"0xBFBFBF"],[1,"0xFFFFFF"]]},Mc=function(e,t){fn.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=Object.keys(this.morphTargetDictionary).length,r=n-1,i=n/1;this.createAnimation("__default",0,r,i),this.setAnimationWeight("__default",1)};Mc.prototype=Object.assign(Object.create(fn.prototype),{constructor:Mc,createAnimation:function(e,t,n,r){var i={start:t,end:n,length:n-t+1,fps:r,duration:(n-t)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=i,this.animationsList.push(i)},autoCreateAnimations:function(e){var t,n=/([a-z]+)_?(\d+)/i,r={},i=0;for(var o in this.morphTargetDictionary){var a=o.match(n);if(a&&a.length>1)r[s=a[1]]||(r[s]={start:1/0,end:-1/0}),i<(c=r[s]).start&&(c.start=i),i>c.end&&(c.end=i),t||(t=s);i++}for(var s in r){var c=r[s];this.createAnimation(s,c.start,c.end,e)}this.firstAnimation=t},setAnimationDirectionForward:function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},setAnimationDirectionBackward:function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},setAnimationFPS:function(e,t){var n=this.animationsMap[e];n&&(n.fps=t,n.duration=(n.end-n.start)/n.fps)},setAnimationDuration:function(e,t){var n=this.animationsMap[e];n&&(n.duration=t,n.fps=(n.end-n.start)/n.duration)},setAnimationWeight:function(e,t){var n=this.animationsMap[e];n&&(n.weight=t)},setAnimationTime:function(e,t){var n=this.animationsMap[e];n&&(n.time=t)},getAnimationTime:function(e){var t=0,n=this.animationsMap[e];return n&&(t=n.time),t},getAnimationDuration:function(e){var t=-1,n=this.animationsMap[e];return n&&(t=n.duration),t},playAnimation:function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},stopAnimation:function(e){var t=this.animationsMap[e];t&&(t.active=!1)},update:function(e){for(var t=0,n=this.animationsList.length;t<n;t++){var r=this.animationsList[t];if(r.active){var i=r.duration/r.length;r.time+=r.direction*e,r.mirroredLoop?(r.time>r.duration||r.time<0)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),r.time<0&&(r.time=0,r.directionBackwards=!1)):(r.time=r.time%r.duration,r.time<0&&(r.time+=r.duration));var a=r.start+o.clamp(Math.floor(r.time/i),0,r.length-1),s=r.weight;a!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*s,this.morphTargetInfluences[a]=0,r.lastFrame=r.currentFrame,r.currentFrame=a);var c=r.time%i/i;r.directionBackwards&&(c=1-c),r.currentFrame!==r.lastFrame?(this.morphTargetInfluences[r.currentFrame]=c*s,this.morphTargetInfluences[r.lastFrame]=(1-c)*s):this.morphTargetInfluences[r.currentFrame]=s}}}});var Tc=function(){};Tc.prototype.modify=function(e){for(var t=[],n=0,r=e.faces.length;n<r;n++){var i=t.length,o=e.faces[n],a=o.a,s=o.b,c=o.c,u=e.vertices[a],l=e.vertices[s],h=e.vertices[c];t.push(u.clone()),t.push(l.clone()),t.push(h.clone()),o.a=i,o.b=i+1,o.c=i+2}e.vertices=t};var Ac=function(){};!function(){var e=new s,t=new s;function n(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function r(e,t){var n,r,i,o=t.position.distanceTo(e.position),a=0,s=[],c=e.faces.length;for(n=0;n<c;n++)(r=e.faces[n]).hasVertex(t)&&s.push(r);for(n=0;n<c;n++){var u=1;r=e.faces[n];for(var l=0;l<s.length;l++){i=s[l];var h=r.normal.dot(i.normal);u=Math.min(u,(1.001-h)/2)}a=Math.max(a,u)}return s.length<2&&(a=1),o*a+0}function i(e){if(0===e.neighbors.length)return e.collapseNeighbor=null,void(e.collapseCost=-.01);e.collapseCost=1e5,e.collapseNeighbor=null;for(var t=0;t<e.neighbors.length;t++){var n=r(e,e.neighbors[t]);e.collapseNeighbor||(e.collapseNeighbor=e.neighbors[t],e.collapseCost=n,e.minCost=n,e.totalCost=0,e.costCount=0),e.costCount++,e.totalCost+=n,n<e.minCost&&(e.collapseNeighbor=e.neighbors[t],e.minCost=n)}e.collapseCost=e.totalCost/e.costCount}function o(e,t){for(console.assert(0===e.faces.length);e.neighbors.length;){n(e.neighbors.pop().neighbors,e)}n(t,e)}function a(e,t){n(t,e),e.v1&&n(e.v1.faces,e),e.v2&&n(e.v2.faces,e),e.v3&&n(e.v3.faces,e);for(var r,i,o=[e.v1,e.v2,e.v3],a=0;a<3;a++)i=o[(a+1)%3],(r=o[a])&&i&&(r.removeIfNonNeighbor(i),i.removeIfNonNeighbor(r))}function c(e,t,n,r){if(r){var s,c=[];for(s=0;s<n.neighbors.length;s++)c.push(n.neighbors[s]);for(s=n.faces.length-1;s>=0;s--)n.faces[s].hasVertex(r)&&a(n.faces[s],t);for(s=n.faces.length-1;s>=0;s--)n.faces[s].replaceVertex(n,r);for(o(n,e),s=0;s<c.length;s++)i(c[s])}else o(n,e)}function u(e){for(var t=e[0],n=0;n<e.length;n++)e[n].collapseCost<t.collapseCost&&(t=e[n]);return t}function l(e,t,n,r,i,o){this.a=r,this.b=i,this.c=o,this.v1=e,this.v2=t,this.v3=n,this.normal=new s,this.computeNormal(),e.faces.push(this),e.addUniqueNeighbor(t),e.addUniqueNeighbor(n),t.faces.push(this),t.addUniqueNeighbor(e),t.addUniqueNeighbor(n),n.faces.push(this),n.addUniqueNeighbor(e),n.addUniqueNeighbor(t)}function h(e,t){this.position=e,this.id=t,this.faces=[],this.neighbors=[],this.collapseCost=0,this.collapseNeighbor=null}l.prototype.computeNormal=function(){var n=this.v1.position,r=this.v2.position,i=this.v3.position;e.subVectors(i,r),t.subVectors(n,r),e.cross(t).normalize(),this.normal.copy(e)},l.prototype.hasVertex=function(e){return e===this.v1||e===this.v2||e===this.v3},l.prototype.replaceVertex=function(e,t){e===this.v1?this.v1=t:e===this.v2?this.v2=t:e===this.v3&&(this.v3=t),n(e.faces,this),t.faces.push(this),e.removeIfNonNeighbor(this.v1),this.v1.removeIfNonNeighbor(e),e.removeIfNonNeighbor(this.v2),this.v2.removeIfNonNeighbor(e),e.removeIfNonNeighbor(this.v3),this.v3.removeIfNonNeighbor(e),this.v1.addUniqueNeighbor(this.v2),this.v1.addUniqueNeighbor(this.v3),this.v2.addUniqueNeighbor(this.v1),this.v2.addUniqueNeighbor(this.v3),this.v3.addUniqueNeighbor(this.v1),this.v3.addUniqueNeighbor(this.v2),this.computeNormal()},h.prototype.addUniqueNeighbor=function(e){!function(e,t){-1===e.indexOf(t)&&e.push(t)}(this.neighbors,e)},h.prototype.removeIfNonNeighbor=function(e){var t=this.neighbors,n=this.faces,r=t.indexOf(e);if(-1!==r){for(var i=0;i<n.length;i++)if(n[i].hasVertex(e))return;t.splice(r,1)}},Ac.prototype.modify=function(e,t){e.isBufferGeometry&&(e=(new _).fromBufferGeometry(e)),e.mergeVertices();var n,r,o,a=e.vertices,s=e.faces,d=[],f=[];for(n=0,r=a.length;n<r;n++){var p=new h(a[n],n);d.push(p)}for(n=0,r=s.length;n<r;n++){var m=(M=s[n]).a,v=M.b,g=M.c,y=new l(d[m],d[v],d[g],m,v,g);f.push(y)}for(n=0,r=d.length;n<r;n++)i(d[n]);for(var b=t;b--;){if(!(o=u(d))){console.log("SimplifyModifier: No next vertex");break}c(d,f,o,o.collapseNeighbor)}var x=new k,w=[],S=[];for(n=0;n<d.length;n++){p=d[n].position;w.push(p.x,p.y,p.z)}for(n=0;n<f.length;n++){var M=f[n];m=d.indexOf(M.v1),v=d.indexOf(M.v2),g=d.indexOf(M.v3);S.push(m,v,g)}return x.addAttribute("position",new N(w,3)),x.setIndex(S),x}}();var Ec=function(e){this.subdivisions=void 0===e?1:e};Ec.prototype.modify=function(e){(e=e.isBufferGeometry?(new _).fromBufferGeometry(e):e.clone()).mergeVertices();for(var t=this.subdivisions;t-- >0;)this.smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e},function(){var e=["a","b","c"];function t(e,t,n){return n[Math.min(e,t)+"_"+Math.max(e,t)]}function n(e,t,n,r,i,o){var a,s=Math.min(e,t),c=Math.max(e,t),u=s+"_"+c;u in r?a=r[u]:(a={a:n[s],b:n[c],newEdge:null,faces:[]},r[u]=a);a.faces.push(i),o[e].edges.push(a),o[t].edges.push(a)}function r(e,t,n,r,i){e.push(new g(t,n,r,void 0,void 0,i))}function i(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function o(e,t,n,r){e.push([t.clone(),n.clone(),r.clone()])}Ec.prototype.smooth=function(a){var c,u,l,h,d,f,p,m,v,g,y,b,w,_,S=new s,M=[];c=a.vertices,u=a.faces;var T,A,E,C,P,L,O,N,R,I,D,F,k,U,B=void 0!==(l=a.faceVertexUvs[0])&&l.length>0;for(p in function(e,t,r,i){var o,a,s;for(o=0,a=e.length;o<a;o++)r[o]={edges:[]};for(o=0,a=t.length;o<a;o++)n((s=t[o]).a,s.b,e,i,s,r),n(s.b,s.c,e,i,s,r),n(s.c,s.a,e,i,s,r)}(c,u,y=new Array(c.length),b={}),w=[],b){for(A=b[p],E=new s,P=3/8,L=1/8,2!=(O=A.faces.length)&&(P=.5,L=0),E.addVectors(A.a,A.b).multiplyScalar(P),S.set(0,0,0),v=0;v<O;v++){for(C=A.faces[v],g=0;g<3&&((T=c[C[e[g]]])===A.a||T===A.b);g++);S.add(T)}S.multiplyScalar(L),E.add(S),A.newEdge=w.length,w.push(E)}for(_=[],p=0,m=c.length;p<m;p++){for(k=c[p],3==(f=(F=y[p].edges).length)?N=3/16:f>3&&(N=3/(8*f)),R=1-f*N,I=N,f<=2&&2==f&&(R=.75,I=1/8),U=k.clone().multiplyScalar(R),S.set(0,0,0),v=0;v<f;v++)T=(D=F[v]).a!==k?D.a:D.b,S.add(T);S.multiplyScalar(I),U.add(S),_.push(U)}h=_.concat(w);var z,j,V,G,W,H,X,q=_.length;d=[];var Y=new x,J=new x,Q=new x;for(p=0,m=u.length;p<m;p++)r(d,z=t((C=u[p]).a,C.b,b).newEdge+q,j=t(C.b,C.c,b).newEdge+q,V=t(C.c,C.a,b).newEdge+q,C.materialIndex),r(d,C.a,z,V,C.materialIndex),r(d,C.b,j,z,C.materialIndex),r(d,C.c,V,j,C.materialIndex),B&&(W=(G=l[p])[0],H=G[1],X=G[2],Y.set(i(W.x,H.x),i(W.y,H.y)),J.set(i(H.x,X.x),i(H.y,X.y)),Q.set(i(W.x,X.x),i(W.y,X.y)),o(M,Y,J,Q),o(M,W,Y,Q),o(M,H,J,Y),o(M,X,Q,J));a.vertices=h,a.faces=d,B&&(a.faceVertexUvs[0]=M)}}();var Cc=function(e){this.maxEdgeLength=e};Cc.prototype.modify=function(e){for(var t,n=[],r=[],i=this.maxEdgeLength*this.maxEdgeLength,o=0,a=e.faceVertexUvs.length;o<a;o++)r[o]=[];for(o=0,a=e.faces.length;o<a;o++){var s=e.faces[o];if(s instanceof g){var c=s.a,u=s.b,l=s.c,h=e.vertices[c],d=e.vertices[u],f=e.vertices[l],p=h.distanceToSquared(d),m=d.distanceToSquared(f),v=h.distanceToSquared(f);if(p>i||m>i||v>i){var y=e.vertices.length,b=s.clone(),x=s.clone();if(p>=m&&p>=v){if((w=h.clone()).lerp(d,.5),b.a=c,b.b=y,b.c=l,x.a=y,x.b=u,x.c=l,3===s.vertexNormals.length)(_=s.vertexNormals[0].clone()).lerp(s.vertexNormals[1],.5),b.vertexNormals[1].copy(_),x.vertexNormals[0].copy(_);if(3===s.vertexColors.length)(S=s.vertexColors[0].clone()).lerp(s.vertexColors[1],.5),b.vertexColors[1].copy(S),x.vertexColors[0].copy(S);t=0}else if(m>=p&&m>=v){if((w=d.clone()).lerp(f,.5),b.a=c,b.b=u,b.c=y,x.a=y,x.b=l,x.c=c,3===s.vertexNormals.length)(_=s.vertexNormals[1].clone()).lerp(s.vertexNormals[2],.5),b.vertexNormals[2].copy(_),x.vertexNormals[0].copy(_),x.vertexNormals[1].copy(s.vertexNormals[2]),x.vertexNormals[2].copy(s.vertexNormals[0]);if(3===s.vertexColors.length)(S=s.vertexColors[1].clone()).lerp(s.vertexColors[2],.5),b.vertexColors[2].copy(S),x.vertexColors[0].copy(S),x.vertexColors[1].copy(s.vertexColors[2]),x.vertexColors[2].copy(s.vertexColors[0]);t=1}else{var w,_,S;if((w=h.clone()).lerp(f,.5),b.a=c,b.b=u,b.c=y,x.a=y,x.b=u,x.c=l,3===s.vertexNormals.length)(_=s.vertexNormals[0].clone()).lerp(s.vertexNormals[2],.5),b.vertexNormals[2].copy(_),x.vertexNormals[0].copy(_);if(3===s.vertexColors.length)(S=s.vertexColors[0].clone()).lerp(s.vertexColors[2],.5),b.vertexColors[2].copy(S),x.vertexColors[0].copy(S);t=2}n.push(b,x),e.vertices.push(w);for(var M=0,T=e.faceVertexUvs.length;M<T;M++)if(e.faceVertexUvs[M].length){var A=e.faceVertexUvs[M][o],E=A[0],C=A[1],P=A[2];if(0===t){(N=E.clone()).lerp(C,.5);var L=[E.clone(),N.clone(),P.clone()],O=[N.clone(),C.clone(),P.clone()]}else if(1===t){(N=C.clone()).lerp(P,.5);L=[E.clone(),C.clone(),N.clone()],O=[N.clone(),P.clone(),E.clone()]}else{var N;(N=E.clone()).lerp(P,.5);L=[E.clone(),C.clone(),N.clone()],O=[N.clone(),C.clone(),P.clone()]}r[M].push(L,O)}}else{n.push(s);for(M=0,T=e.faceVertexUvs.length;M<T;M++)r[M].push(e.faceVertexUvs[M][o])}}}e.faces=n,e.faceVertexUvs=r};var Pc=function(e,t){fn.call(this,e,t),this.type="MorphAnimMesh",this.mixer=new Dn(this),this.activeAction=null};(Pc.prototype=Object.create(fn.prototype)).constructor=Pc,Pc.prototype.setDirectionForward=function(){this.mixer.timeScale=1},Pc.prototype.setDirectionBackward=function(){this.mixer.timeScale=-1},Pc.prototype.playAnimation=function(e,t){this.activeAction&&(this.activeAction.stop(),this.activeAction=null);var n=Rn.findByName(this,e);if(!n)throw new Error("MorphAnimMesh: animations["+e+"] undefined in .playAnimation()");var r=this.mixer.clipAction(n);r.timeScale=n.tracks.length*t/n.duration,this.activeAction=r.play()},Pc.prototype.updateAnimation=function(e){this.mixer.update(e)},Pc.prototype.copy=function(e){return fn.prototype.copy.call(this,e),this.mixer=new Dn(this),this};var Lc=["color","color2"],Oc=["vColor","vColor2"];function Nc(e){na.call(this,"v4",{shared:!1}),this.index=e||0}function Rc(e){na.call(this,"v3",{shared:!1}),this.scope=e||Rc.TOTAL}function Ic(e){na.call(this,"v3",{unique:!0}),this.scope=e||Ic.CUBE}Nc.prototype=Object.create(na.prototype),Nc.prototype.constructor=Nc,Nc.prototype.generate=function(e,t){e.requires.color[this.index]=!0;var n=e.isShader("vertex")?Lc[this.index]:Oc[this.index];return e.format(n,this.getType(e),t)},Nc.prototype.copy=function(e){na.prototype.copy.call(this,e),this.index=e.index},Nc.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).index=this.index),t},Rc.TOTAL="total",Rc.prototype=Object.create(na.prototype),Rc.prototype.constructor=Rc,Rc.prototype.nodeType="Light",Rc.prototype.generate=function(e,t){return e.isCache("light")?e.format("reflectedLight.directDiffuse",this.type,t):(console.warn('LightNode is only compatible in "light" channel.'),e.format("vec3( 0.0 )",this.type,t))},Rc.prototype.copy=function(e){na.prototype.copy.call(this,e),this.scope=e.scope},Rc.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t},Ic.CUBE="cube",Ic.SPHERE="sphere",Ic.VECTOR="vector",Ic.prototype=Object.create(na.prototype),Ic.prototype.constructor=Ic,Ic.prototype.nodeType="Reflect",Ic.prototype.getType=function(e){switch(this.scope){case Ic.SPHERE:return"v2"}return this.type},Ic.prototype.generate=function(e,t){if(e.isShader("fragment")){var n;switch(this.scope){case Ic.VECTOR:e.addNodeCode("vec3 reflectVec = inverseTransformDirection( reflect( -normalize( vViewPosition ), normal ), viewMatrix );"),n="reflectVec";break;case Ic.CUBE:var r=new Ic(Ic.VECTOR).build(e,"v3");e.addNodeCode("vec3 reflectCubeVec = vec3( -1.0 * "+r+".x, "+r+".yz );"),n="reflectCubeVec";break;case Ic.SPHERE:r=new Ic(Ic.VECTOR).build(e,"v3");e.addNodeCode("vec2 reflectSphereVec = normalize( ( viewMatrix * vec4( "+r+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5;"),n="reflectSphereVec"}return e.format(n,this.getType(e),t)}return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)},Ic.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t};var Dc={elements:["x","y","z","w"],addShortcuts:function(){function e(e,t,n){return n?{get:function(){return this[e][t][n]},set:function(r){this[e][t][n]=r}}:{get:function(){return this[e][t]},set:function(n){this[e][t]=n}}}return function(t,n,r){for(var i={},o=0;o<r.length;++o){var a=r[o].split("."),s=a[0],c=a[1];i[s]=e(n,s,c)}Object.defineProperties(t,i)}}()};function Fc(e){e=e||{},this.name=e.name,this.type=e.type,this.node=e.node,this.needsUpdate=e.needsUpdate}Object.defineProperties(Fc.prototype,{value:{get:function(){return this.node.value},set:function(e){this.node.value=e}}});var kc=/^struct\s*([a-z_0-9]+)\s*{\s*((.|\n)*?)}/gim,Uc=/\s*(\w*?)\s*(\w*?)(\=|\;)/gim;function Bc(e){na.call(this),this.eval(e)}function zc(e,t,n){la.call(this,"v3"),this.value=e instanceof s?e:new s(e,t,n)}function jc(e,t,n,r){la.call(this,"v4"),this.value=e instanceof S?e:new S(e,t,n,r)}function Vc(e,t){na.call(this,"v4"),this.input=e,this.method=t||Vc.LINEAR}function Gc(e,t,n,r){la.call(this,"v4",{shared:!0}),this.value=e,this.uv=t||new sa,this.bias=n,this.project=void 0!==r&&r}function Wc(e,t,n){la.call(this,"v4",{shared:!0}),this.value=e,this.uv=t||new Ic,this.bias=n}function Hc(){na.call(this,"f")}function Xc(e){na.call(this,"f"),this.blinnExponent=e||new Hc}function qc(e,t,n){na.call(this,"TextureCubeUVData"),this.uv=e||new Ic(Ic.VECTOR),this.textureSize=t||new ha(1024),this.blinnExponentToRoughness=n||new Xc}function Yc(e,t){na.call(this,"v4"),this.value=e,this.uv=t||new qc}Bc.prototype=Object.create(na.prototype),Bc.prototype.constructor=Bc,Bc.prototype.nodeType="Struct",Bc.prototype.getType=function(e){return e.getTypeByFormat(this.name)},Bc.prototype.getInputByName=function(e){for(var t=this.inputs.length;t--;)if(this.inputs[t].name===e)return this.inputs[t]},Bc.prototype.generate=function(e,t){return"source"===t?this.src+";":e.format("( "+src+" )",this.getType(e),t)},Bc.prototype.eval=function(e){this.src=e||"",this.inputs=[];var t=kc.exec(this.src);if(t){for(var n,r=t[2];n=Uc.exec(r);)this.inputs.push({type:n[1],name:n[2]});this.name=t[1]}else this.name="";this.type=this.name},Bc.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).src=this.src),t},zc.prototype=Object.create(la.prototype),zc.prototype.constructor=zc,zc.prototype.nodeType="Vector3",Dc.addShortcuts(zc.prototype,"value",["x","y","z"]),zc.prototype.generateReadonly=function(e,t,n,r,i,o){return e.format("vec3( "+this.x+", "+this.y+", "+this.z+" )",r,t)},zc.prototype.copy=function(e){la.prototype.copy.call(this,e),this.value.copy(e)},zc.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).x=this.x,t.y=this.y,t.z=this.z,!0===this.readonly&&(t.readonly=!0)),t},jc.prototype=Object.create(la.prototype),jc.prototype.constructor=jc,jc.prototype.nodeType="Vector4",Dc.addShortcuts(jc.prototype,"value",["x","y","z","w"]),jc.prototype.generateReadonly=function(e,t,n,r,i,o){return e.format("vec4( "+this.x+", "+this.y+", "+this.z+", "+this.w+" )",r,t)},jc.prototype.copy=function(e){la.prototype.copy.call(this,e),this.value.copy(e)},jc.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).x=this.x,t.y=this.y,t.z=this.z,t.w=this.w,!0===this.readonly&&(t.readonly=!0)),t},Vc.Nodes=function(){var e=new ra(["vec4 LinearToLinear( in vec4 value ) {","\treturn value;","}"].join("\n")),t=new ra(["vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {","\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );","}"].join("\n")),n=new ra(["vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {","\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );","}"].join("\n")),r=new ra(["vec4 sRGBToLinear( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join("\n")),i=new ra(["vec4 LinearTosRGB( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join("\n")),o=new ra(["vec4 RGBEToLinear( in vec4 value ) {","\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );","}"].join("\n")),a=new ra(["vec4 LinearToRGBE( in vec4 value ) {","\tfloat maxComponent = max( max( value.r, value.g ), value.b );","\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );","\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );","}"].join("\n")),s=new ra(["vec3 RGBMToLinear( in vec4 value, in float maxRange ) {","\treturn vec4( value.xyz * value.w * maxRange, 1.0 );","}"].join("\n")),c=new ra(["vec3 LinearToRGBM( in vec4 value, in float maxRange ) {","\tfloat maxRGB = max( value.x, max( value.g, value.b ) );","\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );","\tM            = ceil( M * 255.0 ) / 255.0;","\treturn vec4( value.rgb / ( M * maxRange ), M );","}"].join("\n")),u=new ra(["vec3 RGBDToLinear( in vec4 value, in float maxRange ) {","\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );","}"].join("\n")),l=new ra(["vec3 LinearToRGBD( in vec4 value, in float maxRange ) {","\tfloat maxRGB = max( value.x, max( value.g, value.b ) );","\tfloat D      = max( maxRange / maxRGB, 1.0 );","\tD            = min( floor( D ) / 255.0, 1.0 );","\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );","}"].join("\n")),h=new pa("const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );"),d=new ra(["vec4 LinearToLogLuv( in vec4 value ) {","\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;","\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));","\tvec4 vResult;","\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;","\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;","\tvResult.w = fract(Le);","\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;","\treturn vResult;","}"].join("\n"),[h]),f=new pa("const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );");return{LinearToLinear:e,GammaToLinear:t,LinearToGamma:n,sRGBToLinear:r,LinearTosRGB:i,RGBEToLinear:o,LinearToRGBE:a,RGBMToLinear:s,LinearToRGBM:c,RGBDToLinear:u,LinearToRGBD:l,cLogLuvM:h,LinearToLogLuv:d,cLogLuvInverseM:f,LogLuvToLinear:new ra(["vec4 LogLuvToLinear( in vec4 value ) {","\tfloat Le = value.z * 255.0 + value.w;","\tvec3 Xp_Y_XYZp;","\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);","\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;","\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;","\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;","\treturn vec4( max(vRGB, 0.0), 1.0 );","}"].join("\n"),[f])}}(),Vc.LINEAR_TO_LINEAR="LinearToLinear",Vc.GAMMA_TO_LINEAR="GammaToLinear",Vc.LINEAR_TO_GAMMA="LinearToGamma",Vc.SRGB_TO_LINEAR="sRGBToLinear",Vc.LINEAR_TO_SRGB="LinearTosRGB",Vc.RGBE_TO_LINEAR="RGBEToLinear",Vc.LINEAR_TO_RGBE="LinearToRGBE",Vc.RGBM_TO_LINEAR="RGBMToLinear",Vc.LINEAR_TO_RGBM="LinearToRGBM",Vc.RGBD_TO_LINEAR="RGBDToLinear",Vc.LINEAR_TO_RGBD="LinearToRGBD",Vc.LINEAR_TO_LOG_LUV="LinearToLogLuv",Vc.LOG_LUV_TO_LINEAR="LogLuvToLinear",Vc.prototype=Object.create(na.prototype),Vc.prototype.constructor=Vc,Vc.prototype.nodeType="ColorAdjustment",Vc.prototype.generate=function(e,t){var n=e.context.input||this.input.build(e,"v4"),r=void 0!==e.context.encoding?this.getEncodingMethod(e.context.encoding):[this.method],i=this.factor?this.factor.build(e,"f"):r[1],o=e.include(Vc.Nodes[r[0]]);return i?e.format(o+"( "+n+", "+i+" )",this.getType(e),t):e.format(o+"( "+n+" )",this.getType(e),t)},Vc.prototype.getDecodingMethod=function(e){var t=this.getEncodingComponents(e);return t[0]+="ToLinear",t},Vc.prototype.getEncodingMethod=function(e){var t=this.getEncodingComponents(e);return t[0]="LinearTo"+t[0],t},Vc.prototype.getEncodingComponents=function(e){switch(e){case Jt:return["Linear"];case Qt:return["sRGB"];case Kt:return["RGBE"];case $t:return["RGBM","7.0"];case en:return["RGBM","16.0"];case tn:return["RGBD","256.0"];case Zt:return["Gamma","float( GAMMA_FACTOR )"]}},Vc.prototype.copy=function(e){na.prototype.copy.call(this,e),this.input=e.input,this.method=e.method},Vc.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).input=this.input.toJSON(e).uuid,t.method=this.method),t},Gc.prototype=Object.create(la.prototype),Gc.prototype.constructor=Gc,Gc.prototype.nodeType="Texture",Gc.prototype.getTexture=function(e,t){return la.prototype.generate.call(this,e,t,this.value.uuid,"t")},Gc.prototype.generate=function(e,t){if("sampler2D"===t)return this.getTexture(e,t);var n,r,i=this.getTexture(e,t),o=this.uv.build(e,this.project?"v4":"v2"),a=this.bias?this.bias.build(e,"f"):void 0;return void 0==a&&e.context.bias&&(a=new e.context.bias(this).build(e,"f")),n=this.project?"texture2DProj":a?"tex2DBias":"tex2D",r=a?n+"( "+i+", "+o+", "+a+" )":n+"( "+i+", "+o+" )",e.addContext({input:r,encoding:e.getTextureEncodingFromMap(this.value),include:e.isShader("vertex")}),this.colorSpace=this.colorSpace||new Vc(this),r=this.colorSpace.build(e,this.type),e.removeContext(),e.format(r,this.type,t)},Gc.prototype.copy=function(e){la.prototype.copy.call(this,e),e.value&&(this.value=e.value),this.uv=e.uv,e.bias&&(this.bias=e.bias),void 0!==e.project&&(this.project=e.project)},Gc.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.value&&(t.value=this.value.uuid),t.uv=this.uv.toJSON(e).uuid,t.project=this.project,this.bias&&(t.bias=this.bias.toJSON(e).uuid)),t},Wc.prototype=Object.create(la.prototype),Wc.prototype.constructor=Wc,Wc.prototype.nodeType="CubeTexture",Wc.prototype.getTexture=function(e,t){return la.prototype.generate.call(this,e,t,this.value.uuid,"tc")},Wc.prototype.generate=function(e,t){if("samplerCube"===t)return this.getTexture(e,t);var n,r=this.getTexture(e,t),i=this.uv.build(e,"v3"),o=this.bias?this.bias.build(e,"f"):void 0;return void 0===o&&e.context.bias&&(o=new e.context.bias(this).build(e,"f")),n=o?"texCubeBias( "+r+", "+i+", "+o+" )":"texCube( "+r+", "+i+" )",e.addContext({input:n,encoding:e.getTextureEncodingFromMap(this.value),include:e.isShader("vertex")}),this.colorSpace=this.colorSpace||new Vc(this),n=this.colorSpace.build(e,this.type),e.removeContext(),e.format(n,this.type,t)},Wc.prototype.copy=function(e){la.prototype.copy.call(this,e),e.value&&(this.value=e.value),this.uv=e.uv,e.bias&&(this.bias=e.bias)},Wc.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.uuid,t.uv=this.uv.toJSON(e).uuid,this.bias&&(t.bias=this.bias.toJSON(e).uuid)),t},Hc.prototype=Object.create(na.prototype),Hc.prototype.constructor=Hc,Hc.prototype.nodeType="BlinnShininessExponent",Hc.prototype.generate=function(e,t){return e.isCache("clearCoat")?e.format("Material_ClearCoat_BlinnShininessExponent( material )",this.type,t):e.format("Material_BlinnShininessExponent( material )",this.type,t)},Xc.prototype=Object.create(na.prototype),Xc.prototype.constructor=Xc,Xc.prototype.nodeType="BlinnExponentToRoughness",Xc.prototype.generate=function(e,t){return e.format("BlinnExponentToGGXRoughness( "+this.blinnExponent.build(e,"f")+" )",this.type,t)},Xc.prototype.copy=function(e){na.prototype.copy.call(this,e),this.blinnExponent=e.blinnExponent},Xc.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).blinnExponent=this.blinnExponent),t},qc.Nodes=function(){var e=new Bc(["struct TextureCubeUVData {","\tvec2 uv_10;","\tvec2 uv_20;","\tfloat t;","}"].join("\n")),t=new ra(["int getFaceFromDirection(vec3 direction) {","\tvec3 absDirection = abs(direction);","\tint face = -1;","\tif( absDirection.x > absDirection.z ) {","\t\tif(absDirection.x > absDirection.y )","\t\t\tface = direction.x > 0.0 ? 0 : 3;","\t\telse","\t\t\tface = direction.y > 0.0 ? 1 : 4;","\t}","\telse {","\t\tif(absDirection.z > absDirection.y )","\t\t\tface = direction.z > 0.0 ? 2 : 5;","\t\telse","\t\t\tface = direction.y > 0.0 ? 1 : 4;","\t}","\treturn face;","}"].join("\n")),n=new pa("#define cubeUV_maxLods1 ( log2( cubeUV_textureSize * 0.25 ) - 1.0 )"),r=new pa("#define cubeUV_rangeClamp ( exp2( ( 6.0 - 1.0 ) * 2.0 ) )"),i=new ra(["vec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness, in float cubeUV_textureSize ) {","\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);","\tfloat dxRoughness = dFdx(roughness);","\tfloat dyRoughness = dFdy(roughness);","\tvec3 dx = dFdx( vec * scale * dxRoughness );","\tvec3 dy = dFdy( vec * scale * dyRoughness );","\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );","\td = clamp(d, 1.0, cubeUV_rangeClamp);","\tfloat mipLevel = 0.5 * log2(d);","\treturn vec2(floor(mipLevel), fract(mipLevel));","}"].join("\n"),[n,r],{derivatives:!0}),o=new pa("#define cubeUV_maxLods2 ( log2( cubeUV_textureSize * 0.25 ) - 2.0 )"),a=new pa("#define cubeUV_rcpTextureSize ( 1.0 / cubeUV_textureSize )"),s=new ra(["vec2 getCubeUV( vec3 direction, float roughnessLevel, float mipLevel, in float cubeUV_textureSize ) {","\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;","\tfloat a = 16.0 * cubeUV_rcpTextureSize;","","\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );","\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;","\tfloat powScale = exp2_packed.x * exp2_packed.y;","\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;","\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;","","\tbool bRes = mipLevel == 0.0;","\tscale =  bRes && (scale < a) ? a : scale;","","\tvec3 r;","\tvec2 offset;","\tint face = getFaceFromDirection(direction);","","\tfloat rcpPowScale = 1.0 / powScale;","","\tif( face == 0) {","\t\tr = vec3(direction.x, -direction.z, direction.y);","\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);","\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;","\t}","\telse if( face == 1) {","\t\tr = vec3(direction.y, direction.x, direction.z);","\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);","\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;","\t}","\telse if( face == 2) {","\t\tr = vec3(direction.z, direction.x, direction.y);","\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);","\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;","\t}","\telse if( face == 3) {","\t\tr = vec3(direction.x, direction.z, direction.y);","\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);","\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;","\t}","\telse if( face == 4) {","\t\tr = vec3(direction.y, direction.x, -direction.z);","\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);","\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;","\t}","\telse {","\t\tr = vec3(direction.z, -direction.x, direction.y);","\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);","\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;","\t}","\tr = normalize(r);","\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;","\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;","\tvec2 base = offset + vec2( texelOffset );","\treturn base + s * ( scale - 2.0 * texelOffset );","}"].join("\n"),[o,a,t]),c=new pa("#define cubeUV_maxLods3 ( log2( cubeUV_textureSize * 0.25 ) - 3.0 )");return{TextureCubeUVData:e,textureCubeUV:new ra(["TextureCubeUVData textureCubeUV( vec3 reflectedDirection, float roughness, in float cubeUV_textureSize ) {","\tfloat roughnessVal = roughness * cubeUV_maxLods3;","\tfloat r1 = floor(roughnessVal);","\tfloat r2 = r1 + 1.0;","\tfloat t = fract(roughnessVal);","\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness, cubeUV_textureSize);","\tfloat s = mipInfo.y;","\tfloat level0 = mipInfo.x;","\tfloat level1 = level0 + 1.0;","\tlevel1 = level1 > 5.0 ? 5.0 : level1;","","\tlevel0 += min( floor( s + 0.5 ), 5.0 );","","\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0, cubeUV_textureSize);","\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0, cubeUV_textureSize);","","\treturn TextureCubeUVData(uv_10, uv_20, t);","}"].join("\n"),[e,c,i,s])}}(),qc.prototype=Object.create(na.prototype),qc.prototype.constructor=qc,qc.prototype.nodeType="TextureCubeUV",qc.prototype.generate=function(e,t){if(e.isShader("fragment")){var n=e.include(qc.Nodes.textureCubeUV);return e.format(n+"( "+this.uv.build(e,"v3")+", "+this.blinnExponentToRoughness.build(e,"f")+", "+this.textureSize.build(e,"f")+" )",this.getType(e),t)}return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)},qc.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).uv=this.uv.toJSON(e).uuid,t.textureSize=this.textureSize.toJSON(e).uuid,t.blinnExponentToRoughness=this.blinnExponentToRoughness.toJSON(e).uuid),t},Yc.prototype=Object.create(na.prototype),Yc.prototype.constructor=Yc,Yc.prototype.nodeType="TextureCube",Yc.prototype.generate=function(e,t){if(e.isShader("fragment")){var n=this.uv.build(e)+".uv_10",r=this.uv.build(e)+".uv_20",i=this.uv.build(e)+".t",o=e.getTexelDecodingFunctionFromTexture("texture2D( "+this.value.build(e,"sampler2D")+", "+n+" )",this.value.value),a=e.getTexelDecodingFunctionFromTexture("texture2D( "+this.value.build(e,"sampler2D")+", "+r+" )",this.value.value);return e.format("vec4( mix( "+o+", "+a+", "+i+" ).rgb, 1.0 )",this.getType(e),t)}return console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)},Yc.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).uv=this.uv.toJSON(e).uuid,t.textureSize=this.textureSize.toJSON(e).uuid,t.blinnExponentToRoughness=this.blinnExponentToRoughness.toJSON(e).uuid,this.roughness&&(t.roughness=this.roughness.toJSON(e).uuid)),t};var Jc=Dc.elements,Qc=["float","vec2","vec3","vec4"],Zc={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i"},Kc={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4"};function $c(){this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.requires={uv:[],color:[],lights:!1,fog:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCube(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif","#include <packing>","#include <common>"].join("\n"),this.parsCode={vertex:"",fragment:""},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={},this.updaters=[],this.nodes=[],this.parsing=!1,this.optimize=!0}function eu(e,t,n){la.call(this,"c"),this.value=e instanceof v?e:new v(e||0,t,n)}function tu(e){ta.call(this,"v4"),this.value=e}function nu(e,t){qn.call(this),this.vertex=e||new tu(new ca(ca.PROJECTION)),this.fragment=t||new tu(new eu(16711680)),this.updaters=[]}function ru(e,t){la.call(this,"v2"),this.value=e instanceof x?e:new x(e,t)}function iu(){ru.call(this)}function ou(e){na.call(this,"v2"),this.resolution=e||new iu}function au(e){ha.call(this),this.texture=e,this.maxMIPLevel=0}function su(e){na.call(this,"f"),this.texture=e,this.maxMIPLevel=new au(e),this.blinnShininessExponent=new Hc}function cu(e,t){ta.call(this,t),this.name=e}function uu(e,t,n,r,i){ra.call(this,e,i,r,n,t)}function lu(e,t){na.call(this),this.setFunction(e,t)}function hu(e){this.time=void 0!==e?e:0,this.id=0}function du(e,t){ta.call(this,e),this.value=t}function fu(e,t,n,r){na.call(this,"v4"),this.value=e,this.uv=t||new sa,this.radius=new ru(1,1),this.size=r,this.blurX=!0,this.blurY=!0,this.horizontal=new ha(1/64),this.vertical=new ha(1/64)}function pu(e){na.call(this,"f"),this.rgb=e}function mu(e,t,n){na.call(this,"v3"),this.rgb=e,this.adjustment=t,this.method=n||mu.SATURATION}function vu(e){la.call(this,"i"),this.value=Math.floor(e||0)}function gu(e){la.call(this,"m3"),this.value=e||new d}function yu(e){la.call(this,"m4"),this.value=e||new a}function bu(e,t,n){la.call(this,n),this.object=e,this.property=t}function xu(e,t,n){na.call(this),this.a=e,this.b=t,this.op=n}function wu(e){na.call(this,"v4"),e&&this.setMirror(e)}function _u(e,t,n,r){r=r||{},this.input=n,this.clear=void 0===r.clear||r.clear,this.renderTarget=new $n(e,t,r),this.material=new nu,this.camera=new Jn(-1,1,1,-1,0,1),this.scene=new Yn,this.quad=new fn(new tr(2,2),this.material),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.render=!0,Gc.call(this,this.renderTarget.texture)}function Su(e){Gc.call(this,void 0,e)}function Mu(){ta.call(this),this.color=new eu(15658734),this.roughness=new ha(.5),this.metalness=new ha(.5)}function Tu(e,t){ta.call(this),this.node=e,this.components=t||"x"}function Au(e,t){na.call(this,"v3"),this.value=e,this.scale=t||new ru(1,1)}function Eu(){Mu.call(this),this.properties={color:new v(16777215),roughness:.5,metalness:.5,normalScale:new x(1,1)},this.inputs={color:new bu(this.properties,"color","c"),roughness:new bu(this.properties,"roughness","f"),metalness:new bu(this.properties,"metalness","f"),normalScale:new bu(this.properties,"normalScale","v2")}}function Cu(){var e=new Eu;nu.call(this,e,e),this.type="MeshStandardNodeMaterial"}function Pu(){ta.call(this),this.color=new eu(15658734),this.specular=new eu(1118481),this.shininess=new ha(30)}function Lu(){ta.call(this),this.color=new eu(15658734),this.spherical=!0}function Ou(){var e=new Pu;nu.call(this,e,e),this.type="PhongNodeMaterial"}function Nu(){var e=new Lu;nu.call(this,e,e),this.type="SpriteNodeMaterial"}function Ru(){var e=new Mu;nu.call(this,e,e),this.type="StandardNodeMaterial"}function Iu(e,t,n,r,i){na.call(this),this.a=e,this.b=t,this.ifNode=n,this.elseNode=r,this.op=i}function Du(e,t){na.call(this),this.a=e,this.method=t}function Fu(e,t,n){na.call(this),this.a=e,this.b=t,this.method=n}function ku(e,t,n,r){na.call(this),this.a=e,this.b=t,this.c=n,this.method=r}function Uu(e,t){na.call(this,"v3"),this.value=e,this.scale=t||new ha(1),this.toNormalMap=!1}$c.prototype={constructor:$c,build:function(e,t){return this.buildShader("vertex",e),this.buildShader("fragment",t),this.requires.uv[0]&&(this.addVaryCode("varying vec2 vUv;"),this.addVertexFinalCode("vUv = uv;")),this.requires.uv[1]&&(this.addVaryCode("varying vec2 vUv2;"),this.addVertexParsCode("attribute vec2 uv2;"),this.addVertexFinalCode("vUv2 = uv2;")),this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition&&(this.addVaryCode("varying vec3 vWPosition;"),this.addVertexFinalCode("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;")),this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = ( modelMatrix * vec4( objectNormal, 0.0 ) ).xyz;")),this},buildShader:function(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")},setMaterial:function(e,t){return this.material=e,this.renderer=t,this.requires.lights=e.lights,this.requires.fog=e.fog,this.mergeDefines(e.defines),this},addFlow:function(e,t,n){return this.addSlot(e).addCache(t).addContext(n)},removeFlow:function(){return this.removeSlot().removeCache().removeContext()},addCache:function(e){return this.cache=e||"",this.caches.push(this.cache),this},removeCache:function(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this},addContext:function(e){return this.context=Object.assign({},this.context,e),this.contexts.push(this.context),this},removeContext:function(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this},addSlot:function(e){return this.slot=e||"",this.slots.push(this.slot),this},removeSlot:function(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this},addVertexCode:function(e){this.addCode(e,"vertex")},addFragmentCode:function(e){this.addCode(e,"fragment")},addCode:function(e,t){this.code[t||this.shader]+=e+"\n"},addVertexNodeCode:function(e){this.addNodeCode(e,"vertex")},addFragmentNodeCode:function(e){this.addNodeCode(e,"fragment")},addNodeCode:function(e,t){this.nodeCode[t||this.shader]+=e+"\n"},clearNodeCode:function(e){e=e||this.shader;var t=this.nodeCode[e];return this.nodeCode[e]="",t},clearVertexNodeCode:function(){return this.clearNodeCode("vertex")},clearFragmentNodeCode:function(){return this.clearNodeCode("fragment")},addVertexFinalCode:function(e){this.addFinalCode(e,"vertex")},addFragmentFinalCode:function(e){this.addFinalCode(e,"fragment")},addFinalCode:function(e,t){this.finalCode[t||this.shader]+=e+"\n"},addVertexParsCode:function(e){this.addParsCode(e,"vertex")},addFragmentParsCode:function(e){this.addParsCode(e,"fragment")},addParsCode:function(e,t){this.parsCode[t||this.shader]+=e+"\n"},addVaryCode:function(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)},isCache:function(e){return-1!==this.caches.indexOf(e)},isSlot:function(e){return-1!==this.slots.indexOf(e)},define:function(e,t){this.defines[e]=void 0===t?1:t},isDefined:function(e){return void 0!==this.defines[e]},getVar:function(e,t,n,r){r=r||"varying";var i=this.getVars(r),o=i[e];if(!o){var a=i.length;o={name:n||"nVv"+a,type:t},i.push(o),i[e]=o}return o},getTempVar:function(e,t,n){return this.getVar(e,t,n,this.shader)},getAttribute:function(e,t){if(!this.attributes[e]){var n=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(n.name+" = "+e+";"),this.attributes[e]={varying:n,name:e,type:t}}return this.attributes[e]},getCode:function(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join("\n")},getVarListCode:function(e,t){t=t||"";for(var n="",r=0,i=e.length;r<i;++r){var o=e[r],a=o.type,s=o.name,c=this.getFormatByType(a);if(void 0===c)throw new Error("Node pars "+c+" not found.");n+=t+" "+c+" "+s+";\n"}return n},getVars:function(e){return this.inputs.vars[e||this.shader]},getNodeData:function(e){var t=e.isNode?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}},createUniform:function(e,t,n,r,i){var o=this.inputs.uniforms,a=o.list.length,s=new Fc({type:t,name:r||"nVu"+a,node:n,needsUpdate:i});return o.list.push(s),o[e].push(s),o[e][s.name]=s,this.uniforms[s.name]=s,s},createVertexUniform:function(e,t,n,r){return this.createUniform("vertex",e,t,n,r)},createFragmentUniform:function(e,t,n,r){return this.createUniform("fragment",e,t,n,r)},include:function(e,t,n){var r;if(e="string"==typeof e?ia.get(e):e,!1===this.context.include)return e.name;e instanceof ra?r=this.includes.functions:e instanceof pa?r=this.includes.consts:e instanceof Bc&&(r=this.includes.structs);var i=r[this.shader]=r[this.shader]||[];if(e){var o=i[e.name];if(o||(o=i[e.name]={node:e,deps:[]},i.push(o),o.src=e.build(this,"source")),e instanceof ra&&t&&i[t.name]&&-1==i[t.name].deps.indexOf(e)&&(i[t.name].deps.push(e),e.includes&&e.includes.length)){var a=0;do{this.include(e.includes[a++],t)}while(a<e.includes.length)}return n&&(o.src=n),e.name}throw new Error("Include not found.")},colorToVectorProperties:function(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")},colorToVector:function(e){return e.replace(/c/g,"v3")},getIncludes:function(e,t){return this.includes[e][t||this.shader]},getIncludesCode:function(){function e(e,t){return e.deps.length-t.deps.length}return function(t,n){if(!(i=this.getIncludes(t,n)))return"";for(var r="",i=i.sort(e),o=0;o<i.length;o++)i[o].src&&(r+=i[o].src+"\n");return r}}(),getConstructorFromLength:function(e){return Qc[e-1]},isTypeMatrix:function(e){return/^m/.test(e)},getTypeLength:function(e){return"f"===e?1:parseInt(this.colorToVector(e).substr(1))},getTypeFromLength:function(e){return 1===e?"f":"v"+e},findNode:function(){for(var e=arguments,t=0;t<arguments.length;t++){var n=e[t];if(void 0!==n&&n.isNode)return n}},resolve:function(){for(var e=arguments,t=0;t<arguments.length;t++){var n=e[t];if(void 0!==n){if(n.isNode)return n;if(n.isTexture)switch(n.mapping){case Ue:case Be:return new Wc(n);case Ge:case We:return new Yc(new Gc(n));default:return new Gc(n)}else{if(n.isVector2)return new ru(n);if(n.isVector3)return new zc(n);if(n.isVector4)return new jc(n)}}}},format:function(e,t,n){switch(this.colorToVector(n+" <- "+t)){case"f <- v2":case"f <- v3":case"f <- v4":return e+".x";case"f <- i":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":case"v2 <- v4":return e+".xy";case"v2 <- i":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":return"vec4( float( "+e+" ) )";case"i <- f":return"int( "+e+" )";case"i <- v2":case"i <- v3":case"i <- v4":return"int( "+e+".x )"}return e},getTypeByFormat:function(e){return Zc[e]||e},getFormatByType:function(e){return Kc[e]||e},getUuid:function(e,t){return(t=void 0===t||t)&&this.cache&&(e=this.cache+"-"+e),e},getElementByIndex:function(e){return Jc[e]},getIndexByElement:function(e){return Jc.indexOf(e)},isShader:function(e){return this.shader===e},setShader:function(e){return this.shader=e,this},mergeDefines:function(e){for(var t in e)this.defines[t]=e[t];return this.defines},mergeUniform:function(e){for(var t in e)this.uniforms[t]=e[t];return this.uniforms},getTextureEncodingFromMap:function(e,t){var n;return t=void 0!==t?t:this.context.gamma&&!!this.renderer&&this.renderer.gammaInput,e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=Jt,n===Jt&&t&&(n=Zt),n}},eu.prototype=Object.create(la.prototype),eu.prototype.constructor=eu,eu.prototype.nodeType="Color",Dc.addShortcuts(eu.prototype,"value",["r","g","b"]),eu.prototype.generateReadonly=function(e,t,n,r,i,o){return e.format("vec3( "+this.r+", "+this.g+", "+this.b+" )",r,t)},eu.prototype.copy=function(e){la.prototype.copy.call(this,e),this.value.copy(e)},eu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).r=this.r,t.g=this.g,t.b=this.b,!0===this.readonly&&(t.readonly=!0)),t},tu.prototype=Object.create(ta.prototype),tu.prototype.constructor=tu,tu.prototype.nodeType="Raw",tu.prototype.generate=function(e){var t=this.value.parseAndBuildCode(e,this.type),n=t.code+"\n";return e.isShader("vertex")?n+="gl_Position = "+t.result+";":n+="gl_FragColor = "+t.result+";",n},tu.prototype.copy=function(e){ta.prototype.copy.call(this,e),this.value=e.value},tu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid),t},nu.prototype=Object.create(qn.prototype),nu.prototype.constructor=nu,nu.prototype.type="NodeMaterial",nu.prototype.isNodeMaterial=!0,Object.defineProperties(nu.prototype,{properties:{get:function(){return this.fragment.properties}}}),nu.prototype.updateFrame=function(e){for(var t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])},nu.prototype.onBeforeCompile=function(e,t){this.needsUpdate&&(this.build({renderer:t}),e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader)},nu.prototype.build=function(e){var t=(e=e||{}).builder||new $c;return t.setMaterial(this,e.renderer),t.build(this.vertex,this.fragment),this.vertexShader=t.getCode("vertex"),this.fragmentShader=t.getCode("fragment"),this.defines=t.defines,this.uniforms=t.uniforms,this.extensions=t.extensions,this.updaters=t.updaters,this.fog=t.requires.fog,this.lights=t.requires.lights,this.transparent=t.requires.transparent||this.blending>ee,this.needsUpdate=!1,this},nu.prototype.copy=function(e){var t=this.uuid;for(var n in e)this[n]=e[n];this.uuid=t,void 0!==e.userData&&(this.userData=JSON.parse(JSON.stringify(e.userData)))},nu.prototype.toJSON=function(e){if((void 0===e||"string"==typeof e)&&(e={nodes:{}}),e&&!e.materials&&(e.materials={}),!e.materials[this.uuid]){var t={};t.uuid=this.uuid,t.type=this.type,e.materials[t.uuid]=t,""!==this.name&&(t.name=this.name),void 0!==this.size&&(t.size=this.size),void 0!==this.sizeAttenuation&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==ee&&(t.blending=this.blending),!0===this.flatShading&&(t.flatShading=this.flatShading),this.side!==q&&(t.side=this.side),this.vertexColors!==Q&&(t.vertexColors=this.vertexColors),this.depthFunc!==Me&&(t.depthFunc=this.depthFunc),!1===this.depthTest&&(t.depthTest=this.depthTest),!1===this.depthWrite&&(t.depthWrite=this.depthWrite),1!==this.linewidth&&(t.linewidth=this.linewidth),void 0!==this.dashSize&&(t.dashSize=this.dashSize),void 0!==this.gapSize&&(t.gapSize=this.gapSize),void 0!==this.scale&&(t.scale=this.scale),!0===this.dithering&&(t.dithering=!0),!0===this.wireframe&&(t.wireframe=this.wireframe),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(t.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(t.wireframeLinejoin=this.wireframeLinejoin),this.alphaTest>0&&(t.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(t.premultipliedAlpha=this.premultipliedAlpha),!0===this.morphTargets&&(t.morphTargets=!0),!0===this.skinning&&(t.skinning=!0),!1===this.visible&&(t.visible=!1),"{}"!==JSON.stringify(this.userData)&&(t.userData=this.userData),t.fog=this.fog,t.lights=this.lights,t.vertex=this.vertex.toJSON(e).uuid,t.fragment=this.fragment.toJSON(e).uuid}return e.material=this.uuid,e},ru.prototype=Object.create(la.prototype),ru.prototype.constructor=ru,ru.prototype.nodeType="Vector2",Dc.addShortcuts(ru.prototype,"value",["x","y"]),ru.prototype.generateReadonly=function(e,t,n,r,i,o){return e.format("vec2( "+this.x+", "+this.y+" )",r,t)},ru.prototype.copy=function(e){la.prototype.copy.call(this,e),this.value.copy(e)},ru.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).x=this.x,t.y=this.y,!0===this.readonly&&(t.readonly=!0)),t},iu.prototype=Object.create(ru.prototype),iu.prototype.constructor=iu,iu.prototype.nodeType="Resolution",iu.prototype.updateFrame=function(e){if(e.renderer){var t=e.renderer.getSize(),n=e.renderer.getPixelRatio();this.x=t.width*n,this.y=t.height*n}else console.warn("ResolutionNode need a renderer in NodeFrame")},iu.prototype.copy=function(e){ru.prototype.copy.call(this,e),this.renderer=e.renderer},iu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).renderer=this.renderer.uuid),t},ou.prototype=Object.create(na.prototype),ou.prototype.constructor=ou,ou.prototype.nodeType="ScreenUV",ou.prototype.generate=function(e,t){var n;return e.isShader("fragment")?n="( gl_FragCoord.xy / "+this.resolution.build(e,"v2")+")":(console.warn("ScreenUVNode is not compatible with "+e.shader+" shader."),n="vec2( 0.0 )"),e.format(n,this.getType(e),t)},ou.prototype.copy=function(e){na.prototype.copy.call(this,e),this.resolution=e.resolution},ou.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).resolution=this.resolution.toJSON(e).uuid),t},au.prototype=Object.create(ha.prototype),au.prototype.constructor=au,au.prototype.nodeType="MaxMIPLevel",Object.defineProperties(au.prototype,{value:{get:function(){if(0===this.maxMIPLevel){var e=this.texture.value.image?this.texture.value.image[0]:void 0;this.maxMIPLevel=void 0!==e?Math.log(Math.max(e.width,e.height))*Math.LOG2E:0}return this.maxMIPLevel},set:function(){}}}),au.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).texture=this.texture.uuid),t},su.Nodes={getSpecularMIPLevel:new ra(["float getSpecularMIPLevel( const in float blinnShininessExponent, const in float maxMIPLevelScalar ) {","\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );","\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );","}"].join("\n"))},su.prototype=Object.create(na.prototype),su.prototype.constructor=su,su.prototype.nodeType="RoughnessToBlinnExponent",su.prototype.generate=function(e,t){if(e.isShader("fragment")){this.maxMIPLevel.texture=this.texture;var n=e.include(su.Nodes.getSpecularMIPLevel);return e.format(n+"( "+this.blinnShininessExponent.build(e,"f")+", "+this.maxMIPLevel.build(e,"f")+" )",this.type,t)}return console.warn("RoughnessToBlinnExponentNode is not compatible with "+e.shader+" shader."),e.format("0.0",this.type,t)},su.prototype.copy=function(e){na.prototype.copy.call(this,e),this.texture=e.texture},su.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).texture=this.texture),t},cu.prototype=Object.create(ta.prototype),cu.prototype.constructor=cu,cu.prototype.nodeType="Attribute",cu.prototype.getAttributeType=function(e){return"number"==typeof this.type?e.getConstructorFromLength(this.type):this.type},cu.prototype.getType=function(e){var t=this.getAttributeType(e);return e.getTypeByFormat(t)},cu.prototype.generate=function(e,t){var n=this.getAttributeType(e),r=e.getAttribute(this.name,n),i=e.isShader("vertex")?this.name:r.varying.name;return console.log(r),e.format(i,this.getType(e),t)},cu.prototype.copy=function(e){ta.prototype.copy.call(this,e),this.type=e.type},cu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).type=this.type),t},uu.prototype=Object.create(ra.prototype),uu.prototype.constructor=uu,uu.prototype.nodeType="Expression",lu.prototype=Object.create(na.prototype),lu.prototype.constructor=lu,lu.prototype.nodeType="FunctionCall",lu.prototype.setFunction=function(e,t){this.value=e,this.inputs=t||[]},lu.prototype.getFunction=function(){return this.value},lu.prototype.getType=function(e){return this.value.getType(e)},lu.prototype.generate=function(e,t){for(var n=this.getType(e),r=this.value,i=r.build(e,t)+"( ",o=[],a=0;a<r.inputs.length;a++){var s=r.inputs[a],c=this.inputs[a]||this.inputs[s.name];o.push(c.build(e,e.getTypeByFormat(s.type)))}return i+=o.join(", ")+" )",e.format(i,n,t)},lu.prototype.copy=function(e){for(var t in na.prototype.copy.call(this,e),e.inputs)this.inputs[t]=e.inputs[t];this.value=e.value},lu.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t){var n=this.value;if((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,n.inputs.length){t.inputs={};for(var r=0;r<n.inputs.length;r++){var i=n.inputs[r],o=this.inputs[r]||this.inputs[i.name];t.inputs[i.name]=o.toJSON(e).uuid}}}return t},hu.prototype={constructor:hu,update:function(e){return++this.id,this.time+=e,this.delta=e,this},setRenderer:function(e){return this.renderer=e,this},setRenderTexture:function(e){return this.renderTexture=e,this},updateNode:function(e){return e.frameId===this.id?this:(e.updateFrame(this),e.frameId=this.id,this)}},du.prototype=Object.create(ta.prototype),du.prototype.constructor=du,du.prototype.nodeType="Var",du.prototype.getType=function(e){return e.getTypeByFormat(this.type)},du.prototype.generate=function(e,t){var n=e.getVar(this.uuid,this.type);return this.value&&e.isShader("vertex")&&e.addNodeCode(n.name+" = "+this.value.build(e,this.getType(e))+";"),e.format(n.name,this.getType(e),t)},du.prototype.copy=function(e){ta.prototype.copy.call(this,e),this.type=e.type,this.value=e.value},du.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).type=this.type,this.value&&(t.value=this.value.toJSON(e).uuid)),t},fu.Nodes={blurX:new ra(["vec4 blurX( sampler2D texture, vec2 uv, float s ) {","\tvec4 sum = vec4( 0.0 );","\tsum += texture2D( texture, vec2( uv.x - 4.0 * s, uv.y ) ) * 0.051;","\tsum += texture2D( texture, vec2( uv.x - 3.0 * s, uv.y ) ) * 0.0918;","\tsum += texture2D( texture, vec2( uv.x - 2.0 * s, uv.y ) ) * 0.12245;","\tsum += texture2D( texture, vec2( uv.x - 1.0 * s, uv.y ) ) * 0.1531;","\tsum += texture2D( texture, vec2( uv.x, uv.y ) ) * 0.1633;","\tsum += texture2D( texture, vec2( uv.x + 1.0 * s, uv.y ) ) * 0.1531;","\tsum += texture2D( texture, vec2( uv.x + 2.0 * s, uv.y ) ) * 0.12245;","\tsum += texture2D( texture, vec2( uv.x + 3.0 * s, uv.y ) ) * 0.0918;","\tsum += texture2D( texture, vec2( uv.x + 4.0 * s, uv.y ) ) * 0.051;","\treturn sum * .667;","}"].join("\n")),blurY:new ra(["vec4 blurY( sampler2D texture, vec2 uv, float s ) {","\tvec4 sum = vec4( 0.0 );","\tsum += texture2D( texture, vec2( uv.x, uv.y - 4.0 * s ) ) * 0.051;","\tsum += texture2D( texture, vec2( uv.x, uv.y - 3.0 * s ) ) * 0.0918;","\tsum += texture2D( texture, vec2( uv.x, uv.y - 2.0 * s ) ) * 0.12245;","\tsum += texture2D( texture, vec2( uv.x, uv.y - 1.0 * s ) ) * 0.1531;","\tsum += texture2D( texture, vec2( uv.x, uv.y ) ) * 0.1633;","\tsum += texture2D( texture, vec2( uv.x, uv.y + 1.0 * s ) ) * 0.1531;","\tsum += texture2D( texture, vec2( uv.x, uv.y + 2.0 * s ) ) * 0.12245;","\tsum += texture2D( texture, vec2( uv.x, uv.y + 3.0 * s ) ) * 0.0918;","\tsum += texture2D( texture, vec2( uv.x, uv.y + 4.0 * s ) ) * 0.051;","\treturn sum * .667;","}"].join("\n"))},fu.prototype=Object.create(na.prototype),fu.prototype.constructor=fu,fu.prototype.nodeType="Blur",fu.prototype.updateFrame=function(e){if(this.size)this.horizontal.value=this.radius.x/this.size.x,this.vertical.value=this.radius.y/this.size.y;else if(this.value.value&&this.value.value.image){var t=this.value.value.image;this.horizontal.value=this.radius.x/t.width,this.vertical.value=this.radius.y/t.height}},fu.prototype.generate=function(e,t){if(e.isShader("fragment")){var n,r=[],i=e.include(fu.Nodes.blurX),o=e.include(fu.Nodes.blurY);return this.blurX&&r.push(i+"( "+this.value.build(e,"sampler2D")+", "+this.uv.build(e,"v2")+", "+this.horizontal.build(e,"f")+" )"),this.blurY&&r.push(o+"( "+this.value.build(e,"sampler2D")+", "+this.uv.build(e,"v2")+", "+this.vertical.build(e,"f")+" )"),n=2==r.length?"( "+r.join(" + ")+" / 2.0 )":r.length?"( "+r[0]+" )":"vec4( 0.0 )",e.format(n,this.getType(e),t)}return console.warn("BlurNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)},fu.prototype.copy=function(e){na.prototype.copy.call(this,e),this.value=e.value,this.uv=e.uv,this.radius=e.radius,void 0!==e.size&&(this.size=new x(e.size.x,e.size.y)),this.blurX=e.blurX,this.blurY=e.blurY},fu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.uv=this.uv.toJSON(e).uuid,t.radius=this.radius.toJSON(e).uuid,this.size&&(t.size={x:this.size.x,y:this.size.y}),t.blurX=this.blurX,t.blurY=this.blurY),t},pu.Nodes=function(){var e=new pa("vec3 LUMA vec3( 0.2125, 0.7154, 0.0721 )");return{LUMA:e,luminance:new ra(["float luminance( vec3 rgb ) {","\treturn dot( rgb, LUMA );","}"].join("\n"),[e])}}(),pu.prototype=Object.create(na.prototype),pu.prototype.constructor=pu,pu.prototype.nodeType="Luminance",pu.prototype.generate=function(e,t){var n=e.include(pu.Nodes.luminance);return e.format(n+"( "+this.rgb.build(e,"v3")+" )",this.getType(e),t)},pu.prototype.copy=function(e){na.prototype.copy.call(this,e),this.rgb=e.rgb},pu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).rgb=this.rgb.toJSON(e).uuid),t},mu.Nodes={hue:new ra(["vec3 hue(vec3 rgb, float adjustment) {","\tconst mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.595716, -0.274453, -0.321263, 0.211456, -0.522591, 0.311135);","\tconst mat3 YIQtoRGB = mat3(1.0, 0.9563, 0.6210, 1.0, -0.2721, -0.6474, 1.0, -1.107, 1.7046);","\tvec3 yiq = RGBtoYIQ * rgb;","\tfloat hue = atan(yiq.z, yiq.y) + adjustment;","\tfloat chroma = sqrt(yiq.z * yiq.z + yiq.y * yiq.y);","\treturn YIQtoRGB * vec3(yiq.x, chroma * cos(hue), chroma * sin(hue));","}"].join("\n")),saturation:new ra(["vec3 saturation(vec3 rgb, float adjustment) {","\tvec3 intensity = vec3( luminance( rgb ) );","\treturn mix( intensity, rgb, adjustment );","}"].join("\n"),[pu.Nodes.luminance]),vibrance:new ra(["vec3 vibrance(vec3 rgb, float adjustment) {","\tfloat average = (rgb.r + rgb.g + rgb.b) / 3.0;","\tfloat mx = max(rgb.r, max(rgb.g, rgb.b));","\tfloat amt = (mx - average) * (-3.0 * adjustment);","\treturn mix(rgb.rgb, vec3(mx), amt);","}"].join("\n"))},mu.SATURATION="saturation",mu.HUE="hue",mu.VIBRANCE="vibrance",mu.BRIGHTNESS="brightness",mu.CONTRAST="contrast",mu.prototype=Object.create(na.prototype),mu.prototype.constructor=mu,mu.prototype.nodeType="ColorAdjustment",mu.prototype.generate=function(e,t){var n=this.rgb.build(e,"v3"),r=this.adjustment.build(e,"f");switch(this.method){case mu.BRIGHTNESS:return e.format("( "+n+" + "+r+" )",this.getType(e),t);case mu.CONTRAST:return e.format("( "+n+" * "+r+" )",this.getType(e),t)}var i=e.include(mu.Nodes[this.method]);return e.format(i+"( "+n+", "+r+" )",this.getType(e),t)},mu.prototype.copy=function(e){na.prototype.copy.call(this,e),this.rgb=e.rgb,this.adjustment=e.adjustment,this.method=e.method},mu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).rgb=this.rgb.toJSON(e).uuid,t.adjustment=this.adjustment.toJSON(e).uuid,t.method=this.method),t},vu.prototype=Object.create(la.prototype),vu.prototype.constructor=vu,vu.prototype.nodeType="Int",vu.prototype.generateReadonly=function(e,t,n,r,i,o){return e.format(this.value,r,t)},vu.prototype.copy=function(e){la.prototype.copy.call(this,e),this.value=e.value},vu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,!0===this.readonly&&(t.readonly=!0)),t},gu.prototype=Object.create(la.prototype),gu.prototype.constructor=gu,gu.prototype.nodeType="Matrix3",Object.defineProperties(gu.prototype,{elements:{set:function(e){this.value.elements=e},get:function(){return this.value.elements}}}),gu.prototype.generateReadonly=function(e,t,n,r,i,o){return e.format("mat3( "+this.value.elements.join(", ")+" )",r,t)},gu.prototype.copy=function(e){la.prototype.copy.call(this,e),this.value.fromArray(e.elements)},gu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).elements=this.value.elements.concat()),t},yu.prototype=Object.create(la.prototype),yu.prototype.constructor=yu,yu.prototype.nodeType="Matrix4",Object.defineProperties(yu.prototype,{elements:{set:function(e){this.value.elements=e},get:function(){return this.value.elements}}}),yu.prototype.generateReadonly=function(e,t,n,r,i,o){return e.format("mat4( "+this.value.elements.join(", ")+" )",r,t)},yu.prototype.copy=function(e){la.prototype.copy.call(this,e),this.scope.value.fromArray(e.elements)},yu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).elements=this.value.elements.concat()),t},bu.prototype=Object.create(la.prototype),bu.prototype.constructor=bu,bu.prototype.nodeType="Property",Object.defineProperties(bu.prototype,{value:{get:function(){return this.object[this.property]},set:function(e){this.object[this.property]=e}}}),bu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,t.property=this.property),t},xu.ADD="+",xu.SUB="-",xu.MUL="*",xu.DIV="/",xu.prototype=Object.create(na.prototype),xu.prototype.constructor=xu,xu.prototype.nodeType="Operator",xu.prototype.getType=function(e){var t=this.a.getType(e),n=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(n)>e.getTypeLength(t)?n:t},xu.prototype.generate=function(e,t){e.getNodeData(this);var n=this.getType(e),r=this.a.build(e,n),i=this.b.build(e,n);return e.format("( "+r+" "+this.op+" "+i+" )",n,t)},xu.prototype.copy=function(e){na.prototype.copy.call(this,e),this.a=e.a,this.b=e.b,this.op=e.op},xu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).a=this.a.toJSON(e).uuid,t.b=this.b.toJSON(e).uuid,t.op=this.op),t},wu.prototype=Object.create(na.prototype),wu.prototype.constructor=wu,wu.prototype.nodeType="Reflector",wu.prototype.setMirror=function(e){this.mirror=e,this.textureMatrix=new yu(this.mirror.material.uniforms.textureMatrix.value),this.localPosition=new ca(ca.LOCAL),this.uv=new xu(this.textureMatrix,this.localPosition,xu.MUL),this.uvResult=new xu(null,this.uv,xu.ADD),this.texture=new Gc(this.mirror.material.uniforms.tDiffuse.value,this.uv,null,!0)},wu.prototype.generate=function(e,t){return e.isShader("fragment")?(this.uvResult.a=this.offset,this.texture.uv=this.offset?this.uvResult:this.uv,"sampler2D"===t?this.texture.build(e,t):e.format(this.texture.build(e,this.type),this.type,t)):(console.warn("ReflectorNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.type,t))},wu.prototype.copy=function(e){InputNode.prototype.copy.call(this,e),this.scope.mirror=e.mirror},wu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).mirror=this.mirror.uuid,this.offset&&(t.offset=this.offset.toJSON(e).uuid)),t},_u.prototype=Object.create(Gc.prototype),_u.prototype.constructor=_u,_u.prototype.nodeType="RTT",_u.prototype.build=function(e,t,n){var r=new $c;return r.nodes=e.nodes,r.updaters=e.updaters,this.material.fragment.value=this.input,this.material.build({builder:r}),Gc.prototype.build.call(this,e,t,n)},_u.prototype.updateFramesaveTo=function(e){if(this.saveTo.render=!1,this.saveTo!==this.saveToCurrent){this.saveToMaterial&&this.saveToMaterial.dispose();var t=new nu;t.fragment.value=this,t.build();var n=new Yn,r=new fn(new tr(2,2),t);r.frustumCulled=!1,n.add(r),this.saveToScene=n,this.saveToMaterial=t}this.saveToCurrent=this.saveTo,e.renderer.render(this.saveToScene,this.camera,this.saveTo.renderTarget,this.saveTo.clear)},_u.prototype.updateFrame=function(e){e.renderer?(this.saveTo&&!1===this.saveTo.render&&this.updateFramesaveTo(e),this.render&&(this.material.uniforms.renderTexture&&(this.material.uniforms.renderTexture.value=e.renderTexture),e.renderer.render(this.scene,this.camera,this.renderTarget,this.clear)),this.saveTo&&!0===this.saveTo.render&&this.updateFramesaveTo(e)):console.warn("RTTNode need a renderer in NodeFrame")},_u.prototype.copy=function(e){Gc.prototype.copy.call(this,e),this.saveTo=e.saveTo},_u.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=Gc.prototype.toJSON.call(this,e),this.saveTo&&(t.saveTo=this.saveTo.toJSON(e).uuid)),t},Su.prototype=Object.create(Gc.prototype),Su.prototype.constructor=Su,Su.prototype.nodeType="Screen",Su.prototype.isUnique=function(){return!0},Su.prototype.getTexture=function(e,t){return la.prototype.generate.call(this,e,t,this.getUuid(),"t","renderTexture")},Mu.prototype=Object.create(ta.prototype),Mu.prototype.constructor=Mu,Mu.prototype.nodeType="Standard",Mu.prototype.build=function(e){var t;if(e.define(this.clearCoat||this.clearCoatRoughness?"PHYSICAL":"STANDARD"),e.requires.lights=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){var n=this.position?this.position.parseAndBuildCode(e,"v3",{cache:"position"}):void 0;e.mergeUniform(Xn.merge([Ci.fog,Ci.lights])),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <shadowmap_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#ifndef FLAT_SHADED","\tvNormal = normalize( transformedNormal );","#endif","#include <begin_vertex>"];n&&r.push(n.code,n.result?"transformed = "+n.result+";":""),r.push("#include <morphtarget_vertex>","#include <skinning_vertex>","#include <project_vertex>","#include <fog_vertex>","#include <logdepthbuf_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),t=r.join("\n")}else{var i={bias:su,gamma:!0},o={gamma:!0},a=!e.isDefined("STANDARD");this.color.parse(e,{slot:"color",context:o}),this.roughness.parse(e),this.metalness.parse(e),this.alpha&&this.alpha.parse(e),this.normal&&this.normal.parse(e),this.clearCoat&&this.clearCoat.parse(e),this.clearCoatRoughness&&this.clearCoatRoughness.parse(e),this.reflectivity&&this.reflectivity.parse(e),this.light&&this.light.parse(e,{cache:"light"}),this.ao&&this.ao.parse(e),this.ambient&&this.ambient.parse(e),this.shadow&&this.shadow.parse(e),this.emissive&&this.emissive.parse(e,{slot:"emissive"}),this.environment&&this.environment.parse(e,{cache:"env",context:i,slot:"environment"});var s=this.color.buildCode(e,"c",{slot:"color",context:o}),c=this.roughness.buildCode(e,"f"),u=this.metalness.buildCode(e,"f"),l=this.alpha?this.alpha.buildCode(e,"f"):void 0,h=this.normal?this.normal.buildCode(e,"v3"):void 0,d=this.clearCoat?this.clearCoat.buildCode(e,"f"):void 0,f=this.clearCoatRoughness?this.clearCoatRoughness.buildCode(e,"f"):void 0,p=this.reflectivity?this.reflectivity.buildCode(e,"f"):void 0,m=this.light?this.light.buildCode(e,"v3",{cache:"light"}):void 0,v=this.ao?this.ao.buildCode(e,"f"):void 0,g=this.ambient?this.ambient.buildCode(e,"c"):void 0,y=this.shadow?this.shadow.buildCode(e,"c"):void 0,b=this.emissive?this.emissive.buildCode(e,"c",{slot:"emissive"}):void 0,x=this.environment?this.environment.buildCode(e,"c",{cache:"env",context:i,slot:"environment"}):void 0,w=a&&x?this.environment.buildCode(e,"c",{cache:"clearCoat",context:i,slot:"environment"}):void 0;e.requires.transparent=void 0!==l,e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>","#include <logdepthbuf_pars_fragment>","#include <logdepthbuf_vertex>"].join("\n"));r=["#include <clipping_planes_fragment>","\t#include <normal_fragment_begin>","\tPhysicalMaterial material;","\tmaterial.diffuseColor = vec3( 1.0 );",s.code,"\tvec3 diffuseColor = "+s.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","#include <logdepthbuf_fragment>",c.code,"\tfloat roughnessFactor = "+c.result+";",u.code,"\tfloat metalnessFactor = "+u.result+";"];l&&r.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),h&&r.push(h.code,"normal = "+h.result+";"),r.push("material.diffuseColor = "+(m?"vec3( 1.0 )":"diffuseColor * (1.0 - metalnessFactor)")+";","material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );"),d?r.push(d.code,"material.clearCoat = saturate( "+d.result+" );"):a&&r.push("material.clearCoat = 0.0;"),f?r.push(f.code,"material.clearCoatRoughness = clamp( "+f.result+", 0.04, 1.0 );"):a&&r.push("material.clearCoatRoughness = 0.0;"),p?r.push(p.code,"material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( "+p.result+" ) ), diffuseColor, metalnessFactor );"):r.push("material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor, metalnessFactor );"),r.push("#include <lights_fragment_begin>"),m&&(r.push(m.code,"reflectedLight.directDiffuse = "+m.result+";"),r.push("diffuseColor *= 1.0 - metalnessFactor;","reflectedLight.directDiffuse *= diffuseColor;","reflectedLight.indirectDiffuse *= diffuseColor;")),v&&r.push(v.code,"reflectedLight.indirectDiffuse *= "+v.result+";","float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );","reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, "+v.result+", material.specularRoughness );"),g&&r.push(g.code,"reflectedLight.indirectDiffuse += "+g.result+";"),y&&r.push(y.code,"reflectedLight.directDiffuse *= "+y.result+";","reflectedLight.directSpecular *= "+y.result+";"),b&&r.push(b.code,"reflectedLight.directDiffuse += "+b.result+";"),x&&(r.push(x.code),w&&r.push(w.code,"clearCoatRadiance += "+w.result+";"),r.push("radiance += "+x.result+";")),r.push("#include <lights_fragment_end>"),r.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),l?r.push("gl_FragColor = vec4( outgoingLight, "+l.result+" );"):r.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),r.push("#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>","#include <premultiplied_alpha_fragment>","#include <dithering_fragment>"),t=r.join("\n")}return t},Mu.prototype.copy=function(e){ta.prototype.copy.call(this,e),e.position&&(this.position=e.position),this.color=e.color,this.roughness=e.roughness,this.metalness=e.metalness,e.alpha&&(this.alpha=e.alpha),e.normal&&(this.normal=e.normal),e.clearCoat&&(this.clearCoat=e.clearCoat),e.clearCoatRoughness&&(this.clearCoatRoughness=e.clearCoatRoughness),e.reflectivity&&(this.reflectivity=e.reflectivity),e.light&&(this.light=e.light),e.shadow&&(this.shadow=e.shadow),e.ao&&(this.ao=e.ao),e.emissive&&(this.emissive=e.emissive),e.ambient&&(this.ambient=e.ambient),e.environment&&(this.environment=e.environment)},Mu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),t.color=this.color.toJSON(e).uuid,t.roughness=this.roughness.toJSON(e).uuid,t.metalness=this.metalness.toJSON(e).uuid,this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.normal&&(t.normal=this.normal.toJSON(e).uuid),this.clearCoat&&(t.clearCoat=this.clearCoat.toJSON(e).uuid),this.clearCoatRoughness&&(t.clearCoatRoughness=this.clearCoatRoughness.toJSON(e).uuid),this.reflectivity&&(t.reflectivity=this.reflectivity.toJSON(e).uuid),this.light&&(t.light=this.light.toJSON(e).uuid),this.shadow&&(t.shadow=this.shadow.toJSON(e).uuid),this.ao&&(t.ao=this.ao.toJSON(e).uuid),this.emissive&&(t.emissive=this.emissive.toJSON(e).uuid),this.ambient&&(t.ambient=this.ambient.toJSON(e).uuid),this.environment&&(t.environment=this.environment.toJSON(e).uuid)),t},Tu.prototype=Object.create(ta.prototype),Tu.prototype.constructor=Tu,Tu.prototype.nodeType="Switch",Tu.prototype.getType=function(e){return e.getTypeFromLength(this.components.length)},Tu.prototype.generate=function(e,t){var n=this.node.getType(e),r=this.node.build(e,n),i=e.getTypeLength(n)-1;if(i>0){var o,a=0,s=e.colorToVectorProperties(this.components),c=s.length;for(o=0;o<c;o++)a=Math.max(a,e.getIndexByElement(s.charAt(o)));for(a>i&&(a=i),r+=".",o=0;o<c;o++){s.charAt(o);var u=e.getIndexByElement(s.charAt(o));u>a&&(u=a),r+=e.getElementByIndex(u)}return e.format(r,this.getType(e),t)}return e.format(r,n,t)},Tu.prototype.copy=function(e){ta.prototype.copy.call(this,e),this.node=e.node,this.components=e.components},Tu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).node=this.node.toJSON(e).uuid,t.components=this.components),t},Au.Nodes={perturbNormal2Arb:new ra(["vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 map, vec2 mUv, vec2 normalScale ) {","\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );","\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );","\tvec2 st0 = dFdx( mUv.st );","\tvec2 st1 = dFdy( mUv.st );","\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );","\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );","\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );","\tvec3 N = normalize( surf_norm );","\tmat3 tsn = mat3( S, T, N );","\tvec3 mapN = map * 2.0 - 1.0;","\tmapN.xy *= normalScale;","\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );","\treturn normalize( tsn * mapN );","}"].join("\n"),null,{derivatives:!0})},Au.prototype=Object.create(na.prototype),Au.prototype.constructor=Au,Au.prototype.nodeType="NormalMap",Au.prototype.generate=function(e,t){if(e.isShader("fragment")){var n=e.include(Au.Nodes.perturbNormal2Arb);return this.normal=this.normal||new ua,this.position=this.position||new ca(ca.VIEW),this.uv=this.uv||new sa,e.format(n+"( -"+this.position.build(e,"v3")+", "+this.normal.build(e,"v3")+", "+this.value.build(e,"v3")+", "+this.uv.build(e,"v2")+", "+this.scale.build(e,"v2")+" )",this.getType(e),t)}return console.warn("NormalMapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)},Au.prototype.copy=function(e){na.prototype.copy.call(this,e),this.value=e.value,this.scale=e.scale},Au.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.scale=this.scale.toJSON(e).uuid),t},Eu.prototype=Object.create(Mu.prototype),Eu.prototype.constructor=Eu,Eu.prototype.nodeType="MeshStandard",Eu.prototype.build=function(e){var t=this.properties,n=this.inputs;if(e.isShader("fragment")){var r=e.findNode(t.color,n.color),i=e.resolve(t.map);this.color=i?new xu(r,i,xu.MUL):r;var o=e.findNode(t.roughness,n.roughness),a=e.resolve(t.roughnessMap);this.roughness=a?new xu(o,new Tu(a,"g"),xu.MUL):o;var s=e.findNode(t.metalness,n.metalness),c=e.resolve(t.metalnessMap);this.metalness=c?new xu(s,new Tu(c,"b"),xu.MUL):s,t.normalMap?(this.normal=new Au(e.resolve(t.normalMap)),this.normal.scale=e.findNode(t.normalScale,n.normalScale)):this.normal=void 0,this.environment=e.resolve(t.envMap)}return Mu.prototype.build.call(this,e)},Eu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),console.warn(".toJSON not implemented in",this)),t},Cu.prototype=Object.create(nu.prototype),Cu.prototype.constructor=Cu,Dc.addShortcuts(Cu.prototype,"properties",["color","roughness","metalness","map","normalMap","normalScale","metalnessMap","roughnessMap","envMap"]),Pu.prototype=Object.create(ta.prototype),Pu.prototype.constructor=Pu,Pu.prototype.nodeType="Phong",Pu.prototype.build=function(e){var t;if(e.define("PHONG"),e.requires.lights=!0,e.isShader("vertex")){var n=this.position?this.position.parseAndBuildCode(e,"v3",{cache:"position"}):void 0;e.mergeUniform(Xn.merge([Ci.fog,Ci.lights])),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <shadowmap_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#ifndef FLAT_SHADED","\tvNormal = normalize( transformedNormal );","#endif","#include <begin_vertex>"];n&&r.push(n.code,n.result?"transformed = "+n.result+";":""),r.push("\t#include <morphtarget_vertex>","\t#include <skinning_vertex>","\t#include <project_vertex>","\t#include <fog_vertex>","\t#include <logdepthbuf_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),t=r.join("\n")}else{this.color.parse(e,{slot:"color"}),this.specular.parse(e),this.shininess.parse(e),this.alpha&&this.alpha.parse(e),this.normal&&this.normal.parse(e),this.light&&this.light.parse(e,{cache:"light"}),this.ao&&this.ao.parse(e),this.ambient&&this.ambient.parse(e),this.shadow&&this.shadow.parse(e),this.emissive&&this.emissive.parse(e,{slot:"emissive"}),this.environment&&this.environment.parse(e,{slot:"environment"}),this.environmentAlpha&&this.environment&&this.environmentAlpha.parse(e);var i=this.color.buildCode(e,"c",{slot:"color"}),o=this.specular.buildCode(e,"c"),a=this.shininess.buildCode(e,"f"),s=this.alpha?this.alpha.buildCode(e,"f"):void 0,c=this.normal?this.normal.buildCode(e,"v3"):void 0,u=this.light?this.light.buildCode(e,"v3",{cache:"light"}):void 0,l=this.ao?this.ao.buildCode(e,"f"):void 0,h=this.ambient?this.ambient.buildCode(e,"c"):void 0,d=this.shadow?this.shadow.buildCode(e,"c"):void 0,f=this.emissive?this.emissive.buildCode(e,"c",{slot:"emissive"}):void 0,p=this.environment?this.environment.buildCode(e,"c",{slot:"environment"}):void 0,m=this.environmentAlpha&&this.environment?this.environmentAlpha.buildCode(e,"f"):void 0;e.requires.transparent=void 0!=s,e.addParsCode(["#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <logdepthbuf_pars_fragment>"].join("\n"));r=["#include <normal_fragment_begin>","\tBlinnPhongMaterial material;",i.code,"\tvec3 diffuseColor = "+i.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","#include <logdepthbuf_fragment>",o.code,"\tvec3 specular = "+o.result+";",a.code,"\tfloat shininess = max( 0.0001, "+a.result+" );","\tfloat specularStrength = 1.0;"];s&&r.push(s.code,"#ifdef ALPHATEST","if ( "+s.result+" <= ALPHATEST ) discard;","#endif"),c&&r.push(c.code,"normal = "+c.result+";"),r.push("material.diffuseColor = "+(u?"vec3( 1.0 )":"diffuseColor")+";"),r.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),u&&(r.push(u.code,"reflectedLight.directDiffuse = "+u.result+";"),r.push("reflectedLight.directDiffuse *= diffuseColor;","reflectedLight.indirectDiffuse *= diffuseColor;")),l&&r.push(l.code,"reflectedLight.indirectDiffuse *= "+l.result+";"),h&&r.push(h.code,"reflectedLight.indirectDiffuse += "+h.result+";"),d&&r.push(d.code,"reflectedLight.directDiffuse *= "+d.result+";","reflectedLight.directSpecular *= "+d.result+";"),f&&r.push(f.code,"reflectedLight.directDiffuse += "+f.result+";"),r.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),p&&(r.push(p.code),m?r.push(m.code,"outgoingLight = mix( outgoingLight, "+p.result+", "+m.result+" );"):r.push("outgoingLight = "+p.result+";")),s?r.push("gl_FragColor = vec4( outgoingLight, "+s.result+" );"):r.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),r.push("#include <premultiplied_alpha_fragment>","#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>"),t=r.join("\n")}return t},Pu.prototype.copy=function(e){ta.prototype.copy.call(this,e),e.position&&(this.position=e.position),this.color=e.color,this.specular=e.specular,this.shininess=e.shininess,e.alpha&&(this.alpha=e.alpha),e.normal&&(this.normal=e.normal),e.light&&(this.light=e.light),e.shadow&&(this.shadow=e.shadow),e.ao&&(this.ao=e.ao),e.emissive&&(this.emissive=e.emissive),e.ambient&&(this.ambient=e.ambient),e.environment&&(this.environment=e.environment),e.environmentAlpha&&(this.environmentAlpha=e.environmentAlpha)},Pu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),t.color=this.color.toJSON(e).uuid,t.specular=this.specular.toJSON(e).uuid,t.shininess=this.shininess.toJSON(e).uuid,this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.normal&&(t.normal=this.normal.toJSON(e).uuid),this.light&&(t.light=this.light.toJSON(e).uuid),this.ao&&(t.ao=this.ao.toJSON(e).uuid),this.ambient&&(t.ambient=this.ambient.toJSON(e).uuid),this.shadow&&(t.shadow=this.shadow.toJSON(e).uuid),this.emissive&&(t.emissive=this.emissive.toJSON(e).uuid),this.environment&&(t.environment=this.environment.toJSON(e).uuid),this.environmentAlpha&&(t.environmentAlpha=this.environmentAlpha.toJSON(e).uuid)),t},Lu.prototype=Object.create(ta.prototype),Lu.prototype.constructor=Lu,Lu.prototype.nodeType="Sprite",Lu.prototype.build=function(e){var t;if(e.define("SPRITE"),e.requires.lights=!1,e.requires.transparent=void 0!==this.alpha,e.isShader("vertex")){var n=this.position?this.position.parseAndBuildCode(e,"v3",{cache:"position"}):void 0;e.mergeUniform(Xn.merge([Ci.fog])),e.addParsCode(["#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n")),t=["#include <clipping_planes_fragment>","#include <begin_vertex>"],n&&t.push(n.code,n.result?"transformed = "+n.result+";":""),t.push("#include <project_vertex>","#include <fog_vertex>","mat4 modelViewMtx = modelViewMatrix;","mat4 modelMtx = modelMatrix;","modelMtx[3][0] = 0.0;","modelMtx[3][1] = 0.0;","modelMtx[3][2] = 0.0;"),this.spherical||t.push("modelMtx[1][1] = 1.0;"),t.push("modelViewMtx[0][0] = 1.0;","modelViewMtx[0][1] = 0.0;","modelViewMtx[0][2] = 0.0;"),this.spherical&&t.push("modelViewMtx[1][0] = 0.0;","modelViewMtx[1][1] = 1.0;","modelViewMtx[1][2] = 0.0;"),t.push("modelViewMtx[2][0] = 0.0;","modelViewMtx[2][1] = 0.0;","modelViewMtx[2][2] = 1.0;","gl_Position = projectionMatrix * modelViewMtx * modelMtx * vec4( transformed, 1.0 );","#include <logdepthbuf_vertex>","#include <clipping_planes_vertex>","#include <fog_vertex>")}else{e.addParsCode(["#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","#include <clipping_planes_pars_fragment>"].join("\n")),e.addCode(["#include <clipping_planes_fragment>","#include <logdepthbuf_fragment>"].join("\n")),this.alpha&&this.alpha.parse(e),this.color.parse(e,{slot:"color"});var r=this.alpha?this.alpha.buildCode(e,"f"):void 0,i=this.color.buildCode(e,"c",{slot:"color"});(t=r?[r.code,"#ifdef ALPHATEST","if ( "+r.result+" <= ALPHATEST ) discard;","#endif",i.code,"gl_FragColor = vec4( "+i.result+", "+r.result+" );"]:[i.code,"gl_FragColor = vec4( "+i.result+", 1.0 );"]).push("#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>")}return t.join("\n")},Lu.prototype.copy=function(e){ta.prototype.copy.call(this,e),e.position&&(this.position=e.position),this.color=e.color,void 0!==e.spherical&&(this.spherical=e.spherical),e.alpha&&(this.alpha=e.alpha)},Lu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),t.color=this.color.toJSON(e).uuid,!1===this.spherical&&(t.spherical=!1),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid)),t},Ou.prototype=Object.create(nu.prototype),Ou.prototype.constructor=Ou,Dc.addShortcuts(Ou.prototype,"fragment",["color","alpha","specular","shininess","normal","emissive","ambient","light","shadow","ao","environment","environmentAlpha","position"]),Nu.prototype=Object.create(nu.prototype),Nu.prototype.constructor=Nu,Dc.addShortcuts(Nu.prototype,"fragment",["color","alpha","position","spherical"]),Ru.prototype=Object.create(nu.prototype),Ru.prototype.constructor=Ru,Dc.addShortcuts(Ru.prototype,"fragment",["color","alpha","roughness","metalness","reflectivity","clearCoat","clearCoatRoughness","normal","emissive","ambient","light","shadow","ao","environment","position"]),Iu.EQUAL="==",Iu.NOT_EQUAL="!=",Iu.GREATER=">",Iu.GREATER_EQUAL=">=",Iu.LESS="<",Iu.LESS_EQUAL="<=",Iu.prototype=Object.create(na.prototype),Iu.prototype.constructor=Iu,Iu.prototype.nodeType="Cond",Iu.prototype.getType=function(e){return e.getTypeLength(this.elseNode.getType(e))>e.getTypeLength(this.ifNode.getType(e))?this.elseNode.getType(e):this.ifNode.getType(e)},Iu.prototype.getCondType=function(e){return e.getTypeLength(this.b.getType(e))>e.getTypeLength(this.a.getType(e))?this.b.getType(e):this.a.getType(e)},Iu.prototype.generate=function(e,t){var n=this.getType(e),r=this.getCondType(e),i=this.a.build(e,r),o=this.b.build(e,r),a=this.ifNode.build(e,n),s=this.elseNode.build(e,n),c="( "+[i,this.op,o,"?",a,":",s].join(" ")+" )";return e.format(c,this.getType(e),t)},Iu.prototype.copy=function(e){na.prototype.copy.call(this,e),this.a=e.a,this.b=e.b,this.ifNode=e.ifNode,this.elseNode=e.elseNode,this.op=e.op},Iu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).a=this.a.toJSON(e).uuid,t.b=this.b.toJSON(e).uuid,t.ifNode=this.ifNode.toJSON(e).uuid,t.elseNode=this.elseNode.toJSON(e).uuid,t.op=this.op),t},Du.RAD="radians",Du.DEG="degrees",Du.EXP="exp",Du.EXP2="exp2",Du.LOG="log",Du.LOG2="log2",Du.SQRT="sqrt",Du.INV_SQRT="inversesqrt",Du.FLOOR="floor",Du.CEIL="ceil",Du.NORMALIZE="normalize",Du.FRACT="fract",Du.SAT="saturate",Du.SIN="sin",Du.COS="cos",Du.TAN="tan",Du.ASIN="asin",Du.ACOS="acos",Du.ARCTAN="atan",Du.ABS="abs",Du.SIGN="sign",Du.LENGTH="length",Du.NEGATE="negate",Du.INVERT="invert",Du.prototype=Object.create(na.prototype),Du.prototype.constructor=Du,Du.prototype.nodeType="Math1",Du.prototype.getType=function(e){switch(this.method){case Du.LENGTH:return"f"}return this.a.getType(e)},Du.prototype.generate=function(e,t){var n=this.getType(e),r=this.a.build(e,n);switch(this.method){case Du.NEGATE:r="( -"+r+" )";break;case Du.INVERT:r="( 1.0 - "+r+" )";break;default:r=this.method+"( "+r+" )"}return e.format(r,n,t)},Du.prototype.copy=function(e){na.prototype.copy.call(this,e),this.a=e.a,this.method=e.method},Du.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).a=this.a.toJSON(e).uuid,t.method=this.method),t},Fu.MIN="min",Fu.MAX="max",Fu.MOD="mod",Fu.STEP="step",Fu.REFLECT="reflect",Fu.DISTANCE="distance",Fu.DOT="dot",Fu.CROSS="cross",Fu.POW="pow",Fu.prototype=Object.create(na.prototype),Fu.prototype.constructor=Fu,Fu.prototype.nodeType="Math2",Fu.prototype.getInputType=function(e){return e.getTypeLength(this.b.getType(e))>e.getTypeLength(this.a.getType(e))?this.b.getType(e):this.a.getType(e)},Fu.prototype.getType=function(e){switch(this.method){case Fu.DISTANCE:case Fu.DOT:return"f";case Fu.CROSS:return"v3"}return this.getInputType(e)},Fu.prototype.generate=function(e,t){var n,r,i=this.getInputType(e),o=e.getTypeLength(this.a.getType(e)),a=e.getTypeLength(this.b.getType(e));switch(this.method){case Fu.CROSS:n=this.a.build(e,"v3"),r=this.b.build(e,"v3");break;case Fu.STEP:n=this.a.build(e,1===o?"f":i),r=this.b.build(e,i);break;case Fu.MIN:case Fu.MAX:case Fu.MOD:n=this.a.build(e,i),r=this.b.build(e,1===a?"f":i);break;default:n=this.a.build(e,i),r=this.b.build(e,i)}return e.format(this.method+"( "+n+", "+r+" )",this.getType(e),t)},Fu.prototype.copy=function(e){na.prototype.copy.call(this,e),this.a=e.a,this.b=e.b,this.method=e.method},Fu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).a=this.a.toJSON(e).uuid,t.b=this.b.toJSON(e).uuid,t.method=this.method),t},ku.MIX="mix",ku.REFRACT="refract",ku.SMOOTHSTEP="smoothstep",ku.FACEFORWARD="faceforward",ku.prototype=Object.create(na.prototype),ku.prototype.constructor=ku,ku.prototype.nodeType="Math3",ku.prototype.getType=function(e){var t=e.getTypeLength(this.a.getType(e)),n=e.getTypeLength(this.b.getType(e)),r=e.getTypeLength(this.c.getType(e));return t>n&&t>r?this.a.getType(e):n>r?this.b.getType(e):this.c.getType(e)},ku.prototype.generate=function(e,t){e.getTypeLength(this.a.getType(e)),e.getTypeLength(this.b.getType(e));var n,r,i,o=e.getTypeLength(this.c.getType(e)),a=this.getType(e);switch(this.method){case ku.REFRACT:n=this.a.build(e,a),r=this.b.build(e,a),i=this.c.build(e,"f");break;case ku.MIX:n=this.a.build(e,a),r=this.b.build(e,a),i=this.c.build(e,1===o?"f":a);break;default:n=this.a.build(e,a),r=this.b.build(e,a),i=this.c.build(e,a)}return e.format(this.method+"( "+n+", "+r+", "+i+" )",a,t)},ku.prototype.copy=function(e){na.prototype.copy.call(this,e),this.a=e.a,this.b=e.b,this.c=e.c,this.method=e.method},ku.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).a=this.a.toJSON(e).uuid,t.b=this.b.toJSON(e).uuid,t.c=this.c.toJSON(e).uuid,t.method=this.method),t},Uu.Nodes=function(){var e=new ra(["vec2 dHdxy_fwd( sampler2D bumpMap, vec2 vUv, float bumpScale ) {","\tvec2 dSTdx = dFdx( vUv );","\tvec2 dSTdy = dFdy( vUv );","\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;","\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;","\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;","\treturn vec2( dBx, dBy );","}"].join("\n"),null,{derivatives:!0});return{dHdxy_fwd:e,perturbNormalArb:new ra(["vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {","\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );","\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );","\tvec3 vN = surf_norm;","\tvec3 R1 = cross( vSigmaY, vN );","\tvec3 R2 = cross( vN, vSigmaX );","\tfloat fDet = dot( vSigmaX, R1 );","\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );","\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );","\treturn normalize( abs( fDet ) * surf_norm - vGrad );","}"].join("\n"),[e],{derivatives:!0}),bumpToNormal:new ra(["vec3 bumpToNormal( sampler2D bumpMap, vec2 uv, float scale ) {","\tvec2 dSTdx = dFdx( uv );","\tvec2 dSTdy = dFdy( uv );","\tfloat Hll = texture2D( bumpMap, uv ).x;","\tfloat dBx = texture2D( bumpMap, uv + dSTdx ).x - Hll;","\tfloat dBy = texture2D( bumpMap, uv + dSTdy ).x - Hll;","\treturn vec3( .5 - ( dBx * scale ), .5 - ( dBy * scale ), 1.0 );","}"].join("\n"),null,{derivatives:!0})}}(),Uu.prototype=Object.create(na.prototype),Uu.prototype.constructor=Uu,Uu.prototype.nodeType="BumpMap",Uu.prototype.generate=function(e,t){if(e.isShader("fragment")){if(this.toNormalMap){var n=e.include(Uu.Nodes.bumpToNormal);return e.format(n+"( "+this.value.build(e,"sampler2D")+", "+this.value.uv.build(e,"v2")+", "+this.scale.build(e,"f")+" )",this.getType(e),t)}var r=e.include(Uu.Nodes.dHdxy_fwd),i=e.include(Uu.Nodes.perturbNormalArb);this.normal=this.normal||new ua,this.position=this.position||new ca(ca.VIEW);var o=r+"( "+this.value.build(e,"sampler2D")+", "+this.value.uv.build(e,"v2")+", "+this.scale.build(e,"f")+" )";return e.format(i+"( -"+this.position.build(e,"v3")+", "+this.normal.build(e,"v3")+", "+o+" )",this.getType(e),t)}return console.warn("BumpMapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)},Uu.prototype.copy=function(e){na.prototype.copy.call(this,e),this.value=e.value,this.scale=e.scale},Uu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.scale=this.scale.toJSON(e).uuid),t};var Bu=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(Bu.prototype,{setSize:function(e,t){},render:function(e,t,n,r,i){console.error("Pass: .render() must be implemented in derived pass.")}});var zu=function(e,t){Bu.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof qn?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Xn.clone(e.uniforms),this.material=new qn({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.camera=new Jn(-1,1,1,-1,0,1),this.scene=new Yn,this.quad=new fn(new tr(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)};function ju(){zu.call(this),this.name="",this.uuid=o.generateUUID(),this.userData={},this.textureID="renderTexture",this.input=new Su,this.material=new nu,this.needsUpdate=!0}function Vu(e,t){if(void 0===t){var n={minFilter:Ze,magFilter:Ze,format:pt,stencilBuffer:!1},r=e.getDrawingBufferSize();t=new $n(r.width,r.height,n)}this.renderer=e,this.renderTarget=t,this.output=new Su,this.material=new nu,this.camera=new Jn(-1,1,1,-1,0,1),this.scene=new Yn,this.quad=new fn(new tr(2,2),this.material),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.needsUpdate=!0}function Gu(e){na.call(this,"f"),this.uv=e||new sa}function Wu(e){na.call(this,"f"),this.uv=e||new sa}function Hu(e,t){ta.call(this),this.code=e,this.value=t}zu.prototype=Object.assign(Object.create(Bu.prototype),{constructor:zu,render:function(e,t,n,r,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}}),ju.prototype=Object.create(zu.prototype),ju.prototype.constructor=ju,ju.prototype.render=function(){this.needsUpdate&&(this.material.dispose(),this.material.fragment.value=this.input,this.needsUpdate=!1),this.uniforms=this.material.uniforms,zu.prototype.render.apply(this,arguments)},ju.prototype.copy=function(e){this.input=e.input},ju.prototype.toJSON=function(e){if((void 0===e||"string"==typeof e)&&(e={nodes:{}}),e&&!e.passes&&(e.passes={}),!e.passes[this.uuid]){var t={};t.uuid=this.uuid,t.type="NodePass",e.passes[this.uuid]=t,""!==this.name&&(t.name=this.name),"{}"!==JSON.stringify(this.userData)&&(t.userData=this.userData),t.input=this.input.toJSON(e).uuid}return e.pass=this.uuid,e},Vu.prototype={constructor:Vu,render:function(e,t,n){this.needsUpdate&&(this.material.dispose(),this.material.fragment.value=this.output,this.material.build(),this.material.uniforms.renderTexture&&(this.material.uniforms.renderTexture.value=this.renderTarget.texture),this.needsUpdate=!1),n.setRenderer(this.renderer).setRenderTexture(this.renderTarget.texture),this.renderer.render(e,t,this.renderTarget),n.updateNode(this.material),this.renderer.render(this.scene,this.camera)},setSize:function(e,t){this.renderTarget.setSize(e,t),this.renderer.setSize(e,t)},copy:function(e){this.output=e.output},toJSON:function(e){if((void 0===e||"string"==typeof e)&&(e={nodes:{}}),e&&!e.post&&(e.post={}),!e.post[this.uuid]){var t={};t.uuid=this.uuid,t.type="NodePostProcessing",e.post[this.uuid]=t,""!==this.name&&(t.name=this.name),"{}"!==JSON.stringify(this.userData)&&(t.userData=this.userData),t.output=this.output.toJSON(e).uuid}return e.post=this.uuid,e}},Gu.prototype=Object.create(na.prototype),Gu.prototype.constructor=Gu,Gu.prototype.nodeType="Noise",Gu.Nodes={checker:new ra(["float checker( vec2 uv ) {","\tfloat cx = floor( uv.x );","\tfloat cy = floor( uv.y ); ","\tfloat result = mod( cx + cy, 2.0 );","\treturn sign( result );","}"].join("\n"))},Gu.prototype.generate=function(e,t){var n=e.include(Gu.Nodes.checker);return e.format(n+"( "+this.uv.build(e,"v2")+" )",this.getType(e),t)},Gu.prototype.copy=function(e){na.prototype.copy.call(this,e),this.uv=e.uv},Gu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).uv=this.uv.toJSON(e).uuid),t},Wu.prototype=Object.create(na.prototype),Wu.prototype.constructor=Wu,Wu.prototype.nodeType="Noise",Wu.Nodes={snoise:new ra(["float snoise(vec2 co) {","\treturn fract( sin( dot( co.xy, vec2( 12.9898, 78.233 ) ) ) * 43758.5453 );","}"].join("\n"))},Wu.prototype.generate=function(e,t){var n=e.include(Wu.Nodes.snoise);return e.format(n+"( "+this.uv.build(e,"v2")+" )",this.getType(e),t)},Wu.prototype.copy=function(e){na.prototype.copy.call(this,e),this.uv=e.uv},Wu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).uv=this.uv.toJSON(e).uuid),t},Hu.prototype=Object.create(ta.prototype),Hu.prototype.constructor=Hu,Hu.prototype.nodeType="Bypass",Hu.prototype.getType=function(e){return this.value?this.value.getType(e):e.isShader("fragment")?"f":"void"},Hu.prototype.generate=function(e,t){var n=this.code.build(e,t)+";";return e.addNodeCode(n),e.isShader("vertex")?this.value?this.value.build(e,t):void 0:this.value?this.value.build(e,t):e.format("0.0","f",t)},Hu.prototype.copy=function(e){ta.prototype.copy.call(this,e),this.code=e.code,this.value=e.value},Hu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).code=this.code.toJSON(e).uuid,this.value&&(t.value=this.value.toJSON(e).uuid)),t};var Xu=Dc.elements;function qu(e,t,n,r){na.call(this,"f"),this.x=e,this.y=t,this.z=n,this.w=r}function Yu(e,t){uu.call(this,"( uvTransform * vec3( uvNode, 1 ) ).xy","vec2"),this.uv=e||new sa,this.position=t||new gu}function Ju(e,t){zc.call(this),this.params={},this.velocity=new s,this.setTarget(e),this.setParams(t)}function Qu(e,t){this.min=void 0!==e?e:new x(1/0,1/0),this.max=void 0!==t?t:new x(-1/0,-1/0)}qu.prototype=Object.create(na.prototype),qu.prototype.constructor=qu,qu.prototype.nodeType="Join",qu.prototype.getNumElements=function(){for(var e=Xu.length;e--;)if(void 0!==this[Xu[e]]){++e;break}return Math.max(e,2)},qu.prototype.getType=function(e){return e.getTypeFromLength(this.getNumElements())},qu.prototype.generate=function(e,t){for(var n=this.getType(e),r=this.getNumElements(),i=[],o=0;o<r;o++){var a=this[Xu[o]];i.push(a?a.build(e,"f"):"0.0")}var s=(r>1?e.getConstructorFromLength(r):"")+"( "+i.join(", ")+" )";return e.format(s,n,t)},qu.prototype.copy=function(e){for(var t in na.prototype.copy.call(this,e),e.inputs)this[t]=e.inputs[t]},qu.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t){(t=this.createJSONNode(e)).inputs={};for(var n=this.getNumElements(),r=0;r<n;r++){var i=this[Xu[r]];i&&(t.inputs[Xu[r]]=i.toJSON(e).uuid)}}return t},Yu.prototype=Object.create(uu.prototype),Yu.prototype.constructor=Yu,Yu.prototype.nodeType="UVTransform",Yu.prototype.generate=function(e,t){return this.keywords.uvNode=this.uv,this.keywords.uvTransform=this.position,uu.prototype.generate.call(this,e,t)},Yu.prototype.setUvTransform=function(e,t,n,r,i,o,a){o=void 0!==o?o:.5,a=void 0!==a?a:.5,this.position.value.setUvTransform(e,t,n,r,i,o,a)},Yu.prototype.copy=function(e){uu.prototype.copy.call(this,e),this.uv=e.uv,this.position=e.position},Yu.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).uv=this.uv.toJSON(e).uuid,t.position=this.position.toJSON(e).uuid),t},Ju.prototype=Object.create(zc.prototype),Ju.prototype.constructor=Ju,Ju.prototype.nodeType="Velocity",Ju.prototype.isReadonly=function(e){return!1},Ju.prototype.setParams=function(e){switch(this.params.type){case"elastic":delete this.moment,delete this.speed,delete this.springVelocity,delete this.lastVelocity}switch(this.params=e||{},this.params.type){case"elastic":this.moment=new s,this.speed=new s,this.springVelocity=new s,this.lastVelocity=new s}},Ju.prototype.setTarget=function(e){this.target&&(delete this.position,delete this.oldPosition),this.target=e,e&&(this.position=e.getWorldPosition(this.position||new s),this.oldPosition=this.position.clone())},Ju.prototype.updateFrameVelocity=function(e){this.target&&(this.position=this.target.getWorldPosition(this.position||new s),this.velocity.subVectors(this.position,this.oldPosition),this.oldPosition.copy(this.position))},Ju.prototype.updateFrame=function(e){switch(this.updateFrameVelocity(e),this.params.type){case"elastic":var t=e.delta*(this.params.fps||60),n=Math.pow(this.params.spring,t),r=Math.pow(this.params.damping,t);this.velocity.multiplyScalar(Math.exp(-this.params.damping*t)),this.velocity.add(this.springVelocity),this.velocity.add(this.speed.multiplyScalar(r).multiplyScalar(1-n)),this.speed.subVectors(this.velocity,this.lastVelocity),this.springVelocity.add(this.speed),this.springVelocity.multiplyScalar(n),this.moment.add(this.springVelocity),this.moment.multiplyScalar(r),this.lastVelocity.copy(this.velocity),this.value.copy(this.moment);break;default:this.value.copy(this.velocity)}},Ju.prototype.copy=function(e){zc.prototype.copy.call(this,e),e.target&&object.setTarget(e.target),object.setParams(e.params)},Ju.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.target&&(t.target=this.target.uuid),t.params=JSON.parse(JSON.stringify(this.params))),t},Object.assign(Qu.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new x;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("Box2: .getCenter() target is now required"),e=new x),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("Box2: .getSize() target is now required"),e=new x),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("Box2: .getParameter() target is now required"),t=new x),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("Box2: .clampPoint() target is now required"),t=new x),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new x;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var Zu=function(){fn.call(this,Zu.Geometry,new un({opacity:0,transparent:!0})),this.type="Lensflare",this.frustumCulled=!1,this.renderOrder=1/0;var e=new s,t=new Vi(new Uint8Array(768),16,16,ft);t.minFilter=Ye,t.magFilter=Ye,t.wrapS=Xe,t.wrapT=Xe,t.needsUpdate=!0;var n=new Vi(new Uint8Array(768),16,16,ft);n.minFilter=Ye,n.magFilter=Ye,n.wrapS=Xe,n.wrapT=Xe,n.needsUpdate=!0;var r=Zu.Geometry,i=new wr({uniforms:{scale:{value:null},screenPosition:{value:null}},vertexShader:["precision highp float;","uniform vec3 screenPosition;","uniform vec2 scale;","attribute vec3 position;","void main() {","\tgl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","void main() {","\tgl_FragColor = vec4( 1.0, 0.0, 1.0, 1.0 );","}"].join("\n"),depthTest:!0,depthWrite:!1,transparent:!1}),o=new wr({uniforms:{map:{value:t},scale:{value:null},screenPosition:{value:null}},vertexShader:["precision highp float;","uniform vec3 screenPosition;","uniform vec2 scale;","attribute vec3 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","\tvUV = uv;","\tgl_Position = vec4( position.xy * scale + screenPosition.xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","uniform sampler2D map;","varying vec2 vUV;","void main() {","\tgl_FragColor = texture2D( map, vUV );","}"].join("\n"),depthTest:!1,depthWrite:!1,transparent:!1}),a=new fn(r,i),c=[],u=Ku.Shader,l=new wr({uniforms:{map:{value:null},occlusionMap:{value:n},color:{value:new v(16777215)},scale:{value:new x},screenPosition:{value:new s}},vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,blending:te,transparent:!0,depthWrite:!1}),h=new fn(r,l);this.addElement=function(e){c.push(e)};var d=new x,f=new x,p=new Qu,m=new S;this.onBeforeRender=function(s,u,v){m.copy(s.getCurrentViewport());var g=m.w/m.z,y=m.z/2,b=m.w/2,x=16/m.w;if(d.set(x*g,x),p.min.set(m.x,m.y),p.max.set(m.x+(m.z-16),m.y+(m.w-16)),e.setFromMatrixPosition(this.matrixWorld),e.applyMatrix4(v.matrixWorldInverse),e.applyMatrix4(v.projectionMatrix),f.x=m.x+e.x*y+y-8,f.y=m.y+e.y*b+b-8,p.containsPoint(f)){s.copyFramebufferToTexture(f,t),(T=i.uniforms).scale.value=d,T.screenPosition.value=e,s.renderBufferDirect(v,null,r,i,a,null),s.copyFramebufferToTexture(f,n),(T=o.uniforms).scale.value=d,T.screenPosition.value=e,s.renderBufferDirect(v,null,r,o,a,null);for(var w=2*-e.x,_=2*-e.y,S=0,M=c.length;S<M;S++){var T,A=c[S];(T=l.uniforms).color.value.copy(A.color),T.map.value=A.texture,T.screenPosition.value.x=e.x+w*A.distance,T.screenPosition.value.y=e.y+_*A.distance;x=A.size/m.w,g=m.w/m.z;T.scale.value.set(x*g,x),l.uniformsNeedUpdate=!0,s.renderBufferDirect(v,null,r,l,h,null)}}},this.dispose=function(){i.dispose(),o.dispose(),l.dispose(),t.dispose(),n.dispose();for(var e=0,r=c.length;e<r;e++)c[e].texture.dispose()}};Zu.prototype=Object.create(fn.prototype),Zu.prototype.constructor=Zu,Zu.prototype.isLensflare=!0;var Ku=function(e,t,n,r){this.texture=e,this.size=t||1,this.distance=n||0,this.color=r||new v(16777215)};Ku.Shader={uniforms:{map:{value:null},occlusionMap:{value:null},color:{value:null},scale:{value:null},screenPosition:{value:null}},vertexShader:["precision highp float;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform sampler2D occlusionMap;","attribute vec3 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","\tvUV = uv;","\tvec2 pos = position.xy;","\tvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","\tvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","\tvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","\tvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","\tvVisibility =        visibility.r / 9.0;","\tvVisibility *= 1.0 - visibility.g / 9.0;","\tvVisibility *=       visibility.b / 9.0;","\tgl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","uniform sampler2D map;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","\tvec4 texture = texture2D( map, vUV );","\ttexture.a *= vVisibility;","\tgl_FragColor = texture;","\tgl_FragColor.rgb *= color;","}"].join("\n")},Zu.Geometry=function(){var e=new k,t=new Yi(new Float32Array([-1,-1,0,0,0,1,-1,0,1,0,1,1,0,1,1,-1,1,0,0,1]),5);return e.setIndex([0,1,2,0,2,3]),e.addAttribute("position",new Qi(t,3,0,!1)),e.addAttribute("uv",new Qi(t,2,3,!1)),e}();var $u=function(e,t){fn.call(this,e),this.type="Reflector";var n=this,r=void 0!==(t=t||{}).color?new v(t.color):new v(8355711),i=t.textureWidth||512,c=t.textureHeight||512,u=t.clipBias||0,l=t.shader||$u.ReflectorShader,h=void 0!==t.recursion?t.recursion:0,d=new Or,f=new s,p=new s,m=new s,g=new a,y=new s(0,0,-1),b=new S,x=new S,w=new s,_=new s,M=new S,T=new a,A=new Hn,E=new $n(i,c,{minFilter:Ze,magFilter:Ze,format:ft,stencilBuffer:!1});o.isPowerOfTwo(i)&&o.isPowerOfTwo(c)||(E.texture.generateMipmaps=!1);var C=new qn({uniforms:Xn.clone(l.uniforms),fragmentShader:l.fragmentShader,vertexShader:l.vertexShader});C.uniforms.tDiffuse.value=E.texture,C.uniforms.color.value=r,C.uniforms.textureMatrix.value=T,this.material=C,this.renderOrder=-1/0,this.onBeforeRender=function(e,t,r){if("recursion"in r.userData){if(r.userData.recursion===h)return;r.userData.recursion++}if(p.setFromMatrixPosition(n.matrixWorld),m.setFromMatrixPosition(r.matrixWorld),g.extractRotation(n.matrixWorld),f.set(0,0,1),f.applyMatrix4(g),w.subVectors(p,m),!(w.dot(f)>0)){w.reflect(f).negate(),w.add(p),g.extractRotation(r.matrixWorld),y.set(0,0,-1),y.applyMatrix4(g),y.add(m),_.subVectors(p,y),_.reflect(f).negate(),_.add(p),A.position.copy(w),A.up.set(0,1,0),A.up.applyMatrix4(g),A.up.reflect(f),A.lookAt(_),A.far=r.far,A.updateMatrixWorld(),A.projectionMatrix.copy(r.projectionMatrix),A.userData.recursion=0,T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(A.projectionMatrix),T.multiply(A.matrixWorldInverse),T.multiply(n.matrixWorld),d.setFromNormalAndCoplanarPoint(f,p),d.applyMatrix4(A.matrixWorldInverse),b.set(d.normal.x,d.normal.y,d.normal.z,d.constant);var i=A.projectionMatrix;M.x=(Math.sign(b.x)+i.elements[8])/i.elements[0],M.y=(Math.sign(b.y)+i.elements[9])/i.elements[5],M.z=-1,M.w=(1+i.elements[10])/i.elements[14],b.multiplyScalar(2/b.dot(M)),i.elements[2]=b.x,i.elements[6]=b.y,i.elements[10]=b.z+1-u,i.elements[14]=b.w,n.visible=!1;var o=e.getRenderTarget(),a=e.vr.enabled,s=e.shadowMap.autoUpdate;e.vr.enabled=!1,e.shadowMap.autoUpdate=!1,e.render(t,A,E,!0),e.vr.enabled=a,e.shadowMap.autoUpdate=s,e.setRenderTarget(o);var c=r.bounds;if(void 0!==c){var l=e.getSize(),v=e.getPixelRatio();x.x=c.x*l.width*v,x.y=c.y*l.height*v,x.z=c.z*l.width*v,x.w=c.w*l.height*v,e.state.viewport(x)}n.visible=!0}},this.getRenderTarget=function(){return E}};$u.prototype=Object.create(fn.prototype),$u.prototype.constructor=$u,$u.ReflectorShader={uniforms:{color:{type:"c",value:null},tDiffuse:{type:"t",value:null},textureMatrix:{type:"m4",value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")};var el=function(e,t){$u.call(this,e,t),this.geometry.setDrawRange(0,0)};el.prototype=Object.create($u.prototype);var tl=function(e,t){fn.call(this,e),this.type="Refractor";var n=this,r=void 0!==(t=t||{}).color?new v(t.color):new v(8355711),i=t.textureWidth||512,u=t.textureHeight||512,l=t.clipBias||0,h=t.shader||tl.RefractorShader,d=new Hn;d.matrixAutoUpdate=!1,d.userData.refractor=!0;var f=new Or,p=new a,m=new $n(i,u,{minFilter:Ze,magFilter:Ze,format:ft,stencilBuffer:!1});o.isPowerOfTwo(i)&&o.isPowerOfTwo(u)||(m.texture.generateMipmaps=!1),this.material=new qn({uniforms:Xn.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,transparent:!0}),this.material.uniforms.color.value=r,this.material.uniforms.tDiffuse.value=m.texture,this.material.uniforms.textureMatrix.value=p;var g=function(){var e=new s,t=new s,r=new a,i=new s,o=new s;return function(a){return e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(a.matrixWorld),i.subVectors(e,t),r.extractRotation(n.matrixWorld),o.set(0,0,1),o.applyMatrix4(r),i.dot(o)<0}}(),y=function(){var e=new s,t=new s,r=new c,i=new s;return function(){n.matrixWorld.decompose(t,r,i),e.set(0,0,1).applyQuaternion(r).normalize(),e.negate(),f.setFromNormalAndCoplanarPoint(e,t)}}(),b=function(){var e=new Or,t=new S,n=new S;return function(r){d.matrixWorld.copy(r.matrixWorld),d.matrixWorldInverse.getInverse(d.matrixWorld),d.projectionMatrix.copy(r.projectionMatrix),d.far=r.far,e.copy(f),e.applyMatrix4(d.matrixWorldInverse),t.set(e.normal.x,e.normal.y,e.normal.z,e.constant);var i=d.projectionMatrix;n.x=(Math.sign(t.x)+i.elements[8])/i.elements[0],n.y=(Math.sign(t.y)+i.elements[9])/i.elements[5],n.z=-1,n.w=(1+i.elements[10])/i.elements[14],t.multiplyScalar(2/t.dot(n)),i.elements[2]=t.x,i.elements[6]=t.y,i.elements[10]=t.z+1-l,i.elements[14]=t.w}}();var x=function(){var e=new S;return function(t,r,i){n.visible=!1;var o=t.getRenderTarget(),a=t.vr.enabled,s=t.shadowMap.autoUpdate;t.vr.enabled=!1,t.shadowMap.autoUpdate=!1,t.render(r,d,m,!0),t.vr.enabled=a,t.shadowMap.autoUpdate=s,t.setRenderTarget(o);var c=i.bounds;if(void 0!==c){var u=t.getSize(),l=t.getPixelRatio();e.x=c.x*u.width*l,e.y=c.y*u.height*l,e.z=c.z*u.width*l,e.w=c.w*u.height*l,t.state.viewport(e)}n.visible=!0}}();this.onBeforeRender=function(e,t,r){!0!==r.userData.refractor&&!0!=!g(r)&&(y(),function(e){p.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),p.multiply(e.projectionMatrix),p.multiply(e.matrixWorldInverse),p.multiply(n.matrixWorld)}(r),b(r),x(e,t,r))},this.getRenderTarget=function(){return m}};tl.prototype=Object.create(fn.prototype),tl.prototype.constructor=tl,tl.RefractorShader={uniforms:{color:{type:"c",value:null},tDiffuse:{type:"t",value:null},textureMatrix:{type:"m4",value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")};var nl=function(e){var t=new un({color:0,transparent:!0,opacity:.6,depthWrite:!1});fn.call(this,e.geometry,t),this.meshMatrix=e.matrixWorld,this.frustumCulled=!1,this.matrixAutoUpdate=!1};(nl.prototype=Object.create(fn.prototype)).constructor=nl,nl.prototype.update=function(){var e=new a;return function(t,n){var r=t.normal.x*n.x+t.normal.y*n.y+t.normal.z*n.z+-t.constant*n.w,i=e.elements;i[0]=r-n.x*t.normal.x,i[4]=-n.x*t.normal.y,i[8]=-n.x*t.normal.z,i[12]=-n.x*-t.constant,i[1]=-n.y*t.normal.x,i[5]=r-n.y*t.normal.y,i[9]=-n.y*t.normal.z,i[13]=-n.y*-t.constant,i[2]=-n.z*t.normal.x,i[6]=-n.z*t.normal.y,i[10]=r-n.z*t.normal.z,i[14]=-n.z*-t.constant,i[3]=-n.w*t.normal.x,i[7]=-n.w*t.normal.y,i[11]=-n.w*t.normal.z,i[15]=r-n.w*-t.constant,this.matrix.multiplyMatrices(e,this.meshMatrix)}}();var rl=function(){var e=rl.SkyShader,t=new qn({fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:Xn.clone(e.uniforms),side:Y});fn.call(this,new Un(1,1,1),t)};rl.prototype=Object.create(fn.prototype),rl.SkyShader={uniforms:{luminance:{value:1},turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new s}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const vec3 up = vec3( 0.0, 1.0, 0.0 );","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","\tfloat c = ( 0.2 * T ) * 10E-18;","\treturn 0.434 * c * MieConst;","}","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tgl_Position.z = gl_Position.w;","\tvSunDirection = normalize( sunPosition );","\tvSunE = sunIntensity( dot( vSunDirection, up ) );","\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","\tvBetaR = totalRayleigh * rayleighCoefficient;","\tvBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join("\n"),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float luminance;","uniform float mieDirectionalG;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const vec3 up = vec3( 0.0, 1.0, 0.0 );","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","\tfloat g2 = pow( g, 2.0 );","\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","const float A = 0.15;","const float B = 0.50;","const float C = 0.10;","const float D = 0.20;","const float E = 0.02;","const float F = 0.30;","const float whiteScale = 1.0748724675633854;","vec3 Uncharted2Tonemap( vec3 x ) {","\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;","}","void main() {","\tfloat zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );","\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","\tfloat sR = rayleighZenithLength * inverse;","\tfloat sM = mieZenithLength * inverse;","\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","\tfloat cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );","\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","\tvec3 betaRTheta = vBetaR * rPhase;","\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );","\tvec3 betaMTheta = vBetaM * mPhase;","\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","\tvec3 direction = normalize( vWorldPosition - cameraPos );","\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]","\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]","\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","\tvec3 L0 = vec3( 0.1 ) * Fex;","\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;","\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );","\tvec3 color = curr * whiteScale;","\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","\tgl_FragColor = vec4( retColor, 1.0 );","}"].join("\n")};var il=function(e,t){fn.call(this,e);var n=this,r=void 0!==(t=t||{}).textureWidth?t.textureWidth:512,i=void 0!==t.textureHeight?t.textureHeight:512,c=void 0!==t.clipBias?t.clipBias:0,u=void 0!==t.alpha?t.alpha:1,l=void 0!==t.time?t.time:0,h=void 0!==t.waterNormals?t.waterNormals:null,d=void 0!==t.sunDirection?t.sunDirection:new s(.70707,.70707,0),f=new v(void 0!==t.sunColor?t.sunColor:16777215),p=new v(void 0!==t.waterColor?t.waterColor:8355711),m=void 0!==t.eye?t.eye:new s(0,0,0),g=void 0!==t.distortionScale?t.distortionScale:20,y=void 0!==t.side?t.side:q,b=void 0!==t.fog&&t.fog,x=new Or,w=new s,_=new s,M=new s,T=new a,A=new s(0,0,-1),E=new S,C=new s,P=new s,L=new S,O=new a,N=new Hn,R=new $n(r,i,{minFilter:Ze,magFilter:Ze,format:ft,stencilBuffer:!1});o.isPowerOfTwo(r)&&o.isPowerOfTwo(i)||(R.texture.generateMipmaps=!1);var I={uniforms:Xn.merge([Ci.fog,Ci.lights,{normalSampler:{value:null},mirrorSampler:{value:null},alpha:{value:1},time:{value:0},size:{value:1},distortionScale:{value:20},textureMatrix:{value:new a},sunColor:{value:new v(8355711)},sunDirection:{value:new s(.70707,.70707,0)},eye:{value:new s},waterColor:{value:new v(5592405)}}]),vertexShader:["uniform mat4 textureMatrix;","uniform float time;","varying vec4 mirrorCoord;","varying vec4 worldPosition;",Ei.fog_pars_vertex,Ei.shadowmap_pars_vertex,"void main() {","\tmirrorCoord = modelMatrix * vec4( position, 1.0 );","\tworldPosition = mirrorCoord.xyzw;","\tmirrorCoord = textureMatrix * mirrorCoord;","\tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * mvPosition;",Ei.fog_vertex,Ei.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform sampler2D mirrorSampler;","uniform float alpha;","uniform float time;","uniform float size;","uniform float distortionScale;","uniform sampler2D normalSampler;","uniform vec3 sunColor;","uniform vec3 sunDirection;","uniform vec3 eye;","uniform vec3 waterColor;","varying vec4 mirrorCoord;","varying vec4 worldPosition;","vec4 getNoise( vec2 uv ) {","\tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);","\tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );","\tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );","\tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );","\tvec4 noise = texture2D( normalSampler, uv0 ) +","\t\ttexture2D( normalSampler, uv1 ) +","\t\ttexture2D( normalSampler, uv2 ) +","\t\ttexture2D( normalSampler, uv3 );","\treturn noise * 0.5 - 1.0;","}","void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {","\tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );","\tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );","\tspecularColor += pow( direction, shiny ) * sunColor * spec;","\tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;","}",Ei.common,Ei.packing,Ei.bsdfs,Ei.fog_pars_fragment,Ei.lights_pars_begin,Ei.shadowmap_pars_fragment,Ei.shadowmask_pars_fragment,"void main() {","\tvec4 noise = getNoise( worldPosition.xz * size );","\tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );","\tvec3 diffuseLight = vec3(0.0);","\tvec3 specularLight = vec3(0.0);","\tvec3 worldToEye = eye-worldPosition.xyz;","\tvec3 eyeDirection = normalize( worldToEye );","\tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );","\tfloat distance = length(worldToEye);","\tvec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;","\tvec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.z + distortion ) );","\tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );","\tfloat rf0 = 0.3;","\tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );","\tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;","\tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ) * getShadowMask(), ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance);","\tvec3 outgoingLight = albedo;","\tgl_FragColor = vec4( outgoingLight, alpha );",Ei.tonemapping_fragment,Ei.fog_fragment,"}"].join("\n")},D=new qn({fragmentShader:I.fragmentShader,vertexShader:I.vertexShader,uniforms:Xn.clone(I.uniforms),transparent:!0,lights:!0,side:y,fog:b});D.uniforms.mirrorSampler.value=R.texture,D.uniforms.textureMatrix.value=O,D.uniforms.alpha.value=u,D.uniforms.time.value=l,D.uniforms.normalSampler.value=h,D.uniforms.sunColor.value=f,D.uniforms.waterColor.value=p,D.uniforms.sunDirection.value=d,D.uniforms.distortionScale.value=g,D.uniforms.eye.value=m,n.material=D,n.onBeforeRender=function(e,t,r){if(_.setFromMatrixPosition(n.matrixWorld),M.setFromMatrixPosition(r.matrixWorld),T.extractRotation(n.matrixWorld),w.set(0,0,1),w.applyMatrix4(T),C.subVectors(_,M),!(C.dot(w)>0)){C.reflect(w).negate(),C.add(_),T.extractRotation(r.matrixWorld),A.set(0,0,-1),A.applyMatrix4(T),A.add(M),P.subVectors(_,A),P.reflect(w).negate(),P.add(_),N.position.copy(C),N.up.set(0,1,0),N.up.applyMatrix4(T),N.up.reflect(w),N.lookAt(P),N.far=r.far,N.updateMatrixWorld(),N.projectionMatrix.copy(r.projectionMatrix),O.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O.multiply(N.projectionMatrix),O.multiply(N.matrixWorldInverse),x.setFromNormalAndCoplanarPoint(w,_),x.applyMatrix4(N.matrixWorldInverse),E.set(x.normal.x,x.normal.y,x.normal.z,x.constant);var i=N.projectionMatrix;L.x=(Math.sign(E.x)+i.elements[8])/i.elements[0],L.y=(Math.sign(E.y)+i.elements[9])/i.elements[5],L.z=-1,L.w=(1+i.elements[10])/i.elements[14],E.multiplyScalar(2/E.dot(L)),i.elements[2]=E.x,i.elements[6]=E.y,i.elements[10]=E.z+1-c,i.elements[14]=E.w,m.setFromMatrixPosition(r.matrixWorld);var o=e.getRenderTarget(),a=e.vr.enabled,s=e.shadowMap.autoUpdate;n.visible=!1,e.vr.enabled=!1,e.shadowMap.autoUpdate=!1,e.render(t,N,R,!0),n.visible=!0,e.vr.enabled=a,e.shadowMap.autoUpdate=s,e.setRenderTarget(o)}}};function ol(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function al(e,t){fn.call(this,e),this.type="Water2";var n=this,r=void 0!==(t=t||{}).color?new v(t.color):new v(16777215),i=t.textureWidth||512,o=t.textureHeight||512,s=t.clipBias||0,c=t.flowDirection||new x(1,0),u=t.flowSpeed||.03,l=t.reflectivity||.02,h=t.scale||1,d=t.shader||al.Water2Shader,f=new Ar,p=t.flowMap||void 0,m=t.normalMap0||f.load("textures/water/Water2_1_M_Normal.jpg"),g=t.normalMap1||f.load("textures/water/Water2_2_M_Normal.jpg"),y=.15,b=.5*y,w=new a,_=new ol;if(void 0!==$u)if(void 0!==tl){var S=new $u(e,{textureWidth:i,textureHeight:o,clipBias:s}),M=new tl(e,{textureWidth:i,textureHeight:o,clipBias:s});S.matrixAutoUpdate=!1,M.matrixAutoUpdate=!1,this.material=new qn({uniforms:Xn.merge([Ci.fog,d.uniforms]),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,transparent:!0,fog:!0}),void 0!==p?(this.material.defines.USE_FLOWMAP="",this.material.uniforms.tFlowMap={type:"t",value:p}):this.material.uniforms.flowDirection={type:"v2",value:c},m.wrapS=m.wrapT=He,g.wrapS=g.wrapT=He,this.material.uniforms.tReflectionMap.value=S.getRenderTarget().texture,this.material.uniforms.tRefractionMap.value=M.getRenderTarget().texture,this.material.uniforms.tNormalMap0.value=m,this.material.uniforms.tNormalMap1.value=g,this.material.uniforms.color.value=r,this.material.uniforms.reflectivity.value=l,this.material.uniforms.textureMatrix.value=w,this.material.uniforms.config.value.x=0,this.material.uniforms.config.value.y=b,this.material.uniforms.config.value.z=b,this.material.uniforms.config.value.w=h,this.onBeforeRender=function(e,t,r){!function(e){w.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),w.multiply(e.projectionMatrix),w.multiply(e.matrixWorldInverse),w.multiply(n.matrixWorld)}(r),function(){var e=_.getDelta(),t=n.material.uniforms.config;t.value.x+=u*e,t.value.y=t.value.x+b,t.value.x>=y?(t.value.x=0,t.value.y=b):t.value.y>=y&&(t.value.y=t.value.y-y)}(),n.visible=!1,S.matrixWorld.copy(n.matrixWorld),M.matrixWorld.copy(n.matrixWorld),S.onBeforeRender(e,t,r),M.onBeforeRender(e,t,r),n.visible=!0}}else console.error("Water2: Required component Refractor not found.");else console.error("Water2: Required component Reflector not found.")}(il.prototype=Object.create(fn.prototype)).constructor=il,Object.assign(ol.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),al.prototype=Object.create(fn.prototype),al.prototype.constructor=al,al.Water2Shader={uniforms:{color:{type:"c",value:null},reflectivity:{type:"f",value:0},tReflectionMap:{type:"t",value:null},tRefractionMap:{type:"t",value:null},tNormalMap0:{type:"t",value:null},tNormalMap1:{type:"t",value:null},textureMatrix:{type:"m4",value:null},config:{type:"v4",value:new S}},vertexShader:["#include <fog_pars_vertex>","uniform mat4 textureMatrix;","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","void main() {","\tvUv = uv;","\tvCoord = textureMatrix * vec4( position, 1.0 );","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvToEye = cameraPosition - worldPosition.xyz;","\tvec4 mvPosition =  viewMatrix * worldPosition;","\tgl_Position = projectionMatrix * mvPosition;","\t#include <fog_vertex>","}"].join("\n"),fragmentShader:["#include <common>","#include <fog_pars_fragment>","uniform sampler2D tReflectionMap;","uniform sampler2D tRefractionMap;","uniform sampler2D tNormalMap0;","uniform sampler2D tNormalMap1;","#ifdef USE_FLOWMAP","\tuniform sampler2D tFlowMap;","#else","\tuniform vec2 flowDirection;","#endif","uniform vec3 color;","uniform float reflectivity;","uniform vec4 config;","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","void main() {","\tfloat flowMapOffset0 = config.x;","\tfloat flowMapOffset1 = config.y;","\tfloat halfCycle = config.z;","\tfloat scale = config.w;","\tvec3 toEye = normalize( vToEye );","\tvec2 flow;","\t#ifdef USE_FLOWMAP","\t\tflow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;","\t#else","\t\tflow = flowDirection;","\t#endif","\tflow.x *= - 1.0;","\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );","\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );","\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;","\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );","\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );","\tfloat theta = max( dot( toEye, normal ), 0.0 );","\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );","\tvec3 coord = vCoord.xyz / vCoord.w;","\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;","\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );","\tvec4 refractColor = texture2D( tRefractionMap, uv );","\tgl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );","\t#include <tonemapping_fragment>","\t#include <encodings_fragment>","\t#include <fog_fragment>","}"].join("\n")};var sl=function(e,t,n,r){function i(e,t){return void 0!==e?e:t}this.changed=!0,this.initial=!0,this.oceanCamera=new Jn,this.oceanCamera.position.z=1,this.renderer=e,this.renderer.clearColor(16777215),this.scene=new Yn,r=r||{},this.clearColor=i(r.CLEAR_COLOR,[1,1,1,0]),this.geometryOrigin=i(r.GEOMETRY_ORIGIN,[-1e3,-1e3]),this.sunDirectionX=i(r.SUN_DIRECTION[0],-1),this.sunDirectionY=i(r.SUN_DIRECTION[1],1),this.sunDirectionZ=i(r.SUN_DIRECTION[2],1),this.oceanColor=i(r.OCEAN_COLOR,new s(.004,.016,.047)),this.skyColor=i(r.SKY_COLOR,new s(3.2,9.6,12.8)),this.exposure=i(r.EXPOSURE,.35),this.geometryResolution=i(r.GEOMETRY_RESOLUTION,32),this.geometrySize=i(r.GEOMETRY_SIZE,2e3),this.resolution=i(r.RESOLUTION,64),this.floatSize=i(r.SIZE_OF_FLOAT,4),this.windX=i(r.INITIAL_WIND[0],10),this.windY=i(r.INITIAL_WIND[1],10),this.size=i(r.INITIAL_SIZE,250),this.choppiness=i(r.INITIAL_CHOPPINESS,1.5),this.matrixNeedsUpdate=!1;var o=i(r.USE_HALF_FLOAT,!1)?st:at,a={minFilter:Ze,magFilter:Ze,wrapS:Xe,wrapT:Xe,format:pt,stencilBuffer:!1,depthBuffer:!1,premultiplyAlpha:!1,type:o},c={minFilter:Ye,magFilter:Ye,wrapS:Xe,wrapT:Xe,format:pt,stencilBuffer:!1,depthBuffer:!1,premultiplyAlpha:!1,type:o},u={minFilter:Ye,magFilter:Ye,wrapS:He,wrapT:He,format:pt,stencilBuffer:!1,depthBuffer:!1,premultiplyAlpha:!1,type:o};this.initialSpectrumFramebuffer=new $n(this.resolution,this.resolution,u),this.spectrumFramebuffer=new $n(this.resolution,this.resolution,c),this.pingPhaseFramebuffer=new $n(this.resolution,this.resolution,c),this.pongPhaseFramebuffer=new $n(this.resolution,this.resolution,c),this.pingTransformFramebuffer=new $n(this.resolution,this.resolution,c),this.pongTransformFramebuffer=new $n(this.resolution,this.resolution,c),this.displacementMapFramebuffer=new $n(this.resolution,this.resolution,a),this.normalMapFramebuffer=new $n(this.resolution,this.resolution,a);var l=Pi.ocean_sim_vertex,h=Pi.ocean_subtransform,d=Xn.clone(h.uniforms);this.materialOceanHorizontal=new qn({uniforms:d,vertexShader:l.vertexShader,fragmentShader:"#define HORIZONTAL \n"+h.fragmentShader}),this.materialOceanHorizontal.uniforms.u_transformSize={value:this.resolution},this.materialOceanHorizontal.uniforms.u_subtransformSize={value:null},this.materialOceanHorizontal.uniforms.u_input={value:null},this.materialOceanHorizontal.depthTest=!1;var f=Pi.ocean_subtransform,p=Xn.clone(f.uniforms);this.materialOceanVertical=new qn({uniforms:p,vertexShader:l.vertexShader,fragmentShader:f.fragmentShader}),this.materialOceanVertical.uniforms.u_transformSize={value:this.resolution},this.materialOceanVertical.uniforms.u_subtransformSize={value:null},this.materialOceanVertical.uniforms.u_input={value:null},this.materialOceanVertical.depthTest=!1;var m=Pi.ocean_initial_spectrum,v=Xn.clone(m.uniforms);this.materialInitialSpectrum=new qn({uniforms:v,vertexShader:l.vertexShader,fragmentShader:m.fragmentShader}),this.materialInitialSpectrum.uniforms.u_wind={value:new x},this.materialInitialSpectrum.uniforms.u_resolution={value:this.resolution},this.materialInitialSpectrum.depthTest=!1;var g=Pi.ocean_phase,y=Xn.clone(g.uniforms);this.materialPhase=new qn({uniforms:y,vertexShader:l.vertexShader,fragmentShader:g.fragmentShader}),this.materialPhase.uniforms.u_resolution={value:this.resolution},this.materialPhase.depthTest=!1;var b=Pi.ocean_spectrum,w=Xn.clone(b.uniforms);this.materialSpectrum=new qn({uniforms:w,vertexShader:l.vertexShader,fragmentShader:b.fragmentShader}),this.materialSpectrum.uniforms.u_initialSpectrum={value:null},this.materialSpectrum.uniforms.u_resolution={value:this.resolution},this.materialSpectrum.depthTest=!1;var _=Pi.ocean_normals,S=Xn.clone(_.uniforms);this.materialNormal=new qn({uniforms:S,vertexShader:l.vertexShader,fragmentShader:_.fragmentShader}),this.materialNormal.uniforms.u_displacementMap={value:null},this.materialNormal.uniforms.u_resolution={value:this.resolution},this.materialNormal.depthTest=!1;var M=Pi.ocean_main,T=Xn.clone(M.uniforms);this.materialOcean=new qn({uniforms:T,vertexShader:M.vertexShader,fragmentShader:M.fragmentShader}),this.materialOcean.uniforms.u_geometrySize={value:this.resolution},this.materialOcean.uniforms.u_displacementMap={value:this.displacementMapFramebuffer.texture},this.materialOcean.uniforms.u_normalMap={value:this.normalMapFramebuffer.texture},this.materialOcean.uniforms.u_oceanColor={value:this.oceanColor},this.materialOcean.uniforms.u_skyColor={value:this.skyColor},this.materialOcean.uniforms.u_sunDirection={value:new s(this.sunDirectionX,this.sunDirectionY,this.sunDirectionZ)},this.materialOcean.uniforms.u_exposure={value:this.exposure},this.materialOceanHorizontal.blending=0,this.materialOceanVertical.blending=0,this.materialInitialSpectrum.blending=0,this.materialPhase.blending=0,this.materialSpectrum.blending=0,this.materialNormal.blending=0,this.materialOcean.blending=0,this.screenQuad=new fn(new tr(2,2)),this.scene.add(this.screenQuad),this.generateSeedPhaseTexture(),this.generateMesh()};function cl(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new k;i.setIndex(new M(n,1)),i.addAttribute("position",new M(r,3)),Eo.call(this,i,new ln({color:t})),this.matrixAutoUpdate=!1,this.update()}function ul(e){return!isNaN(e)&&isFinite(e)}function ll(e){return e?!0!==function(e){return"[object Array]"===Object.prototype.toString.call(e)}(e)?[e]:e:[]}function hl(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}sl.prototype.generateMesh=function(){var e=new tr(this.geometrySize,this.geometrySize,this.geometryResolution,this.geometryResolution);e.rotateX(-Math.PI/2),this.oceanMesh=new fn(e,this.materialOcean)},sl.prototype.render=function(){this.scene.overrideMaterial=null,this.changed&&this.renderInitialSpectrum(),this.renderWavePhase(),this.renderSpectrum(),this.renderSpectrumFFT(),this.renderNormalMap(),this.scene.overrideMaterial=null},sl.prototype.generateSeedPhaseTexture=function(){this.pingPhase=!0;for(var e=new i.Float32Array(this.resolution*this.resolution*4),t=0;t<this.resolution;t++)for(var n=0;n<this.resolution;n++)e[t*this.resolution*4+4*n]=2*Math.random()*Math.PI,e[t*this.resolution*4+4*n+1]=0,e[t*this.resolution*4+4*n+2]=0,e[t*this.resolution*4+4*n+3]=0;this.pingPhaseTexture=new Vi(e,this.resolution,this.resolution,pt),this.pingPhaseTexture.wrapS=Xe,this.pingPhaseTexture.wrapT=Xe,this.pingPhaseTexture.type=at,this.pingPhaseTexture.needsUpdate=!0},sl.prototype.renderInitialSpectrum=function(){this.scene.overrideMaterial=this.materialInitialSpectrum,this.materialInitialSpectrum.uniforms.u_wind.value.set(this.windX,this.windY),this.materialInitialSpectrum.uniforms.u_size.value=this.size,this.renderer.render(this.scene,this.oceanCamera,this.initialSpectrumFramebuffer,!0)},sl.prototype.renderWavePhase=function(){this.scene.overrideMaterial=this.materialPhase,this.screenQuad.material=this.materialPhase,this.initial?(this.materialPhase.uniforms.u_phases.value=this.pingPhaseTexture,this.initial=!1):this.materialPhase.uniforms.u_phases.value=this.pingPhase?this.pingPhaseFramebuffer.texture:this.pongPhaseFramebuffer.texture,this.materialPhase.uniforms.u_deltaTime.value=this.deltaTime,this.materialPhase.uniforms.u_size.value=this.size,this.renderer.render(this.scene,this.oceanCamera,this.pingPhase?this.pongPhaseFramebuffer:this.pingPhaseFramebuffer),this.pingPhase=!this.pingPhase},sl.prototype.renderSpectrum=function(){this.scene.overrideMaterial=this.materialSpectrum,this.materialSpectrum.uniforms.u_initialSpectrum.value=this.initialSpectrumFramebuffer.texture,this.materialSpectrum.uniforms.u_phases.value=this.pingPhase?this.pingPhaseFramebuffer.texture:this.pongPhaseFramebuffer.texture,this.materialSpectrum.uniforms.u_choppiness.value=this.choppiness,this.materialSpectrum.uniforms.u_size.value=this.size,this.renderer.render(this.scene,this.oceanCamera,this.spectrumFramebuffer)},sl.prototype.renderSpectrumFFT=function(){var e=Math.log(this.resolution)/Math.log(2);this.scene.overrideMaterial=this.materialOceanHorizontal;for(var t=0;t<e;t++)0===t?(this.materialOceanHorizontal.uniforms.u_input.value=this.spectrumFramebuffer.texture,this.materialOceanHorizontal.uniforms.u_subtransformSize.value=Math.pow(2,t%e+1),this.renderer.render(this.scene,this.oceanCamera,this.pingTransformFramebuffer)):t%2==1?(this.materialOceanHorizontal.uniforms.u_input.value=this.pingTransformFramebuffer.texture,this.materialOceanHorizontal.uniforms.u_subtransformSize.value=Math.pow(2,t%e+1),this.renderer.render(this.scene,this.oceanCamera,this.pongTransformFramebuffer)):(this.materialOceanHorizontal.uniforms.u_input.value=this.pongTransformFramebuffer.texture,this.materialOceanHorizontal.uniforms.u_subtransformSize.value=Math.pow(2,t%e+1),this.renderer.render(this.scene,this.oceanCamera,this.pingTransformFramebuffer));this.scene.overrideMaterial=this.materialOceanVertical;for(t=e;t<2*e;t++)t===2*e-1?(this.materialOceanVertical.uniforms.u_input.value=e%2==0?this.pingTransformFramebuffer.texture:this.pongTransformFramebuffer.texture,this.materialOceanVertical.uniforms.u_subtransformSize.value=Math.pow(2,t%e+1),this.renderer.render(this.scene,this.oceanCamera,this.displacementMapFramebuffer)):t%2==1?(this.materialOceanVertical.uniforms.u_input.value=this.pingTransformFramebuffer.texture,this.materialOceanVertical.uniforms.u_subtransformSize.value=Math.pow(2,t%e+1),this.renderer.render(this.scene,this.oceanCamera,this.pongTransformFramebuffer)):(this.materialOceanVertical.uniforms.u_input.value=this.pongTransformFramebuffer.texture,this.materialOceanVertical.uniforms.u_subtransformSize.value=Math.pow(2,t%e+1),this.renderer.render(this.scene,this.oceanCamera,this.pingTransformFramebuffer))},sl.prototype.renderNormalMap=function(){this.scene.overrideMaterial=this.materialNormal,this.changed&&(this.materialNormal.uniforms.u_size.value=this.size),this.materialNormal.uniforms.u_displacementMap.value=this.displacementMapFramebuffer.texture,this.renderer.render(this.scene,this.oceanCamera,this.normalMapFramebuffer,!0)},cl.prototype=Object.create(Eo.prototype),cl.prototype.constructor=cl,cl.prototype.update=function(){var e=new y;return function(t){if(void 0!==t&&console.warn("BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),cl.prototype.setFromObject=function(e){return this.object=e,this.update(),this};var dl=function(e){if((e=e||{}).tree=this,this.nodeCount=0,this.INDEX_INSIDE_CROSS=-1,this.INDEX_OUTSIDE_OFFSET=2,this.INDEX_OUTSIDE_POS_X=ul(e.INDEX_OUTSIDE_POS_X)?e.INDEX_OUTSIDE_POS_X:0,this.INDEX_OUTSIDE_NEG_X=ul(e.INDEX_OUTSIDE_NEG_X)?e.INDEX_OUTSIDE_NEG_X:1,this.INDEX_OUTSIDE_POS_Y=ul(e.INDEX_OUTSIDE_POS_Y)?e.INDEX_OUTSIDE_POS_Y:2,this.INDEX_OUTSIDE_NEG_Y=ul(e.INDEX_OUTSIDE_NEG_Y)?e.INDEX_OUTSIDE_NEG_Y:3,this.INDEX_OUTSIDE_POS_Z=ul(e.INDEX_OUTSIDE_POS_Z)?e.INDEX_OUTSIDE_POS_Z:4,this.INDEX_OUTSIDE_NEG_Z=ul(e.INDEX_OUTSIDE_NEG_Z)?e.INDEX_OUTSIDE_NEG_Z:5,this.INDEX_OUTSIDE_MAP=[],this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_POS_X]={index:this.INDEX_OUTSIDE_POS_X,count:0,x:1,y:0,z:0},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_NEG_X]={index:this.INDEX_OUTSIDE_NEG_X,count:0,x:-1,y:0,z:0},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_POS_Y]={index:this.INDEX_OUTSIDE_POS_Y,count:0,x:0,y:1,z:0},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_NEG_Y]={index:this.INDEX_OUTSIDE_NEG_Y,count:0,x:0,y:-1,z:0},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_POS_Z]={index:this.INDEX_OUTSIDE_POS_Z,count:0,x:0,y:0,z:1},this.INDEX_OUTSIDE_MAP[this.INDEX_OUTSIDE_NEG_Z]={index:this.INDEX_OUTSIDE_NEG_Z,count:0,x:0,y:0,z:-1},this.FLAG_POS_X=1<<this.INDEX_OUTSIDE_POS_X+1,this.FLAG_NEG_X=1<<this.INDEX_OUTSIDE_NEG_X+1,this.FLAG_POS_Y=1<<this.INDEX_OUTSIDE_POS_Y+1,this.FLAG_NEG_Y=1<<this.INDEX_OUTSIDE_NEG_Y+1,this.FLAG_POS_Z=1<<this.INDEX_OUTSIDE_POS_Z+1,this.FLAG_NEG_Z=1<<this.INDEX_OUTSIDE_NEG_Z+1,this.utilVec31Search=new s,this.utilVec32Search=new s,this.scene=e.scene,this.scene){var t=new cl(new fn(new Un(1,1,1)),16711782);this.visualGeometry=t.geometry,this.visualMaterial=t.material}this.objects=[],this.objectsMap={},this.objectsData=[],this.objectsDeferred=[],this.depthMax=ul(e.depthMax)?e.depthMax:1/0,this.objectsThreshold=ul(e.objectsThreshold)?e.objectsThreshold:8,this.overlapPct=ul(e.overlapPct)?e.overlapPct:.15,this.undeferred=e.undeferred||!1,this.root=e.root instanceof pl?e.root:new pl(e)};dl.prototype={update:function(){if(this.objectsDeferred.length>0){for(var e=0,t=this.objectsDeferred.length;e<t;e++){var n=this.objectsDeferred[e];this.addDeferred(n.object,n.options)}this.objectsDeferred.length=0}},add:function(e,t){this.undeferred?(this.updateObject(e),this.addDeferred(e,t)):this.objectsDeferred.push({object:e,options:t})},addDeferred:function(e,t){var n,r,i,a,s,c;if(e instanceof fl&&(e=e.object),e.uuid||(e.uuid=o.generateUUID()),!this.objectsMap[e.uuid])if(this.objects.push(e),this.objectsMap[e.uuid]=e,t&&(a=t.useFaces,c=t.useVertices),!0===c)for(n=0,r=(s=e.geometry.vertices).length;n<r;n++)this.addObjectData(e,s[n]);else if(!0===a)for(n=0,r=(i=e.geometry.faces).length;n<r;n++)this.addObjectData(e,i[n]);else this.addObjectData(e)},addObjectData:function(e,t){var n=new fl(e,t);this.objectsData.push(n),this.root.addObject(n)},remove:function(e){var t,n,r,i,o=e;if(e instanceof fl&&(e=e.object),this.objectsMap[e.uuid]){if(this.objectsMap[e.uuid]=void 0,-1!==(r=hl(this.objects,e)))for(this.objects.splice(r,1),t=0,n=(i=this.root.removeObject(o)).length;t<n;t++)o=i[t],-1!==(r=hl(this.objectsData,o))&&this.objectsData.splice(r,1)}else this.objectsDeferred.length>0&&-1!==(r=function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(e[r][t]===n)return r;return-1}(this.objectsDeferred,"object",e))&&this.objectsDeferred.splice(r,1)},extend:function(e){var t,n,r,i;if(e instanceof dl)for(t=0,n=(r=e.objectsData).length;t<n;t++)i=r[t],this.add(i,{useFaces:i.faces,useVertices:i.vertices})},rebuild:function(){var e,t,n,r,i,o=[];for(e=0,t=this.objectsData.length;e<t;e++)n=(r=this.objectsData[e]).node,r.update(),n instanceof pl&&!r.positionLast.equals(r.position)&&(i=r.indexOctant,n.getOctantIndex(r)!==i&&o.push(r));for(e=0,t=o.length;e<t;e++)(r=o[e]).node.removeObject(r),this.root.addObject(r)},updateObject:function(e){var t,n,r,i,o=[e];for(r=e.parent;r;)o.push(r),r=r.parent;for(t=0,n=o.length;t<n;t++)!0===(r=o[t]).matrixWorldNeedsUpdate&&(i=r);void 0!==i&&i.updateMatrixWorld()},search:function(e,t,n,r){var i,o,a,c,u,l,h,d,f,p;for(a=[].concat(this.root.objects),t>0||(t=Number.MAX_VALUE),r instanceof s&&(r=this.utilVec31Search.copy(r).normalize(),p=this.utilVec32Search.set(1,1,1).divide(r)),i=0,o=this.root.nodesIndices.length;i<o;i++)a=this.root.nodesByIndex[this.root.nodesIndices[i]].search(e,t,a,r,p);if(!0===n)for(l=[],d=[],i=0,o=a.length;i<o;i++)-1===(f=hl(d,u=(c=a[i]).object))?(h={object:u,faces:[],vertices:[]},l.push(h),d.push(u)):h=l[f],c.faces?h.faces.push(c.faces):c.vertices&&h.vertices.push(c.vertices);else l=a;return l},setRoot:function(e){e instanceof pl&&(this.root=e,this.root.updateProperties())},getDepthEnd:function(){return this.root.getDepthEnd()},getNodeCountEnd:function(){return this.root.getNodeCountEnd()},getObjectCountEnd:function(){return this.root.getObjectCountEnd()},toConsole:function(){this.root.toConsole()}};var fl=function(e,t){this.object=e,t instanceof g?(this.faces=t,this.face3=!0,this.utilVec31FaceBounds=new s):t instanceof s&&(this.vertices=t),this.radius=0,this.position=new s,this.object instanceof p&&this.update(),this.positionLast=this.position.clone()};fl.prototype={update:function(){this.face3?(this.radius=this.getFace3BoundingRadius(this.object,this.faces),this.position.copy(this.faces.centroid).applyMatrix4(this.object.matrixWorld)):this.vertices?(this.radius=this.object.material.size||1,this.position.copy(this.vertices).applyMatrix4(this.object.matrixWorld)):this.object.geometry?(null===this.object.geometry.boundingSphere&&this.object.geometry.computeBoundingSphere(),this.radius=this.object.geometry.boundingSphere.radius,this.position.copy(this.object.geometry.boundingSphere.center).applyMatrix4(this.object.matrixWorld)):(this.radius=this.object.boundRadius,this.position.setFromMatrixPosition(this.object.matrixWorld)),this.radius=this.radius*Math.max(this.object.scale.x,this.object.scale.y,this.object.scale.z)},getFace3BoundingRadius:function(e,t){void 0===t.centroid&&(t.centroid=new s);var n=(e.geometry||e).vertices,r=t.centroid,i=n[t.a],o=n[t.b],a=n[t.c],c=this.utilVec31FaceBounds;return r.addVectors(i,o).add(a).divideScalar(3),Math.max(c.subVectors(r,i).length(),c.subVectors(r,o).length(),c.subVectors(r,a).length())}};var pl=function(e){this.utilVec31Branch=new s,this.utilVec31Expand=new s,this.utilVec31Ray=new s,(e=e||{}).tree instanceof dl?this.tree=e.tree:e.parent instanceof pl!=!0&&(e.root=this,this.tree=new dl(e)),this.id=this.tree.nodeCount++,this.position=e.position instanceof s?e.position:new s,this.radius=e.radius>0?e.radius:1,this.indexOctant=e.indexOctant,this.depth=0,this.reset(),this.setParent(e.parent),this.overlap=this.radius*this.tree.overlapPct,this.radiusOverlap=this.radius+this.overlap,this.left=this.position.x-this.radiusOverlap,this.right=this.position.x+this.radiusOverlap,this.bottom=this.position.y-this.radiusOverlap,this.top=this.position.y+this.radiusOverlap,this.back=this.position.z-this.radiusOverlap,this.front=this.position.z+this.radiusOverlap,this.tree.scene&&(this.visual=new Eo(this.tree.visualGeometry,this.tree.visualMaterial),this.visual.scale.set(2*this.radiusOverlap,2*this.radiusOverlap,2*this.radiusOverlap),this.visual.position.copy(this.position),this.tree.scene.add(this.visual))};pl.prototype={setParent:function(e){e!==this&&this.parent!==e&&(this.parent=e,this.updateProperties())},updateProperties:function(){var e,t;for(this.parent instanceof pl?(this.tree=this.parent.tree,this.depth=this.parent.depth+1):this.depth=0,e=0,t=this.nodesIndices.length;e<t;e++)this.nodesByIndex[this.nodesIndices[e]].updateProperties()},reset:function(e,t){var n,r,i,o=this.nodesIndices||[],a=this.nodesByIndex;for(this.objects=[],this.nodesIndices=[],this.nodesByIndex={},n=0,r=o.length;n<r;n++)(i=a[o[n]]).setParent(void 0),!0===e&&i.reset(e,t);!0===t&&this.visual&&this.visual.parent&&this.visual.parent.remove(this.visual)},addNode:function(e,t){e.indexOctant=t,-1===hl(this.nodesIndices,t)&&this.nodesIndices.push(t),this.nodesByIndex[t]=e,e.parent!==this&&e.setParent(this)},removeNode:function(e){var t,n;t=hl(this.nodesIndices,e),this.nodesIndices.splice(t,1),n=n||this.nodesByIndex[e],delete this.nodesByIndex[e],n.parent===this&&n.setParent(void 0)},addObject:function(e){var t;(t=this.getOctantIndex(e))>-1&&this.nodesIndices.length>0?this.branch(t).addObject(e):t<-1&&this.parent instanceof pl?this.parent.addObject(e):(-1===hl(this.objects,e)&&this.objects.push(e),e.node=this,this.checkGrow())},addObjectWithoutCheck:function(e){var t,n,r;for(t=0,n=e.length;t<n;t++)r=e[t],this.objects.push(r),r.node=this},removeObject:function(e){var t,n,r,i;if((r=(i=this.removeObjectRecursive(e,{searchComplete:!1,nodesRemovedFrom:[],objectsDataRemoved:[]})).nodesRemovedFrom).length>0)for(t=0,n=r.length;t<n;t++)r[t].shrink();return i.objectsDataRemoved},removeObjectRecursive:function(e,t){var n,r,i,o,a=-1;if(e instanceof fl)-1!==(a=hl(this.objects,e))&&(this.objects.splice(a,1),e.node=void 0,t.objectsDataRemoved.push(e),t.searchComplete=o=!0);else for(n=this.objects.length-1;n>=0;n--)if((i=this.objects[n]).object===e&&(this.objects.splice(n,1),i.node=void 0,t.objectsDataRemoved.push(i),o=!0,!i.faces&&!i.vertices)){t.searchComplete=!0;break}if(!0===o&&t.nodesRemovedFrom.push(this),!0!==t.searchComplete)for(n=0,r=this.nodesIndices.length;n<r&&!0!==(t=this.nodesByIndex[this.nodesIndices[n]].removeObjectRecursive(e,t)).searchComplete;n++);return t},checkGrow:function(){this.objects.length>this.tree.objectsThreshold&&this.tree.objectsThreshold>0&&this.grow()},grow:function(){var e,t,n,r,i=[],o=[],a=[],s=[],c=[];for(n=0,r=this.objects.length;n<r;n++)t=this.objects[n],(e=this.getOctantIndex(t))>-1?(a.push(t),s.push(e)):e<-1?(i.push(t),o.push(e)):c.push(t);a.length>0&&(c=c.concat(this.split(a,s))),i.length>0&&(c=c.concat(this.expand(i,o))),this.objects=c,this.checkMerge()},split:function(e,t){var n,r,i,o,a;if(this.depth<this.tree.depthMax){for(e=e||this.objects,t=t||[],a=[],n=0,r=e.length;n<r;n++)o=e[n],(i=t[n])>-1?this.branch(i).addObject(o):a.push(o);e===this.objects&&(this.objects=a)}else a=this.objects;return a},branch:function(e){var t,n,r,i,o;return this.nodesByIndex[e]instanceof pl?t=this.nodesByIndex[e]:(r=(n=.5*this.radiusOverlap)-n*this.tree.overlapPct,i=this.utilVec31Branch.set(1&e?r:-r,2&e?r:-r,4&e?r:-r),o=(new s).addVectors(this.position,i),t=new pl({tree:this.tree,parent:this,position:o,radius:n,indexOctant:e}),this.addNode(t,e)),t},expand:function(e,t){var n,r,i,o,a,c,u,l,h,d,f,p,m,v,g,y,b,x,w,_,S,M,T,A,E,C,P,L,O=this.tree.INDEX_OUTSIDE_MAP,N=this.utilVec31Expand;if(this.tree.root.getDepthEnd()<this.tree.depthMax){for(e=e||this.objects,t=t||[],o=[],a=[],n=0,r=O.length;n<r;n++)O[n].count=0;for(n=0,r=e.length;n<r;n++)i=e[n],(c=t[n])<-1?((u=-c-this.tree.INDEX_OUTSIDE_OFFSET)&this.tree.FLAG_POS_X?O[this.tree.INDEX_OUTSIDE_POS_X].count++:u&this.tree.FLAG_NEG_X&&O[this.tree.INDEX_OUTSIDE_NEG_X].count++,u&this.tree.FLAG_POS_Y?O[this.tree.INDEX_OUTSIDE_POS_Y].count++:u&this.tree.FLAG_NEG_Y&&O[this.tree.INDEX_OUTSIDE_NEG_Y].count++,u&this.tree.FLAG_POS_Z?O[this.tree.INDEX_OUTSIDE_POS_Z].count++:u&this.tree.FLAG_NEG_Z&&O[this.tree.INDEX_OUTSIDE_NEG_Z].count++,a.push(i)):o.push(i);if(a.length>0)for((h=O.slice(0)).sort(function(e,t){return t.count-e.count}),m=1|(d=h[0]).index,g=h[1],y=h[2],v=1|(f=(1|g.index)!==m?g:y).index,g=h[2],y=h[3],b=h[4],x=1|g.index,w=1|y.index,p=x!==m&&x!==v?g:w!==m&&w!==v?y:b,_=d.x+f.x+p.x,S=d.y+f.y+p.y,M=d.z+f.z+p.z,c=this.getOctantIndexFromPosition(_,S,M),l=this.getOctantIndexFromPosition(-_,-S,-M),T=this.overlap,A=this.radius,E=(C=this.tree.overlapPct>0?T/(.5*this.tree.overlapPct*(1+this.tree.overlapPct)):2*A)+C*this.tree.overlapPct-(A+T),N.set(1&c?E:-E,2&c?E:-E,4&c?E:-E),P=(new s).addVectors(this.position,N),(L=new pl({tree:this.tree,position:P,radius:C})).addNode(this,l),this.tree.setRoot(L),n=0,r=a.length;n<r;n++)this.tree.root.addObject(a[n]);e===this.objects&&(this.objects=o)}else o=e;return o},shrink:function(){this.checkMerge(),this.tree.root.checkContract()},checkMerge:function(){for(var e,t=this;t.parent instanceof pl&&t.getObjectCountEnd()<this.tree.objectsThreshold;)e=t,t=t.parent;t!==this&&t.merge(e)},merge:function(e){var t,n,r;for(t=0,n=(e=ll(e)).length;t<n;t++)r=e[t],this.addObjectWithoutCheck(r.getObjectsEnd()),r.reset(!0,!0),this.removeNode(r.indexOctant,r);this.checkMerge()},checkContract:function(){var e,t,n,r,i,o,a;if(this.nodesIndices.length>0){for(o=0,a=this.objects.length,e=0,t=this.nodesIndices.length;e<t;e++)a+=r=(n=this.nodesByIndex[this.nodesIndices[e]]).getObjectCountEnd(),(i instanceof pl==!1||r>o)&&(i=n,o=r);(a-=o)<this.tree.objectsThreshold&&i instanceof pl&&this.contract(i)}},contract:function(e){var t,n,r;for(t=0,n=this.nodesIndices.length;t<n;t++)(r=this.nodesByIndex[this.nodesIndices[t]])!==e&&(e.addObjectWithoutCheck(r.getObjectsEnd()),r.reset(!0,!0));e.addObjectWithoutCheck(this.objects),this.reset(!1,!0),this.tree.setRoot(e),e.checkContract()},getOctantIndex:function(e){var t,n,r,i,o,a,s,c,u=this.position,l=this.radiusOverlap,h=this.overlap,d=0;if(e instanceof fl?(n=e.radius,t=e.position,e.positionLast.copy(t)):e instanceof pl&&(t=e.position,n=0),r=t.x-u.x,i=t.y-u.y,o=t.z-u.z,a=Math.abs(r),s=Math.abs(i),c=Math.abs(o),Math.max(a,s,c)+n>l)return a+n>l&&(d^=r>0?this.tree.FLAG_POS_X:this.tree.FLAG_NEG_X),s+n>l&&(d^=i>0?this.tree.FLAG_POS_Y:this.tree.FLAG_NEG_Y),c+n>l&&(d^=o>0?this.tree.FLAG_POS_Z:this.tree.FLAG_NEG_Z),e.indexOctant=-d-this.tree.INDEX_OUTSIDE_OFFSET,e.indexOctant;if(r-n>-h)d|=1;else if(!(r+n<h))return e.indexOctant=this.tree.INDEX_INSIDE_CROSS,e.indexOctant;if(i-n>-h)d|=2;else if(!(i+n<h))return e.indexOctant=this.tree.INDEX_INSIDE_CROSS,e.indexOctant;if(o-n>-h)d|=4;else if(!(o+n<h))return e.indexOctant=this.tree.INDEX_INSIDE_CROSS,e.indexOctant;return e.indexOctant=d,e.indexOctant},getOctantIndexFromPosition:function(e,t,n){var r=0;return e>0&&(r|=1),t>0&&(r|=2),n>0&&(r|=4),r},search:function(e,t,n,r,i){var o,a;if(!0===(r?this.intersectRay(e,r,t,i):this.intersectSphere(e,t)))for(n=n.concat(this.objects),o=0,a=this.nodesIndices.length;o<a;o++)n=this.nodesByIndex[this.nodesIndices[o]].search(e,t,n,r);return n},intersectSphere:function(e,t){var n=t*t,r=e.x,i=e.y,o=e.z;return r<this.left?n-=Math.pow(r-this.left,2):r>this.right&&(n-=Math.pow(r-this.right,2)),i<this.bottom?n-=Math.pow(i-this.bottom,2):i>this.top&&(n-=Math.pow(i-this.top,2)),o<this.back?n-=Math.pow(o-this.back,2):o>this.front&&(n-=Math.pow(o-this.front,2)),n>=0},intersectRay:function(e,t,n,r){void 0===r&&(r=this.utilVec31Ray.set(1,1,1).divide(t));var i,o=(this.left-e.x)*r.x,a=(this.right-e.x)*r.x,s=(this.bottom-e.y)*r.y,c=(this.top-e.y)*r.y,u=(this.back-e.z)*r.z,l=(this.front-e.z)*r.z,h=Math.min(Math.min(Math.max(o,a),Math.max(s,c)),Math.max(u,l));return!(h<0)&&!((i=Math.max(Math.max(Math.min(o,a),Math.min(s,c)),Math.min(u,l)))>h||i>n)},getDepthEnd:function(e){var t,n;if(this.nodesIndices.length>0)for(t=0,n=this.nodesIndices.length;t<n;t++)e=this.nodesByIndex[this.nodesIndices[t]].getDepthEnd(e);else e=!e||this.depth>e?this.depth:e;return e},getNodeCountEnd:function(){return this.tree.root.getNodeCountRecursive()+1},getNodeCountRecursive:function(){var e,t,n=this.nodesIndices.length;for(e=0,t=this.nodesIndices.length;e<t;e++)n+=this.nodesByIndex[this.nodesIndices[e]].getNodeCountRecursive();return n},getObjectsEnd:function(e){var t,n;for(e=(e||[]).concat(this.objects),t=0,n=this.nodesIndices.length;t<n;t++)e=this.nodesByIndex[this.nodesIndices[t]].getObjectsEnd(e);return e},getObjectCountEnd:function(){var e,t,n=this.objects.length;for(e=0,t=this.nodesIndices.length;e<t;e++)n+=this.nodesByIndex[this.nodesIndices[e]].getObjectCountEnd();return n},getObjectCountStart:function(){for(var e=this.objects.length,t=this.parent;t instanceof pl;)e+=t.objects.length,t=t.parent;return e},toConsole:function(e){var t,n;for(e="string"==typeof e?e:"   ",console.log(this.parent?e+" octree NODE > ":" octree ROOT > ",this," // id: ",this.id," // indexOctant: ",this.indexOctant," // position: ",this.position.x,this.position.y,this.position.z," // radius: ",this.radius," // depth: ",this.depth),console.log(this.parent?e+" ":" ","+ objects ( ",this.objects.length," ) ",this.objects),console.log(this.parent?e+" ":" ","+ children ( ",this.nodesIndices.length," )",this.nodesIndices,this.nodesByIndex),t=0,n=this.nodesIndices.length;t<n;t++)this.nodesByIndex[this.nodesIndices[t]].toConsole(e+"   ")}},Nr.prototype.intersectOctreeObject=function(e,t){var n,r,i,o;return e.object instanceof p?(e=(r=e).object,o=r.faces,i=e.geometry.faces,o.length>0&&(e.geometry.faces=o),n=this.intersectObject(e,t),o.length>0&&(e.geometry.faces=i)):n=this.intersectObject(e,t),n},Nr.prototype.intersectOctreeObjects=function(e,t){var n,r,i=[];for(n=0,r=e.length;n<r;n++)i=i.concat(this.intersectOctreeObject(e[n],t));return i};var ml=function(e){this.cubeLods=e;var t=4*e[0].width,n=e[0].texture,r={format:n.format,magFilter:n.magFilter,minFilter:n.minFilter,type:n.type,generateMipmaps:n.generateMipmaps,anisotropy:n.anisotropy,encoding:n.encoding===Kt?en:n.encoding};r.encoding===en&&(r.magFilter=Ze,r.minFilter=Ze),this.CubeUVRenderTarget=new $n(t,t,r),this.CubeUVRenderTarget.texture.name="PMREMCubeUVPacker.cubeUv",this.CubeUVRenderTarget.texture.mapping=Ge,this.camera=new Jn(.5*-t,.5*t,.5*-t,.5*t,0,1),this.scene=new Yn,this.objects=[];var i=new tr(1,1),o=[];o.push(new x(0,0)),o.push(new x(1,0)),o.push(new x(2,0)),o.push(new x(0,1)),o.push(new x(1,1)),o.push(new x(2,1));var a=t;t=e[0].width;var s=0,c=4;this.numLods=Math.log(e[0].width)/Math.log(2)-2;for(var u=0;u<this.numLods;u++){var l=.5*(a-a/c);t>16&&(c*=2);for(var h=t>16?6:1,d=0,f=0,p=t,m=0;m<h;m++){for(var v=0;v<6;v++){var g=this.getShader();g.uniforms.envMap.value=this.cubeLods[u].texture,g.envMap=this.cubeLods[u].texture,g.uniforms.faceIndex.value=v,g.uniforms.mapSize.value=p;var y=new fn(i,g);y.position.x=o[v].x*p-l+d,y.position.y=o[v].y*p-l+s+f,y.material.side=Y,y.scale.setScalar(p),this.scene.add(y),this.objects.push(y)}f+=1.75*p,d+=1.25*p,p/=2}s+=2*t,t>16&&(t/=2)}};ml.prototype={constructor:ml,update:function(e){var t=e.gammaInput,n=e.gammaOutput,r=e.toneMapping,i=e.toneMappingExposure,o=e.getRenderTarget();e.gammaInput=!1,e.gammaOutput=!1,e.toneMapping=Re,e.toneMappingExposure=1,e.render(this.scene,this.camera,this.CubeUVRenderTarget,!1),e.setRenderTarget(o),e.toneMapping=r,e.toneMappingExposure=i,e.gammaInput=t,e.gammaOutput=n},getShader:function(){var e=new qn({uniforms:{faceIndex:{value:0},mapSize:{value:0},envMap:{value:null},testColor:{value:new s(1,1,1)}},vertexShader:"precision highp float;\t\t\t\tvarying vec2 vUv;\t\t\t\tvoid main() {\t\t\t\t\tvUv = uv;\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\t\t\t\t}",fragmentShader:"precision highp float;\t\t\t\tvarying vec2 vUv;\t\t\t\tuniform samplerCube envMap;\t\t\t\tuniform float mapSize;\t\t\t\tuniform vec3 testColor;\t\t\t\tuniform int faceIndex;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tvec3 sampleDirection;\t\t\t\t\tvec2 uv = vUv;\t\t\t\t\tuv = uv * 2.0 - 1.0;\t\t\t\t\tuv.y *= -1.0;\t\t\t\t\tif(faceIndex == 0) {\t\t\t\t\t\tsampleDirection = normalize(vec3(1.0, uv.y, -uv.x));\t\t\t\t\t} else if(faceIndex == 1) {\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, 1.0, uv.y));\t\t\t\t\t} else if(faceIndex == 2) {\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, uv.y, 1.0));\t\t\t\t\t} else if(faceIndex == 3) {\t\t\t\t\t\tsampleDirection = normalize(vec3(-1.0, uv.y, uv.x));\t\t\t\t\t} else if(faceIndex == 4) {\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, -1.0, -uv.y));\t\t\t\t\t} else {\t\t\t\t\t\tsampleDirection = normalize(vec3(-uv.x, uv.y, -1.0));\t\t\t\t\t}\t\t\t\t\tvec4 color = envMapTexelToLinear( textureCube( envMap, sampleDirection ) );\t\t\t\t\tgl_FragColor = linearToOutputTexel( color );\t\t\t\t}",blending:$});return e.type="PMREMCubeUVPacker",e},dispose:function(){for(var e=0,t=this.objects.length;e<t;e++)this.objects[e].material.dispose();this.objects[0].geometry.dispose()}};var vl=function(e,t,n){this.sourceTexture=e,this.resolution=void 0!==n?n:256,this.samplesPerLevel=void 0!==t?t:16;var r=e.encoding===Jt||e.encoding===Zt||e.encoding===Qt;this.sourceTexture.minFilter=r?Ze:Ye,this.sourceTexture.magFilter=r?Ze:Ye,this.sourceTexture.generateMipmaps=this.sourceTexture.generateMipmaps&&r,this.cubeLods=[];var i=this.resolution,o={format:this.sourceTexture.format,magFilter:this.sourceTexture.magFilter,minFilter:this.sourceTexture.minFilter,type:this.sourceTexture.type,generateMipmaps:this.sourceTexture.generateMipmaps,anisotropy:this.sourceTexture.anisotropy,encoding:this.sourceTexture.encoding};this.numLods=Math.log(i)/Math.log(2)-2;for(var a=0;a<this.numLods;a++){var s=new Fo(i,i,o);s.texture.name="PMREMGenerator.cube"+a,this.cubeLods.push(s),i=Math.max(16,i/2)}this.camera=new Jn(-1,1,1,-1,0,1e3),this.shader=this.getShader(),this.shader.defines.SAMPLES_PER_LEVEL=this.samplesPerLevel,this.planeMesh=new fn(new tr(2,2,0),this.shader),this.planeMesh.material.side=J,this.scene=new Yn,this.scene.add(this.planeMesh),this.scene.add(this.camera),this.shader.uniforms.envMap.value=this.sourceTexture,this.shader.envMap=this.sourceTexture};vl.prototype={constructor:vl,update:function(e){this.shader.uniforms.envMap.value=this.sourceTexture,this.shader.envMap=this.sourceTexture;var t=e.gammaInput,n=e.gammaOutput,r=e.toneMapping,i=e.toneMappingExposure,o=e.getRenderTarget();e.toneMapping=Re,e.toneMappingExposure=1,e.gammaInput=!1,e.gammaOutput=!1;for(var a=0;a<this.numLods;a++){var s=a/(this.numLods-1);this.shader.uniforms.roughness.value=.9*s,this.shader.uniforms.queryScale.value.x=0==a?-1:1;var c=this.cubeLods[a].width;this.shader.uniforms.mapSize.value=c,this.renderToCubeMapTarget(e,this.cubeLods[a]),a<5&&(this.shader.uniforms.envMap.value=this.cubeLods[a].texture)}e.setRenderTarget(o),e.toneMapping=r,e.toneMappingExposure=i,e.gammaInput=t,e.gammaOutput=n},renderToCubeMapTarget:function(e,t){for(var n=0;n<6;n++)this.renderToCubeMapTargetFace(e,t,n)},renderToCubeMapTargetFace:function(e,t,n){t.activeCubeFace=n,this.shader.uniforms.faceIndex.value=n,e.render(this.scene,this.camera,t,!0)},getShader:function(){var e=new qn({defines:{SAMPLES_PER_LEVEL:20},uniforms:{faceIndex:{value:0},roughness:{value:.5},mapSize:{value:.5},envMap:{value:null},queryScale:{value:new s(1,1,1)},testColor:{value:new s(1,1,1)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform int faceIndex;\n\t\t\t\tuniform float roughness;\n\t\t\t\tuniform samplerCube envMap;\n\t\t\t\tuniform float mapSize;\n\t\t\t\tuniform vec3 testColor;\n\t\t\t\tuniform vec3 queryScale;\n\t\t\t\t\n\t\t\t\tfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\t\t\t\t\tfloat a = ggxRoughness + 0.0001;\n\t\t\t\t\ta *= a;\n\t\t\t\t\treturn ( 2.0 / a - 2.0 );\n\t\t\t\t}\n\t\t\t\tvec3 ImportanceSamplePhong(vec2 uv, mat3 vecSpace, float specPow) {\n\t\t\t\t\tfloat phi = uv.y * 2.0 * PI;\n\t\t\t\t\tfloat cosTheta = pow(1.0 - uv.x, 1.0 / (specPow + 1.0));\n\t\t\t\t\tfloat sinTheta = sqrt(1.0 - cosTheta * cosTheta);\n\t\t\t\t\tvec3 sampleDir = vec3(cos(phi) * sinTheta, sin(phi) * sinTheta, cosTheta);\n\t\t\t\t\treturn vecSpace * sampleDir;\n\t\t\t\t}\n\t\t\t\tvec3 ImportanceSampleGGX( vec2 uv, mat3 vecSpace, float Roughness )\n\t\t\t\t{\n\t\t\t\t\tfloat a = Roughness * Roughness;\n\t\t\t\t\tfloat Phi = 2.0 * PI * uv.x;\n\t\t\t\t\tfloat CosTheta = sqrt( (1.0 - uv.y) / ( 1.0 + (a*a - 1.0) * uv.y ) );\n\t\t\t\t\tfloat SinTheta = sqrt( 1.0 - CosTheta * CosTheta );\n\t\t\t\t\treturn vecSpace * vec3(SinTheta * cos( Phi ), SinTheta * sin( Phi ), CosTheta);\n\t\t\t\t}\n\t\t\t\tmat3 matrixFromVector(vec3 n) {\n\t\t\t\t\tfloat a = 1.0 / (1.0 + n.z);\n\t\t\t\t\tfloat b = -n.x * n.y * a;\n\t\t\t\t\tvec3 b1 = vec3(1.0 - n.x * n.x * a, b, -n.x);\n\t\t\t\t\tvec3 b2 = vec3(b, 1.0 - n.y * n.y * a, -n.y);\n\t\t\t\t\treturn mat3(b1, b2, n);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvec4 testColorMap(float Roughness) {\n\t\t\t\t\tvec4 color;\n\t\t\t\t\tif(faceIndex == 0)\n\t\t\t\t\t\tcolor = vec4(1.0,0.0,0.0,1.0);\n\t\t\t\t\telse if(faceIndex == 1)\n\t\t\t\t\t\tcolor = vec4(0.0,1.0,0.0,1.0);\n\t\t\t\t\telse if(faceIndex == 2)\n\t\t\t\t\t\tcolor = vec4(0.0,0.0,1.0,1.0);\n\t\t\t\t\telse if(faceIndex == 3)\n\t\t\t\t\t\tcolor = vec4(1.0,1.0,0.0,1.0);\n\t\t\t\t\telse if(faceIndex == 4)\n\t\t\t\t\t\tcolor = vec4(0.0,1.0,1.0,1.0);\n\t\t\t\t\telse\n\t\t\t\t\t\tcolor = vec4(1.0,0.0,1.0,1.0);\n\t\t\t\t\tcolor *= ( 1.0 - Roughness );\n\t\t\t\t\treturn color;\n\t\t\t\t}\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec3 sampleDirection;\n\t\t\t\t\tvec2 uv = vUv*2.0 - 1.0;\n\t\t\t\t\tfloat offset = -1.0/mapSize;\n\t\t\t\t\tconst float a = -1.0;\n\t\t\t\t\tconst float b = 1.0;\n\t\t\t\t\tfloat c = -1.0 + offset;\n\t\t\t\t\tfloat d = 1.0 - offset;\n\t\t\t\t\tfloat bminusa = b - a;\n\t\t\t\t\tuv.x = (uv.x - a)/bminusa * d - (uv.x - b)/bminusa * c;\n\t\t\t\t\tuv.y = (uv.y - a)/bminusa * d - (uv.y - b)/bminusa * c;\n\t\t\t\t\tif (faceIndex==0) {\n\t\t\t\t\t\tsampleDirection = vec3(1.0, -uv.y, -uv.x);\n\t\t\t\t\t} else if (faceIndex==1) {\n\t\t\t\t\t\tsampleDirection = vec3(-1.0, -uv.y, uv.x);\n\t\t\t\t\t} else if (faceIndex==2) {\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, 1.0, uv.y);\n\t\t\t\t\t} else if (faceIndex==3) {\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, -1.0, -uv.y);\n\t\t\t\t\t} else if (faceIndex==4) {\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, -uv.y, 1.0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsampleDirection = vec3(-uv.x, -uv.y, -1.0);\n\t\t\t\t\t}\n\t\t\t\t\tmat3 vecSpace = matrixFromVector(normalize(sampleDirection * queryScale));\n\t\t\t\t\tvec3 rgbColor = vec3(0.0);\n\t\t\t\t\tconst int NumSamples = SAMPLES_PER_LEVEL;\n\t\t\t\t\tvec3 vect;\n\t\t\t\t\tfloat weight = 0.0;\n\t\t\t\t\tfor( int i = 0; i < NumSamples; i ++ ) {\n\t\t\t\t\t\tfloat sini = sin(float(i));\n\t\t\t\t\t\tfloat cosi = cos(float(i));\n\t\t\t\t\t\tfloat r = rand(vec2(sini, cosi));\n\t\t\t\t\t\tvect = ImportanceSampleGGX(vec2(float(i) / float(NumSamples), r), vecSpace, roughness);\n\t\t\t\t\t\tfloat dotProd = dot(vect, normalize(sampleDirection));\n\t\t\t\t\t\tweight += dotProd;\n\t\t\t\t\t\tvec3 color = envMapTexelToLinear(textureCube(envMap,vect)).rgb;\n\t\t\t\t\t\trgbColor.rgb += color;\n\t\t\t\t\t}\n\t\t\t\t\trgbColor /= float(NumSamples);\n\t\t\t\t\t//rgbColor = testColorMap( roughness ).rgb;\n\t\t\t\t\tgl_FragColor = linearToOutputTexel( vec4( rgbColor, 1.0 ) );\n\t\t\t\t}",blending:$});return e.type="PMREMGenerator",e},dispose:function(){for(var e=0,t=this.cubeLods.length;e<t;e++)this.cubeLods[e].dispose();this.planeMesh.geometry.dispose(),this.planeMesh.material.dispose()}};var gl={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")},yl={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","float l = linearToRelativeLuminance( texel.rgb );","gl_FragColor = vec4( l, l, l, texel.w );","}"].join("\n")},bl={uniforms:{tDiffuse:{value:null},averageLuminance:{value:1},luminanceMap:{value:null},maxLuminance:{value:16},minLuminance:{value:.01},middleGrey:{value:.6}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","uniform sampler2D tDiffuse;","varying vec2 vUv;","uniform float middleGrey;","uniform float minLuminance;","uniform float maxLuminance;","#ifdef ADAPTED_LUMINANCE","uniform sampler2D luminanceMap;","#else","uniform float averageLuminance;","#endif","vec3 ToneMap( vec3 vColor ) {","#ifdef ADAPTED_LUMINANCE","float fLumAvg = texture2D(luminanceMap, vec2(0.5, 0.5)).r;","#else","float fLumAvg = averageLuminance;","#endif","float fLumPixel = linearToRelativeLuminance( vColor );","float fLumScaled = (fLumPixel * middleGrey) / max( minLuminance, fLumAvg );","float fLumCompressed = (fLumScaled * (1.0 + (fLumScaled / (maxLuminance * maxLuminance)))) / (1.0 + fLumScaled);","return fLumCompressed * vColor;","}","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = vec4( ToneMap( texel.xyz ), texel.w );","}"].join("\n")},xl=function(e,t){Bu.call(this),this.resolution=void 0!==t?t:256,this.needsInit=!0,this.adaptive=void 0===e||!!e,this.luminanceRT=null,this.previousLuminanceRT=null,this.currentLuminanceRT=null,void 0===gl&&console.error("AdaptiveToneMappingPass relies on CopyShader");var n=gl;this.copyUniforms=Xn.clone(n.uniforms),this.materialCopy=new qn({uniforms:this.copyUniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,blending:$,depthTest:!1}),void 0===yl&&console.error("AdaptiveToneMappingPass relies on LuminosityShader"),this.materialLuminance=new qn({uniforms:Xn.clone(yl.uniforms),vertexShader:yl.vertexShader,fragmentShader:yl.fragmentShader,blending:$}),this.adaptLuminanceShader={defines:{MIP_LEVEL_1X1:(Math.log(this.resolution)/Math.log(2)).toFixed(1)},uniforms:{lastLum:{value:null},currentLum:{value:null},minLuminance:{value:.01},delta:{value:.016},tau:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","uniform sampler2D lastLum;","uniform sampler2D currentLum;","uniform float minLuminance;","uniform float delta;","uniform float tau;","void main() {","vec4 lastLum = texture2D( lastLum, vUv, MIP_LEVEL_1X1 );","vec4 currentLum = texture2D( currentLum, vUv, MIP_LEVEL_1X1 );","float fLastLum = max( minLuminance, lastLum.r );","float fCurrentLum = max( minLuminance, currentLum.r );","fCurrentLum *= fCurrentLum;","float fAdaptedLum = fLastLum + (fCurrentLum - fLastLum) * (1.0 - exp(-delta * tau));","gl_FragColor.r = fAdaptedLum;","}"].join("\n")},this.materialAdaptiveLum=new qn({uniforms:Xn.clone(this.adaptLuminanceShader.uniforms),vertexShader:this.adaptLuminanceShader.vertexShader,fragmentShader:this.adaptLuminanceShader.fragmentShader,defines:Object.assign({},this.adaptLuminanceShader.defines),blending:$}),void 0===bl&&console.error("AdaptiveToneMappingPass relies on ToneMapShader"),this.materialToneMap=new qn({uniforms:Xn.clone(bl.uniforms),vertexShader:bl.vertexShader,fragmentShader:bl.fragmentShader,blending:$}),this.camera=new Jn(-1,1,1,-1,0,1),this.scene=new Yn,this.quad=new fn(new tr(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)};xl.prototype=Object.assign(Object.create(Bu.prototype),{constructor:xl,render:function(e,t,n,r,i){this.needsInit&&(this.reset(e),this.luminanceRT.texture.type=n.texture.type,this.previousLuminanceRT.texture.type=n.texture.type,this.currentLuminanceRT.texture.type=n.texture.type,this.needsInit=!1),this.adaptive&&(this.quad.material=this.materialLuminance,this.materialLuminance.uniforms.tDiffuse.value=n.texture,e.render(this.scene,this.camera,this.currentLuminanceRT),this.quad.material=this.materialAdaptiveLum,this.materialAdaptiveLum.uniforms.delta.value=r,this.materialAdaptiveLum.uniforms.lastLum.value=this.previousLuminanceRT.texture,this.materialAdaptiveLum.uniforms.currentLum.value=this.currentLuminanceRT.texture,e.render(this.scene,this.camera,this.luminanceRT),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.luminanceRT.texture,e.render(this.scene,this.camera,this.previousLuminanceRT)),this.quad.material=this.materialToneMap,this.materialToneMap.uniforms.tDiffuse.value=n.texture,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)},reset:function(e){this.luminanceRT&&this.luminanceRT.dispose(),this.currentLuminanceRT&&this.currentLuminanceRT.dispose(),this.previousLuminanceRT&&this.previousLuminanceRT.dispose();var t={minFilter:Ze,magFilter:Ze,format:pt};this.luminanceRT=new $n(this.resolution,this.resolution,t),this.luminanceRT.texture.name="AdaptiveToneMappingPass.l",this.luminanceRT.texture.generateMipmaps=!1,this.previousLuminanceRT=new $n(this.resolution,this.resolution,t),this.previousLuminanceRT.texture.name="AdaptiveToneMappingPass.pl",this.previousLuminanceRT.texture.generateMipmaps=!1,t.minFilter=$e,this.currentLuminanceRT=new $n(this.resolution,this.resolution,t),this.currentLuminanceRT.texture.name="AdaptiveToneMappingPass.cl",this.adaptive&&(this.materialToneMap.defines.ADAPTED_LUMINANCE="",this.materialToneMap.uniforms.luminanceMap.value=this.luminanceRT.texture),this.quad.material=new un({color:7829367}),this.materialLuminance.needsUpdate=!0,this.materialAdaptiveLum.needsUpdate=!0,this.materialToneMap.needsUpdate=!0},setAdaptive:function(e){e?(this.adaptive=!0,this.materialToneMap.defines.ADAPTED_LUMINANCE="",this.materialToneMap.uniforms.luminanceMap.value=this.luminanceRT.texture):(this.adaptive=!1,delete this.materialToneMap.defines.ADAPTED_LUMINANCE,this.materialToneMap.uniforms.luminanceMap.value=null),this.materialToneMap.needsUpdate=!0},setAdaptionRate:function(e){e&&(this.materialAdaptiveLum.uniforms.tau.value=Math.abs(e))},setMinLuminance:function(e){e&&(this.materialToneMap.uniforms.minLuminance.value=e,this.materialAdaptiveLum.uniforms.minLuminance.value=e)},setMaxLuminance:function(e){e&&(this.materialToneMap.uniforms.maxLuminance.value=e)},setAverageLuminance:function(e){e&&(this.materialToneMap.uniforms.averageLuminance.value=e)},setMiddleGrey:function(e){e&&(this.materialToneMap.uniforms.middleGrey.value=e)},dispose:function(){this.luminanceRT&&this.luminanceRT.dispose(),this.previousLuminanceRT&&this.previousLuminanceRT.dispose(),this.currentLuminanceRT&&this.currentLuminanceRT.dispose(),this.materialLuminance&&this.materialLuminance.dispose(),this.materialAdaptiveLum&&this.materialAdaptiveLum.dispose(),this.materialCopy&&this.materialCopy.dispose(),this.materialToneMap&&this.materialToneMap.dispose()}});var wl={uniforms:{damp:{value:.96},tOld:{value:null},tNew:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float damp;","uniform sampler2D tOld;","uniform sampler2D tNew;","varying vec2 vUv;","vec4 when_gt( vec4 x, float y ) {","return max( sign( x - y ), 0.0 );","}","void main() {","vec4 texelOld = texture2D( tOld, vUv );","vec4 texelNew = texture2D( tNew, vUv );","texelOld *= damp * when_gt( texelOld, 0.1 );","gl_FragColor = max(texelNew, texelOld);","}"].join("\n")},_l=function(e){Bu.call(this),void 0===wl&&console.error("AfterimagePass relies on AfterimageShader"),this.shader=wl,this.uniforms=Xn.clone(this.shader.uniforms),this.uniforms.damp.value=void 0!==e?e:.96,this.textureComp=new $n(i.innerWidth,i.innerHeight,{minFilter:Ze,magFilter:Ye,format:pt}),this.textureOld=new $n(i.innerWidth,i.innerHeight,{minFilter:Ze,magFilter:Ye,format:pt}),this.shaderMaterial=new qn({uniforms:this.uniforms,vertexShader:this.shader.vertexShader,fragmentShader:this.shader.fragmentShader}),this.sceneComp=new Yn,this.scene=new Yn,this.camera=new Jn(-1,1,1,-1,0,1),this.camera.position.z=1;var t=new tr(2,2);this.quadComp=new fn(t,this.shaderMaterial),this.sceneComp.add(this.quadComp);var n=new fn(t,new un({map:this.textureComp.texture}));this.scene.add(n)};_l.prototype=Object.assign(Object.create(Bu.prototype),{constructor:_l,render:function(e,t,n){this.uniforms.tOld.value=this.textureOld.texture,this.uniforms.tNew.value=n.texture,this.quadComp.material=this.shaderMaterial,e.render(this.sceneComp,this.camera,this.textureComp),e.render(this.scene,this.camera,this.textureOld),this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}});var Sl={defines:{KERNEL_SIZE_FLOAT:"25.0",KERNEL_SIZE_INT:"25"},uniforms:{tDiffuse:{value:null},uImageIncrement:{value:new x(.001953125,0)},cKernel:{value:[]}},vertexShader:["uniform vec2 uImageIncrement;","varying vec2 vUv;","void main() {","vUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float cKernel[ KERNEL_SIZE_INT ];","uniform sampler2D tDiffuse;","uniform vec2 uImageIncrement;","varying vec2 vUv;","void main() {","vec2 imageCoord = vUv;","vec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );","for( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {","sum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];","imageCoord += uImageIncrement;","}","gl_FragColor = sum;","}"].join("\n"),buildKernel:function(e){function t(e,t){return Math.exp(-e*e/(2*t*t))}var n,r,i,o,a=2*Math.ceil(3*e)+1;for(a>25&&(a=25),o=.5*(a-1),r=new Array(a),i=0,n=0;n<a;++n)r[n]=t(n-o,e),i+=r[n];for(n=0;n<a;++n)r[n]/=i;return r}},Ml=function(e,t,n,r){Bu.call(this),e=void 0!==e?e:1,t=void 0!==t?t:25,n=void 0!==n?n:4,r=void 0!==r?r:256;var i={minFilter:Ze,magFilter:Ze,format:pt};this.renderTargetX=new $n(r,r,i),this.renderTargetX.texture.name="BloomPass.x",this.renderTargetY=new $n(r,r,i),this.renderTargetY.texture.name="BloomPass.y",void 0===gl&&console.error("BloomPass relies on CopyShader");var o=gl;this.copyUniforms=Xn.clone(o.uniforms),this.copyUniforms.opacity.value=e,this.materialCopy=new qn({uniforms:this.copyUniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader,blending:te,transparent:!0}),void 0===Sl&&console.error("BloomPass relies on ConvolutionShader");var a=Sl;this.convolutionUniforms=Xn.clone(a.uniforms),this.convolutionUniforms.uImageIncrement.value=Ml.blurX,this.convolutionUniforms.cKernel.value=Sl.buildKernel(n),this.materialConvolution=new qn({uniforms:this.convolutionUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,defines:{KERNEL_SIZE_FLOAT:t.toFixed(1),KERNEL_SIZE_INT:t.toFixed(0)}}),this.needsSwap=!1,this.camera=new Jn(-1,1,1,-1,0,1),this.scene=new Yn,this.quad=new fn(new tr(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)};Ml.prototype=Object.assign(Object.create(Bu.prototype),{constructor:Ml,render:function(e,t,n,r,i){i&&e.context.disable(e.context.STENCIL_TEST),this.quad.material=this.materialConvolution,this.convolutionUniforms.tDiffuse.value=n.texture,this.convolutionUniforms.uImageIncrement.value=Ml.blurX,e.render(this.scene,this.camera,this.renderTargetX,!0),this.convolutionUniforms.tDiffuse.value=this.renderTargetX.texture,this.convolutionUniforms.uImageIncrement.value=Ml.blurY,e.render(this.scene,this.camera,this.renderTargetY,!0),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetY.texture,i&&e.context.enable(e.context.STENCIL_TEST),e.render(this.scene,this.camera,n,this.clear)}}),Ml.blurX=new x(.001953125,0),Ml.blurY=new x(0,.001953125);var Tl=function(e,t,n){Bu.call(this),this.scene=e,this.camera=t;var r=void 0!==n.focus?n.focus:1,o=void 0!==n.aspect?n.aspect:t.aspect,a=void 0!==n.aperture?n.aperture:.025,s=void 0!==n.maxblur?n.maxblur:1,c=n.width||i.innerWidth||1,u=n.height||i.innerHeight||1;this.renderTargetColor=new $n(c,u,{minFilter:Ze,magFilter:Ze,format:ft}),this.renderTargetColor.texture.name="BokehPass.color",this.renderTargetDepth=this.renderTargetColor.clone(),this.renderTargetDepth.texture.name="BokehPass.depth",this.materialDepth=new dr,this.materialDepth.depthPacking=rn,this.materialDepth.blending=$,void 0===nr&&console.error("BokehPass relies on BokehShader");var l=nr,h=Xn.clone(l.uniforms);h.tDepth.value=this.renderTargetDepth.texture,h.focus.value=r,h.aspect.value=o,h.aperture.value=a,h.maxblur.value=s,h.nearClip.value=t.near,h.farClip.value=t.far,this.materialBokeh=new qn({defines:Object.assign({},l.defines),uniforms:h,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}),this.uniforms=h,this.needsSwap=!1,this.camera2=new Jn(-1,1,1,-1,0,1),this.scene2=new Yn,this.quad2=new fn(new tr(2,2),null),this.quad2.frustumCulled=!1,this.scene2.add(this.quad2),this.oldClearColor=new v,this.oldClearAlpha=1};Tl.prototype=Object.assign(Object.create(Bu.prototype),{constructor:Tl,render:function(e,t,n,r,i){this.quad2.material=this.materialBokeh,this.scene.overrideMaterial=this.materialDepth,this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();e.autoClear;e.autoClear=!1,e.setClearColor(16777215),e.setClearAlpha(1),e.render(this.scene,this.camera,this.renderTargetDepth,!0),this.uniforms.tColor.value=n.texture,this.uniforms.nearClip.value=this.camera.near,this.uniforms.farClip.value=this.camera.far,this.renderToScreen?e.render(this.scene2,this.camera2):e.render(this.scene2,this.camera2,t,this.clear),this.scene.overrideMaterial=null,e.setClearColor(this.oldClearColor),e.setClearAlpha(this.oldClearAlpha),e.autoClear=this.oldAutoClear}});var Al=function(e,t){Bu.call(this),this.needsSwap=!1,this.clearColor=void 0!==e?e:0,this.clearAlpha=void 0!==t?t:0};Al.prototype=Object.assign(Object.create(Bu.prototype),{constructor:Al,render:function(e,t,n,r,i){var o,a;this.clearColor&&(o=e.getClearColor().getHex(),a=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),e.setRenderTarget(this.renderToScreen?null:n),e.clear(),this.clearColor&&e.setClearColor(o,a)}});var El=function(e,t,n){Bu.call(this),this.camera=e,this.needsSwap=!1,this.cubeShader=Pi.cube,this.cubeMesh=new fn(new Un(10,10,10),new qn({uniforms:this.cubeShader.uniforms,vertexShader:this.cubeShader.vertexShader,fragmentShader:this.cubeShader.fragmentShader,depthTest:!1,depthWrite:!1,side:Y})),this.envMap=t,this.opacity=void 0!==n?n:1,this.cubeScene=new Yn,this.cubeCamera=new Hn,this.cubeScene.add(this.cubeMesh)};El.prototype=Object.assign(Object.create(Bu.prototype),{constructor:El,render:function(e,t,n,r,i){var o=e.autoClear;e.autoClear=!1,this.cubeCamera.projectionMatrix.copy(this.camera.projectionMatrix),this.cubeCamera.quaternion.setFromRotationMatrix(this.camera.matrixWorld),this.cubeMesh.material.uniforms.tCube.value=this.envMap,this.cubeMesh.material.uniforms.opacity.value=this.opacity,this.cubeMesh.material.transparent=this.opacity<1,e.render(this.cubeScene,this.cubeCamera,this.renderToScreen?null:n,this.clear),e.autoClear=o}});var Cl={uniforms:{tDiffuse:{value:null},tSize:{value:new x(256,256)},center:{value:new x(.5,.5)},angle:{value:1.57},scale:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec2 center;","uniform float angle;","uniform float scale;","uniform vec2 tSize;","uniform sampler2D tDiffuse;","varying vec2 vUv;","float pattern() {","float s = sin( angle ), c = cos( angle );","vec2 tex = vUv * tSize - center;","vec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;","return ( sin( point.x ) * sin( point.y ) ) * 4.0;","}","void main() {","vec4 color = texture2D( tDiffuse, vUv );","float average = ( color.r + color.g + color.b ) / 3.0;","gl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );","}"].join("\n")},Pl=function(e,t,n){Bu.call(this),void 0===Cl&&console.error("DotScreenPass relies on DotScreenShader");var r=Cl;this.uniforms=Xn.clone(r.uniforms),void 0!==e&&this.uniforms.center.value.copy(e),void 0!==t&&(this.uniforms.angle.value=t),void 0!==n&&(this.uniforms.scale.value=n),this.material=new qn({uniforms:this.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader}),this.camera=new Jn(-1,1,1,-1,0,1),this.scene=new Yn,this.quad=new fn(new tr(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)};Pl.prototype=Object.assign(Object.create(Bu.prototype),{constructor:Pl,render:function(e,t,n,r,i){this.uniforms.tDiffuse.value=n.texture,this.uniforms.tSize.value.set(n.width,n.height),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}});var Ll=function(e,t){Bu.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};Ll.prototype=Object.assign(Object.create(Bu.prototype),{constructor:Ll,render:function(e,t,n,r,i){var o,a,s=e.context,c=e.state;c.buffers.color.setMask(!1),c.buffers.depth.setMask(!1),c.buffers.color.setLocked(!0),c.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),c.buffers.stencil.setTest(!0),c.buffers.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),c.buffers.stencil.setFunc(s.ALWAYS,o,4294967295),c.buffers.stencil.setClear(a),e.render(this.scene,this.camera,n,this.clear),e.render(this.scene,this.camera,t,this.clear),c.buffers.color.setLocked(!1),c.buffers.depth.setLocked(!1),c.buffers.stencil.setFunc(s.EQUAL,1,4294967295),c.buffers.stencil.setOp(s.KEEP,s.KEEP,s.KEEP)}});var Ol=function(){Bu.call(this),this.needsSwap=!1};Ol.prototype=Object.create(Bu.prototype),Object.assign(Ol.prototype,{render:function(e,t,n,r,i){e.state.buffers.stencil.setTest(!1)}});var Nl=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:Ze,magFilter:Ze,format:pt,stencilBuffer:!1},r=e.getDrawingBufferSize();(t=new $n(r.width,r.height,n)).texture.name="EffectComposer.rt1"}this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===gl&&console.error("EffectComposer relies on CopyShader"),void 0===zu&&console.error("EffectComposer relies on ShaderPass"),this.copyPass=new zu(gl)};Object.assign(Nl.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e);var t=this.renderer.getDrawingBufferSize();e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){var t,n,r=!1,i=this.passes.length;for(n=0;n<i;n++)if(!1!==(t=this.passes[n]).enabled){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),t.needsSwap){if(r){var o=this.renderer.context;o.stencilFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),o.stencilFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==Ll&&(t instanceof Ll?r=!0:t instanceof Ol&&(r=!1))}},reset:function(e){if(void 0===e){var t=this.renderer.getDrawingBufferSize();(e=this.renderTarget1.clone()).setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t);for(var n=0;n<this.passes.length;n++)this.passes[n].setSize(e,t)}});var Rl={uniforms:{tDiffuse:{value:null},time:{value:0},nIntensity:{value:.5},sIntensity:{value:.05},sCount:{value:4096},grayscale:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","uniform float time;","uniform bool grayscale;","uniform float nIntensity;","uniform float sIntensity;","uniform float sCount;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 cTextureScreen = texture2D( tDiffuse, vUv );","float dx = rand( vUv + time );","vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx, 0.0, 1.0 );","vec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );","cResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;","cResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );","if( grayscale ) {","cResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );","}","gl_FragColor =  vec4( cResult, cTextureScreen.a );","}"].join("\n")},Il=function(e,t,n,r){Bu.call(this),void 0===Rl&&console.error("FilmPass relies on FilmShader");var i=Rl;this.uniforms=Xn.clone(i.uniforms),this.material=new qn({uniforms:this.uniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader}),void 0!==r&&(this.uniforms.grayscale.value=r),void 0!==e&&(this.uniforms.nIntensity.value=e),void 0!==t&&(this.uniforms.sIntensity.value=t),void 0!==n&&(this.uniforms.sCount.value=n),this.camera=new Jn(-1,1,1,-1,0,1),this.scene=new Yn,this.quad=new fn(new tr(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)};Il.prototype=Object.assign(Object.create(Bu.prototype),{constructor:Il,render:function(e,t,n,r,i){this.uniforms.tDiffuse.value=n.texture,this.uniforms.time.value+=r,this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}});var Dl={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform int byp;","uniform sampler2D tDiffuse;","uniform sampler2D tDisp;","uniform float amount;","uniform float angle;","uniform float seed;","uniform float seed_x;","uniform float seed_y;","uniform float distortion_x;","uniform float distortion_y;","uniform float col_s;","varying vec2 vUv;","float rand(vec2 co){","return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);","}","void main() {","if(byp<1) {","vec2 p = vUv;","float xs = floor(gl_FragCoord.x / 0.5);","float ys = floor(gl_FragCoord.y / 0.5);","vec4 normal = texture2D (tDisp, p*seed*seed);","if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {","if(seed_x>0.){","p.y = 1. - (p.y + distortion_y);","}","else {","p.y = distortion_y;","}","}","if(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {","if(seed_y>0.){","p.x=distortion_x;","}","else {","p.x = 1. - (p.x + distortion_x);","}","}","p.x+=normal.x*seed_x*(seed/5.);","p.y+=normal.y*seed_y*(seed/5.);","vec2 offset = amount * vec2( cos(angle), sin(angle));","vec4 cr = texture2D(tDiffuse, p + offset);","vec4 cga = texture2D(tDiffuse, p);","vec4 cb = texture2D(tDiffuse, p - offset);","gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);","vec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);","gl_FragColor = gl_FragColor+ snow;","}","else {","gl_FragColor=texture2D (tDiffuse, vUv);","}","}"].join("\n")},Fl=function(e){Bu.call(this),void 0===Dl&&console.error("GlitchPass relies on DigitalGlitch");var t=Dl;this.uniforms=Xn.clone(t.uniforms),void 0==e&&(e=64),this.uniforms.tDisp.value=this.generateHeightmap(e),this.material=new qn({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.camera=new Jn(-1,1,1,-1,0,1),this.scene=new Yn,this.quad=new fn(new tr(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.goWild=!1,this.curF=0,this.generateTrigger()};Fl.prototype=Object.assign(Object.create(Bu.prototype),{constructor:Fl,render:function(e,t,n,r,i){this.uniforms.tDiffuse.value=n.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=o.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=o.randFloat(-1,1),this.uniforms.seed_y.value=o.randFloat(-1,1),this.uniforms.distortion_x.value=o.randFloat(0,1),this.uniforms.distortion_y.value=o.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=o.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=o.randFloat(0,1),this.uniforms.distortion_y.value=o.randFloat(0,1),this.uniforms.seed_x.value=o.randFloat(-.3,.3),this.uniforms.seed_y.value=o.randFloat(-.3,.3)):0==this.goWild&&(this.uniforms.byp.value=1),this.curF++,this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)},generateTrigger:function(){this.randX=o.randInt(120,240)},generateHeightmap:function(e){for(var t=new Float32Array(e*e*3),n=e*e,r=0;r<n;r++){var i=o.randFloat(0,1);t[3*r+0]=i,t[3*r+1]=i,t[3*r+2]=i}var a=new Vi(t,e,e,ft,at);return a.needsUpdate=!0,a}});var kl={uniforms:{tDiffuse:{value:null},shape:{value:1},radius:{value:4},rotateR:{value:Math.PI/12*1},rotateG:{value:Math.PI/12*2},rotateB:{value:Math.PI/12*3},scatter:{value:0},width:{value:1},height:{value:1},blending:{value:1},blendingMode:{value:1},greyscale:{value:!1},disable:{value:!1}},vertexShader:["varying vec2 vUV;","void main() {","vUV = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["#define SQRT2_MINUS_ONE 0.41421356","#define SQRT2_HALF_MINUS_ONE 0.20710678","#define PI2 6.28318531","#define SHAPE_DOT 1","#define SHAPE_ELLIPSE 2","#define SHAPE_LINE 3","#define SHAPE_SQUARE 4","#define BLENDING_LINEAR 1","#define BLENDING_MULTIPLY 2","#define BLENDING_ADD 3","#define BLENDING_LIGHTER 4","#define BLENDING_DARKER 5","uniform sampler2D tDiffuse;","uniform float radius;","uniform float rotateR;","uniform float rotateG;","uniform float rotateB;","uniform float scatter;","uniform float width;","uniform float height;","uniform int shape;","uniform bool disable;","uniform float blending;","uniform int blendingMode;","varying vec2 vUV;","uniform bool greyscale;","const int samples = 8;","float blend( float a, float b, float t ) {","return a * ( 1.0 - t ) + b * t;","}","float hypot( float x, float y ) {","return sqrt( x * x + y * y );","}","float rand( vec2 seed ){","return fract( sin( dot( seed.xy, vec2( 12.9898, 78.233 ) ) ) * 43758.5453 );","}","float distanceToDotRadius( float channel, vec2 coord, vec2 normal, vec2 p, float angle, float rad_max ) {","float dist = hypot( coord.x - p.x, coord.y - p.y );","float rad = channel;","if ( shape == SHAPE_DOT ) {","rad = pow( abs( rad ), 1.125 ) * rad_max;","} else if ( shape == SHAPE_ELLIPSE ) {","rad = pow( abs( rad ), 1.125 ) * rad_max;","if ( dist != 0.0 ) {","float dot_p = abs( ( p.x - coord.x ) / dist * normal.x + ( p.y - coord.y ) / dist * normal.y );","dist = ( dist * ( 1.0 - SQRT2_HALF_MINUS_ONE ) ) + dot_p * dist * SQRT2_MINUS_ONE;","}","} else if ( shape == SHAPE_LINE ) {","rad = pow( abs( rad ), 1.5) * rad_max;","float dot_p = ( p.x - coord.x ) * normal.x + ( p.y - coord.y ) * normal.y;","dist = hypot( normal.x * dot_p, normal.y * dot_p );","} else if ( shape == SHAPE_SQUARE ) {","float theta = atan( p.y - coord.y, p.x - coord.x ) - angle;","float sin_t = abs( sin( theta ) );","float cos_t = abs( cos( theta ) );","rad = pow( abs( rad ), 1.4 );","rad = rad_max * ( rad + ( ( sin_t > cos_t ) ? rad - sin_t * rad : rad - cos_t * rad ) );","}","return rad - dist;","}","struct Cell {","vec2 normal;","vec2 p1;","vec2 p2;","vec2 p3;","vec2 p4;","float samp2;","float samp1;","float samp3;","float samp4;","};","vec4 getSample( vec2 point ) {","vec4 tex = texture2D( tDiffuse, vec2( point.x / width, point.y / height ) );","float base = rand( vec2( floor( point.x ), floor( point.y ) ) ) * PI2;","float step = PI2 / float( samples );","float dist = radius * 0.66;","for ( int i = 0; i < samples; ++i ) {","float r = base + step * float( i );","vec2 coord = point + vec2( cos( r ) * dist, sin( r ) * dist );","tex += texture2D( tDiffuse, vec2( coord.x / width, coord.y / height ) );","}","tex /= float( samples ) + 1.0;","return tex;","}","float getDotColour( Cell c, vec2 p, int channel, float angle, float aa ) {","float dist_c_1, dist_c_2, dist_c_3, dist_c_4, res;","if ( channel == 0 ) {","c.samp1 = getSample( c.p1 ).r;","c.samp2 = getSample( c.p2 ).r;","c.samp3 = getSample( c.p3 ).r;","c.samp4 = getSample( c.p4 ).r;","} else if (channel == 1) {","c.samp1 = getSample( c.p1 ).g;","c.samp2 = getSample( c.p2 ).g;","c.samp3 = getSample( c.p3 ).g;","c.samp4 = getSample( c.p4 ).g;","} else {","c.samp1 = getSample( c.p1 ).b;","c.samp3 = getSample( c.p3 ).b;","c.samp2 = getSample( c.p2 ).b;","c.samp4 = getSample( c.p4 ).b;","}","dist_c_1 = distanceToDotRadius( c.samp1, c.p1, c.normal, p, angle, radius );","dist_c_2 = distanceToDotRadius( c.samp2, c.p2, c.normal, p, angle, radius );","dist_c_3 = distanceToDotRadius( c.samp3, c.p3, c.normal, p, angle, radius );","dist_c_4 = distanceToDotRadius( c.samp4, c.p4, c.normal, p, angle, radius );","res = ( dist_c_1 > 0.0 ) ? clamp( dist_c_1 / aa, 0.0, 1.0 ) : 0.0;","res += ( dist_c_2 > 0.0 ) ? clamp( dist_c_2 / aa, 0.0, 1.0 ) : 0.0;","res += ( dist_c_3 > 0.0 ) ? clamp( dist_c_3 / aa, 0.0, 1.0 ) : 0.0;","res += ( dist_c_4 > 0.0 ) ? clamp( dist_c_4 / aa, 0.0, 1.0 ) : 0.0;","res = clamp( res, 0.0, 1.0 );","return res;","}","Cell getReferenceCell( vec2 p, vec2 origin, float grid_angle, float step ) {","Cell c;","vec2 n = vec2( cos( grid_angle ), sin( grid_angle ) );","float threshold = step * 0.5;","float dot_normal = n.x * ( p.x - origin.x ) + n.y * ( p.y - origin.y );","float dot_line = -n.y * ( p.x - origin.x ) + n.x * ( p.y - origin.y );","vec2 offset = vec2( n.x * dot_normal, n.y * dot_normal );","float offset_normal = mod( hypot( offset.x, offset.y ), step );","float normal_dir = ( dot_normal < 0.0 ) ? 1.0 : -1.0;","float normal_scale = ( ( offset_normal < threshold ) ? -offset_normal : step - offset_normal ) * normal_dir;","float offset_line = mod( hypot( ( p.x - offset.x ) - origin.x, ( p.y - offset.y ) - origin.y ), step );","float line_dir = ( dot_line < 0.0 ) ? 1.0 : -1.0;","float line_scale = ( ( offset_line < threshold ) ? -offset_line : step - offset_line ) * line_dir;","c.normal = n;","c.p1.x = p.x - n.x * normal_scale + n.y * line_scale;","c.p1.y = p.y - n.y * normal_scale - n.x * line_scale;","if ( scatter != 0.0 ) {","float off_mag = scatter * threshold * 0.5;","float off_angle = rand( vec2( floor( c.p1.x ), floor( c.p1.y ) ) ) * PI2;","c.p1.x += cos( off_angle ) * off_mag;","c.p1.y += sin( off_angle ) * off_mag;","}","float normal_step = normal_dir * ( ( offset_normal < threshold ) ? step : -step );","float line_step = line_dir * ( ( offset_line < threshold ) ? step : -step );","c.p2.x = c.p1.x - n.x * normal_step;","c.p2.y = c.p1.y - n.y * normal_step;","c.p3.x = c.p1.x + n.y * line_step;","c.p3.y = c.p1.y - n.x * line_step;","c.p4.x = c.p1.x - n.x * normal_step + n.y * line_step;","c.p4.y = c.p1.y - n.y * normal_step - n.x * line_step;","return c;","}","float blendColour( float a, float b, float t ) {","if ( blendingMode == BLENDING_LINEAR ) {","return blend( a, b, 1.0 - t );","} else if ( blendingMode == BLENDING_ADD ) {","return blend( a, min( 1.0, a + b ), t );","} else if ( blendingMode == BLENDING_MULTIPLY ) {","return blend( a, max( 0.0, a * b ), t );","} else if ( blendingMode == BLENDING_LIGHTER ) {","return blend( a, max( a, b ), t );","} else if ( blendingMode == BLENDING_DARKER ) {","return blend( a, min( a, b ), t );","} else {","return blend( a, b, 1.0 - t );","}","}","void main() {","if ( ! disable ) {","vec2 p = vec2( vUV.x * width, vUV.y * height );","vec2 origin = vec2( 0, 0 );","float aa = ( radius < 2.5 ) ? radius * 0.5 : 1.25;","Cell cell_r = getReferenceCell( p, origin, rotateR, radius );","Cell cell_g = getReferenceCell( p, origin, rotateG, radius );","Cell cell_b = getReferenceCell( p, origin, rotateB, radius );","float r = getDotColour( cell_r, p, 0, rotateR, aa );","float g = getDotColour( cell_g, p, 1, rotateG, aa );","float b = getDotColour( cell_b, p, 2, rotateB, aa );","vec4 colour = texture2D( tDiffuse, vUV );","r = blendColour( r, colour.r, blending );","g = blendColour( g, colour.g, blending );","b = blendColour( b, colour.b, blending );","if ( greyscale ) {","r = g = b = (r + b + g) / 3.0;","}","gl_FragColor = vec4( r, g, b, 1.0 );","} else {","gl_FragColor = texture2D( tDiffuse, vUV );","}","}"].join("\n")},Ul=function(e,t,n){for(var r in Bu.call(this),void 0===kl&&console.error("HalftonePass requires HalftoneShader"),this.uniforms=Xn.clone(kl.uniforms),this.material=new qn({uniforms:this.uniforms,fragmentShader:kl.fragmentShader,vertexShader:kl.vertexShader}),this.uniforms.width.value=e,this.uniforms.height.value=t,n)n.hasOwnProperty(r)&&this.uniforms.hasOwnProperty(r)&&(this.uniforms[r].value=n[r]);this.camera=new Jn(-1,1,1,-1,0,1),this.scene=new Yn,this.quad=new fn(new tr(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)};Ul.prototype=Object.assign(Object.create(Bu.prototype),{constructor:Ul,render:function(e,t,n,r,i){this.material.uniforms.tDiffuse.value=n.texture,this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)},setSize:function(e,t){this.uniforms.width.value=e,this.uniforms.height.value=t}});var Bl=function(e,t,n,r){this.renderScene=t,this.renderCamera=n,this.selectedObjects=void 0!==r?r:[],this.visibleEdgeColor=new v(1,1,1),this.hiddenEdgeColor=new v(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,Bu.call(this),this.resolution=void 0!==e?new x(e.x,e.y):new x(256,256);var i={minFilter:Ze,magFilter:Ze,format:pt},o=Math.round(this.resolution.x/this.downSampleRatio),s=Math.round(this.resolution.y/this.downSampleRatio);this.maskBufferMaterial=new un({color:16777215}),this.maskBufferMaterial.side=J,this.renderTargetMaskBuffer=new $n(this.resolution.x,this.resolution.y,i),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new dr,this.depthMaterial.side=J,this.depthMaterial.depthPacking=rn,this.depthMaterial.blending=$,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=J,this.prepareMaskMaterial.fragmentShader=function(e,t){var n=t.isPerspectiveCamera?"perspective":"orthographic";return e.replace(/DEPTH_TO_VIEW_Z/g,n+"DepthToViewZ")}(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new $n(this.resolution.x,this.resolution.y,i),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new $n(o,s,i),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new $n(o,s,i),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new $n(Math.round(o/2),Math.round(s/2),i),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new $n(o,s,i),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new $n(Math.round(o/2),Math.round(s/2),i),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value=new x(o,s),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value=new x(Math.round(o/2),Math.round(s/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial(),void 0===gl&&console.error("OutlinePass relies on CopyShader");var c=gl;this.copyUniforms=Xn.clone(c.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new qn({uniforms:this.copyUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,blending:$,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new v,this.oldClearAlpha=1,this.camera=new Jn(-1,1,1,-1,0,1),this.scene=new Yn,this.quad=new fn(new tr(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.tempPulseColor1=new v,this.tempPulseColor2=new v,this.textureMatrix=new a};Bl.prototype=Object.assign(Object.create(Bu.prototype),{constructor:Bl,dispose:function(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()},setSize:function(e,t){this.renderTargetMaskBuffer.setSize(e,t);var n=Math.round(e/this.downSampleRatio),r=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(n,r),this.renderTargetBlurBuffer1.setSize(n,r),this.renderTargetEdgeBuffer1.setSize(n,r),this.separableBlurMaterial1.uniforms.texSize.value=new x(n,r),n=Math.round(n/2),r=Math.round(r/2),this.renderTargetBlurBuffer2.setSize(n,r),this.renderTargetEdgeBuffer2.setSize(n,r),this.separableBlurMaterial2.uniforms.texSize.value=new x(n,r)},changeVisibilityOfSelectedObjects:function(e){function t(t){t.isMesh&&(e?(t.visible=t.userData.oldVisible,delete t.userData.oldVisible):(t.userData.oldVisible=t.visible,t.visible=e))}for(var n=0;n<this.selectedObjects.length;n++){this.selectedObjects[n].traverse(t)}},changeVisibilityOfNonSelectedObjects:function(e){var t=[];function n(e){e.isMesh&&t.push(e)}for(var r=0;r<this.selectedObjects.length;r++){this.selectedObjects[r].traverse(n)}this.renderScene.traverse(function(n){if(n.isMesh||n.isLine||n.isSprite){for(var r=!1,i=0;i<t.length;i++)if(t[i].id===n.id){r=!0;break}if(!r){var o=n.visible;e&&!n.bVisible||(n.visible=e),n.bVisible=o}}})},updateTextureMatrix:function(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)},render:function(e,t,n,r,i){if(this.selectedObjects.length>0){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var o=e.autoClear;e.autoClear=!1,i&&e.context.disable(e.context.STENCIL_TEST),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);var a=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.render(this.renderScene,this.renderCamera,this.renderTargetDepthBuffer,!0),this.changeVisibilityOfSelectedObjects(!0),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value=new x(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.render(this.renderScene,this.renderCamera,this.renderTargetMaskBuffer,!0),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this.renderScene.background=a,this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.render(this.scene,this.camera,this.renderTargetMaskDownSampleBuffer,!0),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){var s=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(s),this.tempPulseColor2.multiplyScalar(s)}this.quad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value=new x(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.render(this.scene,this.camera,this.renderTargetEdgeBuffer1,!0),this.quad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Bl.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.render(this.scene,this.camera,this.renderTargetBlurBuffer1,!0),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Bl.BlurDirectionY,e.render(this.scene,this.camera,this.renderTargetEdgeBuffer1,!0),this.quad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=Bl.BlurDirectionX,e.render(this.scene,this.camera,this.renderTargetBlurBuffer2,!0),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=Bl.BlurDirectionY,e.render(this.scene,this.camera,this.renderTargetEdgeBuffer2,!0),this.quad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,i&&e.context.enable(e.context.STENCIL_TEST),e.render(this.scene,this.camera,n,!1),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=o}this.renderToScreen&&(this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=n.texture,e.render(this.scene,this.camera))},getPrepareMaskMaterial:function(){return new qn({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new x(.5,.5)},textureMatrix:{value:new a}},vertexShader:["varying vec4 projTexCoord;","varying vec4 vPosition;","uniform mat4 textureMatrix;","void main() {","\tvPosition = modelViewMatrix * vec4( position, 1.0 );","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tprojTexCoord = textureMatrix * worldPosition;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <packing>","varying vec4 vPosition;","varying vec4 projTexCoord;","uniform sampler2D depthTexture;","uniform vec2 cameraNearFar;","void main() {","\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));","\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );","\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;","\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);","}"].join("\n")})},getEdgeDetectionMaterial:function(){return new qn({uniforms:{maskTexture:{value:null},texSize:{value:new x(.5,.5)},visibleEdgeColor:{value:new s(1,1,1)},hiddenEdgeColor:{value:new s(1,1,1)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec3 visibleEdgeColor;\t\t\t\tuniform vec3 hiddenEdgeColor;\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\t\t\t\t}"})},getSeperableBlurMaterial:function(e){return new qn({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new x(.5,.5)},direction:{value:new x(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\t\t\t\tuniform sampler2D colorTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\tuniform float kernelRadius;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\t\t\t\t\tvec2 uvOffset = delta;\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\t\t\t\t\t\tweightSum += (2.0 * w);\t\t\t\t\t\tuvOffset += delta;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\t\t\t\t}"})},getOverlayMaterial:function(){return new qn({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform sampler2D edgeTexture1;\t\t\t\tuniform sampler2D edgeTexture2;\t\t\t\tuniform sampler2D patternTexture;\t\t\t\tuniform float edgeStrength;\t\t\t\tuniform float edgeGlow;\t\t\t\tuniform bool usePatternTexture;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\t\t\t\t\tif(usePatternTexture)\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\t\t\t\t\tgl_FragColor = finalColor;\t\t\t\t}",blending:te,depthTest:!1,depthWrite:!1,transparent:!0})}}),Bl.BlurDirectionX=new x(1,0),Bl.BlurDirectionY=new x(0,1);var zl=function(e,t,n,r,i){Bu.call(this),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};function jl(e,t,n,r,i,o,a,s,c,u){if((u=void 0!==u?u:yt)!==yt&&u!==bt)throw new Error("DepthTexture format must be either DepthFormat or DepthStencilFormat");void 0===n&&u===yt&&(n=rt),void 0===n&&u===bt&&(n=ht),Kn.call(this,null,r,i,o,a,s,u,n,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:Ye,this.minFilter=void 0!==s?s:Ye,this.flipY=!1,this.generateMipmaps=!1}zl.prototype=Object.assign(Object.create(Bu.prototype),{constructor:zl,render:function(e,t,n,r,i){var o,a,s=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(o=e.getClearColor().getHex(),a=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.render(this.scene,this.camera,this.renderToScreen?null:n,this.clear),this.clearColor&&e.setClearColor(o,a),this.scene.overrideMaterial=null,e.autoClear=s}}),jl.prototype=Object.create(Kn.prototype),jl.prototype.constructor=jl,jl.prototype.isDepthTexture=!0;var Vl={defines:{NUM_SAMPLES:7,NUM_RINGS:4,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:0,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{type:"t",value:null},tDiffuse:{type:"t",value:null},tNormal:{type:"t",value:null},size:{type:"v2",value:new x(512,512)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},cameraProjectionMatrix:{type:"m4",value:new a},cameraInverseProjectionMatrix:{type:"m4",value:new a},scale:{type:"f",value:1},intensity:{type:"f",value:.1},bias:{type:"f",value:.5},minResolution:{type:"f",value:0},kernelRadius:{type:"f",value:100},randomSeed:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","#if DIFFUSE_TEXTURE == 1","uniform sampler2D tDiffuse;","#endif","uniform sampler2D tDepth;","#if NORMAL_TEXTURE == 1","uniform sampler2D tNormal;","#endif","uniform float cameraNear;","uniform float cameraFar;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform float scale;","uniform float intensity;","uniform float bias;","uniform float kernelRadius;","uniform float minResolution;","uniform vec2 size;","uniform float randomSeed;","// RGBA depth","#include <packing>","vec4 getDefaultColor( const in vec2 screenPosition ) {","\t#if DIFFUSE_TEXTURE == 1","\treturn texture2D( tDiffuse, vUv );","\t#else","\treturn vec4( 1.0 );","\t#endif","}","float getDepth( const in vec2 screenPosition ) {","\t#if DEPTH_PACKING == 1","\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","\t#else","\treturn texture2D( tDepth, screenPosition ).x;","\t#endif","}","float getViewZ( const in float depth ) {","\t#if PERSPECTIVE_CAMERA == 1","\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","\t#else","\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );","\t#endif","}","vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {","\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];","\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );","\tclipPosition *= clipW; // unprojection.","\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;","}","vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {","\t#if NORMAL_TEXTURE == 1","\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );","\t#else","\treturn normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );","\t#endif","}","float scaleDividedByCameraFar;","float minResolutionMultipliedByCameraFar;","float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {","\tvec3 viewDelta = sampleViewPosition - centerViewPosition;","\tfloat viewDistance = length( viewDelta );","\tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;","\treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );","}","// moving costly divides into consts","const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );","const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );","float getAmbientOcclusion( const in vec3 centerViewPosition ) {","\t// precompute some variables require in getOcclusion.","\tscaleDividedByCameraFar = scale / cameraFar;","\tminResolutionMultipliedByCameraFar = minResolution * cameraFar;","\tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );","\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/","\tfloat angle = rand( vUv + randomSeed ) * PI2;","\tvec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;","\tvec2 radiusStep = radius;","\tfloat occlusionSum = 0.0;","\tfloat weightSum = 0.0;","\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {","\t\tvec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;","\t\tradius += radiusStep;","\t\tangle += ANGLE_STEP;","\t\tfloat sampleDepth = getDepth( sampleUv );","\t\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {","\t\t\tcontinue;","\t\t}","\t\tfloat sampleViewZ = getViewZ( sampleDepth );","\t\tvec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );","\t\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );","\t\tweightSum += 1.0;","\t}","\tif( weightSum == 0.0 ) discard;","\treturn occlusionSum * ( intensity / weightSum );","}","void main() {","\tfloat centerDepth = getDepth( vUv );","\tif( centerDepth >= ( 1.0 - EPSILON ) ) {","\t\tdiscard;","\t}","\tfloat centerViewZ = getViewZ( centerDepth );","\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );","\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );","\tgl_FragColor = getDefaultColor( vUv );","\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;","}"].join("\n")},Gl={defines:{KERNEL_RADIUS:4,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDiffuse:{type:"t",value:null},size:{type:"v2",value:new x(512,512)},sampleUvOffsets:{type:"v2v",value:[new x(0,0)]},sampleWeights:{type:"1fv",value:[1]},tDepth:{type:"t",value:null},cameraNear:{type:"f",value:10},cameraFar:{type:"f",value:1e3},depthCutoff:{type:"f",value:10}},vertexShader:["#include <common>","uniform vec2 size;","varying vec2 vUv;","varying vec2 vInvSize;","void main() {","\tvUv = uv;","\tvInvSize = 1.0 / size;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","#include <packing>","uniform sampler2D tDiffuse;","uniform sampler2D tDepth;","uniform float cameraNear;","uniform float cameraFar;","uniform float depthCutoff;","uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];","uniform float sampleWeights[ KERNEL_RADIUS + 1 ];","varying vec2 vUv;","varying vec2 vInvSize;","float getDepth( const in vec2 screenPosition ) {","\t#if DEPTH_PACKING == 1","\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","\t#else","\treturn texture2D( tDepth, screenPosition ).x;","\t#endif","}","float getViewZ( const in float depth ) {","\t#if PERSPECTIVE_CAMERA == 1","\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","\t#else","\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );","\t#endif","}","void main() {","\tfloat depth = getDepth( vUv );","\tif( depth >= ( 1.0 - EPSILON ) ) {","\t\tdiscard;","\t}","\tfloat centerViewZ = -getViewZ( depth );","\tbool rBreak = false, lBreak = false;","\tfloat weightSum = sampleWeights[0];","\tvec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;","\tfor( int i = 1; i <= KERNEL_RADIUS; i ++ ) {","\t\tfloat sampleWeight = sampleWeights[i];","\t\tvec2 sampleUvOffset = sampleUvOffsets[i] * vInvSize;","\t\tvec2 sampleUv = vUv + sampleUvOffset;","\t\tfloat viewZ = -getViewZ( getDepth( sampleUv ) );","\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) rBreak = true;","\t\tif( ! rBreak ) {","\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;","\t\t\tweightSum += sampleWeight;","\t\t}","\t\tsampleUv = vUv - sampleUvOffset;","\t\tviewZ = -getViewZ( getDepth( sampleUv ) );","\t\tif( abs( viewZ - centerViewZ ) > depthCutoff ) lBreak = true;","\t\tif( ! lBreak ) {","\t\t\tdiffuseSum += texture2D( tDiffuse, sampleUv ) * sampleWeight;","\t\t\tweightSum += sampleWeight;","\t\t}","\t}","\tgl_FragColor = diffuseSum / weightSum;","}"].join("\n")},Wl={createSampleWeights:function(e,t){for(var n=function(e,t){return Math.exp(-e*e/(t*t*2))/(Math.sqrt(2*Math.PI)*t)},r=[],i=0;i<=e;i++)r.push(n(i,t));return r},createSampleOffsets:function(e,t){for(var n=[],r=0;r<=e;r++)n.push(t.clone().multiplyScalar(r));return n},configure:function(e,t,n,r){e.defines.KERNEL_RADIUS=t,e.uniforms.sampleUvOffsets.value=Wl.createSampleOffsets(t,r),e.uniforms.sampleWeights.value=Wl.createSampleWeights(t,n),e.needsUpdate=!0}},Hl={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","#include <packing>","void main() {","float depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );","gl_FragColor = vec4( vec3( depth ), opacity );","}"].join("\n")},Xl=function(e,t,n,r,i){(Bu.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.supportsDepthTextureExtension=void 0!==n&&n,this.supportsNormalTexture=void 0!==r&&r,this.oldClearColor=new v,this.oldClearAlpha=1,this.params={output:0,saoBias:.5,saoIntensity:.18,saoScale:1,saoKernelRadius:100,saoMinResolution:0,saoBlur:!0,saoBlurRadius:8,saoBlurStdDev:4,saoBlurDepthCutoff:.01},this.resolution=void 0!==i?new x(i.x,i.y):new x(256,256),this.saoRenderTarget=new $n(this.resolution.x,this.resolution.y,{minFilter:Ze,magFilter:Ze,format:pt}),this.blurIntermediateRenderTarget=this.saoRenderTarget.clone(),this.beautyRenderTarget=this.saoRenderTarget.clone(),this.normalRenderTarget=new $n(this.resolution.x,this.resolution.y,{minFilter:Ye,magFilter:Ye,format:pt}),this.depthRenderTarget=this.normalRenderTarget.clone(),this.supportsDepthTextureExtension)&&((n=new jl).type=rt,n.minFilter=Ye,n.maxFilter=Ye,this.beautyRenderTarget.depthTexture=n,this.beautyRenderTarget.depthBuffer=!0);this.depthMaterial=new dr,this.depthMaterial.depthPacking=rn,this.depthMaterial.blending=$,this.normalMaterial=new mr,this.normalMaterial.blending=$,void 0===Vl&&console.error("SAOPass relies on SAOShader"),this.saoMaterial=new qn({defines:Object.assign({},Vl.defines),fragmentShader:Vl.fragmentShader,vertexShader:Vl.vertexShader,uniforms:Xn.clone(Vl.uniforms)}),this.saoMaterial.extensions.derivatives=!0,this.saoMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.saoMaterial.defines.NORMAL_TEXTURE=this.supportsNormalTexture?1:0,this.saoMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.saoMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?n:this.depthRenderTarget.texture,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.getInverse(this.camera.projectionMatrix),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.blending=$,void 0===Gl&&console.error("SAOPass relies on DepthLimitedBlurShader"),this.vBlurMaterial=new qn({uniforms:Xn.clone(Gl.uniforms),defines:Object.assign({},Gl.defines),vertexShader:Gl.vertexShader,fragmentShader:Gl.fragmentShader}),this.vBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.vBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.vBlurMaterial.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.vBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?n:this.depthRenderTarget.texture,this.vBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.vBlurMaterial.blending=$,this.hBlurMaterial=new qn({uniforms:Xn.clone(Gl.uniforms),defines:Object.assign({},Gl.defines),vertexShader:Gl.vertexShader,fragmentShader:Gl.fragmentShader}),this.hBlurMaterial.defines.DEPTH_PACKING=this.supportsDepthTextureExtension?0:1,this.hBlurMaterial.defines.PERSPECTIVE_CAMERA=this.camera.isPerspectiveCamera?1:0,this.hBlurMaterial.uniforms.tDiffuse.value=this.blurIntermediateRenderTarget.texture,this.hBlurMaterial.uniforms.tDepth.value=this.supportsDepthTextureExtension?n:this.depthRenderTarget.texture,this.hBlurMaterial.uniforms.size.value.set(this.resolution.x,this.resolution.y),this.hBlurMaterial.blending=$,void 0===gl&&console.error("SAOPass relies on CopyShader"),this.materialCopy=new qn({uniforms:Xn.clone(gl.uniforms),vertexShader:gl.vertexShader,fragmentShader:gl.fragmentShader,blending:$}),this.materialCopy.transparent=!0,this.materialCopy.depthTest=!1,this.materialCopy.depthWrite=!1,this.materialCopy.blending=ie,this.materialCopy.blendSrc=ye,this.materialCopy.blendDst=le,this.materialCopy.blendEquation=oe,this.materialCopy.blendSrcAlpha=ve,this.materialCopy.blendDstAlpha=le,this.materialCopy.blendEquationAlpha=oe,void 0===gl&&console.error("SAOPass relies on UnpackDepthRGBAShader"),this.depthCopy=new qn({uniforms:Xn.clone(Hl.uniforms),vertexShader:Hl.vertexShader,fragmentShader:Hl.fragmentShader,blending:$}),this.quadCamera=new Jn(-1,1,1,-1,0,1),this.quadScene=new Yn,this.quad=new fn(new tr(2,2),null),this.quadScene.add(this.quad)};Xl.OUTPUT={Beauty:1,Default:0,SAO:2,Depth:3,Normal:4},Xl.prototype=Object.assign(Object.create(Bu.prototype),{constructor:Xl,render:function(e,t,n,r,i){if(this.renderToScreen&&(this.materialCopy.blending=$,this.materialCopy.uniforms.tDiffuse.value=n.texture,this.materialCopy.needsUpdate=!0,this.renderPass(e,this.materialCopy,null)),1!==this.params.output){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var o=e.autoClear;e.autoClear=!1,e.clearTarget(this.depthRenderTarget),this.saoMaterial.uniforms.bias.value=this.params.saoBias,this.saoMaterial.uniforms.intensity.value=this.params.saoIntensity,this.saoMaterial.uniforms.scale.value=this.params.saoScale,this.saoMaterial.uniforms.kernelRadius.value=this.params.saoKernelRadius,this.saoMaterial.uniforms.minResolution.value=this.params.saoMinResolution,this.saoMaterial.uniforms.cameraNear.value=this.camera.near,this.saoMaterial.uniforms.cameraFar.value=this.camera.far;var a=this.params.saoBlurDepthCutoff*(this.camera.far-this.camera.near);this.vBlurMaterial.uniforms.depthCutoff.value=a,this.hBlurMaterial.uniforms.depthCutoff.value=a,this.vBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.vBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.hBlurMaterial.uniforms.cameraNear.value=this.camera.near,this.hBlurMaterial.uniforms.cameraFar.value=this.camera.far,this.params.saoBlurRadius=Math.floor(this.params.saoBlurRadius),this.prevStdDev===this.params.saoBlurStdDev&&this.prevNumSamples===this.params.saoBlurRadius||(Wl.configure(this.vBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new x(0,1)),Wl.configure(this.hBlurMaterial,this.params.saoBlurRadius,this.params.saoBlurStdDev,new x(1,0)),this.prevStdDev=this.params.saoBlurStdDev,this.prevNumSamples=this.params.saoBlurRadius),e.setClearColor(0),e.render(this.scene,this.camera,this.beautyRenderTarget,!0),this.supportsDepthTextureExtension||this.renderOverride(e,this.depthMaterial,this.depthRenderTarget,0,1),this.supportsNormalTexture&&this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.renderPass(e,this.saoMaterial,this.saoRenderTarget,16777215,1),this.params.saoBlur&&(this.renderPass(e,this.vBlurMaterial,this.blurIntermediateRenderTarget,16777215,1),this.renderPass(e,this.hBlurMaterial,this.saoRenderTarget,16777215,1));var s=this.materialCopy;3===this.params.output?this.supportsDepthTextureExtension?(this.materialCopy.uniforms.tDiffuse.value=this.beautyRenderTarget.depthTexture,this.materialCopy.needsUpdate=!0):(this.depthCopy.uniforms.tDiffuse.value=this.depthRenderTarget.texture,this.depthCopy.needsUpdate=!0,s=this.depthCopy):4===this.params.output?(this.materialCopy.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.materialCopy.needsUpdate=!0):(this.materialCopy.uniforms.tDiffuse.value=this.saoRenderTarget.texture,this.materialCopy.needsUpdate=!0),0===this.params.output?s.blending=ie:s.blending=$,this.renderPass(e,s,this.renderToScreen?null:n),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=o}},renderPass:function(e,t,n,r,i){var o=e.getClearColor(),a=e.getClearAlpha(),s=e.autoClear;e.autoClear=!1;var c=void 0!==r&&null!==r;c&&(e.setClearColor(r),e.setClearAlpha(i||0)),this.quad.material=t,e.render(this.quadScene,this.quadCamera,n,c),e.autoClear=s,e.setClearColor(o),e.setClearAlpha(a)},renderOverride:function(e,t,n,r,i){var o=e.getClearColor(),a=e.getClearAlpha(),s=e.autoClear;e.autoClear=!1,r=t.clearColor||r,i=t.clearAlpha||i;var c=void 0!==r&&null!==r;c&&(e.setClearColor(r),e.setClearAlpha(i||0)),this.scene.overrideMaterial=t,e.render(this.scene,this.camera,n,c),this.scene.overrideMaterial=null,e.autoClear=s,e.setClearColor(o),e.setClearAlpha(a)},setSize:function(e,t){this.beautyRenderTarget.setSize(e,t),this.saoRenderTarget.setSize(e,t),this.blurIntermediateRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.depthRenderTarget.setSize(e,t),this.saoMaterial.uniforms.size.value.set(e,t),this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.getInverse(this.camera.projectionMatrix),this.saoMaterial.uniforms.cameraProjectionMatrix.value=this.camera.projectionMatrix,this.saoMaterial.needsUpdate=!0,this.vBlurMaterial.uniforms.size.value.set(e,t),this.vBlurMaterial.needsUpdate=!0,this.hBlurMaterial.uniforms.size.value.set(e,t),this.hBlurMaterial.needsUpdate=!0}});var ql=function(e){Bu.call(this),void 0===gl&&console.error("SavePass relies on CopyShader");var t=gl;this.textureID="tDiffuse",this.uniforms=Xn.clone(t.uniforms),this.material=new qn({uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}),this.renderTarget=e,void 0===this.renderTarget&&(this.renderTarget=new $n(i.innerWidth,i.innerHeight,{minFilter:Ze,magFilter:Ze,format:ft,stencilBuffer:!1}),this.renderTarget.texture.name="SavePass.rt"),this.needsSwap=!1,this.camera=new Jn(-1,1,1,-1,0,1),this.scene=new Yn,this.quad=new fn(new tr(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)};ql.prototype=Object.assign(Object.create(Bu.prototype),{constructor:ql,render:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.quad.material=this.material,e.render(this.scene,this.camera,this.renderTarget,this.clear)}});var Yl=[{defines:{SMAA_THRESHOLD:"0.1"},uniforms:{tDiffuse:{value:null},resolution:{value:new x(1/1024,1/512)}},vertexShader:["uniform vec2 resolution;","varying vec2 vUv;","varying vec4 vOffset[ 3 ];","void SMAAEdgeDetectionVS( vec2 texcoord ) {","vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 );","vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 );","vOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 );","}","void main() {","vUv = uv;","SMAAEdgeDetectionVS( vUv );","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","varying vec4 vOffset[ 3 ];","vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {","vec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );","vec4 delta;","vec3 C = texture2D( colorTex, texcoord ).rgb;","vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;","vec3 t = abs( C - Cleft );","delta.x = max( max( t.r, t.g ), t.b );","vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;","t = abs( C - Ctop );","delta.y = max( max( t.r, t.g ), t.b );","vec2 edges = step( threshold, delta.xy );","if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )","discard;","vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;","t = abs( C - Cright );","delta.z = max( max( t.r, t.g ), t.b );","vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;","t = abs( C - Cbottom );","delta.w = max( max( t.r, t.g ), t.b );","float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );","vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;","t = abs( C - Cleftleft );","delta.z = max( max( t.r, t.g ), t.b );","vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;","t = abs( C - Ctoptop );","delta.w = max( max( t.r, t.g ), t.b );","maxDelta = max( max( maxDelta, delta.z ), delta.w );","edges.xy *= step( 0.5 * maxDelta, delta.xy );","return vec4( edges, 0.0, 0.0 );","}","void main() {","gl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );","}"].join("\n")},{defines:{SMAA_MAX_SEARCH_STEPS:"8",SMAA_AREATEX_MAX_DISTANCE:"16",SMAA_AREATEX_PIXEL_SIZE:"( 1.0 / vec2( 160.0, 560.0 ) )",SMAA_AREATEX_SUBTEX_SIZE:"( 1.0 / 7.0 )"},uniforms:{tDiffuse:{value:null},tArea:{value:null},tSearch:{value:null},resolution:{value:new x(1/1024,1/512)}},vertexShader:["uniform vec2 resolution;","varying vec2 vUv;","varying vec4 vOffset[ 3 ];","varying vec2 vPixcoord;","void SMAABlendingWeightCalculationVS( vec2 texcoord ) {","vPixcoord = texcoord / resolution;","vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.25, 0.125, 1.25, 0.125 );","vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( -0.125, 0.25, -0.125, -1.25 );","vOffset[ 2 ] = vec4( vOffset[ 0 ].xz, vOffset[ 1 ].yw ) + vec4( -2.0, 2.0, -2.0, 2.0 ) * resolution.xxyy * float( SMAA_MAX_SEARCH_STEPS );","}","void main() {","vUv = uv;","SMAABlendingWeightCalculationVS( vUv );","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define SMAASampleLevelZeroOffset( tex, coord, offset ) texture2D( tex, coord + float( offset ) * resolution, 0.0 )","uniform sampler2D tDiffuse;","uniform sampler2D tArea;","uniform sampler2D tSearch;","uniform vec2 resolution;","varying vec2 vUv;","varying vec4 vOffset[3];","varying vec2 vPixcoord;","vec2 round( vec2 x ) {","return sign( x ) * floor( abs( x ) + 0.5 );","}","float SMAASearchLength( sampler2D searchTex, vec2 e, float bias, float scale ) {","e.r = bias + e.r * scale;","return 255.0 * texture2D( searchTex, e, 0.0 ).r;","}","float SMAASearchXLeft( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {","vec2 e = vec2( 0.0, 1.0 );","for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {","e = texture2D( edgesTex, texcoord, 0.0 ).rg;","texcoord -= vec2( 2.0, 0.0 ) * resolution;","if ( ! ( texcoord.x > end && e.g > 0.8281 && e.r == 0.0 ) ) break;","}","texcoord.x += 0.25 * resolution.x;","texcoord.x += resolution.x;","texcoord.x += 2.0 * resolution.x;","texcoord.x -= resolution.x * SMAASearchLength(searchTex, e, 0.0, 0.5);","return texcoord.x;","}","float SMAASearchXRight( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {","vec2 e = vec2( 0.0, 1.0 );","for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {","e = texture2D( edgesTex, texcoord, 0.0 ).rg;","texcoord += vec2( 2.0, 0.0 ) * resolution;","if ( ! ( texcoord.x < end && e.g > 0.8281 && e.r == 0.0 ) ) break;","}","texcoord.x -= 0.25 * resolution.x;","texcoord.x -= resolution.x;","texcoord.x -= 2.0 * resolution.x;","texcoord.x += resolution.x * SMAASearchLength( searchTex, e, 0.5, 0.5 );","return texcoord.x;","}","float SMAASearchYUp( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {","vec2 e = vec2( 1.0, 0.0 );","for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {","e = texture2D( edgesTex, texcoord, 0.0 ).rg;","texcoord += vec2( 0.0, 2.0 ) * resolution;","if ( ! ( texcoord.y > end && e.r > 0.8281 && e.g == 0.0 ) ) break;","}","texcoord.y -= 0.25 * resolution.y;","texcoord.y -= resolution.y;","texcoord.y -= 2.0 * resolution.y;","texcoord.y += resolution.y * SMAASearchLength( searchTex, e.gr, 0.0, 0.5 );","return texcoord.y;","}","float SMAASearchYDown( sampler2D edgesTex, sampler2D searchTex, vec2 texcoord, float end ) {","vec2 e = vec2( 1.0, 0.0 );","for ( int i = 0; i < SMAA_MAX_SEARCH_STEPS; i ++ ) {","e = texture2D( edgesTex, texcoord, 0.0 ).rg;","texcoord -= vec2( 0.0, 2.0 ) * resolution;","if ( ! ( texcoord.y < end && e.r > 0.8281 && e.g == 0.0 ) ) break;","}","texcoord.y += 0.25 * resolution.y;","texcoord.y += resolution.y;","texcoord.y += 2.0 * resolution.y;","texcoord.y -= resolution.y * SMAASearchLength( searchTex, e.gr, 0.5, 0.5 );","return texcoord.y;","}","vec2 SMAAArea( sampler2D areaTex, vec2 dist, float e1, float e2, float offset ) {","vec2 texcoord = float( SMAA_AREATEX_MAX_DISTANCE ) * round( 4.0 * vec2( e1, e2 ) ) + dist;","texcoord = SMAA_AREATEX_PIXEL_SIZE * texcoord + ( 0.5 * SMAA_AREATEX_PIXEL_SIZE );","texcoord.y += SMAA_AREATEX_SUBTEX_SIZE * offset;","return texture2D( areaTex, texcoord, 0.0 ).rg;","}","vec4 SMAABlendingWeightCalculationPS( vec2 texcoord, vec2 pixcoord, vec4 offset[ 3 ], sampler2D edgesTex, sampler2D areaTex, sampler2D searchTex, ivec4 subsampleIndices ) {","vec4 weights = vec4( 0.0, 0.0, 0.0, 0.0 );","vec2 e = texture2D( edgesTex, texcoord ).rg;","if ( e.g > 0.0 ) {","vec2 d;","vec2 coords;","coords.x = SMAASearchXLeft( edgesTex, searchTex, offset[ 0 ].xy, offset[ 2 ].x );","coords.y = offset[ 1 ].y;","d.x = coords.x;","float e1 = texture2D( edgesTex, coords, 0.0 ).r;","coords.x = SMAASearchXRight( edgesTex, searchTex, offset[ 0 ].zw, offset[ 2 ].y );","d.y = coords.x;","d = d / resolution.x - pixcoord.x;","vec2 sqrt_d = sqrt( abs( d ) );","coords.y -= 1.0 * resolution.y;","float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 1, 0 ) ).r;","weights.rg = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.y ) );","}","if ( e.r > 0.0 ) {","vec2 d;","vec2 coords;","coords.y = SMAASearchYUp( edgesTex, searchTex, offset[ 1 ].xy, offset[ 2 ].z );","coords.x = offset[ 0 ].x;","d.x = coords.y;","float e1 = texture2D( edgesTex, coords, 0.0 ).g;","coords.y = SMAASearchYDown( edgesTex, searchTex, offset[ 1 ].zw, offset[ 2 ].w );","d.y = coords.y;","d = d / resolution.y - pixcoord.y;","vec2 sqrt_d = sqrt( abs( d ) );","coords.y -= 1.0 * resolution.y;","float e2 = SMAASampleLevelZeroOffset( edgesTex, coords, ivec2( 0, 1 ) ).g;","weights.ba = SMAAArea( areaTex, sqrt_d, e1, e2, float( subsampleIndices.x ) );","}","return weights;","}","void main() {","gl_FragColor = SMAABlendingWeightCalculationPS( vUv, vPixcoord, vOffset, tDiffuse, tArea, tSearch, ivec4( 0.0 ) );","}"].join("\n")},{uniforms:{tDiffuse:{value:null},tColor:{value:null},resolution:{value:new x(1/1024,1/512)}},vertexShader:["uniform vec2 resolution;","varying vec2 vUv;","varying vec4 vOffset[ 2 ];","void SMAANeighborhoodBlendingVS( vec2 texcoord ) {","vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0, 1.0 );","vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4( 1.0, 0.0, 0.0, -1.0 );","}","void main() {","vUv = uv;","SMAANeighborhoodBlendingVS( vUv );","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform sampler2D tColor;","uniform vec2 resolution;","varying vec2 vUv;","varying vec4 vOffset[ 2 ];","vec4 SMAANeighborhoodBlendingPS( vec2 texcoord, vec4 offset[ 2 ], sampler2D colorTex, sampler2D blendTex ) {","vec4 a;","a.xz = texture2D( blendTex, texcoord ).xz;","a.y = texture2D( blendTex, offset[ 1 ].zw ).g;","a.w = texture2D( blendTex, offset[ 1 ].xy ).a;","if ( dot(a, vec4( 1.0, 1.0, 1.0, 1.0 )) < 1e-5 ) {","return texture2D( colorTex, texcoord, 0.0 );","} else {","vec2 offset;","offset.x = a.a > a.b ? a.a : -a.b;","offset.y = a.g > a.r ? -a.g : a.r;","if ( abs( offset.x ) > abs( offset.y )) {","offset.y = 0.0;","} else {","offset.x = 0.0;","}","vec4 C = texture2D( colorTex, texcoord, 0.0 );","texcoord += sign( offset ) * resolution;","vec4 Cop = texture2D( colorTex, texcoord, 0.0 );","float s = abs( offset.x ) > abs( offset.y ) ? abs( offset.x ) : abs( offset.y );","C.xyz = pow(C.xyz, vec3(2.2));","Cop.xyz = pow(Cop.xyz, vec3(2.2));","vec4 mixed = mix(C, Cop, s);","mixed.xyz = pow(mixed.xyz, vec3(1.0 / 2.2));","return mixed;","}","}","void main() {","gl_FragColor = SMAANeighborhoodBlendingPS( vUv, vOffset, tColor, tDiffuse );","}"].join("\n")}],Jl=function(e,t){Bu.call(this),this.edgesRT=new $n(e,t,{depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!1,minFilter:Ze,format:ft}),this.edgesRT.texture.name="SMAAPass.edges",this.weightsRT=new $n(e,t,{depthBuffer:!1,stencilBuffer:!1,generateMipmaps:!1,minFilter:Ze,format:pt}),this.weightsRT.texture.name="SMAAPass.weights";var n=new Image;n.src=this.getAreaTexture(),this.areaTexture=new Kn,this.areaTexture.name="SMAAPass.area",this.areaTexture.image=n,this.areaTexture.format=ft,this.areaTexture.minFilter=Ze,this.areaTexture.generateMipmaps=!1,this.areaTexture.needsUpdate=!0,this.areaTexture.flipY=!1;var r=new Image;r.src=this.getSearchTexture(),this.searchTexture=new Kn,this.searchTexture.name="SMAAPass.search",this.searchTexture.image=r,this.searchTexture.magFilter=Ye,this.searchTexture.minFilter=Ye,this.searchTexture.generateMipmaps=!1,this.searchTexture.needsUpdate=!0,this.searchTexture.flipY=!1,void 0===Yl&&console.error("SMAAPass relies on SMAAShader"),this.uniformsEdges=Xn.clone(Yl[0].uniforms),this.uniformsEdges.resolution.value.set(1/e,1/t),this.materialEdges=new qn({defines:Object.assign({},Yl[0].defines),uniforms:this.uniformsEdges,vertexShader:Yl[0].vertexShader,fragmentShader:Yl[0].fragmentShader}),this.uniformsWeights=Xn.clone(Yl[1].uniforms),this.uniformsWeights.resolution.value.set(1/e,1/t),this.uniformsWeights.tDiffuse.value=this.edgesRT.texture,this.uniformsWeights.tArea.value=this.areaTexture,this.uniformsWeights.tSearch.value=this.searchTexture,this.materialWeights=new qn({defines:Object.assign({},Yl[1].defines),uniforms:this.uniformsWeights,vertexShader:Yl[1].vertexShader,fragmentShader:Yl[1].fragmentShader}),this.uniformsBlend=Xn.clone(Yl[2].uniforms),this.uniformsBlend.resolution.value.set(1/e,1/t),this.uniformsBlend.tDiffuse.value=this.weightsRT.texture,this.materialBlend=new qn({uniforms:this.uniformsBlend,vertexShader:Yl[2].vertexShader,fragmentShader:Yl[2].fragmentShader}),this.needsSwap=!1,this.camera=new Jn(-1,1,1,-1,0,1),this.scene=new Yn,this.quad=new fn(new tr(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)};Jl.prototype=Object.assign(Object.create(Bu.prototype),{constructor:Jl,render:function(e,t,n,r,i){this.uniformsEdges.tDiffuse.value=n.texture,this.quad.material=this.materialEdges,e.render(this.scene,this.camera,this.edgesRT,this.clear),this.quad.material=this.materialWeights,e.render(this.scene,this.camera,this.weightsRT,this.clear),this.uniformsBlend.tColor.value=n.texture,this.quad.material=this.materialBlend,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)},setSize:function(e,t){this.edgesRT.setSize(e,t),this.weightsRT.setSize(e,t),this.materialEdges.uniforms.resolution.value.set(1/e,1/t),this.materialWeights.uniforms.resolution.value.set(1/e,1/t),this.materialBlend.uniforms.resolution.value.set(1/e,1/t)},getAreaTexture:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAIAAACOVPcQAACBeklEQVR42u39W4xlWXrnh/3WWvuciIzMrKxrV8/0rWbY0+SQFKcb4owIkSIFCjY9AC1BT/LYBozRi+EX+cV+8IMsYAaCwRcBwjzMiw2jAWtgwC8WR5Q8mDFHZLNHTarZGrLJJllt1W2qKrsumZWZcTvn7L3W54e1vrXX3vuciLPPORFR1XE2EomorB0nVuz//r71re/y/1eMvb4Cb3N11xV/PP/2v4UBAwJG/7H8urx6/25/Gf8O5hypMQ0EEEQwAqLfoN/Z+97f/SW+/NvcgQk4sGBJK6H7N4PFVL+K+e0N11yNfkKvwUdwdlUAXPHHL38oa15f/i/46Ih6SuMSPmLAYAwyRKn7dfMGH97jaMFBYCJUgotIC2YAdu+LyW9vvubxAP8kAL8H/koAuOKP3+q6+xGnd5kdYCeECnGIJViwGJMAkQKfDvB3WZxjLKGh8VSCCzhwEWBpMc5/kBbjawT4HnwJfhr+pPBIu7uu+OOTo9vsmtQcniMBGkKFd4jDWMSCRUpLjJYNJkM+IRzQ+PQvIeAMTrBS2LEiaiR9b/5PuT6Ap/AcfAFO4Y3dA3DFH7/VS+M8k4baEAQfMI4QfbVDDGIRg7GKaIY52qAjTAgTvGBAPGIIghOCYAUrGFNgzA7Q3QhgCwfwAnwe5vDejgG44o/fbm1C5ZlYQvQDARPAIQGxCWBM+wWl37ZQESb4gImexGMDouhGLx1Cst0Saa4b4AqO4Hk4gxo+3DHAV/nx27p3JziPM2pVgoiia5MdEzCGULprIN7gEEeQ5IQxEBBBQnxhsDb5auGmAAYcHMA9eAAz8PBol8/xij9+C4Djlim4gJjWcwZBhCBgMIIYxGAVIkH3ZtcBuLdtRFMWsPGoY9rN+HoBji9VBYdwD2ZQg4cnO7OSq/z4rU5KKdwVbFAjNojCQzTlCLPFSxtamwh2jMUcEgg2Wm/6XgErIBhBckQtGN3CzbVacERgCnfgLswhnvqf7QyAq/z4rRZm1YglYE3affGITaZsdIe2FmMIpnOCap25I6jt2kCwCW0D1uAD9sZctNGXcQIHCkINDQgc78aCr+zjtw3BU/ijdpw3zhCwcaONwBvdeS2YZKkJNJsMPf2JKEvC28RXxxI0ASJyzQCjCEQrO4Q7sFArEzjZhaFc4cdv+/JFdKULM4px0DfUBI2hIsy06BqLhGTQEVdbfAIZXYMPesq6VoCHICzUyjwInO4Y411//LYLs6TDa9wvg2CC2rElgAnpTBziThxaL22MYhzfkghz6GAs2VHbbdM91VZu1MEEpupMMwKyVTb5ij9+u4VJG/5EgEMMmFF01cFai3isRbKbzb+YaU/MQbAm2XSMoUPAmvZzbuKYRIFApbtlrfFuUGd6vq2hXNnH78ZLh/iFhsQG3T4D1ib7k5CC6vY0DCbtrohgLEIClXiGtl10zc0CnEGIhhatLBva7NP58Tvw0qE8yWhARLQ8h4+AhQSP+I4F5xoU+VilGRJs6wnS7ruti/4KvAY/CfdgqjsMy4pf8fodQO8/gnuX3f/3xi3om1/h7THr+co3x93PP9+FBUfbNUjcjEmhcrkT+8K7ml7V10Jo05mpIEFy1NmCJWx9SIKKt+EjAL4Ez8EBVOB6havuT/rByPvHXK+9zUcfcbb254+9fydJknYnRr1oGfdaiAgpxu1Rx/Rek8KISftx3L+DfsLWAANn8Hvw0/AFeAGO9DFV3c6D+CcWbL8Dj9e7f+T1k8AZv/d7+PXWM/Z+VvdCrIvuAKO09RpEEQJM0Ci6+B4xhTWr4cZNOvhktabw0ta0rSJmqz3Yw5/AKXwenod7cAhTmBSPKf6JBdvH8IP17h95pXqw50/+BFnj88fev4NchyaK47OPhhtI8RFSvAfDSNh0Ck0p2gLxGkib5NJj/JWCr90EWQJvwBzO4AHcgztwAFN1evHPUVGwfXON+0debT1YeGON9Yy9/63X+OguiwmhIhQhD7l4sMqlG3D86Suc3qWZ4rWjI1X7u0Ytw6x3rIMeIOPDprfe2XzNgyj6PahhBjO4C3e6puDgXrdg+/5l948vF3bqwZetZ+z9Rx9zdIY5pInPK4Nk0t+l52xdK2B45Qd87nM8fsD5EfUhIcJcERw4RdqqH7Yde5V7m1vhNmtedkz6EDzUMF/2jJYWbC+4fzzA/Y+/8PPH3j9dcBAPIRP8JLXd5BpAu03aziOL3VVHZzz3CXWDPWd+SH2AnxIqQoTZpo9Ckc6HIrFbAbzNmlcg8Ag8NFDDAhbJvTBZXbC94P7t68EXfv6o+21gUtPETU7bbkLxvNKRFG2+KXzvtObonPP4rBvsgmaKj404DlshFole1Glfh02fE7bYR7dZ82oTewIBGn1Md6CG6YUF26X376oevOLzx95vhUmgblI6LBZwTCDY7vMq0op5WVXgsObOXJ+1x3qaBl9j1FeLxbhU9w1F+Wiba6s1X/TBz1LnUfuYDi4r2C69f1f14BWfP+p+W2GFKuC9phcELMYRRLur9DEZTUdEH+iEqWdaM7X4WOoPGI+ZYD2+wcQ+y+ioHUZ9dTDbArzxmi/bJI9BND0Ynd6lBdve/butBw8+f/T9D3ABa3AG8W3VPX4hBin+bj8dMMmSpp5pg7fJ6xrBFE2WQQEWnV8Qg3FbAWzYfM1rREEnmvkN2o1+acG2d/9u68GDzx91v3mAjb1zkpqT21OipPKO0b9TO5W0nTdOmAQm0TObts3aBKgwARtoPDiCT0gHgwnbArzxmtcLc08HgF1asN0C4Ms/fvD5I+7PhfqyXE/b7RbbrGyRQRT9ARZcwAUmgdoz0ehJ9Fn7QAhUjhDAQSw0bV3T3WbNa59jzmiP6GsWbGXDX2ytjy8+f9T97fiBPq9YeLdBmyuizZHaqXITnXiMUEEVcJ7K4j3BFPurtB4bixW8wTpweL8DC95szWMOqucFYGsWbGU7p3TxxxefP+r+oTVktxY0v5hbq3KiOKYnY8ddJVSBxuMMVffNbxwIOERShst73HZ78DZrHpmJmH3K6sGz0fe3UUj0eyRrSCGTTc+rjVNoGzNSv05srAxUBh8IhqChiQgVNIIBH3AVPnrsnXQZbLTm8ammv8eVXn/vWpaTem5IXRlt+U/LA21zhSb9cye6jcOfCnOwhIAYXAMVTUNV0QhVha9xjgA27ODJbLbmitt3tRN80lqG6N/khgot4ZVlOyO4WNg3OIMzhIZQpUEHieg2im6F91hB3I2tubql6BYNN9Hj5S7G0G2tahslBWKDnOiIvuAEDzakDQKDNFQT6gbn8E2y4BBubM230YIpBnDbMa+y3dx0n1S0BtuG62lCCXwcY0F72T1VRR3t2ONcsmDjbmzNt9RFs2LO2hQNyb022JisaI8rAWuw4HI3FuAIhZdOGIcdjLJvvObqlpqvWTJnnQbyi/1M9O8UxWhBs//H42I0q1Yb/XPGONzcmm+ri172mHKvZBpHkJaNJz6v9jxqiklDj3U4CA2ugpAaYMWqNXsdXbmJNd9egCnJEsphXNM+MnK3m0FCJ5S1kmJpa3DgPVbnQnPGWIDspW9ozbcO4K/9LkfaQO2KHuqlfFXSbdNzcEcwoqNEFE9zcIXu9/6n/ym/BC/C3aJLzEKPuYVlbFnfhZ8kcWxV3dbv4bKl28566wD+8C53aw49lTABp9PWbsB+knfc/Li3eVizf5vv/xmvnPKg5ihwKEwlrcHqucuVcVOxEv8aH37E3ZqpZypUulrHEtIWKUr+txHg+ojZDGlwnqmkGlzcVi1dLiNSJiHjfbRNOPwKpx9TVdTn3K05DBx4psIk4Ei8aCkJahRgffk4YnEXe07T4H2RR1u27E6wfQsBDofUgjFUFnwC2AiVtA+05J2zpiDK2Oa0c5fmAecN1iJzmpqFZxqYBCYhFTCsUNEmUnIcZ6aEA5rQVhEywG6w7HSW02XfOoBlQmjwulOFQAg66SvJblrTEX1YtJ3uG15T/BH1OfOQeuR8g/c0gdpT5fx2SKbs9EfHTKdM8A1GaJRHLVIwhcGyydZsbifAFVKl5EMKNU2Hryo+06BeTgqnxzYjThVySDikbtJPieco75lYfKAJOMEZBTjoITuWHXXZVhcUDIS2hpiXHV9Ku4u44bN5OYLDOkJo8w+xJSMbhBRHEdEs9JZUCkQrPMAvaHyLkxgkEHxiNkx/x2YB0mGsQ8EUWj/stW5YLhtS5SMu+/YBbNPDCkGTUybN8krRLBGPlZkVOA0j+a1+rkyQKWGaPHPLZOkJhioQYnVZ2hS3zVxMtgC46KuRwbJNd9nV2PHgb36F194ecf/Yeu2vAFe5nm/bRBFrnY4BauE8ERmZRFUn0k8hbftiVYSKMEme2dJCJSCGYAlNqh87bXOPdUkGy24P6d1ll21MBqqx48Fvv8ZHH8HZFY7j/uAq1xMJUFqCSUlJPmNbIiNsmwuMs/q9CMtsZsFO6SprzCS1Z7QL8xCQClEelpjTduDMsmWD8S1PT152BtvmIGvUeDA/yRn83u/x0/4qxoPHjx+PXY9pqX9bgMvh/Nz9kpP4pOe1/fYf3axUiMdHLlPpZCNjgtNFAhcHEDxTumNONhHrBduW+vOyY++70WWnPXj98eA4kOt/mj/5E05l9+O4o8ePx67HFqyC+qSSnyselqjZGaVK2TadbFLPWAQ4NBhHqDCCV7OTpo34AlSSylPtIdd2AJZlyzYQrDJ5lcWGNceD80CunPLGGzsfD+7wRb95NevJI5docQ3tgCyr5bGnyaPRlmwNsFELViOOx9loebGNq2moDOKpHLVP5al2cymWHbkfzGXL7kfRl44H9wZy33tvt+PB/Xnf93e+nh5ZlU18wCiRUa9m7kib9LYuOk+hudQNbxwm0AQqbfloimaB2lM5fChex+ylMwuTbfmXQtmWlenZljbdXTLuOxjI/fDDHY4Hjx8/Hrse0zXfPFxbUN1kKqSCCSk50m0Ajtx3ub9XHBKHXESb8iO6E+qGytF4nO0OG3SXzbJlhxBnKtKyl0NwybjvYCD30aMdjgePHz8eu56SVTBbgxJMliQ3Oauwg0QHxXE2Ez/EIReLdQj42Gzb4CLS0YJD9xUx7bsi0vJi5mUbW1QzL0h0PFk17rtiIPfJk52MB48fPx67npJJwyrBa2RCCQRTbGZSPCxTPOiND4G2pYyOQ4h4jINIJh5wFU1NFZt+IsZ59LSnDqBjZ2awbOku+yInunLcd8VA7rNnOxkPHj9+PGY9B0MWJJNozOJmlglvDMXDEozdhQWbgs/U6oBanGzLrdSNNnZFjOkmbi5bNt1lX7JLLhn3vXAg9/h4y/Hg8ePHI9dzQMEkWCgdRfYykYKnkP7D4rIujsujaKPBsB54vE2TS00ccvFY/Tth7JXeq1hz+qgVy04sAJawTsvOknHfCwdyT062HA8eP348Zj0vdoXF4pilKa2BROed+9fyw9rWRXeTFXESMOanvDZfJuJaSXouQdMdDJZtekZcLLvEeK04d8m474UDuaenW44Hjx8/Xns9YYqZpszGWB3AN/4VHw+k7WSFtJ3Qicuqb/NlVmgXWsxh570xg2UwxUw3WfO6B5nOuO8aA7lnZxuPB48fPx6znm1i4bsfcbaptF3zNT78eFPtwi1OaCNOqp1x3zUGcs/PN++AGD1+fMXrSVm2baTtPhPahbPhA71wIHd2bXzRa69nG+3CraTtPivahV/55tXWg8fyRY/9AdsY8VbSdp8V7cKrrgdfM//z6ILQFtJ2nxHtwmuoB4/kf74+gLeRtvvMaBdeSz34+vifx0YG20jbfTa0C6+tHrwe//NmOG0L8EbSdp8R7cLrrQe/996O+ai3ujQOskpTNULa7jOjXXj99eCd8lHvoFiwsbTdZ0a78PrrwTvlo966pLuRtB2fFe3Cm6oHP9kNH/W2FryxtN1nTLvwRurBO+Kj3pWXHidtx2dFu/Bm68Fb81HvykuPlrb7LGkX3mw9eGs+6h1Y8MbSdjegXcguQLjmevDpTQLMxtJ2N6NdyBZu9AbrwVvwUW+LbteULUpCdqm0HTelXbhNPe8G68Gb8lFvVfYfSNuxvrTdTWoXbozAzdaDZzfkorOj1oxVxlIMlpSIlpLrt8D4hrQL17z+c3h6hU/wv4Q/utps4+bm+6P/hIcf0JwQ5oQGPBL0eKPTYEXTW+eL/2DKn73J9BTXYANG57hz1cEMviVf/4tf5b/6C5pTQkMIWoAq7hTpOJjtAM4pxKu5vg5vXeUrtI09/Mo/5H+4z+Mp5xULh7cEm2QbRP2tFIKR7WM3fPf/jZ3SWCqLM2l4NxID5zB72HQXv3jj/8mLR5xXNA5v8EbFQEz7PpRfl1+MB/hlAN65qgDn3wTgH13hK7T59bmP+NIx1SHHU84nLOITt3iVz8mNO+lPrjGAnBFqmioNn1mTyk1ta47R6d4MrX7tjrnjYUpdUbv2rVr6YpVfsGG58AG8Ah9eyUN8CX4WfgV+G8LVWPDGb+Zd4cU584CtqSbMKxauxTg+dyn/LkVgA+IR8KHtejeFKRtTmLLpxN6mYVLjYxwXf5x2VofiZcp/lwKk4wGOpYDnoIZPdg/AAbwMfx0+ge9dgZvYjuqKe4HnGnykYo5TvJbG0Vj12JagRhwKa44H95ShkZa5RyLGGdfYvG7aw1TsF6iapPAS29mNS3NmsTQZCmgTzFwgL3upCTgtBTRwvGMAKrgLn4evwin8+afJRcff+8izUGUM63GOOuAs3tJkw7J4kyoNreqrpO6cYLQeFUd7TTpr5YOTLc9RUUogUOVJQ1GYJaFLAW0oTmKyYS46ZooP4S4EON3xQ5zC8/CX4CnM4c1PE8ApexpoYuzqlP3d4S3OJP8ZDK7cKWNaTlqmgDiiHwl1YsE41w1zT4iRTm3DBqxvOUsbMKKDa/EHxagtnta072ejc3DOIh5ojvh8l3tk1JF/AV6FU6jh3U8HwEazLgdCLYSQ+MYiAI2ltomkzttUb0gGHdSUUgsIYjTzLG3mObX4FBRaYtpDVNZrih9TgTeYOBxsEnN1gOCTM8Bsw/ieMc75w9kuAT6A+/AiHGvN/+Gn4KRkiuzpNNDYhDGFndWRpE6SVfm8U5bxnSgVV2jrg6JCKmneqey8VMFgq2+AM/i4L4RUbfSi27lNXZ7R7W9RTcq/q9fk4Xw3AMQd4I5ifAZz8FcVtm9SAom/dyN4lczJQW/kC42ZrHgcCoIf1oVMKkVItmMBi9cOeNHGLqOZk+QqQmrbc5YmYgxELUUN35z2iohstgfLIFmcMV7s4CFmI74L9+EFmGsi+tGnAOD4Yk9gIpo01Y4cA43BWGygMdr4YZekG3OBIUXXNukvJS8tqa06e+lSDCtnqqMFu6hWHXCF+WaYt64m9QBmNxi7Ioy7D+fa1yHw+FMAcPt7SysFLtoG4PXAk7JOA3aAxBRqUiAdU9Yp5lK3HLSRFtOim0sa8euEt08xvKjYjzeJ2GU7YawexrnKI9tmobInjFXCewpwriY9+RR4aaezFhMhGCppKwom0ChrgFlKzyPKkGlTW1YQrE9HJqu8hKGgMc6hVi5QRq0PZxNfrYNgE64utmRv6KKHRpxf6VDUaOvNP5jCEx5q185My/7RKz69UQu2im5k4/eownpxZxNLwiZ1AZTO2ZjWjkU9uaB2HFn6Q3u0JcsSx/qV9hTEApRzeBLDJQXxYmTnq7bdLa3+uqFrxLJ5w1TehnNHx5ECvCh2g2c3hHH5YsfdaSKddztfjQ6imKFGSyFwlLzxEGPp6r5IevVjk1AMx3wMqi1NxDVjLBiPs9tbsCkIY5we5/ML22zrCScFxnNtzsr9Wcc3CnD+pYO+4VXXiDE0oc/vQQ/fDK3oPESJMYXNmJa/DuloJZkcTpcYE8lIH8Dz8DJMiynNC86Mb2lNaaqP/+L7f2fcE/yP7/Lde8xfgSOdMxvOixZf/9p3+M4hT1+F+zApxg9XfUvYjc8qX2lfOOpK2gNRtB4flpFu9FTKCp2XJRgXnX6olp1zyYjTKJSkGmLE2NjUr1bxFM4AeAAHBUFIeSLqXR+NvH/M9fOnfHzOD2vCSyQJKzfgsCh+yi/Mmc35F2fUrw7miW33W9hBD1vpuUojFphIyvg7aTeoymDkIkeW3XLHmguMzbIAJejN6B5MDrhipE2y6SoFRO/AK/AcHHZHNIfiWrEe/C6cr3f/yOvrQKB+zMM55/GQdLDsR+ifr5Fiuu+/y+M78LzOE5dsNuXC3PYvYWd8NXvphLSkJIasrlD2/HOqQ+RjcRdjKTGWYhhVUm4yxlyiGPuMsZR7sMCHUBeTuNWA7if+ifXgc/hovftHXs/DV+Fvwe+f8shzMiMcweFgBly3//vwJfg5AN4450fn1Hd1Rm1aBLu22Dy3y3H2+OqMemkbGZ4jozcDjJf6596xOLpC0eMTHbKnxLxH27uZ/bMTGs2jOaMOY4m87CfQwF0dw53oa1k80JRuz/XgS+8fX3N9Af4qPIMfzKgCp4H5TDGe9GGeFPzSsZz80SlPTxXjgwJmC45njzgt2vbQ4b4OAdUK4/vWhO8d8v6EE8fMUsfakXbPpFJeLs2ubM/qdm/la3WP91uWhxXHjoWhyRUq2iJ/+5mA73zwIIo+LoZ/SgvIRjAd1IMvvn98PfgOvAJfhhm8scAKVWDuaRaK8aQ9f7vuPDH6Bj47ZXau7rqYJ66mTDwEDU6lLbCjCK0qTXyl5mnDoeNRxanj3FJbaksTk0faXxHxLrssgPkWB9LnA/MFleXcJozzjwsUvUG0X/QCve51qkMDXp9mtcyOy3rwBfdvVJK7D6/ACSzg3RoruIq5UDeESfEmVclDxnniU82vxMLtceD0hGZWzBNPMM/jSPne2OVatiTKUpY5vY7gc0LdUAWeWM5tH+O2I66AOWw9xT2BuyRVLGdoDHUsVRXOo/c+ZdRXvFfnxWyIV4upFLCl9eAL7h8Zv0QH8Ry8pA2cHzQpGesctVA37ZtklBTgHjyvdSeKY/RZw/kJMk0Y25cSNRWSigQtlULPTw+kzuJPeYEkXjQRpoGZobYsLF79pyd1dMRHInbgFTZqNLhDqiIsTNpoex2WLcy0/X6rHcdMMQvFSd5dWA++4P7xv89deACnmr36uGlL69bRCL6BSZsS6c0TU2TKK5gtWCzgAOOwQcurqk9j8whvziZSMLcq5hbuwBEsYjopUBkqw1yYBGpLA97SRElEmx5MCInBY5vgLk94iKqSWmhIGmkJ4Bi9m4L645J68LyY4wsFYBfUg5feP/6gWWm58IEmKQM89hq7KsZNaKtP5TxxrUZZVkNmMJtjbKrGxLNEbHPJxhqy7lAmbC32ZqeF6lTaknRWcYaFpfLUBh/rwaQycCCJmW15Kstv6jRHyJFry2C1ahkkIW0LO75s61+owxK1y3XqweX9m5YLM2DPFeOjn/iiqCKJ+yKXF8t5Yl/kNsqaSCryxPq5xWTFIaP8KSW0RYxqupaUf0RcTNSSdJZGcKYdYA6kdtrtmyBckfKXwqk0pHpUHlwWaffjNRBYFPUDWa8e3Lt/o0R0CdisKDM89cX0pvRHEfM8ca4t0s2Xx4kgo91MPQJ/0c9MQYq0co8MBh7bz1fio0UUHLR4aAIOvOmoYO6kwlEVODSSTliWtOtH6sPkrtctF9ZtJ9GIerBskvhdVS5cFNv9s1BU0AbdUgdK4FG+dRnjFmDTzniRMdZO1QhzMK355vigbdkpz9P6qjUGE5J2qAcXmwJ20cZUiAD0z+pGMx6xkzJkmEf40Hr4qZfVg2XzF9YOyoV5BjzVkUJngKf8lgNYwKECEHrCNDrWZzMlflS3yBhr/InyoUgBc/lKT4pxVrrC6g1YwcceK3BmNxZcAtz3j5EIpqguh9H6wc011YN75cKDLpFDxuwkrPQmUwW4KTbj9mZTwBwLq4aQMUZbHm1rylJ46dzR0dua2n3RYCWZsiHROeywyJGR7mXKlpryyCiouY56sFkBWEnkEB/raeh/Sw4162KeuAxMQpEkzy5alMY5wamMsWKKrtW2WpEWNnReZWONKWjrdsKZarpFjqCslq773PLmEhM448Pc3+FKr1+94vv/rfw4tEcu+lKTBe4kZSdijBrykwv9vbCMPcLQTygBjzVckSLPRVGslqdunwJ4oegtFOYb4SwxNgWLCmD7T9kVjTv5YDgpo0XBmN34Z/rEHp0sgyz7lngsrm4lvMm2Mr1zNOJYJ5cuxuQxwMGJq/TP5emlb8fsQBZviK4t8hFL+zbhtlpwaRSxQRWfeETjuauPsdGxsBVdO7nmP4xvzSoT29pRl7kGqz+k26B3Oy0YNV+SXbbQas1ctC/GarskRdFpKczVAF1ZXnLcpaMuzVe6lZ2g/1ndcvOVgRG3sdUAY1bKD6achijMPdMxV4muKVorSpiDHituH7rSTs7n/4y5DhRXo4FVBN4vO/zbAcxhENzGbHCzU/98Mcx5e7a31kWjw9FCe/zNeYyQjZsWb1uc7U33pN4Mji6hCLhivqfa9Ss6xLg031AgfesA/l99m9fgvnaF9JoE6bYKmkGNK3aPbHB96w3+DnxFm4hs0drLsk7U8kf/N/CvwQNtllna0rjq61sH8L80HAuvwH1tvBy2ChqWSCaYTaGN19sTvlfzFD6n+iKTbvtayfrfe9ueWh6GJFoxLdr7V72a5ZpvHcCPDzma0wTO4EgbLyedxstO81n57LYBOBzyfsOhUKsW1J1BB5vr/tz8RyqOFylQP9Tvst2JALsC5lsH8PyQ40DV4ANzYa4dedNiKNR1s+x2wwbR7q4/4cTxqEk4LWDebfisuo36JXLiWFjOtLrlNWh3K1rRS4xvHcDNlFnNmWBBAl5SWaL3oPOfnvbr5pdjVnEaeBJSYjuLEkyLLsWhKccadmOphZkOPgVdalj2QpSmfOsADhMWE2ZBu4+EEJI4wKTAuCoC4xwQbWXBltpxbjkXJtKxxabo9e7tyhlgb6gNlSbUpMh+l/FaqzVwewGu8BW1Zx7pTpQDJUjb8tsUTW6+GDXbMn3mLbXlXJiGdggxFAoUrtPS3wE4Nk02UZG2OOzlk7fRs7i95QCLo3E0jtrjnM7SR3uS1p4qtS2nJ5OwtQVHgOvArLBFijZUV9QtSl8dAY5d0E0hM0w3HS2DpIeB6m/A1+HfhJcGUq4sOxH+x3f5+VO+Ds9rYNI7zPXOYWPrtf8bYMx6fuOAX5jzNR0PdsuON+X1f7EERxMJJoU6GkTEWBvVolVlb5lh3tKCg6Wx1IbaMDdJ+9sUCc5KC46hKGCk3IVOS4TCqdBNfUs7Kd4iXf2RjnT/LLysJy3XDcHLh/vde3x8DoGvwgsa67vBk91G5Pe/HbOe7xwym0NXbtiuuDkGO2IJDh9oQvJ4cY4vdoqLDuoH9Zl2F/ofsekn8lkuhIlhQcffUtSjytFyp++p6NiE7Rqx/lodgKVoceEp/CP4FfjrquZaTtj2AvH5K/ywpn7M34K/SsoYDAdIN448I1/0/wveW289T1/lX5xBzc8N5IaHr0XMOQdHsIkDuJFifj20pBm5jzwUv9e2FhwRsvhAbalCIuIw3bhJihY3p6nTFFIZgiSYjfTf3aXuOjmeGn4bPoGvwl+CFzTRczBIuHBEeImHc37/lGfwZR0cXzVDOvaKfNHvwe+suZ771K/y/XcBlsoN996JpBhoE2toYxOznNEOS5TJc6Id5GEXLjrWo+LEWGNpPDU4WAwsIRROu+1vM+0oW37z/MBN9kqHnSArwPfgFJ7Cq/Ai3Ie7g7ncmI09v8sjzw9mzOAEXoIHxURueaAce5V80f/DOuuZwHM8vsMb5wBzOFWM7wymTXPAEvm4vcFpZ2ut0VZRjkiP2MlmLd6DIpbGSiHOjdnUHN90hRYmhTnmvhzp1iKDNj+b7t5hi79lWGwQ+HN9RsfFMy0FXbEwhfuczKgCbyxYwBmcFhhvo/7a44v+i3XWcwDP86PzpGQYdWh7csP5dBvZ1jNzdxC8pBGuxqSW5vw40nBpj5JhMwvOzN0RWqERHMr4Lv1kWX84xLR830G3j6yqZ1a8UstTlW+qJPOZ+sZ7xZPKTJLhiNOAFd6tk+jrTH31ncLOxid8+nzRb128HhUcru/y0Wn6iT254YPC6FtVSIMoW2sk727AhvTtrWKZTvgsmckfXYZWeNRXx/3YQ2OUxLDrbHtN11IwrgXT6c8dATDwLniYwxzO4RzuQqTKSC5gAofMZ1QBK3zQ4JWobFbcvJm87FK+6JXrKahLn54m3p+McXzzYtP8VF/QpJuh1OwieElEoI1pRxPS09FBrkq2tWCU59+HdhNtTIqKm8EBrw2RTOEDpG3IKo2Y7mFdLm3ZeVjYwVw11o/oznceMve4CgMfNym/utA/d/ILMR7gpXzRy9eDsgLcgbs8O2Va1L0zzIdwGGemTBuwROHeoMShkUc7P+ISY3KH5ZZeWqO8mFTxQYeXTNuzvvK5FGPdQfuu00DwYFY9dyhctEt+OJDdnucfpmyhzUJzfsJjr29l8S0bXBfwRS9ZT26tmMIdZucch5ZboMz3Nio3nIOsYHCGoDT4kUA9MiXEp9Xsui1S8th/kbWIrMBxDGLodWUQIWcvnXy+9M23xPiSMOiRPqM+YMXkUN3gXFrZJwXGzUaMpJfyRS9ZT0lPe8TpScuRlbMHeUmlaKDoNuy62iWNTWNFYjoxFzuJs8oR+RhRx7O4SVNSXpa0ZJQ0K1LAHDQ+D9IepkMXpcsq5EVCvClBUIzDhDoyKwDw1Lc59GbTeORivugw1IcuaEOaGWdNm+Ps5fQ7/tm0DjMegq3yM3vb5j12qUId5UZD2oxDSEWOZMSqFl/W+5oynWDa/aI04tJRQ2eTXusg86SQVu/nwSYwpW6wLjlqIzwLuxGIvoAvul0PS+ZNz0/akp/pniO/8JDnGyaCkzbhl6YcqmK/69prxPqtpx2+Km9al9sjL+rwMgHw4jE/C8/HQ3m1vBuL1fldbzd8mOueVJ92syqdEY4KJjSCde3mcRw2TA6szxedn+zwhZMps0XrqEsiUjnC1hw0TELC2Ek7uAAdzcheXv1BYLagspxpzSAoZZUsIzIq35MnFQ9DOrlNB30jq3L4pkhccKUAA8/ocvN1Rzx9QyOtERs4CVsJRK/DF71kPYrxYsGsm6RMh4cps5g1DOmM54Ly1ii0Hd3Y/BMk8VWFgBVmhqrkJCPBHAolwZaWzLR9Vb7bcWdX9NyUYE+uB2BKfuaeBUcjDljbYVY4DdtsVWvzRZdWnyUzDpjNl1Du3aloAjVJTNDpcIOVVhrHFF66lLfJL1zJr9PQ2nFJSBaKoDe+sAvLufZVHVzYh7W0h/c6AAZ+7Tvj6q9j68G/cTCS/3n1vLKHZwNi+P+pS0WkZNMBMUl+LDLuiE4omZy71r3UFMwNJV+VJ/GC5ixVUkBStsT4gGKh0Gm4Oy3qvq7Lbmq24nPdDuDR9deR11XzP4vFu3TYzfnIyiSVmgizUYGqkIXNdKTY9pgb9D2Ix5t0+NHkVzCdU03suWkkVZAoCONCn0T35gAeW38de43mf97sMOpSvj4aa1KYUm58USI7Wxxes03bAZdRzk6UtbzMaCQ6IxO0dy7X+XsjoD16hpsBeGz9dfzHj+R/Hp8nCxZRqkEDTaCKCSywjiaoMJ1TITE9eg7Jqnq8HL6gDwiZb0u0V0Rr/rmvqjxKuaLCX7ZWXTvAY+uvm3z8CP7nzVpngqrJpZKwWnCUjIviYVlirlGOzPLI3SMVyp/elvBUjjDkNhrtufFFErQ8pmdSlbK16toBHlt/HV8uHMX/vEGALkV3RJREiSlopxwdMXOZPLZ+ix+kAHpMKIk8UtE1ygtquttwxNhphrIZ1IBzjGF3IIGxGcBj6q8bHJBG8T9vdsoWrTFEuebEZuVxhhClH6P5Zo89OG9fwHNjtNQTpD0TG9PJLEYqvEY6Rlxy+ZZGfL0Aj62/bnQCXp//eeM4KzfQVJbgMQbUjlMFIm6TpcfWlZje7NBSV6IsEVmumWIbjiloUzQX9OzYdo8L1wjw2PrrpimONfmfNyzKklrgnEkSzT5QWYQW40YShyzqsRmMXbvVxKtGuYyMKaU1ugenLDm5Ily4iT14fP11Mx+xJv+zZ3MvnfdFqxU3a1W/FTB4m3Qfsyc1XUcdVhDeUDZXSFHHLQj/Y5jtC7ZqM0CXGwB4bP11i3LhOvzPGygYtiUBiwQV/4wFO0majijGsafHyRLu0yG6q35cL1rOpVxr2s5cM2jJYMCdc10Aj6q/blRpWJ//+dmm5psMl0KA2+AFRx9jMe2WbC4jQxnikd4DU8TwUjRVacgdlhmr3bpddzuJ9zXqr2xnxJfzP29RexdtjDVZqzkqa6PyvcojGrfkXiJ8SEtml/nYskicv0ivlxbqjemwUjMw5evdg8fUX9nOiC/lf94Q2i7MURk9nW1MSj5j8eAyV6y5CN2S6qbnw3vdA1Iwq+XOSCl663udN3IzLnrt+us25cI1+Z83SXQUldqQq0b5XOT17bGpLd6ssN1VMPf8c+jG8L3NeCnMdF+Ra3fRa9dft39/LuZ/3vwHoHrqGmQFafmiQw6eyzMxS05K4bL9uA+SKUQzCnSDkqOGokXyJvbgJ/BHI+qvY69//4rl20NsmK2ou2dTsyIALv/91/8n3P2Aao71WFGi8KKv1fRC5+J67Q/507/E/SOshqN5TsmYIjVt+kcjAx98iz/4SaojbIV1rexE7/C29HcYD/DX4a0rBOF5VTu7omsb11L/AWcVlcVZHSsqGuXLLp9ha8I//w3Mv+T4Ew7nTBsmgapoCrNFObIcN4pf/Ob/mrvHTGqqgAupL8qWjWPS9m/31jAe4DjA+4+uCoQoT/zOzlrNd3qd4SdphFxsUvYwGWbTWtISc3wNOWH+kHBMfc6kpmpwPgHWwqaSUG2ZWWheYOGQGaHB+eQ/kn6b3pOgLV+ODSn94wDvr8Bvb70/LLuiPPEr8OGVWfDmr45PZyccEmsVXZGe1pRNX9SU5+AVQkNTIVPCHF/jGmyDC9j4R9LfWcQvfiETmgMMUCMN1uNCakkweZsowdYobiMSlnKA93u7NzTXlSfe+SVbfnPQXmg9LpYAQxpwEtONyEyaueWM4FPjjyjG3uOaFmBTWDNgBXGEiQpsaWhnAqIijB07Dlsy3fUGeP989xbWkyf+FF2SNEtT1E0f4DYYVlxFlbaSMPIRMk/3iMU5pME2SIWJvjckciebkQuIRRyhUvkHg/iUljG5kzVog5hV7vIlCuBrmlhvgPfNHQM8lCf+FEGsYbMIBC0qC9a0uuy2wLXVbLBaP5kjHokCRxapkQyzI4QEcwgYHRZBp+XEFTqXFuNVzMtjXLJgX4gAid24Hjwc4N3dtVSe+NNiwTrzH4WVUOlDobUqr1FuAgYllc8pmzoVrELRHSIW8ViPxNy4xwjBpyR55I6J220qQTZYR4guvUICJiSpr9gFFle4RcF/OMB7BRiX8sSfhpNSO3lvEZCQfLUVTKT78Ek1LRLhWN+yLyTnp8qWUZ46b6vxdRGXfHVqx3eI75YaLa4iNNiK4NOW7wPW6lhbSOF9/M9qw8e/aoB3d156qTzxp8pXx5BKAsYSTOIIiPkp68GmTq7sZtvyzBQaRLNxIZ+paozHWoLFeExIhRBrWitHCAHrCF7/thhD8JhYz84wg93QRV88wLuLY8zF8sQ36qF1J455bOlgnELfshKVxYOXKVuKx0jaj22sczTQqPqtV/XDgpswmGTWWMSDw3ssyUunLLrVPGjYRsH5ggHeHSWiV8kT33ycFSfMgkoOK8apCye0J6VW6GOYvffgU9RWsukEi2kUV2nl4dOYUzRik9p7bcA4ggdJ53LxKcEe17B1R8eqAd7dOepV8sTXf5lhejoL85hUdhDdknPtKHFhljOT+bdq0hxbm35p2nc8+Ja1Iw+tJykgp0EWuAAZYwMVwac5KzYMslhvgHdHRrxKnvhTYcfKsxTxtTETkjHO7rr3zjoV25lAQHrqpV7bTiy2aXMmUhTBnKS91jhtR3GEoF0oLnWhWNnYgtcc4N0FxlcgT7yz3TgNIKkscx9jtV1ZKpWW+Ub1tc1eOv5ucdgpx+FJy9pgbLE7xDyXb/f+hLHVGeitHOi6A7ybo3sF8sS7w7cgdk0nJaOn3hLj3uyD0Zp5pazFIUXUpuTTU18d1EPkDoX8SkmWTnVIozEdbTcZjoqxhNHf1JrSS/AcvHjZ/SMHhL/7i5z+POsTUh/8BvNfYMTA8n+yU/MlTZxSJDRStqvEuLQKWwDctMTQogUDyQRoTQG5Kc6oQRE1yV1jCA7ri7jdZyK0sYTRjCR0Hnnd+y7nHxNgTULqw+8wj0mQKxpYvhjm9uSUxg+TTy7s2GtLUGcywhXSKZN275GsqlclX90J6bRI1aouxmgL7Q0Nen5ziM80SqMIo8cSOo+8XplT/5DHNWsSUr/6lLN/QQ3rDyzLruEW5enpf7KqZoShEduuSFOV7DLX7Ye+GmXb6/hnNNqKsVXuMDFpb9Y9eH3C6NGEzuOuI3gpMH/I6e+zDiH1fXi15t3vA1czsLws0TGEtmPEJdiiFPwlwKbgLHAFk4P6ZyPdymYYHGE0dutsChQBl2JcBFlrEkY/N5bQeXQ18gjunuMfMfsBlxJSx3niO485fwO4fGD5T/+3fPQqkneWVdwnw/3bMPkW9Wbqg+iC765Zk+xcT98ibKZc2EdgHcLoF8cSOo/Oc8fS+OyEULF4g4sJqXVcmfMfsc7A8v1/yfGXmL9I6Fn5pRwZhsPv0TxFNlAfZCvG+Oohi82UC5f/2IsJo0cTOm9YrDoKhFPEUr/LBYTUNht9zelHXDqwfPCIw4owp3mOcIQcLttWXFe3VZ/j5H3cIc0G6oPbCR+6Y2xF2EC5cGUm6wKC5tGEzhsWqw5hNidUiKX5gFWE1GXh4/Qplw4sVzOmx9QxU78g3EF6wnZlEN4FzJ1QPSLEZz1KfXC7vd8ssGdIbNUYpVx4UapyFUHzJoTOo1McSkeNn1M5MDQfs4qQuhhX5vQZFw8suwWTcyYTgioISk2YdmkhehG4PkE7w51inyAGGaU+uCXADabGzJR1fn3lwkty0asIo8cROm9Vy1g0yDxxtPvHDAmpu+PKnM8Ix1wwsGw91YJqhteaWgjYBmmQiebmSpwKKzE19hx7jkzSWOm66oPbzZ8Yj6kxVSpYjVAuvLzYMCRo3oTQecOOjjgi3NQ4l9K5/hOGhNTdcWVOTrlgYNkEXINbpCkBRyqhp+LdRB3g0OU6rMfW2HPCFFMV9nSp+uB2woepdbLBuJQyaw/ZFysXrlXwHxI0b0LovEkiOpXGA1Ijagf+KUNC6rKNa9bQnLFqYNkEnMc1uJrg2u64ELPBHpkgWbmwKpJoDhMwNbbGzAp7Yg31wS2T5rGtzit59PrKhesWG550CZpHEzpv2NGRaxlNjbMqpmEIzygJqQfjypycs2pg2cS2RY9r8HUqkqdEgKTWtWTKoRvOBPDYBltja2SO0RGjy9UHtxwRjA11ujbKF+ti5cIR9eCnxUg6owidtyoU5tK4NLji5Q3HCtiyF2IqLGYsHViOXTXOYxucDqG0HyttqYAKqYo3KTY1ekyDXRAm2AWh9JmsVh/ccg9WJ2E8YjG201sPq5ULxxX8n3XLXuMInbft2mk80rRGjCGctJ8/GFdmEQ9Ug4FlE1ll1Y7jtiraqm5Fe04VV8lvSVBL8hiPrfFVd8+7QH3Qbu2ipTVi8cvSGivc9cj8yvH11YMHdNSERtuOslM97feYFOPKzGcsI4zW0YGAbTAOaxCnxdfiYUmVWslxiIblCeAYr9VYR1gM7GmoPrilunSxxeT3DN/2eBQ9H11+nk1adn6VK71+5+Jfct4/el10/7KBZfNryUunWSCPxPECk1rdOv1WVSrQmpC+Tl46YD3ikQYcpunSQgzVB2VHFhxHVGKDgMEY5GLlQnP7FMDzw7IacAWnO6sBr12u+XanW2AO0wQ8pknnFhsL7KYIqhkEPmEXFkwaN5KQphbkUmG72wgw7WSm9RiL9QT925hkjiVIIhphFS9HKI6/8QAjlpXqg9W2C0apyaVDwKQwrwLY3j6ADR13ZyUNByQXHQu6RY09Hu6zMqXRaNZGS/KEJs0cJEe9VH1QdvBSJv9h09eiRmy0V2uJcqHcShcdvbSNg5fxkenkVprXM9rDVnX24/y9MVtncvbKY706anNl3ASll9a43UiacVquXGhvq4s2FP62NGKfQLIQYu9q1WmdMfmUrDGt8eDS0cXozH/fjmUH6Jruvm50hBDSaEU/2Ru2LEN/dl006TSc/g7tfJERxGMsgDUEr104pfWH9lQaN+M4KWQjwZbVc2rZVNHsyHal23wZtIs2JJqtIc/WLXXRFCpJkfE9jvWlfFbsNQ9pP5ZBS0zKh4R0aMFj1IjTcTnvi0Zz2rt7NdvQb2mgbju1plsH8MmbnEk7KbK0b+wC2iy3aX3szW8xeZvDwET6hWZYwqTXSSG+wMETKum0Dq/q+x62gt2ua2ppAo309TRk9TPazfV3qL9H8z7uhGqGqxNVg/FKx0HBl9OVUORn8Q8Jx9gFttGQUDr3tzcXX9xGgN0EpzN9mdZ3GATtPhL+CjxFDmkeEU6x56kqZRusLzALXVqkCN7zMEcqwjmywDQ6OhyUe0Xao1Qpyncrg6wKp9XfWDsaZplElvQ/b3sdweeghorwBDlHzgk1JmMc/wiERICVy2VJFdMjFuLQSp3S0W3+sngt2njwNgLssFGVQdJ0tu0KH4ky1LW4yrbkuaA6Iy9oz/qEMMXMMDWyIHhsAyFZc2peV9hc7kiKvfULxCl9iddfRK1f8kk9qvbdOoBtOg7ZkOZ5MsGrSHsokgLXUp9y88smniwWyuFSIRVmjplga3yD8Uij5QS1ZiM4U3Qw5QlSm2bXjFe6jzzBFtpg+/YBbLAWG7OPynNjlCw65fukGNdkJRf7yM1fOxVzbxOJVocFoYIaGwH22mIQkrvu1E2nGuebxIgW9U9TSiukPGU+Lt++c3DJPKhyhEEbXCQLUpae2exiKy6tMPe9mDRBFCEMTWrtwxN8qvuGnt6MoihKWS5NSyBhbH8StXoAz8PLOrRgLtOT/+4vcu+7vDLnqNvztOq7fmd8sMmY9Xzn1zj8Dq8+XVdu2Nv0IIySgEdQo3xVHps3Q5i3fLFsV4aiqzAiBhbgMDEd1uh8qZZ+lwhjkgokkOIv4xNJmyncdfUUzgB4oFMBtiu71Xumpz/P+cfUP+SlwFExwWW62r7b+LSPxqxn/gvMZ5z9C16t15UbNlq+jbGJtco7p8wbYlL4alSyfWdeuu0j7JA3JFNuVAwtst7F7FhWBbPFNKIUORndWtLraFLmMu7KFVDDOzqkeaiN33YAW/r76wR4XDN/yN1z7hejPau06EddkS/6XThfcz1fI/4K736fO48vlxt2PXJYFaeUkFS8U15XE3428xdtn2kc8GQlf1vkIaNRRnOMvLTWrZbElEHeLWi1o0dlKPAh1MVgbbVquPJ5+Cr8LU5/H/+I2QlHIU2ClXM9G8v7Rr7oc/hozfUUgsPnb3D+I+7WF8kNO92GY0SNvuxiE+2Bt8prVJTkzE64sfOstxuwfxUUoyk8VjcTlsqe2qITSFoSj6Epd4KsT6BZOWmtgE3hBfir8IzZDwgV4ZTZvD8VvPHERo8v+vL1DASHTz/i9OlKueHDjK5Rnx/JB1Vb1ioXdBra16dmt7dgik10yA/FwJSVY6XjA3oy4SqM2frqDPPSRMex9qs3XQtoWxMj7/Er8GWYsXgjaVz4OYumP2+9kbxvny/6kvWsEBw+fcb5bInc8APdhpOSs01tEqIkoiZjbAqKMruLbJYddHuHFRIyJcbdEdbl2sVLaySygunutBg96Y2/JjKRCdyHV+AEFtTvIpbKIXOamknYSiB6KV/0JetZITgcjjk5ZdaskBtWO86UF0ap6ozGXJk2WNiRUlCPFir66lzdm/SLSuK7EUdPz8f1z29Skq6F1fXg8+5UVR6bszncP4Tn4KUkkdJ8UFCY1zR1i8RmL/qQL3rlei4THG7OODlnKko4oI01kd3CaM08Ia18kC3GNoVaO9iDh+hWxSyTXFABXoau7Q6q9OxYg/OVEMw6jdbtSrJ9cBcewGmaZmg+bvkUnUUaGr+ZfnMH45Ivevl61hMcXsxYLFTu1hTm2zViCp7u0o5l+2PSUh9bDj6FgYypufBDhqK2+oXkiuHFHR3zfj+9PtA8oR0xnqX8qn+sx3bFODSbbF0X8EUvWQ8jBIcjo5bRmLOljDNtcqNtOe756h3l0VhKa9hDd2l1eqmsnh0MNMT/Cqnx6BInumhLT8luljzQ53RiJeA/0dxe5NK0o2fA1+GLXr6eNQWHNUOJssQaTRlGpLHKL9fD+IrQzTOMZS9fNQD4AnRNVxvTdjC+fJdcDDWQcyB00B0t9BDwTxXgaAfzDZ/DBXzRnfWMFRwuNqocOmX6OKNkY63h5n/fFcB28McVHqnXZVI27K0i4rDLNE9lDKV/rT+udVbD8dFFu2GGZ8mOt0kAXcoX3ZkIWVtw+MNf5NjR2FbivROHmhV1/pj2egv/fMGIOWTIWrV3Av8N9imV9IWml36H6cUjqEWNv9aNc+veb2sH46PRaHSuMBxvtW+twxctq0z+QsHhux8Q7rCY4Ct8lqsx7c6Sy0dl5T89rIeEuZKoVctIk1hNpfavER6yyH1Vvm3MbsUHy4ab4hWr/OZPcsRBphnaV65/ZcdYPNNwsjN/djlf9NqCw9U5ExCPcdhKxUgLSmfROpLp4WSUr8ojdwbncbvCf+a/YzRaEc6QOvXcGO256TXc5Lab9POvB+AWY7PigWYjzhifbovuunzRawsO24ZqQQAqguBtmpmPB7ysXJfyDDaV/aPGillgz1MdQg4u5MYaEtBNNHFjkRlSpd65lp4hd2AVPTfbV7FGpyIOfmNc/XVsPfg7vzaS/3nkvLL593ANLvMuRMGpQIhiF7kUEW9QDpAUbTWYBcbp4WpacHHY1aacqQyjGZS9HI3yCBT9kUZJhVOD+zUDvEH9ddR11fzPcTDQ5TlgB0KwqdXSavk9BC0pKp0WmcuowSw07VXmXC5guzSa4p0UvRw2lbDiYUx0ExJJRzWzi6Gm8cnEkfXXsdcG/M/jAJa0+bmCgdmQ9CYlNlSYZOKixmRsgiFxkrmW4l3KdFKv1DM8tk6WxPYJZhUUzcd8Kdtgrw/gkfXXDT7+avmfVak32qhtkg6NVdUS5wgkru1YzIkSduTW1FDwVWV3JQVJVuieTc0y4iDpFwc7/BvSalvKdQM8sv662cevz/+8sQVnjVAT0W2wLllw1JiMhJRxgDjCjLQsOzSFSgZqx7lAW1JW0e03yAD3asC+GD3NbQhbe+mN5GXH1F83KDOM4n/e5JIuH4NpdQARrFPBVptUNcjj4cVMcFSRTE2NpR1LEYbYMmfWpXgP9KejaPsLUhuvLCsVXznAG9dfx9SR1ud/3hZdCLHb1GMdPqRJgqDmm76mHbvOXDtiO2QPUcKo/TWkQ0i2JFXpBoo7vij1i1Lp3ADAo+qvG3V0rM//vFnnTE4hxd5Ka/Cor5YEdsLVJyKtDgVoHgtW11pWSjolPNMnrlrVj9Fv2Qn60twMwKPqr+N/wvr8z5tZcDsDrv06tkqyzESM85Ycv6XBWA2birlNCXrI6VbD2lx2L0vQO0QVTVVLH4SE67fgsfVXv8n7sz7/85Z7cMtbE6f088wSaR4kCkCm10s6pKbJhfqiUNGLq+0gLWC6eUAZFPnLjwqtKd8EwGvWX59t7iPW4X/eAN1svgRVSY990YZg06BD1ohLMtyFTI4pKTJsS9xREq9EOaPWiO2gpms7397x6nQJkbh+Fz2q/rqRROX6/M8bJrqlVW4l6JEptKeUFuMYUbtCQ7CIttpGc6MY93x1r1vgAnRXvY5cvwWPqb9uWQm+lP95QxdNMeWhOq1x0Db55C7GcUv2ZUuN6n8iKzsvOxibC//Yfs9Na8r2Rlz02vXXDT57FP/zJi66/EJSmsJKa8QxnoqW3VLQ+jZVUtJwJ8PNX1NQCwfNgdhhHD9on7PdRdrdGPF28rJr1F+3LBdeyv+8yYfLoMYet1vX4upNAjVvwOUWnlNXJXlkzk5Il6kqeoiL0C07qno+/CYBXq/+utlnsz7/Mzvy0tmI4zm4ag23PRN3t/CWryoUVJGm+5+K8RJ0V8Hc88/XHUX/HfiAq7t+BH+x6v8t438enWmdJwFA6ZINriLGKv/95f8lT9/FnyA1NMVEvQyaXuu+gz36f/DD73E4pwqpLcvm/o0Vle78n//+L/NPvoefp1pTJye6e4A/D082FERa5/opeH9zpvh13cNm19/4v/LDe5xMWTi8I0Ta0qKlK27AS/v3/r+/x/2GO9K2c7kVMonDpq7//jc5PKCxeNPpFVzaRr01wF8C4Pu76hXuX18H4LduTr79guuFD3n5BHfI+ZRFhY8w29TYhbbLi/bvBdqKE4fUgg1pBKnV3FEaCWOWyA+m3WpORZr/j+9TKJtW8yBTF2/ZEODI9/QavHkVdGFp/Pjn4Q+u5hXapsP5sOH+OXXA1LiKuqJxiMNbhTkbdJTCy4llEt6NnqRT4dhg1V3nbdrm6dYMecA1yTOL4PWTE9L5VzPFlLBCvlG58AhehnN4uHsAYinyJ+AZ/NkVvELbfOBUuOO5syBIEtiqHU1k9XeISX5bsimrkUUhnGDxourN8SgUsCZVtKyGbyGzHXdjOhsAvOAswSRyIBddRdEZWP6GZhNK/yjwew9ehBo+3jEADu7Ay2n8mDc+TS7awUHg0OMzR0LABhqLD4hJEh/BEGyBdGlSJoXYXtr+3HS4ijzVpgi0paWXtdruGTknXBz+11qT1Q2inxaTzQCO46P3lfLpyS4fou2PH/PupwZgCxNhGlj4IvUuWEsTkqMWm6i4xCSMc9N1RDQoCVcuGItJ/MRWefais+3synowi/dESgJjkilnWnBTGvRWmaw8oR15257t7CHmCf8HOn7cwI8+NQBXMBEmAa8PMRemrNCEhLGEhDQKcGZWS319BX9PFBEwGTbRBhLbDcaV3drFcDqk5kCTd2JF1Wp0HraqBx8U0wwBTnbpCadwBA/gTH/CDrcCs93LV8E0YlmmcyQRQnjBa8JESmGUfIjK/7fkaDJpmD2QptFNVJU1bbtIAjjWQizepOKptRjbzR9Kag6xZmMLLjHOtcLT3Tx9o/0EcTT1XN3E45u24AiwEypDJXihKjQxjLprEwcmRKclaDNZCVqr/V8mYWyFADbusiY5hvgFoU2vio49RgJLn5OsReRFN6tabeetiiy0V7KFHT3HyZLx491u95sn4K1QQSPKM9hNT0wMVvAWbzDSVdrKw4zRjZMyJIHkfq1VAVCDl/bUhNKlGq0zGr05+YAceXVPCttVk0oqjVwMPt+BBefx4yPtGVkUsqY3CHDPiCM5ngupUwCdbkpd8kbPrCWHhkmtIKLEetF2499eS1jZlIPGYnlcPXeM2KD9vLS0bW3ktYNqUllpKLn5ZrsxlIzxvDu5eHxzGLctkZLEY4PgSOg2IUVVcUONzUDBEpRaMoXNmUc0tFZrTZquiLyKxrSm3DvIW9Fil+AkhXu5PhEPx9mUNwqypDvZWdKlhIJQY7vn2OsnmBeOWnYZ0m1iwbbw1U60by5om47iHRV6fOgzjMf/DAZrlP40Z7syxpLK0lJ0gqaAK1c2KQKu7tabTXkLFz0sCftuwX++MyNeNn68k5Buq23YQhUh0SNTJa1ioQ0p4nUG2y0XilF1JqODqdImloPS4Bp111DEWT0jJjVv95uX9BBV7eB3bUWcu0acSVM23YZdd8R8UbQUxJ9wdu3oMuhdt929ME+mh6JXJ8di2RxbTi6TbrDquqV4aUKR2iwT6aZbyOwEXN3DUsWr8Hn4EhwNyHuXHh7/pdaUjtR7vnDh/d8c9xD/s5f501eQ1+CuDiCvGhk1AN/4Tf74RfxPwD3toLarR0zNtsnPzmS64KIRk861dMWCU8ArasG9T9H0ZBpsDGnjtAOM2+/LuIb2iIUGXNgl5ZmKD/Tw8TlaAuihaFP5yrw18v4x1898zIdP+DDAX1bM3GAMvPgRP/cJn3zCW013nrhHkrITyvYuwOUkcHuKlRSW5C6rzIdY4ppnF7J8aAJbQepgbJYBjCY9usGXDKQxq7RZfh9eg5d1UHMVATRaD/4BHK93/1iAgYZ/+jqPn8Dn4UExmWrpa3+ZOK6MvM3bjwfzxNWA2dhs8+51XHSPJiaAhGSpWevEs5xHLXcEGFXYiCONySH3fPWq93JIsBiSWvWyc3CAN+EcXoT7rCSANloPPoa31rt/5PUA/gp8Q/jDD3hyrjzlR8VkanfOvB1XPubt17vzxAfdSVbD1pzAnfgyF3ycadOTOTXhpEUoLC1HZyNGW3dtmjeXgr2r56JNmRwdNNWaQVBddd6rh4MhviEB9EFRD/7RGvePvCbwAL4Mx/D6M541hHO4D3e7g6PafdcZVw689z7NGTwo5om7A8sPhccT6qKcl9NJl9aM/9kX+e59Hh1yPqGuCCZxuITcsmNaJ5F7d0q6J3H48TO1/+M57085q2icdu2U+W36Ldllz9Agiv4YGljoEN908EzvDOrBF98/vtJwCC/BF2AG75xxEmjmMIcjxbjoaxqOK3/4hPOZzhMPBpYPG44CM0dTVm1LjLtUWWVz1Bcf8tEx0zs8O2A2YVHRxKYOiy/aOVoAaMu0i7ubu43njjmd4ibMHU1sIDHaQNKrZND/FZYdk54oCXetjq7E7IVl9eAL7t+oHnwXXtLx44czzoRFHBztYVwtH1d+NOMkupZ5MTM+gUmq90X+Bh9zjRlmaQ+m7YMqUL/veemcecAtOJ0yq1JnVlN27di2E0+Klp1tAJ4KRw1eMI7aJjsO3R8kPSI3fUFXnIOfdQe86sIIVtWDL7h//Ok6vj8vwDk08NEcI8zz7OhBy+WwalzZeZ4+0XniRfst9pAJqQHDGLzVQ2pheZnnv1OWhwO43/AgcvAEXEVVpa4db9sGvNK8wjaENHkfFQ4Ci5i7dqnQlPoLQrHXZDvO3BIXZbJOBrOaEbML6sFL798I4FhKihjHMsPjBUZYCMFr6nvaArxqXPn4lCa+cHfSa2cP27g3Z3ziYTRrcbQNGLQmGF3F3cBdzzzX7AILx0IB9rbwn9kx2G1FW3Inic+ZLIsVvKR8Zwfj0l1fkqo8LWY1M3IX14OX3r9RKTIO+d9XzAI8qRPGPn/4NC2n6o4rN8XJ82TOIvuVA8zLKUHRFgBCetlDZlqR1gLKjS39xoE7Bt8UvA6BxuEDjU3tFsEijgA+615tmZkXKqiEENrh41iLDDZNq4pKTWR3LZfnos81LOuNa15cD956vLMsJd1rqYp51gDUQqMYm2XsxnUhD2jg1DM7SeuJxxgrmpfISSXVIJIS5qJJSvJPEQ49DQTVIbYWJ9QWa/E2+c/oPK1drmC7WSfJRNKBO5Yjvcp7Gc3dmmI/Xh1kDTEuiSnWqQf37h+fTMhGnDf6dsS8SQfQWlqqwXXGlc/PEZ/SC5mtzIV0nAshlQdM/LvUtYutrEZ/Y+EAFtq1k28zQhOwLr1AIeANzhF8t9qzTdZf2qRKO6MWE9ohBYwibbOmrFtNmg3mcS+tB28xv2uKd/agYCvOP+GkSc+0lr7RXzyufL7QbkUpjLjEWFLqOIkAGu2B0tNlO9Eau2W1qcOUvVRgKzypKIQZ5KI3q0MLzqTNRYqiZOqmtqloIRlmkBHVpHmRYV6/HixbO6UC47KOFJnoMrVyr7wYz+SlW6GUaghYbY1I6kkxA2W1fSJokUdSh2LQ1GAimRGm0MT+uu57H5l7QgOWxERpO9moLRPgTtquWCfFlGlIjQaRly9odmzMOWY+IBO5tB4sW/0+VWGUh32qYk79EidWKrjWuiLpiVNGFWFRJVktyeXWmbgBBzVl8anPuXyNJlBJOlKLTgAbi/EYHVHxWiDaVR06GnHQNpJcWcK2jJtiCfG2sEHLzuI66sGrMK47nPIInPnu799935aOK2cvmvubrE38ZzZjrELCmXM2hM7UcpXD2oC3+ECVp7xtIuxptJ0jUr3sBmBS47TVxlvJ1Sqb/E0uLdvLj0lLr29ypdd/eMX3f6lrxGlKwKQxEGvw0qHbkbwrF3uHKwVENbIV2wZ13kNEF6zD+x24aLNMfDTCbDPnEikZFyTNttxWBXDaBuM8KtI2rmaMdUY7cXcUPstqTGvBGSrFWIpNMfbdea990bvAOC1YX0qbc6smDS1mPxSJoW4fwEXvjMmhlijDRq6qale6aJEuFGoppYDoBELQzLBuh/mZNx7jkinv0EtnUp50lO9hbNK57lZaMAWuWR5Yo9/kYwcYI0t4gWM47Umnl3YmpeBPqSyNp3K7s2DSAS/39KRuEN2bS4xvowV3dFRMx/VFcp2Yp8w2nTO9hCXtHG1kF1L4KlrJr2wKfyq77R7MKpFKzWlY9UkhYxyHWW6nBWPaudvEAl3CGcNpSXPZ6R9BbBtIl6cHL3gIBi+42CYXqCx1gfGWe7Ap0h3luyXdt1MKy4YUT9xSF01G16YEdWsouW9mgDHd3veyA97H+Ya47ZmEbqMY72oPztCGvK0onL44AvgC49saZKkWRz4veWljE1FHjbRJaWv6ZKKtl875h4CziFCZhG5rx7tefsl0aRT1bMHZjm8dwL/6u7wCRysaQblQoG5yAQN5zpatMNY/+yf8z+GLcH/Qn0iX2W2oEfXP4GvwQHuIL9AYGnaO3zqAX6946nkgqZNnUhx43DIdQtMFeOPrgy/y3Yd85HlJWwjLFkU3kFwq28xPnuPhMWeS+tDLV9Otllq7pQCf3uXJDN9wFDiUTgefHaiYbdfi3b3u8+iY6TnzhgehI1LTe8lcd7s1wJSzKbahCRxKKztTLXstGAiu3a6rPuQs5pk9TWAan5f0BZmGf7Ylxzzk/A7PAs4QPPPAHeFQ2hbFHszlgZuKZsJcUmbDC40sEU403cEjczstOEypa+YxevL4QBC8oRYqWdK6b7sK25tfE+oDZgtOQ2Jg8T41HGcBE6fTWHn4JtHcu9S7uYgU5KSCkl/mcnq+5/YBXOEr6lCUCwOTOM1taOI8mSxx1NsCXBEmLKbMAg5MkwbLmpBaFOPrNSlO2HnLiEqW3tHEwd8AeiQLmn+2gxjC3k6AxREqvKcJbTEzlpLiw4rNZK6oJdidbMMGX9FULKr0AkW+2qDEPBNNm5QAt2Ik2nftNWHetubosHLo2nG4vQA7GkcVCgVCgaDixHqo9UUn1A6OshapaNR/LPRYFV8siT1cCtJE0k/3WtaNSuUZYKPnsVIW0xXWnMUxq5+En4Kvw/MqQmVXnAXj9Z+9zM98zM/Agy7F/qqj2Nh67b8HjFnPP3iBn/tkpdzwEJX/whIcQUXOaikeliCRGUk7tiwF0rItwMEhjkZ309hikFoRAmLTpEXWuHS6y+am/KB/fM50aLEhGnSMwkpxzOov4H0AvgovwJ1iGzDLtJn/9BU+fAINfwUe6FHSLhu83viV/+/HrOePX+STT2B9uWGbrMHHLldRBlhS/CJQmcRxJFqZica01XixAZsYiH1uolZxLrR/SgxVIJjkpQP4PE9sE59LKLr7kltSBogS5tyszzH8Fvw8/AS8rNOg0xUS9fIaHwb+6et8Q/gyvKRjf5OusOzGx8evA/BP4IP11uN/grca5O0lcsPLJ5YjwI4QkJBOHa0WdMZYGxPbh2W2nR9v3WxEWqgp/G3+6VZbRLSAAZ3BhdhAaUL33VUSw9yjEsvbaQ9u4A/gGXwZXoEHOuU1GSj2chf+Mo+f8IcfcAxfIKVmyunRbYQVnoevwgfw3TXXcw++xNuP4fhyueEUNttEduRVaDttddoP0eSxLe2LENk6itYxlrxBNBYrNNKSQmeaLcm9c8UsaB5WyO6675yyQIAWSDpBVoA/gxmcwEvwoDv0m58UE7gHn+fJOa8/Ywan8EKRfjsopF83eCglX/Sfr7OeaRoQfvt1CGvIDccH5BCvw1sWIzRGC/66t0VTcLZQZtm6PlAasbOJ9iwWtUo7biktTSIPxnR24jxP1ZKaqq+2RcXM9OrBAm/AAs7hDJ5bNmGb+KIfwCs8a3jnjBrOFeMjHSCdbKr+2uOLfnOd9eiA8Hvvwwq54VbP2OqwkB48Ytc4YEOiH2vTXqodabfWEOzso4qxdbqD5L6tbtNPECqbhnA708DZH4QOJUXqScmUlks7Ot6FBuZw3n2mEbaUX7kDzxHOOQk8nKWMzAzu6ZZ8sOFw4RK+6PcuXo9tB4SbMz58ApfKDXf3szjNIIbGpD5TKTRxGkEMLjLl+K3wlWXBsCUxIDU+jbOiysESqAy1MGUJpXgwbTWzNOVEziIXZrJ+VIztl1PUBxTSo0dwn2bOmfDRPD3TRTGlfbCJvO9KvuhL1hMHhB9wPuPRLGHcdOWG2xc0U+5bQtAJT0nRTewXL1pgk2+rZAdeWmz3jxAqfNQQdzTlbF8uJ5ecEIWvTkevAHpwz7w78QujlD/Lr491bD8/1vhM2yrUQRrWXNQY4fGilfctMWYjL72UL/qS9eiA8EmN88nbNdour+PBbbAjOjIa4iBhfFg6rxeKdEGcL6p3EWR1Qq2Qkhs2DrnkRnmN9tG2EAqmgPw6hoL7Oza7B+3SCrR9tRftko+Lsf2F/mkTndN2LmzuMcKTuj/mX2+4Va3ki16+nnJY+S7MefpkidxwnV+4wkXH8TKnX0tsYzYp29DOOoSW1nf7nTh2akYiWmcJOuTidSaqESrTYpwjJJNVGQr+rLI7WsqerHW6Kp/oM2pKuV7T1QY9gjqlZp41/WfKpl56FV/0kvXQFRyeQ83xaTu5E8p5dNP3dUF34ihyI3GSpeCsywSh22ZJdWto9winhqifb7VRvgktxp13vyjrS0EjvrRfZ62uyqddSWaWYlwTPAtJZ2oZ3j/Sgi/mi+6vpzesfAcWNA0n8xVyw90GVFGuZjTXEQy+6GfLGLMLL523f5E0OmxVjDoOuRiH91RKU+vtoCtH7TgmvBLvtFXWLW15H9GTdVw8ow4IlRLeHECN9ym1e9K0I+Cbnhgv4Yu+aD2HaQJ80XDqOzSGAV4+4yCqBxrsJAX6ZTIoX36QnvzhhzzMfFW2dZVLOJfo0zbce5OvwXMFaZ81mOnlTVXpDZsQNuoYWveketKb5+6JOOsgX+NTm7H49fUTlx+WLuWL7qxnOFh4BxpmJx0p2gDzA/BUARuS6phR+pUsY7MMboAHx5xNsSVfVZcYSwqCKrqon7zM+8ecCkeS4nm3rINuaWvVNnMRI1IRpxTqx8PZUZ0Br/UEduo3B3hNvmgZfs9gQPj8vIOxd2kndir3awvJ6BLvoUuOfFWNYB0LR1OQJoUySKb9IlOBx74q1+ADC2G6rOdmFdJcD8BkfualA+BdjOOzP9uUhGUEX/TwhZsUduwRr8wNuXKurCixLBgpQI0mDbJr9dIqUuV+92ngkJZ7xduCk2yZKbfWrH1VBiTg9VdzsgRjW3CVXCvAwDd+c1z9dWw9+B+8MJL/eY15ZQ/HqvTwVdsZn5WQsgRRnMaWaecu3jFvMBEmgg+FJFZsnSl0zjB9OqPYaBD7qmoVyImFvzi41usesV0julaAR9dfR15Xzv9sEruRDyk1nb+QaLU67T885GTls6YgcY+UiMa25M/pwGrbCfzkvR3e0jjtuaFtnwuagHTSb5y7boBH119HXhvwP487jJLsLJ4XnUkHX5sLbS61dpiAXRoZSCrFJ+EjpeU3puVfitngYNo6PJrAigKktmwjyQdZpfq30mmtulaAx9Zfx15Xzv+cyeuiBFUs9zq8Kq+XB9a4PVvph3GV4E3y8HENJrN55H1X2p8VyqSKwVusJDKzXOZzplWdzBUFK9e+B4+uv468xvI/b5xtSAkBHQaPvtqWzllVvEOxPbuiE6+j2pvjcKsbvI7txnRErgfH7LdXqjq0IokKzga14GzQ23SSbCQvO6r+Or7SMIr/efOkkqSdMnj9mBx2DRsiY29Uj6+qK9ZrssCKaptR6HKURdwUYeUWA2kPzVKQO8ku2nU3Anhs/XWkBx3F/7wJtCTTTIKftthue1ty9xvNYLY/zo5KSbIuKbXpbEdSyeRyYdAIwKY2neyoc3+k1XUaufYga3T9daMUx/r8z1s10ITknIO0kuoMt+TB8jK0lpayqqjsJ2qtXAYwBU932zinimgmd6mTRDnQfr88q36NAI+tv24E8Pr8zxtasBqx0+xHH9HhlrwsxxNUfKOHQaZBITNf0uccj8GXiVmXAuPEAKSdN/4GLHhs/XWj92dN/uetNuBMnVR+XWDc25JLjo5Mg5IZIq226tmCsip2zZliL213YrTlL2hcFjpCduyim3M7/eB16q/blQsv5X/esDRbtJeabLIosWy3ycavwLhtxdWzbMmHiBTiVjJo6lCLjXZsi7p9PEPnsq6X6wd4bP11i0rD5fzPm/0A6brrIsllenZs0lCJlU4abakR59enZKrKe3BZihbTxlyZ2zl1+g0wvgmA166/bhwDrcn/7Ddz0eWZuJvfSESug6NzZsox3Z04FIxz0mUjMwVOOVTq1CQ0AhdbBGVdjG/CgsfUX7esJl3K/7ytWHRv683praW/8iDOCqWLLhpljDY1ZpzK75QiaZoOTpLKl60auHS/97oBXrv+umU9+FL+5+NtLFgjqVLCdbmj7pY5zPCPLOHNCwXGOcLquOhi8CmCWvbcuO73XmMUPab+ug3A6/A/78Bwe0bcS2+tgHn4J5pyS2WbOck0F51Vq3LcjhLvZ67p1ABbaL2H67bg78BfjKi/jr3+T/ABV3ilLmNXTI2SpvxWBtt6/Z//D0z/FXaGbSBgylzlsEGp+5//xrd4/ae4d8DUUjlslfIYS3t06HZpvfQtvv0N7AHWqtjP2pW08QD/FLy//da38vo8PNlKHf5y37Dxdfe/oj4kVIgFq3koLReSR76W/bx//n9k8jonZxzWTANVwEniDsg87sOSd/z7//PvMp3jQiptGVWFX2caezzAXwfgtzYUvbr0iozs32c3Uge7varH+CNE6cvEYmzbPZ9hMaYDdjK4V2iecf6EcEbdUDVUARda2KzO/JtCuDbNQB/iTeL0EG1JSO1jbXS+nLxtPMDPw1fh5+EPrgSEKE/8Gry5A73ui87AmxwdatyMEBCPNOCSKUeRZ2P6Myb5MRvgCHmA9ywsMifU+AYXcB6Xa5GibUC5TSyerxyh0j6QgLVpdyhfArRTTLqQjwe4HOD9s92D4Ap54odXAPBWLAwB02igG5Kkc+piN4lvODIFGAZgT+EO4Si1s7fjSR7vcQETUkRm9O+MXyo9OYhfe4xt9STQ2pcZRLayCV90b4D3jR0DYAfyxJ+eywg2IL7NTMXna7S/RpQ63JhWEM8U41ZyQGjwsVS0QBrEKLu8xwZsbi4wLcCT+OGidPIOCe1PiSc9Qt+go+vYqB7cG+B9d8cAD+WJPz0Am2gxXgU9IneOqDpAAXOsOltVuMzpdakJXrdPCzXiNVUpCeOos5cxnpQT39G+XVLhs1osQVvJKPZyNq8HDwd4d7pNDuWJPxVX7MSzqUDU6gfadKiNlUFTzLeFHHDlzO4kpa7aiKhBPGKwOqxsBAmYkOIpipyXcQSPlRTf+Tii0U3EJGaZsDER2qoB3h2hu0qe+NNwUooYU8y5mILbJe6OuX+2FTKy7bieTDAemaQyQ0CPthljSWO+xmFDIYiESjM5xKd6Ik5lvLq5GrQ3aCMLvmCA9wowLuWJb9xF59hVVP6O0CrBi3ZjZSNOvRy+I6klNVRJYRBaEzdN+imiUXQ8iVF8fsp+W4JXw7WISW7fDh7lptWkCwZ4d7QTXyBPfJMYK7SijjFppGnlIVJBJBYj7eUwtiP1IBXGI1XCsjNpbjENVpSAJ2hq2LTywEly3hUYazt31J8w2+aiLx3g3fohXixPfOMYm6zCGs9LVo9MoW3MCJE7R5u/WsOIjrqBoHUO0bJE9vxBpbhsd3+Nb4/vtPCZ4oZYCitNeYuC/8UDvDvy0qvkiW/cgqNqRyzqSZa/s0mqNGjtKOoTm14zZpUauiQgVfqtQiZjq7Q27JNaSK5ExRcrGCXO1FJYh6jR6CFqK7bZdQZ4t8g0rSlPfP1RdBtqaa9diqtzJkQ9duSryi2brQXbxDwbRUpFMBHjRj8+Nt7GDKgvph9okW7LX47gu0SpGnnFQ1S1lYldOsC7hYteR574ZuKs7Ei1lBsfdz7IZoxzzCVmmVqaSySzQbBVAWDek+N4jh9E/4VqZrJjPwiv9BC1XcvOWgO8275CVyBPvAtTVlDJfZkaZGU7NpqBogAj/xEHkeAuJihWYCxGN6e8+9JtSegFXF1TrhhLGP1fak3pebgPz192/8gB4d/6WT7+GdYnpH7hH/DJzzFiYPn/vjW0SgNpTNuPIZoAEZv8tlGw4+RLxy+ZjnKa5NdFoC7UaW0aduoYse6+bXg1DLg6UfRYwmhGEjqPvF75U558SANrElK/+MdpXvmqBpaXOa/MTZaa1DOcSiLaw9j0NNNst3c+63c7EKTpkvKHzu6bPbP0RkuHAVcbRY8ijP46MIbQeeT1mhA+5PV/inyDdQipf8LTvMXbwvoDy7IruDNVZKTfV4CTSRUYdybUCnGU7KUTDxLgCknqUm5aAW6/1p6eMsOYsphLzsHrE0Y/P5bQedx1F/4yPHnMB3/IOoTU9+BL8PhtjuFKBpZXnYNJxTuv+2XqolKR2UQgHhS5novuxVySJhBNRF3SoKK1XZbbXjVwWNyOjlqWJjrWJIy+P5bQedyldNScP+HZ61xKSK3jyrz+NiHG1hcOLL/+P+PDF2gOkekKGiNWKgJ+8Z/x8Iv4DdQHzcpZyF4v19I27w9/yPGDFQvmEpKtqv/TLiWMfn4sofMm9eAH8Ao0zzh7h4sJqYtxZd5/D7hkYPneDzl5idlzNHcIB0jVlQ+8ULzw/nc5/ojzl2juE0apD7LRnJxe04dMz2iOCFNtGFpTuXA5AhcTRo8mdN4kz30nVjEC4YTZQy4gpC7GlTlrePKhGsKKgeXpCYeO0MAd/GH7yKQUlXPLOasOH3FnSphjHuDvEu4gB8g66oNbtr6eMbFIA4fIBJkgayoXriw2XEDQPJrQeROAlY6aeYOcMf+IVYTU3XFlZufMHinGywaW3YLpObVBAsbjF4QJMsVUSayjk4voPsHJOQfPWDhCgDnmDl6XIRerD24HsGtw86RMHOLvVSHrKBdeVE26gKB5NKHzaIwLOmrqBWJYZDLhASG16c0Tn+CdRhWDgWXnqRZUTnPIHuMJTfLVpkoYy5CzylHVTGZMTwkGAo2HBlkQplrJX6U+uF1wZz2uwS1SQ12IqWaPuO4baZaEFBdukksJmkcTOm+YJSvoqPFzxFA/YUhIvWxcmSdPWTWwbAKVp6rxTtPFUZfKIwpzm4IoMfaYQLWgmlG5FME2gdBgm+J7J+rtS/XBbaVLsR7bpPQnpMFlo2doWaVceHk9+MkyguZNCJ1He+kuHTWyQAzNM5YSUg/GlTk9ZunAsg1qELVOhUSAK0LABIJHLKbqaEbHZLL1VA3VgqoiOKXYiS+HRyaEKgsfIqX64HYWbLRXy/qWoylIV9gudL1OWBNgBgTNmxA6b4txDT4gi3Ri7xFSLxtXpmmYnzAcWDZgY8d503LFogz5sbonDgkKcxGsWsE1OI+rcQtlgBBCSOKD1mtqYpIU8cTvBmAT0yZe+zUzeY92fYjTtGipXLhuR0ePoHk0ofNWBX+lo8Z7pAZDk8mEw5L7dVyZZoE/pTewbI6SNbiAL5xeygW4xPRuLCGbhcO4RIeTMFYHEJkYyEO9HmJfXMDEj/LaH781wHHZEtqSQ/69UnGpzH7LKIAZEDSPJnTesJTUa+rwTepI9dLJEawYV+ZkRn9g+QirD8vF8Mq0jFQ29js6kCS3E1+jZIhgPNanHdHFqFvPJLHqFwQqbIA4jhDxcNsOCCQLDomaL/dr5lyJaJU6FxPFjO3JOh3kVMcROo8u+C+jo05GjMF3P3/FuDLn5x2M04xXULPwaS6hBYki+MrMdZJSgPHlcB7nCR5bJ9Kr5ACUn9jk5kivdd8tk95SOGrtqu9lr2IhK65ZtEl7ZKrp7DrqwZfRUSN1el7+7NJxZbywOC8neNKTch5vsTEMNsoCCqHBCqIPRjIPkm0BjvFODGtto99rCl+d3wmHkW0FPdpZtC7MMcVtGFQjJLX5bdQ2+x9ypdc313uj8xlsrfuLgWXz1cRhZvJYX0iNVBRcVcmCXZs6aEf3RQF2WI/TcCbKmGU3IOoDJGDdDub0+hYckt6PlGu2BcxmhbTdj/klhccLGJMcqRjMJP1jW2ETqLSWJ/29MAoORluJ+6LPffBZbi5gqi5h6catQpmOT7/OFf5UorRpLzCqcMltBLhwd1are3kztrSzXO0LUbXRQcdLh/RdSZ+swRm819REDrtqzC4es6Gw4JCKlSnjYVpo0xeq33PrADbFLL3RuCmObVmPN+24kfa+AojDuM4umKe2QwCf6EN906HwjujaitDs5o0s1y+k3lgbT2W2i7FJdnwbLXhJUBq/9liTctSmFC/0OqUinb0QddTWamtjbHRFuWJJ6NpqZ8vO3fZJ37Db+2GkaPYLGHs7XTTdiFQJ68SkVJFVmY6McR5UycflNCsccHFaV9FNbR4NttLxw4pQ7wJd066Z0ohVbzihaxHVExd/ay04oxUKWt+AsdiQ9OUyZ2krzN19IZIwafSTFgIBnMV73ADj7V/K8u1MaY2sJp2HWm0f41tqwajEvdHWOJs510MaAqN4aoSiPCXtN2KSi46dUxHdaMquar82O1x5jqhDGvqmoE9LfxcY3zqA7/x3HA67r9ZG4O6Cuxu12/+TP+eLP+I+HErqDDCDVmBDO4larujNe7x8om2rMug0MX0rL1+IWwdwfR+p1TNTyNmVJ85ljWzbWuGv8/C7HD/izjkHNZNYlhZcUOKVzKFUxsxxN/kax+8zPWPSFKw80rJr9Tizyj3o1gEsdwgWGoxPezDdZ1TSENE1dLdNvuKL+I84nxKesZgxXVA1VA1OcL49dFlpFV5yJMhzyCmNQ+a4BqusPJ2bB+xo8V9u3x48VVIEPS/mc3DvAbXyoYr6VgDfh5do5hhHOCXMqBZUPhWYbWZECwVJljLgMUWOCB4MUuMaxGNUQDVI50TQ+S3kFgIcu2qKkNSHVoM0SHsgoZxP2d5HH8B9woOk4x5bPkKtAHucZsdykjxuIpbUrSILgrT8G7G5oCW+K0990o7E3T6AdW4TilH5kDjds+H64kS0mz24grtwlzDHBJqI8YJQExotPvoC4JBq0lEjjQkyBZ8oH2LnRsQ4Hu1QsgDTJbO8fQDnllitkxuVskoiKbRF9VwzMDvxHAdwB7mD9yCplhHFEyUWHx3WtwCbSMMTCUCcEmSGlg4gTXkHpZXWQ7kpznK3EmCHiXInqndkQjunG5kxTKEeGye7jWz9cyMR2mGiFQ15ENRBTbCp+Gh86vAyASdgmJq2MC6hoADQ3GosP0QHbnMHjyBQvQqfhy/BUbeHd5WY/G/9LK/8Ka8Jd7UFeNWEZvzPb458Dn8DGLOe3/wGL/4xP+HXlRt+M1PE2iLhR8t+lfgxsuh7AfO2AOf+owWhSZRYQbd622hbpKWKuU+XuvNzP0OseRDa+mObgDHJUSc/pKx31QdKffQ5OIJpt8GWjlgTwMc/w5MPCR/yl1XC2a2Yut54SvOtMev55Of45BOat9aWG27p2ZVORRvnEk1hqWMVUmqa7S2YtvlIpspuF1pt0syuZS2NV14mUidCSfzQzg+KqvIYCMljIx2YK2AO34fX4GWdu5xcIAb8MzTw+j/lyWM+Dw/gjs4GD6ehNgA48kX/AI7XXM/XAN4WHr+9ntywqoCakCqmKP0rmQrJJEErG2Upg1JObr01lKQy4jskWalKYfJ/EDLMpjNSHFEUAde2fltaDgmrNaWQ9+AAb8I5vKjz3L1n1LriB/BXkG/wwR9y/oRX4LlioHA4LzP2inzRx/DWmutRweFjeP3tNeSGlaE1Fde0OS11yOpmbIp2u/jF1n2RRZviJM0yBT3IZl2HWImKjQOxIyeU325b/qWyU9Moj1o07tS0G7qJDoGHg5m8yeCxMoEH8GU45tnrNM84D2l297DQ9t1YP7jki/7RmutRweEA77/HWXOh3HCxkRgldDQkAjNTMl2Iloc1qN5JfJeeTlyTRzxURTdn1Ixv2uKjs12AbdEWlBtmVdk2k7FFwj07PCZ9XAwW3dG+8xKzNFr4EnwBZpy9Qzhh3jDXebBpYcpuo4fQ44u+fD1dweEnHzI7v0xuuOALRUV8rXpFyfSTQYkhd7IHm07jpyhlkCmI0ALYqPTpUxXS+z4jgDj1Pflvmz5ecuItpIBxyTHpSTGWd9g1ApfD/bvwUhL4nT1EzqgX7cxfCcNmb3mPL/qi9SwTHJ49oj5ZLjccbTG3pRmlYi6JCG0mQrAt1+i2UXTZ2dv9IlQpN5naMYtviaXlTrFpoMsl3bOAFEa8sqPj2WCMrx3Yjx99qFwO59Aw/wgx+HlqNz8oZvA3exRDvuhL1jMQHPaOJ0+XyA3fp1OfM3qObEVdhxjvynxNMXQV4+GJyvOEFqeQBaIbbO7i63rpxCltdZShPFxkjM2FPVkn3TG+Rp9pO3l2RzFegGfxGDHIAh8SteR0C4HopXzRF61nheDw6TFN05Ebvq8M3VKKpGjjO6r7nhudTEGMtYM92HTDaR1FDMXJ1eThsbKfywyoWwrzRSXkc51flG3vIid62h29bIcFbTGhfV+faaB+ohj7dPN0C2e2lC96+XouFByen9AsunLDJZ9z7NExiUc0OuoYW6UZkIyx2YUR2z6/TiRjyKMx5GbbjLHvHuf7YmtKghf34LJfx63Yg8vrvN2zC7lY0x0tvKezo4HmGYDU+Gab6dFL+KI761lDcNifcjLrrr9LWZJctG1FfU1uwhoQE22ObjdfkSzY63CbU5hzs21WeTddH2BaL11Gi7lVdlxP1nkxqhnKhVY6knS3EPgVGg1JpN5cP/hivujOelhXcPj8HC/LyI6MkteVjlolBdMmF3a3DbsuAYhL44dxzthWSN065xxUd55Lmf0wRbOYOqH09/o9WbO2VtFdaMb4qBgtFJoT1SqoN8wPXMoXLb3p1PUEhxfnnLzGzBI0Ku7FxrKsNJj/8bn/H8fPIVOd3rfrklUB/DOeO+nkghgSPzrlPxluCMtOnDL4Yml6dK1r3vsgMxgtPOrMFUZbEUbTdIzii5beq72G4PD0DKnwjmBULUVFmy8t+k7fZ3pKc0Q4UC6jpVRqS9Umv8bxw35flZVOU1X7qkjnhZlsMbk24qQ6Hz7QcuL6sDC0iHHki96Uh2UdvmgZnjIvExy2TeJdMDZNSbdZyAHe/Yd1xsQhHiKzjh7GxQ4yqMPaywPkjMamvqrYpmO7Knad+ZQC5msCuAPWUoxrxVhrGv7a+KLXFhyONdTMrZ7ke23qiO40ZJUyzgYyX5XyL0mV7NiUzEs9mjtbMN0dERqwyAJpigad0B3/zRV7s4PIfXSu6YV/MK7+OrYe/JvfGMn/PHJe2fyUdtnFrKRNpXV0Y2559aWPt/G4BlvjTMtXlVIWCnNyA3YQBDmYIodFz41PvXPSa6rq9lWZawZ4dP115HXV/M/tnFkkrBOdzg6aP4pID+MZnTJ1SuuB6iZlyiox4HT2y3YBtkUKWooacBQUDTpjwaDt5poBHl1/HXltwP887lKKXxNUEyPqpGTyA699UqY/lt9yGdlUKra0fFWS+36iylVWrAyd7Uw0CZM0z7xKTOduznLIjG2Hx8cDPLb+OvK6Bv7n1DYci4CxUuRxrjBc0bb4vD3rN5Zz36ntLb83eVJIB8LiIzCmn6SMPjlX+yNlTjvIGjs+QzHPf60Aj62/jrzG8j9vYMFtm1VoRWCJdmw7z9N0t+c8cxZpPeK4aTRicS25QhrVtUp7U578chk4q04Wx4YoQSjFryUlpcQ1AbxZ/XVMknIU//OGl7Q6z9Zpxi0+3yFhSkjUDpnCIUhLWVX23KQ+L9vKvFKI0ZWFQgkDLvBoylrHNVmaw10zwCPrr5tlodfnf94EWnQ0lFRWy8pW9LbkLsyUVDc2NSTHGDtnD1uMtchjbCeb1mpxFP0YbcClhzdLu6lfO8Bj6q+bdT2sz/+8SZCV7VIxtt0DUn9L7r4cLYWDSXnseEpOGFuty0qbOVlS7NNzs5FOGJUqQpl2Q64/yBpZf90sxbE+//PGdZ02HSipCbmD6NItmQ4Lk5XUrGpDMkhbMm2ZVheNYV+VbUWTcv99+2NyX1VoafSuC+AN6q9bFIMv5X/eagNWXZxEa9JjlMwNWb00akGUkSoepp1/yRuuqHGbUn3UdBSTxBU6SEVklzWRUkPndVvw2PrrpjvxOvzPmwHc0hpmq82npi7GRro8dXp0KXnUQmhZbRL7NEVp1uuZmO45vuzKsHrktS3GLWXODVjw+vXXLYx4Hf7njRPd0i3aoAGX6W29GnaV5YdyDj9TFkakje7GHYzDoObfddHtOSpoi2SmzJHrB3hM/XUDDEbxP2/oosszcRlehWXUvzHv4TpBVktHqwenFo8uLVmy4DKLa5d3RtLrmrM3aMFr1183E4sewf+85VWeg1c5ag276NZrM9IJVNcmLEvDNaV62aq+14IAOGFsBt973Ra8Xv11YzXwNfmft7Jg2oS+XOyoC8/cwzi66Dhmgk38kUmP1CUiYWOX1bpD2zWXt2FCp7uq8703APAa9dfNdscR/M/bZLIyouVxqJfeWvG9Je+JVckHQ9+CI9NWxz+blX/KYYvO5n2tAP/vrlZ7+8/h9y+9qeB/Hnt967e5mevX10rALDWK//FaAT5MXdBXdP0C/BAes792c40H+AiAp1e1oH8HgH94g/Lttx1gp63op1eyoM/Bvw5/G/7xFbqJPcCXnmBiwDPb/YKO4FX4OjyCb289db2/Noqicw4i7N6TVtoz8tNwDH+8x/i6Ae7lmaQVENzJFb3Di/BFeAwz+Is9SjeQySpPqbLFlNmyz47z5a/AF+AYFvDmHqibSXTEzoT4Gc3OALaqAP4KPFUJ6n+1x+rGAM6Zd78bgJ0a8QN4GU614vxwD9e1Amy6CcskNrczLx1JIp6HE5UZD/DBHrFr2oNlgG4Odv226BodoryjGJ9q2T/AR3vQrsOCS0ctXZi3ruLlhpFDJYl4HmYtjQCP9rhdn4suySLKDt6wLcC52h8xPlcjju1fn+yhuw4LZsAGUuo2b4Fx2UwQu77uqRHXGtg92aN3tQCbFexc0uk93vhTXbct6y7MulLycoUljx8ngDMBg1tvJjAazpEmOtxlzclvj1vQf1Tx7QlPDpGpqgtdSKz/d9/hdy1vTfFHSmC9dGDZbLiezz7Ac801HirGZsWjydfZyPvHXL/Y8Mjzg8BxTZiuwKz4Eb8sBE9zznszmjvFwHKPIWUnwhqfVRcd4Ck0K6ate48m1oOfrX3/yOtvAsJ8zsPAM89sjnddmuLuDPjX9Bu/L7x7xpMzFk6nWtyQfPg278Gn4Aekz2ZgOmU9eJ37R14vwE/BL8G3aibCiWMWWDQ0ZtkPMnlcGeAu/Ag+8ZyecU5BPuy2ILD+sQqyZhAKmn7XZd+jIMTN9eBL7x95xVLSX4On8EcNlXDqmBlqS13jG4LpmGbkF/0CnOi3H8ETOIXzmnmtb0a16Tzxj1sUvQCBiXZGDtmB3KAefPH94xcUa/6vwRn80GOFyjEXFpba4A1e8KQfFF+259tx5XS4egYn8fQsLGrqGrHbztr+uByTahWuL1NUGbDpsnrwBfePPwHHIf9X4RnM4Z2ABWdxUBlqQ2PwhuDxoS0vvqB1JzS0P4h2nA/QgTrsJFn+Y3AOjs9JFC07CGWX1oNX3T/yHOzgDjwPn1PM3g9Jk9lZrMEpxnlPmBbjyo2+KFXRU52TJM/2ALcY57RUzjObbjqxVw++4P6RAOf58pcVsw9Daje3htriYrpDOonre3CudSe6bfkTEgHBHuDiyu5MCsc7BHhYDx7ePxLjqigXZsw+ijMHFhuwBmtoTPtOxOrTvYJDnC75dnUbhfwu/ZW9AgYd+peL68HD+0emKquiXHhWjJg/UrkJYzuiaL3E9aI/ytrCvAd4GcYZMCkSQxfUg3v3j8c4e90j5ZTPdvmJJGHnOCI2nHS8081X013pHuBlV1gB2MX1YNmWLHqqGN/TWmG0y6clJWthxNUl48q38Bi8vtMKyzzpFdSDhxZ5WBA5ZLt8Jv3895DduBlgbPYAj8C4B8hO68FDkoh5lydC4FiWvBOVqjYdqjiLv92t8yPDjrDaiHdUD15qkSURSGmXJwOMSxWAXYwr3zaAufJ66l+94vv3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/wHuD9tQd4f+0B3l97gPfXHuD9tQd4f+0B3l97gG8LwP8G/AL8O/A5OCq0Ys2KIdv/qOIXG/4mvFAMF16gZD+2Xvu/B8as5+8bfllWyg0zaNO5bfXj6vfhhwD86/Aq3NfRS9t9WPnhfnvCIw/CT8GLcFTMnpntdF/z9V+PWc/vWoIH+FL3Znv57PitcdGP4R/C34avw5fgRVUInCwbsn1yyA8C8zm/BH8NXoXnVE6wVPjdeCI38kX/3+Ct9dbz1pTmHFRu+Hm4O9Ch3clr99negxfwj+ER/DR8EV6B5+DuQOnTgUw5rnkY+FbNU3gNXh0o/JYTuWOvyBf9FvzX663HH/HejO8LwAl8Hl5YLTd8q7sqA3wbjuExfAFegQdwfyDoSkWY8swzEf6o4Qyewefg+cHNbqMQruSL/u/WWc+E5g7vnnEXgDmcDeSGb/F4cBcCgT+GGRzDU3hZYburAt9TEtHgbM6JoxJ+6NMzzTcf6c2bycv2+KK/f+l6LBzw5IwfqZJhA3M472pWT/ajKxnjv4AFnMEpnBTPND6s2J7qHbPAqcMK74T2mZ4VGB9uJA465It+/eL1WKhYOD7xHOkr1ajK7d0C4+ke4Hy9qXZwpgLr+Znm/uNFw8xQOSy8H9IzjUrd9+BIfenYaylf9FsXr8fBAadnPIEDna8IBcwlxnuA0/Wv6GAWPd7dDIKjMdSWueAsBj4M7TOd06qBbwDwKr7oleuxMOEcTuEZTHWvDYUO7aHqAe0Bbq+HEFRzOz7WVoTDQkVds7A4sIIxfCQdCefFRoIOF/NFL1mPab/nvOakSL/Q1aFtNpUb/nFOVX6gzyg/1nISyDfUhsokIzaBR9Kxm80s5mK+6P56il1jXic7nhQxsxSm3OwBHl4fFdLqi64nDQZvqE2at7cWAp/IVvrN6/BFL1mPhYrGMBfOi4PyjuSGf6wBBh7p/FZTghCNWGgMzlBbrNJoPJX2mW5mwZfyRffXo7OFi5pZcS4qZUrlViptrXtw+GQoyhDPS+ANjcGBNRiLCQDPZPMHuiZfdFpPSTcQwwKYdRNqpkjm7AFeeT0pJzALgo7g8YYGrMHS0iocy+YTm2vyRUvvpXCIpQ5pe666TJrcygnScUf/p0NDs/iAI/nqDHC8TmQT8x3NF91l76oDdQGwu61Z6E0ABv7uO1dbf/37Zlv+Zw/Pbh8f1s4Avur6657/+YYBvur6657/+YYBvur6657/+YYBvur6657/+aYBvuL6657/+VMA8FXWX/f8zzcN8BXXX/f8zzcNMFdbf93zP38KLPiK6697/uebtuArrr/u+Z9vGmCusP6653/+1FjwVdZf9/zPN7oHX339dc//fNMu+irrr3v+50+Bi+Zq6697/uebA/jz8Pudf9ht/fWv517J/XUzAP8C/BAeX9WCDrUpZ3/dEMBxgPcfbtTVvsYV5Yn32u03B3Ac4P3b8I+vxNBKeeL9dRMAlwO83959qGO78sT769oB7g3w/vGVYFzKE++v6wV4OMD7F7tckFkmT7y/rhHgpQO8b+4Y46XyxPvrugBeNcB7BRiX8sT767oAvmCA9woAHsoT76+rBJjLBnh3txOvkifeX1dswZcO8G6N7sXyxPvr6i340gHe3TnqVfLE++uKAb50gHcXLnrX8sR7gNdPRqwzwLu7Y/FO5Yn3AK9jXCMGeHdgxDuVJ75VAI8ljP7PAb3/RfjcZfePHBB+79dpfpH1CanN30d+mT1h9GqAxxJGM5LQeeQ1+Tb+EQJrElLb38VHQ94TRq900aMIo8cSOo+8Dp8QfsB8zpqE1NO3OI9Zrj1h9EV78PqE0WMJnUdeU6E+Jjyk/hbrEFIfeWbvId8H9oTRFwdZaxJGvziW0Hn0gqYB/wyZ0PwRlxJST+BOw9m77Amj14ii1yGM/txYQudN0qDzGe4EqfA/5GJCagsHcPaEPWH0esekSwmjRxM6b5JEcZ4ww50ilvAOFxBSx4yLW+A/YU8YvfY5+ALC6NGEzhtmyZoFZoarwBLeZxUhtY4rc3bKnjB6TKJjFUHzJoTOozF2YBpsjcyxDgzhQ1YRUse8+J4wenwmaylB82hC5w0zoRXUNXaRBmSMQUqiWSWkLsaVqc/ZE0aPTFUuJWgeTei8SfLZQeMxNaZSIzbII4aE1Nmr13P2hNHjc9E9guYNCZ032YlNwESMLcZiLQHkE4aE1BFg0yAR4z1h9AiAGRA0jyZ03tyIxWMajMPWBIsxYJCnlITU5ShiHYdZ94TR4wCmSxg9jtB5KyPGYzymAYexWEMwAPIsAdYdV6aObmNPGD0aYLoEzaMJnTc0Ygs+YDw0GAtqxBjkuP38bMRWCHn73xNGjz75P73WenCEJnhwyVe3AEe8TtKdJcYhBl97wuhNAObK66lvD/9J9NS75v17wuitAN5fe4D31x7g/bUHeH/tAd5fe4D3AO+vPcD7aw/w/toDvL/2AO+vPcD7aw/w/toDvAd4f/24ABzZ8o+KLsSLS+Pv/TqTb3P4hKlQrTGh+fbIBT0Axqznnb+L/V2mb3HkN5Mb/nEHeK7d4IcDld6lmDW/iH9E+AH1MdOw/Jlu2T1xNmY98sv4wHnD7D3uNHu54WUuOsBTbQuvBsPT/UfzNxGYzwkP8c+Yz3C+r/i6DcyRL/rZ+utRwWH5PmfvcvYEt9jLDS/bg0/B64DWKrQM8AL8FPwS9beQCe6EMKNZYJol37jBMy35otdaz0Bw2H/C2Smc7+WGB0HWDELBmOByA3r5QONo4V+DpzR/hFS4U8wMW1PXNB4TOqYz9urxRV++ntWCw/U59Ty9ebdWbrgfRS9AYKKN63ZokZVygr8GZ/gfIhZXIXPsAlNjPOLBby5c1eOLvmQ9lwkOy5x6QV1j5TYqpS05JtUgUHUp5toHGsVfn4NX4RnMCe+AxTpwmApTYxqMxwfCeJGjpXzRF61nbcHhUBPqWze9svwcHJ+S6NPscKrEjug78Dx8Lj3T8D4YxGIdxmJcwhi34fzZUr7olevZCw5vkOhoClq5zBPZAnygD/Tl9EzDh6kl3VhsHYcDEb+hCtJSvuiV69kLDm+WycrOTArHmB5/VYyP6jOVjwgGawk2zQOaTcc1L+aLXrKeveDwZqlKrw8U9Y1p66uK8dEzdYwBeUQAY7DbyYNezBfdWQ97weEtAKYQg2xJIkuveAT3dYeLGH+ShrWNwZgN0b2YL7qznr3g8JYAo5bQBziPjx7BPZ0d9RCQp4UZbnFdzBddor4XHN4KYMrB2qHFRIzzcLAHQZ5the5ovui94PCWAPefaYnxIdzRwdHCbuR4B+tbiy96Lzi8E4D7z7S0mEPd+eqO3cT53Z0Y8SV80XvB4Z0ADJi/f7X113f+7p7/+UYBvur6657/+YYBvur6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+aYBvuL6657/+VMA8FXWX/f8z58OgK+y/rrnf75RgLna+uue//lTA/CV1V/3/M837aKvvv6653++UQvmauuve/7nTwfAV1N/3fM/fzr24Cuuv+75nz8FFnxl9dc9//MOr/8/glixwRuUfM4AAAAASUVORK5CYII="},getSearchTexture:function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAAhCAAAAABIXyLAAAAAOElEQVRIx2NgGAWjYBSMglEwEICREYRgFBZBqDCSLA2MGPUIVQETE9iNUAqLR5gIeoQKRgwXjwAAGn4AtaFeYLEAAAAASUVORK5CYII="}});var Ql=function(e,t,n,r){Bu.call(this),this.scene=e,this.camera=t,this.sampleLevel=4,this.unbiased=!0,this.clearColor=void 0!==n?n:0,this.clearAlpha=void 0!==r?r:0,void 0===gl&&console.error("SSAARenderPass relies on CopyShader");var i=gl;this.copyUniforms=Xn.clone(i.uniforms),this.copyMaterial=new qn({uniforms:this.copyUniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,premultipliedAlpha:!0,transparent:!0,blending:te,depthTest:!1,depthWrite:!1}),this.camera2=new Jn(-1,1,1,-1,0,1),this.scene2=new Yn,this.quad2=new fn(new tr(2,2),this.copyMaterial),this.quad2.frustumCulled=!1,this.scene2.add(this.quad2)};Ql.prototype=Object.assign(Object.create(Bu.prototype),{constructor:Ql,dispose:function(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null)},setSize:function(e,t){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(e,t)},render:function(e,t,n){this.sampleRenderTarget||(this.sampleRenderTarget=new $n(n.width,n.height,{minFilter:Ze,magFilter:Ze,format:pt}),this.sampleRenderTarget.texture.name="SSAARenderPass.sample");var r=Ql.JitterVectors[Math.max(0,Math.min(this.sampleLevel,5))],i=e.autoClear;e.autoClear=!1;var o=e.getClearColor().getHex(),a=e.getClearAlpha(),s=1/r.length;this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture;for(var c=n.width,u=n.height,l=0;l<r.length;l++){var h=r[l];this.camera.setViewOffset&&this.camera.setViewOffset(c,u,.0625*h[0],.0625*h[1],c,u);var d=s;if(this.unbiased)d+=1/32*((l+.5)/r.length-.5);this.copyUniforms.opacity.value=d,e.setClearColor(this.clearColor,this.clearAlpha),e.render(this.scene,this.camera,this.sampleRenderTarget,!0),0===l&&e.setClearColor(0,0),e.render(this.scene2,this.camera2,this.renderToScreen?null:t,0===l)}this.camera.clearViewOffset&&this.camera.clearViewOffset(),e.autoClear=i,e.setClearColor(o,a)}}),Ql.JitterVectors=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];var Zl={uniforms:{tDiffuse:{value:null},tDepth:{value:null},size:{value:new x(512,512)},cameraNear:{value:1},cameraFar:{value:100},radius:{value:32},onlyAO:{value:0},aoClamp:{value:.25},lumInfluence:{value:.7}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float cameraNear;","uniform float cameraFar;","#ifdef USE_LOGDEPTHBUF","uniform float logDepthBufFC;","#endif","uniform float radius;","uniform bool onlyAO;","uniform vec2 size;","uniform float aoClamp;","uniform float lumInfluence;","uniform sampler2D tDiffuse;","uniform sampler2D tDepth;","varying vec2 vUv;","#define DL 2.399963229728653","#define EULER 2.718281828459045","const int samples = 64;","const bool useNoise = true;","const float noiseAmount = 0.0004;","const float diffArea = 0.4;","const float gDisplace = 0.4;","#include <packing>","vec2 rand( const vec2 coord ) {","vec2 noise;","if ( useNoise ) {","float nx = dot ( coord, vec2( 12.9898, 78.233 ) );","float ny = dot ( coord, vec2( 12.9898, 78.233 ) * 2.0 );","noise = clamp( fract ( 43758.5453 * sin( vec2( nx, ny ) ) ), 0.0, 1.0 );","} else {","float ff = fract( 1.0 - coord.s * ( size.x / 2.0 ) );","float gg = fract( coord.t * ( size.y / 2.0 ) );","noise = vec2( 0.25, 0.75 ) * vec2( ff ) + vec2( 0.75, 0.25 ) * gg;","}","return ( noise * 2.0  - 1.0 ) * noiseAmount;","}","float readDepth( const in vec2 coord ) {","float cameraFarPlusNear = cameraFar + cameraNear;","float cameraFarMinusNear = cameraFar - cameraNear;","float cameraCoef = 2.0 * cameraNear;","#ifdef USE_LOGDEPTHBUF","float logz = unpackRGBAToDepth( texture2D( tDepth, coord ) );","float w = pow(2.0, (logz / logDepthBufFC)) - 1.0;","float z = (logz / w) + 1.0;","#else","float z = unpackRGBAToDepth( texture2D( tDepth, coord ) );","#endif","return cameraCoef / ( cameraFarPlusNear - z * cameraFarMinusNear );","}","float compareDepths( const in float depth1, const in float depth2, inout int far ) {","float garea = 8.0;","float diff = ( depth1 - depth2 ) * 100.0;","if ( diff < gDisplace ) {","garea = diffArea;","} else {","far = 1;","}","float dd = diff - gDisplace;","float gauss = pow( EULER, -2.0 * ( dd * dd ) / ( garea * garea ) );","return gauss;","}","float calcAO( float depth, float dw, float dh ) {","vec2 vv = vec2( dw, dh );","vec2 coord1 = vUv + radius * vv;","vec2 coord2 = vUv - radius * vv;","float temp1 = 0.0;","float temp2 = 0.0;","int far = 0;","temp1 = compareDepths( depth, readDepth( coord1 ), far );","if ( far > 0 ) {","temp2 = compareDepths( readDepth( coord2 ), depth, far );","temp1 += ( 1.0 - temp1 ) * temp2;","}","return temp1;","}","void main() {","vec2 noise = rand( vUv );","float depth = readDepth( vUv );","float tt = clamp( depth, aoClamp, 1.0 );","float w = ( 1.0 / size.x ) / tt + ( noise.x * ( 1.0 - noise.x ) );","float h = ( 1.0 / size.y ) / tt + ( noise.y * ( 1.0 - noise.y ) );","float ao = 0.0;","float dz = 1.0 / float( samples );","float l = 0.0;","float z = 1.0 - dz / 2.0;","for ( int i = 0; i <= samples; i ++ ) {","float r = sqrt( 1.0 - z );","float pw = cos( l ) * r;","float ph = sin( l ) * r;","ao += calcAO( depth, pw * w, ph * h );","z = z - dz;","l = l + DL;","}","ao /= float( samples );","ao = 1.0 - ao;","vec3 color = texture2D( tDiffuse, vUv ).rgb;","vec3 lumcoeff = vec3( 0.299, 0.587, 0.114 );","float lum = dot( color.rgb, lumcoeff );","vec3 luminance = vec3( lum );","vec3 final = vec3( color * mix( vec3( ao ), vec3( 1.0 ), luminance * lumInfluence ) );","if ( onlyAO ) {","final = vec3( mix( vec3( ao ), vec3( 1.0 ), luminance * lumInfluence ) );","}","gl_FragColor = vec4( final, 1.0 );","}"].join("\n")},Kl=function(e,t,n,r){if(void 0===Zl)return console.warn("SSAOPass depends on SSAOShader"),new zu;zu.call(this,Zl),this.width=void 0!==n?n:512,this.height=void 0!==r?r:256,this.renderToScreen=!1,this.camera2=t,this.scene2=e,this.depthMaterial=new dr,this.depthMaterial.depthPacking=rn,this.depthMaterial.blending=$,this.depthRenderTarget=new $n(this.width,this.height,{minFilter:Ze,magFilter:Ze}),this.uniforms.tDepth.value=this.depthRenderTarget.texture,this.uniforms.size.value.set(this.width,this.height),this.uniforms.cameraNear.value=this.camera2.near,this.uniforms.cameraFar.value=this.camera2.far,this.uniforms.radius.value=4,this.uniforms.onlyAO.value=!1,this.uniforms.aoClamp.value=.25,this.uniforms.lumInfluence.value=.7,Object.defineProperties(this,{radius:{get:function(){return this.uniforms.radius.value},set:function(e){this.uniforms.radius.value=e}},onlyAO:{get:function(){return this.uniforms.onlyAO.value},set:function(e){this.uniforms.onlyAO.value=e}},aoClamp:{get:function(){return this.uniforms.aoClamp.value},set:function(e){this.uniforms.aoClamp.value=e}},lumInfluence:{get:function(){return this.uniforms.lumInfluence.value},set:function(e){this.uniforms.lumInfluence.value=e}}})};(Kl.prototype=Object.create(zu.prototype)).render=function(e,t,n,r,i){this.scene2.overrideMaterial=this.depthMaterial,e.render(this.scene2,this.camera2,this.depthRenderTarget,!0),this.scene2.overrideMaterial=null,zu.prototype.render.call(this,e,t,n,r,i)},Kl.prototype.setScene=function(e){this.scene2=e},Kl.prototype.setCamera=function(e){this.camera2=e,this.uniforms.cameraNear.value=this.camera2.near,this.uniforms.cameraFar.value=this.camera2.far},Kl.prototype.setSize=function(e,t){this.width=e,this.height=t,this.uniforms.size.value.set(this.width,this.height),this.depthRenderTarget.setSize(this.width,this.height)};var $l=function(e,t,n){void 0===Ql&&console.error("TAARenderPass relies on SSAARenderPass"),Ql.call(this,e,t,n),this.sampleLevel=0,this.accumulate=!1};$l.JitterVectors=Ql.JitterVectors,$l.prototype=Object.assign(Object.create(Ql.prototype),{constructor:$l,render:function(e,t,n,r){if(!this.accumulate)return Ql.prototype.render.call(this,e,t,n,r),void(this.accumulateIndex=-1);var i=$l.JitterVectors[5];this.sampleRenderTarget||(this.sampleRenderTarget=new $n(n.width,n.height,this.params),this.sampleRenderTarget.texture.name="TAARenderPass.sample"),this.holdRenderTarget||(this.holdRenderTarget=new $n(n.width,n.height,this.params),this.holdRenderTarget.texture.name="TAARenderPass.hold"),this.accumulate&&-1===this.accumulateIndex&&(Ql.prototype.render.call(this,e,this.holdRenderTarget,n,r),this.accumulateIndex=0);var o=e.autoClear;e.autoClear=!1;var a=1/i.length;if(this.accumulateIndex>=0&&this.accumulateIndex<i.length){this.copyUniforms.opacity.value=a,this.copyUniforms.tDiffuse.value=t.texture;for(var s=Math.pow(2,this.sampleLevel),c=0;c<s;c++){var u=i[this.accumulateIndex];if(this.camera.setViewOffset&&this.camera.setViewOffset(n.width,n.height,.0625*u[0],.0625*u[1],n.width,n.height),e.render(this.scene,this.camera,t,!0),e.render(this.scene2,this.camera2,this.sampleRenderTarget,0===this.accumulateIndex),this.accumulateIndex++,this.accumulateIndex>=i.length)break}this.camera.clearViewOffset&&this.camera.clearViewOffset()}var l=this.accumulateIndex*a;l>0&&(this.copyUniforms.opacity.value=1,this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture,e.render(this.scene2,this.camera2,t,!0)),l<1&&(this.copyUniforms.opacity.value=1-l,this.copyUniforms.tDiffuse.value=this.holdRenderTarget.texture,e.render(this.scene2,this.camera2,t,0===l)),e.autoClear=o}});var eh=function(e,t){Bu.call(this),void 0===gl&&console.error("TexturePass relies on CopyShader");var n=gl;this.map=e,this.opacity=void 0!==t?t:1,this.uniforms=Xn.clone(n.uniforms),this.material=new qn({uniforms:this.uniforms,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,depthTest:!1,depthWrite:!1}),this.needsSwap=!1,this.camera=new Jn(-1,1,1,-1,0,1),this.scene=new Yn,this.quad=new fn(new tr(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)};eh.prototype=Object.assign(Object.create(Bu.prototype),{constructor:eh,render:function(e,t,n,r,i){var o=e.autoClear;e.autoClear=!1,this.quad.material=this.material,this.uniforms.opacity.value=this.opacity,this.uniforms.tDiffuse.value=this.map,this.material.transparent=this.opacity<1,e.render(this.scene,this.camera,this.renderToScreen?null:n,this.clear),e.autoClear=o}});var th={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{type:"t",value:null},luminosityThreshold:{type:"f",value:1},smoothWidth:{type:"f",value:1},defaultColor:{type:"c",value:new v(0)},defaultOpacity:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float v = dot( texel.xyz, luma );","vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","gl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")},nh=function(e,t,n,r){Bu.call(this),this.strength=void 0!==t?t:1,this.radius=n,this.threshold=r,this.resolution=void 0!==e?new x(e.x,e.y):new x(256,256),this.clearColor=new v(0,0,0);var i={minFilter:Ze,magFilter:Ze,format:pt};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new $n(o,a,i),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var c=0;c<this.nMips;c++){var u;(u=new $n(o,a,i)).texture.name="UnrealBloomPass.h"+c,u.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(u),(u=new $n(o,a,i)).texture.name="UnrealBloomPass.v"+c,u.texture.generateMipmaps=!1,this.renderTargetsVertical.push(u),o=Math.round(o/2),a=Math.round(a/2)}void 0===th&&console.error("UnrealBloomPass relies on LuminosityHighPassShader");var l=th;this.highPassUniforms=Xn.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new qn({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,defines:{}}),this.separableBlurMaterials=[];var h=[3,5,7,9,11];for(o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2),c=0;c<this.nMips;c++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(h[c])),this.separableBlurMaterials[c].uniforms.texSize.value=new x(o,a),o=Math.round(o/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new s(1,1,1),new s(1,1,1),new s(1,1,1),new s(1,1,1),new s(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===gl&&console.error("BloomPass relies on CopyShader");var d=gl;this.copyUniforms=Xn.clone(d.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new qn({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:te,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new v,this.oldClearAlpha=1,this.camera=new Jn(-1,1,1,-1,0,1),this.scene=new Yn,this.basic=new un,this.quad=new fn(new tr(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)};nh.prototype=Object.assign(Object.create(Bu.prototype),{constructor:nh,dispose:function(){for(var e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()},setSize:function(e,t){var n=Math.round(e/2),r=Math.round(t/2);this.renderTargetBright.setSize(n,r);for(var i=0;i<this.nMips;i++)this.renderTargetsHorizontal[i].setSize(n,r),this.renderTargetsVertical[i].setSize(n,r),this.separableBlurMaterials[i].uniforms.texSize.value=new x(n,r),n=Math.round(n/2),r=Math.round(r/2)},render:function(e,t,n,r,i){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var o=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),i&&e.context.disable(e.context.STENCIL_TEST),this.renderToScreen&&(this.quad.material=this.basic,this.basic.map=n.texture,e.render(this.scene,this.camera,void 0,!0)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.quad.material=this.materialHighPassFilter,e.render(this.scene,this.camera,this.renderTargetBright,!0);for(var a=this.renderTargetBright,s=0;s<this.nMips;s++)this.quad.material=this.separableBlurMaterials[s],this.separableBlurMaterials[s].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[s].uniforms.direction.value=nh.BlurDirectionX,e.render(this.scene,this.camera,this.renderTargetsHorizontal[s],!0),this.separableBlurMaterials[s].uniforms.colorTexture.value=this.renderTargetsHorizontal[s].texture,this.separableBlurMaterials[s].uniforms.direction.value=nh.BlurDirectionY,e.render(this.scene,this.camera,this.renderTargetsVertical[s],!0),a=this.renderTargetsVertical[s];this.quad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.render(this.scene,this.camera,this.renderTargetsHorizontal[0],!0),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,i&&e.context.enable(e.context.STENCIL_TEST),this.renderToScreen?e.render(this.scene,this.camera,void 0,!1):e.render(this.scene,this.camera,n,!1),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=o},getSeperableBlurMaterial:function(e){return new qn({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new x(.5,.5)},direction:{value:new x(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})},getCompositeMaterial:function(e){return new qn({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),nh.BlurDirectionX=new x(1,0),nh.BlurDirectionY=new x(0,1);function rh(e,t,n,r,i,o){this.planes=[void 0!==e?e:new Or,void 0!==t?t:new Or,void 0!==n?n:new Or,void 0!==r?r:new Or,void 0!==i?i:new Or,void 0!==o?o:new Or]}Object.assign(rh.prototype,{set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],u=n[6],l=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,l-s,p-h,y-m).normalize(),t[1].setComponents(a+r,l+s,p+h,y+m).normalize(),t[2].setComponents(a+i,l+c,p+d,y+v).normalize(),t[3].setComponents(a-i,l-c,p-d,y-v).normalize(),t[4].setComponents(a-o,l-u,p-f,y-g).normalize(),t[5].setComponents(a+o,l+u,p+f,y+g).normalize(),this},intersectsObject:function(){var e=new b;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new b;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:function(){var e=new s;return function(t){for(var n=this.planes,r=0;r<6;r++){var i=n[r];if(e.x=i.normal.x>0?t.max.x:t.min.x,e.y=i.normal.y>0?t.max.y:t.min.y,e.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(e)<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var ih=function(){this.id=0,this.object=null,this.z=0,this.renderOrder=0},oh=function(){this.id=0,this.v1=new ah,this.v2=new ah,this.v3=new ah,this.normalModel=new s,this.vertexNormalsModel=[new s,new s,new s],this.vertexNormalsLength=0,this.color=new v,this.material=null,this.uvs=[new x,new x,new x],this.z=0,this.renderOrder=0},ah=function(){this.position=new s,this.positionWorld=new s,this.positionScreen=new S,this.visible=!0};ah.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)};var sh=function(){this.id=0,this.v1=new ah,this.v2=new ah,this.vertexColors=[new v,new v],this.material=null,this.z=0,this.renderOrder=0},ch=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new x,this.material=null,this.renderOrder=0},uh=function(){var e,t,n,r,i,o,c,u,l,h,f,p=[],m=0,v=[],g=0,b=[],x=0,w=[],M=0,T=[],A=0,E={objects:[],lights:[],elements:[]},C=new s,P=new S,L=new y(new s(-1,-1,-1),new s(1,1,1)),O=new y,N=new Array(3),R=new a,I=new a,D=new a,F=new d,U=new rh,B=new S,z=new S;this.projectVector=function(e,t){console.warn("Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("Projector: .pickingRay() is now raycaster.setFromCamera().")};var j=new function(){var e=[],t=[],r=[],o=null,a=new d;function s(e){var t=e.position,n=e.positionWorld,r=e.positionScreen;n.copy(t).applyMatrix4(f),r.copy(n).applyMatrix4(I);var i=1/r.w;r.x*=i,r.y*=i,r.z*=i,e.visible=r.x>=-1&&r.x<=1&&r.y>=-1&&r.y<=1&&r.z>=-1&&r.z<=1}function u(e,t,n){return!0===e.visible||!0===t.visible||!0===n.visible||(N[0]=e.positionScreen,N[1]=t.positionScreen,N[2]=n.positionScreen,L.intersectsBox(O.setFromPoints(N)))}function l(e,t,n){return(n.positionScreen.x-e.positionScreen.x)*(t.positionScreen.y-e.positionScreen.y)-(n.positionScreen.y-e.positionScreen.y)*(t.positionScreen.x-e.positionScreen.x)<0}return{setObject:function(n){(o=n).material,a.getNormalMatrix(o.matrixWorld),e.length=0,t.length=0,r.length=0},projectVertex:s,checkTriangleVisibility:u,checkBackfaceCulling:l,pushVertex:function(e,t,r){(n=W()).position.set(e,t,r),s(n)},pushNormal:function(t,n,r){e.push(t,n,r)},pushColor:function(e,n,r){t.push(e,n,r)},pushUv:function(e,t){r.push(e,t)},pushLine:function(e,n){var r=v[e],i=v[n];r.positionScreen.copy(r.position).applyMatrix4(D),i.positionScreen.copy(i.position).applyMatrix4(D),!0===$(r.positionScreen,i.positionScreen)&&(r.positionScreen.multiplyScalar(1/r.positionScreen.w),i.positionScreen.multiplyScalar(1/i.positionScreen.w),(c=X()).id=o.id,c.v1.copy(r),c.v2.copy(i),c.z=Math.max(r.positionScreen.z,i.positionScreen.z),c.renderOrder=o.renderOrder,c.material=o.material,o.material.vertexColors===K&&(c.vertexColors[0].fromArray(t,3*e),c.vertexColors[1].fromArray(t,3*n)),E.elements.push(c))},pushTriangle:function(n,s,c,h){var d=arguments,f=v[n],p=v[s],m=v[c];if(!1!==u(f,p,m)&&(h.side===J||!0===l(f,p,m))){(i=H()).id=o.id,i.v1.copy(f),i.v2.copy(p),i.v3.copy(m),i.z=(f.positionScreen.z+p.positionScreen.z+m.positionScreen.z)/3,i.renderOrder=o.renderOrder,C.subVectors(m.position,p.position),P.subVectors(f.position,p.position),C.cross(P),i.normalModel.copy(C),i.normalModel.applyMatrix3(a).normalize();for(var g=0;g<3;g++){var y=i.vertexNormalsModel[g];y.fromArray(e,3*d[g]),y.applyMatrix3(a).normalize(),i.uvs[g].fromArray(r,2*d[g])}i.vertexNormalsLength=3,i.material=h,h.vertexColors===Z&&i.color.fromArray(t,3*n),E.elements.push(i)}}}};function V(n){(e=function(){if(t===m){var e=new ih;return p.push(e),m++,t++,e}return p[t++]}()).id=n.id,e.object=n,C.setFromMatrixPosition(n.matrixWorld),C.applyMatrix4(I),e.z=C.z,e.renderOrder=n.renderOrder,E.objects.push(e)}function G(e,t,n){var r=1/e.w;e.z*=r,e.z>=-1&&e.z<=1&&((l=function(){if(h===A){var e=new ch;return T.push(e),A++,h++,e}return T[h++]}()).id=t.id,l.x=e.x*r,l.y=e.y*r,l.z=e.z,l.renderOrder=t.renderOrder,l.object=t,l.rotation=t.rotation,l.scale.x=t.scale.x*Math.abs(l.x-(e.x+n.projectionMatrix.elements[0])/(e.w+n.projectionMatrix.elements[12])),l.scale.y=t.scale.y*Math.abs(l.y-(e.y+n.projectionMatrix.elements[5])/(e.w+n.projectionMatrix.elements[13])),l.material=t.material,E.elements.push(l))}function W(){if(r===g){var e=new ah;return v.push(e),g++,r++,e}return v[r++]}function H(){if(o===x){var e=new oh;return b.push(e),x++,o++,e}return b[o++]}function X(){if(u===M){var e=new sh;return w.push(e),M++,u++,e}return w[u++]}function Q(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function $(e,t){var n=0,r=1,i=e.z+e.w,o=t.z+t.w,a=-e.z+e.w,s=-t.z+t.w;return i>=0&&o>=0&&a>=0&&s>=0||!(i<0&&o<0||a<0&&s<0)&&(i<0?n=Math.max(n,i/(i-o)):o<0&&(r=Math.min(r,i/(i-o))),a<0?n=Math.max(n,a/(a-s)):s<0&&(r=Math.min(r,a/(a-s))),!(r<n)&&(e.lerp(t,n),t.lerp(e,1-r),!0))}this.projectScene=function(e,n,a,s){o=0,u=0,h=0,E.elements.length=0,!0===e.autoUpdate&&e.updateMatrixWorld(),null===n.parent&&n.updateMatrixWorld(),R.copy(n.matrixWorldInverse),I.multiplyMatrices(n.projectionMatrix,R),U.setFromMatrix(I),t=0,E.objects.length=0,E.lights.length=0,function e(t){if(!1!==t.visible){if(t instanceof vo)E.lights.push(t);else if(t instanceof fn||t instanceof pn||t instanceof Gi){if(!1===t.material.visible)return;if(!0===t.frustumCulled&&!1===U.intersectsObject(t))return;V(t)}else if(t instanceof wc){if(!1===t.material.visible)return;if(!0===t.frustumCulled&&!1===U.intersectsSprite(t))return;V(t)}for(var n=t.children,r=0,i=n.length;r<i;r++)e(n[r])}}(e),!0===a&&E.objects.sort(Q);for(var l=E.objects,d=0,p=l.length;d<p;d++){var m=l[d].object,g=m.geometry;if(j.setObject(m),f=m.matrixWorld,r=0,m instanceof fn){if(g instanceof k){var y=m.material,b=Array.isArray(y),x=g.attributes,w=g.groups;if(void 0===x.position)continue;for(var S=0,M=(Oe=x.position.array).length;S<M;S+=3){var T=Oe[S],A=Oe[S+1],L=Oe[S+2];if(!0===y.morphTargets)for(var O=g.morphAttributes.position,N=m.morphTargetInfluences,Z=0,ee=O.length;Z<ee;Z++){if(0!==(de=N[Z]))T+=((fe=O[Z]).getX(S/3)-Oe[S])*de,A+=(fe.getY(S/3)-Oe[S+1])*de,L+=(fe.getZ(S/3)-Oe[S+2])*de}j.pushVertex(T,A,L)}if(void 0!==x.normal){var te=x.normal.array;for(S=0,M=te.length;S<M;S+=3)j.pushNormal(te[S],te[S+1],te[S+2])}if(void 0!==x.color)for(S=0,M=(Pe=x.color.array).length;S<M;S+=3)j.pushColor(Pe[S],Pe[S+1],Pe[S+2]);if(void 0!==x.uv){var ne=x.uv.array;for(S=0,M=ne.length;S<M;S+=2)j.pushUv(ne[S],ne[S+1])}if(null!==g.index){var re=g.index.array;if(w.length>0)for(var ie=0;ie<w.length;ie++){var oe=w[ie];if(void 0!==(y=!0===b?m.material[oe.materialIndex]:m.material))for(S=oe.start,M=oe.start+oe.count;S<M;S+=3)j.pushTriangle(re[S],re[S+1],re[S+2],y)}else for(S=0,M=re.length;S<M;S+=3)j.pushTriangle(re[S],re[S+1],re[S+2],y)}else if(w.length>0)for(ie=0;ie<w.length;ie++){oe=w[ie];if(void 0!==(y=!0===b?m.material[oe.materialIndex]:m.material))for(S=oe.start,M=oe.start+oe.count;S<M;S+=3)j.pushTriangle(S,S+1,S+2,y)}else for(S=0,M=Oe.length/3;S<M;S+=3)j.pushTriangle(S,S+1,S+2,y)}else if(g instanceof _){var ae=g.vertices,se=g.faces,ce=g.faceVertexUvs[0];F.getNormalMatrix(f);y=m.material,b=Array.isArray(y);for(var ue=0,le=ae.length;ue<le;ue++){var he=ae[ue];if(C.copy(he),!0===y.morphTargets)for(O=g.morphTargets,N=m.morphTargetInfluences,Z=0,ee=O.length;Z<ee;Z++){var de;if(0!==(de=N[Z])){var fe,pe=(fe=O[Z]).vertices[ue];C.x+=(pe.x-he.x)*de,C.y+=(pe.y-he.y)*de,C.z+=(pe.z-he.z)*de}}j.pushVertex(C.x,C.y,C.z)}for(var me=0,ve=se.length;me<ve;me++){var ge=se[me];if(void 0!==(y=!0===b?m.material[ge.materialIndex]:m.material)){var ye=y.side,be=v[ge.a],xe=v[ge.b],we=v[ge.c];if(!1!==j.checkTriangleVisibility(be,xe,we)){var _e=j.checkBackfaceCulling(be,xe,we);if(ye!==J){if(ye===q&&!1===_e)continue;if(ye===Y&&!0===_e)continue}(i=H()).id=m.id,i.v1.copy(be),i.v2.copy(xe),i.v3.copy(we),i.normalModel.copy(ge.normal),!1!==_e||ye!==Y&&ye!==J||i.normalModel.negate(),i.normalModel.applyMatrix3(F).normalize();for(var Se=ge.vertexNormals,Me=0,Te=Math.min(Se.length,3);Me<Te;Me++){var Ae=i.vertexNormalsModel[Me];Ae.copy(Se[Me]),!1!==_e||ye!==Y&&ye!==J||Ae.negate(),Ae.applyMatrix3(F).normalize()}i.vertexNormalsLength=Se.length;var Ee=ce[me];if(void 0!==Ee)for(var Ce=0;Ce<3;Ce++)i.uvs[Ce].copy(Ee[Ce]);i.color=ge.color,i.material=y,i.z=(be.positionScreen.z+xe.positionScreen.z+we.positionScreen.z)/3,i.renderOrder=m.renderOrder,E.elements.push(i)}}}}}else if(m instanceof pn){if(D.multiplyMatrices(I,f),g instanceof k){if(void 0!==(x=g.attributes).position){for(S=0,M=(Oe=x.position.array).length;S<M;S+=3)j.pushVertex(Oe[S],Oe[S+1],Oe[S+2]);if(void 0!==x.color){var Pe;for(S=0,M=(Pe=x.color.array).length;S<M;S+=3)j.pushColor(Pe[S],Pe[S+1],Pe[S+2])}if(null!==g.index)for(S=0,M=(re=g.index.array).length;S<M;S+=2)j.pushLine(re[S],re[S+1]);else{var Le=m instanceof Eo?2:1;for(S=0,M=Oe.length/3-1;S<M;S+=Le)j.pushLine(S,S+1)}}}else if(g instanceof _){if(0===(ae=m.geometry.vertices).length)continue;(be=W()).positionScreen.copy(ae[0]).applyMatrix4(D);for(Le=m instanceof Eo?2:1,ue=1,le=ae.length;ue<le;ue++)(be=W()).positionScreen.copy(ae[ue]).applyMatrix4(D),(ue+1)%Le>0||(xe=v[r-2],B.copy(be.positionScreen),z.copy(xe.positionScreen),!0===$(B,z)&&(B.multiplyScalar(1/B.w),z.multiplyScalar(1/z.w),(c=X()).id=m.id,c.v1.positionScreen.copy(B),c.v2.positionScreen.copy(z),c.z=Math.max(B.z,z.z),c.renderOrder=m.renderOrder,c.material=m.material,m.material.vertexColors===K&&(c.vertexColors[0].copy(m.geometry.colors[ue]),c.vertexColors[1].copy(m.geometry.colors[ue-1])),E.elements.push(c)))}}else if(m instanceof Gi){if(D.multiplyMatrices(I,f),g instanceof _)for(ue=0,le=(ae=m.geometry.vertices).length;ue<le;ue++){he=ae[ue];P.set(he.x,he.y,he.z,1),P.applyMatrix4(D),G(P,m,n)}else if(g instanceof k){if(void 0!==(x=g.attributes).position){var Oe;for(S=0,M=(Oe=x.position.array).length;S<M;S+=3)P.set(Oe[S],Oe[S+1],Oe[S+2],1),P.applyMatrix4(D),G(P,m,n)}}}else m instanceof wc&&(P.set(f.elements[12],f.elements[13],f.elements[14],1),P.applyMatrix4(I),G(P,m,n))}return!0===s&&E.elements.sort(Q),E}},lh=function(e){cn.call(this),this.type="SpriteCanvasMaterial",this.color=new v(16777215),this.program=function(){},this.setValues(e)};(lh.prototype=Object.create(cn.prototype)).constructor=lh,lh.prototype.isSpriteCanvasMaterial=!0,lh.prototype.clone=function(){var e=new lh;return e.copy(this),e.color.copy(this.color),e.program=this.program,e};var hh=function(e){p.call(this),this.element=e,this.element.style.position="absolute",this.addEventListener("removed",function(e){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element)})};(hh.prototype=Object.create(p.prototype)).constructor=hh;var dh=function(e){p.call(this),this.element=e,this.element.style.position="absolute",this.addEventListener("removed",function(){null!==this.element.parentNode&&this.element.parentNode.removeChild(this.element)})};dh.prototype=Object.create(p.prototype),dh.prototype.constructor=dh;var fh=function(e){dh.call(this,e)};fh.prototype=Object.create(dh.prototype),fh.prototype.constructor=fh;var ph=function(e){console.log("RaytracingRenderer",z),e=e||{};var t,n,r=this,i=[],o=!1,a=document.createElement("canvas"),s=a.getContext("2d",{alpha:!0===e.alpha}),c=new v(0);this.domElement=a,this.autoClear=!0;var u=e.workers,l=e.blockSize||64;this.randomize=e.randomize;var h,d,f,p=[],m=0,g=0;function y(e){e.postMessage({init:[t,n],worker:e.id,blockSize:l})}function b(e){if(!p.length)return o=!1,r.dispatchEvent({type:"complete"});var t=p.pop(),n=t%d*l,i=(t/d|0)*l;e.postMessage({render:!0,x:n,y:i,sceneId:g}),s.fillStyle="#"+e.color,s.fillRect(n,i,l,l)}console.log("%cSpinning off "+u+" Workers ","font-size: 20px; background: black; color: white; font-family: monospace;"),this.setWorkers=function(t){for(u=t||navigator.hardwareConcurrency||4;i.length<u;){var n=new Worker(e.workerPath);n.id=m++,n.onmessage=function(e){var t=e.data;if(t&&t.blockSize&&g==t.sceneId){var n=new ImageData(new Uint8ClampedArray(t.data),t.blockSize,t.blockSize);if(s.putImageData(n,t.blockX,t.blockY),console.log("Worker "+this.id,t.time/1e3,(Date.now()-_)/1e3+" s"),i.length>u)return i.splice(i.indexOf(this),1),this.terminate();b(this)}},n.color=(new v).setHSL(Math.random(),.8,.8).getHexString(),i.push(n),y(n),o&&(n.postMessage({scene:x,camera:w,annex:S,sceneId:g}),b(n))}if(!o)for(;i.length>u;)i.pop().terminate()},this.setWorkers(u),this.setClearColor=function(e){c.set(e)},this.setPixelRatio=function(){},this.setSize=function(e,r){a.width=e,a.height=r,t=a.width,n=a.height,s.fillStyle="white",i.forEach(y)},this.setSize(a.width,a.height),this.clear=function(){};var x,w,_,S={},M={mirror:1,reflectivity:1,refractionRatio:1,glass:1};function T(e){var t=e.material;if(t&&!(t.uuid in S)){var n={};for(var r in M)void 0!==t[r]&&(n[r]=t[r]);S[t.uuid]=n}}this.render=function(e,a){o=!0,!0===e.autoUpdate&&e.updateMatrixWorld(),null===a.parent&&a.updateMatrixWorld(),x=e.toJSON(),w=a.toJSON(),++g,e.traverse(T),i.forEach(function(e){e.postMessage({scene:x,camera:w,annex:S,sceneId:g})}),s.clearRect(0,0,t,n),_=Date.now(),d=Math.ceil(t/l),f=Math.ceil(n/l),h=d*f,p=[];for(var c=0;c<h;c++)p.push(c);if(r.randomize)for(c=0;c<h;c++){var u=Math.random()*h|0,m=p[u];p[u]=p[c],p[c]=m}i.forEach(b)}};Object.assign(ph.prototype,u.prototype);var mh=function(e){console.log("SoftwareRenderer",z);var t,n,r,i,o,a,c,u,l,h,d,f,p,m,g,y,b=void 0!==(e=e||{}).canvas?e.canvas:document.createElement("canvas"),w=b.getContext("2d",{alpha:!0===e.alpha}),_={},M={},T=new v(0),A=!0===e.alpha?0:1,E=1,C=2,P=4,L=(1<<P)-1,O=3,N=1<<O,R=1<<24,I=!1,D=new s(0,0,1),F=new s,k=1/0,U=1/0,B=0,j=0,V=1/0,G=1/0,W=0,H=0,X=new uh,q=new S,Y=new S,J=new S,Q=new x,K=new x,$=new x,ee=[],te=0,ne=[],re=0,ie=[],oe=0,ae=this;function se(){return!0===e.alpha?A:1}function ce(e){for(var r=t*n*4,i=0;i<r;i+=4)f[i]=255*e.r|0,f[i+1]=255*e.g|0,f[i+2]=255*e.b|0,f[i+3]=255*se()|0;w.fillStyle="rgba("+(255*T.r|0)+","+(255*T.g|0)+","+(255*T.b|0)+","+se()+")",w.fillRect(0,0,t,n)}function ue(e,t){var n=0,r=0,i=255*e.color.r,o=255*e.color.g,a=255*e.color.b,s=new Uint8Array(768);if(t){for(;n<204;)s[r++]=Math.min(n*i/204,255),s[r++]=Math.min(n*o/204,255),s[r++]=Math.min(n*a/204,255),++n;for(;n<256;)s[r++]=Math.min(i+(n-204)*(255-i)/82,255),s[r++]=Math.min(o+(n-204)*(255-o)/82,255),s[r++]=Math.min(a+(n-204)*(255-a)/82,255),++n}else for(;n<256;)s[r++]=Math.min(n*i/255,255),s[r++]=Math.min(n*o/255,255),s[r++]=Math.min(n*a/255,255),++n;return s}function le(e,t,n,r,i,o,a,s,c){var u=4*n,l=M[c.map.id];if(l.data){var h=l.width,d=c.transparent,f=h-1,p=l.data,m=4*((o*h&f)*h+(i*h&f));if(d){var v=p[m],g=p[m+1],y=p[m+2],b=p[m+3]*c.opacity/255,x=e[u],w=e[u+1],_=e[u+2];e[u]=v*b+x*(1-b),e[u+1]=g*b+w*(1-b),e[u+2]=y*b+_*(1-b),e[u+3]=(c.opacity<<8)-1,255==e[u+3]&&(t[n]=r)}else e[u]=p[m],e[u+1]=p[m+1],e[u+2]=p[m+2],e[u+3]=(c.opacity<<8)-1,t[n]=r}}function he(e,t,n,r,i,o,a,s,c){var u=4*n,l=M[c.map.id];if(l.data){var h=l.width,d=c.transparent,f=3*(a>0?~~a:0),p=h-1,m=l.data,v=4*((o*h&p)*h+(i*h&p));if(d){var g=c.palette[f]*m[v],y=c.palette[f+1]*m[v+1],b=c.palette[f+2]*m[v+2],x=m[v+3]*c.opacity/256,w=e[u],_=e[u+1],S=e[u+2];e[u]=g*x+w*(1-x),e[u+1]=y*x+_*(1-x),e[u+2]=b*x+S*(1-x),e[u+3]=(c.opacity<<8)-1,255==e[u+3]&&(t[n]=r)}else e[u]=c.palette[f]*m[v]>>8,e[u+1]=c.palette[f+1]*m[v+1]>>8,e[u+2]=c.palette[f+2]*m[v+2]>>8,e[u+3]=(c.opacity<<8)-1,t[n]=r}}function de(e){var t=e.id,n=_[t];if(n&&e.map&&!M[e.map.id]&&delete _[t],void 0===_[t]||!0===e.needsUpdate){if(e instanceof un||e instanceof pr||e instanceof vr||e instanceof Sr)if(e instanceof pr?e.palette||(e.palette=ue(e,!1)):e instanceof vr&&(e.palette||(e.palette=ue(e,!0))),e.map){var r=new mh.Texture;if(r.fromImage(e.map.image),!r.data)return;M[e.map.id]=r,n=e instanceof un||e instanceof Sr?le:he}else i=e.vertexColors===Z?["var colorOffset = offset * 4;","buffer[ colorOffset ] = face.color.r * 255;","buffer[ colorOffset + 1 ] = face.color.g * 255;","buffer[ colorOffset + 2 ] = face.color.b * 255;","buffer[ colorOffset + 3 ] = material.opacity * 255;","depthBuf[ offset ] = depth;"].join("\n"):["var colorOffset = offset * 4;","buffer[ colorOffset ] = material.color.r * 255;","buffer[ colorOffset + 1 ] = material.color.g * 255;","buffer[ colorOffset + 2 ] = material.color.b * 255;","buffer[ colorOffset + 3 ] = material.opacity * 255;","depthBuf[ offset ] = depth;"].join("\n"),n=new Function("buffer, depthBuf, offset, depth, u, v, n, face, material",i);else if(e instanceof ln){var i=["var colorOffset = offset * 4;","buffer[ colorOffset ] = material.color.r * (color1.r+color2.r) * 0.5 * 255;","buffer[ colorOffset + 1 ] = material.color.g * (color1.g+color2.g) * 0.5 * 255;","buffer[ colorOffset + 2 ] = material.color.b * (color1.b+color2.b) * 0.5 * 255;","buffer[ colorOffset + 3 ] = 255;","depthBuf[ offset ] = depth;"].join("\n");n=new Function("buffer, depthBuf, offset, depth, color1, color2, material",i)}else{i=["var colorOffset = offset * 4;","buffer[ colorOffset ] = u * 255;","buffer[ colorOffset + 1 ] = v * 255;","buffer[ colorOffset + 2 ] = 0;","buffer[ colorOffset + 3 ] = 255;","depthBuf[ offset ] = depth;"].join("\n");n=new Function("buffer, depthBuf, offset, depth, u, v, n, face, material",i)}_[t]=n,e.needsUpdate=!1}return n}function fe(e,i,d,m,v,b,w,_,M){if(!(e.z<-1||e.z>1||i.z<-1||i.z>1||d.z<-1||d.z>1)){var T=1<<P,A=e.x*o+u|0,R=i.x*o+u|0,I=d.x*o+u|0,D=e.y*a+l|0,F=i.y*a+l|0,z=d.y*a+l|0,V=_.vertexNormalsModel&&_.vertexNormalsModel.length,G=m&&v&&b,W=Math.max(Math.sqrt((A-R)*(A-R)+(D-F)*(D-F)),Math.sqrt((R-I)*(R-I)+(F-z)*(F-z)),Math.sqrt((I-A)*(I-A)+(z-D)*(z-D)));if(!(_ instanceof ch)&&W>100*T){var H,X,q,Y,J,Q,Z,K,$,ae,se={vertexNormalsModel:[],color:_.color};if(G)oe===ie.length?(H=new x,ie.push(H),++oe,X=new x,ie.push(X),++oe,q=new x,ie.push(q),++oe):(H=ie[oe],X=ie[++oe],q=ie[++oe],++oe),Y=(1+i.z)*(i.w/e.w)/(1+e.z),H.copy(m).multiplyScalar(Y).add(v).multiplyScalar(1/(Y+1)),Y=(1+d.z)*(d.w/i.w)/(1+i.z),X.copy(v).multiplyScalar(Y).add(b).multiplyScalar(1/(Y+1)),Y=(1+e.z)*(e.w/d.w)/(1+d.z),q.copy(b).multiplyScalar(Y).add(m).multiplyScalar(1/(Y+1));return te===ee.length?(J=new S,ee.push(J),++te,Q=new S,ee.push(Q),++te,Z=new S,ee.push(Z),++te):(J=ee[te],Q=ee[++te],Z=ee[++te],++te),J.copy(e).add(i).multiplyScalar(.5),Q.copy(i).add(d).multiplyScalar(.5),Z.copy(d).add(e).multiplyScalar(.5),V&&(re===ne.length?(K=new s,ne.push(K),++re,$=new s,ne.push($),++re,ae=new s,ne.push(ae),++re):(K=ne[re],$=ne[++re],ae=ne[++re],++re),K.copy(_.vertexNormalsModel[0]).add(_.vertexNormalsModel[1]).normalize(),$.copy(_.vertexNormalsModel[1]).add(_.vertexNormalsModel[2]).normalize(),ae.copy(_.vertexNormalsModel[2]).add(_.vertexNormalsModel[0]).normalize()),V&&(se.vertexNormalsModel[0]=_.vertexNormalsModel[0],se.vertexNormalsModel[1]=K,se.vertexNormalsModel[2]=ae),fe(e,J,Z,m,H,q,w,se,M),V&&(se.vertexNormalsModel[0]=_.vertexNormalsModel[1],se.vertexNormalsModel[1]=$,se.vertexNormalsModel[2]=K),fe(i,Q,J,v,X,H,w,se,M),V&&(se.vertexNormalsModel[0]=K,se.vertexNormalsModel[1]=$,se.vertexNormalsModel[2]=ae),fe(J,Q,Z,H,X,q,w,se,M),V&&(se.vertexNormalsModel[0]=_.vertexNormalsModel[2],se.vertexNormalsModel[1]=ae,se.vertexNormalsModel[2]=$),void fe(d,Z,Q,b,q,X,w,se,M)}var ce,ue,le,he,de,pe,ve,ge,ye,be,xe,we,_e=e.z*c+h|0,Se=i.z*c+h|0,Me=d.z*c+h|0;G=!1;m&&v&&b&&(G=!0,ce=m.x,ue=1-m.y,le=v.x,he=1-v.y,de=b.x,pe=1-b.y),V&&(ve=_.vertexNormalsModel[0],ge=_.vertexNormalsModel[1],ye=_.vertexNormalsModel[2],be=255*ve.z,xe=255*ge.z,we=255*ye.z);var Te=A-R,Ae=F-D,Ee=R-I,Ce=z-F,Pe=I-A,Le=D-z,Oe=Math.max(Math.min(A,R,I)+L>>P,0),Ne=Math.min(Math.max(A,R,I)+L>>P,t),Re=Math.max(Math.min(D,F,z)+L>>P,0),Ie=Math.min(Math.max(D,F,z)+L>>P,n);k=Math.min(Oe,k),B=Math.max(Ne,B),U=Math.min(Re,U),j=Math.max(Ie,j);var De=N,Fe=(Oe&=~(De-1))<<P,ke=(Re&=~(De-1))<<P,Ue=Ae*(Fe-A)+Te*(ke-D),Be=Ce*(Fe-R)+Ee*(ke-F),ze=Le*(Fe-I)+Pe*(ke-z);(Ae>0||0==Ae&&Te>0)&&Ue++,(Ce>0||0==Ce&&Ee>0)&&Be++,(Le>0||0==Le&&Pe>0)&&ze++,Ue=Ue-1>>P,Be=Be-1>>P,ze=ze-1>>P;var je,Ve,Ge,We,He,Xe=_e-Se,qe=Me-_e,Ye=1/(Te*Le-Pe*Ae),Je=Ye*(Xe*Le-qe*Ae),Qe=Ye*(Xe*Pe-Te*qe),Ze=_e+(Fe-A)*Je+(ke-D)*Qe|0;if(Je=Je*T|0,Qe=Qe*T|0,G){var Ke=ce-le,$e=de-ce,et=Ye*(Ke*Le-$e*Ae),tt=Ye*(Ke*Pe-Te*$e),nt=ue-he,rt=pe-ue;Ge=ce+(Fe-A)*et+(ke-D)*tt,We=ue+(Fe-A)*(je=Ye*(nt*Le-rt*Ae))+(ke-D)*(Ve=Ye*(nt*Pe-Te*rt)),et*=T,tt*=T,je*=T,Ve*=T}if(V){var it,ot=be-xe,at=we-be,st=Ye*(ot*Le-at*Ae);He=be+(Fe-A)*st+(ke-D)*(it=Ye*(ot*Pe-Te*at)),st*=T,it*=T}var ct=De-1,ut=0,lt=0,ht=0,dt=0,ft=0,pt=0,mt=0,vt=0;Te>=0?lt-=ct*Te:ut-=ct*Te,Ae>=0?lt-=ct*Ae:ut-=ct*Ae,Ee>=0?dt-=ct*Ee:ht-=ct*Ee,Ce>=0?dt-=ct*Ce:ht-=ct*Ce,Pe>=0?pt-=ct*Pe:ft-=ct*Pe,Le>=0?pt-=ct*Le:ft-=ct*Le,Je>=0?vt+=ct*Je:mt+=ct*Je,Qe>=0?vt+=ct*Qe:mt+=ct*Qe;var gt,yt,bt,xt=t-De,wt=Ue,_t=Be,St=ze,Mt=Ze,Tt=-De,At=Tt*Ae,Et=Tt*Ce,Ct=Tt*Le,Pt=Tt*Je;G&&(gt=Tt*et,yt=Tt*je),V&&(bt=Tt*st);for(var Lt=Oe,Ot=Re;Ot<Ie;Ot+=De){for(;Lt>=Oe&&Lt<Ne&&wt>=lt&&_t>=dt&&St>=pt;)Lt+=Tt,wt+=At,_t+=Et,St+=Ct,Mt+=Pt,G&&(Ge+=gt,We+=yt),V&&(He+=bt);for(Tt=-Tt,At=-At,Et=-Et,Ct=-Ct,Pt=-Pt,G&&(gt=-gt,yt=-yt),V&&(bt=-bt);Lt+=Tt,wt+=At,_t+=Et,St+=Ct,Mt+=Pt,G&&(Ge+=gt,We+=yt),V&&(He+=bt),!(Lt<Oe||Lt>=Ne);)if(wt<lt){if(At<0)break}else if(_t<dt){if(Et<0)break}else if(St<pt){if(Ct<0)break}else{var Nt=Lt>>O,Rt=Ot>>O,It=Nt+Rt*r,Dt=Mt+mt;if(!(g[It]<Dt)){var Ft=y[It];Ft&C&&me(Nt,Rt),y[It]=Ft&~(E|C);var kt=Lt+Ot*t;if(wt>=ut&&_t>=ht&&St>=ft){var Ut=Mt+vt;g[It]=Math.min(g[It],Ut);var Bt=wt,zt=_t,jt=Mt;G&&(qt=Ge,Yt=We),V&&(Jt=He);for(var Vt=0;Vt<De;Vt++){var Gt=Bt,Wt=zt,Ht=jt;G&&(Zt=qt,Kt=Yt),V&&($t=Jt);for(var Xt=0;Xt<De;Xt++){(tn=Ht)<p[kt]&&w(f,p,kt,tn,Zt,Kt,$t,_,M),Gt+=Ae,Wt+=Ce,Ht+=Je,G&&(Zt+=et,Kt+=je),V&&($t+=st),kt++}Bt+=Te,zt+=Ee,jt+=Qe,G&&(qt+=tt,Yt+=Ve),V&&(Jt+=it),kt+=xt}}else{Bt=wt,zt=_t;var qt,Yt,Jt,Qt=St;jt=Mt;G&&(qt=Ge,Yt=We),V&&(Jt=He);for(Vt=0;Vt<De;Vt++){Gt=Bt,Wt=zt;var Zt,Kt,$t,en=Qt;Ht=jt;G&&(Zt=qt,Kt=Yt),V&&($t=Jt);for(Xt=0;Xt<De;Xt++){var tn;if((Gt|Wt|en)>=0)(tn=Ht)<p[kt]&&w(f,p,kt,tn,Zt,Kt,$t,_,M);Gt+=Ae,Wt+=Ce,en+=Le,Ht+=Je,G&&(Zt+=et,Kt+=je),V&&($t+=st),kt++}Bt+=Te,zt+=Ee,Qt+=Pe,jt+=Qe,G&&(qt+=tt,Yt+=Ve),V&&(Jt+=it),kt+=xt}}}}wt+=De*Te,_t+=De*Ee,St+=De*Pe,Mt+=De*Qe,G&&(Ge+=De*tt,We+=De*Ve),V&&(He+=De*it)}}}function pe(e,i,s,d,m,v){if(I||(I=!0,N=1<<(O=0),ae.setSize(b.width,b.height)),!(e.z<-1||e.z>1||i.z<-1||i.z>1)){var x=Math.floor(.5*(v.linewidth-1)),w=e.x*o+u|0,_=i.x*o+u|0,S=e.y*a+l|0,M=i.y*a+l|0,T=e.z*c+h|0,A=i.z*c+h|0,R=w-_,z=S-M,V=T-A,G=Math.max(Math.min(w,_)+L>>P,0),W=Math.min(Math.max(w,_)+L>>P,t),H=Math.max(Math.min(S,M)+L>>P,0),X=Math.min(Math.max(S,M)+L>>P,n),q=Math.max(Math.min(T,A)+L>>P,0),Y=Math.max(T,A)+L>>P;k=Math.min(G,k),B=Math.max(W,B),U=Math.min(H,U),j=Math.max(X,j);var J,Q,Z,K,$,ee=Math.sqrt(z*z+R*R),te=R/ee,ne=z/ee,re=V/ee;for(F.set(te,ne,re),F.cross(D),F.normalize();ee>0;){J=(J=_+ee*te)+L>>P,Q=(Q=M+ee*ne)+L>>P,$=A+ee*re+L>>P;for(var ie=-x;ie<=x;++ie)if(Z=Math.floor(J+F.x*ie),K=Math.floor(Q+F.y*ie),!(k>=Z||B<=Z||U>=K||j<=K)){var oe=Z>>O,se=K>>O,ce=oe+se*r;if(!(g[ce]<q)){g[ce]=Math.min(g[ce],Y);var ue=y[ce];ue&C&&me(oe,se),y[ce]=ue&~(E|C);var le=Z+K*t;$<p[le]&&m(f,p,le,$,s,d,v)}}--ee}}}function me(e,n){for(var r=e*N+n*N*t,i=4*r,o=t-N,a=4*o,s=0;s<N;s++){for(var c=0;c<N;c++)p[r++]=R,f[i++]=255*T.r|0,f[i++]=255*T.g|0,f[i++]=255*T.b|0,f[i++]=255*se()|0;r+=o,i+=a}}this.domElement=b,this.autoClear=!0,this.setClearColor=function(e,t){T.set(e),A=t,ce(T)},this.setPixelRatio=function(){},this.setSize=function(e,s){r=Math.floor(e/N),i=Math.floor(s/N);var v=1<<P;o=v*(t=r*N)/2,a=-v*(n=i*N)/2,c=R/2,u=v*t/2+.5,l=v*n/2+.5,h=R/2+.5,b.width=t,b.height=n,d=w.getImageData(0,0,t,n),f=d.data,p=new Int32Array(f.length/4),m=r*i,g=new Int32Array(m),y=new Uint8Array(m);for(var x=0,_=p.length;x<_;x++)p[x]=R;for(x=0;x<m;x++)y[x]=E;ce(T)},this.clear=function(){k=1/0,U=1/0,B=0,j=0,te=0,re=0,oe=0;for(var e=0;e<m;e++)g[e]=R,y[e]=y[e]&E?E:C},this.render=function(e,t){this.clear();var n=e.background;n&&n.isColor&&ce(n);for(var o=X.projectScene(e,t,!1,!1).elements,a=0,s=o.length;a<s;a++){var c=o[a],u=c.material;if(f=de(u))if(c instanceof oh)c.uvs?fe(c.v1.positionScreen,c.v2.positionScreen,c.v3.positionScreen,c.uvs[0],c.uvs[1],c.uvs[2],f,c,u):fe(c.v1.positionScreen,c.v2.positionScreen,c.v3.positionScreen,null,null,null,f,c,u);else if(c instanceof ch){var l=.5*c.scale.x,h=.5*c.scale.y;q.copy(c),q.x-=l,q.y+=h,Y.copy(c),Y.x-=l,Y.y-=h,J.copy(c),J.x+=l,J.y+=h,u.map?(Q.set(0,1),K.set(0,0),$.set(1,1),fe(q,Y,J,Q,K,$,f,c,u)):fe(q,Y,J,null,null,null,f,c,u),q.copy(c),q.x+=l,q.y+=h,Y.copy(c),Y.x-=l,Y.y-=h,J.copy(c),J.x+=l,J.y-=h,u.map?(Q.set(1,1),K.set(0,0),$.set(1,0),fe(q,Y,J,Q,K,$,f,c,u)):fe(q,Y,J,null,null,null,f,c,u)}else if(c instanceof sh){var f=de(u);pe(c.v1.positionScreen,c.v2.positionScreen,c.vertexColors[0],c.vertexColors[1],f,u)}}!function(){for(var e=0,t=0;t<i;t++)for(var n=0;n<r;n++)y[e]&C&&(me(n,t),y[e]=E),e++}();var p=Math.min(k,V),m=Math.min(U,G),v=Math.max(B,W)-p,g=Math.max(j,H)-m;p!==1/0&&w.putImageData(d,0,0,p,m,v,g),V=k,G=U,W=B,H=j}};mh.Texture=function(){var e;this.fromImage=function(t){if(!(!t||t.width<=0||t.height<=0)){void 0===e&&(e=document.createElement("canvas"));var n=t.width>t.height?t.width:t.height;n=o.ceilPowerOfTwo(n),e.width==n&&e.height==n||(e.width=n,e.height=n);var r=e.getContext("2d");r.clearRect(0,0,n,n),r.drawImage(t,0,0,n,n);var i=r.getImageData(0,0,n,n);this.data=i.data,this.width=n,this.height=n,this.srcUrl=t.src}}};var vh=function(e){p.call(this),this.node=e};(vh.prototype=Object.create(p.prototype)).constructor=vh;function gh(){var e=null,t=!1,n=null;function r(i,o){!1!==t&&(n(i,o),e.requestAnimationFrame(r))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(r),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function yh(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);void 0===i?t.set(n,function(t,n){var r=t.array,i=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback();var a=e.FLOAT;return r instanceof Float32Array?a=e.FLOAT:r instanceof Float64Array?console.warn("WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=e.UNSIGNED_SHORT:r instanceof Int16Array?a=e.SHORT:r instanceof Uint32Array?a=e.UNSIGNED_INT:r instanceof Int32Array?a=e.INT:r instanceof Int8Array?a=e.BYTE:r instanceof Uint8Array&&(a=e.UNSIGNED_BYTE),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(n,r)):i.version<n.version&&(function(t,n,r){var i=n.array,o=n.updateRange;e.bindBuffer(r,t),!1===n.dynamic?e.bufferData(r,i,e.STATIC_DRAW):-1===o.count?e.bufferSubData(r,0,i):0===o.count?console.error("WebGLObjects.updateBuffer: dynamic BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(i.buffer,n,r),i.version=n.version)}}}function bh(e,t,n,r){var i,o,a,s=new v(0),c=0;function u(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}return{getClearColor:function(){return s},setClearColor:function(e,t){s.set(e),u(s,c=void 0!==t?t:1)},getClearAlpha:function(){return c},setClearAlpha:function(e){u(s,c=e)},render:function(t,r,l,h){var d=r.background;null===d?u(s,c):d&&d.isColor&&(u(d,1),h=!0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),d&&d.isCubeTexture?(void 0===a&&((a=new fn(new Un(1,1,1),new qn({uniforms:Pi.cube.uniforms,vertexShader:Pi.cube.vertexShader,fragmentShader:Pi.cube.fragmentShader,side:Y,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(a)),a.material.uniforms.tCube.value=d,t.push(a,a.geometry,a.material,0,null)):d&&d.isTexture&&(void 0===i&&(i=new Jn(-1,1,1,-1,0,1),o=new fn(new tr(2,2),new un({depthTest:!1,depthWrite:!1,fog:!1})),n.update(o)),o.material.map=d,e.renderBufferDirect(i,null,o.geometry,o.material,o,null))}}}function xh(e,t,n,r){var i;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(o,a,s){var c;if(r.isWebGL2)c=e;else if(null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("WebGLBufferRenderer: using InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[r.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,a,s,o.maxInstancedCount),n.update(s,i,o.maxInstancedCount)}}function wh(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var c=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),g=l>0,y=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:l,maxTextureSize:h,maxCubemapSize:d,maxAttributes:f,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y}}function _h(){var e=this,t=null,n=0,r=!1,i=!1,o=new Or,a=new d,s={value:null,needsUpdate:!1};function c(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function u(t,n,r,i){var c=null!==t?t.length:0,u=null;if(0!==c){if(u=s.value,!0!==i||null===u){var l=r+4*c,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===u||u.length<l)&&(u=new Float32Array(l));for(var d=0,f=r;d!==c;++d,f+=4)o.copy(t[d]).applyMatrix4(h,a),o.normal.toArray(u,f),u[f+3]=o.constant}s.value=u,s.needsUpdate=!0}return e.numPlanes=c,u}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==n||r;return r=i,t=u(e,o,0),n=e.length,a},this.beginShadows=function(){i=!0,u(null)},this.endShadows=function(){i=!1,c()},this.setState=function(e,o,a,l,h,d){if(!r||null===e||0===e.length||i&&!a)i?u(null):c();else{var f=i?0:n,p=4*f,m=h.clippingState||null;s.value=m,m=u(e,l,p,d);for(var v=0;v!==p;++v)m[v]=t[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=f}}}function Sh(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function Mh(e,t,n){var r={},i={};function o(e){var a=e.target,s=r[a.id];for(var c in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[c]);a.removeEventListener("dispose",o),delete r[a.id];var u=i[s.id];u&&(t.remove(u),delete i[s.id]),n.memory.geometries--}return{get:function(e,t){var i=r[t.id];return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new k).setFromObject(e)),i=t._bufferGeometry),r[t.id]=i,n.memory.geometries++,i)},update:function(n){var r=n.index,i=n.attributes;for(var o in null!==r&&t.update(r,e.ELEMENT_ARRAY_BUFFER),i)t.update(i[o],e.ARRAY_BUFFER);var a=n.morphAttributes;for(var o in a)for(var s=a[o],c=0,u=s.length;c<u;c++)t.update(s[c],e.ARRAY_BUFFER)},getWireframeAttribute:function(n){var r=i[n.id];if(r)return r;var o,a=[],s=n.index,c=n.attributes;if(null!==s)for(var u=0,l=(o=s.array).length;u<l;u+=3){var h=o[u+0],d=o[u+1],f=o[u+2];a.push(h,d,d,f,f,h)}else for(u=0,l=(o=c.position.array).length/3-1;u<l;u+=3)h=u+0,d=u+1,f=u+2,a.push(h,d,d,f,f,h);return r=new(D(a)>65535?O:P)(a,1),t.update(r,e.ELEMENT_ARRAY_BUFFER),i[n.id]=r,r}}}function Th(e,t,n,r){var i,o,a;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i)},this.renderInstances=function(s,c,u){var l;if(r.isWebGL2)l=e;else if(null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("WebGLIndexedBufferRenderer: using InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[r.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,u,o,c*a,s.maxInstancedCount),n.update(u,i,s.maxInstancedCount)}}function Ah(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(i=i||1,t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:t.triangles+=i*(n-2);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("WebGLInfo: Unknown draw mode:",r)}}}}function Eh(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Ch(e){var t={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,c=s.length,u=t[i.id];if(void 0===u){u=[];for(var l=0;l<c;l++)u[l]=[l,0];t[i.id]=u}var h=o.morphTargets&&i.morphAttributes.position,d=o.morphNormals&&i.morphAttributes.normal;for(l=0;l<c;l++)0!==(f=u[l])[1]&&(h&&i.removeAttribute("morphTarget"+l),d&&i.removeAttribute("morphNormal"+l));for(l=0;l<c;l++)(f=u[l])[0]=l,f[1]=s[l];for(u.sort(Eh),l=0;l<8;l++){var f;if(f=u[l]){var p=f[0],m=f[1];if(m){h&&i.addAttribute("morphTarget"+l,h[p]),d&&i.addAttribute("morphNormal"+l,d[p]),n[l]=m;continue}}n[l]=0}a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Ph(e,t){var n={};return{update:function(r){var i=t.render.frame,o=r.geometry,a=e.get(r,o);return n[a.id]!==i&&(o.isGeometry&&a.updateFromObject(r),e.update(a),n[a.id]=i),a},dispose:function(){n={}}}}var Lh=new Kn,Oh=new Xo;function Nh(){this.seq=[],this.map={}}var Rh=[],Ih=[],Dh=new Float32Array(16),Fh=new Float32Array(9),kh=new Float32Array(4);function Uh(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=Rh[i];if(void 0===o&&(o=new Float32Array(i),Rh[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function Bh(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function zh(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function jh(e,t){var n=Ih[t];void 0===n&&(n=new Int32Array(t),Ih[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function Vh(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Gh(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Wh(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Bh(n,t))return;e.uniform2fv(this.addr,t),zh(n,t)}}function Hh(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Bh(n,t))return;e.uniform3fv(this.addr,t),zh(n,t)}}function Xh(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Bh(n,t))return;e.uniform4fv(this.addr,t),zh(n,t)}}function qh(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Bh(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),zh(n,t)}else{if(Bh(n,r))return;kh.set(r),e.uniformMatrix2fv(this.addr,!1,kh),zh(n,r)}}function Yh(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Bh(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),zh(n,t)}else{if(Bh(n,r))return;Fh.set(r),e.uniformMatrix3fv(this.addr,!1,Fh),zh(n,r)}}function Jh(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Bh(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),zh(n,t)}else{if(Bh(n,r))return;Dh.set(r),e.uniformMatrix4fv(this.addr,!1,Dh),zh(n,r)}}function Qh(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||Lh,i)}function Zh(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||Oh,i)}function Kh(e,t){var n=this.cache;Bh(n,t)||(e.uniform2iv(this.addr,t),zh(n,t))}function $h(e,t){var n=this.cache;Bh(n,t)||(e.uniform3iv(this.addr,t),zh(n,t))}function ed(e,t){var n=this.cache;Bh(n,t)||(e.uniform4iv(this.addr,t),zh(n,t))}function td(e,t){var n=this.cache;Bh(n,t)||(e.uniform1fv(this.addr,t),zh(n,t))}function nd(e,t){var n=this.cache;Bh(n,t)||(e.uniform1iv(this.addr,t),zh(n,t))}function rd(e,t){var n=this.cache,r=Uh(t,this.size,2);Bh(n,r)||(e.uniform2fv(this.addr,r),this.updateCache(r))}function id(e,t){var n=this.cache,r=Uh(t,this.size,3);Bh(n,r)||(e.uniform3fv(this.addr,r),this.updateCache(r))}function od(e,t){var n=this.cache,r=Uh(t,this.size,4);Bh(n,r)||(e.uniform4fv(this.addr,r),this.updateCache(r))}function ad(e,t){var n=this.cache,r=Uh(t,this.size,4);Bh(n,r)||(e.uniformMatrix2fv(this.addr,!1,r),this.updateCache(r))}function sd(e,t){var n=this.cache,r=Uh(t,this.size,9);Bh(n,r)||(e.uniformMatrix3fv(this.addr,!1,r),this.updateCache(r))}function cd(e,t){var n=this.cache,r=Uh(t,this.size,16);Bh(n,r)||(e.uniformMatrix4fv(this.addr,!1,r),this.updateCache(r))}function ud(e,t,n){var r=this.cache,i=t.length,o=jh(n,i);!1===Bh(r,o)&&(e.uniform1iv(this.addr,o),zh(r,o));for(var a=0;a!==i;++a)n.setTexture2D(t[a]||Lh,o[a])}function ld(e,t,n){var r=this.cache,i=t.length,o=jh(n,i);!1===Bh(r,o)&&(e.uniform1iv(this.addr,o),zh(r,o));for(var a=0;a!==i;++a)n.setTextureCube(t[a]||Oh,o[a])}function hd(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Vh;case 35664:return Wh;case 35665:return Hh;case 35666:return Xh;case 35674:return qh;case 35675:return Yh;case 35676:return Jh;case 35678:case 36198:return Qh;case 35680:return Zh;case 5124:case 35670:return Gh;case 35667:case 35671:return Kh;case 35668:case 35672:return $h;case 35669:case 35673:return ed}}(t.type)}function dd(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return td;case 35664:return rd;case 35665:return id;case 35666:return od;case 35674:return ad;case 35675:return sd;case 35676:return cd;case 35678:return ud;case 35680:return ld;case 5124:case 35670:return nd;case 35667:case 35671:return Kh;case 35668:case 35672:return $h;case 35669:case 35673:return ed}}(t.type)}function fd(e){this.id=e,Nh.call(this)}dd.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),zh(t,e)},fd.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}};var pd=/([\w\d_]+)(\])?(\[|\.)?/g;function md(e,t){e.seq.push(t),e.map[t.id]=t}function vd(e,t,n){var r=e.name,i=r.length;for(pd.lastIndex=0;;){var o=pd.exec(r),a=pd.lastIndex,s=o[1],c="]"===o[2],u=o[3];if(c&&(s|=0),void 0===u||"["===u&&a+2===i){md(n,void 0===u?new hd(s,e,t):new dd(s,e,t));break}var l=n.map[s];void 0===l&&md(n,l=new fd(s)),n=l}}function gd(e,t,n){Nh.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;++i){var o=e.getActiveUniform(t,i);vd(o,e.getUniformLocation(t,o.name),this)}}function yd(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error("WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),r}gd.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},gd.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},gd.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},gd.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var bd=0;function xd(e){switch(e){case Jt:return["Linear","( value )"];case Qt:return["sRGB","( value )"];case Kt:return["RGBE","( value )"];case $t:return["RGBM","( value, 7.0 )"];case en:return["RGBM","( value, 16.0 )"];case tn:return["RGBD","( value, 256.0 )"];case Zt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function wd(e,t){var n=xd(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function _d(e){return""!==e}function Sd(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Md(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function Td(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(e,t){var n=Ei[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Td(n)})}function Ad(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i})}function Ed(e,t,n,r,i,o,a){var s=e.context,c=r.defines,u=i.vertexShader,l=i.fragmentShader,h="SHADOWMAP_TYPE_BASIC";o.shadowMapType===H?h="SHADOWMAP_TYPE_PCF":o.shadowMapType===X&&(h="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case Ue:case Be:d="ENVMAP_TYPE_CUBE";break;case Ge:case We:d="ENVMAP_TYPE_CUBE_UV";break;case ze:case je:d="ENVMAP_TYPE_EQUIREC";break;case Ve:d="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case Be:case je:f="ENVMAP_MODE_REFRACTION"}switch(r.combine){case Pe:p="ENVMAP_BLENDING_MULTIPLY";break;case Le:p="ENVMAP_BLENDING_MIX";break;case Oe:p="ENVMAP_BLENDING_ADD"}}var m,v,g=e.gammaFactor>0?e.gammaFactor:1,y=a.isWebGL2?"":function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(_d).join("\n")}(r.extensions,o,t),b=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(c),x=s.createProgram();if(r.isRawShaderMaterial?((m=[b].filter(_d).join("\n")).length>0&&(m+="\n"),(v=[y,b].filter(_d).join("\n")).length>0&&(v+="\n")):(m=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,b,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+g,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(_d).join("\n"),v=[y,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,b,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+g,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.envMap?"#define "+f:"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==Ne?"#define TONE_MAPPING":"",o.toneMapping!==Ne?Ei.tonemapping_pars_fragment:"",o.toneMapping!==Ne?function(e,t){var n;switch(t){case Re:n="Linear";break;case Ie:n="Reinhard";break;case De:n="Uncharted2";break;case Fe:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Ei.encodings_pars_fragment:"",o.mapEncoding?wd("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?wd("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?wd("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?function(e,t){var n=xd(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(_d).join("\n")),u=Md(u=Sd(u=Td(u),o),o),l=Md(l=Sd(l=Td(l),o),o),u=Ad(u),l=Ad(l),a.isWebGL2&&!r.isRawShaderMaterial){var w=!1,_=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==u.match(_)&&null!==l.match(_)&&(w=!0,u=u.replace(_,""),l=l.replace(_,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,v=["#version 300 es\n","#define varying in",w?"":"out highp vec4 pc_fragColor;",w?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v}var S=m+u,M=v+l,T=yd(s,s.VERTEX_SHADER,S),A=yd(s,s.FRAGMENT_SHADER,M);s.attachShader(x,T),s.attachShader(x,A),void 0!==r.index0AttributeName?s.bindAttribLocation(x,0,r.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(x,0,"position"),s.linkProgram(x);var E,C,P=s.getProgramInfoLog(x).trim(),L=s.getShaderInfoLog(T).trim(),O=s.getShaderInfoLog(A).trim(),N=!0,R=!0;return!1===s.getProgramParameter(x,s.LINK_STATUS)?(N=!1,console.error("WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(x,s.VALIDATE_STATUS),"gl.getProgramInfoLog",P,L,O)):""!==P?console.warn("WebGLProgram: gl.getProgramInfoLog()",P):""!==L&&""!==O||(R=!1),R&&(this.diagnostics={runnable:N,material:r,programLog:P,vertexShader:{log:L,prefix:m},fragmentShader:{log:O,prefix:v}}),s.deleteShader(T),s.deleteShader(A),this.getUniforms=function(){return void 0===E&&(E=new gd(s,x,e)),E},this.getAttributes=function(){return void 0===C&&(C=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(t,i).name;n[o]=e.getAttribLocation(t,o)}return n}(s,x)),C},this.destroy=function(){s.deleteProgram(x),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=bd++,this.code=n,this.usedTimes=1,this.program=x,this.vertexShader=T,this.fragmentShader=A,this}function Cd(e,t,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function a(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=Jt,n===Jt&&t&&(n=Zt),n}this.getParameters=function(t,r,o,s,c,u,l){var h=i[t.type],d=l.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,i=Math.floor((r-20)/4),o=Math.min(i,t.length);return o<t.length?(console.warn("WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+o+"."),0):o}(l):0,f=n.precision;null!==t.precision&&(f=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("WebGLProgram.getParameters:",t.precision,"not supported, using",f,"instead.");var p=e.getRenderTarget();return{shaderID:h,precision:f,supportsVertexTextures:n.vertexTextures,outputEncoding:a(p?p.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:a(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:a(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===Ge||t.envMap.mapping===We),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:a(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===an,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&d>0,maxBones:d,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:c,numClipIntersection:u,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&l.receiveShadow&&o.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===J,flipSided:t.side===Y,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(var a=0;a<o.length;a++)r.push(n[o[a]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.join()},this.acquireProgram=function(i,o,a,s){for(var c,u=0,l=r.length;u<l;u++){var h=r[u];if(h.code===s){++(c=h).usedTimes;break}}return void 0===c&&(c=new Ed(e,t,s,i,o,a,n),r.push(c)),c},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function Pd(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Ld(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Od(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Nd(){var e={};return{get:function(t,n){var r=t.id+","+n.id,i=e[r];return void 0===i&&(i=new function(){var e=[],t=0,n=[],r=[];return{opaque:n,transparent:r,init:function(){t=0,n.length=0,r.length=0},push:function(i,o,a,s,c){var u=e[t];void 0===u?(u={id:i.id,object:i,geometry:o,material:a,program:a.program,renderOrder:i.renderOrder,z:s,group:c},e[t]=u):(u.id=i.id,u.object=i,u.geometry=o,u.material=a,u.program=a.program,u.renderOrder=i.renderOrder,u.z=s,u.group=c),(!0===a.transparent?r:n).push(u),t++},sort:function(){n.length>1&&n.sort(Ld),r.length>1&&r.sort(Od)}}},e[r]=i),i},dispose:function(){e={}}}}var Rd=0;function Id(){var e=new function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new s,color:new v,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new x};break;case"SpotLight":n={position:new s,direction:new s,color:new v,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new x};break;case"PointLight":n={position:new s,color:new v,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new x,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new s,skyColor:new v,groundColor:new v};break;case"RectAreaLight":n={color:new v,position:new s,halfWidth:new s,halfHeight:new s}}return e[t.id]=n,n}}},t={id:Rd++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new s,r=new a,i=new a;return{setup:function(o,a,s){for(var c=0,u=0,l=0,h=0,d=0,f=0,p=0,m=0,v=s.matrixWorldInverse,g=0,y=o.length;g<y;g++){var b=o[g],x=b.color,w=b.intensity,_=b.distance,S=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)c+=x.r*w,u+=x.g*w,l+=x.b*w;else if(b.isDirectionalLight){if((T=e.get(b)).color.copy(b.color).multiplyScalar(b.intensity),T.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(v),T.shadow=b.castShadow,b.castShadow){var M=b.shadow;T.shadowBias=M.bias,T.shadowRadius=M.radius,T.shadowMapSize=M.mapSize}t.directionalShadowMap[h]=S,t.directionalShadowMatrix[h]=b.shadow.matrix,t.directional[h]=T,h++}else if(b.isSpotLight)(T=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(v),T.color.copy(x).multiplyScalar(w),T.distance=_,T.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),T.direction.sub(n),T.direction.transformDirection(v),T.coneCos=Math.cos(b.angle),T.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),T.decay=0===b.distance?0:b.decay,T.shadow=b.castShadow,b.castShadow&&(M=b.shadow,T.shadowBias=M.bias,T.shadowRadius=M.radius,T.shadowMapSize=M.mapSize),t.spotShadowMap[f]=S,t.spotShadowMatrix[f]=b.shadow.matrix,t.spot[f]=T,f++;else if(b.isRectAreaLight)(T=e.get(b)).color.copy(x).multiplyScalar(w),T.position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(v),i.identity(),r.copy(b.matrixWorld),r.premultiply(v),i.extractRotation(r),T.halfWidth.set(.5*b.width,0,0),T.halfHeight.set(0,.5*b.height,0),T.halfWidth.applyMatrix4(i),T.halfHeight.applyMatrix4(i),t.rectArea[p]=T,p++;else if(b.isPointLight)(T=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),T.position.applyMatrix4(v),T.color.copy(b.color).multiplyScalar(b.intensity),T.distance=b.distance,T.decay=0===b.distance?0:b.decay,T.shadow=b.castShadow,b.castShadow&&(M=b.shadow,T.shadowBias=M.bias,T.shadowRadius=M.radius,T.shadowMapSize=M.mapSize,T.shadowCameraNear=M.camera.near,T.shadowCameraFar=M.camera.far),t.pointShadowMap[d]=S,t.pointShadowMatrix[d]=b.shadow.matrix,t.point[d]=T,d++;else if(b.isHemisphereLight){var T;(T=e.get(b)).direction.setFromMatrixPosition(b.matrixWorld),T.direction.transformDirection(v),T.direction.normalize(),T.skyColor.copy(b.color).multiplyScalar(w),T.groundColor.copy(b.groundColor).multiplyScalar(w),t.hemi[m]=T,m++}}t.ambient[0]=c,t.ambient[1]=u,t.ambient[2]=l,t.directional.length=h,t.spot.length=f,t.rectArea.length=p,t.point.length=d,t.hemi.length=m,t.hash.stateID=t.id,t.hash.directionalLength=h,t.hash.pointLength=d,t.hash.spotLength=f,t.hash.rectAreaLength=p,t.hash.hemiLength=m,t.hash.shadowsLength=a.length},state:t}}function Dd(){var e=new Id,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function Fd(){var e={};return{get:function(t,n){var r;return void 0===e[t.id]?(r=new Dd,e[t.id]={},e[t.id][n.id]=r):void 0===e[t.id][n.id]?(r=new Dd,e[t.id][n.id]=r):r=e[t.id][n.id],r},dispose:function(){e={}}}}function kd(e,t,n){for(var r=new rh,i=new a,o=new x,c=new x(n,n),u=new s,l=new s,h=1,d=2,f=1+(h|d),p=new Array(f),m=new Array(f),v={},g={0:Y,1:q,2:J},y=[new s(1,0,0),new s(-1,0,0),new s(0,0,1),new s(0,0,-1),new s(0,1,0),new s(0,-1,0)],b=[new s(0,1,0),new s(0,1,0),new s(0,1,0),new s(0,1,0),new s(0,0,1),new s(0,0,-1)],w=[new S,new S,new S,new S,new S,new S],_=0;_!==f;++_){var M=0!=(_&h),T=0!=(_&d),A=new dr({depthPacking:rn,morphTargets:M,skinning:T});p[_]=A;var E=new fr({morphTargets:M,skinning:T});m[_]=E}var C=this;function P(t,n,r,i,o,a){var s=t.geometry,c=null,u=p,l=t.customDepthMaterial;if(r&&(u=m,l=t.customDistanceMaterial),l)c=l;else{var f=!1;n.morphTargets&&(s&&s.isBufferGeometry?f=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(f=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("WebGLShadowMap: SkinnedMesh with material.skinning set to false:",t);var y=t.isSkinnedMesh&&n.skinning,b=0;f&&(b|=h),y&&(b|=d),c=u[b]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var x=c.uuid,w=n.uuid,_=v[x];void 0===_&&(_={},v[x]=_);var S=_[w];void 0===S&&(S=c.clone(),_[w]=S),c=S}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=null!=n.shadowSide?n.shadowSide:g[n.side],c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,r&&c.isMeshDistanceMaterial&&(c.referencePosition.copy(i),c.nearDistance=o,c.farDistance=a),c}function L(n,i,o,a){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var s=t.update(n),c=n.material;if(Array.isArray(c))for(var u=s.groups,h=0,d=u.length;h<d;h++){var f=u[h],p=c[f.materialIndex];if(p&&p.visible){var m=P(n,p,a,l,o.near,o.far);e.renderBufferDirect(o,null,s,m,n,f)}}else if(c.visible){m=P(n,c,a,l,o.near,o.far);e.renderBufferDirect(o,null,s,m,n,null)}}for(var v=n.children,g=0,y=v.length;g<y;g++)L(v[g],i,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=H,this.render=function(t,n,a){if(!1!==C.enabled&&(!1!==C.autoUpdate||!1!==C.needsUpdate)&&0!==t.length){var s,h=e.context,d=e.state;d.disable(h.BLEND),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var f=0,p=t.length;f<p;f++){var m=t[f],v=m.shadow,g=m&&m.isPointLight;if(void 0!==v){var x=v.camera;if(o.copy(v.mapSize),o.min(c),g){var _=o.x,S=o.y;w[0].set(2*_,S,_,S),w[1].set(0,S,_,S),w[2].set(3*_,S,_,S),w[3].set(_,S,_,S),w[4].set(3*_,0,_,S),w[5].set(_,0,_,S),o.x*=4,o.y*=2}if(null===v.map){var M={minFilter:Ye,magFilter:Ye,format:pt};v.map=new $n(o.x,o.y,M),v.map.texture.name=m.name+".shadowMap",x.updateProjectionMatrix()}v.isSpotLightShadow&&v.update(m);var T=v.map,A=v.matrix;l.setFromMatrixPosition(m.matrixWorld),x.position.copy(l),g?(s=6,A.makeTranslation(-l.x,-l.y,-l.z)):(s=1,u.setFromMatrixPosition(m.target.matrixWorld),x.lookAt(u),x.updateMatrixWorld(),A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),A.multiply(x.projectionMatrix),A.multiply(x.matrixWorldInverse)),e.setRenderTarget(T),e.clear();for(var E=0;E<s;E++){if(g){u.copy(x.position),u.add(y[E]),x.up.copy(b[E]),x.lookAt(u),x.updateMatrixWorld();var P=w[E];d.viewport(P)}i.multiplyMatrices(x.projectionMatrix,x.matrixWorldInverse),r.setFromMatrix(i),L(n,a,x,g)}}else console.warn("WebGLShadowMap:",m,"has no shadow.")}C.needsUpdate=!1}}}function Ud(e,t,n,r){var i=new function(){var t=!1,n=new S,r=null,i=new S(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?z(e.DEPTH_TEST):j(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case we:e.depthFunc(e.NEVER);break;case _e:e.depthFunc(e.ALWAYS);break;case Se:e.depthFunc(e.LESS);break;case Me:e.depthFunc(e.LEQUAL);break;case Te:e.depthFunc(e.EQUAL);break;case Ae:e.depthFunc(e.GEQUAL);break;case Ee:e.depthFunc(e.GREATER);break;case Ce:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,u=null;return{setTest:function(t){t?z(e.STENCIL_TEST):j(e.STENCIL_TEST)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&c===r||(e.stencilOp(t,n,r),a=t,s=n,c=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,u=null}}},s=e.getParameter(e.MAX_VERTEX_ATTRIBS),c=new Uint8Array(s),u=new Uint8Array(s),l=new Uint8Array(s),h={},d=null,f=null,p=null,m=null,v=null,g=null,y=null,b=null,x=null,w=null,_=!1,M=null,T=null,A=null,E=null,C=null,P=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),L=!1,O=0,N=e.getParameter(e.VERSION);-1!==N.indexOf("WebGL")?(O=parseFloat(/^WebGL\ ([0-9])/.exec(N)[1]),L=O>=1):-1!==N.indexOf("OpenGL ES")&&(O=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(N)[1]),L=O>=2);var R=null,I={},D=new S,F=new S;function k(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var a=0;a<r;a++)e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}var U={};function B(n,i){(c[n]=1,0===u[n]&&(e.enableVertexAttribArray(n),u[n]=1),l[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),l[n]=i)}function z(t){!0!==h[t]&&(e.enable(t),h[t]=!0)}function j(t){!1!==h[t]&&(e.disable(t),h[t]=!1)}function H(t,r,i,o,a,s,c,u){if(t!==$){if(p||(z(e.BLEND),p=!0),t===ie)a=a||r,s=s||i,c=c||o,r===v&&a===b||(e.blendEquationSeparate(n.convert(r),n.convert(a)),v=r,b=a),i===g&&o===y&&s===x&&c===w||(e.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(c)),g=i,y=o,x=s,w=c),m=t,_=null;else if(t!==m||u!==_){if(v===oe&&b===oe||(e.blendEquation(e.FUNC_ADD),v=oe,b=oe),u)switch(t){case ee:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case te:e.blendFunc(e.ONE,e.ONE);break;case ne:e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA);break;case re:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("WebGLState: Invalid blending: ",t)}else switch(t){case ee:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case te:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case ne:e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR);break;case re:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("WebGLState: Invalid blending: ",t)}g=null,y=null,x=null,w=null,m=t,_=u}}else p&&(j(e.BLEND),p=!1)}function X(t){M!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),M=t)}function q(t){t!==V?(z(e.CULL_FACE),t!==T&&(t===G?e.cullFace(e.BACK):t===W?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):j(e.CULL_FACE),T=t}function Q(t,n,r){t?(z(e.POLYGON_OFFSET_FILL),E===n&&C===r||(e.polygonOffset(n,r),E=n,C=r)):j(e.POLYGON_OFFSET_FILL)}function Z(t){void 0===t&&(t=e.TEXTURE0+P-1),R!==t&&(e.activeTexture(t),R=t)}return U[e.TEXTURE_2D]=k(e.TEXTURE_2D,e.TEXTURE_2D,1),U[e.TEXTURE_CUBE_MAP]=k(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),z(e.DEPTH_TEST),o.setFunc(Me),X(!1),q(G),z(e.CULL_FACE),H($),{buffers:{color:i,depth:o,stencil:a},initAttributes:function(){for(var e=0,t=c.length;e<t;e++)c[e]=0},enableAttribute:function(e){B(e,0)},enableAttributeAndDivisor:B,disableUnusedAttributes:function(){for(var t=0,n=u.length;t!==n;++t)u[t]!==c[t]&&(e.disableVertexAttribArray(t),u[t]=0)},enable:z,disable:j,getCompressedTextureFormats:function(){if(null===d&&(d=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)d.push(n[r]);return d},useProgram:function(t){return f!==t&&(e.useProgram(t),f=t,!0)},setBlending:H,setMaterial:function(t,n){t.side===J?j(e.CULL_FACE):z(e.CULL_FACE);var r=t.side===Y;n&&(r=!r),X(r),t.blending===ee&&!1===t.transparent?H($):H(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite),Q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:X,setCullFace:q,setLineWidth:function(t){t!==A&&(L&&e.lineWidth(t),A=t)},setPolygonOffset:Q,setScissorTest:function(t){t?z(e.SCISSOR_TEST):j(e.SCISSOR_TEST)},activeTexture:Z,bindTexture:function(t,n){null===R&&Z();var r=I[R];void 0===r&&(r={type:void 0,texture:void 0},I[R]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||U[t]),r.type=t,r.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("WebGLState:",e)}},scissor:function(t){!1===D.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),D.copy(t))},viewport:function(t){!1===F.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),F.copy(t))},reset:function(){for(var t=0;t<u.length;t++)1===u[t]&&(e.disableVertexAttribArray(t),u[t]=0);h={},d=null,R=null,I={},f=null,m=null,M=null,T=null,i.reset(),o.reset(),a.reset()}}}function Bd(e,t,n,r,i,a,s){var c,u={};function l(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height),r}return e}function h(e){return o.isPowerOfTwo(e.width)&&o.isPowerOfTwo(e.height)}function d(e,t){return e.generateMipmaps&&t&&e.minFilter!==Ye&&e.minFilter!==Ze}function f(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function p(t,n){if(!i.isWebGL2)return t;if(t===e.RGB){if(n===e.FLOAT)return e.RGB32F;if(n===e.HALF_FLOAT)return e.RGB16F;if(n===e.UNSIGNED_BYTE)return e.RGB8}if(t===e.RGBA){if(n===e.FLOAT)return e.RGBA32F;if(n===e.HALF_FLOAT)return e.RGBA16F;if(n===e.UNSIGNED_BYTE)return e.RGBA8}return t}function m(t){return t===Ye||t===Je||t===Qe?e.NEAREST:e.LINEAR}function v(t){var n=t.target;n.removeEventListener("dispose",v),function(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.remove(t)}(n),n.isVideoTexture&&delete u[n.id],s.memory.textures--}function g(t){var n=t.target;n.removeEventListener("dispose",g),function(t){var n=r.get(t),i=r.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}(n),s.memory.textures--}function y(t,m){var g=r.get(t);if(t.isVideoTexture&&function(e){var t=e.id,n=s.render.frame;u[t]!==n&&(u[t]=n,e.update())}(t),t.version>0&&g.__version!==t.version){var y=t.image;if(void 0===y)console.warn("WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==y.complete)return void function(t,r,u){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",v),t.__webglTexture=e.createTexture(),s.memory.textures++);n.activeTexture(e.TEXTURE0+u),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var m=l(r.image,i.maxTextureSize);(function(e){return!i.isWebGL2&&(e.wrapS!==Xe||e.wrapT!==Xe||e.minFilter!==Ye&&e.minFilter!==Ze)})(r)&&!1===h(m)&&(m=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===c&&(c=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),c.width=o.floorPowerOfTwo(e.width),c.height=o.floorPowerOfTwo(e.height),c.getContext("2d").drawImage(e,0,0,c.width,c.height),console.warn("WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+c.width+"x"+c.height),c):e}(m));var g=h(m),y=a.convert(r.format),x=a.convert(r.type),w=p(y,x);b(e.TEXTURE_2D,r,g);var _,S=r.mipmaps;if(r.isDepthTexture){if(w=e.DEPTH_COMPONENT,r.type===at){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");w=e.DEPTH_COMPONENT32F}else i.isWebGL2&&(w=e.DEPTH_COMPONENT16);r.format===yt&&w===e.DEPTH_COMPONENT&&r.type!==rt&&r.type!==ot&&(console.warn("WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=rt,x=a.convert(r.type)),r.format===bt&&(w=e.DEPTH_STENCIL,r.type!==ht&&(console.warn("WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=ht,x=a.convert(r.type))),n.texImage2D(e.TEXTURE_2D,0,w,m.width,m.height,0,y,x,null)}else if(r.isDataTexture)if(S.length>0&&g){for(var M=0,T=S.length;M<T;M++)_=S[M],n.texImage2D(e.TEXTURE_2D,M,w,_.width,_.height,0,y,x,_.data);r.generateMipmaps=!1,t.__maxMipLevel=S.length-1}else n.texImage2D(e.TEXTURE_2D,0,w,m.width,m.height,0,y,x,m.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(var M=0,T=S.length;M<T;M++)_=S[M],r.format!==pt&&r.format!==ft?n.getCompressedTextureFormats().indexOf(y)>-1?n.compressedTexImage2D(e.TEXTURE_2D,M,w,_.width,_.height,0,_.data):console.warn("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,M,w,_.width,_.height,0,y,x,_.data);t.__maxMipLevel=S.length-1}else if(S.length>0&&g){for(var M=0,T=S.length;M<T;M++)_=S[M],n.texImage2D(e.TEXTURE_2D,M,w,y,x,_);r.generateMipmaps=!1,t.__maxMipLevel=S.length-1}else n.texImage2D(e.TEXTURE_2D,0,w,y,x,m),t.__maxMipLevel=0;d(r,g)&&f(e.TEXTURE_2D,r,m.width,m.height);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(g,t,m);console.warn("WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(e.TEXTURE0+m),n.bindTexture(e.TEXTURE_2D,g.__webglTexture)}function b(n,o,s){var c;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,a.convert(o.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,a.convert(o.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,a.convert(o.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,a.convert(o.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),o.wrapS===Xe&&o.wrapT===Xe||console.warn("WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,m(o.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,m(o.minFilter)),o.minFilter!==Ye&&o.minFilter!==Ze&&console.warn("WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to NearestFilter or LinearFilter.")),c=t.get("EXT_texture_filter_anisotropic")){if(o.type===at&&null===t.get("OES_texture_float_linear"))return;if(o.type===st&&null===(i.isWebGL2||t.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function x(t,i,o,s){var c=a.convert(i.texture.format),u=a.convert(i.texture.type),l=p(c,u);n.texImage2D(s,0,l,i.width,i.height,0,c,u,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,o,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function w(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function _(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),y(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===yt)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(n.depthTexture.format!==bt)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),w(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),w(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}this.setTexture2D=y,this.setTextureCube=function(t,o){var c=r.get(t);if(6===t.image.length)if(t.version>0&&c.__version!==t.version){c.__image__webglTextureCube||(t.addEventListener("dispose",v),c.__image__webglTextureCube=e.createTexture(),s.memory.textures++),n.activeTexture(e.TEXTURE0+o),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var u=t&&t.isCompressedTexture,m=t.image[0]&&t.image[0].isDataTexture,g=[],y=0;y<6;y++)g[y]=u||m?m?t.image[y].image:t.image[y]:l(t.image[y],i.maxCubemapSize);var x=g[0],w=h(x),_=a.convert(t.format),S=a.convert(t.type),M=p(_,S);for(b(e.TEXTURE_CUBE_MAP,t,w),y=0;y<6;y++)if(u)for(var T,A=g[y].mipmaps,E=0,C=A.length;E<C;E++)T=A[E],t.format!==pt&&t.format!==ft?n.getCompressedTextureFormats().indexOf(_)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+y,E,M,T.width,T.height,0,T.data):console.warn("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+y,E,M,T.width,T.height,0,_,S,T.data);else m?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+y,0,M,g[y].width,g[y].height,0,_,S,g[y].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+y,0,M,_,S,g[y]);c.__maxMipLevel=u?A.length-1:0,d(t,w)&&f(e.TEXTURE_CUBE_MAP,t,x.width,x.height),c.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+o),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,i){n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)},this.setupRenderTarget=function(t){var i=r.get(t),o=r.get(t.texture);t.addEventListener("dispose",g),o.__webglTexture=e.createTexture(),s.memory.textures++;var a=!0===t.isWebGLRenderTargetCube,c=h(t);if(a){i.__webglFramebuffer=[];for(var u=0;u<6;u++)i.__webglFramebuffer[u]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(a){for(n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),b(e.TEXTURE_CUBE_MAP,t.texture,c),u=0;u<6;u++)x(i.__webglFramebuffer[u],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+u);d(t.texture,c)&&f(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),b(e.TEXTURE_2D,t.texture,c),x(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),d(t.texture,c)&&f(e.TEXTURE_2D,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&_(t)},this.updateRenderTargetMipmap=function(t){var i=t.texture;if(d(i,h(t))){var o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=r.get(i).__webglTexture;n.bindTexture(o,a),f(o,i,t.width,t.height),n.bindTexture(o,null)}}}function zd(e,t,n){return{convert:function(r){var i;if(r===He)return e.REPEAT;if(r===Xe)return e.CLAMP_TO_EDGE;if(r===qe)return e.MIRRORED_REPEAT;if(r===Ye)return e.NEAREST;if(r===Je)return e.NEAREST_MIPMAP_NEAREST;if(r===Qe)return e.NEAREST_MIPMAP_LINEAR;if(r===Ze)return e.LINEAR;if(r===Ke)return e.LINEAR_MIPMAP_NEAREST;if(r===$e)return e.LINEAR_MIPMAP_LINEAR;if(r===et)return e.UNSIGNED_BYTE;if(r===ct)return e.UNSIGNED_SHORT_4_4_4_4;if(r===ut)return e.UNSIGNED_SHORT_5_5_5_1;if(r===lt)return e.UNSIGNED_SHORT_5_6_5;if(r===tt)return e.BYTE;if(r===nt)return e.SHORT;if(r===rt)return e.UNSIGNED_SHORT;if(r===it)return e.INT;if(r===ot)return e.UNSIGNED_INT;if(r===at)return e.FLOAT;if(r===st){if(n.isWebGL2)return e.HALF_FLOAT;if(null!==(i=t.get("OES_texture_half_float")))return i.HALF_FLOAT_OES}if(r===dt)return e.ALPHA;if(r===ft)return e.RGB;if(r===pt)return e.RGBA;if(r===mt)return e.LUMINANCE;if(r===vt)return e.LUMINANCE_ALPHA;if(r===yt)return e.DEPTH_COMPONENT;if(r===bt)return e.DEPTH_STENCIL;if(r===oe)return e.FUNC_ADD;if(r===ae)return e.FUNC_SUBTRACT;if(r===se)return e.FUNC_REVERSE_SUBTRACT;if(r===le)return e.ZERO;if(r===he)return e.ONE;if(r===de)return e.SRC_COLOR;if(r===fe)return e.ONE_MINUS_SRC_COLOR;if(r===pe)return e.SRC_ALPHA;if(r===me)return e.ONE_MINUS_SRC_ALPHA;if(r===ve)return e.DST_ALPHA;if(r===ge)return e.ONE_MINUS_DST_ALPHA;if(r===ye)return e.DST_COLOR;if(r===be)return e.ONE_MINUS_DST_COLOR;if(r===xe)return e.SRC_ALPHA_SATURATE;if((r===xt||r===wt||r===_t||r===St)&&null!==(i=t.get("WEBGL_compressed_texture_s3tc"))){if(r===xt)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===wt)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===_t)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===St)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((r===Mt||r===Tt||r===At||r===Et)&&null!==(i=t.get("WEBGL_compressed_texture_pvrtc"))){if(r===Mt)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===Tt)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===At)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===Et)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(r===Ct&&null!==(i=t.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((r===Pt||r===Lt||r===Ot||r===Nt||r===Rt||r===It||r===Dt||r===Ft||r===kt||r===Ut||r===Bt||r===zt||r===jt||r===Vt)&&null!==(i=t.get("WEBGL_compressed_texture_astc")))return r;if(r===ce||r===ue){if(n.isWebGL2){if(r===ce)return e.MIN;if(r===ue)return e.MAX}if(null!==(i=t.get("EXT_blend_minmax"))){if(r===ce)return i.MIN_EXT;if(r===ue)return i.MAX_EXT}}if(r===ht){if(n.isWebGL2)return e.UNSIGNED_INT_24_8;if(null!==(i=t.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}}}function jd(e){Hn.call(this),this.cameras=e||[]}function Vd(e){var t=this,n=null,r=null,o=null,u=[],l=new a,h=new a,d="stage";void 0!==i&&"VRFrameData"in i&&(r=new i.VRFrameData,i.addEventListener("vrdisplaypresentchange",_,!1));var f=new a,p=new c,m=new s,v=new Hn;v.bounds=new S(0,0,.5,1),v.layers.enable(1);var g=new Hn;g.bounds=new S(.5,0,.5,1),g.layers.enable(2);var y,b,x=new jd([v,g]);function w(){return null!==n&&!0===n.isPresenting}function _(){if(w()){var r=n.getEyeParameters("left"),i=r.renderWidth,o=r.renderHeight;b=e.getPixelRatio(),y=e.getSize(),e.setDrawingBufferSize(2*i,o,1),A.start()}else t.enabled&&e.setDrawingBufferSize(y.width,y.height,b),A.stop()}x.layers.enable(1),x.layers.enable(2);var M=[];function T(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0,i=t.length;n<i;n++){var o=t[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(r===e)return o;r++}}}this.enabled=!1,this.getController=function(e){var t=u[e];return void 0===t&&((t=new oo).matrixAutoUpdate=!1,t.visible=!1,u[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),A.setContext(e)},this.setFrameOfReferenceType=function(e){d=e},this.setPoseTarget=function(e){void 0!==e&&(o=e)},this.getCamera=function(e){var t="stage"===d?1.6:0;if(null===n)return e.position.set(0,t,0),e;if(n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(r),"stage"===d){var i=n.stageParameters;i?l.fromArray(i.sittingToStandingTransform):l.makeTranslation(0,t,0)}var a=r.pose,s=null!==o?o:e;if(s.matrix.copy(l),s.matrix.decompose(s.position,s.quaternion,s.scale),null!==a.orientation&&(p.fromArray(a.orientation),s.quaternion.multiply(p)),null!==a.position&&(p.setFromRotationMatrix(l),m.fromArray(a.position),m.applyQuaternion(p),s.position.add(m)),s.updateMatrixWorld(),!1===n.isPresenting)return e;v.near=e.near,g.near=e.near,v.far=e.far,g.far=e.far,x.matrixWorld.copy(e.matrixWorld),x.matrixWorldInverse.copy(e.matrixWorldInverse),v.matrixWorldInverse.fromArray(r.leftViewMatrix),g.matrixWorldInverse.fromArray(r.rightViewMatrix),h.getInverse(l),"stage"===d&&(v.matrixWorldInverse.multiply(h),g.matrixWorldInverse.multiply(h));var c=s.parent;null!==c&&(f.getInverse(c.matrixWorld),v.matrixWorldInverse.multiply(f),g.matrixWorldInverse.multiply(f)),v.matrixWorld.getInverse(v.matrixWorldInverse),g.matrixWorld.getInverse(g.matrixWorldInverse),v.projectionMatrix.fromArray(r.leftProjectionMatrix),g.projectionMatrix.fromArray(r.rightProjectionMatrix),x.projectionMatrix.copy(v.projectionMatrix);var y=n.getLayers();if(y.length){var b=y[0];null!==b.leftBounds&&4===b.leftBounds.length&&v.bounds.fromArray(b.leftBounds),null!==b.rightBounds&&4===b.rightBounds.length&&g.bounds.fromArray(b.rightBounds)}return function(){for(var e=0;e<u.length;e++){var t=u[e],n=T(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&t.position.set(.2,-.6,-.05),null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(l),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i="Daydream Controller"===n.id?0:1;M[e]!==n.buttons[i].pressed&&(M[e]=n.buttons[i].pressed,!0===M[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),x},this.getStandingMatrix=function(){return l},this.isPresenting=w;var A=new gh;this.setAnimationLoop=function(e){A.setAnimationLoop(e)},this.submitFrame=function(){w()&&n.submitFrame()},this.dispose=function(){void 0!==i&&i.removeEventListener("vrdisplaypresentchange",_)}}function Gd(e){var t=e.context,n=null,r=null,i=null,o="stage",s=null,c=[],u=[];function l(){return null!==r&&null!==i}var h=new Hn;h.layers.enable(1),h.viewport=new S;var d=new Hn;d.layers.enable(2),d.viewport=new S;var f=new jd([h,d]);function p(e){var t=c[u.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function m(){e.setFramebuffer(null),y.stop()}function v(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}f.layers.enable(1),f.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=c[e];return void 0===t&&((t=new oo).matrixAutoUpdate=!1,t.visible=!1,c[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),e instanceof XRDevice&&t.setCompatibleXRDevice(e)},this.setFrameOfReferenceType=function(e){o=e},this.setSession=function(n){null!==(r=n)&&(r.addEventListener("select",p),r.addEventListener("selectstart",p),r.addEventListener("selectend",p),r.addEventListener("end",m),r.baseLayer=new XRWebGLLayer(r,t),r.requestFrameOfReference(o).then(function(t){i=t,e.setFramebuffer(r.baseLayer.framebuffer),y.setContext(r),y.start()}),u=r.getInputSources(),r.addEventListener("inputsourceschange",function(){u=r.getInputSources(),console.log(u)}))},this.getCamera=function(e){if(l()){var t=e.parent,n=f.cameras;v(f,t);for(var r=0;r<n.length;r++)v(n[r],t);e.matrixWorld.copy(f.matrixWorld);for(var i=e.children,o=(r=0,i.length);r<o;r++)i[r].updateMatrixWorld(!0);return f}return e},this.isPresenting=l;var g=null;var y=new gh;y.setAnimationLoop(function(e,t){if(null!==(s=t.getDevicePose(i)))for(var n=r.baseLayer,o=t.views,a=0;a<o.length;a++){var l=o[a],h=n.getViewport(l),d=s.getViewMatrix(l),p=f.cameras[a];p.matrix.fromArray(d).getInverse(p.matrix),p.projectionMatrix.fromArray(l.projectionMatrix),p.viewport.set(h.x,h.y,h.width,h.height),0===a&&(f.matrix.copy(p.matrix),f.projectionMatrix.copy(p.projectionMatrix))}for(a=0;a<c.length;a++){var m=c[a],v=u[a];if(v){var y=t.getInputPose(v,i);if(null!==y){"targetRay"in y?m.matrix.elements=y.targetRay.transformMatrix:"pointerMatrix"in y&&(m.matrix.elements=y.pointerMatrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.visible=!0;continue}}m.visible=!1}g&&g(e)}),this.setAnimationLoop=function(e){g=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("WebXRManager: getStandingMatrix() is no longer needed."),new a},this.submitFrame=function(){}}function Wd(e){console.log("WebGLRenderer",z);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,c=void 0===e.depth||e.depth,u=void 0===e.stencil||e.stencil,l=void 0!==e.antialias&&e.antialias,h=void 0===e.premultipliedAlpha||e.premultipliedAlpha,d=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,f=void 0!==e.powerPreference?e.powerPreference:"default",p=null,m=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Re,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var v,g,y,b,x,w,_,M,T,A,E,C,P,L,O,N,R,I,D=this,F=!1,k=null,U=null,B=null,j=-1,V={geometry:null,program:null,wireframe:!1},G=null,W=null,H=new S,X=new S,q=null,J=0,Q=t.width,Z=t.height,K=1,$=new S(0,0,Q,Z),ee=new S(0,0,Q,Z),te=!1,ne=new rh,re=new _h,ie=!1,oe=!1,ae=new a,se=new s;function ce(){return null===U?K:1}try{var ue={alpha:r,depth:c,stencil:u,antialias:l,premultipliedAlpha:h,preserveDrawingBuffer:d,powerPreference:f};if(t.addEventListener("webglcontextlost",fe,!1),t.addEventListener("webglcontextrestored",pe,!1),null===(v=n||t.getContext("webgl",ue)||t.getContext("experimental-webgl",ue)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===v.getShaderPrecisionFormat&&(v.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("WebGLRenderer: "+e.message)}function le(){g=new Sh(v),(y=new wh(v,g,e)).isWebGL2||(g.get("WEBGL_depth_texture"),g.get("OES_texture_float"),g.get("OES_texture_half_float"),g.get("OES_texture_half_float_linear"),g.get("OES_standard_derivatives"),g.get("OES_element_index_uint"),g.get("ANGLE_instanced_arrays")),g.get("OES_texture_float_linear"),I=new zd(v,g,y),(b=new Ud(v,g,I,y)).scissor(X.copy(ee).multiplyScalar(K)),b.viewport(H.copy($).multiplyScalar(K)),x=new Ah(v),w=new Pd,_=new Bd(v,g,b,w,y,I,x),M=new yh(v),T=new Mh(v,M,x),A=new Ph(T,x),O=new Ch(v),E=new Cd(D,g,y),C=new Nd,P=new Fd,L=new bh(D,b,A,h),N=new xh(v,g,x,y),R=new Th(v,g,x,y),x.programs=E.programs,D.context=v,D.capabilities=y,D.extensions=g,D.properties=w,D.renderLists=C,D.state=b,D.info=x}le();var he="xr"in navigator?new Gd(D):new Vd(D);this.vr=he;var de=new kd(D,A,y.maxTextureSize);function fe(e){e.preventDefault(),console.log("WebGLRenderer: Context Lost."),F=!0}function pe(){console.log("WebGLRenderer: Context Restored."),F=!1,le()}function me(e){var t=e.target;t.removeEventListener("dispose",me),function(e){ve(e),w.remove(e)}(t)}function ve(e){var t=w.get(e).program;e.program=void 0,void 0!==t&&E.releaseProgram(t)}this.shadowMap=de,this.getContext=function(){return v},this.getContextAttributes=function(){return v.getContextAttributes()},this.forceContextLoss=function(){var e=g.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=g.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(e){void 0!==e&&(K=e,this.setSize(Q,Z,!1))},this.getSize=function(){return{width:Q,height:Z}},this.setSize=function(e,n,r){he.isPresenting()?console.warn("WebGLRenderer: Can't change size while VR device is presenting."):(Q=e,Z=n,t.width=e*K,t.height=n*K,!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(){return{width:Q*K,height:Z*K}},this.setDrawingBufferSize=function(e,n,r){Q=e,Z=n,K=r,t.width=e*r,t.height=n*r,this.setViewport(0,0,e,n)},this.getCurrentViewport=function(){return H},this.setViewport=function(e,t,n,r){$.set(e,Z-t-r,n,r),b.viewport(H.copy($).multiplyScalar(K))},this.setScissor=function(e,t,n,r){ee.set(e,Z-t-r,n,r),b.scissor(X.copy(ee).multiplyScalar(K))},this.setScissorTest=function(e){b.setScissorTest(te=e)},this.getClearColor=function(){return L.getClearColor()},this.setClearColor=function(){L.setClearColor.apply(L,arguments)},this.getClearAlpha=function(){return L.getClearAlpha()},this.setClearAlpha=function(){L.setClearAlpha.apply(L,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=v.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=v.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=v.STENCIL_BUFFER_BIT),v.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.dispose=function(){t.removeEventListener("webglcontextlost",fe,!1),t.removeEventListener("webglcontextrestored",pe,!1),C.dispose(),P.dispose(),w.dispose(),A.dispose(),he.dispose(),ye.stop()},this.renderBufferImmediate=function(e,t){b.initAttributes();var n=w.get(e);e.hasPositions&&!n.position&&(n.position=v.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=v.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=v.createBuffer()),e.hasColors&&!n.color&&(n.color=v.createBuffer());var r=t.getAttributes();e.hasPositions&&(v.bindBuffer(v.ARRAY_BUFFER,n.position),v.bufferData(v.ARRAY_BUFFER,e.positionArray,v.DYNAMIC_DRAW),b.enableAttribute(r.position),v.vertexAttribPointer(r.position,3,v.FLOAT,!1,0,0)),e.hasNormals&&(v.bindBuffer(v.ARRAY_BUFFER,n.normal),v.bufferData(v.ARRAY_BUFFER,e.normalArray,v.DYNAMIC_DRAW),b.enableAttribute(r.normal),v.vertexAttribPointer(r.normal,3,v.FLOAT,!1,0,0)),e.hasUvs&&(v.bindBuffer(v.ARRAY_BUFFER,n.uv),v.bufferData(v.ARRAY_BUFFER,e.uvArray,v.DYNAMIC_DRAW),b.enableAttribute(r.uv),v.vertexAttribPointer(r.uv,2,v.FLOAT,!1,0,0)),e.hasColors&&(v.bindBuffer(v.ARRAY_BUFFER,n.color),v.bufferData(v.ARRAY_BUFFER,e.colorArray,v.DYNAMIC_DRAW),b.enableAttribute(r.color),v.vertexAttribPointer(r.color,3,v.FLOAT,!1,0,0)),b.disableUnusedAttributes(),v.drawArrays(v.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){var a=i.isMesh&&i.normalMatrix.determinant()<0;b.setMaterial(r,a);var s=_e(e,t,r,i),c=!1;V.geometry===n.id&&V.program===s.id&&V.wireframe===(!0===r.wireframe)||(V.geometry=n.id,V.program=s.id,V.wireframe=!0===r.wireframe,c=!0),i.morphTargetInfluences&&(O.update(i,n,r,s),c=!0);var u,l=n.index,h=n.attributes.position,d=1;!0===r.wireframe&&(l=T.getWireframeAttribute(n),d=2);var f=N;null!==l&&(u=M.get(l),(f=R).setIndex(u)),c&&(!function(e,t,n){if(n&&n.isInstancedBufferGeometry&!y.isWebGL2&&null===g.get("ANGLE_instanced_arrays"))return void console.error("WebGLRenderer.setupVertexAttributes: using InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");b.initAttributes();var r=n.attributes,i=t.getAttributes(),o=e.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var c=r[a];if(void 0!==c){var u=c.normalized,l=c.itemSize,h=M.get(c);if(void 0===h)continue;var d=h.buffer,f=h.type,p=h.bytesPerElement;if(c.isInterleavedBufferAttribute){var m=c.data,x=m.stride,w=c.offset;m&&m.isInstancedInterleavedBuffer?(b.enableAttributeAndDivisor(s,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):b.enableAttribute(s),v.bindBuffer(v.ARRAY_BUFFER,d),v.vertexAttribPointer(s,l,f,u,x*p,w*p)}else c.isInstancedBufferAttribute?(b.enableAttributeAndDivisor(s,c.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=c.meshPerAttribute*c.count)):b.enableAttribute(s),v.bindBuffer(v.ARRAY_BUFFER,d),v.vertexAttribPointer(s,l,f,u,0,0)}else if(void 0!==o){var _=o[a];if(void 0!==_)switch(_.length){case 2:v.vertexAttrib2fv(s,_);break;case 3:v.vertexAttrib3fv(s,_);break;case 4:v.vertexAttrib4fv(s,_);break;default:v.vertexAttrib1fv(s,_)}}}}b.disableUnusedAttributes()}(r,s,n),null!==l&&v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,u.buffer));var p=1/0;null!==l?p=l.count:void 0!==h&&(p=h.count);var m=n.drawRange.start*d,x=n.drawRange.count*d,w=null!==o?o.start*d:0,_=null!==o?o.count*d:1/0,S=Math.max(m,w),A=Math.min(p,m+x,w+_)-1,E=Math.max(0,A-S+1);if(0!==E){if(i.isMesh)if(!0===r.wireframe)b.setLineWidth(r.wireframeLinewidth*ce()),f.setMode(v.LINES);else switch(i.drawMode){case Xt:f.setMode(v.TRIANGLES);break;case qt:f.setMode(v.TRIANGLE_STRIP);break;case Yt:f.setMode(v.TRIANGLE_FAN)}else if(i.isLine){var C=r.linewidth;void 0===C&&(C=1),b.setLineWidth(C*ce()),i.isLineSegments?f.setMode(v.LINES):i.isLineLoop?f.setMode(v.LINE_LOOP):f.setMode(v.LINE_STRIP)}else i.isPoints?f.setMode(v.POINTS):i.isSprite&&f.setMode(v.TRIANGLES);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&f.renderInstances(n,S,E):f.render(S,E)}},this.compile=function(e,t){(m=P.get(e,t)).init(),e.traverse(function(e){e.isLight&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))}),m.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)we(t.material[n],e.fog,t);else we(t.material,e.fog,t)})};var ge=null;var ye=new gh;function be(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,c=a.geometry,u=void 0===r?a.material:r,l=a.group;if(n.isArrayCamera){W=n;for(var h=n.cameras,d=0,f=h.length;d<f;d++){var p=h[d];if(s.layers.test(p.layers)){if("viewport"in p)b.viewport(H.copy(p.viewport));else{var v=p.bounds,g=v.x*Q,y=v.y*Z,x=v.z*Q,w=v.w*Z;b.viewport(H.set(g,y,x,w).multiplyScalar(K))}m.setupLights(p),xe(s,t,p,c,u,l)}}}else W=null,xe(s,t,n,c,u,l)}}function xe(e,t,n,r,i,o){if(e.onBeforeRender(D,t,n,r,i,o),m=P.get(t,W||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){b.setMaterial(i);var a=_e(n,t.fog,i,e);V.geometry=null,V.program=null,V.wireframe=!1,function(e,t){e.render(function(e){D.renderBufferImmediate(e,t)})}(e,a)}else D.renderBufferDirect(n,t.fog,r,i,e,o);e.onAfterRender(D,t,n,r,i,o),m=P.get(t,W||n)}function we(e,t,n){var r=w.get(e),i=m.state.lights,o=m.state.shadowsArray,a=r.lightsHash,s=i.state.hash,c=E.getParameters(e,i.state,o,t,re.numPlanes,re.numIntersection,n),u=E.getProgramCode(e,c),l=r.program,h=!0;if(void 0===l)e.addEventListener("dispose",me);else if(l.code!==u)ve(e);else if(a.stateID!==s.stateID||a.directionalLength!==s.directionalLength||a.pointLength!==s.pointLength||a.spotLength!==s.spotLength||a.rectAreaLength!==s.rectAreaLength||a.hemiLength!==s.hemiLength||a.shadowsLength!==s.shadowsLength)a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,h=!1;else{if(void 0!==c.shaderID)return;h=!1}if(h){if(c.shaderID){var d=Pi[c.shaderID];r.shader={name:e.type,uniforms:Xn.clone(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,D),u=E.getProgramCode(e,c),l=E.acquireProgram(e,r.shader,c,u),r.program=l,e.program=l}var f=l.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var p=0;p<D.maxMorphTargets;p++)f["morphTarget"+p]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(p=0;p<D.maxMorphNormals;p++)f["morphNormal"+p]>=0&&e.numSupportedMorphNormals++}var v=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=re.numPlanes,r.numIntersection=re.numIntersection,v.clippingPlanes=re.uniform),r.fog=t,void 0===a&&(r.lightsHash=a={}),a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,e.lights&&(v.ambientLightColor.value=i.state.ambient,v.directionalLights.value=i.state.directional,v.spotLights.value=i.state.spot,v.rectAreaLights.value=i.state.rectArea,v.pointLights.value=i.state.point,v.hemisphereLights.value=i.state.hemi,v.directionalShadowMap.value=i.state.directionalShadowMap,v.directionalShadowMatrix.value=i.state.directionalShadowMatrix,v.spotShadowMap.value=i.state.spotShadowMap,v.spotShadowMatrix.value=i.state.spotShadowMatrix,v.pointShadowMap.value=i.state.pointShadowMap,v.pointShadowMatrix.value=i.state.pointShadowMatrix);var g=r.program.getUniforms(),y=gd.seqWithValue(g.seq,v);r.uniformsList=y}function _e(e,t,n,r){J=0;var i=w.get(n),a=m.state.lights,s=i.lightsHash,c=a.state.hash;if(ie&&(oe||e!==G)){var u=e===G&&n.id===j;re.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,u)}!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:(!n.lights||s.stateID===c.stateID&&s.directionalLength===c.directionalLength&&s.pointLength===c.pointLength&&s.spotLength===c.spotLength&&s.rectAreaLength===c.rectAreaLength&&s.hemiLength===c.hemiLength&&s.shadowsLength===c.shadowsLength)&&(void 0===i.numClippingPlanes||i.numClippingPlanes===re.numPlanes&&i.numIntersection===re.numIntersection)||(n.needsUpdate=!0)),n.needsUpdate&&(we(n,t,r),n.needsUpdate=!1);var l=!1,h=!1,d=!1,f=i.program,p=f.getUniforms(),g=i.shader.uniforms;if(b.useProgram(f.program)&&(l=!0,h=!0,d=!0),n.id!==j&&(j=n.id,h=!0),l||G!==e){if(p.setValue(v,"projectionMatrix",e.projectionMatrix),y.logarithmicDepthBuffer&&p.setValue(v,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),G!==e&&(G=e,h=!0,d=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var x=p.map.cameraPosition;void 0!==x&&x.setValue(v,se.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&p.setValue(v,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){p.setOptional(v,r,"bindMatrix"),p.setOptional(v,r,"bindMatrixInverse");var _=r.skeleton;if(_){var S=_.bones;if(y.floatVertexTextures){if(void 0===_.boneTexture){var M=Math.sqrt(4*S.length);M=o.ceilPowerOfTwo(M),M=Math.max(M,4);var T=new Float32Array(M*M*4);T.set(_.boneMatrices);var A=new Vi(T,M,M,pt,at);A.needsUpdate=!0,_.boneMatrices=T,_.boneTexture=A,_.boneTextureSize=M}p.setValue(v,"boneTexture",_.boneTexture),p.setValue(v,"boneTextureSize",_.boneTextureSize)}else p.setOptional(v,_,"boneMatrices")}}return h&&(p.setValue(v,"toneMappingExposure",D.toneMappingExposure),p.setValue(v,"toneMappingWhitePoint",D.toneMappingWhitePoint),n.lights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(g,d),t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(g,t),n.isMeshBasicMaterial?Se(g,n):n.isMeshLambertMaterial?(Se(g,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(g,n)):n.isMeshPhongMaterial?(Se(g,n),n.isMeshToonMaterial?function(e,t){Me(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(g,n):Me(g,n)):n.isMeshStandardMaterial?(Se(g,n),n.isMeshPhysicalMaterial?function(e,t){Te(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(g,n):Te(g,n)):n.isMeshDepthMaterial?(Se(g,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(g,n)):n.isMeshDistanceMaterial?(Se(g,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(g,n)):n.isMeshNormalMaterial?(Se(g,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Y&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Y&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(g,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(g,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(g,n)):n.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*K,e.scale.value=.5*Z,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(g,n):n.isSpriteMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(g,n):n.isShadowMaterial&&(g.color.value=n.color,g.opacity.value=n.opacity),void 0!==g.ltc_1&&(g.ltc_1.value=Ci.LTC_1),void 0!==g.ltc_2&&(g.ltc_2.value=Ci.LTC_2),gd.upload(v,i.uniformsList,g,D)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(gd.upload(v,i.uniformsList,g,D),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&p.setValue(v,"center",r.center),p.setValue(v,"modelViewMatrix",r.modelViewMatrix),p.setValue(v,"normalMatrix",r.normalMatrix),p.setValue(v,"modelMatrix",r.matrixWorld),f}function Se(e,t){var n;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=w.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function Me(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Y&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Y&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Te(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Y&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Y&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}ye.setAnimationLoop(function(e){he.isPresenting()||ge&&ge(e)}),void 0!==i&&ye.setContext(i),this.setAnimationLoop=function(e){ge=e,he.setAnimationLoop(e),ye.start()},this.render=function(e,t,n,r){if(t&&t.isCamera){if(!F){V.geometry=null,V.program=null,V.wireframe=!1,j=-1,G=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),he.enabled&&(t=he.getCamera(t)),(m=P.get(e,t)).init(),e.onBeforeRender(D,e,t,n),ae.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ne.setFromMatrix(ae),oe=this.localClippingEnabled,ie=re.init(this.clippingPlanes,oe,t),(p=C.get(e,t)).init(),function e(t,n,r){if(!1===t.visible)return;var i=t.layers.test(n.layers);if(i)if(t.isLight)m.pushLight(t),t.castShadow&&m.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||ne.intersectsSprite(t)){r&&se.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ae);var o=A.update(t),a=t.material;p.push(t,o,a,se.z,null)}}else if(t.isImmediateRenderObject)r&&se.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ae),p.push(t,null,t.material,se.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||ne.intersectsObject(t))){r&&se.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ae);var o=A.update(t),a=t.material;if(Array.isArray(a))for(var s=o.groups,c=0,u=s.length;c<u;c++){var l=s[c],h=a[l.materialIndex];h&&h.visible&&p.push(t,o,h,se.z,l)}else a.visible&&p.push(t,o,a,se.z,null)}var d=t.children;for(var c=0,u=d.length;c<u;c++)e(d[c],n,r)}(e,t,D.sortObjects),!0===D.sortObjects&&p.sort(),ie&&re.beginShadows();var i=m.state.shadowsArray;de.render(i,e,t),m.setupLights(t),ie&&re.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),L.render(p,e,t,r);var o=p.opaque,a=p.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&be(o,e,t,s),a.length&&be(a,e,t,s)}else o.length&&be(o,e,t),a.length&&be(a,e,t);n&&_.updateRenderTargetMipmap(n),b.buffers.depth.setTest(!0),b.buffers.depth.setMask(!0),b.buffers.color.setMask(!0),b.setPolygonOffset(!1),e.onAfterRender(D,e,t),he.enabled&&he.submitFrame(),p=null,m=null}}else console.error("WebGLRenderer.render: camera is not an instance of Camera.")},this.allocTextureUnit=function(){var e=J;return e>=y.maxTextures&&console.warn("WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+y.maxTextures),J+=1,e},this.setTexture2D=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTarget&&(e||(console.warn("WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),_.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),_.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?_.setTextureCube(t,n):_.setTextureCubeDynamic(t,n)}}(),this.setFramebuffer=function(e){k=e},this.getRenderTarget=function(){return U},this.setRenderTarget=function(e){U=e,e&&void 0===w.get(e).__webglFramebuffer&&_.setupRenderTarget(e);var t=k,n=!1;if(e){var r=w.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=r[e.activeCubeFace],n=!0):t=r,H.copy(e.viewport),X.copy(e.scissor),q=e.scissorTest}else H.copy($).multiplyScalar(K),X.copy(ee).multiplyScalar(K),q=te;if(B!==t&&(v.bindFramebuffer(v.FRAMEBUFFER,t),B=t),b.viewport(H),b.scissor(X),b.setScissorTest(q),n){var i=w.get(e.texture);v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,i,o){if(e&&e.isWebGLRenderTarget){var a=w.get(e).__webglFramebuffer;if(a){var s=!1;a!==B&&(v.bindFramebuffer(v.FRAMEBUFFER,a),s=!0);try{var c=e.texture,u=c.format,l=c.type;if(u!==pt&&I.convert(u)!==v.getParameter(v.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(l===et||I.convert(l)===v.getParameter(v.IMPLEMENTATION_COLOR_READ_TYPE)||l===at&&(y.isWebGL2||g.get("OES_texture_float")||g.get("WEBGL_color_buffer_float"))||l===st&&(y.isWebGL2?g.get("EXT_color_buffer_float"):g.get("EXT_color_buffer_half_float"))))return void console.error("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");v.checkFramebufferStatus(v.FRAMEBUFFER)===v.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&v.readPixels(t,n,r,i,I.convert(u),I.convert(l),o):console.error("WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&v.bindFramebuffer(v.FRAMEBUFFER,B)}}}else console.error("WebGLRenderer.readRenderTargetPixels: renderTarget is not WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var r=t.image.width,i=t.image.height,o=I.convert(t.format);this.setTexture2D(t,0),v.copyTexImage2D(v.TEXTURE_2D,n||0,o,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,o=t.image.height,a=I.convert(n.format),s=I.convert(n.type);this.setTexture2D(n,0),t.isDataTexture?v.texSubImage2D(v.TEXTURE_2D,r||0,e.x,e.y,i,o,a,s,t.image.data):v.texSubImage2D(v.TEXTURE_2D,r||0,e.x,e.y,a,s,t.image)}}function Hd(e){"string"==typeof e&&(console.warn("Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}jd.prototype=Object.assign(Object.create(Hn.prototype),{constructor:jd,isArrayCamera:!0}),Hd.prototype.clone=function(){return new Hd(void 0===this.value.clone?this.value:this.value.clone())};var Xd={uniforms:{tDiffuse:{value:null},resolution:{value:new x(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","","","","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","","#if (FXAA_PC == 1)","","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immediates.","    // Immediates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","","                    }","                    #endif","","                }","                #endif","","            }","            #endif","","        }","        #endif","","    }","    #endif","","                        }","                        #endif","","                    }","                    #endif","","                }","                #endif","","            }","            #endif","","        }","        #endif","","    }","","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n")},qd={packVector3:["float vec3_to_float( vec3 data ) {","\tconst float unit = 255.0/256.0;","\thighp float compressed = fract( data.x * unit ) + floor( data.y * unit * 255.0 ) + floor( data.z * unit * 255.0 ) * 255.0;","\treturn compressed;","}"].join("\n"),unpackFloat:["vec3 float_to_vec3( float data ) {","\tconst float unit = 255.0;","\tvec3 uncompressed;","\tuncompressed.x = fract( data );","\tfloat zInt = floor( data / unit );","\tuncompressed.z = fract( zInt / unit );","\tuncompressed.y = fract( floor( data - ( zInt * unit ) ) / unit );","\treturn uncompressed;","}"].join("\n"),packNormal:["vec2 normal_to_vec2( vec3 normal ) {","\treturn normal.xy / sqrt( normal.z * 8.0 + 8.0 ) + 0.5;","}"].join("\n"),unpackVector2:["vec3 vec2_to_normal( vec2 data ) {","\tvec2 fenc = data * 4.0 - 2.0;","\tfloat f = dot( fenc, fenc );","\tfloat g = sqrt( 1.0 - f / 4.0 );","\tvec3 normal;","\tnormal.xy = fenc * g;","\tnormal.z = 1.0 - f / 2.0;","\treturn normal;","}"].join("\n"),computeTextureCoord:["vec2 texCoord = gl_FragCoord.xy / vec2( viewWidth, viewHeight );"].join("\n"),packNormalDepth:["vec4 packedNormalDepth;","packedNormalDepth.xyz = normal * 0.5 + 0.5;","packedNormalDepth.w = position.z / position.w;"].join("\n"),unpackNormalDepth:["vec4 normalDepthMap = texture2D( samplerNormalDepth, texCoord );","float depth = normalDepthMap.w;","if ( depth == 0.0 ) discard;","vec3 normal = normalDepthMap.xyz * 2.0 - 1.0;"].join("\n"),packNormalDepthShininess:["vec4 packedNormalDepthShininess;","packedNormalDepthShininess.xy = normal_to_vec2( normal );","packedNormalDepthShininess.z = shininess;","packedNormalDepthShininess.w = position.z / position.w;"].join("\n"),unpackNormalDepthShininess:["vec4 normalDepthMap = texture2D( samplerNormalDepthShininess, texCoord );","float depth = normalDepthMap.w;","if ( depth == 0.0 ) discard;","vec3 normal = vec2_to_normal( normalDepthMap.xy );","float shininess = normalDepthMap.z;"].join("\n"),packColor:["vec4 packedColor;","packedColor.x = vec3_to_float( diffuseColor.rgb );","packedColor.y = vec3_to_float( emissiveColor );","packedColor.z = vec3_to_float( specularColor );","packedColor.w = shininess;"].join("\n"),unpackColor:["vec4 colorMap = texture2D( samplerColor, texCoord );","vec3 diffuseColor = float_to_vec3( colorMap.x );","vec3 emissiveColor = float_to_vec3( colorMap.y );","vec3 specularColor = float_to_vec3( colorMap.z );","float shininess = colorMap.w;"].join("\n"),packLight:["vec4 packedLight;","packedLight.xyz = lightIntensity * lightColor * max( dot( lightVector, normal ), 0.0 ) * attenuation;","packedLight.w = lightIntensity * specular * max( dot( lightVector, normal ), 0.0 ) * attenuation;"].join("\n"),computeVertexPositionVS:["vec2 xy = texCoord * 2.0 - 1.0;","vec4 vertexPositionProjected = vec4( xy, depth, 1.0 );","vec4 vertexPositionVS = matProjInverse * vertexPositionProjected;","vertexPositionVS.xyz /= vertexPositionVS.w;","vertexPositionVS.w = 1.0;"].join("\n"),computeSpecular:["vec3 halfVector = normalize( lightVector - normalize( vertexPositionVS.xyz ) );","float dotNormalHalf = max( dot( normal, halfVector ), 0.0 );","float specular = 0.31830988618 * ( shininess * 0.5 + 1.0 ) * pow( dotNormalHalf, shininess );"].join("\n"),combine:["gl_FragColor = vec4( lightIntensity * lightColor * max( dot( lightVector, normal ), 0.0 ) * ( diffuseColor + specular * specularColor ) * attenuation, 1.0 );"].join("\n")},Yd={commonUniforms:{matProjInverse:new Hd(new a),viewWidth:new Hd(800),viewHeight:new Hd(600)}},Jd={normalDepth:{uniforms:{},vertexShader:["varying vec3 vNormal;","varying vec4 vPosition;","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","void main() {","#include <begin_vertex>","#include <beginnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#include <morphtarget_vertex>","#include <skinning_vertex>","#include <project_vertex>","\tvNormal = normalize( transformedNormal );","\tvPosition = gl_Position;","}"].join("\n"),fragmentShader:["varying vec3 vNormal;","varying vec4 vPosition;","void main() {","\tvec3 normal = vNormal;","\tvec4 position = vPosition;",qd.packNormalDepth,"\tgl_FragColor = packedNormalDepth;","}"].join("\n")},color:{uniforms:{map:new Hd(null),offsetRepeat:new Hd(new S(0,0,1,1)),diffuse:new Hd(new v(0)),emissive:new Hd(new v(0)),specular:new Hd(new v(0)),shininess:new Hd(30)},vertexShader:["#include <uv_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","void main() {","#include <uv_vertex>","#include <begin_vertex>","#include <beginnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#include <morphtarget_vertex>","#include <skinning_vertex>","#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;","#include <uv_pars_fragment>","#include <map_pars_fragment>",qd.packVector3,"void main() {","\tvec4 diffuseColor = vec4( diffuse, 1.0 );","\tvec3 emissiveColor = emissive;","\tvec3 specularColor = specular;","#include <map_fragment>",qd.packColor,"\tgl_FragColor = packedColor;","}"].join("\n")},emissiveLight:{uniforms:Object.assign({samplerColor:new Hd(null)},Yd.commonUniforms),vertexShader:["void main() { ","\tgl_Position = vec4( sign( position.xy ), 0.0, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D samplerColor;","uniform float viewHeight;","uniform float viewWidth;",qd.unpackFloat,"void main() {",qd.computeTextureCoord,qd.unpackColor,"\tgl_FragColor = vec4( emissiveColor, 1.0 );","}"].join("\n")},pointLight:{uniforms:Object.assign({samplerNormalDepth:new Hd(null),samplerColor:new Hd(null),lightColor:new Hd(new v(0)),lightPositionVS:new Hd(new s(0,1,0)),lightIntensity:new Hd(1),lightRadius:new Hd(1)},Yd.commonUniforms),vertexShader:["void main() {","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D samplerNormalDepth;","uniform sampler2D samplerColor;","uniform float viewHeight;","uniform float viewWidth;","uniform vec3 lightColor;","uniform vec3 lightPositionVS;","uniform float lightIntensity;","uniform float lightRadius;","uniform mat4 matProjInverse;",qd.unpackFloat,"void main() {",qd.computeTextureCoord,qd.unpackNormalDepth,qd.computeVertexPositionVS,"\tvec3 lightVector = lightPositionVS - vertexPositionVS.xyz;","\tfloat distance = length( lightVector );","\tif ( distance > lightRadius ) discard;","\tlightVector = normalize( lightVector );",qd.unpackColor,qd.computeSpecular,"\t//float cutoff = 0.3;","\t//float denom = distance / lightRadius + 1.0;","\t//float attenuation = 1.0 / ( denom * denom );","\t//attenuation = ( attenuation - cutoff ) / ( 1.0 - cutoff );","\t//attenuation = max( attenuation, 0.0 );","\t//attenuation *= attenuation;","\t//diffuseColor *= saturate( -distance / lightRadius + 1.0 );","\t//float attenuation = 1.0;","\tfloat attenuation = saturate( -distance / lightRadius + 1.0 );",qd.combine,"}"].join("\n")},spotLight:{uniforms:Object.assign({samplerNormalDepth:new Hd(null),samplerColor:new Hd(null),lightColor:new Hd(new v(0)),lightDirectionVS:new Hd(new s(0,1,0)),lightPositionVS:new Hd(new s(0,1,0)),lightAngle:new Hd(1),lightIntensity:new Hd(1)},Yd.commonUniforms),vertexShader:["void main() { ","\tgl_Position = vec4( sign( position.xy ), 0.0, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D samplerNormalDepth;","uniform sampler2D samplerColor;","uniform float viewHeight;","uniform float viewWidth;","uniform vec3 lightColor;","uniform vec3 lightPositionVS;","uniform vec3 lightDirectionVS;","uniform float lightAngle;","uniform float lightIntensity;","uniform mat4 matProjInverse;",qd.unpackFloat,"void main() {",qd.computeTextureCoord,qd.unpackNormalDepth,qd.computeVertexPositionVS,qd.unpackColor,"\tvec3 lightVector = normalize( lightPositionVS.xyz - vertexPositionVS.xyz );","\tfloat rho = dot( lightDirectionVS, lightVector );","\tfloat rhoMax = cos( lightAngle );","\tif ( rho <= rhoMax ) discard;","\tfloat theta = rhoMax + 0.0001;","\tfloat phi = rhoMax + 0.05;","\tfloat falloff = 4.0;","\tfloat spot = 0.0;","\tif ( rho >= phi ) {","\t\tspot = 1.0;","\t} else if ( rho <= theta ) {","\t\tspot = 0.0;","\t} else { ","\t\tspot = pow( ( rho - theta ) / ( phi - theta ), falloff );","\t}","\tdiffuseColor *= spot;",qd.computeSpecular,"\tconst float attenuation = 1.0;",qd.combine,"}"].join("\n")},directionalLight:{uniforms:Object.assign({samplerNormalDepth:new Hd(null),samplerColor:new Hd(null),lightColor:new Hd(new v(0)),lightDirectionVS:new Hd(new s(0,1,0)),lightIntensity:new Hd(1)},Yd.commonUniforms),vertexShader:["void main() { ","\tgl_Position = vec4( sign( position.xy ), 0.0, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D samplerNormalDepth;","uniform sampler2D samplerColor;","uniform float viewHeight;","uniform float viewWidth;","uniform vec3 lightColor;","uniform vec3 lightDirectionVS;","uniform float lightIntensity;","uniform mat4 matProjInverse;",qd.unpackFloat,"void main() {",qd.computeTextureCoord,qd.unpackNormalDepth,qd.computeVertexPositionVS,qd.unpackColor,"\tvec3 lightVector = normalize( lightDirectionVS );",qd.computeSpecular,"\tconst float attenuation = 1.0;",qd.combine,"}"].join("\n")},normalDepthShininess:{uniforms:{shininess:new Hd(30)},vertexShader:["varying vec3 vNormal;","varying vec4 vPosition;","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","void main() {","#include <begin_vertex>","#include <beginnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#include <morphtarget_vertex>","#include <skinning_vertex>","#include <project_vertex>","\tvNormal = normalize( transformedNormal );","\tvPosition = gl_Position;","}"].join("\n"),fragmentShader:["varying vec3 vNormal;","varying vec4 vPosition;","uniform float shininess;",qd.packNormal,"void main() {","\tvec3 normal = vNormal;","\tvec4 position = vPosition;",qd.packNormalDepthShininess,"\tgl_FragColor = packedNormalDepthShininess;","}"].join("\n")},pointLightPre:{uniforms:Object.assign({samplerNormalDepthShininess:new Hd(null),lightColor:new Hd(new v(0)),lightPositionVS:new Hd(new s(0,1,0)),lightIntensity:new Hd(1),lightRadius:new Hd(1)},Yd.commonUniforms),vertexShader:["void main() {","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D samplerNormalDepthShininess;","uniform float viewHeight;","uniform float viewWidth;","uniform vec3 lightColor;","uniform vec3 lightPositionVS;","uniform float lightIntensity;","uniform float lightRadius;","uniform mat4 matProjInverse;",qd.unpackFloat,qd.unpackVector2,"void main() {",qd.computeTextureCoord,qd.unpackNormalDepthShininess,qd.computeVertexPositionVS,"\tvec3 lightVector = lightPositionVS - vertexPositionVS.xyz;","\tfloat distance = length( lightVector );","\tif ( distance > lightRadius ) discard;","\tlightVector = normalize( lightVector );",qd.computeSpecular,"\tfloat attenuation = saturate( -distance / lightRadius + 1.0 );",qd.packLight,"\tgl_FragColor = packedLight;","}"].join("\n")},spotLightPre:{uniforms:Object.assign({samplerNormalDepthShininess:new Hd(null),lightColor:new Hd(new v(0)),lightDirectionVS:new Hd(new s(0,1,0)),lightPositionVS:new Hd(new s(0,1,0)),lightAngle:new Hd(1),lightIntensity:new Hd(1)},Yd.commonUniforms),vertexShader:["void main() { ","\tgl_Position = vec4( sign( position.xy ), 0.0, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D samplerNormalDepthShininess;","uniform float viewHeight;","uniform float viewWidth;","uniform vec3 lightColor;","uniform vec3 lightPositionVS;","uniform vec3 lightDirectionVS;","uniform float lightAngle;","uniform float lightIntensity;","uniform mat4 matProjInverse;",qd.unpackFloat,qd.unpackVector2,"void main() {",qd.computeTextureCoord,qd.unpackNormalDepthShininess,qd.computeVertexPositionVS,"\tvec3 lightVector = normalize( lightPositionVS.xyz - vertexPositionVS.xyz );","\tfloat rho = dot( lightDirectionVS, lightVector );","\tfloat rhoMax = cos( lightAngle );","\tif ( rho <= rhoMax ) discard;","\tfloat theta = rhoMax + 0.0001;","\tfloat phi = rhoMax + 0.05;","\tfloat falloff = 4.0;","\tfloat spot = 0.0;","\tif ( rho >= phi ) {","\t\tspot = 1.0;","\t} else if ( rho <= theta ) {","\t\tspot = 0.0;","\t} else { ","\t\tspot = pow( ( rho - theta ) / ( phi - theta ), falloff );","\t}",qd.computeSpecular,"\tconst float attenuation = 1.0;",qd.packLight,"\tgl_FragColor = spot * packedLight;","}"].join("\n")},directionalLightPre:{uniforms:Object.assign({samplerNormalDepthShininess:new Hd(null),lightColor:new Hd(new v(0)),lightDirectionVS:new Hd(new s(0,1,0)),lightIntensity:new Hd(1)},Yd.commonUniforms),vertexShader:["void main() { ","\tgl_Position = vec4( sign( position.xy ), 0.0, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D samplerNormalDepthShininess;","uniform float viewHeight;","uniform float viewWidth;","uniform vec3 lightColor;","uniform vec3 lightDirectionVS;","uniform float lightIntensity;","uniform mat4 matProjInverse;",qd.unpackFloat,qd.unpackVector2,"void main() {",qd.computeTextureCoord,qd.unpackNormalDepthShininess,qd.computeVertexPositionVS,"\tvec3 lightVector = normalize( lightDirectionVS );",qd.computeSpecular,"\tconst float attenuation = 1.0;",qd.packLight,"\tgl_FragColor = packedLight;","}"].join("\n")},reconstruction:{uniforms:Object.assign({samplerLight:new Hd(null),map:new Hd(null),offsetRepeat:new Hd(new S(0,0,1,1)),diffuse:new Hd(new v(0)),emissive:new Hd(new v(0)),specular:new Hd(new v(0)),shininess:new Hd(30)},Yd.commonUniforms),vertexShader:["#include <uv_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","void main() {","#include <uv_vertex>","#include <begin_vertex>","#include <beginnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#include <morphtarget_vertex>","#include <skinning_vertex>","#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D samplerLight;","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;","uniform float viewHeight;","uniform float viewWidth;","#include <uv_pars_fragment>","#include <map_pars_fragment>",qd.unpackFloat,"void main() {","\tvec4 diffuseColor = vec4( diffuse, 1.0 );","\tvec3 emissiveColor = emissive;","\tvec3 specularColor = specular;",qd.computeTextureCoord,"\tvec4 light = texture2D( samplerLight, texCoord );","#include <map_fragment>","\tvec3 diffuseFinal = diffuseColor.rgb * light.rgb;","\tvec3 emissiveFinal = emissiveColor;","\tvec3 specularFinal = specularColor * light.rgb * light.a;","\tgl_FragColor = vec4( diffuseFinal + emissiveFinal + specularFinal, 1.0 );","}"].join("\n")},final:{uniforms:{samplerResult:new Hd(null)},vertexShader:["varying vec2 texCoord;","void main() {","\tvec4 pos = vec4( sign( position.xy ), 0.0, 1.0 );","\ttexCoord = pos.xy * vec2( 0.5 ) + 0.5;","\tgl_Position = pos;","}"].join("\n"),fragmentShader:["varying vec2 texCoord;","uniform sampler2D samplerResult;","void main() {","\tgl_FragColor = texture2D( samplerResult, texCoord );","}"].join("\n")}};function Qd(e,t){k.call(this);var n=[],r=[],i=[],o=[1,1,1],a=[1,1,0],u=new s(0,1,0),l=new s,h=new s,d=new c,f=new c;f.setFromAxisAngle(u,Math.PI/2);var p=new s,m=new s;m.copy(e.getPointAt(0));for(var v=[new s(-.225,0,0),new s(0,-.05,0),new s(0,-.175,0),new s(0,-.05,0),new s(.225,0,0),new s(0,-.175,0)],g=2*Math.PI,y=5,b=[],x=0;x<y;x++){var w=x/y*g;b.push(new s(.06*Math.sin(w),.06*Math.cos(w),0))}y=6;var _=[];for(x=0;x<y;x++){w=x/y*g;_.push(new s(.025*Math.sin(w),.025*Math.cos(w),0))}var S=new s,T=new s;function A(e,t){T.set(0,0,-1).applyQuaternion(d);for(var o=0;o<e.length;o++)S.copy(e[o]),S.applyQuaternion(d),S.add(p),n.push(S.x,S.y,S.z),r.push(T.x,T.y,T.z),i.push(t[0],t[1],t[2]);T.set(0,0,1).applyQuaternion(d);for(o=e.length-1;o>=0;o--)S.copy(e[o]),S.applyQuaternion(d),S.add(p),n.push(S.x,S.y,S.z),r.push(T.x,T.y,T.z),i.push(t[0],t[1],t[2])}var E=new s,C=new s,P=new s,L=new s,O=new s,N=new s,R=new s,I=new s;function D(e,t,o){for(var a=0,s=e.length;a<s;a++){var c=e[a],u=e[(a+1)%s];E.copy(c).add(t),E.applyQuaternion(d),E.add(p),C.copy(u).add(t),C.applyQuaternion(d),C.add(p),P.copy(u).add(t),P.applyQuaternion(f),P.add(m),L.copy(c).add(t),L.applyQuaternion(f),L.add(m),n.push(E.x,E.y,E.z),n.push(C.x,C.y,C.z),n.push(L.x,L.y,L.z),n.push(C.x,C.y,C.z),n.push(P.x,P.y,P.z),n.push(L.x,L.y,L.z),O.copy(c),O.applyQuaternion(d),O.normalize(),N.copy(u),N.applyQuaternion(d),N.normalize(),R.copy(u),R.applyQuaternion(f),R.normalize(),I.copy(c),I.applyQuaternion(f),I.normalize(),r.push(O.x,O.y,O.z),r.push(N.x,N.y,N.z),r.push(I.x,I.y,I.z),r.push(N.x,N.y,N.z),r.push(R.x,R.y,R.z),r.push(I.x,I.y,I.z),i.push(o[0],o[1],o[2]),i.push(o[0],o[1],o[2]),i.push(o[0],o[1],o[2]),i.push(o[0],o[1],o[2]),i.push(o[0],o[1],o[2]),i.push(o[0],o[1],o[2])}}var F=new s;for(x=1;x<=t;x++){p.copy(e.getPointAt(x/t)),u.set(0,1,0),l.subVectors(p,m).normalize(),h.crossVectors(u,l).normalize(),u.crossVectors(l,h);w=Math.atan2(l.x,l.z);d.setFromAxisAngle(u,w),x%2==0&&A(v,a),D(b,F.set(0,-.125,0),a),D(_,F.set(.2,0,0),o),D(_,F.set(-.2,0,0),o),m.copy(p),f.copy(d)}this.addAttribute("position",new M(new Float32Array(n),3)),this.addAttribute("normal",new M(new Float32Array(r),3)),this.addAttribute("color",new M(new Float32Array(i),3))}function Zd(e,t){k.call(this);var n=[],r=[],i=new c,o=new s(0,1,0),a=new s,u=new s,l=[new s(0,.05,-.05),new s(0,.05,.05),new s(0,-.05,0)],h=[new s(-.05,0,.05),new s(-.05,0,-.05),new s(.05,0,0)],d=[new s(.05,0,-.05),new s(.05,0,.05),new s(-.05,0,0)],f=new s,p=new s,m=new s,v=new s,g=new s,y=new s,b=new s,x=new s;function w(e,t,o){for(var a=0,s=e.length;a<s;a++){var c=e[a],u=e[(a+1)%s];f.copy(c),f.applyQuaternion(i),f.add(t),p.copy(u),p.applyQuaternion(i),p.add(t),m.copy(u),m.applyQuaternion(i),m.add(o),v.copy(c),v.applyQuaternion(i),v.add(o),n.push(f.x,f.y,f.z),n.push(p.x,p.y,p.z),n.push(v.x,v.y,v.z),n.push(p.x,p.y,p.z),n.push(m.x,m.y,m.z),n.push(v.x,v.y,v.z),g.copy(c),g.applyQuaternion(i),g.normalize(),y.copy(u),y.applyQuaternion(i),y.normalize(),b.copy(u),b.applyQuaternion(i),b.normalize(),x.copy(c),x.applyQuaternion(i),x.normalize(),r.push(g.x,g.y,g.z),r.push(y.x,y.y,y.z),r.push(x.x,x.y,x.z),r.push(y.x,y.y,y.z),r.push(b.x,b.y,b.z),r.push(x.x,x.y,x.z)}}for(var _=new s,S=new s,T=1;T<=t;T++){a.copy(e.getPointAt(T/t)),u.copy(e.getTangentAt(T/t));var A=Math.atan2(u.x,u.z);i.setFromAxisAngle(o,A),a.y>10?(_.set(-.75,-.35,0),_.applyQuaternion(i),_.add(a),S.set(.75,-.35,0),S.applyQuaternion(i),S.add(a),w(l,_,S),_.set(-.7,-.3,0),_.applyQuaternion(i),_.add(a),S.set(-.7,-a.y,0),S.applyQuaternion(i),S.add(a),w(h,_,S),_.set(.7,-.3,0),_.applyQuaternion(i),_.add(a),S.set(.7,-a.y,0),S.applyQuaternion(i),S.add(a),w(d,_,S)):(_.set(0,-.2,0),_.applyQuaternion(i),_.add(a),S.set(0,-a.y,0),S.applyQuaternion(i),S.add(a),w(d,_,S))}this.addAttribute("position",new M(new Float32Array(n),3)),this.addAttribute("normal",new M(new Float32Array(r),3))}function Kd(e,t){k.call(this);var n=[],r=new s(0,1,0),i=new s,o=new c,a=new c;a.setFromAxisAngle(r,Math.PI/2);var u=new s,l=new s;l.copy(e.getPointAt(0)),l.y=0;for(var h=new s,d=new s,f=new s,p=new s,m=1;m<=t;m++){u.copy(e.getPointAt(m/t)),u.y=0,i.subVectors(u,l);var v=Math.atan2(i.x,i.z);o.setFromAxisAngle(r,v),h.set(-.3,0,0),h.applyQuaternion(o),h.add(u),d.set(.3,0,0),d.applyQuaternion(o),d.add(u),f.set(.3,0,0),f.applyQuaternion(a),f.add(l),p.set(-.3,0,0),p.applyQuaternion(a),p.add(l),n.push(h.x,h.y,h.z),n.push(d.x,d.y,d.z),n.push(p.x,p.y,p.z),n.push(d.x,d.y,d.z),n.push(f.x,f.y,f.z),n.push(p.x,p.y,p.z),l.copy(u),a.copy(o)}this.addAttribute("position",new M(new Float32Array(n),3))}function $d(){k.call(this);for(var e=[],t=0;t<100;t++){var n=800*Math.random()-400,r=50*Math.random()+50,i=800*Math.random()-400,o=40*Math.random()+20;e.push(n-o,r,i-o),e.push(n+o,r,i-o),e.push(n-o,r,i+o),e.push(n+o,r,i-o),e.push(n+o,r,i+o),e.push(n-o,r,i+o)}this.addAttribute("position",new M(new Float32Array(e),3))}function ef(e){k.call(this);var t=[],n=[],r=new Nr;r.ray.direction.set(0,-1,0);for(var i=0;i<2e3;i++){var o=500*Math.random()-250,a=500*Math.random()-250;r.ray.origin.set(o,50,a);var s=r.intersectObject(e);if(0!==s.length){var c=s[0].point.y,u=5*Math.random()+.5,l=Math.random()*Math.PI*2;t.push(o+Math.sin(l),c,a+Math.cos(l)),t.push(o,c+u,a),t.push(o+Math.sin(l+Math.PI),c,a+Math.cos(l+Math.PI)),l+=Math.PI/2,t.push(o+Math.sin(l),c,a+Math.cos(l)),t.push(o,c+u,a),t.push(o+Math.sin(l+Math.PI),c,a+Math.cos(l+Math.PI));for(var h=.1*Math.random(),d=0;d<6;d++)n.push(.2+h,.4+h,0)}}this.addAttribute("position",new M(new Float32Array(t),3)),this.addAttribute("color",new M(new Float32Array(n),3))}Qd.prototype=Object.create(k.prototype),Zd.prototype=Object.create(k.prototype),Kd.prototype=Object.create(k.prototype),$d.prototype=Object.create(k.prototype),ef.prototype=Object.create(k.prototype);var tf={godrays_depthMask:{uniforms:{tInput:{value:null}},vertexShader:["varying vec2 vUv;","void main() {"," vUv = uv;"," gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","uniform sampler2D tInput;","void main() {","\tgl_FragColor = vec4( 1.0 ) - texture2D( tInput, vUv );","}"].join("\n")},godrays_generate:{uniforms:{tInput:{value:null},fStepSize:{value:1},vSunPositionScreenSpace:{value:new x(.5,.5)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define TAPS_PER_PASS 6.0","varying vec2 vUv;","uniform sampler2D tInput;","uniform vec2 vSunPositionScreenSpace;","uniform float fStepSize;","void main() {","vec2 delta = vSunPositionScreenSpace - vUv;","float dist = length( delta );","vec2 stepv = fStepSize * delta / dist;","float iters = dist/fStepSize;","vec2 uv = vUv.xy;","float col = 0.0;","if ( 0.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r;","uv += stepv;","if ( 1.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r;","uv += stepv;","if ( 2.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r;","uv += stepv;","if ( 3.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r;","uv += stepv;","if ( 4.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r;","uv += stepv;","if ( 5.0 <= iters && uv.y < 1.0 ) col += texture2D( tInput, uv ).r;","uv += stepv;","gl_FragColor = vec4( col/TAPS_PER_PASS );","gl_FragColor.a = 1.0;","}"].join("\n")},godrays_combine:{uniforms:{tColors:{value:null},tGodRays:{value:null},fGodRayIntensity:{value:.69},vSunPositionScreenSpace:{value:new x(.5,.5)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","uniform sampler2D tColors;","uniform sampler2D tGodRays;","uniform vec2 vSunPositionScreenSpace;","uniform float fGodRayIntensity;","void main() {","gl_FragColor = texture2D( tColors, vUv ) + fGodRayIntensity * vec4( 1.0 - texture2D( tGodRays, vUv ).r );","gl_FragColor.a = 1.0;","}"].join("\n")},godrays_fake_sun:{uniforms:{vSunPositionScreenSpace:{value:new x(.5,.5)},fAspect:{value:1},sunColor:{value:new v(16772608)},bgColor:{value:new v(0)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","uniform vec2 vSunPositionScreenSpace;","uniform float fAspect;","uniform vec3 sunColor;","uniform vec3 bgColor;","void main() {","vec2 diff = vUv - vSunPositionScreenSpace;","diff.x *= fAspect;","float prop = clamp( length( diff ) / 0.5, 0.0, 1.0 );","prop = 0.35 * pow( 1.0 - prop, 3.0 );","gl_FragColor.xyz = mix( sunColor, bgColor, 1.0 - prop );","gl_FragColor.w = 1.0;","}"].join("\n")}},nf={uniforms:{},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["void main() {","gl_FragColor = vec4( 1.0, 0.0, 0.0, 0.5 );","}"].join("\n")},rf={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 base = texture2D( tDiffuse, vUv );","vec3 lumCoeff = vec3( 0.25, 0.65, 0.1 );","float lum = dot( lumCoeff, base.rgb );","vec3 blend = vec3( lum );","float L = min( 1.0, max( 0.0, 10.0 * ( lum - 0.45 ) ) );","vec3 result1 = 2.0 * base.rgb * blend;","vec3 result2 = 1.0 - 2.0 * ( 1.0 - blend ) * ( 1.0 - base.rgb );","vec3 newColor = mix( result1, result2, L );","float A2 = opacity * base.a;","vec3 mixRGB = A2 * newColor.rgb;","mixRGB += ( ( 1.0 - A2 ) * base.rgb );","gl_FragColor = vec4( mixRGB, base.a );","}"].join("\n")},of={uniforms:{tDiffuse1:{value:null},tDiffuse2:{value:null},mixRatio:{value:.5},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform float mixRatio;","uniform sampler2D tDiffuse1;","uniform sampler2D tDiffuse2;","varying vec2 vUv;","void main() {","vec4 texel1 = texture2D( tDiffuse1, vUv );","vec4 texel2 = texture2D( tDiffuse2, vUv );","gl_FragColor = opacity * mix( texel1, texel2, mixRatio );","}"].join("\n")},af={uniforms:{tDiffuse:{value:null},brightness:{value:0},contrast:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float brightness;","uniform float contrast;","varying vec2 vUv;","void main() {","gl_FragColor = texture2D( tDiffuse, vUv );","gl_FragColor.rgb += brightness;","if (contrast > 0.0) {","gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) / (1.0 - contrast) + 0.5;","} else {","gl_FragColor.rgb = (gl_FragColor.rgb - 0.5) * (1.0 + contrast) + 0.5;","}","}"].join("\n")},sf={uniforms:{tDiffuse:{value:null},powRGB:{value:new s(2,2,2)},mulRGB:{value:new s(1,1,1)},addRGB:{value:new s(0,0,0)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 powRGB;","uniform vec3 mulRGB;","uniform vec3 addRGB;","varying vec2 vUv;","void main() {","gl_FragColor = texture2D( tDiffuse, vUv );","gl_FragColor.rgb = mulRGB * pow( ( gl_FragColor.rgb + addRGB ), powRGB );","}"].join("\n")},cf={uniforms:{tDiffuse:{value:null},color:{value:new v(16777215)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float v = dot( texel.xyz, luma );","gl_FragColor = vec4( v * color, texel.w );","}"].join("\n")},uf={uniforms:{tColor:{value:null},tDepth:{value:null},focus:{value:1},maxblur:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float focus;","uniform float maxblur;","uniform sampler2D tColor;","uniform sampler2D tDepth;","varying vec2 vUv;","void main() {","vec4 depth = texture2D( tDepth, vUv );","float factor = depth.x - focus;","vec4 col = texture2D( tColor, vUv, 2.0 * maxblur * abs( focus - depth.x ) );","gl_FragColor = col;","gl_FragColor.a = 1.0;","}"].join("\n")},lf={uniforms:{tDiffuse:{value:null},screenWidth:{value:1024},screenHeight:{value:1024},sampleDistance:{value:.94},waveFactor:{value:.00125}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float screenWidth;","uniform float screenHeight;","uniform float sampleDistance;","uniform float waveFactor;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 color, org, tmp, add;","float sample_dist, f;","vec2 vin;","vec2 uv = vUv;","add = color = org = texture2D( tDiffuse, uv );","vin = ( uv - vec2( 0.5 ) ) * vec2( 1.4 );","sample_dist = dot( vin, vin ) * 2.0;","f = ( waveFactor * 100.0 + sample_dist ) * sampleDistance * 4.0;","vec2 sampleSize = vec2(  1.0 / screenWidth, 1.0 / screenHeight ) * vec2( f );","add += tmp = texture2D( tDiffuse, uv + vec2( 0.111964, 0.993712 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( 0.846724, 0.532032 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( 0.943883, -0.330279 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( 0.330279, -0.943883 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( -0.532032, -0.846724 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( -0.993712, -0.111964 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","add += tmp = texture2D( tDiffuse, uv + vec2( -0.707107, 0.707107 ) * sampleSize );","if( tmp.b < color.b ) color = tmp;","color = color * vec4( 2.0 ) - ( add / vec4( 8.0 ) );","color = color + ( add / vec4( 8.0 ) - color ) * ( vec4( 1.0 ) - vec4( sample_dist * 0.5 ) );","gl_FragColor = vec4( color.rgb * color.rgb * vec3( 0.95 ) + color.rgb, 1.0 );","}"].join("\n")},hf={uniforms:{tDiffuse:{value:null},aspect:{value:new x(512,512)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","uniform vec2 aspect;","vec2 texel = vec2(1.0 / aspect.x, 1.0 / aspect.y);","mat3 G[9];","const mat3 g0 = mat3( 0.3535533845424652, 0, -0.3535533845424652, 0.5, 0, -0.5, 0.3535533845424652, 0, -0.3535533845424652 );","const mat3 g1 = mat3( 0.3535533845424652, 0.5, 0.3535533845424652, 0, 0, 0, -0.3535533845424652, -0.5, -0.3535533845424652 );","const mat3 g2 = mat3( 0, 0.3535533845424652, -0.5, -0.3535533845424652, 0, 0.3535533845424652, 0.5, -0.3535533845424652, 0 );","const mat3 g3 = mat3( 0.5, -0.3535533845424652, 0, -0.3535533845424652, 0, 0.3535533845424652, 0, 0.3535533845424652, -0.5 );","const mat3 g4 = mat3( 0, -0.5, 0, 0.5, 0, 0.5, 0, -0.5, 0 );","const mat3 g5 = mat3( -0.5, 0, 0.5, 0, 0, 0, 0.5, 0, -0.5 );","const mat3 g6 = mat3( 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.6666666865348816, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204 );","const mat3 g7 = mat3( -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, 0.6666666865348816, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408 );","const mat3 g8 = mat3( 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408 );","void main(void)","{","G[0] = g0,","G[1] = g1,","G[2] = g2,","G[3] = g3,","G[4] = g4,","G[5] = g5,","G[6] = g6,","G[7] = g7,","G[8] = g8;","mat3 I;","float cnv[9];","vec3 sample;","for (float i=0.0; i<3.0; i++) {","for (float j=0.0; j<3.0; j++) {","sample = texture2D(tDiffuse, vUv + texel * vec2(i-1.0,j-1.0) ).rgb;","I[int(i)][int(j)] = length(sample);","}","}","for (int i=0; i<9; i++) {","float dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);","cnv[i] = dp3 * dp3;","}","float M = (cnv[0] + cnv[1]) + (cnv[2] + cnv[3]);","float S = (cnv[4] + cnv[5]) + (cnv[6] + cnv[7]) + (cnv[8] + M);","gl_FragColor = vec4(vec3(sqrt(M/S)), 1.0);","}"].join("\n")},df={uniforms:{mRefractionRatio:{value:1.02},mFresnelBias:{value:.1},mFresnelPower:{value:2},mFresnelScale:{value:1},tCube:{value:null}},vertexShader:["uniform float mRefractionRatio;","uniform float mFresnelBias;","uniform float mFresnelScale;","uniform float mFresnelPower;","varying vec3 vReflect;","varying vec3 vRefract[3];","varying float vReflectionFactor;","void main() {","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );","vec3 I = worldPosition.xyz - cameraPosition;","vReflect = reflect( I, worldNormal );","vRefract[0] = refract( normalize( I ), worldNormal, mRefractionRatio );","vRefract[1] = refract( normalize( I ), worldNormal, mRefractionRatio * 0.99 );","vRefract[2] = refract( normalize( I ), worldNormal, mRefractionRatio * 0.98 );","vReflectionFactor = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( I ), worldNormal ), mFresnelPower );","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","varying vec3 vReflect;","varying vec3 vRefract[3];","varying float vReflectionFactor;","void main() {","vec4 reflectedColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );","vec4 refractedColor = vec4( 1.0 );","refractedColor.r = textureCube( tCube, vec3( -vRefract[0].x, vRefract[0].yz ) ).r;","refractedColor.g = textureCube( tCube, vec3( -vRefract[1].x, vRefract[1].yz ) ).g;","refractedColor.b = textureCube( tCube, vec3( -vRefract[2].x, vRefract[2].yz ) ).b;","gl_FragColor = mix( refractedColor, reflectedColor, clamp( vReflectionFactor, 0.0, 1.0 ) );","}"].join("\n")},ff={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 tex = texture2D( tDiffuse, vec2( vUv.x, vUv.y ) );","gl_FragColor = LinearToGamma( tex, float( GAMMA_FACTOR ) );","}"].join("\n")},pf={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float h;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")},mf={uniforms:{tDiffuse:{value:null},h:{value:1/512},r:{value:.35}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float h;","uniform float r;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","float hh = h * abs( r - vUv.y );","sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * hh, vUv.y ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * hh, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * hh, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * hh, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * hh, vUv.y ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * hh, vUv.y ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * hh, vUv.y ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * hh, vUv.y ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")},vf={uniforms:{tDiffuse:{value:null},hue:{value:0},saturation:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float hue;","uniform float saturation;","varying vec2 vUv;","void main() {","gl_FragColor = texture2D( tDiffuse, vUv );","float angle = hue * 3.14159265;","float s = sin(angle), c = cos(angle);","vec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;","float len = length(gl_FragColor.rgb);","gl_FragColor.rgb = vec3(","dot(gl_FragColor.rgb, weights.xyz),","dot(gl_FragColor.rgb, weights.zxy),","dot(gl_FragColor.rgb, weights.yzx)",");","float average = (gl_FragColor.r + gl_FragColor.g + gl_FragColor.b) / 3.0;","if (saturation > 0.0) {","gl_FragColor.rgb += (average - gl_FragColor.rgb) * (1.0 - 1.0 / (1.001 - saturation));","} else {","gl_FragColor.rgb += (average - gl_FragColor.rgb) * (-saturation);","}","}"].join("\n")},gf={uniforms:{tDiffuse:{value:null},sides:{value:6},angle:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float sides;","uniform float angle;","varying vec2 vUv;","void main() {","vec2 p = vUv - 0.5;","float r = length(p);","float a = atan(p.y, p.x) + angle;","float tau = 2. * 3.1416 ;","a = mod(a, tau/sides);","a = abs(a - tau/sides/2.) ;","p = r * vec2(cos(a), sin(a));","vec4 color = texture2D(tDiffuse, p + 0.5);","gl_FragColor = color;","}"].join("\n")},yf={uniforms:{tDiffuse:{value:null},side:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform int side;","varying vec2 vUv;","void main() {","vec2 p = vUv;","if (side == 0){","if (p.x > 0.5) p.x = 1.0 - p.x;","}else if (side == 1){","if (p.x < 0.5) p.x = 1.0 - p.x;","}else if (side == 2){","if (p.y < 0.5) p.y = 1.0 - p.y;","}else if (side == 3){","if (p.y > 0.5) p.y = 1.0 - p.y;","} ","vec4 color = texture2D(tDiffuse, p);","gl_FragColor = color;","}"].join("\n")},bf={uniforms:{heightMap:{value:null},resolution:{value:new x(512,512)},scale:{value:new x(1,1)},height:{value:.05}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float height;","uniform vec2 resolution;","uniform sampler2D heightMap;","varying vec2 vUv;","void main() {","float val = texture2D( heightMap, vUv ).x;","float valU = texture2D( heightMap, vUv + vec2( 1.0 / resolution.x, 0.0 ) ).x;","float valV = texture2D( heightMap, vUv + vec2( 0.0, 1.0 / resolution.y ) ).x;","gl_FragColor = vec4( ( 0.5 * normalize( vec3( val - valU, val - valV, height  ) ) + 0.5 ), 1.0 );","}"].join("\n")},xf={modes:{none:"NO_PARALLAX",basic:"USE_BASIC_PARALLAX",steep:"USE_STEEP_PARALLAX",occlusion:"USE_OCLUSION_PARALLAX",relief:"USE_RELIEF_PARALLAX"},uniforms:{bumpMap:{value:null},map:{value:null},parallaxScale:{value:null},parallaxMinLayers:{value:null},parallaxMaxLayers:{value:null}},vertexShader:["varying vec2 vUv;","varying vec3 vViewPosition;","varying vec3 vNormal;","void main() {","vUv = uv;","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","vViewPosition = -mvPosition.xyz;","vNormal = normalize( normalMatrix * normal );","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform sampler2D bumpMap;","uniform sampler2D map;","uniform float parallaxScale;","uniform float parallaxMinLayers;","uniform float parallaxMaxLayers;","varying vec2 vUv;","varying vec3 vViewPosition;","varying vec3 vNormal;","#ifdef USE_BASIC_PARALLAX","vec2 parallaxMap( in vec3 V ) {","float initialHeight = texture2D( bumpMap, vUv ).r;","vec2 texCoordOffset = parallaxScale * V.xy * initialHeight;","return vUv - texCoordOffset;","}","#else","vec2 parallaxMap( in vec3 V ) {","float numLayers = mix( parallaxMaxLayers, parallaxMinLayers, abs( dot( vec3( 0.0, 0.0, 1.0 ), V ) ) );","float layerHeight = 1.0 / numLayers;","float currentLayerHeight = 0.0;","vec2 dtex = parallaxScale * V.xy / V.z / numLayers;","vec2 currentTextureCoords = vUv;","float heightFromTexture = texture2D( bumpMap, currentTextureCoords ).r;","for ( int i = 0; i < 30; i += 1 ) {","if ( heightFromTexture <= currentLayerHeight ) {","break;","}","currentLayerHeight += layerHeight;","currentTextureCoords -= dtex;","heightFromTexture = texture2D( bumpMap, currentTextureCoords ).r;","}","#ifdef USE_STEEP_PARALLAX","return currentTextureCoords;","#elif defined( USE_RELIEF_PARALLAX )","vec2 deltaTexCoord = dtex / 2.0;","float deltaHeight = layerHeight / 2.0;","currentTextureCoords += deltaTexCoord;","currentLayerHeight -= deltaHeight;","const int numSearches = 5;","for ( int i = 0; i < numSearches; i += 1 ) {","deltaTexCoord /= 2.0;","deltaHeight /= 2.0;","heightFromTexture = texture2D( bumpMap, currentTextureCoords ).r;","if( heightFromTexture > currentLayerHeight ) {","currentTextureCoords -= deltaTexCoord;","currentLayerHeight += deltaHeight;","} else {","currentTextureCoords += deltaTexCoord;","currentLayerHeight -= deltaHeight;","}","}","return currentTextureCoords;","#elif defined( USE_OCLUSION_PARALLAX )","vec2 prevTCoords = currentTextureCoords + dtex;","float nextH = heightFromTexture - currentLayerHeight;","float prevH = texture2D( bumpMap, prevTCoords ).r - currentLayerHeight + layerHeight;","float weight = nextH / ( nextH - prevH );","return prevTCoords * weight + currentTextureCoords * ( 1.0 - weight );","#else","return vUv;","#endif","}","#endif","vec2 perturbUv( vec3 surfPosition, vec3 surfNormal, vec3 viewPosition ) {","vec2 texDx = dFdx( vUv );","vec2 texDy = dFdy( vUv );","vec3 vSigmaX = dFdx( surfPosition );","vec3 vSigmaY = dFdy( surfPosition );","vec3 vR1 = cross( vSigmaY, surfNormal );","vec3 vR2 = cross( surfNormal, vSigmaX );","float fDet = dot( vSigmaX, vR1 );","vec2 vProjVscr = ( 1.0 / fDet ) * vec2( dot( vR1, viewPosition ), dot( vR2, viewPosition ) );","vec3 vProjVtex;","vProjVtex.xy = texDx * vProjVscr.x + texDy * vProjVscr.y;","vProjVtex.z = dot( surfNormal, viewPosition );","return parallaxMap( vProjVtex );","}","void main() {","vec2 mapUv = perturbUv( -vViewPosition, normalize( vNormal ), normalize( vViewPosition ) );","gl_FragColor = texture2D( map, mapUv );","}"].join("\n")},wf={uniforms:{tDiffuse:{value:null},resolution:{value:null},pixelSize:{value:1}},vertexShader:["varying highp vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float pixelSize;","uniform vec2 resolution;","varying highp vec2 vUv;","void main(){","vec2 dxy = pixelSize / resolution;","vec2 coord = dxy * floor( vUv / dxy );","gl_FragColor = texture2D(tDiffuse, coord);","}"].join("\n")},_f={uniforms:{tDiffuse:{value:null},amount:{value:.005},angle:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float amount;","uniform float angle;","varying vec2 vUv;","void main() {","vec2 offset = amount * vec2( cos(angle), sin(angle));","vec4 cr = texture2D(tDiffuse, vUv + offset);","vec4 cga = texture2D(tDiffuse, vUv);","vec4 cb = texture2D(tDiffuse, vUv - offset);","gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);","}"].join("\n")},Sf={uniforms:{tDiffuse:{value:null},amount:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float amount;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 color = texture2D( tDiffuse, vUv );","vec3 c = color.rgb;","color.r = dot( c, vec3( 1.0 - 0.607 * amount, 0.769 * amount, 0.189 * amount ) );","color.g = dot( c, vec3( 0.349 * amount, 1.0 - 0.314 * amount, 0.168 * amount ) );","color.b = dot( c, vec3( 0.272 * amount, 0.534 * amount, 1.0 - 0.869 * amount ) );","gl_FragColor = vec4( min( vec3( 1.0 ), color.rgb ), color.a );","}"].join("\n")},Mf={uniforms:{tDiffuse:{value:null},resolution:{value:new x}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","varying vec2 vUv;","void main() {","vec2 texel = vec2( 1.0 / resolution.x, 1.0 / resolution.y );","const mat3 Gx = mat3( -1, -2, -1, 0, 0, 0, 1, 2, 1 );","const mat3 Gy = mat3( -1, 0, 1, -2, 0, 2, -1, 0, 1 );","float tx0y0 = texture2D( tDiffuse, vUv + texel * vec2( -1, -1 ) ).r;","float tx0y1 = texture2D( tDiffuse, vUv + texel * vec2( -1,  0 ) ).r;","float tx0y2 = texture2D( tDiffuse, vUv + texel * vec2( -1,  1 ) ).r;","float tx1y0 = texture2D( tDiffuse, vUv + texel * vec2(  0, -1 ) ).r;","float tx1y1 = texture2D( tDiffuse, vUv + texel * vec2(  0,  0 ) ).r;","float tx1y2 = texture2D( tDiffuse, vUv + texel * vec2(  0,  1 ) ).r;","float tx2y0 = texture2D( tDiffuse, vUv + texel * vec2(  1, -1 ) ).r;","float tx2y1 = texture2D( tDiffuse, vUv + texel * vec2(  1,  0 ) ).r;","float tx2y2 = texture2D( tDiffuse, vUv + texel * vec2(  1,  1 ) ).r;","float valueGx = Gx[0][0] * tx0y0 + Gx[1][0] * tx1y0 + Gx[2][0] * tx2y0 + ","Gx[0][1] * tx0y1 + Gx[1][1] * tx1y1 + Gx[2][1] * tx2y1 + ","Gx[0][2] * tx0y2 + Gx[1][2] * tx1y2 + Gx[2][2] * tx2y2; ","float valueGy = Gy[0][0] * tx0y0 + Gy[1][0] * tx1y0 + Gy[2][0] * tx2y0 + ","Gy[0][1] * tx0y1 + Gy[1][1] * tx1y1 + Gy[2][1] * tx2y1 + ","Gy[0][2] * tx0y2 + Gy[1][2] * tx1y2 + Gy[2][2] * tx2y2; ","float G = sqrt( ( valueGx * valueGx ) + ( valueGy * valueGy ) );","gl_FragColor = vec4( vec3( G ), 1 );","}"].join("\n")},Tf={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 tex = texture2D( tDiffuse, vec2( vUv.x, vUv.y ) );","vec4 newTex = vec4(tex.r, (tex.g + tex.b) * .5, (tex.g + tex.b) * .5, 1.0);","gl_FragColor = newTex;","}"].join("\n")},Af={uniforms:{texture:{value:null},delta:{value:new x(1,1)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","#define ITERATIONS 10.0","uniform sampler2D texture;","uniform vec2 delta;","varying vec2 vUv;","void main() {","vec4 color = vec4( 0.0 );","float total = 0.0;","float offset = rand( vUv );","for ( float t = -ITERATIONS; t <= ITERATIONS; t ++ ) {","float percent = ( t + offset - 0.5 ) / ITERATIONS;","float weight = 1.0 - abs( percent );","color += texture2D( texture, vUv + delta * percent ) * weight;","total += weight;","}","gl_FragColor = color / total;","}"].join("\n")},Ef={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float v;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")},Cf={uniforms:{tDiffuse:{value:null},v:{value:1/512},r:{value:.35}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float v;","uniform float r;","varying vec2 vUv;","void main() {","vec4 sum = vec4( 0.0 );","float vv = v * abs( r - vUv.y );","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * vv ) ) * 0.051;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * vv ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * vv ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * vv ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * vv ) ) * 0.1531;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * vv ) ) * 0.12245;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * vv ) ) * 0.0918;","sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * vv ) ) * 0.051;","gl_FragColor = sum;","}"].join("\n")},Pf={uniforms:{tDiffuse:{value:null},offset:{value:1},darkness:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float offset;","uniform float darkness;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec2 uv = ( vUv - vec2( 0.5 ) ) * vec2( offset );","gl_FragColor = vec4( mix( texel.rgb, vec3( 1.0 - darkness ), dot( uv, uv ) ), texel.a );","}"].join("\n")},Lf={uniforms:{color:{type:"c",value:null},time:{type:"f",value:0},tDiffuse:{type:"t",value:null},tDudv:{type:"t",value:null},textureMatrix:{type:"m4",value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec2 vUv;","varying vec4 vUvRefraction;","void main() {","\tvUv = uv;","\tvUvRefraction = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform float time;","uniform sampler2D tDiffuse;","uniform sampler2D tDudv;","varying vec2 vUv;","varying vec4 vUvRefraction;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ),blendOverlay( base.b, blend.b ) );","}","void main() {"," float waveStrength = 0.1;"," float waveSpeed = 0.03;","\tvec2 distortedUv = texture2D( tDudv, vec2( vUv.x + time * waveSpeed, vUv.y ) ).rg * waveStrength;","\tdistortedUv = vUv.xy + vec2( distortedUv.x, distortedUv.y + time * waveSpeed );","\tvec2 distortion = ( texture2D( tDudv, distortedUv ).rg * 2.0 - 1.0 ) * waveStrength;"," vec4 uv = vec4( vUvRefraction );"," uv.xy += distortion;","\tvec4 base = texture2DProj( tDiffuse, uv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")},Of={skinSimple:{uniforms:Xn.merge([Ci.fog,Ci.lights,{enableBump:{value:0},enableSpecular:{value:0},tDiffuse:{value:null},tBeckmann:{value:null},diffuse:{value:new v(15658734)},specular:{value:new v(1118481)},opacity:{value:1},uRoughness:{value:.15},uSpecularBrightness:{value:.75},bumpMap:{value:null},bumpScale:{value:1},specularMap:{value:null},offsetRepeat:{value:new S(0,0,1,1)},uWrapRGB:{value:new s(.75,.375,.1875)}}]),fragmentShader:["#define USE_BUMPMAP","uniform bool enableBump;","uniform bool enableSpecular;","uniform vec3 diffuse;","uniform vec3 specular;","uniform float opacity;","uniform float uRoughness;","uniform float uSpecularBrightness;","uniform vec3 uWrapRGB;","uniform sampler2D tDiffuse;","uniform sampler2D tBeckmann;","uniform sampler2D specularMap;","varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vViewPosition;",Ei.common,Ei.bsdfs,Ei.packing,Ei.lights_pars_begin,Ei.shadowmap_pars_fragment,Ei.fog_pars_fragment,Ei.bumpmap_pars_fragment,"float fresnelReflectance( vec3 H, vec3 V, float F0 ) {","float base = 1.0 - dot( V, H );","float exponential = pow( base, 5.0 );","return exponential + F0 * ( 1.0 - exponential );","}","float KS_Skin_Specular( vec3 N,","vec3 L,","vec3 V,","float m,","float rho_s",") {","float result = 0.0;","float ndotl = dot( N, L );","if( ndotl > 0.0 ) {","vec3 h = L + V;","vec3 H = normalize( h );","float ndoth = dot( N, H );","float PH = pow( 2.0 * texture2D( tBeckmann, vec2( ndoth, m ) ).x, 10.0 );","float F = fresnelReflectance( H, V, 0.028 );","float frSpec = max( PH * F / dot( h, h ), 0.0 );","result = ndotl * rho_s * frSpec;","}","return result;","}","void main() {","vec3 outgoingLight = vec3( 0.0 );","vec4 diffuseColor = vec4( diffuse, opacity );","vec4 colDiffuse = texture2D( tDiffuse, vUv );","colDiffuse.rgb *= colDiffuse.rgb;","diffuseColor = diffuseColor * colDiffuse;","vec3 normal = normalize( vNormal );","vec3 viewerDirection = normalize( vViewPosition );","float specularStrength;","if ( enableSpecular ) {","vec4 texelSpecular = texture2D( specularMap, vUv );","specularStrength = texelSpecular.r;","} else {","specularStrength = 1.0;","}","#ifdef USE_BUMPMAP","if ( enableBump ) normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );","#endif","vec3 totalSpecularLight = vec3( 0.0 );","vec3 totalDiffuseLight = vec3( 0.0 );","#if NUM_POINT_LIGHTS > 0","for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {","vec3 lVector = pointLights[ i ].position + vViewPosition.xyz;","float attenuation = calcLightAttenuation( length( lVector ), pointLights[ i ].distance, pointLights[ i ].decay );","lVector = normalize( lVector );","float pointDiffuseWeightFull = max( dot( normal, lVector ), 0.0 );","float pointDiffuseWeightHalf = max( 0.5 * dot( normal, lVector ) + 0.5, 0.0 );","vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), uWrapRGB );","float pointSpecularWeight = KS_Skin_Specular( normal, lVector, viewerDirection, uRoughness, uSpecularBrightness );","totalDiffuseLight += pointLight[ i ].color * ( pointDiffuseWeight * attenuation );","totalSpecularLight += pointLight[ i ].color * specular * ( pointSpecularWeight * specularStrength * attenuation );","}","#endif","#if NUM_DIR_LIGHTS > 0","for( int i = 0; i < NUM_DIR_LIGHTS; i++ ) {","vec3 dirVector = directionalLights[ i ].direction;","float dirDiffuseWeightFull = max( dot( normal, dirVector ), 0.0 );","float dirDiffuseWeightHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );","vec3 dirDiffuseWeight = mix( vec3 ( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), uWrapRGB );","float dirSpecularWeight = KS_Skin_Specular( normal, dirVector, viewerDirection, uRoughness, uSpecularBrightness );","totalDiffuseLight += directionalLights[ i ].color * dirDiffuseWeight;","totalSpecularLight += directionalLights[ i ].color * ( dirSpecularWeight * specularStrength );","}","#endif","#if NUM_HEMI_LIGHTS > 0","for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {","vec3 lVector = hemisphereLightDirection[ i ];","float dotProduct = dot( normal, lVector );","float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","totalDiffuseLight += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","float hemiSpecularWeight = 0.0;","hemiSpecularWeight += KS_Skin_Specular( normal, lVector, viewerDirection, uRoughness, uSpecularBrightness );","vec3 lVectorGround = -lVector;","hemiSpecularWeight += KS_Skin_Specular( normal, lVectorGround, viewerDirection, uRoughness, uSpecularBrightness );","vec3 hemiSpecularColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","totalSpecularLight += hemiSpecularColor * specular * ( hemiSpecularWeight * specularStrength );","}","#endif","outgoingLight += diffuseColor.xyz * ( totalDiffuseLight + ambientLightColor * diffuse ) + totalSpecularLight;","gl_FragColor = linearToOutputTexel( vec4( outgoingLight, diffuseColor.a ) );",Ei.fog_fragment,"}"].join("\n"),vertexShader:["uniform vec4 offsetRepeat;","varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vViewPosition;",Ei.common,Ei.lights_pars_begin,Ei.shadowmap_pars_vertex,Ei.fog_pars_vertex,"void main() {","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vViewPosition = -mvPosition.xyz;","vNormal = normalize( normalMatrix * normal );","vUv = uv * offsetRepeat.zw + offsetRepeat.xy;","gl_Position = projectionMatrix * mvPosition;",Ei.shadowmap_vertex,Ei.fog_vertex,"}"].join("\n")},skin:{uniforms:Xn.merge([Ci.fog,Ci.lights,{passID:{value:0},tDiffuse:{value:null},tNormal:{value:null},tBlur1:{value:null},tBlur2:{value:null},tBlur3:{value:null},tBlur4:{value:null},tBeckmann:{value:null},uNormalScale:{value:1},diffuse:{value:new v(15658734)},specular:{value:new v(1118481)},opacity:{value:1},uRoughness:{value:.15},uSpecularBrightness:{value:.75}}]),fragmentShader:["uniform vec3 diffuse;","uniform vec3 specular;","uniform float opacity;","uniform float uRoughness;","uniform float uSpecularBrightness;","uniform int passID;","uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tBlur1;","uniform sampler2D tBlur2;","uniform sampler2D tBlur3;","uniform sampler2D tBlur4;","uniform sampler2D tBeckmann;","uniform float uNormalScale;","varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vViewPosition;",Ei.common,Ei.lights_pars_begin,Ei.fog_pars_fragment,"float fresnelReflectance( vec3 H, vec3 V, float F0 ) {","float base = 1.0 - dot( V, H );","float exponential = pow( base, 5.0 );","return exponential + F0 * ( 1.0 - exponential );","}","float KS_Skin_Specular( vec3 N,","vec3 L,","vec3 V,","float m,","float rho_s",") {","float result = 0.0;","float ndotl = dot( N, L );","if( ndotl > 0.0 ) {","vec3 h = L + V;","vec3 H = normalize( h );","float ndoth = dot( N, H );","float PH = pow( 2.0 * texture2D( tBeckmann, vec2( ndoth, m ) ).x, 10.0 );","float F = fresnelReflectance( H, V, 0.028 );","float frSpec = max( PH * F / dot( h, h ), 0.0 );","result = ndotl * rho_s * frSpec;","}","return result;","}","void main() {","vec3 outgoingLight = vec3( 0.0 );","vec4 diffuseColor = vec4( diffuse, opacity );","vec4 mSpecular = vec4( specular, opacity );","vec4 colDiffuse = texture2D( tDiffuse, vUv );","colDiffuse *= colDiffuse;","diffuseColor *= colDiffuse;","vec4 posAndU = vec4( -vViewPosition, vUv.x );","vec4 posAndU_dx = dFdx( posAndU ),  posAndU_dy = dFdy( posAndU );","vec3 tangent = posAndU_dx.w * posAndU_dx.xyz + posAndU_dy.w * posAndU_dy.xyz;","vec3 normal = normalize( vNormal );","vec3 binormal = normalize( cross( tangent, normal ) );","tangent = cross( normal, binormal );","mat3 tsb = mat3( tangent, binormal, normal );","vec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;","normalTex.xy *= uNormalScale;","normalTex = normalize( normalTex );","vec3 finalNormal = tsb * normalTex;","normal = normalize( finalNormal );","vec3 viewerDirection = normalize( vViewPosition );","vec3 totalDiffuseLight = vec3( 0.0 );","vec3 totalSpecularLight = vec3( 0.0 );","#if NUM_POINT_LIGHTS > 0","for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {","vec3 pointVector = normalize( pointLights[ i ].direction );","float attenuation = calcLightAttenuation( length( lVector ), pointLights[ i ].distance, pointLights[ i ].decay );","float pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );","totalDiffuseLight += pointLightColor[ i ] * ( pointDiffuseWeight * attenuation );","if ( passID == 1 ) {","float pointSpecularWeight = KS_Skin_Specular( normal, pointVector, viewerDirection, uRoughness, uSpecularBrightness );","totalSpecularLight += pointLightColor[ i ] * mSpecular.xyz * ( pointSpecularWeight * attenuation );","}","}","#endif","#if NUM_DIR_LIGHTS > 0","for( int i = 0; i < NUM_DIR_LIGHTS; i++ ) {","vec3 dirVector = directionalLights[ i ].direction;","float dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );","totalDiffuseLight += directionalLights[ i ].color * dirDiffuseWeight;","if ( passID == 1 ) {","float dirSpecularWeight = KS_Skin_Specular( normal, dirVector, viewerDirection, uRoughness, uSpecularBrightness );","totalSpecularLight += directionalLights[ i ].color * mSpecular.xyz * dirSpecularWeight;","}","}","#endif","outgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalSpecularLight );","if ( passID == 0 ) {","outgoingLight = sqrt( outgoingLight );","} else if ( passID == 1 ) {","#ifdef VERSION1","vec3 nonblurColor = sqrt(outgoingLight );","#else","vec3 nonblurColor = outgoingLight;","#endif","vec3 blur1Color = texture2D( tBlur1, vUv ).xyz;","vec3 blur2Color = texture2D( tBlur2, vUv ).xyz;","vec3 blur3Color = texture2D( tBlur3, vUv ).xyz;","vec3 blur4Color = texture2D( tBlur4, vUv ).xyz;","outgoingLight = vec3( vec3( 0.22,  0.437, 0.635 ) * nonblurColor + ","vec3( 0.101, 0.355, 0.365 ) * blur1Color + ","vec3( 0.119, 0.208, 0.0 )   * blur2Color + ","vec3( 0.114, 0.0,   0.0 )   * blur3Color + ","vec3( 0.444, 0.0,   0.0 )   * blur4Color );","outgoingLight *= sqrt( colDiffuse.xyz );","outgoingLight += ambientLightColor * diffuse * colDiffuse.xyz + totalSpecularLight;","#ifndef VERSION1","outgoingLight = sqrt( outgoingLight );","#endif","}","gl_FragColor = vec4( outgoingLight, diffuseColor.a );",Ei.fog_fragment,"}"].join("\n"),vertexShader:["#ifdef VERTEX_TEXTURES","uniform sampler2D tDisplacement;","uniform float uDisplacementScale;","uniform float uDisplacementBias;","#endif","varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vViewPosition;",Ei.common,Ei.fog_pars_vertex,"void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","vViewPosition = -mvPosition.xyz;","vNormal = normalize( normalMatrix * normal );","vUv = uv;","#ifdef VERTEX_TEXTURES","vec3 dv = texture2D( tDisplacement, uv ).xyz;","float df = uDisplacementScale * dv.x + uDisplacementBias;","vec4 displacedPosition = vec4( vNormal.xyz * df, 0.0 ) + mvPosition;","gl_Position = projectionMatrix * displacedPosition;","#else","gl_Position = projectionMatrix * mvPosition;","#endif",Ei.fog_vertex,"}"].join("\n"),vertexShaderUV:["varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vViewPosition;",Ei.common,"void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","vViewPosition = -mvPosition.xyz;","vNormal = normalize( normalMatrix * normal );","vUv = uv;","gl_Position = vec4( uv.x * 2.0 - 1.0, uv.y * 2.0 - 1.0, 0.0, 1.0 );","}"].join("\n")},beckmann:{uniforms:{},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["varying vec2 vUv;","float PHBeckmann( float ndoth, float m ) {","float alpha = acos( ndoth );","float ta = tan( alpha );","float val = 1.0 / ( m * m * pow( ndoth, 4.0 ) ) * exp( -( ta * ta ) / ( m * m ) );","return val;","}","float KSTextureCompute( vec2 tex ) {","return 0.5 * pow( PHBeckmann( tex.x, tex.y ), 0.1 );","}","void main() {","float x = KSTextureCompute( vUv );","gl_FragColor = vec4( x, x, x, 1.0 );","}"].join("\n")}},Nf={terrain:{uniforms:Xn.merge([Ci.fog,Ci.lights,{enableDiffuse1:{value:0},enableDiffuse2:{value:0},enableSpecular:{value:0},enableReflection:{value:0},tDiffuse1:{value:null},tDiffuse2:{value:null},tDetail:{value:null},tNormal:{value:null},tSpecular:{value:null},tDisplacement:{value:null},uNormalScale:{value:1},uDisplacementBias:{value:0},uDisplacementScale:{value:1},diffuse:{value:new v(15658734)},specular:{value:new v(1118481)},shininess:{value:30},opacity:{value:1},uRepeatBase:{value:new x(1,1)},uRepeatOverlay:{value:new x(1,1)},uOffset:{value:new x(0,0)}}]),fragmentShader:["uniform vec3 diffuse;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;","uniform bool enableDiffuse1;","uniform bool enableDiffuse2;","uniform bool enableSpecular;","uniform sampler2D tDiffuse1;","uniform sampler2D tDiffuse2;","uniform sampler2D tDetail;","uniform sampler2D tNormal;","uniform sampler2D tSpecular;","uniform sampler2D tDisplacement;","uniform float uNormalScale;","uniform vec2 uRepeatOverlay;","uniform vec2 uRepeatBase;","uniform vec2 uOffset;","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vViewPosition;",Ei.common,Ei.bsdfs,Ei.lights_pars_begin,Ei.shadowmap_pars_fragment,Ei.fog_pars_fragment,"float calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {","if ( decayExponent > 0.0 ) {","return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );","}","return 1.0;","}","void main() {","vec3 outgoingLight = vec3( 0.0 );","vec4 diffuseColor = vec4( diffuse, opacity );","vec3 specularTex = vec3( 1.0 );","vec2 uvOverlay = uRepeatOverlay * vUv + uOffset;","vec2 uvBase = uRepeatBase * vUv;","vec3 normalTex = texture2D( tDetail, uvOverlay ).xyz * 2.0 - 1.0;","normalTex.xy *= uNormalScale;","normalTex = normalize( normalTex );","if( enableDiffuse1 && enableDiffuse2 ) {","vec4 colDiffuse1 = texture2D( tDiffuse1, uvOverlay );","vec4 colDiffuse2 = texture2D( tDiffuse2, uvOverlay );","colDiffuse1 = GammaToLinear( colDiffuse1, float( GAMMA_FACTOR ) );","colDiffuse2 = GammaToLinear( colDiffuse2, float( GAMMA_FACTOR ) );","diffuseColor *= mix ( colDiffuse1, colDiffuse2, 1.0 - texture2D( tDisplacement, uvBase ) );"," } else if( enableDiffuse1 ) {","diffuseColor *= texture2D( tDiffuse1, uvOverlay );","} else if( enableDiffuse2 ) {","diffuseColor *= texture2D( tDiffuse2, uvOverlay );","}","if( enableSpecular )","specularTex = texture2D( tSpecular, uvOverlay ).xyz;","mat3 tsb = mat3( vTangent, vBinormal, vNormal );","vec3 finalNormal = tsb * normalTex;","vec3 normal = normalize( finalNormal );","vec3 viewPosition = normalize( vViewPosition );","vec3 totalDiffuseLight = vec3( 0.0 );","vec3 totalSpecularLight = vec3( 0.0 );","#if NUM_POINT_LIGHTS > 0","for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {","vec3 lVector = pointLights[ i ].position + vViewPosition.xyz;","float attenuation = calcLightAttenuation( length( lVector ), pointLights[ i ].distance, pointLights[ i ].decay );","lVector = normalize( lVector );","vec3 pointHalfVector = normalize( lVector + viewPosition );","float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","float pointDiffuseWeight = max( dot( normal, lVector ), 0.0 );","float pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );","totalDiffuseLight += attenuation * pointLights[ i ].color * pointDiffuseWeight;","totalSpecularLight += attenuation * pointLights[ i ].color * specular * pointSpecularWeight * pointDiffuseWeight;","}","#endif","#if NUM_DIR_LIGHTS > 0","vec3 dirDiffuse = vec3( 0.0 );","vec3 dirSpecular = vec3( 0.0 );","for( int i = 0; i < NUM_DIR_LIGHTS; i++ ) {","vec3 dirVector = directionalLights[ i ].direction;","vec3 dirHalfVector = normalize( dirVector + viewPosition );","float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","float dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );","float dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );","totalDiffuseLight += directionalLights[ i ].color * dirDiffuseWeight;","totalSpecularLight += directionalLights[ i ].color * specular * dirSpecularWeight * dirDiffuseWeight;","}","#endif","#if NUM_HEMI_LIGHTS > 0","vec3 hemiDiffuse  = vec3( 0.0 );","vec3 hemiSpecular = vec3( 0.0 );","for( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {","vec3 lVector = hemisphereLightDirection[ i ];","float dotProduct = dot( normal, lVector );","float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","totalDiffuseLight += mix( hemisphereLights[ i ].groundColor, hemisphereLights[ i ].skyColor, hemiDiffuseWeight );","float hemiSpecularWeight = 0.0;","vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","hemiSpecularWeight += specularTex.r * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );","vec3 lVectorGround = -lVector;","vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","hemiSpecularWeight += specularTex.r * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );","totalSpecularLight += specular * mix( hemisphereLights[ i ].groundColor, hemisphereLights[ i ].skyColor, hemiDiffuseWeight ) * hemiSpecularWeight * hemiDiffuseWeight;","}","#endif","outgoingLight += diffuseColor.xyz * ( totalDiffuseLight + ambientLightColor + totalSpecularLight );","gl_FragColor = vec4( outgoingLight, diffuseColor.a );",Ei.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;","uniform vec2 uRepeatBase;","uniform sampler2D tNormal;","#ifdef VERTEX_TEXTURES","uniform sampler2D tDisplacement;","uniform float uDisplacementScale;","uniform float uDisplacementBias;","#endif","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vViewPosition;",Ei.shadowmap_pars_vertex,Ei.fog_pars_vertex,"void main() {","vNormal = normalize( normalMatrix * normal );","vTangent = normalize( normalMatrix * tangent.xyz );","vBinormal = cross( vNormal, vTangent ) * tangent.w;","vBinormal = normalize( vBinormal );","vUv = uv;","vec2 uvBase = uv * uRepeatBase;","#ifdef VERTEX_TEXTURES","vec3 dv = texture2D( tDisplacement, uvBase ).xyz;","float df = uDisplacementScale * dv.x + uDisplacementBias;","vec3 displacedPosition = normal * df + position;","vec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );","vec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );","#else","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","#endif","gl_Position = projectionMatrix * mvPosition;","vViewPosition = -mvPosition.xyz;","vec3 normalTex = texture2D( tNormal, uvBase ).xyz * 2.0 - 1.0;","vNormal = normalMatrix * normalTex;",Ei.shadowmap_vertex,Ei.fog_vertex,"}"].join("\n")}},Rf={toon1:{uniforms:{uDirLightPos:{value:new s},uDirLightColor:{value:new v(15658734)},uAmbientLightColor:{value:new v(328965)},uBaseColor:{value:new v(16777215)}},vertexShader:["varying vec3 vNormal;","varying vec3 vRefract;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","vec3 worldNormal = normalize ( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );","vNormal = normalize( normalMatrix * normal );","vec3 I = worldPosition.xyz - cameraPosition;","vRefract = refract( normalize( I ), worldNormal, 1.02 );","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform vec3 uBaseColor;","uniform vec3 uDirLightPos;","uniform vec3 uDirLightColor;","uniform vec3 uAmbientLightColor;","varying vec3 vNormal;","varying vec3 vRefract;","void main() {","float directionalLightWeighting = max( dot( normalize( vNormal ), uDirLightPos ), 0.0);","vec3 lightWeighting = uAmbientLightColor + uDirLightColor * directionalLightWeighting;","float intensity = smoothstep( - 0.5, 1.0, pow( length(lightWeighting), 20.0 ) );","intensity += length(lightWeighting) * 0.2;","float cameraWeighting = dot( normalize( vNormal ), vRefract );","intensity += pow( 1.0 - length( cameraWeighting ), 6.0 );","intensity = intensity * 0.2 + 0.3;","if ( intensity < 0.50 ) {","gl_FragColor = vec4( 2.0 * intensity * uBaseColor, 1.0 );","} else {","gl_FragColor = vec4( 1.0 - 2.0 * ( 1.0 - intensity ) * ( 1.0 - uBaseColor ), 1.0 );","}","}"].join("\n")},toon2:{uniforms:{uDirLightPos:{value:new s},uDirLightColor:{value:new v(15658734)},uAmbientLightColor:{value:new v(328965)},uBaseColor:{value:new v(15658734)},uLineColor1:{value:new v(8421504)},uLineColor2:{value:new v(0)},uLineColor3:{value:new v(0)},uLineColor4:{value:new v(0)}},vertexShader:["varying vec3 vNormal;","void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","vNormal = normalize( normalMatrix * normal );","}"].join("\n"),fragmentShader:["uniform vec3 uBaseColor;","uniform vec3 uLineColor1;","uniform vec3 uLineColor2;","uniform vec3 uLineColor3;","uniform vec3 uLineColor4;","uniform vec3 uDirLightPos;","uniform vec3 uDirLightColor;","uniform vec3 uAmbientLightColor;","varying vec3 vNormal;","void main() {","float camera = max( dot( normalize( vNormal ), vec3( 0.0, 0.0, 1.0 ) ), 0.4);","float light = max( dot( normalize( vNormal ), uDirLightPos ), 0.0);","gl_FragColor = vec4( uBaseColor, 1.0 );","if ( length(uAmbientLightColor + uDirLightColor * light) < 1.00 ) {","gl_FragColor *= vec4( uLineColor1, 1.0 );","}","if ( length(uAmbientLightColor + uDirLightColor * camera) < 0.50 ) {","gl_FragColor *= vec4( uLineColor2, 1.0 );","}","}"].join("\n")},hatching:{uniforms:{uDirLightPos:{value:new s},uDirLightColor:{value:new v(15658734)},uAmbientLightColor:{value:new v(328965)},uBaseColor:{value:new v(16777215)},uLineColor1:{value:new v(0)},uLineColor2:{value:new v(0)},uLineColor3:{value:new v(0)},uLineColor4:{value:new v(0)}},vertexShader:["varying vec3 vNormal;","void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","vNormal = normalize( normalMatrix * normal );","}"].join("\n"),fragmentShader:["uniform vec3 uBaseColor;","uniform vec3 uLineColor1;","uniform vec3 uLineColor2;","uniform vec3 uLineColor3;","uniform vec3 uLineColor4;","uniform vec3 uDirLightPos;","uniform vec3 uDirLightColor;","uniform vec3 uAmbientLightColor;","varying vec3 vNormal;","void main() {","float directionalLightWeighting = max( dot( normalize(vNormal), uDirLightPos ), 0.0);","vec3 lightWeighting = uAmbientLightColor + uDirLightColor * directionalLightWeighting;","gl_FragColor = vec4( uBaseColor, 1.0 );","if ( length(lightWeighting) < 1.00 ) {","if ( mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {","gl_FragColor = vec4( uLineColor1, 1.0 );","}","}","if ( length(lightWeighting) < 0.75 ) {","if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {","gl_FragColor = vec4( uLineColor2, 1.0 );","}","}","if ( length(lightWeighting) < 0.50 ) {","if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {","gl_FragColor = vec4( uLineColor3, 1.0 );","}","}","if ( length(lightWeighting) < 0.3465 ) {","if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {","gl_FragColor = vec4( uLineColor4, 1.0 );","}","}","}"].join("\n")},dotted:{uniforms:{uDirLightPos:{value:new s},uDirLightColor:{value:new v(15658734)},uAmbientLightColor:{value:new v(328965)},uBaseColor:{value:new v(16777215)},uLineColor1:{value:new v(0)}},vertexShader:["varying vec3 vNormal;","void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","vNormal = normalize( normalMatrix * normal );","}"].join("\n"),fragmentShader:["uniform vec3 uBaseColor;","uniform vec3 uLineColor1;","uniform vec3 uLineColor2;","uniform vec3 uLineColor3;","uniform vec3 uLineColor4;","uniform vec3 uDirLightPos;","uniform vec3 uDirLightColor;","uniform vec3 uAmbientLightColor;","varying vec3 vNormal;","void main() {","float directionalLightWeighting = max( dot( normalize(vNormal), uDirLightPos ), 0.0);","vec3 lightWeighting = uAmbientLightColor + uDirLightColor * directionalLightWeighting;","gl_FragColor = vec4( uBaseColor, 1.0 );","if ( length(lightWeighting) < 1.00 ) {","if ( ( mod(gl_FragCoord.x, 4.001) + mod(gl_FragCoord.y, 4.0) ) > 6.00 ) {","gl_FragColor = vec4( uLineColor1, 1.0 );","}","}","if ( length(lightWeighting) < 0.50 ) {","if ( ( mod(gl_FragCoord.x + 2.0, 4.001) + mod(gl_FragCoord.y + 2.0, 4.0) ) > 6.00 ) {","gl_FragColor = vec4( uLineColor1, 1.0 );","}","}","}"].join("\n")}},If=function(e){void 0==e&&(e=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(var t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]};If.prototype.dot=function(e,t,n){return e[0]*t+e[1]*n},If.prototype.dot3=function(e,t,n,r){return e[0]*t+e[1]*n+e[2]*r},If.prototype.dot4=function(e,t,n,r,i){return e[0]*t+e[1]*n+e[2]*r+e[3]*i},If.prototype.noise=function(e,t){var n,r,i=(e+t)*(.5*(Math.sqrt(3)-1)),o=Math.floor(e+i),a=Math.floor(t+i),s=(3-Math.sqrt(3))/6,c=(o+a)*s,u=e-(o-c),l=t-(a-c);u>l?(n=1,r=0):(n=0,r=1);var h=u-n+s,d=l-r+s,f=u-1+2*s,p=l-1+2*s,m=255&o,v=255&a,g=this.perm[m+this.perm[v]]%12,y=this.perm[m+n+this.perm[v+r]]%12,b=this.perm[m+1+this.perm[v+1]]%12,x=.5-u*u-l*l,w=.5-h*h-d*d,_=.5-f*f-p*p;return 70*((x<0?0:(x*=x)*x*this.dot(this.grad3[g],u,l))+(w<0?0:(w*=w)*w*this.dot(this.grad3[y],h,d))+(_<0?0:(_*=_)*_*this.dot(this.grad3[b],f,p)))},If.prototype.noise3d=function(e,t,n){var r,i,o,a,s,c,u=(e+t+n)*(1/3),l=Math.floor(e+u),h=Math.floor(t+u),d=Math.floor(n+u),f=1/6,p=(l+h+d)*f,m=e-(l-p),v=t-(h-p),g=n-(d-p);m>=v?v>=g?(r=1,i=0,o=0,a=1,s=1,c=0):m>=g?(r=1,i=0,o=0,a=1,s=0,c=1):(r=0,i=0,o=1,a=1,s=0,c=1):v<g?(r=0,i=0,o=1,a=0,s=1,c=1):m<g?(r=0,i=1,o=0,a=0,s=1,c=1):(r=0,i=1,o=0,a=1,s=1,c=0);var y=m-r+f,b=v-i+f,x=g-o+f,w=m-a+2*f,_=v-s+2*f,S=g-c+2*f,M=m-1+.5,T=v-1+.5,A=g-1+.5,E=255&l,C=255&h,P=255&d,L=this.perm[E+this.perm[C+this.perm[P]]]%12,O=this.perm[E+r+this.perm[C+i+this.perm[P+o]]]%12,N=this.perm[E+a+this.perm[C+s+this.perm[P+c]]]%12,R=this.perm[E+1+this.perm[C+1+this.perm[P+1]]]%12,I=.6-m*m-v*v-g*g,D=.6-y*y-b*b-x*x,F=.6-w*w-_*_-S*S,k=.6-M*M-T*T-A*A;return 32*((I<0?0:(I*=I)*I*this.dot3(this.grad3[L],m,v,g))+(D<0?0:(D*=D)*D*this.dot3(this.grad3[O],y,b,x))+(F<0?0:(F*=F)*F*this.dot3(this.grad3[N],w,_,S))+(k<0?0:(k*=k)*k*this.dot3(this.grad3[R],M,T,A)))},If.prototype.noise4d=function(e,t,n,r){var i,o,a,s,c,u,l,h,d,f,p,m,v=this.grad4,g=this.simplex,y=this.perm,b=(Math.sqrt(5)-1)/4,x=(5-Math.sqrt(5))/20,w=(e+t+n+r)*b,_=Math.floor(e+w),S=Math.floor(t+w),M=Math.floor(n+w),T=Math.floor(r+w),A=(_+S+M+T)*x,E=e-(_-A),C=t-(S-A),P=n-(M-A),L=r-(T-A),O=(E>C?32:0)+(E>P?16:0)+(C>P?8:0)+(E>L?4:0)+(C>L?2:0)+(P>L?1:0),N=E-(i=g[O][0]>=3?1:0)+x,R=C-(o=g[O][1]>=3?1:0)+x,I=P-(a=g[O][2]>=3?1:0)+x,D=L-(s=g[O][3]>=3?1:0)+x,F=E-(c=g[O][0]>=2?1:0)+2*x,k=C-(u=g[O][1]>=2?1:0)+2*x,U=P-(l=g[O][2]>=2?1:0)+2*x,B=L-(h=g[O][3]>=2?1:0)+2*x,z=E-(d=g[O][0]>=1?1:0)+3*x,j=C-(f=g[O][1]>=1?1:0)+3*x,V=P-(p=g[O][2]>=1?1:0)+3*x,G=L-(m=g[O][3]>=1?1:0)+3*x,W=E-1+4*x,H=C-1+4*x,X=P-1+4*x,q=L-1+4*x,Y=255&_,J=255&S,Q=255&M,Z=255&T,K=y[Y+y[J+y[Q+y[Z]]]]%32,$=y[Y+i+y[J+o+y[Q+a+y[Z+s]]]]%32,ee=y[Y+c+y[J+u+y[Q+l+y[Z+h]]]]%32,te=y[Y+d+y[J+f+y[Q+p+y[Z+m]]]]%32,ne=y[Y+1+y[J+1+y[Q+1+y[Z+1]]]]%32,re=.6-E*E-C*C-P*P-L*L,ie=.6-N*N-R*R-I*I-D*D,oe=.6-F*F-k*k-U*U-B*B,ae=.6-z*z-j*j-V*V-G*G,se=.6-W*W-H*H-X*X-q*q;return 27*((re<0?0:(re*=re)*re*this.dot4(v[K],E,C,P,L))+(ie<0?0:(ie*=ie)*ie*this.dot4(v[$],N,R,I,D))+(oe<0?0:(oe*=oe)*oe*this.dot4(v[ee],F,k,U,B))+(ae<0?0:(ae*=ae)*ae*this.dot4(v[te],z,j,V,G))+(se<0?0:(se*=se)*se*this.dot4(v[ne],W,H,X,q)))};var Df=function(e,t,n){this._scene=e,this._trackInfo=t,this._onUpdate=n,this._mixer=new Dn(e),this._clip=null,this._action=null,this._tracks={},this._propRefs={},this._channelNames=[]};Df.prototype={constructor:Df,init:function(e){for(var t=[],n=this._trackInfo,r=0,i=n.length;r!==i;++r){var o=n[r];t.push(this._addTrack(o.type,o.propertyPath,o.initialValue,o.interpolation))}this._clip=new Rn("editclip",0,t),this._action=this._mixer.clipAction(this._clip).play()},setDisplayTime:function(e){this._action.time=e,this._mixer.update(0),this._onUpdate()},setDuration:function(e){this._clip.duration=e},getChannelNames:function(){return this._channelNames},getChannelKeyTimes:function(e){return this._tracks[e].times},setKeyframe:function(e,t){var n=this._tracks[e],r=n.times,i=Timeliner.binarySearch(r,t),o=n.values,a=n.getValueSize(),s=i*a;if(i<0){s=(i=~i)*a;for(var c=r.length+1,u=o.length+a,l=c-1;l!==i;--l)r[l]=r[l-1];l=u-1;for(var h=s+a-1;l!==h;--l)o[l]=o[l-a]}r[i]=t,this._propRefs[e].getValue(o,s)},delKeyframe:function(e,t){var n=this._tracks[e],r=n.times,i=Timeliner.binarySearch(r,t);if(r.length>1&&i>=0){for(var o=r.length-1,a=n.values,s=n.getValueSize(),c=a.length-s,u=i;u!==o;++u)r[u]=r[u+1];r.pop();for(var l=i*s;l!==c;++l)a[l]=a[l+s];a.length=c}},moveKeyframe:function(e,t,n,r){var i=this._tracks[e],o=i.times,a=Timeliner.binarySearch(o,t);if(a>=0){for(var s=r?o.length:a+1,c=o[a-1]<=t||!r&&t>=o[a+1];a!==s;)o[a++]+=n;c&&this._sort(i)}},serialize:function(){for(var e={duration:this._clip.duration,channels:{}},t=this._channelNames,n=this._tracks,r=e.channels,i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a];r[a]={times:s.times,values:s.values}}return e},deserialize:function(e){var t=this._channelNames,n=this._tracks,r=e.channels;this.setDuration(e.duration);for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a],c=r[a];this._setArray(s.times,c.times),this._setArray(s.values,c.values)}this.setDisplayTime(this._mixer.time)},_sort:function(e){var t=e.times,n=_n.getKeyframeOrder(t);this._setArray(t,_n.sortedArray(t,1,n));var r=e.values,i=e.getValueSize();this._setArray(r,_n.sortedArray(r,i,n))},_setArray:function(e,t){e.length=0,e.push.apply(e,t)},_addTrack:function(e,t,n,r){var i=new e(t,[0],n,r);return i.times=Array.prototype.slice.call(i.times),i.values=Array.prototype.slice.call(i.values),this._channelNames.push(t),this._tracks[t]=i,this._propRefs[t]=new xn(this._scene,t),i}};var Ff={quicksortIP:function(e,t,n){for(var r,i,o=[],a=-1,s=0,c=e.length/t-1,u=0,l=0,h=0,d=function(n,r){for(n*=t,r*=t,h=0;h<t;h++)u=e[n+h],e[n+h]=e[r+h],e[r+h]=u},f=new Float32Array(t),p=new Float32Array(t);;)if(c-s<=25){for(i=s+1;i<=c;i++){for(l=0;l<t;l++)f[l]=e[i*t+l];for(r=i-1;r>=s&&e[r*t+n]>f[n];){for(l=0;l<t;l++)e[(r+1)*t+l]=e[r*t+l];r--}for(l=0;l<t;l++)e[(r+1)*t+l]=f[l]}if(-1==a)break;c=o[a--],s=o[a--]}else{for(i=c,d(s+c>>1,r=s+1),e[s*t+n]>e[c*t+n]&&d(s,c),e[r*t+n]>e[c*t+n]&&d(r,c),e[s*t+n]>e[r*t+n]&&d(s,r),l=0;l<t;l++)p[l]=e[r*t+l];for(;;){do{r++}while(e[r*t+n]<p[n]);do{i--}while(e[i*t+n]>p[n]);if(i<r)break;d(r,i)}for(l=0;l<t;l++)e[(s+1)*t+l]=e[i*t+l],e[i*t+l]=p[l];c-r+1>=i-s?(o[++a]=r,o[++a]=c,c=i-1):(o[++a]=s,o[++a]=i-1,s=r)}return e},Kdtree:function(e,t,n){var r=this,i=0,o=function(e,t){return e.subarray(t*n,t*n+n)};this.root=function e(t,a,s,c){var u,l,h=a%n,d=t.length/n;return a>i&&(i=a),0===d?null:1===d?new r.Node(o(t,0),a,s,c):(Ff.quicksortIP(t,n,h),u=Math.floor(d/2),(l=new r.Node(o(t,u),a,s,u+c)).left=e(t.subarray(0,u*n),a+1,l,c),l.right=e(t.subarray((u+1)*n,t.length),a+1,l,c+u+1),l)}(e,0,null,0),this.getMaxDepth=function(){return i},this.nearest=function(e,i,o){var a,s,c;if(c=new Ff.Kdtree.BinaryHeap(function(e){return-e[1]}),o)for(a=0;a<i;a+=1)c.push([null,o]);for(function r(o){var a,s,u,l,h=o.depth%n,d=t(e,o.obj),f=[];function p(e,t){c.push([e,t]),c.size()>i&&c.pop()}for(l=0;l<n;l+=1)l===o.depth%n?f[l]=e[l]:f[l]=o.obj[l];s=t(f,o.obj),null!==o.right||null!==o.left?(r(a=null===o.right?o.left:null===o.left?o.right:e[h]<o.obj[h]?o.left:o.right),(c.size()<i||d<c.peek()[1])&&p(o,d),(c.size()<i||Math.abs(s)<c.peek()[1])&&null!==(u=a===o.left?o.right:o.left)&&r(u)):(c.size()<i||d<c.peek()[1])&&p(o,d)}(r.root),s=[],a=0;a<i;a+=1)c.content[a][0]&&s.push([c.content[a][0],c.content[a][1]]);return s}}};Ff.Kdtree.prototype.Node=function(e,t,n,r){this.obj=e,this.left=null,this.right=null,this.parent=n,this.depth=t,this.pos=r},Ff.Kdtree.BinaryHeap=function(e){this.content=[],this.scoreFunction=e},Ff.Kdtree.BinaryHeap.prototype={push:function(e){this.content.push(e),this.bubbleUp(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.sinkDown(0)),e},peek:function(){return this.content[0]},remove:function(e){for(var t=this.content.length,n=0;n<t;n++)if(this.content[n]==e){var r=this.content.pop();return void(n!=t-1&&(this.content[n]=r,this.scoreFunction(r)<this.scoreFunction(e)?this.bubbleUp(n):this.sinkDown(n)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(e){for(var t=this.content[e];e>0;){var n=Math.floor((e+1)/2)-1,r=this.content[n];if(!(this.scoreFunction(t)<this.scoreFunction(r)))break;this.content[n]=t,this.content[e]=r,e=n}},sinkDown:function(e){for(var t=this.content.length,n=this.content[e],r=this.scoreFunction(n);;){var i=2*(e+1),o=i-1,a=null;if(o<t){var s=this.content[o],c=this.scoreFunction(s);c<r&&(a=o)}if(i<t){var u=this.content[i];this.scoreFunction(u)<(null===a?r:c)&&(a=i)}if(null===a)break;this.content[e]=this.content[a],this.content[a]=n,e=a}}};var kf={merge:function(e,t,n){var r;console.warn("GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t instanceof fn&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},randomPointInTriangle:function(){var e=new s;return function(t,n,r){var i=new s,o=Math.random(),a=Math.random();o+a>1&&(o=1-o,a=1-a);var c=1-o-a;return i.copy(t),i.multiplyScalar(o),e.copy(n),e.multiplyScalar(a),i.add(e),e.copy(r),e.multiplyScalar(c),i.add(e),i}}(),randomPointInFace:function(e,t){var n,r,i;return n=t.vertices[e.a],r=t.vertices[e.b],i=t.vertices[e.c],kf.randomPointInTriangle(n,r,i)},randomPointsInGeometry:function(e,t){var n,r,i,o,a,s=e.faces,c=e.vertices,u=s.length,l=0,h=[];for(r=0;r<u;r++)i=c[(n=s[r]).a],o=c[n.b],a=c[n.c],n._area=kf.triangleArea(i,o,a),l+=n._area,h[r]=l;function d(e){return function t(n,r){if(r<n)return n;var i=n+Math.floor((r-n)/2);return h[i]>e?t(n,i-1):h[i]<e?t(i+1,r):i}(0,h.length-1)}var f,p=[];for(r=0;r<t;r++)f=d(Math.random()*l),p[r]=kf.randomPointInFace(s[f],e);return p},randomPointsInBufferGeometry:function(e,t){var n,r,i,o,a=e.attributes.position.array,c=0,u=[];r=new s,i=new s,o=new s;var l=a.length/9;for(n=0;n<l;n++)r.set(a[9*n+0],a[9*n+1],a[9*n+2]),i.set(a[9*n+3],a[9*n+4],a[9*n+5]),o.set(a[9*n+6],a[9*n+7],a[9*n+8]),c+=kf.triangleArea(r,i,o),u.push(c);function h(e){return function t(n,r){if(r<n)return n;var i=n+Math.floor((r-n)/2);return u[i]>e?t(n,i-1):u[i]<e?t(i+1,r):i}(0,u.length-1)}var d,f=[];for(n=0;n<t;n++)d=h(Math.random()*c),r.set(a[9*d+0],a[9*d+1],a[9*d+2]),i.set(a[9*d+3],a[9*d+4],a[9*d+5]),o.set(a[9*d+6],a[9*d+7],a[9*d+8]),f[n]=kf.randomPointInTriangle(r,i,o);return f},triangleArea:function(){var e=new s,t=new s;return function(n,r,i){return e.subVectors(r,n),t.subVectors(i,n),e.cross(t),.5*e.length()}}(),center:function(e){return console.warn("GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},Uf={setQuaternionFromProperEuler:function(e,t,n,r,i){var o=Math.cos,a=Math.sin,s=o(n/2),c=a(n/2),u=o((t+r)/2),l=a((t+r)/2),h=o((t-r)/2),d=a((t-r)/2),f=o((r-t)/2),p=a((r-t)/2);"XYX"===i?e.set(s*l,c*h,c*d,s*u):"YZY"===i?e.set(c*d,s*l,c*h,s*u):"ZXZ"===i?e.set(c*h,c*d,s*l,s*u):"XZX"===i?e.set(s*l,c*p,c*f,s*u):"YXY"===i?e.set(c*f,s*l,c*p,s*u):"ZYZ"===i?e.set(c*p,c*f,s*l,s*u):console.warn("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}},Bf={createMultiMaterialObject:function(e,t){for(var n=new oo,r=0,i=t.length;r<i;r++)n.add(new fn(e,t[r]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){e.applyMatrix((new a).getInverse(n.matrixWorld)),t.remove(e),n.add(e)}},zf=function(e){var t,n=this,r=void 0!==e.name&&""!==e.name,o=10,a=10,s=256,c=256,u=new Jn(i.innerWidth/-2,i.innerWidth/2,i.innerHeight/2,i.innerHeight/-2,1,10);u.position.set(0,0,2);var l,h,d=new Yn,f=Hl,p=new Xn.clone(f.uniforms),m=new qn({uniforms:p,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}),v=new fn(new tr(s,c),m);if(d.add(v),r){var g=(l=document.createElement("canvas")).getContext("2d");g.font="Bold 20px Arial";var y=g.measureText(e.name).width;l.width=y,l.height=25,g.font="Bold 20px Arial",g.fillStyle="rgba( 255, 0, 0, 1 )",g.fillText(e.name,0,20);var b=new Kn(l);b.magFilter=Ze,b.minFilter=Ze,b.needsUpdate=!0;var x=new un({map:b,side:J});x.transparent=!0;var w=new tr(l.width,l.height);h=new fn(w,x),d.add(h)}this.enabled=!0,this.size={width:s,height:c,set:function(e,t){this.width=e,this.height=t,v.scale.set(this.width/s,this.height/c,1),n.position.set(n.position.x,n.position.y)}},this.position={x:o,y:a,set:function(e,t){this.x=e,this.y=t;var o=n.size.width,a=n.size.height;v.position.set(-i.innerWidth/2+o/2+this.x,i.innerHeight/2-a/2-this.y,0),r&&h.position.set(v.position.x,v.position.y-n.size.height/2+l.height/2,0)}},this.render=function(n){this.enabled&&(p.tDiffuse.value=e.shadow.map.texture,t=n.autoClear,n.autoClear=!1,n.clearDepth(),n.render(d,u),n.autoClear=t)},this.updateForWindowResize=function(){this.enabled&&(u.left=i.innerWidth/-2,u.right=i.innerWidth/2,u.top=i.innerHeight/2,u.bottom=i.innerHeight/-2,u.updateProjectionMatrix(),this.update())},this.update=function(){this.position.set(this.position.x,this.position.y),this.size.set(this.size.width,this.size.height)},this.update()};function jf(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),n=new k,r=[],i=[],o=new v(0,0,1),a=new v(0,1,0),s=0;s<t.length;s++){var c=t[s];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new N(r,3)),n.addAttribute("color",new N(i,3));var u=new ln({vertexColors:K,depthTest:!1,depthWrite:!1,transparent:!0});Eo.call(this,n,u),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}zf.prototype.constructor=zf,jf.prototype=Object.create(Eo.prototype),jf.prototype.constructor=jf,jf.prototype.updateMatrixWorld=function(){var e=new s,t=new a,n=new a;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,c=0;s<i.length;s++){var u=i[s];u.parent&&u.parent.isBone&&(t.multiplyMatrices(n,u.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(c,e.x,e.y,e.z),t.multiplyMatrices(n,u.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(c+1,e.x,e.y,e.z),c+=2)}o.getAttribute("position").needsUpdate=!0,p.prototype.updateMatrixWorld.call(this,r)}}();var Vf={retarget:function(){var e=new s,t=new c,n=new s,r=new a,i=new a,o=new a;return function(a,s,c){(c=c||{}).preserveMatrix=void 0===c.preserveMatrix||c.preserveMatrix,c.preservePosition=void 0===c.preservePosition||c.preservePosition,c.preserveHipPosition=void 0!==c.preserveHipPosition&&c.preserveHipPosition,c.useTargetMatrix=void 0!==c.useTargetMatrix&&c.useTargetMatrix,c.hip=void 0!==c.hip?c.hip:"hip",c.names=c.names||{};var u,l,h,d,f,p,m=s.isObject3D?s.skeleton.bones:this.getBones(s),v=a.isObject3D?a.skeleton.bones:this.getBones(a);if(a.isObject3D?a.skeleton.pose():(c.useTargetMatrix=!0,c.preserveMatrix=!1),c.preservePosition)for(f=[],p=0;p<v.length;p++)f.push(v[p].position.clone());if(c.preserveMatrix)for(a.updateMatrixWorld(),a.matrixWorld.identity(),p=0;p<a.children.length;++p)a.children[p].updateMatrixWorld(!0);if(c.offsets)for(u=[],p=0;p<v.length;++p)l=v[p],h=c.names[l.name]||l.name,c.offsets&&c.offsets[h]&&(l.matrix.multiply(c.offsets[h]),l.matrix.decompose(l.position,l.quaternion,l.scale),l.updateMatrixWorld()),u.push(l.matrixWorld.clone());for(p=0;p<v.length;++p){if(l=v[p],h=c.names[l.name]||l.name,d=this.getBoneByName(h,m),o.copy(l.matrixWorld),d){if(d.updateMatrixWorld(),c.useTargetMatrix?i.copy(d.matrixWorld):(i.getInverse(a.matrixWorld),i.multiply(d.matrixWorld)),n.setFromMatrixScale(i),i.scale(n.set(1/n.x,1/n.y,1/n.z)),o.makeRotationFromQuaternion(t.setFromRotationMatrix(i)),a.isObject3D){var g=v.indexOf(l),y=u?u[g]:r.getInverse(a.skeleton.boneInverses[g]);o.multiply(y)}o.copyPosition(i)}l.parent&&l.parent.isBone?(l.matrix.getInverse(l.parent.matrixWorld),l.matrix.multiply(o)):l.matrix.copy(o),c.preserveHipPosition&&h===c.hip&&l.matrix.setPosition(e.set(0,l.position.y,0)),l.matrix.decompose(l.position,l.quaternion,l.scale),l.updateMatrixWorld()}if(c.preservePosition)for(p=0;p<v.length;++p)l=v[p],(h=c.names[l.name]||l.name)!==c.hip&&l.position.copy(f[p]);c.preserveMatrix&&a.updateMatrixWorld(!0)}}(),retargetClip:function(e,t,n,r){(r=r||{}).useFirstFramePosition=void 0!==r.useFirstFramePosition&&r.useFirstFramePosition,r.fps=void 0!==r.fps?r.fps:30,r.names=r.names||[],t.isObject3D||(t=this.getHelperFromSkeleton(t));var i,o,a,s,c,u,l=Math.round(n.duration*(r.fps/1e3)*1e3),h=1/r.fps,d=[],f=new Dn(t),p=this.getBones(e.skeleton),m=[];for(f.clipAction(n).play(),f.update(0),t.updateMatrixWorld(),c=0;c<l;++c){var v=c*h;for(this.retarget(e,t,r),u=0;u<p.length;++u)s=r.names[p[u].name]||p[u].name,this.getBoneByName(s,t.skeleton)&&(o=p[u],a=m[u]=m[u]||{bone:o},r.hip===s&&(a.pos||(a.pos={times:new Float32Array(l),values:new Float32Array(3*l)}),r.useFirstFramePosition&&(0===c&&(i=o.position.clone()),o.position.sub(i)),a.pos.times[c]=v,o.position.toArray(a.pos.values,3*c)),a.quat||(a.quat={times:new Float32Array(l),values:new Float32Array(4*l)}),a.quat.times[c]=v,o.quaternion.toArray(a.quat.values,4*c));f.update(h),t.updateMatrixWorld()}for(c=0;c<m.length;++c)(a=m[c])&&(a.pos&&d.push(new Nn(".bones["+a.bone.name+"].position",a.pos.times,a.pos.values)),d.push(new Ln(".bones["+a.bone.name+"].quaternion",a.quat.times,a.quat.values)));return f.uncacheAction(n),new Rn(n.name,-1,d)},getHelperFromSkeleton:function(e){var t=new jf(e.bones[0]);return t.skeleton=e,t},getSkeletonOffsets:function(){var e=new s,t=new s,n=new s,r=new s,i=new x,o=new x;return function(s,c,u){(u=u||{}).hip=void 0!==u.hip?u.hip:"hip",u.names=u.names||{},c.isObject3D||(c=this.getHelperFromSkeleton(c));var h,d,f,p,m=Object.keys(u.names),v=Object.values(u.names),g=c.isObject3D?c.skeleton.bones:this.getBones(c),y=s.isObject3D?s.skeleton.bones:this.getBones(s),b=[];for(s.skeleton.pose(),p=0;p<y.length;++p)if(h=y[p],f=u.names[h.name]||h.name,(d=this.getBoneByName(f,g))&&f!==u.hip){var w=this.getNearestBone(h.parent,m),_=this.getNearestBone(d.parent,v);w.updateMatrixWorld(),_.updateMatrixWorld(),e.setFromMatrixPosition(w.matrixWorld),t.setFromMatrixPosition(h.matrixWorld),n.setFromMatrixPosition(_.matrixWorld),r.setFromMatrixPosition(d.matrixWorld),i.subVectors(new x(t.x,t.y),new x(e.x,e.y)).normalize(),o.subVectors(new x(r.x,r.y),new x(n.x,n.y)).normalize();var S=i.angle()-o.angle(),M=(new a).makeRotationFromEuler(new l(0,0,S));h.matrix.multiply(M),h.matrix.decompose(h.position,h.quaternion,h.scale),h.updateMatrixWorld(),b[f]=M}return b}}(),renameBones:function(e,t){for(var n=this.getBones(e),r=0;r<n.length;++r){var i=n[r];t[i.name]&&(i.name=t[i.name])}return this},getBones:function(e){return Array.isArray(e)?e:e.bones},getBoneByName:function(e,t){for(var n=0,r=this.getBones(t);n<r.length;n++)if(e===r[n].name)return r[n]},getNearestBone:function(e,t){for(;e.isBone;){if(-1!==t.indexOf(e.name))return e;e=e.parent}},findBoneTrackData:function(e,t){for(var n=/\[(.*)\]\.(.*)/,r={name:e},i=0;i<t.length;++i){var o=n.exec(t[i].name);o&&e===o[1]&&(r[o[2]]=i)}return r},getEqualsBonesNames:function(e,t){var n=this.getBones(e),r=this.getBones(t),i=[];e:for(var o=0;o<n.length;o++)for(var a=n[o].name,s=0;s<r.length;s++)if(a===r[s].name){i.push(a);continue e}return i}},Gf=function(e,t,n){var r=this;this.volume=e,t=t||0,Object.defineProperty(this,"index",{get:function(){return t},set:function(e){return t=e,r.geometryNeedsUpdate=!0,t}}),this.axis=n||"z",this.canvas=document.createElement("canvas"),this.canvasBuffer=document.createElement("canvas"),this.updateGeometry();var i=new Kn(this.canvas);i.minFilter=Ze,i.wrapS=i.wrapT=Xe;var o=new un({map:i,side:J,transparent:!0});this.mesh=new fn(this.geometry,o),this.geometryNeedsUpdate=!0,this.repaint()};Gf.prototype={constructor:Gf,repaint:function(){this.geometryNeedsUpdate&&this.updateGeometry();var e=this.iLength,t=this.jLength,n=this.sliceAccess,r=this.volume,i=this.canvasBuffer,o=this.ctxBuffer,a=o.getImageData(0,0,e,t),s=a.data,c=r.data,u=r.upperThreshold,l=r.lowerThreshold,h=r.windowLow,d=r.windowHigh,f=0;if("label"===r.dataType)for(var p=0;p<t;p++)for(var m=0;m<e;m++){var v=c[n(m,p)];v=v>=this.colorMap.length?v%this.colorMap.length+1:v;var g=this.colorMap[v];s[4*f]=g>>24&255,s[4*f+1]=g>>16&255,s[4*f+2]=g>>8&255,s[4*f+3]=255&g,f++}else for(p=0;p<t;p++)for(m=0;m<e;m++){var y=c[n(m,p)],b=255;b=u>=y&&l<=y?b:0,y=(y=Math.floor(255*(y-h)/(d-h)))>255?255:y<0?0:0|y,s[4*f]=y,s[4*f+1]=y,s[4*f+2]=y,s[4*f+3]=b,f++}o.putImageData(a,0,0),this.ctx.drawImage(i,0,0,e,t,0,0,this.canvas.width,this.canvas.height),this.mesh.material.map.needsUpdate=!0},updateGeometry:function(){var e=this.volume.extractPerpendicularPlane(this.axis,this.index);this.sliceAccess=e.sliceAccess,this.jLength=e.jLength,this.iLength=e.iLength,this.matrix=e.matrix,this.canvas.width=e.planeWidth,this.canvas.height=e.planeHeight,this.canvasBuffer.width=this.iLength,this.canvasBuffer.height=this.jLength,this.ctx=this.canvas.getContext("2d"),this.ctxBuffer=this.canvasBuffer.getContext("2d"),this.geometry=new tr(e.planeWidth,e.planeHeight),this.mesh&&(this.mesh.geometry=this.geometry,this.mesh.matrix=(new a).identity(),this.mesh.applyMatrix(this.matrix)),this.geometryNeedsUpdate=!1}};var Wf=function(){p.call(this);var e,t=this,n=[0,0],r=!1,i=new s;this.matrixAutoUpdate=!1,this.getGamepad=function(){return e},this.getTouchpadState=function(){return r},this.update=function(){if(void 0!==(e=function(){for(var e=navigator.getGamepads&&navigator.getGamepads(),t=0;t<4;t++){var n=e[t];if(n&&"Daydream Controller"===n.id)return n}}())&&void 0!==e.pose){var o=e.pose;if(null===o)return;null!==o.orientation&&t.quaternion.fromArray(o.orientation),t.updateMatrix(),t.visible=!0,null===o.angularVelocity||i.equals(o.angularVelocity)||(i.fromArray(o.angularVelocity),t.dispatchEvent({type:"angularvelocitychanged",angularVelocity:i})),n[0]===e.axes[0]&&n[1]===e.axes[1]||(n[0]=e.axes[0],n[1]=e.axes[1],t.dispatchEvent({type:"axischanged",axes:n})),r!==e.buttons[0].pressed&&(r=e.buttons[0].pressed,t.dispatchEvent({type:r?"touchpaddown":"touchpadup"}))}else t.visible=!1},this.getTouchPadState=function(){return console.warn("DaydreamController: getTouchPadState() is now getTouchpadState()"),r}};(Wf.prototype=Object.create(p.prototype)).constructor=Wf;var Hf=function(){p.call(this);var e,t=this,n=[0,0],r=!1,i=!1,o=new s;this.matrixAutoUpdate=!0,this.getGamepad=function(){return e},this.getTouchpadState=function(){return r},this.update=function(){if(void 0!==(e=function(){for(var e=navigator.getGamepads&&navigator.getGamepads(),t=0;t<4;t++){var n=e[t];if(n&&("Gear VR Controller"===n.id||"Oculus Go Controller"===n.id))return n}}())&&void 0!==e.pose){var a=e.pose;if(null===a)return;null!==a.orientation&&t.quaternion.fromArray(a.orientation),t.updateMatrix(),t.visible=!0,null===a.angularVelocity||o.equals(a.angularVelocity)||(o.fromArray(a.angularVelocity),t.dispatchEvent({type:"angularvelocitychanged",angularVelocity:o})),n[0]===e.axes[0]&&n[1]===e.axes[1]||(n[0]=e.axes[0],n[1]=e.axes[1],t.dispatchEvent({type:"axischanged",axes:n})),r!==e.buttons[0].pressed&&(r=e.buttons[0].pressed,t.dispatchEvent({type:r?"touchpaddown":"touchpadup",axes:n})),i!==e.buttons[1].pressed&&(i=e.buttons[1].pressed,t.dispatchEvent({type:i?"triggerdown":"triggerup"}))}else t.visible=!1},this.getTouchPadState=function(){return console.warn("GearVRController: getTouchPadState() is now getTouchpadState()"),r},this.setHand=function(){console.warn("GearVRController: setHand() has been removed.")}};(Hf.prototype=Object.create(p.prototype)).constructor=Hf;var Xf=function(e){p.call(this);var t,n=this,r=[0,0],i=!1,o=!1,s=!1,c=!1;this.matrixAutoUpdate=!1,this.standingMatrix=new a,this.getGamepad=function(){return t},this.getButtonState=function(e){return"thumbpad"===e?i:"trigger"===e?o:"grips"===e?s:"menu"===e?c:void 0},this.update=function(){if(void 0!==(t=function(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0;n<t.length;n++){var i=t[n];if(i&&("OpenVR Gamepad"===i.id||i.id.startsWith("Oculus Touch")||i.id.startsWith("Spatial Controller"))){if(r===e)return i;r++}}}(e))&&void 0!==t.pose){if(null===t.pose)return;var a=t.pose;null!==a.position&&n.position.fromArray(a.position),null!==a.orientation&&n.quaternion.fromArray(a.orientation),n.matrix.compose(n.position,n.quaternion,n.scale),n.matrix.premultiply(n.standingMatrix),n.matrixWorldNeedsUpdate=!0,n.visible=!0,r[0]===t.axes[0]&&r[1]===t.axes[1]||(r[0]=t.axes[0],r[1]=t.axes[1],n.dispatchEvent({type:"axischanged",axes:r})),i!==t.buttons[0].pressed&&(i=t.buttons[0].pressed,n.dispatchEvent({type:i?"thumbpaddown":"thumbpadup",axes:r})),o!==t.buttons[1].pressed&&(o=t.buttons[1].pressed,n.dispatchEvent({type:o?"triggerdown":"triggerup"})),s!==t.buttons[2].pressed&&(s=t.buttons[2].pressed,n.dispatchEvent({type:s?"gripsdown":"gripsup"})),c!==t.buttons[3].pressed&&(c=t.buttons[3].pressed,n.dispatchEvent({type:c?"menudown":"menuup"}))}else n.visible=!1}};function qf(e,t,n,r){_.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Yf(e,t,n,r)),this.mergeVertices()}function Yf(e,t,n,r){k.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],c=[],u=[],l=[],h=new s,d=new x;for(c.push(0,0,0),u.push(0,0,1),l.push(.5,.5),o=0,i=3;o<=t;o++,i+=3){var f=n+o/t*r;h.x=e*Math.cos(f),h.y=e*Math.sin(f),c.push(h.x,h.y,h.z),u.push(0,0,1),d.x=(c[i]/e+1)/2,d.y=(c[i+1]/e+1)/2,l.push(d.x,d.y)}for(i=1;i<=t;i++)a.push(i,i+1,0);this.setIndex(a),this.addAttribute("position",new N(c,3)),this.addAttribute("normal",new N(u,3)),this.addAttribute("uv",new N(l,2))}function Jf(e,t){_.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Qf(e,t)),this.mergeVertices()}function Qf(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Gr.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Zf(e,t){_.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Kf(e,t)),this.mergeVertices()}function Kf(e,t){k.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))u(e);else for(var c=0;c<e.length;c++)u(e[c]),this.addGroup(a,s,c),a+=s,s=0;function u(e){var a,c,u,l=r.length/3,h=e.extractPoints(t),d=h.shape,f=h.holes;if(!1===ws.isClockWise(d))for(d=d.reverse(),a=0,c=f.length;a<c;a++)u=f[a],!0===ws.isClockWise(u)&&(f[a]=u.reverse());var p=ws.triangulateShape(d,f);for(a=0,c=f.length;a<c;a++)u=f[a],d=d.concat(u);for(a=0,c=d.length;a<c;a++){var m=d[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,c=p.length;a<c;a++){var v=p[a],g=v[0]+l,y=v[1]+l,b=v[2]+l;n.push(g,y,b),s+=3}}this.setIndex(n),this.addAttribute("position",new N(r,3)),this.addAttribute("normal",new N(i,3)),this.addAttribute("uv",new N(o,2))}function $f(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(Xf.prototype=Object.create(p.prototype)).constructor=Xf,qf.prototype=Object.create(_.prototype),qf.prototype.constructor=qf,Yf.prototype=Object.create(k.prototype),Yf.prototype.constructor=Yf,Jf.prototype=Object.create(_.prototype),Jf.prototype.constructor=Jf,Qf.prototype=Object.create(Gr.prototype),Qf.prototype.constructor=Qf,Zf.prototype=Object.create(_.prototype),Zf.prototype.constructor=Zf,Zf.prototype.toJSON=function(){var e=_.prototype.toJSON.call(this);return $f(this.parameters.shapes,e)},Kf.prototype=Object.create(k.prototype),Kf.prototype.constructor=Kf,Kf.prototype.toJSON=function(){var e=k.prototype.toJSON.call(this);return $f(this.parameters.shapes,e)};var ep=function(e){Xf.call(this,e);var t=2*Math.PI,n={COLOR:0,SIZE:1},r=n.COLOR,i=new v(1,1,1),o=1;var a=new fn(s=new Yf(1,32),d=new un({map:function(){var e=document.createElement("canvas");e.width=256,e.height=256;for(var n=e.getContext("2d"),r=n.getImageData(0,0,256,256),i=r.data,o=new v,a=0,s=0;a<i.length;a+=4,s++){var c=s%256/256-.5,u=Math.floor(s/256)/256-.5;o.setHSL(Math.atan2(u,c)/t,1,2*(.5-Math.sqrt(c*c+u*u))),i[a+0]=256*o.r,i[a+1]=256*o.g,i[a+2]=256*o.b,i[a+3]=256}return n.putImageData(r,0,0),new xc(e)}()}));a.position.set(0,.005,.0495),a.rotation.x=-1.45,a.scale.setScalar(.02),this.add(a);var s=new Qf(.1,2);(d=new un).color=i;var c=new fn(s,d);a.add(c);var u=new oo;u.position.set(0,.005,.0495),u.rotation.x=-1.45,u.scale.setScalar(.02),this.add(u);var l=new Ka;l.moveTo(0,-1),l.lineTo(1,1),l.lineTo(-1,1);var h=new fn(s=new Kf(l),d=new un({color:2236962,wireframe:!0}));h.position.z=.001,p(h.geometry,1),u.add(h);var d;s=new Kf(l);(d=new un({side:J})).color=i;var f=new fn(s,d);function p(e,t){var n=Math.atan(.25),r=1.5*t,i=Math.tan(n)*r*2,o=e.attributes.position;o.setXYZ(0,0,-.75,0),o.setXYZ(1,0+i/2,-.75+r,0),o.setXYZ(2,0-i/2,-.75+r,0),o.needsUpdate=!0}f.position.z=.0011,p(f.geometry,.5),u.add(f),u.visible=!1,this.getColor=function(){return i},this.getSize=function(){return o},this.addEventListener("axischanged",function(e){if(!1!==this.getButtonState("thumbpad")){var a=e.axes[0]/2,s=-e.axes[1]/2;if(r===n.COLOR&&(i.setHSL(Math.atan2(s,a)/t,1,2*(.5-Math.sqrt(a*a+s*s))),c.position.set(e.axes[0],e.axes[1],0)),r===n.SIZE){var u=.5-s;o=2*u,p(f.geometry,u)}}}),this.addEventListener("gripsdown",function(){return r===n.COLOR?(r=n.SIZE,a.visible=!1,void(u.visible=!0)):r===n.SIZE?(r=n.COLOR,a.visible=!0,void(u.visible=!1)):void 0})};(ep.prototype=Object.create(Xf.prototype)).constructor=ep;var tp,np={createButton:function(e,t){function n(t){a.style.display="",a.style.cursor="pointer",a.style.left="calc(50% - 50px)",a.style.width="100px",a.textContent="ENTER VR",a.onmouseenter=function(){a.style.opacity="1.0"},a.onmouseleave=function(){a.style.opacity="0.5"},a.onclick=function(){t.isPresenting?t.exitPresent():t.requestPresent([{source:e.domElement}])},e.vr.setDevice(t)}function r(){a.style.display="",a.style.cursor="auto",a.style.left="calc(50% - 75px)",a.style.width="150px",a.textContent="VR NOT FOUND",a.onmouseenter=null,a.onmouseleave=null,a.onclick=null,e.vr.setDevice(null)}function o(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}var a;if(t&&t.frameOfReferenceType&&e.vr.setFrameOfReferenceType(t.frameOfReferenceType),"xr"in navigator)return(a=document.createElement("button")).style.display="none",o(a),navigator.xr.requestDevice().then(function(t){t.supportsSession({immersive:!0,exclusive:!0}).then(function(){!function(t){var n=null;function r(t){t.addEventListener("end",i),e.vr.setSession(t),a.textContent="EXIT VR",n=t}function i(t){n.removeEventListener("end",i),e.vr.setSession(null),a.textContent="ENTER VR",n=null}a.style.display="",a.style.cursor="pointer",a.style.left="calc(50% - 50px)",a.style.width="100px",a.textContent="ENTER VR",a.onmouseenter=function(){a.style.opacity="1.0"},a.onmouseleave=function(){a.style.opacity="0.5"},a.onclick=function(){null===n?t.requestSession({immersive:!0,exclusive:!0}).then(r):n.end()},e.vr.setDevice(t)}(t)}).catch(r)}).catch(r),a;if("getVRDisplays"in navigator)return(a=document.createElement("button")).style.display="none",o(a),i.addEventListener("vrdisplayconnect",function(e){n(e.display)},!1),i.addEventListener("vrdisplaydisconnect",function(e){r()},!1),i.addEventListener("vrdisplaypresentchange",function(e){a.textContent=e.display.isPresenting?"EXIT VR":"ENTER VR"},!1),i.addEventListener("vrdisplayactivate",function(t){t.display.requestPresent([{source:e.domElement}])},!1),navigator.getVRDisplays().then(function(e){e.length>0?n(e[0]):r()}).catch(r),a;var s=document.createElement("a");return s.href="https://webvr.info",s.innerHTML="WEBVR NOT SUPPORTED",s.style.left="calc(50% - 90px)",s.style.width="180px",s.style.textDecoration="none",o(s),s},checkAvailability:function(){return console.warn("WEBVR.checkAvailability has been deprecated."),new Promise(function(){})},getMessageContainer:function(){return console.warn("WEBVR.getMessageContainer has been deprecated."),document.createElement("div")},getButton:function(){return console.warn("WEBVR.getButton has been deprecated."),document.createElement("div")},getVRDisplay:function(){console.warn("WEBVR.getVRDisplay has been deprecated.")}};function rp(){var e=arguments;this.uuid=o.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[e[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function ip(e){p.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function op(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}Object.assign(rp.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=arguments,t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._paths,a=this._parsedPaths,s=this._bindings,c=s.length,u=void 0,l=0,h=arguments.length;l!==h;++l){var d=e[l],f=d.uuid,p=i[f];if(void 0===p){p=n++,i[f]=p,t.push(d);for(var m=0,v=c;m!==v;++m)s[m].push(new xn(d,o[m],a[m]))}else if(p<r){u=t[p];var g=--r,y=t[g];i[y.uuid]=p,t[p]=y,i[f]=g,t[g]=d;for(m=0,v=c;m!==v;++m){var b=s[m],x=b[g],w=b[p];b[p]=x,void 0===w&&(w=new xn(d,o[m],a[m])),b[g]=w}}else t[p]!==u&&console.error("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){for(var e=arguments,t=this._objects,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var c=e[a],u=c.uuid,l=r[u];if(void 0!==l&&l>=n){var h=n++,d=t[h];r[d.uuid]=l,t[l]=d,r[u]=h,t[h]=c;for(var f=0,p=o;f!==p;++f){var m=i[f],v=m[h],g=m[l];m[l]=v,m[h]=g}}}this.nCachedObjects_=n},uncache:function(){for(var e=arguments,t=this._objects,n=t.length,r=this.nCachedObjects_,i=this._indicesByUUID,o=this._bindings,a=o.length,s=0,c=arguments.length;s!==c;++s){var u=e[s].uuid,l=i[u];if(void 0!==l)if(delete i[u],l<r){var h=--r,d=t[h],f=t[y=--n];i[d.uuid]=l,t[l]=d,i[f.uuid]=h,t[h]=f,t.pop();for(var p=0,m=a;p!==m;++p){var v=(b=o[p])[h],g=b[y];b[l]=v,b[h]=g,b.pop()}}else{var y;i[(f=t[y=--n]).uuid]=l,t[l]=f,t.pop();for(p=0,m=a;p!==m;++p){var b;(b=o[p])[l]=b[y],b.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,c=s.length,u=this.nCachedObjects_,l=new Array(c);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(l);for(var h=u,d=s.length;h!==d;++h){var f=s[h];l[h]=new xn(f,e,t)}return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),ip.prototype=Object.assign(Object.create(p.prototype),{constructor:ip,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("Audio: this Audio has no playback control.")}else console.warn("Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),Object.assign(op.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}});var ap={getContext:function(){return void 0===tp&&(tp=new(i.AudioContext||i.webkitAudioContext)),tp},setContext:function(e){tp=e}};function sp(){p.call(this),this.type="AudioListener",this.context=ap.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function cp(e){ip.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function up(e,t,n){p.call(this),this.type="CubeCamera";var r=new Hn(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new s(1,0,0)),this.add(r);var i=new Hn(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new s(-1,0,0)),this.add(i);var o=new Hn(90,1,e,t);o.up.set(0,0,1),o.lookAt(new s(0,1,0)),this.add(o);var a=new Hn(90,1,e,t);a.up.set(0,0,-1),a.lookAt(new s(0,-1,0)),this.add(a);var c=new Hn(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new s(0,0,1)),this.add(c);var u=new Hn(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new s(0,0,-1)),this.add(u);var l={format:ft,magFilter:Ze,minFilter:Ze};this.renderTarget=new Fo(n,n,l),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,s=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,a,n),n.activeCubeFace=4,e.render(t,c,n),n.texture.generateMipmaps=s,n.activeCubeFace=5,e.render(t,u,n),e.setRenderTarget(null)},this.clear=function(e,t,n,r){for(var i=this.renderTarget,o=0;o<6;o++)i.activeCubeFace=o,e.setRenderTarget(i),e.clear(t,n,r);e.setRenderTarget(null)}}function lp(e,t,n,r){"number"==typeof n&&(r=n,n=!1,console.error("InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),M.call(this,e,t,n),this.meshPerAttribute=r||1}function hp(e){this.type="Font",this.data=e}function dp(e,t,n,r,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,c,u,l,h,d,f,p=new Ms;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;){switch(m[v++]){case"m":a=m[v++]*t+n,s=m[v++]*t+r,p.moveTo(a,s);break;case"l":a=m[v++]*t+n,s=m[v++]*t+r,p.lineTo(a,s);break;case"q":c=m[v++]*t+n,u=m[v++]*t+r,l=m[v++]*t+n,h=m[v++]*t+r,p.quadraticCurveTo(l,h,c,u);break;case"b":c=m[v++]*t+n,u=m[v++]*t+r,l=m[v++]*t+n,h=m[v++]*t+r,d=m[v++]*t+n,f=m[v++]*t+r,p.bezierCurveTo(l,h,d,f,c,u)}}return{offsetX:o.ha*t,path:p}}}function fp(e,t,n,r,i,o,a){Bn.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function pp(e,t,n,r,i,o,a){zn.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function mp(e,t){_.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new vp(e,t)),this.mergeVertices()}function vp(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];Gr.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function gp(e,t){k.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,a,s=[],c=Math.cos(o.DEG2RAD*t),u=[0,0],l={},h=["a","b","c"];e.isBufferGeometry?(a=new _).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var d=a.vertices,f=a.faces,p=0,m=f.length;p<m;p++)for(var v=f[p],g=0;g<3;g++)n=v[h[g]],r=v[h[(g+1)%3]],u[0]=Math.min(n,r),u[1]=Math.max(n,r),void 0===l[i=u[0]+","+u[1]]?l[i]={index1:u[0],index2:u[1],face1:p,face2:void 0}:l[i].face2=p;for(i in l){var y=l[i];if(void 0===y.face2||f[y.face1].normal.dot(f[y.face2].normal)<=c){var b=d[y.index1];s.push(b.x,b.y,b.z),b=d[y.index2],s.push(b.x,b.y,b.z)}}this.addAttribute("position",new N(s,3))}function yp(e,t){_.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new bp(e,t)),this.mergeVertices()}function bp(e,t){k.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t};for(var n=this,r=[],i=[],o=0,a=(e=Array.isArray(e)?e:[e]).length;o<a;o++){c(e[o])}function c(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,c=void 0!==t.steps?t.steps:1,u=void 0!==t.depth?t.depth:100,l=void 0===t.bevelEnabled||t.bevelEnabled,h=void 0!==t.bevelThickness?t.bevelThickness:6,d=void 0!==t.bevelSize?t.bevelSize:h-2,f=void 0!==t.bevelSegments?t.bevelSegments:3,p=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:_p;void 0!==t.amount&&(console.warn("ExtrudeBufferGeometry: amount has been renamed to depth."),u=t.amount);var v,g,y,b,w,_,S,M,T=!1;p&&(v=p.getSpacedPoints(c),T=!0,l=!1,g=p.computeFrenetFrames(c,!1),y=new s,b=new s,w=new s),l||(f=0,h=0,d=0);var A=e.extractPoints(a),E=A.shape,C=A.holes;if(!ws.isClockWise(E))for(E=E.reverse(),S=0,M=C.length;S<M;S++)_=C[S],ws.isClockWise(_)&&(C[S]=_.reverse());var P=ws.triangulateShape(E,C),L=E;for(S=0,M=C.length;S<M;S++)_=C[S],E=E.concat(_);function O(e,t,n){return t||console.error("ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var N,R,I,D,F,k,U=E.length,B=P.length;function z(e,t,n){var r,i,o,a=e.x-t.x,s=e.y-t.y,c=n.x-e.x,u=n.y-e.y,l=a*a+s*s,h=a*u-s*c;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(l),f=Math.sqrt(c*c+u*u),p=t.x-s/d,m=t.y+a/d,v=((n.x-u/f-p)*u-(n.y+c/f-m)*c)/(a*u-s*c),g=(r=p+a*v-e.x)*r+(i=m+s*v-e.y)*i;if(g<=2)return new x(r,i);o=Math.sqrt(g/2)}else{var y=!1;a>Number.EPSILON?c>Number.EPSILON&&(y=!0):a<-Number.EPSILON?c<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(u)&&(y=!0),y?(r=-s,i=a,o=Math.sqrt(l)):(r=a,i=s,o=Math.sqrt(l/2))}return new x(r/o,i/o)}for(var j=[],V=0,G=L.length,W=G-1,H=V+1;V<G;V++,W++,H++)W===G&&(W=0),H===G&&(H=0),j[V]=z(L[V],L[W],L[H]);var X,q,Y=[],J=j.concat();for(S=0,M=C.length;S<M;S++){for(_=C[S],X=[],V=0,W=(G=_.length)-1,H=V+1;V<G;V++,W++,H++)W===G&&(W=0),H===G&&(H=0),X[V]=z(_[V],_[W],_[H]);Y.push(X),J=J.concat(X)}for(N=0;N<f;N++){for(I=N/f,D=h*Math.cos(I*Math.PI/2),R=d*Math.sin(I*Math.PI/2),V=0,G=L.length;V<G;V++)Z((F=O(L[V],j[V],R)).x,F.y,-D);for(S=0,M=C.length;S<M;S++)for(_=C[S],X=Y[S],V=0,G=_.length;V<G;V++)Z((F=O(_[V],X[V],R)).x,F.y,-D)}for(R=d,V=0;V<U;V++)F=l?O(E[V],J[V],R):E[V],T?(b.copy(g.normals[0]).multiplyScalar(F.x),y.copy(g.binormals[0]).multiplyScalar(F.y),w.copy(v[0]).add(b).add(y),Z(w.x,w.y,w.z)):Z(F.x,F.y,0);for(q=1;q<=c;q++)for(V=0;V<U;V++)F=l?O(E[V],J[V],R):E[V],T?(b.copy(g.normals[q]).multiplyScalar(F.x),y.copy(g.binormals[q]).multiplyScalar(F.y),w.copy(v[q]).add(b).add(y),Z(w.x,w.y,w.z)):Z(F.x,F.y,u/c*q);for(N=f-1;N>=0;N--){for(I=N/f,D=h*Math.cos(I*Math.PI/2),R=d*Math.sin(I*Math.PI/2),V=0,G=L.length;V<G;V++)Z((F=O(L[V],j[V],R)).x,F.y,u+D);for(S=0,M=C.length;S<M;S++)for(_=C[S],X=Y[S],V=0,G=_.length;V<G;V++)F=O(_[V],X[V],R),T?Z(F.x,F.y+v[c-1].y,v[c-1].x+D):Z(F.x,F.y,u+D)}function Q(e,t){var n,r;for(V=e.length;--V>=0;){n=V,(r=V-1)<0&&(r=e.length-1);var i=0,o=c+2*f;for(i=0;i<o;i++){var a=U*i,s=U*(i+1);$(t+n+a,t+r+a,t+r+s,t+n+s)}}}function Z(e,t,n){o.push(e),o.push(t),o.push(n)}function K(e,t,i){ee(e),ee(t),ee(i);var o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);te(a[0]),te(a[1]),te(a[2])}function $(e,t,i,o){ee(e),ee(t),ee(o),ee(t),ee(i),ee(o);var a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);te(s[0]),te(s[1]),te(s[3]),te(s[1]),te(s[2]),te(s[3])}function ee(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function te(e){i.push(e.x),i.push(e.y)}!function(){var e=r.length/3;if(l){var t=0,i=U*t;for(V=0;V<B;V++)K((k=P[V])[2]+i,k[1]+i,k[0]+i);for(i=U*(t=c+2*f),V=0;V<B;V++)K((k=P[V])[0]+i,k[1]+i,k[2]+i)}else{for(V=0;V<B;V++)K((k=P[V])[2],k[1],k[0]);for(V=0;V<B;V++)K((k=P[V])[0]+U*c,k[1]+U*c,k[2]+U*c)}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for(Q(L,t),t+=L.length,S=0,M=C.length;S<M;S++)Q(_=C[S],t),t+=_.length;n.addGroup(e,r.length/3-e,1)}()}this.addAttribute("position",new N(r,3)),this.addAttribute("uv",new N(i,2)),this.computeVertexNormals()}sp.prototype=Object.assign(Object.create(p.prototype),{constructor:sp,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new s,t=new c,n=new s,r=new s;return function(i){p.prototype.updateMatrixWorld.call(this,i);var o=this.context.listener,a=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(r.x,this.context.currentTime),o.forwardY.setValueAtTime(r.y,this.context.currentTime),o.forwardZ.setValueAtTime(r.z,this.context.currentTime),o.upX.setValueAtTime(a.x,this.context.currentTime),o.upY.setValueAtTime(a.y,this.context.currentTime),o.upZ.setValueAtTime(a.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,a.x,a.y,a.z))}}()}),cp.prototype=Object.assign(Object.create(ip.prototype),{constructor:cp,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var e=new s,t=new c,n=new s,r=new s;return function(i){p.prototype.updateMatrixWorld.call(this,i);var o=this.panner;this.matrixWorld.decompose(e,t,n),r.set(0,0,1).applyQuaternion(t),o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z)}}()}),up.prototype=Object.create(p.prototype),up.prototype.constructor=up,lp.prototype=Object.assign(Object.create(M.prototype),{constructor:lp,isInstancedBufferAttribute:!0,copy:function(e){return M.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(hp.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],r=function(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,c=0,u=0;u<r.length;u++){var l=r[u];if("\n"===l)s=0,c-=o;else{var h=dp(l,i,s,c,n);s+=h.offsetX,a.push(h.path)}}return a}(e,t,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),fp.prototype=Object.create(Bn.prototype),fp.prototype.constructor=fp,pp.prototype=Object.create(zn.prototype),pp.prototype.constructor=pp,mp.prototype=Object.create(_.prototype),mp.prototype.constructor=mp,vp.prototype=Object.create(Gr.prototype),vp.prototype.constructor=vp,gp.prototype=Object.create(k.prototype),gp.prototype.constructor=gp,yp.prototype=Object.create(_.prototype),yp.prototype.constructor=yp,yp.prototype.toJSON=function(){var e=_.prototype.toJSON.call(this);return Sp(this.parameters.shapes,this.parameters.options,e)},bp.prototype=Object.create(k.prototype),bp.prototype.constructor=bp,bp.prototype.toJSON=function(){var e=k.prototype.toJSON.call(this);return Sp(this.parameters.shapes,this.parameters.options,e)};var xp,wp,_p={generateTopUV:function(e,t,n,r,i){var o=t[3*n],a=t[3*n+1],s=t[3*r],c=t[3*r+1],u=t[3*i],l=t[3*i+1];return[new x(o,a),new x(s,c),new x(u,l)]},generateSideWallUV:function(e,t,n,r,i,o){var a=t[3*n],s=t[3*n+1],c=t[3*n+2],u=t[3*r],l=t[3*r+1],h=t[3*r+2],d=t[3*i],f=t[3*i+1],p=t[3*i+2],m=t[3*o],v=t[3*o+1],g=t[3*o+2];return Math.abs(s-l)<.01?[new x(a,1-c),new x(u,1-h),new x(d,1-p),new x(m,1-g)]:[new x(s,1-c),new x(l,1-h),new x(f,1-p),new x(v,1-g)]}};function Sp(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Mp(e,t,n,r){_.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Tp(e,t,n,r)),this.mergeVertices()}function Tp(e,t,n,r){k.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=o.clamp(r,0,2*Math.PI);var i,a,c,u=[],l=[],h=[],d=1/t,f=new s,p=new x;for(a=0;a<=t;a++){var m=n+a*d*r,v=Math.sin(m),g=Math.cos(m);for(c=0;c<=e.length-1;c++)f.x=e[c].x*v,f.y=e[c].y,f.z=e[c].x*g,l.push(f.x,f.y,f.z),p.x=a/t,p.y=c/(e.length-1),h.push(p.x,p.y)}for(a=0;a<t;a++)for(c=0;c<e.length-1;c++){var y=i=c+a*e.length,b=i+e.length,w=i+e.length+1,_=i+1;u.push(y,b,_),u.push(b,w,_)}if(this.setIndex(u),this.addAttribute("position",new N(l,3)),this.addAttribute("uv",new N(h,2)),this.computeVertexNormals(),r===2*Math.PI){var S=this.attributes.normal.array,M=new s,T=new s,A=new s;for(i=t*e.length*3,a=0,c=0;a<e.length;a++,c+=3)M.x=S[c+0],M.y=S[c+1],M.z=S[c+2],T.x=S[i+c+0],T.y=S[i+c+1],T.z=S[i+c+2],A.addVectors(M,T).normalize(),S[c+0]=S[i+c+0]=A.x,S[c+1]=S[i+c+1]=A.y,S[c+2]=S[i+c+2]=A.z}}function Ap(e,t,n){_.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Ep(e,t,n)),this.mergeVertices()}function Ep(e,t,n){k.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],a=[],c=[],u=[],l=new s,h=new s,d=new s,f=new s,p=new s;e.length<3&&console.error("ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=t+1;for(r=0;r<=n;r++){var v=r/n;for(i=0;i<=t;i++){var g=i/t;e(g,v,h),a.push(h.x,h.y,h.z),g-1e-5>=0?(e(g-1e-5,v,d),f.subVectors(h,d)):(e(g+1e-5,v,d),f.subVectors(d,h)),v-1e-5>=0?(e(g,v-1e-5,d),p.subVectors(h,d)):(e(g,v+1e-5,d),p.subVectors(d,h)),l.crossVectors(f,p).normalize(),c.push(l.x,l.y,l.z),u.push(g,v)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var y=r*m+i,b=r*m+i+1,x=(r+1)*m+i+1,w=(r+1)*m+i;o.push(y,b,w),o.push(b,x,w)}this.setIndex(o),this.addAttribute("position",new N(a,3)),this.addAttribute("normal",new N(c,3)),this.addAttribute("uv",new N(u,2))}function Cp(e,t,n,r,i,o){_.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Pp(e,t,n,r,i,o)),this.mergeVertices()}function Pp(e,t,n,r,i,o){k.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,c,u,l=[],h=[],d=[],f=[],p=e,m=(t-e)/(r=void 0!==r?Math.max(1,r):1),v=new s,g=new x;for(c=0;c<=r;c++){for(u=0;u<=n;u++)a=i+u/n*o,v.x=p*Math.cos(a),v.y=p*Math.sin(a),h.push(v.x,v.y,v.z),d.push(0,0,1),g.x=(v.x/t+1)/2,g.y=(v.y/t+1)/2,f.push(g.x,g.y);p+=m}for(c=0;c<r;c++){var y=c*(n+1);for(u=0;u<n;u++){var b=a=u+y,w=a+n+1,_=a+n+2,S=a+1;l.push(b,w,S),l.push(w,_,S)}}this.setIndex(l),this.addAttribute("position",new N(h,3)),this.addAttribute("normal",new N(d,3)),this.addAttribute("uv",new N(f,2))}function Lp(e,t){_.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Op(e,t)),this.mergeVertices()}function Op(e,t){Gr.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Np(e,t){_.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Rp(e,t)),this.mergeVertices()}function Rp(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("TextGeometry: font parameter is not an instance of Font."),new _;var r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),bp.call(this,r,t),this.type="TextBufferGeometry"}function Ip(e,t,n,r,i,o,a){_.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Dp(e,t,n,r,i,o)),this.mergeVertices()}function Dp(e,t,n,r,i,o){k.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,c,u=[],l=[],h=[],d=[],f=new s,p=new s,m=new s,v=new s,g=new s,y=new s,b=new s;for(a=0;a<=n;++a){var x=a/n*i*Math.PI*2;for(C(x,i,o,e,m),C(x+.01,i,o,e,v),y.subVectors(v,m),b.addVectors(v,m),g.crossVectors(y,b),b.crossVectors(g,y),g.normalize(),b.normalize(),c=0;c<=r;++c){var w=c/r*Math.PI*2,_=-t*Math.cos(w),S=t*Math.sin(w);f.x=m.x+(_*b.x+S*g.x),f.y=m.y+(_*b.y+S*g.y),f.z=m.z+(_*b.z+S*g.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),h.push(p.x,p.y,p.z),d.push(a/n),d.push(c/r)}}for(c=1;c<=n;c++)for(a=1;a<=r;a++){var M=(r+1)*(c-1)+(a-1),T=(r+1)*c+(a-1),A=(r+1)*c+a,E=(r+1)*(c-1)+a;u.push(M,T,E),u.push(T,A,E)}function C(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,c=Math.cos(s);i.x=r*(2+c)*.5*o,i.y=r*(2+c)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(u),this.addAttribute("position",new N(l,3)),this.addAttribute("normal",new N(h,3)),this.addAttribute("uv",new N(d,2))}function Fp(e,t,n,r,i,o){_.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("TubeGeometry: taper has been removed.");var a=new kp(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function kp(e,t,n,r,i){k.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,c,u=new s,l=new s,h=new x,d=new s,f=[],p=[],m=[],v=[];function g(i){d=e.getPointAt(i/t,d);var a=o.normals[i],s=o.binormals[i];for(c=0;c<=r;c++){var h=c/r*Math.PI*2,m=Math.sin(h),v=-Math.cos(h);l.x=v*a.x+m*s.x,l.y=v*a.y+m*s.y,l.z=v*a.z+m*s.z,l.normalize(),p.push(l.x,l.y,l.z),u.x=d.x+n*l.x,u.y=d.y+n*l.y,u.z=d.z+n*l.z,f.push(u.x,u.y,u.z)}}!function(){for(a=0;a<t;a++)g(a);g(!1===i?t:0),function(){for(a=0;a<=t;a++)for(c=0;c<=r;c++)h.x=a/t,h.y=c/r,m.push(h.x,h.y)}(),function(){for(c=1;c<=t;c++)for(a=1;a<=r;a++){var e=(r+1)*(c-1)+(a-1),n=(r+1)*c+(a-1),i=(r+1)*c+a,o=(r+1)*(c-1)+a;v.push(e,n,o),v.push(n,i,o)}}()}(),this.setIndex(v),this.addAttribute("position",new N(f,3)),this.addAttribute("normal",new N(p,3)),this.addAttribute("uv",new N(m,2))}function Up(e,t,n,r,i,o){p.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===xp&&((xp=new k).addAttribute("position",new N([0,0,0,0,1,0],3)),(wp=new zn(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new pn(xp,new ln({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new fn(wp,new un({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function Bp(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new k;n.addAttribute("position",new N(t,3)),n.addAttribute("color",new N([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new ln({vertexColors:K});Eo.call(this,n,r)}function zp(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new k;i.setIndex(new M(r,1)),i.addAttribute("position",new N([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Eo.call(this,i,new ln({color:n})),this.geometry.computeBoundingSphere()}function jp(e){var t=new k,n=new ln({color:16777215,vertexColors:Z}),r=[],i=[],o={},a=new v(16755200),s=new v(16711680),c=new v(43775),u=new v(16777215),l=new v(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",u),h("p","c",l),h("cn1","cn2",l),h("cn3","cn4",l),h("cf1","cf2",l),h("cf3","cf4",l),t.addAttribute("position",new N(r,3)),t.addAttribute("color",new N(i,3)),Eo.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Vp(e,t,n){p.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new k;r.addAttribute("position",new N([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new ln({fog:!1});this.lightPlane=new pn(r,i),this.add(this.lightPlane),(r=new k).addAttribute("position",new N([0,0,0,0,0,1],3)),this.targetLine=new pn(r,i),this.add(this.targetLine),this.update()}function Gp(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("FaceNormalsHelper: only Geometry is supported. Use VertexNormalsHelper, instead.");var c=new k,u=new N(2*a*3,3);c.addAttribute("position",u),Eo.call(this,c,new ln({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Wp(e,t,n,r){e=e||10,t=t||10,n=new v(void 0!==n?n:4473924),r=new v(void 0!==r?r:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],c=[],u=0,l=0,h=-a;u<=t;u++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var d=u===i?n:r;d.toArray(c,l),l+=3,d.toArray(c,l),l+=3,d.toArray(c,l),l+=3,d.toArray(c,l),l+=3}var f=new k;f.addAttribute("position",new N(s,3)),f.addAttribute("color",new N(c,3));var p=new ln({vertexColors:K});Eo.call(this,f,p)}function Hp(e,t,n){p.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new Hr(t);r.rotateY(.5*Math.PI),this.material=new un({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=K);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new M(o,3)),this.add(new fn(r,this.material)),this.update()}function Xp(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=new k;i.addAttribute("position",new N([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),pn.call(this,i,new ln({color:r}));var o=new k;o.addAttribute("position",new N([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new fn(o,new un({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function qp(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new B(t,4,2),i=new un({wireframe:!0,fog:!1});fn.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Yp(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new v(void 0!==i?i:4473924),o=new v(void 0!==o?o:8947848);var a,s,c,u,l,h,d,f=[],p=[];for(u=0;u<=t;u++)c=u/t*(2*Math.PI),a=Math.sin(c)*e,s=Math.cos(c)*e,f.push(0,0,0),f.push(a,0,s),d=1&u?i:o,p.push(d.r,d.g,d.b),p.push(d.r,d.g,d.b);for(u=0;u<=n;u++)for(d=1&u?i:o,h=e-e/n*u,l=0;l<r;l++)c=l/r*(2*Math.PI),a=Math.sin(c)*h,s=Math.cos(c)*h,f.push(a,0,s),p.push(d.r,d.g,d.b),c=(l+1)/r*(2*Math.PI),a=Math.sin(c)*h,s=Math.cos(c)*h,f.push(a,0,s),p.push(d.r,d.g,d.b);var m=new k;m.addAttribute("position",new N(f,3)),m.addAttribute("color",new N(p,3));var g=new ln({vertexColors:K});Eo.call(this,m,g)}function Jp(e,t){p.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new ln({fog:!1}),r=new k;r.addAttribute("position",new M(new Float32Array(15),3)),this.line=new pn(r,n),this.add(this.line),this.update()}function Qp(e,t){p.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new k,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new N(r,3));var c=new ln({fog:!1});this.cone=new Eo(n,c),this.add(this.cone),this.update()}function Zp(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var c=new k,u=new N(2*a*3,3);c.addAttribute("position",u),Eo.call(this,c,new ln({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Kp(e,t,n,r){vo.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function $p(e){this.manager=void 0!==e?e:cr}function em(e){this.manager=void 0!==e?e:cr}function tm(e){this.manager=void 0!==e?e:cr}Mp.prototype=Object.create(_.prototype),Mp.prototype.constructor=Mp,Tp.prototype=Object.create(k.prototype),Tp.prototype.constructor=Tp,Ap.prototype=Object.create(_.prototype),Ap.prototype.constructor=Ap,Ep.prototype=Object.create(k.prototype),Ep.prototype.constructor=Ep,Cp.prototype=Object.create(_.prototype),Cp.prototype.constructor=Cp,Pp.prototype=Object.create(k.prototype),Pp.prototype.constructor=Pp,Lp.prototype=Object.create(_.prototype),Lp.prototype.constructor=Lp,Op.prototype=Object.create(Gr.prototype),Op.prototype.constructor=Op,Np.prototype=Object.create(_.prototype),Np.prototype.constructor=Np,Rp.prototype=Object.create(bp.prototype),Rp.prototype.constructor=Rp,Ip.prototype=Object.create(_.prototype),Ip.prototype.constructor=Ip,Dp.prototype=Object.create(k.prototype),Dp.prototype.constructor=Dp,Fp.prototype=Object.create(_.prototype),Fp.prototype.constructor=Fp,kp.prototype=Object.create(k.prototype),kp.prototype.constructor=kp,Up.prototype=Object.create(p.prototype),Up.prototype.constructor=Up,Up.prototype.setDirection=function(){var e,t=new s;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),Up.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Up.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},Bp.prototype=Object.create(Eo.prototype),Bp.prototype.constructor=Bp,zp.prototype=Object.create(Eo.prototype),zp.prototype.constructor=zp,zp.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),p.prototype.updateMatrixWorld.call(this,e))},jp.prototype=Object.create(Eo.prototype),jp.prototype.constructor=jp,jp.prototype.update=function(){var e,t,n=new s,r=new Wn;function i(i,o,a,s){n.set(o,a,s).unproject(r);var c=t[i];if(void 0!==c)for(var u=e.getAttribute("position"),l=0,h=c.length;l<h;l++)u.setXYZ(c[l],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),Vp.prototype=Object.create(p.prototype),Vp.prototype.constructor=Vp,Vp.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Vp.prototype.update=function(){var e=new s,t=new s,n=new s;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),Gp.prototype=Object.create(Eo.prototype),Gp.prototype.constructor=Gp,Gp.prototype.update=function(){var e=new s,t=new s,n=new d;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,c=0,u=0,l=s.length;u<l;u++){var h=s[u],d=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),t.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(c,e.x,e.y,e.z),c+=1,i.setXYZ(c,t.x,t.y,t.z),c+=1}i.needsUpdate=!0}}(),Wp.prototype=Object.create(Eo.prototype),Wp.prototype.constructor=Wp,Hp.prototype=Object.create(p.prototype),Hp.prototype.constructor=Hp,Hp.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Hp.prototype.update=function(){var e=new s,t=new v,n=new v;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?t:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Xp.prototype=Object.create(pn.prototype),Xp.prototype.constructor=Xp,Xp.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?Y:q,this.lookAt(this.plane.normal),p.prototype.updateMatrixWorld.call(this,e)},qp.prototype=Object.create(fn.prototype),qp.prototype.constructor=qp,qp.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},qp.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Yp.prototype=Object.create(Eo.prototype),Yp.prototype.constructor=Yp,Jp.prototype=Object.create(p.prototype),Jp.prototype.constructor=Jp,Jp.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Jp.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,r=n.array;r[0]=e,r[1]=-t,r[2]=0,r[3]=e,r[4]=t,r[5]=0,r[6]=-e,r[7]=t,r[8]=0,r[9]=-e,r[10]=-t,r[11]=0,r[12]=e,r[13]=-t,r[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},Qp.prototype=Object.create(p.prototype),Qp.prototype.constructor=Qp,Qp.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Qp.prototype.update=function(){var e=new s,t=new s;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Zp.prototype=Object.create(Eo.prototype),Zp.prototype.constructor=Zp,Zp.prototype.update=function(){var e=new s,t=new s,n=new d;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,c=a.faces,u=0,l=0,h=c.length;l<h;l++)for(var d=c[l],f=0,p=d.vertexNormals.length;f<p;f++){var m=s[d[r[f]]],v=d.vertexNormals[f];e.copy(m).applyMatrix4(i),t.copy(v).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u+=1,o.setXYZ(u,t.x,t.y,t.z),u+=1}else if(a&&a.isBufferGeometry){var g=a.attributes.position,y=a.attributes.normal;for(u=0,f=0,p=g.count;f<p;f++)e.set(g.getX(f),g.getY(f),g.getZ(f)).applyMatrix4(i),t.set(y.getX(f),y.getY(f),y.getZ(f)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),u+=1,o.setXYZ(u,t.x,t.y,t.z),u+=1}o.needsUpdate=!0}}(),Kp.prototype=Object.assign(Object.create(vo.prototype),{constructor:Kp,isRectAreaLight:!0,copy:function(e){return vo.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=vo.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Object.assign($p.prototype,{load:function(e,t,n,r){var i=this;new lr(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=Rn.parse(e[r]);n.push(i)}t(n)}}),Object.assign(em.prototype,{load:function(e,t,n,r){var i=new lr(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(e){var n=e.slice(0);ap.getContext().decodeAudioData(n,function(e){t(e)})},n,r)}}),Object.assign(tm.prototype,{load:function(e,t,n,r){var i=this;new lr(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new k,n=e.data.index;if(void 0!==n){var r=new nm[n.type](n.array);t.setIndex(new M(r,1))}var i=e.data.attributes;for(var o in i){var a=i[o];r=new nm[a.type](a.array);t.addAttribute(o,new M(r,a.itemSize,a.normalized))}var c=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==c)for(var u=0,l=c.length;u!==l;++u){var h=c[u];t.addGroup(h.start,h.count,h.materialIndex)}var d=e.data.boundingSphere;if(void 0!==d){var f=new s;void 0!==d.center&&f.fromArray(d.center),t.boundingSphere=new b(f,d.radius)}return t}});var nm={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function rm(e){this.manager=void 0!==e?e:cr}function im(e){this.manager=void 0!==e?e:cr}function om(e){"undefined"==typeof createImageBitmap&&console.warn("ImageBitmapLoader: createImageBitmap() not supported."),void 0===r&&console.warn("ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:cr,this.options=void 0}function am(){p.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function sm(e,t,n){this.name="",this.color=new v(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function cm(e,t){this.name="",this.color=new v(e),this.density=void 0!==t?t:25e-5}Object.assign(rm.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new Xo,o=new Tr(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],function(e){i.images[n]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(var c=0;c<e.length;++c)s(c);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(im.prototype,{load:function(e,t,n,r){var i=this,o=new lr(this.manager);o.setPath(this.path),o.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)},n,r)},parse:function(e){return new hp(e)},setPath:function(e){return this.path=e,this}}),om.prototype={constructor:om,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var o=this,a=ar.get(e);if(void 0!==a)return o.manager.itemStart(e),setTimeout(function(){t&&t(a),o.manager.itemEnd(e)},0),a;r(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,o.options)}).then(function(n){ar.add(e,n),t&&t(n),o.manager.itemEnd(e)}).catch(function(t){i&&i(t),o.manager.itemEnd(e),o.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},am.prototype=Object.assign(Object.create(p.prototype),{constructor:am,copy:function(e){p.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new s;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),update:function(){var e=new s,t=new s;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(e){var t=p.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),sm.prototype.isFog=!0,sm.prototype.clone=function(){return new sm(this.color,this.near,this.far)},sm.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},cm.prototype.isFogExp2=!0,cm.prototype.clone=function(){return new cm(this.color,this.density)},cm.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}};var um={WireframeGeometry:Zi,TetrahedronGeometry:Lp,TetrahedronBufferGeometry:Op,OctahedronGeometry:Wr,OctahedronBufferGeometry:Hr,IcosahedronGeometry:Jf,IcosahedronBufferGeometry:Qf,DodecahedronGeometry:mp,DodecahedronBufferGeometry:vp,PolyhedronGeometry:Vr,PolyhedronBufferGeometry:Gr,TubeGeometry:Fp,TubeBufferGeometry:kp,TorusKnotGeometry:Ip,TorusGeometry:Xr,TorusBufferGeometry:qr,TextGeometry:Np,TextBufferGeometry:Rp,SphereGeometry:U,SphereBufferGeometry:B,RingGeometry:Cp,RingBufferGeometry:Pp,PlaneGeometry:er,PlaneBufferGeometry:tr,LatheGeometry:Mp,LatheBufferGeometry:Tp,ShapeGeometry:Zf,ShapeBufferGeometry:Kf,ExtrudeGeometry:yp,ExtrudeBufferGeometry:bp,EdgesGeometry:gp,ConeGeometry:fp,ConeBufferGeometry:pp,CylinderGeometry:Bn,CylinderBufferGeometry:zn,CircleGeometry:qf,CircleBufferGeometry:Yf,BoxGeometry:kn,BoxBufferGeometry:Un};function lm(e){this.manager=void 0!==e?e:cr,this.texturePath=""}Object.assign(lm.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this;new lr(i.manager).load(e,function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("ObjectLoader: Can't load "+e+". Use JSONLoader instead.")},n,r)},setTexturePath:function(e){return this.texturePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,function(){void 0!==t&&t(s)}),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new Ka).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new Pr,i=new tm,o=0,a=e.length;o<a;o++){var s,c=e[o];switch(c.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new um[c.type](c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new um[c.type](c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new um[c.type](c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new um[c.type](c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new um[c.type](c.radius,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new um[c.type](c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new um[c.type](c.radius,c.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new um[c.type](c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new um[c.type](c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new um[c.type](c.radius,c.tube,c.tubularSegments,c.radialSegments,c.p,c.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new um[c.type](c.points,c.segments,c.phiStart,c.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new um[c.type](c.vertices,c.indices,c.radius,c.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var u=[],l=0,h=c.shapes.length;l<h;l++){var d=t[c.shapes[l]];u.push(d)}s=new um[c.type](u,c.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(u=[],l=0,h=c.shapes.length;l<h;l++){d=t[c.shapes[l]];u.push(d)}var f=c.options.extrudePath;void 0!==f&&(c.options.extrudePath=(new Curves[f.type]).fromJSON(f)),s=new um[c.type](u,c.options);break;case"BufferGeometry":s=i.parse(c);break;case"Geometry":s=r.parse(c,this.texturePath).geometry;break;default:console.warn('ObjectLoader: Unsupported geometry type "'+c.type+'"');continue}s.uuid=c.uuid,void 0!==c.name&&(s.name=c.name),!0===s.isBufferGeometry&&void 0!==c.userData&&(s.userData=c.userData),n[c.uuid]=s}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var r=new Mr;r.setTextures(t);for(var i=0,o=e.length;i<o;i++){var a=e[i];if("MultiMaterial"===a.type){for(var s=[],c=0;c<a.materials.length;c++)s.push(r.parse(a.materials[c]));n[a.uuid]=s}else n[a.uuid]=r.parse(a)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=Rn.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemEnd(e),n.manager.itemError(e)})}if(void 0!==e&&e.length>0){var o=new Tr(new sr(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var c=e[a],u=c.url;if(Array.isArray(u)){r[c.uuid]=[];for(var l=0,h=u.length;l<h;l++){var d=u[l],f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.texturePath+d;r[c.uuid].push(i(f))}}else{f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.texturePath+c.url;r[c.uuid]=i(f)}}}return r},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a,s=e[i];void 0===s.image&&console.warn('ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new Xo(t[s.image]):new Kn(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,hm)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],dm),a.wrapT=n(s.wrap[1],dm)),void 0!==s.format&&(a.format=s.format),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,fm)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,fm)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),r[s.uuid]=a}return r},parseObject:function(e,t,n){var r;function i(e){return void 0===t[e]&&console.warn("ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new Yn,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new v(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new sm(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new cm(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new Hn(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new Jn(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new Ao(e.color,e.intensity);break;case"DirectionalLight":r=new xo(e.color,e.intensity);break;case"PointLight":r=new yo(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new Kp(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new _o(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new So(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(e.geometry),s=o(e.material);r=a.bones&&a.bones.length>0?new lo(a,s):new fn(a,s);break;case"LOD":r=new am;break;case"Line":r=new pn(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":r=new Ro(i(e.geometry),o(e.material));break;case"LineSegments":r=new Eo(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":r=new Gi(i(e.geometry),o(e.material));break;case"Sprite":r=new wc(o(e.material));break;case"Group":r=new oo;break;default:r=new p}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children)for(var c=e.children,u=0;u<c.length;u++)r.add(this.parseObject(c[u],t,n));if("LOD"===e.type)for(var l=e.levels,h=0;h<l.length;h++){var d=l[h],f=r.getObjectByProperty("uuid",d.object);void 0!==f&&r.addLevel(f,d.distance)}return r}});var hm={UVMapping:ke,CubeReflectionMapping:Ue,CubeRefractionMapping:Be,EquirectangularReflectionMapping:ze,EquirectangularRefractionMapping:je,SphericalReflectionMapping:Ve,CubeUVReflectionMapping:Ge,CubeUVRefractionMapping:We},dm={RepeatWrapping:He,ClampToEdgeWrapping:Xe,MirroredRepeatWrapping:qe},fm={NearestFilter:Ye,NearestMipMapNearestFilter:Je,NearestMipMapLinearFilter:Qe,LinearFilter:Ze,LinearMipMapNearestFilter:Ke,LinearMipMapLinearFilter:$e};function pm(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function mm(e,t,n,r,i,o,a,s,c){Kn.call(this,e,t,n,r,i,o,a,s,c),this.generateMipmaps=!1}Object.assign(pm.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}}),mm.prototype=Object.assign(Object.create(Kn.prototype),{constructor:mm,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),t.CCDIKSolver=mn,t.MMDAnimationHelper=Vn,t.MMDPhysics=jn,t.AnimationClipCreator=Gn,t.CinematicCamera=or,t.Car=function(){var e=this;function t(t,n){e.bodyGeometry=t,e.bodyMaterials=n,r()}function n(t,n){e.wheelGeometry=t,e.wheelMaterials=n,r()}function r(){if(e.bodyGeometry&&e.wheelGeometry){if(e.autoWheelGeometry){e.wheelGeometry.computeBoundingBox();var t=e.wheelGeometry.boundingBox;e.wheelOffset.addVectors(t.min,t.max),e.wheelOffset.multiplyScalar(.5),e.wheelDiameter=t.max.y-t.min.y,e.wheelGeometry.center()}var n=e.modelScale,r=new s,i=e.bodyMaterials,o=e.wheelMaterials;e.bodyMesh=new fn(e.bodyGeometry,i),e.bodyMesh.scale.set(n,n,n),e.root.add(e.bodyMesh),r.multiplyVectors(e.wheelOffset,new s(n,n,n)),e.frontLeftWheelRoot.position.add(r),e.frontLeftWheelMesh=new fn(e.wheelGeometry,o),e.frontLeftWheelMesh.scale.set(n,n,n),e.frontLeftWheelRoot.add(e.frontLeftWheelMesh),e.root.add(e.frontLeftWheelRoot),r.multiplyVectors(e.wheelOffset,new s(-n,n,n)),e.frontRightWheelRoot.position.add(r),e.frontRightWheelMesh=new fn(e.wheelGeometry,o),e.frontRightWheelMesh.scale.set(n,n,n),e.frontRightWheelMesh.rotation.z=Math.PI,e.frontRightWheelRoot.add(e.frontRightWheelMesh),e.root.add(e.frontRightWheelRoot),r.multiplyVectors(e.wheelOffset,new s(n,n,-n)),r.z-=e.backWheelOffset,e.backLeftWheelMesh=new fn(e.wheelGeometry,o),e.backLeftWheelMesh.position.add(r),e.backLeftWheelMesh.scale.set(n,n,n),e.root.add(e.backLeftWheelMesh),r.multiplyVectors(e.wheelOffset,new s(-n,n,-n)),r.z-=e.backWheelOffset,e.backRightWheelMesh=new fn(e.wheelGeometry,o),e.backRightWheelMesh.position.add(r),e.backRightWheelMesh.scale.set(n,n,n),e.backRightWheelMesh.rotation.z=Math.PI,e.root.add(e.backRightWheelMesh),e.meshes=[e.bodyMesh,e.frontLeftWheelMesh,e.frontRightWheelMesh,e.backLeftWheelMesh,e.backRightWheelMesh],e.loaded=!0,e.callback&&e.callback(e)}}function i(e){return 1===e?1:1-Math.pow(2,-10*e)}this.modelScale=1,this.backWheelOffset=2,this.autoWheelGeometry=!0,this.wheelOffset=new s,this.wheelDiameter=1,this.MAX_SPEED=2200,this.MAX_REVERSE_SPEED=-1500,this.MAX_WHEEL_ROTATION=.6,this.FRONT_ACCELERATION=1250,this.BACK_ACCELERATION=1500,this.WHEEL_ANGULAR_ACCELERATION=1.5,this.FRONT_DECCELERATION=750,this.WHEEL_ANGULAR_DECCELERATION=1,this.STEERING_RADIUS_RATIO=.0023,this.MAX_TILT_SIDES=.05,this.MAX_TILT_FRONTBACK=.015,this.speed=0,this.acceleration=0,this.wheelOrientation=0,this.carOrientation=0,this.root=new p,this.frontLeftWheelRoot=new p,this.frontRightWheelRoot=new p,this.bodyMesh=null,this.frontLeftWheelMesh=null,this.frontRightWheelMesh=null,this.backLeftWheelMesh=null,this.backRightWheelMesh=null,this.bodyGeometry=null,this.wheelGeometry=null,this.bodyMaterials=null,this.wheelMaterials=null,this.loaded=!1,this.meshes=[],this.enableShadows=function(e){for(var t=0;t<this.meshes.length;t++)this.meshes[t].castShadow=e,this.meshes[t].receiveShadow=e},this.setVisible=function(e){for(var t=0;t<this.meshes.length;t++)this.meshes[t].visible=e,this.meshes[t].visible=e},this.loadPartsJSON=function(e,r){var i=new Pr;i.load(e,function(e,n){t(e,n)}),i.load(r,function(e,t){n(e,t)})},this.loadPartsBinary=function(e,r){var i=new Lr;i.load(e,function(e,n){t(e,n)}),i.load(r,function(e,t){n(e,t)})},this.updateCarModel=function(e,t){if(t.moveForward&&(this.speed=o.clamp(this.speed+e*this.FRONT_ACCELERATION,this.MAX_REVERSE_SPEED,this.MAX_SPEED),this.acceleration=o.clamp(this.acceleration+e,-1,1)),t.moveBackward&&(this.speed=o.clamp(this.speed-e*this.BACK_ACCELERATION,this.MAX_REVERSE_SPEED,this.MAX_SPEED),this.acceleration=o.clamp(this.acceleration-e,-1,1)),t.moveLeft&&(this.wheelOrientation=o.clamp(this.wheelOrientation+e*this.WHEEL_ANGULAR_ACCELERATION,-this.MAX_WHEEL_ROTATION,this.MAX_WHEEL_ROTATION)),t.moveRight&&(this.wheelOrientation=o.clamp(this.wheelOrientation-e*this.WHEEL_ANGULAR_ACCELERATION,-this.MAX_WHEEL_ROTATION,this.MAX_WHEEL_ROTATION)),!t.moveForward&&!t.moveBackward)if(this.speed>0){var n=i(this.speed/this.MAX_SPEED);this.speed=o.clamp(this.speed-n*e*this.FRONT_DECCELERATION,0,this.MAX_SPEED),this.acceleration=o.clamp(this.acceleration-n*e,0,1)}else n=i(this.speed/this.MAX_REVERSE_SPEED),this.speed=o.clamp(this.speed+n*e*this.BACK_ACCELERATION,this.MAX_REVERSE_SPEED,0),this.acceleration=o.clamp(this.acceleration+n*e,-1,0);t.moveLeft||t.moveRight||(this.wheelOrientation>0?this.wheelOrientation=o.clamp(this.wheelOrientation-e*this.WHEEL_ANGULAR_DECCELERATION,0,this.MAX_WHEEL_ROTATION):this.wheelOrientation=o.clamp(this.wheelOrientation+e*this.WHEEL_ANGULAR_DECCELERATION,-this.MAX_WHEEL_ROTATION,0));var r=this.speed*e;this.carOrientation+=r*this.STEERING_RADIUS_RATIO*this.wheelOrientation,this.root.position.x+=Math.sin(this.carOrientation)*r,this.root.position.z+=Math.cos(this.carOrientation)*r,this.root.rotation.y=this.carOrientation,this.loaded&&(this.bodyMesh.rotation.z=this.MAX_TILT_SIDES*this.wheelOrientation*(this.speed/this.MAX_SPEED),this.bodyMesh.rotation.x=-this.MAX_TILT_FRONTBACK*this.acceleration);var a=r*(1/(this.modelScale*(this.wheelDiameter/2)));this.loaded&&(this.frontLeftWheelMesh.rotation.x+=a,this.frontRightWheelMesh.rotation.x+=a,this.backLeftWheelMesh.rotation.x+=a,this.backRightWheelMesh.rotation.x+=a),this.frontLeftWheelRoot.rotation.y=this.wheelOrientation,this.frontRightWheelRoot.rotation.y=this.wheelOrientation}},t.DeviceOrientationControls=function(e){var t=this;this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var n=function(e){t.deviceOrientation=e},r=function(){t.screenOrientation=i.orientation||0},a=function(){var e=new s(0,0,1),t=new l,n=new c,r=new c(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(i,o,a,s,c){t.set(a,o,-s,"YXZ"),i.setFromEuler(t),i.multiply(r),i.multiply(n.setFromAxisAngle(e,-c))}}();this.connect=function(){r(),i.addEventListener("orientationchange",r,!1),i.addEventListener("deviceorientation",n,!1),t.enabled=!0},this.disconnect=function(){i.removeEventListener("orientationchange",r,!1),i.removeEventListener("deviceorientation",n,!1),t.enabled=!1},this.update=function(){if(!1!==t.enabled){var e=t.deviceOrientation;if(e){var n=e.alpha?o.degToRad(e.alpha)+t.alphaOffset:0,r=e.beta?o.degToRad(e.beta):0,i=e.gamma?o.degToRad(e.gamma):0,s=t.screenOrientation?o.degToRad(t.screenOrientation):0;a(t.object.quaternion,n,r,i,s)}}},this.dispose=function(){t.disconnect()},this.connect()},t.DragControls=Dr,t.EditorControls=kr,t.FirstPersonControls=function(e,t){function n(e){e.preventDefault()}this.object=e,this.target=new s(0,0,0),this.domElement=void 0!==t?t:document,this.enabled=!0,this.movementSpeed=1,this.lookSpeed=.005,this.lookVertical=!0,this.autoForward=!1,this.activeLook=!0,this.heightSpeed=!1,this.heightCoef=1,this.heightMin=0,this.heightMax=1,this.constrainVertical=!1,this.verticalMin=0,this.verticalMax=Math.PI,this.autoSpeedFactor=0,this.mouseX=0,this.mouseY=0,this.lat=0,this.lon=0,this.phi=0,this.theta=0,this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.mouseDragOn=!1,this.viewHalfX=0,this.viewHalfY=0,this.domElement!==document&&this.domElement.setAttribute("tabindex",-1),this.handleResize=function(){this.domElement===document?(this.viewHalfX=i.innerWidth/2,this.viewHalfY=i.innerHeight/2):(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)},this.onMouseDown=function(e){if(this.domElement!==document&&this.domElement.focus(),e.preventDefault(),e.stopPropagation(),this.activeLook)switch(e.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0}this.mouseDragOn=!0},this.onMouseUp=function(e){if(e.preventDefault(),e.stopPropagation(),this.activeLook)switch(e.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1}this.mouseDragOn=!1},this.onMouseMove=function(e){this.domElement===document?(this.mouseX=e.pageX-this.viewHalfX,this.mouseY=e.pageY-this.viewHalfY):(this.mouseX=e.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=e.pageY-this.domElement.offsetTop-this.viewHalfY)},this.onKeyDown=function(e){switch(e.keyCode){case 38:case 87:this.moveForward=!0;break;case 37:case 65:this.moveLeft=!0;break;case 40:case 83:this.moveBackward=!0;break;case 39:case 68:this.moveRight=!0;break;case 82:this.moveUp=!0;break;case 70:this.moveDown=!0}},this.onKeyUp=function(e){switch(e.keyCode){case 38:case 87:this.moveForward=!1;break;case 37:case 65:this.moveLeft=!1;break;case 40:case 83:this.moveBackward=!1;break;case 39:case 68:this.moveRight=!1;break;case 82:this.moveUp=!1;break;case 70:this.moveDown=!1}},this.update=function(e){if(!1!==this.enabled){if(this.heightSpeed){var t=o.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=e*(t*this.heightCoef)}else this.autoSpeedFactor=0;var n=e*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(n+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(n),this.moveLeft&&this.object.translateX(-n),this.moveRight&&this.object.translateX(n),this.moveUp&&this.object.translateY(n),this.moveDown&&this.object.translateY(-n);var r=e*this.lookSpeed;this.activeLook||(r=0);var i=1;this.constrainVertical&&(i=Math.PI/(this.verticalMax-this.verticalMin)),this.lon+=this.mouseX*r,this.lookVertical&&(this.lat-=this.mouseY*r*i),this.lat=Math.max(-85,Math.min(85,this.lat)),this.phi=o.degToRad(90-this.lat),this.theta=o.degToRad(this.lon),this.constrainVertical&&(this.phi=o.mapLinear(this.phi,0,Math.PI,this.verticalMin,this.verticalMax));var a=this.target,s=this.object.position;a.x=s.x+100*Math.sin(this.phi)*Math.cos(this.theta),a.y=s.y+100*Math.cos(this.phi),a.z=s.z+100*Math.sin(this.phi)*Math.sin(this.theta),this.object.lookAt(a)}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",n,!1),this.domElement.removeEventListener("mousedown",a,!1),this.domElement.removeEventListener("mousemove",r,!1),this.domElement.removeEventListener("mouseup",c,!1),i.removeEventListener("keydown",u,!1),i.removeEventListener("keyup",l,!1)};var r=h(this,this.onMouseMove),a=h(this,this.onMouseDown),c=h(this,this.onMouseUp),u=h(this,this.onKeyDown),l=h(this,this.onKeyUp);function h(e,t){return function(){t.apply(e,arguments)}}this.domElement.addEventListener("contextmenu",n,!1),this.domElement.addEventListener("mousemove",r,!1),this.domElement.addEventListener("mousedown",a,!1),this.domElement.addEventListener("mouseup",c,!1),i.addEventListener("keydown",u,!1),i.addEventListener("keyup",l,!1),this.handleResize()},t.FlyControls=function(e,t){function n(e,t){return function(){t.apply(e,arguments)}}function r(e){e.preventDefault()}this.object=e,this.domElement=void 0!==t?t:document,t&&this.domElement.setAttribute("tabindex",-1),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this.tmpQuaternion=new c,this.mouseStatus=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new s(0,0,0),this.rotationVector=new s(0,0,0),this.keydown=function(e){if(!e.altKey){switch(e.keyCode){case 16:this.movementSpeedMultiplier=.1;break;case 87:this.moveState.forward=1;break;case 83:this.moveState.back=1;break;case 65:this.moveState.left=1;break;case 68:this.moveState.right=1;break;case 82:this.moveState.up=1;break;case 70:this.moveState.down=1;break;case 38:this.moveState.pitchUp=1;break;case 40:this.moveState.pitchDown=1;break;case 37:this.moveState.yawLeft=1;break;case 39:this.moveState.yawRight=1;break;case 81:this.moveState.rollLeft=1;break;case 69:this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(e){switch(e.keyCode){case 16:this.movementSpeedMultiplier=1;break;case 87:this.moveState.forward=0;break;case 83:this.moveState.back=0;break;case 65:this.moveState.left=0;break;case 68:this.moveState.right=0;break;case 82:this.moveState.up=0;break;case 70:this.moveState.down=0;break;case 38:this.moveState.pitchUp=0;break;case 40:this.moveState.pitchDown=0;break;case 37:this.moveState.yawLeft=0;break;case 39:this.moveState.yawRight=0;break;case 81:this.moveState.rollLeft=0;break;case 69:this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()},this.mousedown=function(e){if(this.domElement!==document&&this.domElement.focus(),e.preventDefault(),e.stopPropagation(),this.dragToLook)this.mouseStatus++;else{switch(e.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.mousemove=function(e){if(!this.dragToLook||this.mouseStatus>0){var t=this.getContainerDimensions(),n=t.size[0]/2,r=t.size[1]/2;this.moveState.yawLeft=-(e.pageX-t.offset[0]-n)/n,this.moveState.pitchDown=(e.pageY-t.offset[1]-r)/r,this.updateRotationVector()}},this.mouseup=function(e){if(e.preventDefault(),e.stopPropagation(),this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(e.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()},this.update=function(e){var t=e*this.movementSpeed,n=e*this.rollSpeed;this.object.translateX(this.moveVector.x*t),this.object.translateY(this.moveVector.y*t),this.object.translateZ(this.moveVector.z*t),this.tmpQuaternion.set(this.rotationVector.x*n,this.rotationVector.y*n,this.rotationVector.z*n,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),this.object.rotation.setFromQuaternion(this.object.quaternion,this.object.rotation.order)},this.updateMovementVector=function(){var e=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-e+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[i.innerWidth,i.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",r,!1),this.domElement.removeEventListener("mousedown",a,!1),this.domElement.removeEventListener("mousemove",o,!1),this.domElement.removeEventListener("mouseup",u,!1),i.removeEventListener("keydown",l,!1),i.removeEventListener("keyup",h,!1)};var o=n(this,this.mousemove),a=n(this,this.mousedown),u=n(this,this.mouseup),l=n(this,this.keydown),h=n(this,this.keyup);this.domElement.addEventListener("contextmenu",r,!1),this.domElement.addEventListener("mousemove",o,!1),this.domElement.addEventListener("mousedown",a,!1),this.domElement.addEventListener("mouseup",u,!1),i.addEventListener("keydown",l,!1),i.addEventListener("keyup",h,!1),this.updateMovementVector(),this.updateRotationVector()},t.MapControls=Ur,t.OrbitControls=Br,t.OrthographicTrackballControls=zr,t.PointerLockControls=function(e){var t=this;e.rotation.set(0,0,0);var n=new p;n.add(e);var r=new p;r.position.y=10,r.add(n);var i=Math.PI/2,o=function(e){if(!1!==t.enabled){var o=e.movementX||e.mozMovementX||e.webkitMovementX||0,a=e.movementY||e.mozMovementY||e.webkitMovementY||0;r.rotation.y-=.002*o,n.rotation.x-=.002*a,n.rotation.x=Math.max(-i,Math.min(i,n.rotation.x))}};this.dispose=function(){document.removeEventListener("mousemove",o,!1)},document.addEventListener("mousemove",o,!1),this.enabled=!1,this.getObject=function(){return r},this.getDirection=function(){var e=new s(0,0,-1),t=new l(0,0,0,"YXZ");return function(i){return t.set(n.rotation.x,r.rotation.y,0),i.copy(e).applyEuler(t),i}}()},t.TrackballControls=jr,t.TransformControls=Yr,t.TransformControlsGizmo=Jr,t.TransformControlsPlane=Qr,t.ConvexObjectBreaker=ai,t.GrannyKnot=ci,t.HeartCurve=ui,t.VivianiCurve=li,t.KnotCurve=hi,t.HelixCurve=di,t.TrefoilKnot=fi,t.TorusKnot=pi,t.CinquefoilKnot=mi,t.TrefoilPolynomialKnot=vi,t.FigureEightPolynomialKnot=gi,t.DecoratedTorusKnot4a=yi,t.DecoratedTorusKnot4b=bi,t.DecoratedTorusKnot5a=xi,t.DecoratedTorusKnot5c=wi,t.NURBSCurve=Si,t.NURBSSurface=Mi,t.NURBSUtils=_i,t.Detector=Ti,t.AnaglyphEffect=function(e,t,n){this.colorMatrixLeft=(new d).fromArray([1.0671679973602295,-.0016435992438346148,.0001777536963345483,-.028107794001698494,-.00019593400065787137,-.0002875397040043026,-.04279090091586113,15809757314855233e-21,-.00024287120322696865]),this.colorMatrixRight=(new d).fromArray([-.0355340838432312,-.06440307199954987,.018319187685847282,-.10269022732973099,.8079727292060852,-.04835830628871918,.0001224992738571018,-.009558862075209618,.567823588848114]);var r=new Jn(-1,1,1,-1,0,1),i=new Yn,o=new Ai,a={minFilter:Ze,magFilter:Ye,format:pt};void 0===t&&(t=512),void 0===n&&(n=512);var s=new $n(t,n,a),c=new $n(t,n,a),u=new qn({uniforms:{mapLeft:{value:s.texture},mapRight:{value:c.texture},colorMatrixLeft:{value:this.colorMatrixLeft},colorMatrixRight:{value:this.colorMatrixRight}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = vec2( uv.x, uv.y );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D mapLeft;","uniform sampler2D mapRight;","varying vec2 vUv;","uniform mat3 colorMatrixLeft;","uniform mat3 colorMatrixRight;","float lin( float c ) {","\treturn c <= 0.04045 ? c * 0.0773993808 :","\t\t\tpow( c * 0.9478672986 + 0.0521327014, 2.4 );","}","vec4 lin( vec4 c ) {","\treturn vec4( lin( c.r ), lin( c.g ), lin( c.b ), c.a );","}","float dev( float c ) {","\treturn c <= 0.0031308 ? c * 12.92","\t\t\t: pow( c, 0.41666 ) * 1.055 - 0.055;","}","void main() {","\tvec2 uv = vUv;","\tvec4 colorL = lin( texture2D( mapLeft, uv ) );","\tvec4 colorR = lin( texture2D( mapRight, uv ) );","\tvec3 color = clamp(","\t\t\tcolorMatrixLeft * colorL.rgb +","\t\t\tcolorMatrixRight * colorR.rgb, 0., 1. );","\tgl_FragColor = vec4(","\t\t\tdev( color.r ), dev( color.g ), dev( color.b ),","\t\t\tmax( colorL.a, colorR.a ) );","}"].join("\n")}),l=new fn(new tr(2,2),u);i.add(l),this.setSize=function(t,n){e.setSize(t,n);var r=e.getPixelRatio();s.setSize(t*r,n*r),c.setSize(t*r,n*r)},this.render=function(t,n){t.updateMatrixWorld(),null===n.parent&&n.updateMatrixWorld(),o.update(n),e.render(t,o.cameraL,s,!0),e.render(t,o.cameraR,c,!0),e.render(i,r)},this.dispose=function(){s&&s.dispose(),c&&c.dispose(),l&&l.geometry.dispose(),u&&u.dispose()}},t.AsciiEffect=function(e,t,n){t=void 0===t?" .:-=+*#%@":t,n||(n={});var r,i,o=n.resolution?n.resolution:.15,a=n.scale?n.scale:1,s=!!n.color&&n.color,c=!!n.alpha&&n.alpha,u=!!n.block&&n.block,l=!!n.invert&&n.invert,h=document.createElement("div");h.style.cursor="default";var d,f,p,m=document.createElement("table");h.appendChild(m),this.setSize=function(t,n){r=t,i=n,e.setSize(t,n),function(){d=Math.round(r*S),f=Math.round(i*S),x.width=d,x.height=f,(p=e.domElement).style.backgroundColor&&(m.rows[0].cells[0].style.backgroundColor=p.style.backgroundColor,m.rows[0].cells[0].style.color=p.style.color),m.cellSpacing=0,m.cellPadding=0;var t=m.style;t.display="inline",t.width=Math.round(d/S*a)+"px",t.height=Math.round(f/S*a)+"px",t.whiteSpace="pre",t.margin="0px",t.padding="0px",t.letterSpacing=A+"px",t.fontFamily=y,t.fontSize=M+"px",t.lineHeight=T+"px",t.textAlign="left",t.textDecoration="none"}()},this.render=function(t,n){e.render(t,n),function(e,t){w.clearRect(0,0,d,f),w.drawImage(b,0,0,d,f);for(var n=w.getImageData(0,0,d,f).data,r="",i=0;i<f;i+=2){for(var o=0;o<d;o++){var a,h,p=4*(i*d+o),m=n[p],v=n[p+1],g=n[p+2],y=n[p+3];h=(.3*m+.59*v+.11*g)/255,0==y&&(h=1),a=Math.floor((1-h)*(_.length-1)),l&&(a=_.length-a-1);var x=_[a];void 0!==x&&" "!=x||(x="&nbsp;"),r+=s?"<span style='color:rgb("+m+","+v+","+g+");"+(u?"background-color:rgb("+m+","+v+","+g+");":"")+(c?"opacity:"+y/255+";":"")+"'>"+x+"</span>":x}r+="<br/>"}t.innerHTML="<tr><td>"+r+"</td></tr>"}(0,m)},this.domElement=h;var v=" .,:;i1tfLCG08@".split(""),g=" CGO08@".split(""),y="courier new, monospace",b=e.domElement,x=document.createElement("canvas");if(x.getContext){var w=x.getContext("2d");if(w.getImageData){var _=s?g:v;t&&(_=t);var S=.5;S=.25,o&&(S=o);var M=2/S*a,T=2/S*a,A=0;switch(a){case 1:A=-1;break;case 2:case 3:A=-2.1;break;case 4:A=-3.1;break;case 5:A=-4.15}}}},t.OutlineEffect=function(e,t){t=t||{},this.enabled=!0;var n=void 0!==t.defaultThickness?t.defaultThickness:.003,r=(new v).fromArray(void 0!==t.defaultColor?t.defaultColor:[0,0,0]),i=void 0!==t.defaultAlpha?t.defaultAlpha:1,o=void 0!==t.defaultKeepAlive&&t.defaultKeepAlive,a={},s=60,c={},u={},l={MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical"},h={outlineThickness:{type:"f",value:n},outlineColor:{type:"c",value:r},outlineAlpha:{type:"f",value:i}},d=["#include <fog_pars_vertex>","uniform float outlineThickness;","vec4 calculateOutline( vec4 pos, vec3 objectNormal, vec4 skinned ) {","\tfloat thickness = outlineThickness;","\tconst float ratio = 1.0;","\tvec4 pos2 = projectionMatrix * modelViewMatrix * vec4( skinned.xyz + objectNormal, 1.0 );","\tvec4 norm = normalize( pos - pos2 );","\treturn pos + norm * thickness * pos.w * ratio;","}"].join("\n"),f=["#if ! defined( LAMBERT ) && ! defined( PHONG ) && ! defined( TOON ) && ! defined( PHYSICAL )","\t#ifndef USE_ENVMAP","\t\tvec3 objectNormal = normalize( normal );","\t#endif","#endif","#ifdef FLIP_SIDED","\tobjectNormal = -objectNormal;","#endif","#ifdef DECLARE_TRANSFORMED","\tvec3 transformed = vec3( position );","#endif","gl_Position = calculateOutline( gl_Position, objectNormal, vec4( transformed, 1.0 ) );","#include <fog_vertex>"].join("\n"),p=["#include <common>","#include <fog_pars_fragment>","uniform vec3 outlineColor;","uniform float outlineAlpha;","void main() {","\tgl_FragColor = vec4( outlineColor, outlineAlpha );","\t#include <fog_fragment>","}"].join("\n");function m(){return new qn({name:"invisible",visible:!1})}function g(e){var t=a[e.uuid];return void 0===t&&(t={material:function(e){var t,n,r=l[e.type];if(e.userData.outlineParameters,void 0!==r){var i=Pi[r];t=i.uniforms,n=i.vertexShader}else if(!0===e.isRawShaderMaterial){if(t=e.uniforms,n=e.vertexShader,!/attribute\s+vec3\s+position\s*;/.test(n)||!/attribute\s+vec3\s+normal\s*;/.test(n))return console.warn("OutlineEffect requires both vec3 position and normal attributes in vertex shader, does not draw outline for "+e.name+"(uuid:"+e.uuid+") material."),m()}else{if(!0!==e.isShaderMaterial)return m();t=e.uniforms,n=e.vertexShader}var o=Object.assign({},t,h),a=n.replace(/void\s+main\s*\(\s*\)/,d+"\nvoid main()").replace(/\}\s*$/,f+"\n}").replace(/#include\s+<[\w_]*light[\w_]*>/g,""),s={};return/vec3\s+transformed\s*=/.test(n)||/#include\s+<begin_vertex>/.test(n)||(s.DECLARE_TRANSFORMED=!0),new qn({defines:s,uniforms:o,vertexShader:a,fragmentShader:p,side:Y,skinning:!1,morphTargets:!1,morphNormals:!1,fog:!1})}(e),used:!0,keepAlive:o,count:0},a[e.uuid]=t),t.used=!0,t.material}function y(e){var t=g(e);return c[t.uuid]=e,function(e,t){if("invisible"!==e.name){var n=t.userData.outlineParameters;e.skinning=t.skinning,e.morphTargets=t.morphTargets,e.morphNormals=t.morphNormals,e.fog=t.fog,void 0!==n?(!1===t.visible?e.visible=!1:e.visible=void 0===n.visible||n.visible,e.transparent=void 0!==n.alpha&&n.alpha<1||t.transparent,void 0!==n.keepAlive&&(a[t.uuid].keepAlive=n.keepAlive)):(e.transparent=t.transparent,e.visible=t.visible),!0!==t.wireframe&&!1!==t.depthTest||(e.visible=!1)}}(t,e),t}function b(e){if(void 0!==e.material){if(Array.isArray(e.material))for(var t=0,n=e.material.length;t<n;t++)e.material[t]=y(e.material[t]);else e.material=y(e.material);u[e.uuid]=e.onBeforeRender,e.onBeforeRender=w}}function x(e){if(void 0!==e.material){if(Array.isArray(e.material))for(var t=0,n=e.material.length;t<n;t++)e.material[t]=c[e.material[t].uuid];else e.material=c[e.material.uuid];e.onBeforeRender=u[e.uuid]}}function w(e,t,n,r,i,o){var a=c[i.uuid];void 0!==a&&function(e,t){var n=t.userData.outlineParameters;e.uniforms.outlineAlpha.value=t.opacity,void 0!==n&&(void 0!==n.thickness&&(e.uniforms.outlineThickness.value=n.thickness),void 0!==n.color&&e.uniforms.outlineColor.value.fromArray(n.color),void 0!==n.alpha&&(e.uniforms.outlineAlpha.value=n.alpha))}(i,a)}this.render=function(t,n,r,i){if(!1!==this.enabled){var o=e.autoClear;e.autoClear=this.autoClear,e.render(t,n,r,i);var l=t.autoUpdate,h=t.background,d=e.shadowMap.enabled;t.autoUpdate=!1,t.background=null,e.autoClear=!1,e.shadowMap.enabled=!1,t.traverse(b),e.render(t,n,r),t.traverse(x),function(){for(var e,t=0,n=(e=Object.keys(c)).length;t<n;t++)c[e[t]]=void 0;for(t=0,n=(e=Object.keys(u)).length;t<n;t++)u[e[t]]=void 0;for(t=0,n=(e=Object.keys(a)).length;t<n;t++){var r=e[t];!1===a[r].used?(a[r].count++,!1===a[r].keepAlive&&a[r].count>s&&delete a[r]):(a[r].used=!1,a[r].count=0)}}(),t.autoUpdate=l,t.background=h,e.autoClear=o,e.shadowMap.enabled=d}else e.render(t,n,r,i)},this.autoClear=e.autoClear,this.domElement=e.domElement,this.shadowMap=e.shadowMap,this.clear=function(t,n,r){e.clear(t,n,r)},this.getPixelRatio=function(){return e.getPixelRatio()},this.setPixelRatio=function(t){e.setPixelRatio(t)},this.getSize=function(){return e.getSize()},this.setSize=function(t,n,r){e.setSize(t,n,r)},this.setViewport=function(t,n,r,i){e.setViewport(t,n,r,i)},this.setScissor=function(t,n,r,i){e.setScissor(t,n,r,i)},this.setScissorTest=function(t){e.setScissorTest(t)},this.setRenderTarget=function(t){e.setRenderTarget(t)}},t.ParallaxBarrierEffect=function(e){var t=new Jn(-1,1,1,-1,0,1),n=new Yn,r=new Ai,i={minFilter:Ze,magFilter:Ye,format:pt},o=new $n(512,512,i),a=new $n(512,512,i),s=new qn({uniforms:{mapLeft:{value:o.texture},mapRight:{value:a.texture}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = vec2( uv.x, uv.y );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D mapLeft;","uniform sampler2D mapRight;","varying vec2 vUv;","void main() {","\tvec2 uv = vUv;","\tif ( ( mod( gl_FragCoord.y, 2.0 ) ) > 1.00 ) {","\t\tgl_FragColor = texture2D( mapLeft, uv );","\t} else {","\t\tgl_FragColor = texture2D( mapRight, uv );","\t}","}"].join("\n")}),c=new fn(new tr(2,2),s);n.add(c),this.setSize=function(t,n){e.setSize(t,n);var r=e.getPixelRatio();o.setSize(t*r,n*r),a.setSize(t*r,n*r)},this.render=function(i,s){i.updateMatrixWorld(),null===s.parent&&s.updateMatrixWorld(),r.update(s),e.render(i,r.cameraL,o,!0),e.render(i,r.cameraR,a,!0),e.render(n,t)}},t.PeppersGhostEffect=function(e){var t,n,r,i=this;i.cameraDistance=15,i.reflectFromAbove=!1;var o=new Hn,a=new Hn,u=new Hn,l=new Hn,h=new s,d=new c,f=new s;e.autoClear=!1,this.setSize=function(i,o){t=i/2,i<o?(n=i/3,r=i/3):(n=o/3,r=o/3),e.setSize(i,o)},this.render=function(s,c){s.updateMatrixWorld(),null===c.parent&&c.updateMatrixWorld(),c.matrixWorld.decompose(h,d,f),o.position.copy(h),o.quaternion.copy(d),o.translateZ(i.cameraDistance),o.lookAt(s.position),a.position.copy(h),a.quaternion.copy(d),a.translateZ(-i.cameraDistance),a.lookAt(s.position),a.rotation.z+=Math.PI/180*180,u.position.copy(h),u.quaternion.copy(d),u.translateX(-i.cameraDistance),u.lookAt(s.position),u.rotation.x+=Math.PI/180*90,l.position.copy(h),l.quaternion.copy(d),l.translateX(i.cameraDistance),l.lookAt(s.position),l.rotation.x+=Math.PI/180*90,e.clear(),e.setScissorTest(!0),e.setScissor(t-n/2,2*r,n,r),e.setViewport(t-n/2,2*r,n,r),i.reflectFromAbove?e.render(s,a):e.render(s,o),e.setScissor(t-n/2,0,n,r),e.setViewport(t-n/2,0,n,r),i.reflectFromAbove?e.render(s,o):e.render(s,a),e.setScissor(t-n/2-n,r,n,r),e.setViewport(t-n/2-n,r,n,r),i.reflectFromAbove?e.render(s,l):e.render(s,u),e.setScissor(t+n/2,r,n,r),e.setViewport(t+n/2,r,n,r),i.reflectFromAbove?e.render(s,u):e.render(s,l),e.setScissorTest(!1)}},t.StereoEffect=function(e){var t=new Ai;t.aspect=.5,this.setEyeSeparation=function(e){t.eyeSep=e},this.setSize=function(t,n){e.setSize(t,n)},this.render=function(n,r){n.updateMatrixWorld(),null===r.parent&&r.updateMatrixWorld(),t.update(r);var i=e.getSize();e.autoClear&&e.clear(),e.setScissorTest(!0),e.setScissor(0,0,i.width/2,i.height),e.setViewport(0,0,i.width/2,i.height),e.render(n,t.cameraL),e.setScissor(i.width/2,0,i.width/2,i.height),e.setViewport(i.width/2,0,i.width/2,i.height),e.render(n,t.cameraR),e.setScissorTest(!1)}},t.ColladaExporter=Li,t.GLTFExporter=Ii,t.MMDExporter=function(){var e;this.parseVpd=function(t,n,r){if(!0!==t.isSkinnedMesh)return console.warn("MMDExporter: parseVpd() requires SkinnedMesh instance."),null;function i(e){Math.abs(e)<1e-6&&(e=0);var t=e.toString();-1===t.indexOf(".")&&(t+=".");var n=(t+="000000").indexOf(".");return t.slice(0,n)+"."+t.slice(n+1,n+7)}function o(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(i(e[n]));return t.join(",")}t.updateMatrixWorld(!0);var u=t.skeleton.bones,l=function(e){var t=e.clone();return t.pose(),t.skeleton.bones}(t),h=new s,d=new c,f=new c,p=new a,m=[];m.push("Vocaloid Pose Data file"),m.push(""),m.push((""!==t.name?t.name.replace(/\s/g,"_"):"skin")+".osm;"),m.push(u.length+";"),m.push("");for(var v=0,g=u.length;v<g;v++){var y=u[v],b=l[v];!0===r&&void 0!==y.userData.ik&&void 0!==y.userData.ik.originalMatrix?p.fromArray(y.userData.ik.originalMatrix):p.copy(y.matrix),h.setFromMatrixPosition(p),d.setFromRotationMatrix(p);var x=h.sub(b.position).toArray(),w=f.copy(b.quaternion).conjugate().multiply(d).toArray();x[2]=-x[2],w[0]=-w[0],w[1]=-w[1],m.push("Bone"+v+"{"+y.name),m.push("  "+o(x)+";"),m.push("  "+o(w)+";"),m.push("}"),m.push("")}m.push("");var _=m.join("\n");return!0===n?function(t){if(void 0===e){var n=(new MMDParser.CharsetEncoder).s2uTable;e={};for(var r=Object.keys(n),i=0,o=r.length;i<o;i++){var a=r[i],s=n[a];a=parseInt(a),e[s]=a}}var c=[];for(i=0,o=t.length;i<o;i++){var u=t.charCodeAt(i);if(void 0===(s=e[u]))throw"cannot convert charcode 0x"+u.toString(16);s>255?(c.push(s>>8&255),c.push(255&s)):c.push(255&s)}return new Uint8Array(c)}(_):_}},t.OBJExporter=Di,t.PLYExporter=Fi,t.STLExporter=ki,t.TypedGeometryExporter=Ui,t.ConvexGeometry=ii,t.ConvexBufferGeometry=oi,t.DecalGeometry=Bi,t.hilbert2D=function e(t,n,r,i,o,a,c){t=void 0!==t?t:new s(0,0,0);var u=(n=void 0!==n?n:10)/2,l=(r=void 0!==r?r:1,i=void 0!==i?i:0,o=void 0!==o?o:1,a=void 0!==a?a:2,c=void 0!==c?c:3,[new s(t.x-u,t.y,t.z-u),new s(t.x-u,t.y,t.z+u),new s(t.x+u,t.y,t.z+u),new s(t.x+u,t.y,t.z-u)]),h=[l[i],l[o],l[a],l[c]];if(0<=--r){var d=[];return Array.prototype.push.apply(d,e(h[0],u,r,i,c,a,o)),Array.prototype.push.apply(d,e(h[1],u,r,i,o,a,c)),Array.prototype.push.apply(d,e(h[2],u,r,i,o,a,c)),Array.prototype.push.apply(d,e(h[3],u,r,a,o,i,c)),d}return h},t.hilbert3D=function e(t,n,r,i,o,a,c,u,l,h,d){t=void 0!==t?t:new s(0,0,0);var f=(n=void 0!==n?n:10)/2,p=(r=void 0!==r?r:1,i=void 0!==i?i:0,o=void 0!==o?o:1,a=void 0!==a?a:2,c=void 0!==c?c:3,u=void 0!==u?u:4,l=void 0!==l?l:5,h=void 0!==h?h:6,d=void 0!==d?d:7,[new s(t.x-f,t.y+f,t.z-f),new s(t.x-f,t.y+f,t.z+f),new s(t.x-f,t.y-f,t.z+f),new s(t.x-f,t.y-f,t.z-f),new s(t.x+f,t.y-f,t.z-f),new s(t.x+f,t.y-f,t.z+f),new s(t.x+f,t.y+f,t.z+f),new s(t.x+f,t.y+f,t.z-f)]),m=[p[i],p[o],p[a],p[c],p[u],p[l],p[h],p[d]];if(--r>=0){var v=[];return Array.prototype.push.apply(v,e(m[0],f,r,i,c,u,d,h,l,a,o)),Array.prototype.push.apply(v,e(m[1],f,r,i,d,h,o,a,l,u,c)),Array.prototype.push.apply(v,e(m[2],f,r,i,d,h,o,a,l,u,c)),Array.prototype.push.apply(v,e(m[3],f,r,a,c,i,o,h,d,u,l)),Array.prototype.push.apply(v,e(m[4],f,r,a,c,i,o,h,d,u,l)),Array.prototype.push.apply(v,e(m[5],f,r,u,c,a,l,h,o,i,d)),Array.prototype.push.apply(v,e(m[6],f,r,u,c,a,l,h,o,i,d)),Array.prototype.push.apply(v,e(m[7],f,r,h,l,a,o,i,c,u,d)),v}return m},t.TeapotBufferGeometry=ji,t.GPUComputationRenderer=function(e,t,n){this.variables=[],this.currentTextureIndex=0;var r=new Yn,i=new Wn;i.position.z=1;var o={texture:{value:null}},a=u("uniform sampler2D texture;\n\nvoid main() {\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\n\tgl_FragColor = texture2D( texture, uv );\n\n}\n",o),s=new fn(new tr(2,2),a);function c(n){n.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}function u(e,t){var n=new qn({uniforms:t=t||{},vertexShader:"void main()\t{\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n",fragmentShader:e});return c(n),n}r.add(s),this.addVariable=function(e,t,n){var r={name:e,initialValueTexture:n,material:this.createShaderMaterial(t),dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:Ye,magFilter:Ye};return this.variables.push(r),r},this.setVariableDependencies=function(e,t){e.dependencies=t},this.init=function(){if(!n.extensions.get("OES_texture_float"))return"No OES_texture_float support for float textures.";if(0===n.capabilities.maxVertexTextures)return"No support for vertex shader textures.";for(var r=0;r<this.variables.length;r++){var i=this.variables[r];i.renderTargets[0]=this.createRenderTarget(e,t,i.wrapS,i.wrapT,i.minFilter,i.magFilter),i.renderTargets[1]=this.createRenderTarget(e,t,i.wrapS,i.wrapT,i.minFilter,i.magFilter),this.renderTexture(i.initialValueTexture,i.renderTargets[0]),this.renderTexture(i.initialValueTexture,i.renderTargets[1]);var o=i.material,a=o.uniforms;if(null!==i.dependencies)for(var s=0;s<i.dependencies.length;s++){var c=i.dependencies[s];if(c.name!==i.name){for(var u=!1,l=0;l<this.variables.length;l++)if(c.name===this.variables[l].name){u=!0;break}if(!u)return"Variable dependency not found. Variable="+i.name+", dependency="+c.name}a[c.name]={value:null},o.fragmentShader="\nuniform sampler2D "+c.name+";\n"+o.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){for(var e=this.currentTextureIndex,t=0===this.currentTextureIndex?1:0,n=0,r=this.variables.length;n<r;n++){var i=this.variables[n];if(null!==i.dependencies)for(var o=i.material.uniforms,a=0,s=i.dependencies.length;a<s;a++){var c=i.dependencies[a];o[c.name].value=c.renderTargets[e].texture}this.doRenderTarget(i.material,i.renderTargets[t])}this.currentTextureIndex=t},this.getCurrentRenderTarget=function(e){return e.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(e){return e.renderTargets[0===this.currentTextureIndex?1:0]},this.addResolutionDefine=c,this.createShaderMaterial=u,this.createRenderTarget=function(n,r,i,o,a,s){return new $n(n=n||e,r=r||t,{wrapS:i=i||Xe,wrapT:o=o||Xe,minFilter:a=a||Ye,magFilter:s=s||Ye,format:pt,type:/(iPad|iPhone|iPod)/g.test(navigator.userAgent)?st:at,stencilBuffer:!1,depthBuffer:!1})},this.createTexture=function(){var n=new Vi(new Float32Array(e*t*4),e,t,pt,at);return n.needsUpdate=!0,n},this.renderTexture=function(e,t){o.texture.value=e,this.doRenderTarget(a,t),o.texture.value=null},this.doRenderTarget=function(e,t){s.material=e,n.render(r,i,t),s.material=a}},t.GPUParticleSystem=Wi,t.GPUParticleContainer=Hi,t.Gyroscope=Xi,t.ImprovedNoise=function(){for(var e=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],t=0;t<256;t++)e[256+t]=e[t];function n(e){return e*e*e*(e*(6*e-15)+10)}function r(e,t,n){return t+e*(n-t)}function i(e,t,n,r){var i=15&e,o=i<8?t:n,a=i<4?n:12==i||14==i?t:r;return(0==(1&i)?o:-o)+(0==(2&i)?a:-a)}return{noise:function(t,o,a){var s=Math.floor(t),c=Math.floor(o),u=Math.floor(a),l=255&s,h=255&c,d=255&u,f=(t-=s)-1,p=(o-=c)-1,m=(a-=u)-1,v=n(t),g=n(o),y=n(a),b=e[l]+h,x=e[b]+d,w=e[b+1]+d,_=e[l+1]+h,S=e[_]+d,M=e[_+1]+d;return r(y,r(g,r(v,i(e[x],t,o,a),i(e[S],f,o,a)),r(v,i(e[w],t,p,a),i(e[M],f,p,a))),r(g,r(v,i(e[x+1],t,o,m),i(e[S+1],f,o,a-1)),r(v,i(e[w+1],t,p,m),i(e[M+1],f,p,m))))}}},t.Line2=no,t.LineGeometry=to,t.LineMaterial=$i,t.LineSegments2=eo,t.LineSegmentsGeometry=Ki,t.Wireframe=ro,t.WireframeGeometry2=io,t.ThreeMFLoader=ao,t.AMFLoader=so,t.AssimpJSONLoader=co,t.AssimpLoader=ho,t.AWDLoader=mo,t.BabylonLoader=Mo,t.BinaryLoader=Lr,t.BVHLoader=To,t.ColladaLoader=Po,t.DDSLoader=No,t.LegacyGLTFLoader=Io,t.DRACOLoader=Do,t.EquirectangularToCubeGenerator=ko,t.EXRLoader=Bo,t.FBXLoader=zo,t.GCodeLoader=jo,t.GLTFLoader=Go,t.HDRCubeTextureLoader=qo,t.KMZLoader=Yo,t.KTXLoader=Jo,t.LoaderSupport=Zo,t.MD2Loader=Ko,t.MMDLoader=$o,t.MTLLoader=ea,t.NodeMaterialLoader=va,t.OBJLoader=ga,t.OBJLoader2=ya,t.PCDLoader=ba,t.PDBLoader=xa,t.PlayCanvasLoader=wa,t.PLYLoader=_a,t.PRWMLoader=Ca,t.PVRLoader=Pa,t.HDRLoader=Ho,t.RGBELoader=Wo,t.STLLoader=La,t.SVGLoader=Ts,t.TDSLoader=As,t.TGALoader=Co,t.TTFLoader=lc,t.VRMLLoader=hc,t.VRMLoader=dc,t.VTKLoader=fc,t.MarchingCubes=mc,t.ColorConverter=bc,t.Lut=_c,t.MD2Character=function(){var e=this;function t(e,t){for(var n=new Ar,i=[],o=0;o<t.length;o++)i[o]=n.load(e+t[o],r),i[o].mapping=ke,i[o].name=t[o];return i}function n(e,t){var n=new pr({color:16755200,wireframe:!0,morphTargets:!0,morphNormals:!0}),r=new pr({color:16777215,wireframe:!1,map:t,morphTargets:!0,morphNormals:!0}),i=new fn(e,r);return i.rotation.y=-Math.PI/2,i.castShadow=!0,i.receiveShadow=!0,i.materialTexture=r,i.materialWireframe=n,i}function r(){e.loadCounter-=1,0===e.loadCounter&&e.onLoadComplete()}this.scale=1,this.animationFPS=6,this.root=new p,this.meshBody=null,this.meshWeapon=null,this.skinsBody=[],this.skinsWeapon=[],this.weapons=[],this.activeAnimation=null,this.mixer=null,this.onLoadComplete=function(){},this.loadCounter=0,this.loadParts=function(i){this.loadCounter=2*i.weapons.length+i.skins.length+1;for(var o=[],a=0;a<i.weapons.length;a++)o[a]=i.weapons[a][1];this.skinsBody=t(i.baseUrl+"skins/",i.skins),this.skinsWeapon=t(i.baseUrl+"skins/",o);var s=new Ko;s.load(i.baseUrl+i.body,function(t){t.computeBoundingBox(),e.root.position.y=-e.scale*t.boundingBox.min.y;var i=n(t,e.skinsBody[0]);i.scale.set(e.scale,e.scale,e.scale),e.root.add(i),e.meshBody=i,e.meshBody.clipOffset=0,e.activeAnimationClipName=i.geometry.animations[0].name,e.mixer=new Dn(i),r()});var c=function(t,i){return function(o){var a=n(o,e.skinsWeapon[t]);a.scale.set(e.scale,e.scale,e.scale),a.visible=!1,a.name=i,e.root.add(a),e.weapons[t]=a,e.meshWeapon=a,r()}};for(a=0;a<i.weapons.length;a++)s.load(i.baseUrl+i.weapons[a][0],c(a,i.weapons[a][0]))},this.setPlaybackRate=function(e){this.mixer.timeScale=0!==e?1/e:0},this.setWireframe=function(e){e?(this.meshBody&&(this.meshBody.material=this.meshBody.materialWireframe),this.meshWeapon&&(this.meshWeapon.material=this.meshWeapon.materialWireframe)):(this.meshBody&&(this.meshBody.material=this.meshBody.materialTexture),this.meshWeapon&&(this.meshWeapon.material=this.meshWeapon.materialTexture))},this.setSkin=function(e){this.meshBody&&!1===this.meshBody.material.wireframe&&(this.meshBody.material.map=this.skinsBody[e])},this.setWeapon=function(t){for(var n=0;n<this.weapons.length;n++)this.weapons[n].visible=!1;var r=this.weapons[t];r&&(r.visible=!0,this.meshWeapon=r,e.syncWeaponAnimation())},this.setAnimation=function(t){if(this.meshBody){this.meshBody.activeAction&&(this.meshBody.activeAction.stop(),this.meshBody.activeAction=null);var n=this.mixer.clipAction(t,this.meshBody);n&&(this.meshBody.activeAction=n.play())}e.activeClipName=t,e.syncWeaponAnimation()},this.syncWeaponAnimation=function(){var t=e.activeClipName;if(e.meshWeapon){this.meshWeapon.activeAction&&(this.meshWeapon.activeAction.stop(),this.meshWeapon.activeAction=null);var n=this.mixer.clipAction(t,this.meshWeapon);n&&(this.meshWeapon.activeAction=n.syncWith(this.meshBody.activeAction).play())}},this.update=function(e){this.mixer&&this.mixer.update(e)}},t.MD2CharacterComplex=function(){var e=this;function t(e,t){for(var n=new Ar,i=[],o=0;o<t.length;o++)i[o]=n.load(e+t[o],r),i[o].mapping=ke,i[o].name=t[o];return i}function n(t,n){var r=new pr({color:16755200,wireframe:!0,morphTargets:!0,morphNormals:!0}),i=new pr({color:16777215,wireframe:!1,map:n,morphTargets:!0,morphNormals:!0}),o=new Mc(t,i);return o.rotation.y=-Math.PI/2,o.materialTexture=i,o.materialWireframe=r,o.autoCreateAnimations(e.animationFPS),o}function r(){e.loadCounter-=1,0===e.loadCounter&&e.onLoadComplete()}function i(e){return 1===e?1:1-Math.pow(2,-10*e)}this.scale=1,this.animationFPS=6,this.transitionFrames=15,this.maxSpeed=275,this.maxReverseSpeed=-275,this.frontAcceleration=600,this.backAcceleration=600,this.frontDecceleration=600,this.angularSpeed=2.5,this.root=new p,this.meshBody=null,this.meshWeapon=null,this.controls=null,this.skinsBody=[],this.skinsWeapon=[],this.weapons=[],this.currentSkin=void 0,this.onLoadComplete=function(){},this.meshes=[],this.animations={},this.loadCounter=0,this.speed=0,this.bodyOrientation=0,this.walkSpeed=this.maxSpeed,this.crouchSpeed=.5*this.maxSpeed,this.activeAnimation=null,this.oldAnimation=null,this.enableShadows=function(e){for(var t=0;t<this.meshes.length;t++)this.meshes[t].castShadow=e,this.meshes[t].receiveShadow=e},this.setVisible=function(e){for(var t=0;t<this.meshes.length;t++)this.meshes[t].visible=e,this.meshes[t].visible=e},this.shareParts=function(e){this.animations=e.animations,this.walkSpeed=e.walkSpeed,this.crouchSpeed=e.crouchSpeed,this.skinsBody=e.skinsBody,this.skinsWeapon=e.skinsWeapon;var t=n(e.meshBody.geometry,this.skinsBody[0]);t.scale.set(this.scale,this.scale,this.scale),this.root.position.y=e.root.position.y,this.root.add(t),this.meshBody=t,this.meshes.push(t);for(var r=0;r<e.weapons.length;r++){var i=n(e.weapons[r].geometry,this.skinsWeapon[r]);i.scale.set(this.scale,this.scale,this.scale),i.visible=!1,i.name=e.weapons[r].name,this.root.add(i),this.weapons[r]=i,this.meshWeapon=i,this.meshes.push(i)}},this.loadParts=function(i){this.animations=i.animations,this.walkSpeed=i.walkSpeed,this.crouchSpeed=i.crouchSpeed,this.loadCounter=2*i.weapons.length+i.skins.length+1;for(var o=[],a=0;a<i.weapons.length;a++)o[a]=i.weapons[a][1];this.skinsBody=t(i.baseUrl+"skins/",i.skins),this.skinsWeapon=t(i.baseUrl+"skins/",o);var s=new Ko;s.load(i.baseUrl+i.body,function(t){t.computeBoundingBox(),e.root.position.y=-e.scale*t.boundingBox.min.y;var i=n(t,e.skinsBody[0]);i.scale.set(e.scale,e.scale,e.scale),e.root.add(i),e.meshBody=i,e.meshes.push(i),r()});var c=function(t,i){return function(o){var a=n(o,e.skinsWeapon[t]);a.scale.set(e.scale,e.scale,e.scale),a.visible=!1,a.name=i,e.root.add(a),e.weapons[t]=a,e.meshWeapon=a,e.meshes.push(a),r()}};for(a=0;a<i.weapons.length;a++)s.load(i.baseUrl+i.weapons[a][0],c(a,i.weapons[a][0]))},this.setPlaybackRate=function(e){this.meshBody&&(this.meshBody.duration=this.meshBody.baseDuration/e),this.meshWeapon&&(this.meshWeapon.duration=this.meshWeapon.baseDuration/e)},this.setWireframe=function(e){e?(this.meshBody&&(this.meshBody.material=this.meshBody.materialWireframe),this.meshWeapon&&(this.meshWeapon.material=this.meshWeapon.materialWireframe)):(this.meshBody&&(this.meshBody.material=this.meshBody.materialTexture),this.meshWeapon&&(this.meshWeapon.material=this.meshWeapon.materialTexture))},this.setSkin=function(e){this.meshBody&&!1===this.meshBody.material.wireframe&&(this.meshBody.material.map=this.skinsBody[e],this.currentSkin=e)},this.setWeapon=function(e){for(var t=0;t<this.weapons.length;t++)this.weapons[t].visible=!1;var n=this.weapons[e];n&&(n.visible=!0,this.meshWeapon=n,this.activeAnimation&&(n.playAnimation(this.activeAnimation),this.meshWeapon.setAnimationTime(this.activeAnimation,this.meshBody.getAnimationTime(this.activeAnimation))))},this.setAnimation=function(e){e!==this.activeAnimation&&e&&(this.meshBody&&(this.meshBody.setAnimationWeight(e,0),this.meshBody.playAnimation(e),this.oldAnimation=this.activeAnimation,this.activeAnimation=e,this.blendCounter=this.transitionFrames),this.meshWeapon&&(this.meshWeapon.setAnimationWeight(e,0),this.meshWeapon.playAnimation(e)))},this.update=function(e){this.controls&&this.updateMovementModel(e),this.animations&&(this.updateBehaviors(e),this.updateAnimations(e))},this.updateAnimations=function(e){var t=1;this.blendCounter>0&&(t=(this.transitionFrames-this.blendCounter)/this.transitionFrames,this.blendCounter-=1),this.meshBody&&(this.meshBody.update(e),this.meshBody.setAnimationWeight(this.activeAnimation,t),this.meshBody.setAnimationWeight(this.oldAnimation,1-t)),this.meshWeapon&&(this.meshWeapon.update(e),this.meshWeapon.setAnimationWeight(this.activeAnimation,t),this.meshWeapon.setAnimationWeight(this.oldAnimation,1-t))},this.updateBehaviors=function(e){var t,n,r=this.controls,i=this.animations;r.crouch?(t=i.crouchMove,n=i.crouchIdle):(t=i.move,n=i.idle),r.jump&&(t=i.jump,n=i.jump),r.attack&&(r.crouch?(t=i.crouchAttack,n=i.crouchAttack):(t=i.attack,n=i.attack)),(r.moveForward||r.moveBackward||r.moveLeft||r.moveRight)&&this.activeAnimation!==t&&this.setAnimation(t),Math.abs(this.speed)<.2*this.maxSpeed&&!(r.moveLeft||r.moveRight||r.moveForward||r.moveBackward)&&this.activeAnimation!==n&&this.setAnimation(n),r.moveForward&&(this.meshBody&&(this.meshBody.setAnimationDirectionForward(this.activeAnimation),this.meshBody.setAnimationDirectionForward(this.oldAnimation)),this.meshWeapon&&(this.meshWeapon.setAnimationDirectionForward(this.activeAnimation),this.meshWeapon.setAnimationDirectionForward(this.oldAnimation))),r.moveBackward&&(this.meshBody&&(this.meshBody.setAnimationDirectionBackward(this.activeAnimation),this.meshBody.setAnimationDirectionBackward(this.oldAnimation)),this.meshWeapon&&(this.meshWeapon.setAnimationDirectionBackward(this.activeAnimation),this.meshWeapon.setAnimationDirectionBackward(this.oldAnimation)))},this.updateMovementModel=function(e){var t=this.controls;if(t.crouch?this.maxSpeed=this.crouchSpeed:this.maxSpeed=this.walkSpeed,this.maxReverseSpeed=-this.maxSpeed,t.moveForward&&(this.speed=o.clamp(this.speed+e*this.frontAcceleration,this.maxReverseSpeed,this.maxSpeed)),t.moveBackward&&(this.speed=o.clamp(this.speed-e*this.backAcceleration,this.maxReverseSpeed,this.maxSpeed)),t.moveLeft&&(this.bodyOrientation+=e*this.angularSpeed,this.speed=o.clamp(this.speed+1*e*this.frontAcceleration,this.maxReverseSpeed,this.maxSpeed)),t.moveRight&&(this.bodyOrientation-=e*this.angularSpeed,this.speed=o.clamp(this.speed+1*e*this.frontAcceleration,this.maxReverseSpeed,this.maxSpeed)),!t.moveForward&&!t.moveBackward)if(this.speed>0){var n=i(this.speed/this.maxSpeed);this.speed=o.clamp(this.speed-n*e*this.frontDecceleration,0,this.maxSpeed)}else n=i(this.speed/this.maxReverseSpeed),this.speed=o.clamp(this.speed+n*e*this.backAcceleration,this.maxReverseSpeed,0);var r=this.speed*e;this.root.position.x+=Math.sin(this.bodyOrientation)*r,this.root.position.z+=Math.cos(this.bodyOrientation)*r,this.root.rotation.y=this.bodyOrientation}},t.ExplodeModifier=Tc,t.SimplifyModifier=Ac,t.SubdivisionModifier=Ec,t.TessellateModifier=Cc,t.MorphAnimMesh=Pc,t.MorphBlendMesh=Mc,t.CameraNode=ma,t.ColorsNode=Nc,t.LightNode=Rc,t.NormalNode=ua,t.PositionNode=ca,t.ReflectNode=Ic,t.ResolutionNode=iu,t.ScreenUVNode=ou,t.UVNode=sa,t.BlinnExponentToRoughnessNode=Xc,t.BlinnShininessExponentNode=Hc,t.RoughnessToBlinnExponentNode=su,t.AttributeNode=cu,t.ConstNode=pa,t.ExpressionNode=uu,t.FunctionCallNode=lu,t.FunctionNode=ra,t.InputNode=la,t.Node=ta,t.NodeBuilder=$c,t.NodeFrame=hu,t.NodeLib=ia,t.NodeUniform=Fc,t.NodeUtils=Dc,t.StructNode=Bc,t.TempNode=na,t.VarNode=du,t.BlurNode=fu,t.ColorAdjustmentNode=mu,t.LuminanceNode=pu,t.ColorNode=eu,t.CubeTextureNode=Wc,t.FloatNode=ha,t.IntNode=vu,t.Matrix3Node=gu,t.Matrix4Node=yu,t.PropertyNode=bu,t.ReflectorNode=wu,t.RTTNode=_u,t.ScreenNode=Su,t.TextureNode=Gc,t.Vector2Node=ru,t.Vector3Node=zc,t.Vector4Node=jc,t.MeshStandardNodeMaterial=Cu,t.NodeMaterial=nu,t.MeshStandardNode=Eu,t.PhongNode=Pu,t.RawNode=tu,t.SpriteNode=Lu,t.StandardNode=Mu,t.PhongNodeMaterial=Ou,t.SpriteNodeMaterial=Nu,t.StandardNodeMaterial=Ru,t.CondNode=Iu,t.Math1Node=Du,t.Math2Node=Fu,t.Math3Node=ku,t.OperatorNode=xu,t.BumpMapNode=Uu,t.NormalMapNode=Au,t.TextureCubeNode=Yc,t.TextureCubeUVNode=qc,t.NodePass=ju,t.NodePostProcessing=Vu,t.CheckerNode=Gu,t.NoiseNode=Wu,t.BypassNode=Hu,t.ColorSpaceNode=Vc,t.JoinNode=qu,t.MaxMIPLevelNode=au,t.SwitchNode=Tu,t.TimerNode=da,t.UVTransformNode=Yu,t.VelocityNode=Ju,t.Lensflare=Zu,t.LensflareElement=Ku,t.Reflector=$u,t.ReflectorRTT=el,t.Refractor=tl,t.ShadowMesh=nl,t.Sky=rl,t.Water=il,t.Water2=al,t.Ocean=sl,t.Octree=dl,t.OctreeObjectData=fl,t.OctreeNode=pl,t.PMREMCubeUVPacker=ml,t.PMREMGenerator=vl,t.AdaptiveToneMappingPass=xl,t.AfterimagePass=_l,t.BloomPass=Ml,t.BokehPass=Tl,t.ClearPass=Al,t.CubeTexturePass=El,t.DotScreenPass=Pl,t.EffectComposer=Nl,t.FilmPass=Il,t.GlitchPass=Fl,t.HalftonePass=Ul,t.MaskPass=Ll,t.ClearMaskPass=Ol,t.OutlinePass=Bl,t.Pass=Bu,t.RenderPass=zl,t.SAOPass=Xl,t.SavePass=ql,t.ShaderPass=zu,t.SMAAPass=Jl,t.SSAARenderPass=Ql,t.SSAOPass=Kl,t.TAARenderPass=$l,t.TexturePass=eh,t.UnrealBloomPass=nh,t.PRNG=function(){this.seed=1,this.next=function(){return this.gen()/2147483647},this.nextRange=function(e,t){return e+(t-e)*this.next()},this.gen=function(){return this.seed=16807*this.seed%2147483647}},t.QuickHull=$r,t.SpriteCanvasMaterial=lh,t.CanvasRenderer=function(e){console.log("CanvasRenderer",z),e=e||{};var t,n,r,i,o,a,c,u,l,h,f,p,m,g,y,b,x,w,_,S=this,M=new uh,T=void 0!==e.canvas?e.canvas:document.createElement("canvas"),A=T.width,E=T.height,C=Math.floor(A/2),P=Math.floor(E/2),L=0,O=0,N=A,R=E,I=1,D=T.getContext("2d",{alpha:!0===e.alpha}),F=new v(0),k=!0===e.alpha?0:1,U=1,B=0,j=null,V=null,G=null,W=null,H=null,X=[],q=new v,Y=new v,J=new v,Q=new v,$={},ie=new Qu,oe=new Qu,ae=new Qu,se=new v,ce=new v,ue=new v,le=new s,he=new s,de=new s,fe=new d;function pe(e,t,n){_e(n.opacity),Se(n.blending);var r=t.scale.x*C,i=t.scale.y*P,o=Math.sqrt(r*r+i*i);if(ae.min.set(e.x-o,e.y-o),ae.max.set(e.x+o,e.y+o),n.isSpriteMaterial){var a=n.map;if(null!==a){var s=$[a.id];if(void 0!==s&&s.version===a.version||(s=be(a),$[a.id]=s),void 0!==s.canvas){Ce(s.canvas);var c=a.image,u=c.width*a.offset.x,l=c.height*a.offset.y,h=c.width*a.repeat.x,d=c.height*a.repeat.y,f=r/h,p=i/d;D.save(),D.translate(e.x,e.y),0!==n.rotation&&D.rotate(n.rotation),D.translate(-r/2,-i/2),D.scale(f,p),D.translate(-u,-l),D.fillRect(u,l,h,d),D.restore()}}else Ce(n.color.getStyle()),D.save(),D.translate(e.x,e.y),0!==n.rotation&&D.rotate(n.rotation),D.scale(r,-i),D.fillRect(-.5,-.5,1,1),D.restore()}else n.isSpriteCanvasMaterial?(Ee(n.color.getStyle()),Ce(n.color.getStyle()),D.save(),D.translate(e.x,e.y),0!==n.rotation&&D.rotate(n.rotation),D.scale(r,i),n.program(D),D.restore()):n.isPointsMaterial&&(Ce(n.color.getStyle()),D.save(),D.translate(e.x,e.y),0!==n.rotation&&D.rotate(n.rotation),D.scale(r*n.size,-i*n.size),D.fillRect(-.5,-.5,1,1),D.restore())}function me(e,t,n,r){if(_e(r.opacity),Se(r.blending),D.beginPath(),D.moveTo(e.positionScreen.x,e.positionScreen.y),D.lineTo(t.positionScreen.x,t.positionScreen.y),r.isLineBasicMaterial){if(Me(r.linewidth),Te(r.linecap),Ae(r.linejoin),r.vertexColors!==K)Ee(r.color.getStyle());else{var i=n.vertexColors[0].getStyle(),o=n.vertexColors[1].getStyle();if(i===o)Ee(i);else{try{var a=D.createLinearGradient(e.positionScreen.x,e.positionScreen.y,t.positionScreen.x,t.positionScreen.y);a.addColorStop(0,i),a.addColorStop(1,o)}catch(e){a=i}Ee(a)}}r.isLineDashedMaterial&&Pe([r.dashSize,r.gapSize]),D.stroke(),ae.expandByScalar(2*r.linewidth),r.isLineDashedMaterial&&Pe([])}}function ve(e,t,n,i,o,a,s,d){S.info.render.vertices+=3,S.info.render.faces++,_e(d.opacity),Se(d.blending),c=e.positionScreen.x,u=e.positionScreen.y,l=t.positionScreen.x,h=t.positionScreen.y,f=n.positionScreen.x,p=n.positionScreen.y,function(e,t,n,r,i,o){D.beginPath(),D.moveTo(e,t),D.lineTo(n,r),D.lineTo(i,o),D.closePath()}(c,u,l,h,f,p),(d.isMeshLambertMaterial||d.isMeshPhongMaterial||d.isMeshStandardMaterial)&&null===d.map?(Y.copy(d.color),J.copy(d.emissive),d.vertexColors===Z&&Y.multiply(s.color),q.copy(se),he.copy(e.positionWorld).add(t.positionWorld).add(n.positionWorld).divideScalar(3),function(e,t,n){for(var i=0,o=r.length;i<o;i++){var a=r[i];if(Q.copy(a.color),a.isDirectionalLight){var s=le.setFromMatrixPosition(a.matrixWorld).normalize();if((c=t.dot(s))<=0)continue;c*=a.intensity,n.add(Q.multiplyScalar(c))}else if(a.isPointLight){var c;if(s=le.setFromMatrixPosition(a.matrixWorld),(c=t.dot(le.subVectors(s,e).normalize()))<=0)continue;if(0==(c*=0==a.distance?1:1-Math.min(e.distanceTo(s)/a.distance,1)))continue;c*=a.intensity,n.add(Q.multiplyScalar(c))}}}(he,s.normalModel,q),q.multiply(Y).add(J),!0===d.wireframe?ge(q,d.wireframeLinewidth,d.wireframeLinecap,d.wireframeLinejoin):ye(q)):d.isMeshBasicMaterial||d.isMeshLambertMaterial||d.isMeshPhongMaterial||d.isMeshStandardMaterial?null!==d.map?d.map.mapping===ke&&(m=s.uvs,xe(c,u,l,h,f,p,m[i].x,m[i].y,m[o].x,m[o].y,m[a].x,m[a].y,d.map)):null!==d.envMap?d.envMap.mapping===Ve&&(de.copy(s.vertexNormalsModel[i]).applyMatrix3(fe),g=.5*de.x+.5,y=.5*de.y+.5,de.copy(s.vertexNormalsModel[o]).applyMatrix3(fe),b=.5*de.x+.5,x=.5*de.y+.5,de.copy(s.vertexNormalsModel[a]).applyMatrix3(fe),w=.5*de.x+.5,_=.5*de.y+.5,xe(c,u,l,h,f,p,g,y,b,x,w,_,d.envMap)):(q.copy(d.color),d.vertexColors===Z&&q.multiply(s.color),!0===d.wireframe?ge(q,d.wireframeLinewidth,d.wireframeLinecap,d.wireframeLinejoin):ye(q)):d.isMeshNormalMaterial?(de.copy(s.normalModel).applyMatrix3(fe),q.setRGB(de.x,de.y,de.z).multiplyScalar(.5).addScalar(.5),!0===d.wireframe?ge(q,d.wireframeLinewidth,d.wireframeLinecap,d.wireframeLinejoin):ye(q)):(q.setRGB(1,1,1),!0===d.wireframe?ge(q,d.wireframeLinewidth,d.wireframeLinecap,d.wireframeLinejoin):ye(q))}function ge(e,t,n,r){Me(t),Te(n),Ae(r),Ee(e.getStyle()),D.stroke(),ae.expandByScalar(2*t)}function ye(e){Ce(e.getStyle()),D.fill()}function be(e){if(0===e.version||e instanceof Lo||e instanceof Vi)return{canvas:void 0,version:e.version};var t=e.image;if(!1===t.complete)return{canvas:void 0,version:0};var n=e.wrapS===He||e.wrapS===qe,r=e.wrapT===He||e.wrapT===qe,i=e.wrapS===qe,o=e.wrapT===qe,a=document.createElement("canvas");a.width=t.width*(i?2:1),a.height=t.height*(o?2:1);var s=a.getContext("2d");s.setTransform(1,0,0,-1,0,t.height),s.drawImage(t,0,0),!0===i&&(s.setTransform(-1,0,0,-1,t.width,t.height),s.drawImage(t,-t.width,0)),!0===o&&(s.setTransform(1,0,0,1,0,0),s.drawImage(t,0,t.height)),!0===i&&!0===o&&(s.setTransform(-1,0,0,1,t.width,0),s.drawImage(t,-t.width,t.height));var c="no-repeat";!0===n&&!0===r?c="repeat":!0===n?c="repeat-x":!0===r&&(c="repeat-y");var u=D.createPattern(a,c);return e.onUpdate&&e.onUpdate(e),{canvas:u,version:e.version}}function xe(e,t,n,r,i,o,a,s,c,u,l,h,d){var f=$[d.id];if(void 0!==f&&f.version===d.version||(f=be(d),$[d.id]=f),void 0===f.canvas)return Ce("rgba( 0, 0, 0, 1)"),void D.fill();Ce(f.canvas);var p,m,v,g,y,b,x,w,_=d.offset.x/d.repeat.x,S=d.offset.y/d.repeat.y,M=d.image.width*d.repeat.x,T=d.image.height*d.repeat.y;c=(c+_)*M,u=(u+S)*T,l=(l+_)*M,h=(h+S)*T,n-=e,r-=t,i-=e,o-=t,0!=(x=(c-=a=(a+_)*M)*(h-=s=(s+S)*T)-(l-=a)*(u-=s))&&(y=e-(p=(h*n-u*i)*(w=1/x))*a-(v=(c*i-l*n)*w)*s,b=t-(m=(h*r-u*o)*w)*a-(g=(c*o-l*r)*w)*s,D.save(),D.transform(p,m,v,g,y,b),D.fill(),D.restore())}function we(e,t,n){var r,i=t.x-e.x,o=t.y-e.y,a=i*i+o*o;0!==a&&(i*=r=n/Math.sqrt(a),o*=r,t.x+=i,t.y+=o,e.x-=i,e.y-=o)}function _e(e){U!==e&&(D.globalAlpha=e,U=e)}function Se(e){B!==e&&(e===ee?D.globalCompositeOperation="source-over":e===te?D.globalCompositeOperation="lighter":e===ne?D.globalCompositeOperation="darker":e===re&&(D.globalCompositeOperation="multiply"),B=e)}function Me(e){G!==e&&(D.lineWidth=e,G=e)}function Te(e){W!==e&&(D.lineCap=e,W=e)}function Ae(e){H!==e&&(D.lineJoin=e,H=e)}function Ee(e){j!==e&&(D.strokeStyle=e,j=e)}function Ce(e){V!==e&&(D.fillStyle=e,V=e)}function Pe(e){X.length!==e.length&&(D.setLineDash(e),X=e)}void 0===D.setLineDash&&(D.setLineDash=function(){}),this.domElement=T,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.getContext=function(){return D},this.getContextAttributes=function(){return D.getContextAttributes()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(e){void 0!==e&&(I=e)},this.setSize=function(e,t,n){A=e*I,E=t*I,T.width=A,T.height=E,C=Math.floor(A/2),P=Math.floor(E/2),!1!==n&&(T.style.width=e+"px",T.style.height=t+"px"),ie.min.set(-C,-P),ie.max.set(C,P),oe.min.set(-C,-P),oe.max.set(C,P),U=1,B=0,j=null,V=null,G=null,W=null,H=null,this.setViewport(0,0,e,t)},this.setViewport=function(e,t,n,r){L=e*I,O=t*I,N=n*I,R=r*I},this.setScissor=function(){},this.setScissorTest=function(){},this.setClearColor=function(e,t){F.set(e),k=void 0!==t?t:1,oe.min.set(-C,-P),oe.max.set(C,P)},this.setClearColorHex=function(e,t){console.warn("CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getClearColor=function(){return F},this.getClearAlpha=function(){return k},this.getMaxAnisotropy=function(){return 0},this.clear=function(){!1===oe.isEmpty()&&(oe.intersect(ie),oe.expandByScalar(2),oe.min.x=oe.min.x+C,oe.min.y=-oe.min.y+P,oe.max.x=oe.max.x+C,oe.max.y=-oe.max.y+P,k<1&&D.clearRect(0|oe.min.x,0|oe.max.y,oe.max.x-oe.min.x|0,oe.min.y-oe.max.y|0),k>0&&(_e(1),Se(ee),Ce("rgba("+Math.floor(255*F.r)+","+Math.floor(255*F.g)+","+Math.floor(255*F.b)+","+k+")"),D.fillRect(0|oe.min.x,0|oe.max.y,oe.max.x-oe.min.x|0,oe.min.y-oe.max.y|0)),oe.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(e,s){if(void 0!==s.isCamera){var c=e.background;c&&c.isColor?(_e(1),Se(ee),Ce(c.getStyle()),D.fillRect(0,0,A,E)):!0===this.autoClear&&this.clear(),S.info.render.vertices=0,S.info.render.faces=0,D.setTransform(N/A,0,0,-R/E,L,E-O),D.translate(C,P),t=M.projectScene(e,s,this.sortObjects,this.sortElements),n=t.elements,r=t.lights,fe.getNormalMatrix(s.matrixWorldInverse),function(){se.setRGB(0,0,0),ce.setRGB(0,0,0),ue.setRGB(0,0,0);for(var e=0,t=r.length;e<t;e++){var n=r[e],i=n.color;n.isAmbientLight?se.add(i):n.isDirectionalLight?ce.add(i):n.isPointLight&&ue.add(i)}}();for(var u=0,l=n.length;u<l;u++){var h=n[u],d=h.material;if(void 0!==d&&0!==d.opacity){if(ae.makeEmpty(),h instanceof ch)(i=h).x*=C,i.y*=P,pe(i,h,d);else if(h instanceof sh)i=h.v1,o=h.v2,i.positionScreen.x*=C,i.positionScreen.y*=P,o.positionScreen.x*=C,o.positionScreen.y*=P,ae.setFromPoints([i.positionScreen,o.positionScreen]),!0===ie.intersectsBox(ae)&&me(i,o,h,d);else if(h instanceof oh){if(i=h.v1,o=h.v2,a=h.v3,i.positionScreen.z<-1||i.positionScreen.z>1)continue;if(o.positionScreen.z<-1||o.positionScreen.z>1)continue;if(a.positionScreen.z<-1||a.positionScreen.z>1)continue;i.positionScreen.x*=C,i.positionScreen.y*=P,o.positionScreen.x*=C,o.positionScreen.y*=P,a.positionScreen.x*=C,a.positionScreen.y*=P,d.overdraw>0&&(we(i.positionScreen,o.positionScreen,d.overdraw),we(o.positionScreen,a.positionScreen,d.overdraw),we(a.positionScreen,i.positionScreen,d.overdraw)),ae.setFromPoints([i.positionScreen,o.positionScreen,a.positionScreen]),!0===ie.intersectsBox(ae)&&ve(i,o,a,0,1,2,h,d)}oe.union(ae)}}D.setTransform(1,0,0,1,0,0)}else console.error("CanvasRenderer.render: camera is not an instance of Camera.")}},t.CSS2DObject=hh,t.CSS2DRenderer=function(){var e,t,n,r;console.log("CSS2DRenderer",z);var i=new s,o=new a,c=new a,u={objects:new WeakMap},l=document.createElement("div");l.style.overflow="hidden",this.domElement=l,this.getSize=function(){return{width:e,height:t}},this.setSize=function(i,o){n=(e=i)/2,r=(t=o)/2,l.style.width=i+"px",l.style.height=o+"px"};var h=function(e,t){if(e instanceof hh){i.setFromMatrixPosition(e.matrixWorld),i.applyMatrix4(c);var o=e.element,a="translate(-50%,-50%) translate("+(i.x*n+n)+"px,"+(-i.y*r+r)+"px)";o.style.WebkitTransform=a,o.style.MozTransform=a,o.style.oTransform=a,o.style.transform=a;var s={distanceToCameraSquared:d(t,e)};u.objects.set(e,s),o.parentNode!==l&&l.appendChild(o)}for(var f=0,p=e.children.length;f<p;f++)h(e.children[f],t)},d=function(){var e=new s,t=new s;return function(n,r){return e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(r.matrixWorld),e.distanceToSquared(t)}}(),f=function(e){for(var t=function(e){var t=[];return e.traverse(function(e){e instanceof hh&&t.push(e)}),t}(e).sort(function(e,t){return u.objects.get(e).distanceToCameraSquared-u.objects.get(t).distanceToCameraSquared}),n=t.length,r=0,i=t.length;r<i;r++)t[r].element.style.zIndex=n-r};this.render=function(e,t){e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),o.copy(t.matrixWorldInverse),c.multiplyMatrices(t.projectionMatrix,o),h(e,t),f(e)}},t.CSS3DObject=dh,t.CSS3DSprite=fh,t.CSS3DRenderer=function(){var e,t,n,r;console.log("CSS3DRenderer",z);var i=new a,o={camera:{fov:0,style:""},objects:new WeakMap},c=document.createElement("div");c.style.overflow="hidden",this.domElement=c;var u=document.createElement("div");u.style.WebkitTransformStyle="preserve-3d",u.style.transformStyle="preserve-3d",c.appendChild(u);var l=/Trident/i.test(navigator.userAgent);function h(e){return Math.abs(e)<1e-10?0:e}function d(e){var t=e.elements;return"matrix3d("+h(t[0])+","+h(-t[1])+","+h(t[2])+","+h(t[3])+","+h(t[4])+","+h(-t[5])+","+h(t[6])+","+h(t[7])+","+h(t[8])+","+h(-t[9])+","+h(t[10])+","+h(t[11])+","+h(t[12])+","+h(-t[13])+","+h(t[14])+","+h(t[15])+")"}function f(e,t){var i=e.elements,o="matrix3d("+h(i[0])+","+h(i[1])+","+h(i[2])+","+h(i[3])+","+h(-i[4])+","+h(-i[5])+","+h(-i[6])+","+h(-i[7])+","+h(i[8])+","+h(i[9])+","+h(i[10])+","+h(i[11])+","+h(i[12])+","+h(i[13])+","+h(i[14])+","+h(i[15])+")";return l?"translate(-50%,-50%)translate("+n+"px,"+r+"px)"+t+o:"translate(-50%,-50%)"+o}this.getSize=function(){return{width:e,height:t}},this.setSize=function(i,o){n=(e=i)/2,r=(t=o)/2,c.style.width=i+"px",c.style.height=o+"px",u.style.width=i+"px",u.style.height=o+"px"};var p=function(){var e=new s,t=new s;return function(n,r){return e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(r.matrixWorld),e.distanceToSquared(t)}}();function m(e){for(var t=function(e){var t=[];return e.traverse(function(e){e instanceof dh&&t.push(e)}),t}(e).sort(function(e,t){return o.objects.get(e).distanceToCameraSquared-o.objects.get(t).distanceToCameraSquared}),n=t.length,r=0,i=t.length;r<i;r++)t[r].element.style.zIndex=n-r}this.render=function(e,t){var a=t.projectionMatrix.elements[5]*r;o.camera.fov!==a&&(t.isPerspectiveCamera&&(c.style.WebkitPerspective=a+"px",c.style.perspective=a+"px"),o.camera.fov=a),e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld();var s=t.isOrthographicCamera?"scale("+a+")"+d(t.matrixWorldInverse):"translateZ("+a+"px)"+d(t.matrixWorldInverse),h=s+"translate("+n+"px,"+r+"px)";o.camera.style===h||l||(u.style.WebkitTransform=h,u.style.transform=h,o.camera.style=h),function e(t,n,r){if(t instanceof dh){var a;t instanceof fh?(i.copy(n.matrixWorldInverse),i.transpose(),i.copyPosition(t.matrixWorld),i.scale(t.scale),i.elements[3]=0,i.elements[7]=0,i.elements[11]=0,i.elements[15]=1,a=f(i,r)):a=f(t.matrixWorld,r);var s=t.element,c=o.objects.get(t);if(void 0===c||c!==a){s.style.WebkitTransform=a,s.style.transform=a;var h={style:a};l&&(h.distanceToCameraSquared=p(n,t)),o.objects.set(t,h)}s.parentNode!==u&&u.appendChild(s)}for(var d=0,m=t.children.length;d<m;d++)e(t.children[d],n,r)}(e,t,s),l&&m(e)}},t.RenderableObject=ih,t.RenderableFace=oh,t.RenderableVertex=ah,t.RenderableLine=sh,t.RenderableSprite=ch,t.Projector=uh,t.RaytracingRenderer=ph,t.SoftwareRenderer=mh,t.SVGObject=vh,t.SVGRenderer=function(){console.log("SVGRenderer",z);var e,t,n,r,i,o,c,u,l,h,f,p,m,g=this,y=new uh,b=document.createElementNS("http://www.w3.org/2000/svg","svg"),x=new Qu,w=new Qu,_=new v,S=new v,M=new v,T=new v,A=new v,E=new v,C=1,P=new s,L=new s,O=new s,N=new d,R=new a,I=new a,D=[],F=0,k=1,U=null;function B(){for(F=0;b.childNodes.length>0;)b.removeChild(b.childNodes[0])}function j(e,t){var n=Math.floor(255*e.r)+","+Math.floor(255*e.g)+","+Math.floor(255*e.b);return void 0===t||1===t?"rgb("+n+")":"rgb("+n+"); fill-opacity: "+t}function V(e){return null!==U?e.toFixed(U):e}function G(e,t,n){var r=t.scale.x*o,i=t.scale.y*c;n.isPointsMaterial&&(r*=n.size,i*=n.size);var a="M"+V(e.x-.5*r)+","+V(e.y-.5*i)+"h"+V(r)+"v"+V(i)+"h"+V(-r)+"z",s="";(n.isSpriteMaterial||n.isPointsMaterial)&&(s="fill:"+j(n.color,n.opacity)),X(s,a)}function W(e,t,n,r){var i="M"+V(e.positionScreen.x)+","+V(e.positionScreen.y)+"L"+V(t.positionScreen.x)+","+V(t.positionScreen.y);if(r.isLineBasicMaterial){var o="fill:none;stroke:"+j(r.color,r.opacity)+";stroke-width:"+r.linewidth+";stroke-linecap:"+r.linecap;r.isLineDashedMaterial&&(o=o+";stroke-dasharray:"+r.dashSize+","+r.gapSize),X(o,i)}}function H(e,t,r,i,o){g.info.render.vertices+=3,g.info.render.faces++;var a="M"+V(e.positionScreen.x)+","+V(e.positionScreen.y)+"L"+V(t.positionScreen.x)+","+V(t.positionScreen.y)+"L"+V(r.positionScreen.x)+","+V(r.positionScreen.y)+"z";o.isMeshBasicMaterial?(_.copy(o.color),o.vertexColors===Z&&_.multiply(i.color)):o.isMeshLambertMaterial||o.isMeshPhongMaterial||o.isMeshStandardMaterial?(S.copy(o.color),o.vertexColors===Z&&S.multiply(i.color),_.copy(M),L.copy(e.positionWorld).add(t.positionWorld).add(r.positionWorld).divideScalar(3),function(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.color;if(a.isDirectionalLight){var c=P.setFromMatrixPosition(a.matrixWorld).normalize();if((u=n.dot(c))<=0)continue;u*=a.intensity,r.r+=s.r*u,r.g+=s.g*u,r.b+=s.b*u}else if(a.isPointLight){var u;if(c=P.setFromMatrixPosition(a.matrixWorld),(u=n.dot(P.subVectors(c,t).normalize()))<=0)continue;if(0==(u*=0==a.distance?1:1-Math.min(t.distanceTo(c)/a.distance,1)))continue;u*=a.intensity,r.r+=s.r*u,r.g+=s.g*u,r.b+=s.b*u}}}(n,L,i.normalModel,_),_.multiply(S).add(o.emissive)):o.isMeshNormalMaterial&&(O.copy(i.normalModel).applyMatrix3(N),_.setRGB(O.x,O.y,O.z).multiplyScalar(.5).addScalar(.5)),X(o.wireframe?"fill:none;stroke:"+j(_,o.opacity)+";stroke-width:"+o.wireframeLinewidth+";stroke-linecap:"+o.wireframeLinecap+";stroke-linejoin:"+o.wireframeLinejoin:"fill:"+j(_,o.opacity),a)}function X(e,t){m===e?p+=t:(q(),m=e,p=t)}function q(){p&&((f=function(e){return null==D[e]?(D[e]=document.createElementNS("http://www.w3.org/2000/svg","path"),0==k&&D[e].setAttribute("shape-rendering","crispEdges"),D[e]):D[e]}(F++)).setAttribute("d",p),f.setAttribute("style",m),b.appendChild(f)),p="",m=""}this.domElement=b,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.setQuality=function(e){switch(e){case"high":k=1;break;case"low":k=0}},this.setClearColor=function(e,t){E.set(e),C=void 0!==t?t:1},this.setPixelRatio=function(){},this.setSize=function(e,t){o=(r=e)/2,c=(i=t)/2,b.setAttribute("viewBox",-o+" "+-c+" "+r+" "+i),b.setAttribute("width",r),b.setAttribute("height",i),x.min.set(-o,-c),x.max.set(o,c)},this.setPrecision=function(e){U=e},this.clear=function(){B(),b.style.backgroundColor=j(E,C)},this.render=function(r,i){if(i instanceof Wn!=0){var a=r.background;a&&a.isColor?(B(),b.style.backgroundColor=j(a)):!0===this.autoClear&&this.clear(),g.info.render.vertices=0,g.info.render.faces=0,R.copy(i.matrixWorldInverse),I.multiplyMatrices(i.projectionMatrix,R),e=y.projectScene(r,i,this.sortObjects,this.sortElements),t=e.elements,n=e.lights,N.getNormalMatrix(i.matrixWorldInverse),function(e){M.setRGB(0,0,0),T.setRGB(0,0,0),A.setRGB(0,0,0);for(var t=0,n=e.length;t<n;t++){var r=e[t],i=r.color;r.isAmbientLight?(M.r+=i.r,M.g+=i.g,M.b+=i.b):r.isDirectionalLight?(T.r+=i.r,T.g+=i.g,T.b+=i.b):r.isPointLight&&(A.r+=i.r,A.g+=i.g,A.b+=i.b)}}(n),p="",m="";for(var s=0,d=t.length;s<d;s++){var f=t[s],v=f.material;if(void 0!==v&&0!==v.opacity)if(w.makeEmpty(),f instanceof ch)(u=f).x*=o,u.y*=-c,G(u,f,v);else if(f instanceof sh)u=f.v1,l=f.v2,u.positionScreen.x*=o,u.positionScreen.y*=-c,l.positionScreen.x*=o,l.positionScreen.y*=-c,w.setFromPoints([u.positionScreen,l.positionScreen]),!0===x.intersectsBox(w)&&W(u,l,0,v);else if(f instanceof oh){if(u=f.v1,l=f.v2,h=f.v3,u.positionScreen.z<-1||u.positionScreen.z>1)continue;if(l.positionScreen.z<-1||l.positionScreen.z>1)continue;if(h.positionScreen.z<-1||h.positionScreen.z>1)continue;u.positionScreen.x*=o,u.positionScreen.y*=-c,l.positionScreen.x*=o,l.positionScreen.y*=-c,h.positionScreen.x*=o,h.positionScreen.y*=-c,w.setFromPoints([u.positionScreen,l.positionScreen,h.positionScreen]),!0===x.intersectsBox(w)&&H(u,l,h,f,v)}}q(),r.traverseVisible(function(e){if(e instanceof vh){P.setFromMatrixPosition(e.matrixWorld),P.applyMatrix4(I);var t=P.x*o,n=-P.y*c,r=e.node;r.setAttribute("transform","translate("+t+","+n+")"),b.appendChild(r)}})}else console.error("SVGRenderer.render: camera is not an instance of Camera.")}},t.WebGLDeferredRenderer=function(e){e=e||{};var t,n,r,i,o,a,c,u,l,h,d,f,p,m,v,g,y,b,x,w,_,S=this,M=!1,T=!1,A=!1,E=!1,C=new qn({visible:!1}),P=new s,L={},O={},N={},R={},I={},D={},F={},k={},U={},z=60,j={},V={},G={};function W(e){var t=L[e.uuid],n=O[e.uuid];if(void 0===t&&((r=new Yn).userData.lights={},(t=Pe()).scene=r,L[e.uuid]=t),void 0===n){var r;(r=new Yn).userData.lights={};var o=function(){var e=Jd.emissiveLight,t=new qn({uniforms:Object.assign({},e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,blending:$,depthWrite:!1}),n=new fn(new tr(2,2),t);return n.onBeforeRender=function(e,t,n,r,o,a){o.uniforms.samplerColor.value=i.renderTarget2.texture},n}();r.userData.emissiveLight=o,r.add(o),(n=Pe()).scene=r,O[e.uuid]=n}t.used=!0,n.used=!0;var a=t.scene,s=n.scene;s.userData.emissiveLight.visible=!A,w=a,_=s}function H(e,t,n,r){var i=t[e.uuid];return void 0===i&&((i=Pe()).material=n(e),t[e.uuid]=i),i.used=!0,r(i.material,e),j[i.material.uuid]=e,i.material}function X(e,t,n){if(void 0!==e.material){if(Array.isArray(e.material))for(var r=0,i=e.material.length;r<i;r++)e.material[r]=t(e.material[r]);else e.material=t(e.material);e.onBeforeRender=n}}function q(e){if(void 0!==e.material)if(Array.isArray(e.material))for(var t=0,n=e.material.length;t<n;t++)e.material[t]=j[e.material[t].uuid];else e.material=j[e.material.uuid]}function J(e){X(e,Q,ee)}function Q(e){return H(e,A?R:N,Z,K)}function Z(e){var t=A?Jd.normalDepthShininess:Jd.normalDepth;return new qn({uniforms:Object.assign({},t.uniforms),fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,blending:$})}function K(e,t){void 0!==t.skinning&&(e.skinning=t.skinning),void 0!==t.morphTargets&&(e.morphTargets=t.morphTargets),!0===t.visible?e.visible=!t.transparent:e.visible=!1}function ee(e,t,n,r,i,o){if(A){var a=j[i.uuid];void 0!==a&&void 0!==a.shininess&&(i.uniforms.shininess.value=a.shininess)}}function ne(e){X(e,re,ae)}function re(e){return H(e,I,ie,oe)}function ie(e){var t=Jd.color,n=new qn({uniforms:Object.assign({},t.uniforms),fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,blending:$});return void 0!==e.map&&(n.map=e.map),n}function oe(e,t){void 0!==t.map&&(e.map=t.map),void 0!==t.skinning&&(e.skinning=t.skinning),void 0!==t.morphTargets&&(e.morphTargets=t.morphTargets),!0===t.visible?e.visible=!t.transparent:e.visible=!1}function ae(e,t,n,r,i,o){var a,s,c=j[i.uuid],u=i.uniforms;!0===c.isMeshBasicMaterial?s=c.color:(a=c.color,s=c.emissive);var l=c.specular,h=c.shininess,d=c.map;void 0!==a&&u.diffuse.value.copy(a),void 0!==s&&u.emissive.value.copy(s),void 0!==l&&u.specular.value.copy(l),void 0!==h&&void 0!==u.shininess&&(u.shininess.value=h),void 0!==d&&(u.map.value=d)}function se(e){X(e,ce,he)}function ce(e){return!0===e.transparent?(j[e.uuid]=e,e):H(e,D,ue,le)}function ue(e){var t=Jd.reconstruction,n=new qn({uniforms:Object.assign({},t.uniforms),fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,blending:$});return void 0!==e.map&&(n.map=e.map),n}function le(e,t){oe(e,t)}function he(e,t,n,r,i,o){if(!0!==i.transparent)ae(0,0,0,0,i),i.uniforms.samplerLight.value=d.renderTarget2.texture;else{var a=V[this.uuid];a&&a.call(this,e,t,n,r,i,o)}}function de(e){if(void 0!==e.material)if(Array.isArray(e.material))for(var t=0,n=e.material.length;t<n;t++)void 0===G[e.material[t].uuid]&&(G[e.material[t].uuid]=e.material[t].visible,e.material[t].visible=e.material[t].transparent&&e.material[t].visible);else void 0===G[e.material.uuid]&&(G[e.material.uuid]=e.material.visible,e.material.visible=e.material.transparent&&e.material.visible)}function fe(e){if(void 0!==e.material)if(Array.isArray(e.material))for(var t=0,n=e.material.length;t<n;t++)e.material[t].visible=G[e.material[t].uuid];else e.material.visible=G[e.material.uuid]}function pe(e){return e.isPointLight?function(e){var t=ye(e,new B(1,16,8));return t.onBeforeRender=we,t}(e):e.isSpotLight?function(e){var t=ye(e,new tr(2,2));return t.onBeforeRender=_e,t}(e):e.isDirectionalLight?function(e){var t=ye(e,new tr(2,2));return t.onBeforeRender=Se,t}(e):null}function me(e){return e.isPointLight?function(){var e=be(A?Jd.pointLightPre:Jd.pointLight);return e.side=Y,e.depthFunc=Ae,e}():e.isSpotLight?function(){var e=be(A?Jd.spotLightPre:Jd.spotLight);return e.depthTest=!1,e}():e.isDirectionalLight?function(){var e=be(A?Jd.directionalLightPre:Jd.directionalLight);return e.depthTest=!1,e}():null}function ve(e){var t=A?U:k,n=t[e.uuid];return void 0===n&&((n=Pe()).material=me(e.userData.originalLight),t[e.uuid]=n),n.used=!0,n.material}function ge(e){e.userData.originalLight.isPointLight&&function(e){var t=e.userData.originalLight,n=t.distance;n>0&&(e.scale.set(1,1,1).multiplyScalar(n),e.position.setFromMatrixPosition(t.matrixWorld))}(e)}function ye(e,t){var n=new fn(t,C);return n.userData.originalLight=e,n}function be(e){var t=new qn({uniforms:Object.assign({},e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,transparent:!0,blending:te,depthWrite:!1});return A&&(t.premultipliedAlpha=!0),t}function xe(e){A?e.samplerNormalDepthShininess.value=h.renderTarget2.texture:(e.samplerNormalDepth.value=h.renderTarget2.texture,e.samplerColor.value=i.renderTarget2.texture)}function we(e,t,n,r,i,o){var a=this.userData.originalLight,s=a.distance,c=i.uniforms;c.lightColor.value.copy(a.color),s>0?(c.lightRadius.value=s,c.lightIntensity.value=a.intensity,c.lightPositionVS.value.setFromMatrixPosition(a.matrixWorld).applyMatrix4(x.matrixWorldInverse)):c.lightRadius.value=1/0,xe(c)}function _e(e,t,n,r,i,o){var a=this.userData.originalLight,s=this.material.uniforms;s.lightAngle.value=a.angle,s.lightColor.value.copy(a.color),s.lightIntensity.value=a.intensity,s.lightPositionVS.value.setFromMatrixPosition(a.matrixWorld).applyMatrix4(x.matrixWorldInverse);var c=s.lightDirectionVS.value,u=P;c.setFromMatrixPosition(a.matrixWorld),u.setFromMatrixPosition(a.target.matrixWorld),c.sub(u).normalize().transformDirection(x.matrixWorldInverse),xe(s)}function Se(e,t,n,r,i,o){var a=this.userData.originalLight,s=this.material.uniforms;s.lightColor.value.copy(a.color),s.lightIntensity.value=a.intensity;var c=s.lightDirectionVS.value,u=P;c.setFromMatrixPosition(a.matrixWorld),u.setFromMatrixPosition(a.target.matrixWorld),c.sub(u).normalize().transformDirection(x.matrixWorldInverse),xe(s)}function Me(e){if(void 0!==e.material&&(V[e.uuid]=e.onBeforeRender,!T&&!A&&e.visible))if(Array.isArray(e.material)){for(var t=0,n=e.material.length;t<n;t++)if(!0===e.material[t].visible&&!0===e.material[t].transparent){T=!0;break}}else!0===e.material.visible&&!0===e.material.transparent&&(T=!0)}function Te(e){void 0!==e.material&&(e.onBeforeRender=V[e.uuid])}function Ee(e){if(!0===e.isLight){var t=F[e.uuid];void 0===t&&((t=Pe()).light=pe(e),F[e.uuid]=t),t.used=!0;var n=t.light;if(null!==n){var r=!0===e.isPointLight?w:_,i=r.userData.lights;void 0===i[n.uuid]&&(r.add(n),i[n.uuid]={light:n,found:!0}),i[n.uuid].found=!0}}}function Ce(e){for(var t=e.userData.lights,n=Object.keys(t),r=0,i=n.length;r<i;r++){var o=n[r];if(!1===t[o].found)e.remove(t[o].light),delete t[o];else{var a=t[o].light;a.material=ve(a),ge(a),t[o].found=!1}}}function Pe(){return{used:!0,keepAlive:E,count:0}}function Le(e){for(var t=Object.keys(e),n=0,r=t.length;n<r;n++){var i=t[n];!1===e[i].used?(e[i].count++,!1===e[i].keepAlive&&e[i].count>z&&delete e[i]):(e[i].used=!1,e[i].count=0)}}function Oe(e){for(var t=Object.keys(e),n=0,r=t.length;n<r;n++)e[t[n]]=void 0}function Ne(e,t){!A&&T&&(e.traverse(de),e.traverse(Te),a.scene=e,a.camera=t),A?(a.renderToScreen=!1,a.enabled=!1,c.renderToScreen=!1,c.enabled=!1,M?(g.renderToScreen=!1,y.renderToScreen=!0,y.enabled=!0):(g.renderToScreen=!0,y.renderToScreen=!1,y.enabled=!1)):T?M?(g.renderToScreen=!1,a.renderToScreen=!1,a.enabled=!0,c.renderToScreen=!1,c.enabled=!1,y.renderToScreen=!0,y.enabled=!0):(g.renderToScreen=!1,a.renderToScreen=!1,a.enabled=!0,c.renderToScreen=!0,c.enabled=!0,y.renderToScreen=!1,y.enabled=!1):M?(g.renderToScreen=!1,a.renderToScreen=!1,a.enabled=!1,c.renderToScreen=!1,c.enabled=!1,y.renderToScreen=!0,y.enabled=!0):(g.renderToScreen=!0,a.renderToScreen=!1,a.enabled=!1,c.renderToScreen=!1,c.enabled=!1,y.renderToScreen=!1,y.enabled=!1),S.renderer.autoClearDepth=!1,S.renderer.autoClearStencil=!1,f.render(),!A&&T&&e.traverse(fe)}this.renderer=void 0,this.domElement=void 0,this.forwardRendering=!1,this.setSize=function(e,t){n=e,r=t,this.renderer.setSize(n,r),h.setSize(n,r),i.setSize(n,r),d.setSize(n,r),u.setSize(n,r),f.setSize(n,r),b.image.width=n,b.image.height=r,b.needsUpdate=!0,y.uniforms.resolution.value.set(1/n,1/r)},this.setAntialias=function(e){M=e},this.enableLightPrePass=function(e){A=e,g.uniforms.samplerResult.value=A?u.renderTarget2.texture:d.renderTarget2.texture},this.render=function(e,a){if(this.forwardRendering)this.renderer.render(e,a);else{var s=e.autoUpdate,c=this.renderer.autoClearColor,f=this.renderer.autoClearDepth,g=this.renderer.autoClearStencil;x=a,W(e),e.autoUpdate=!1,e.updateMatrixWorld(),T=!1,e.traverse(Me),function(e){var t=Yd.commonUniforms;t.viewWidth.value=n,t.viewHeight.value=r,t.matProjInverse.value.getInverse(e.projectionMatrix)}(a),function(e,n){e.traverse(J),p.scene=e,p.camera=n,S.renderer.autoClearDepth=!0,S.renderer.autoClearStencil=!0,t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,4294967295),t.stencilOp(t.REPLACE,t.REPLACE,t.REPLACE),h.render(),e.traverse(q)}(e,a),A?(function(e,n){e.traverse(Ee),Ce(w),Ce(_),m.scene=w,m.camera=n,v.scene=_,S.renderer.autoClearDepth=!1,S.renderer.autoClearStencil=!1,t.stencilFunc(t.EQUAL,1,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),d.render()}(e,a),function(e,n){e.traverse(se),l.scene=e,l.camera=n,S.renderer.autoClearDepth=!1,S.renderer.autoClearStencil=!1,u.render(),t.disable(t.STENCIL_TEST),e.traverse(q)}(e,a)):(function(e,n){e.traverse(ne),o.scene=e,o.camera=n,S.renderer.autoClearDepth=!1,S.renderer.autoClearStencil=!1,t.stencilFunc(t.EQUAL,1,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),i.render(),e.traverse(q)}(e,a),function(e,n){e.traverse(Ee),Ce(w),Ce(_),m.scene=w,m.camera=n,v.scene=_,S.renderer.autoClearDepth=!1,S.renderer.autoClearStencil=!1,d.render(),t.disable(t.STENCIL_TEST)}(e,a)),Ne(e,a),e.traverse(Te),Le(L),Le(O),Le(N),Le(R),Le(I),Le(D),Le(k),Le(U),Le(F),Oe(j),Oe(V),Oe(G),e.autoUpdate=s,this.renderer.autoClearColor=c,this.renderer.autoClearDepth=f,this.renderer.autoClearStencil=g}},function(e){S.renderer=void 0!==e.renderer?e.renderer:new Wd,S.domElement=S.renderer.domElement,t=S.renderer.context,n=void 0!==e.width?e.width:S.renderer.getSize().width,r=void 0!==e.height?e.height:S.renderer.getSize().height;var s=void 0!==e.antialias&&e.antialias;void 0!==e.cacheKeepAlive&&(E=e.cacheKeepAlive),b=new jl(n,r,ht,void 0,void 0,void 0,void 0,void 0,void 0,bt),function(){(p=new zl).clear=!0;var e=new $n(n,r,{minFilter:Ye,magFilter:Ye,format:pt,type:at,stencilBuffer:!0,depthTexture:b});e.texture.generateMipamps=!1,(h=new Nl(S.renderer,e)).addPass(p)}(),function(){(o=new zl).clear=!0;var e=new $n(n,r,{minFilter:Ye,magFilter:Ye,format:pt,type:at,depthTexture:b});e.texture.generateMipamps=!1,(i=new Nl(S.renderer,e)).addPass(o)}(),function(){(v=new zl).clear=!0,v.camera=new Jn(-1,1,1,-1,0,1),(m=new zl).clear=!1;var e=new $n(n,r,{minFilter:Ye,magFilter:Ye,format:pt,type:at,depthTexture:b});e.texture.generateMipamps=!1,(d=new Nl(S.renderer,e)).addPass(v),d.addPass(m)}(),function(){(l=new zl).clear=!0;var e=new $n(n,r,{minFilter:Ye,magFilter:Ye,format:pt,type:at,depthTexture:b});e.texture.generateMipamps=!1,(u=new Nl(S.renderer,e)).addPass(l)}(),function(){(g=new zu(Jd.final)).clear=!0,g.uniforms.samplerResult.value=d.renderTarget2.texture,g.material.blending=$,g.material.depthWrite=!1,g.material.depthTest=!1,(a=new zl).clear=!1,c=new zu(gl),y=new zu(Xd);var e=new $n(n,r,{minFilter:Ye,magFilter:Ze,format:ft,type:et,depthTexture:b});e.texture.generateMipamps=!1,(f=new Nl(S.renderer,e)).addPass(g),f.addPass(a),f.addPass(c),f.addPass(y)}(),S.setSize(n,r),S.setAntialias(s),S.enableLightPrePass(!1)}(e)},t.RollerCoasterGeometry=Qd,t.RollerCoasterLiftersGeometry=Zd,t.RollerCoasterShadowGeometry=Kd,t.SkyGeometry=$d,t.TreesGeometry=ef,t.ShaderGodRays=tf,t.AfterimageShader=wl,t.BasicShader=nf,t.BleachBypassShader=rf,t.BlendShader=of,t.BokehShader=nr,t.BokehShader2=rr,t.BokehDepthShader=ir,t.BrightnessContrastShader=af,t.ColorCorrectionShader=sf,t.ColorifyShader=cf,t.ConvolutionShader=Sl,t.CopyShader=gl,t.DepthLimitedBlurShader=Gl,t.BlurShaderUtils=Wl,t.DigitalGlitch=Dl,t.DOFMipMapShader=uf,t.DotScreenShader=Cl,t.FilmShader=Rl,t.FocusShader=lf,t.FreiChenShader=hf,t.FresnelShader=df,t.FXAAShader=Xd,t.GammaCorrectionShader=ff,t.HalftoneShader=kl,t.HorizontalBlurShader=pf,t.HorizontalTiltShiftShader=mf,t.HueSaturationShader=vf,t.KaleidoShader=gf,t.LuminosityHighPassShader=th,t.LuminosityShader=yl,t.MirrorShader=yf,t.NormalMapShader=bf,t.ParallaxShader=xf,t.PixelShader=wf,t.RGBShiftShader=_f,t.SAOShader=Vl,t.SepiaShader=Sf,t.SMAAShader=Yl,t.SobelOperatorShader=Mf,t.SSAOShader=Zl,t.TechnicolorShader=Tf,t.ToneMapShader=bl,t.TriangleBlurShader=Af,t.UnpackDepthRGBAShader=Hl,t.VerticalBlurShader=Ef,t.VerticalTiltShiftShader=Cf,t.VignetteShader=Pf,t.WaterRefractionShader=Lf,t.ShaderSkin=Of,t.ShaderTerrain=Nf,t.ShaderToon=Rf,t.TranslucentShader=function(){this.uniforms=Xn.merge([Ci.common,Ci.lights,{color:{value:new v(16777215)},diffuse:{value:new v(16777215)},specular:{value:new v(16777215)},emissive:{value:new v(0)},opacity:{value:1},shininess:{value:1},thicknessMap:{value:null},thicknessColor:{value:new v(16777215)},thicknessDistortion:{value:.1},thicknessAmbient:{value:0},thicknessAttenuation:{value:.1},thicknessPower:{value:2},thicknessScale:{value:10}}]),this.fragmentShader=["#define USE_MAP","#define PHONG","#define TRANSLUCENT","#include <common>","#include <bsdfs>","#include <uv_pars_fragment>","#include <map_pars_fragment>","#include <lights_phong_pars_fragment>","varying vec3 vColor;","uniform vec3 diffuse;","uniform vec3 specular;","uniform vec3 emissive;","uniform float opacity;","uniform float shininess;","uniform sampler2D thicknessMap;","uniform float thicknessPower;","uniform float thicknessScale;","uniform float thicknessDistortion;","uniform float thicknessAmbient;","uniform float thicknessAttenuation;","uniform vec3 thicknessColor;",Ei.lights_pars_begin,"void RE_Direct_Scattering(const in IncidentLight directLight, const in vec2 uv, const in GeometricContext geometry, inout ReflectedLight reflectedLight) {","\tvec3 thickness = thicknessColor * texture2D(thicknessMap, uv).r;","\tvec3 scatteringHalf = normalize(directLight.direction + (geometry.normal * thicknessDistortion));","\tfloat scatteringDot = pow(saturate(dot(geometry.viewDir, -scatteringHalf)), thicknessPower) * thicknessScale;","\tvec3 scatteringIllu = (scatteringDot + thicknessAmbient) * thickness;","\treflectedLight.directDiffuse += scatteringIllu * thicknessAttenuation * directLight.color;","}","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 viewerDirection = normalize( vViewPosition );","\tvec4 diffuseColor = vec4( diffuse, opacity );","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",Ei.map_fragment,Ei.color_fragment,Ei.specularmap_fragment,"\tvec3 totalEmissiveRadiance = emissive;",Ei.lights_phong_fragment,"\tGeometricContext geometry;","\tgeometry.position = - vViewPosition;","\tgeometry.normal = normal;","\tgeometry.viewDir = normalize( vViewPosition );","\tIncidentLight directLight;","\t#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )","\t\tPointLight pointLight;","\t\t#pragma unroll_loop","\t\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {","\t\t \tpointLight = pointLights[ i ];","\t\t \tgetPointDirectLightIrradiance( pointLight, geometry, directLight );","\t\t\t#ifdef USE_SHADOWMAP","\t\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;","\t\t\t#endif","\t\t\tRE_Direct( directLight, geometry, material, reflectedLight );","\t\t\t#if defined( TRANSLUCENT ) && defined( USE_MAP )","\t\t\tRE_Direct_Scattering(directLight, vUv, geometry, reflectedLight);","\t\t\t#endif","\t\t}","\t\t#endif","\t#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )","\t\tDirectionalLight directionalLight;","\t\t#pragma unroll_loop","\t\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {","\t\t\tdirectionalLight = directionalLights[ i ];","\t\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );","\t\t\t#ifdef USE_SHADOWMAP","\t\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;","\t\t\t#endif","\t\t\tRE_Direct( directLight, geometry, material, reflectedLight );","\t\t\t#if defined( TRANSLUCENT ) && defined( USE_MAP )","\t\t\tRE_Direct_Scattering(directLight, vUv, geometry, reflectedLight);","\t\t\t#endif","\t\t}","\t#endif","\t#if defined( RE_IndirectDiffuse )","\t\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );","\t\t#if ( NUM_HEMI_LIGHTS > 0 )","\t\t\t#pragma unroll_loop","\t\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {","\t\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );","\t\t\t}","\t\t#endif","\t#endif","\t#if defined( RE_IndirectSpecular )","\t\tvec3 radiance = vec3( 0.0 );","\t\tvec3 clearCoatRadiance = vec3( 0.0 );","\t#endif",Ei.lights_fragment_end,"\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;","\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );",Ei.encodings_fragment,"}"].join("\n"),this.vertexShader=["varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vViewPosition;",Ei.common,"void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","\tvViewPosition = -mvPosition.xyz;","\tvNormal = normalize( normalMatrix * normal );","\tvUv = uv;","\tgl_Position = projectionMatrix * mvPosition;","}"].join("\n")},t.SimplexNoise=If,t.TimelinerController=Df,t.TypedArrayUtils=Ff,t.UCSCharacter=function(){var e,t=this;this.scale=1,this.root=new p,this.numSkins=void 0,this.numMorphs=void 0,this.skins=[],this.materials=[],this.morphs=[],this.mixer=new Dn(this.root),this.onLoadComplete=function(){},this.loadCounter=0,this.loadParts=function(n){this.numSkins=n.skins.length,this.numMorphs=n.morphs.length,this.loadCounter=1+n.skins.length,this.skins=function(e,n){for(var r=new Ar,i=[],o=0;o<n.length;o++)i[o]=r.load(e+n[o],t.checkLoadComplete),i[o].mapping=ke,i[o].name=n[o];return i}(n.baseUrl+"skins/",n.skins),this.materials=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=new pr({color:15658734,specular:10,map:e[n],skinning:!0,morphTargets:!0});return t}(this.skins),this.morphs=n.morphs;var r=new Pr;console.log(n.baseUrl+n.character),r.load(n.baseUrl+n.character,function(r){r.computeBoundingBox(),r.computeVertexNormals(),(e=new lo(r,[])).name=n.character,t.root.add(e);var i=r.boundingBox;t.root.scale.set(n.s,n.s,n.s),t.root.position.set(n.x,n.y-i.min.y*n.s,n.z),e.castShadow=!0,e.receiveShadow=!0,t.mixer.clipAction(r.animations[0],e).play(),t.setSkin(0),t.checkLoadComplete()})},this.setSkin=function(n){e&&t.materials&&(e.material=t.materials[n])},this.updateMorphs=function(n){if(e)for(var r=0;r<t.numMorphs;r++)e.morphTargetInfluences[r]=n[t.morphs[r]]/100},this.checkLoadComplete=function(){t.loadCounter-=1,0===t.loadCounter&&t.onLoadComplete()}},t.BufferGeometryUtils=Vo,t.GeometryUtils=kf,t.MathUtils=Uf,t.SceneUtils=Bf,t.ShadowMapViewer=zf,t.SkeletonUtils=Vf,t.UVsDebug=function(e,t){var n="abc",r=new x,i=new x,o=[new x,new x,new x],a=[],s=document.createElement("canvas"),c=t||1024,u=t||1024;s.width=c,s.height=u;var l=s.getContext("2d");if(l.lineWidth=2,l.strokeStyle="rgba( 0, 0, 0, 1.0 )",l.textAlign="center",l.fillStyle="rgba( 255, 255, 255, 1.0 )",l.fillRect(0,0,c,u),e.isGeometry)for(var h=e.faces,d=e.faceVertexUvs[0],f=0,p=d.length;f<p;f++){a=h[f];var m=d[f];a[0]=a.a,a[1]=a.b,a[2]=a.c,o[0].copy(m[0]),o[1].copy(m[1]),o[2].copy(m[2]),y(a,o,f)}else{var v=e.index,g=e.attributes.uv;if(v)for(f=0,p=v.count;f<p;f+=3)a[0]=v.getX(f),a[1]=v.getX(f+1),a[2]=v.getX(f+2),o[0].fromBufferAttribute(g,a[0]),o[1].fromBufferAttribute(g,a[1]),o[2].fromBufferAttribute(g,a[2]),y(a,o,f);else for(f=0,p=g.count;f<p;f+=3)a[0]=f,a[1]=f+1,a[2]=f+2,o[0].fromBufferAttribute(g,a[0]),o[1].fromBufferAttribute(g,a[1]),o[2].fromBufferAttribute(g,a[2]),y(a,o,f)}return s;function y(e,t,o){l.beginPath(),r.set(0,0);for(var a=0,s=t.length;a<s;a++){var h=t[a];r.x+=h.x,r.y+=h.y,0===a?l.moveTo(h.x*c,(1-h.y)*u):l.lineTo(h.x*c,(1-h.y)*u)}for(l.closePath(),l.stroke(),r.divideScalar(t.length),l.font="12pt Arial bold",l.fillStyle="rgba( 0, 0, 0, 1.0 )",l.fillText(o,r.x*c,(1-r.y)*u),r.x>.95&&l.fillText(o,r.x%1*c,(1-r.y)*u),l.font="8pt Arial bold",l.fillStyle="rgba( 0, 0, 0, 1.0 )",a=0,s=t.length;a<s;a++){h=t[a],i.addVectors(r,h).divideScalar(2);var d=e[a];l.fillText(n[a]+d,i.x*c,(1-i.y)*u),i.x>.95&&l.fillText(n[a]+d,i.x%1*c,(1-i.y)*u)}}},t.VolumeSlice=Gf,t.DaydreamController=Wf,t.GearVRController=Hf,t.PaintViveController=ep,t.ViveController=Xf,t.WebVR=np,t.AnimationAction=vn,t.AnimationClip=Rn,t.AnimationMixer=Dn,t.AnimationObjectGroup=rp,t.AnimationUtils=_n,t.KeyframeTrack=Tn,t.PropertyBinding=xn,t.PropertyMixer=wn,t.BooleanKeyframeTrack=An,t.ColorKeyframeTrack=En,t.NumberKeyframeTrack=Cn,t.QuaternionKeyframeTrack=Ln,t.StringKeyframeTrack=On,t.VectorKeyframeTrack=Nn,t.Audio=ip,t.AudioAnalyser=op,t.AudioContext=ap,t.AudioListener=sp,t.PositionalAudio=cp,t.ArrayCamera=jd,t.Camera=Wn,t.CubeCamera=up,t.OrthographicCamera=Jn,t.PerspectiveCamera=Hn,t.StereoCamera=Ai,t.REVISION=z,t.MOUSE=j,t.CullFaceNone=V,t.CullFaceBack=G,t.CullFaceFront=W,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=0,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=H,t.PCFSoftShadowMap=X,t.FrontSide=q,t.BackSide=Y,t.DoubleSide=J,t.FlatShading=1,t.SmoothShading=2,t.NoColors=Q,t.FaceColors=Z,t.VertexColors=K,t.NoBlending=$,t.NormalBlending=ee,t.AdditiveBlending=te,t.SubtractiveBlending=ne,t.MultiplyBlending=re,t.CustomBlending=ie,t.AddEquation=oe,t.SubtractEquation=ae,t.ReverseSubtractEquation=se,t.MinEquation=ce,t.MaxEquation=ue,t.ZeroFactor=le,t.OneFactor=he,t.SrcColorFactor=de,t.OneMinusSrcColorFactor=fe,t.SrcAlphaFactor=pe,t.OneMinusSrcAlphaFactor=me,t.DstAlphaFactor=ve,t.OneMinusDstAlphaFactor=ge,t.DstColorFactor=ye,t.OneMinusDstColorFactor=be,t.SrcAlphaSaturateFactor=xe,t.NeverDepth=we,t.AlwaysDepth=_e,t.LessDepth=Se,t.LessEqualDepth=Me,t.EqualDepth=Te,t.GreaterEqualDepth=Ae,t.GreaterDepth=Ee,t.NotEqualDepth=Ce,t.MultiplyOperation=Pe,t.MixOperation=Le,t.AddOperation=Oe,t.NoToneMapping=Ne,t.LinearToneMapping=Re,t.ReinhardToneMapping=Ie,t.Uncharted2ToneMapping=De,t.CineonToneMapping=Fe,t.UVMapping=ke,t.CubeReflectionMapping=Ue,t.CubeRefractionMapping=Be,t.EquirectangularReflectionMapping=ze,t.EquirectangularRefractionMapping=je,t.SphericalReflectionMapping=Ve,t.CubeUVReflectionMapping=Ge,t.CubeUVRefractionMapping=We,t.RepeatWrapping=He,t.ClampToEdgeWrapping=Xe,t.MirroredRepeatWrapping=qe,t.NearestFilter=Ye,t.NearestMipMapNearestFilter=Je,t.NearestMipMapLinearFilter=Qe,t.LinearFilter=Ze,t.LinearMipMapNearestFilter=Ke,t.LinearMipMapLinearFilter=$e,t.UnsignedByteType=et,t.ByteType=tt,t.ShortType=nt,t.UnsignedShortType=rt,t.IntType=it,t.UnsignedIntType=ot,t.FloatType=at,t.HalfFloatType=st,t.UnsignedShort4444Type=ct,t.UnsignedShort5551Type=ut,t.UnsignedShort565Type=lt,t.UnsignedInt248Type=ht,t.AlphaFormat=dt,t.RGBFormat=ft,t.RGBAFormat=pt,t.LuminanceFormat=mt,t.LuminanceAlphaFormat=vt,t.RGBEFormat=gt,t.DepthFormat=yt,t.DepthStencilFormat=bt,t.RGB_S3TC_DXT1_Format=xt,t.RGBA_S3TC_DXT1_Format=wt,t.RGBA_S3TC_DXT3_Format=_t,t.RGBA_S3TC_DXT5_Format=St,t.RGB_PVRTC_4BPPV1_Format=Mt,t.RGB_PVRTC_2BPPV1_Format=Tt,t.RGBA_PVRTC_4BPPV1_Format=At,t.RGBA_PVRTC_2BPPV1_Format=Et,t.RGB_ETC1_Format=Ct,t.RGBA_ASTC_4x4_Format=Pt,t.RGBA_ASTC_5x4_Format=Lt,t.RGBA_ASTC_5x5_Format=Ot,t.RGBA_ASTC_6x5_Format=Nt,t.RGBA_ASTC_6x6_Format=Rt,t.RGBA_ASTC_8x5_Format=It,t.RGBA_ASTC_8x6_Format=Dt,t.RGBA_ASTC_8x8_Format=Ft,t.RGBA_ASTC_10x5_Format=kt,t.RGBA_ASTC_10x6_Format=Ut,t.RGBA_ASTC_10x8_Format=Bt,t.RGBA_ASTC_10x10_Format=zt,t.RGBA_ASTC_12x10_Format=jt,t.RGBA_ASTC_12x12_Format=Vt,t.LoopOnce=2200,t.LoopRepeat=Gt,t.LoopPingPong=2202,t.InterpolateDiscrete=Wt,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=Ht,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=Xt,t.TriangleStripDrawMode=qt,t.TriangleFanDrawMode=Yt,t.LinearEncoding=Jt,t.sRGBEncoding=Qt,t.GammaEncoding=Zt,t.RGBEEncoding=Kt,t.LogLuvEncoding=3003,t.RGBM7Encoding=$t,t.RGBM16Encoding=en,t.RGBDEncoding=tn,t.BasicDepthPacking=nn,t.RGBADepthPacking=rn,t.TangentSpaceNormalMap=on,t.ObjectSpaceNormalMap=an,t.Float64BufferAttribute=R,t.Float32BufferAttribute=N,t.Uint32BufferAttribute=O,t.Int32BufferAttribute=L,t.Uint16BufferAttribute=P,t.Int16BufferAttribute=C,t.Uint8ClampedBufferAttribute=E,t.Uint8BufferAttribute=A,t.Int8BufferAttribute=T,t.BufferAttribute=M,t.BufferGeometry=k,t.Clock=ol,t.DirectGeometry=I,t.EventDispatcher=u,t.Face3=g,t.Geometry=_,t.InstancedBufferAttribute=lp,t.InstancedBufferGeometry=qi,t.InstancedInterleavedBuffer=Ji,t.InterleavedBuffer=Yi,t.InterleavedBufferAttribute=Qi,t.Layers=h,t.Object3D=p,t.Raycaster=Nr,t.Uniform=Hd,t.Curve=si,t.CurvePath=Qa,t.Font=hp,t.CatmullRom=Ba,t.QuadraticBezier=za,t.CubicBezier=ja,t.Path=Za,t.Shape=Ka,t.ShapePath=Ms,t.ArcCurve=Na,t.CatmullRomCurve3=Ua,t.CubicBezierCurve=Va,t.CubicBezierCurve3=Ga,t.EllipseCurve=Oa,t.LineCurve=Wa,t.LineCurve3=Ha,t.QuadraticBezierCurve=Xa,t.QuadraticBezierCurve3=qa,t.SplineCurve=Ya,t.Earcut=$a,t.ImageUtils=Qn,t.ImmediateRenderObject=pc,t.ShapeUtils=ws,t.BoxGeometry=kn,t.BoxBufferGeometry=Un,t.CircleGeometry=qf,t.CircleBufferGeometry=Yf,t.ConeGeometry=fp,t.ConeBufferGeometry=pp,t.CylinderGeometry=Bn,t.CylinderBufferGeometry=zn,t.DodecahedronGeometry=mp,t.DodecahedronBufferGeometry=vp,t.EdgesGeometry=gp,t.ExtrudeGeometry=yp,t.ExtrudeBufferGeometry=bp,t.IcosahedronGeometry=Jf,t.IcosahedronBufferGeometry=Qf,t.LatheGeometry=Mp,t.LatheBufferGeometry=Tp,t.OctahedronGeometry=Wr,t.OctahedronBufferGeometry=Hr,t.ParametricGeometry=Ap,t.ParametricBufferGeometry=Ep,t.PlaneGeometry=er,t.PlaneBufferGeometry=tr,t.PolyhedronGeometry=Vr,t.PolyhedronBufferGeometry=Gr,t.RingGeometry=Cp,t.RingBufferGeometry=Pp,t.ShapeGeometry=Zf,t.ShapeBufferGeometry=Kf,t.SphereGeometry=U,t.SphereBufferGeometry=B,t.TetrahedronGeometry=Lp,t.TetrahedronBufferGeometry=Op,t.TextGeometry=Np,t.TextBufferGeometry=Rp,t.TorusGeometry=Xr,t.TorusBufferGeometry=qr,t.TorusKnotGeometry=Ip,t.TorusKnotBufferGeometry=Dp,t.TubeGeometry=Fp,t.TubeBufferGeometry=kp,t.WireframeGeometry=Zi,t.ArrowHelper=Up,t.AxesHelper=Bp,t.Box3Helper=zp,t.BoxHelper=cl,t.CameraHelper=jp,t.DirectionalLightHelper=Vp,t.FaceNormalsHelper=Gp,t.GridHelper=Wp,t.HemisphereLightHelper=Hp,t.PlaneHelper=Xp,t.PointLightHelper=qp,t.PolarGridHelper=Yp,t.RectAreaLightHelper=Jp,t.SkeletonHelper=jf,t.SpotLightHelper=Qp,t.VertexNormalsHelper=Zp,t.AmbientLight=Ao,t.DirectionalLight=xo,t.DirectionalLightShadow=bo,t.HemisphereLight=So,t.Light=vo,t.LightShadow=go,t.PointLight=yo,t.RectAreaLight=Kp,t.SpotLight=_o,t.SpotLightShadow=wo,t.AnimationLoader=$p,t.AudioLoader=em,t.BufferGeometryLoader=tm,t.Cache=ar,t.CompressedTextureLoader=Oo,t.CubeTextureLoader=rm,t.DataTextureLoader=Uo,t.FileLoader=lr,t.FontLoader=im,t.ImageBitmapLoader=om,t.ImageLoader=Tr,t.JSONLoader=Pr,t.Loader=Er,t.LoaderUtils=Cr,t.DefaultLoadingManager=cr,t.LoadingManager=sr,t.MaterialLoader=Mr,t.ObjectLoader=lm,t.TextureLoader=Ar,t.LineBasicMaterial=ln,t.LineDashedMaterial=hr,t.Material=cn,t.MeshBasicMaterial=un,t.MeshDepthMaterial=dr,t.MeshDistanceMaterial=fr,t.MeshLambertMaterial=pr,t.MeshNormalMaterial=mr,t.MeshPhongMaterial=vr,t.MeshPhysicalMaterial=yr,t.MeshStandardMaterial=gr,t.MeshToonMaterial=br,t.PointsMaterial=xr,t.RawShaderMaterial=wr,t.ShaderMaterial=qn,t.ShadowMaterial=_r,t.SpriteMaterial=Sr,t.Box2=Qu,t.Box3=y,t.Color=v,t.Cylindrical=pm,t.Euler=l,t.Frustum=rh,t.Interpolant=gn,t.CubicInterpolant=Sn,t.DiscreteInterpolant=Mn,t.LinearInterpolant=yn,t.QuaternionLinearInterpolant=Pn,t.Line3=Zr,t._Math=o,t.Matrix3=d,t.Matrix4=a,t.Plane=Or,t.Quaternion=c,t.Ray=hn,t.Sphere=b,t.Spherical=Fr,t.Triangle=dn,t.Vector2=x,t.Vector3=s,t.Vector4=S,t.Bone=Fn,t.Group=oo,t.Line=pn,t.LineLoop=Ro,t.LineSegments=Eo,t.LOD=am,t.Mesh=fn,t.Points=Gi,t.Skeleton=uo,t.SkinnedMesh=lo,t.Sprite=wc,t.ShaderChunk=Ei,t.ShaderLib=Pi,t.UniformsLib=Ci,t.UniformsUtils=Xn,t.WebGLAnimation=gh,t.WebGLAttributes=yh,t.WebGLBackground=bh,t.WebGLBufferRenderer=xh,t.WebGLCapabilities=wh,t.WebGLClipping=_h,t.WebGLExtensions=Sh,t.WebGLGeometries=Mh,t.WebGLIndexedBufferRenderer=Th,t.WebGLInfo=Ah,t.WebGLLights=Id,t.WebGLMorphtargets=Ch,t.WebGLObjects=Ph,t.WebGLProgram=Ed,t.WebGLPrograms=Cd,t.WebGLProperties=Pd,t.WebGLRenderLists=Nd,t.WebGLRenderStates=Fd,t.WebGLShader=yd,t.WebGLShadowMap=kd,t.WebGLState=Ud,t.WebGLTextures=Bd,t.WebGLUniforms=gd,t.WebGLUtils=zd,t.WebGL2Renderer=function(e){console.log("WebGL2Renderer",z);var t,n=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,o=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,c=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default";try{var h={alpha:i,depth:o,stencil:a,antialias:s,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:l};if(n.addEventListener("webglcontextlost",function(e){e.preventDefault()},!1),n.addEventListener("webglcontextrestored",function(){}),null===(t=r||n.getContext("webgl2",h)))throw null!==n.getContext("webgl2")?new Error("Error creating WebGL2 context with your selected attributes."):new Error("Error creating WebGL2 context.")}catch(e){console.error("WebGL2Renderer: "+e.message)}var d=!0,f=!0,p=!0,m=new v(0),g=0,y=n.width,b=n.height,x=1,w=new S(0,0,y,b),_=new Sh(t),M=new Ud(t,_,function(){});function T(e,t,r){y=e,b=t,n.width=e*x,n.height=t*x,!1!==r&&(n.style.width=e+"px",n.style.height=t+"px"),function(e,t,n,r){M.viewport(w.set(e,t,n,r))}(0,0,e,t)}return{domElement:n,clear:function(e,n,r){var i=0;(void 0===e||e)&&(i|=t.COLOR_BUFFER_BIT),(void 0===n||n)&&(i|=t.DEPTH_BUFFER_BIT),(void 0===r||r)&&(i|=t.STENCIL_BUFFER_BIT),t.clear(i)},setPixelRatio:function(e){void 0!==e&&(x=e,T(w.z,w.w,!1))},setSize:T,render:function(e,t){if(void 0===t||!0===t.isCamera){var n=e.background;null===n?M.buffers.color.setClear(m.r,m.g,m.b,g,c):n&&n.isColor&&M.buffers.color.setClear(n.r,n.g,n.b,1,c),this.clear(d,f,p)}else console.error("WebGL2Renderer.render: camera is not an instance of Camera.")}}},t.WebGLRenderer=Wd,t.WebGLRenderTarget=$n,t.WebGLRenderTargetCube=Fo,t.WebVRManager=Vd,t.WebXRManager=Gd,t.Fog=sm,t.FogExp2=cm,t.Scene=Yn,t.CanvasTexture=xc,t.CompressedTexture=Lo,t.CubeTexture=Xo,t.DataTexture=Vi,t.DepthTexture=jl,t.Texture=Kn,t.VideoTexture=mm,t.arrayMin=function(e){if(0===e.length)return 1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]<t&&(t=e[n]);return t},t.arrayMax=D}).call(this,n("698d75b157f24ae829cc"),n("11d2d9cd5d1b52a535e7"),n("5e511fa944f88972e69c"))},"503a0df91bcab33c39b8":function(e,t,n){var r=n("88db22626e6c88b175cf");e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},"51a5b67212dfc6f7022a":function(e,t,n){var r=n("1139de1233fd67f45bd7"),i=n("cf8d6afd09746a2b5bc3"),o=n("1b01d0e59d3af79760a0").f,a=n("a9e0e4b5ca884ed0dd59").f,s=n("1582553a0f2276f66f2f"),c=n("f936413e306f54e59a2a"),u=r.RegExp,l=u,h=u.prototype,d=/a/g,f=/a/g,p=new u(d)!==d;if(n("5975c7ea3ecd56e534e3")&&(!p||n("7a7739dd8a198a2cfcb5")(function(){return f[n("621a65702ee1a566fd32")("match")]=!1,u(d)!=d||u(f)==f||"/a/i"!=u(d,"i")}))){u=function(e,t){var n=this instanceof u,r=s(e),o=void 0===t;return!n&&r&&e.constructor===u&&o?e:i(p?new l(r&&!o?e.source:e,t):l((r=e instanceof u)?e.source:e,r&&o?c.call(e):t),n?this:h,u)};for(var m=function(e){e in u||o(u,e,{configurable:!0,get:function(){return l[e]},set:function(t){l[e]=t}})},v=a(l),g=0;v.length>g;)m(v[g++]);h.constructor=u,u.prototype=h,n("88db22626e6c88b175cf")(r,"RegExp",u)}n("89a21af31babcdc56725")("RegExp")},"531aa4a3a0a8a597b4b4":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Object",{setPrototypeOf:n("0d694d86343010af9d4f").set})},"54f683fcda7806277002":function(e,t,n){e.exports=function(){"use strict";var e=Array.prototype.slice;function t(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function n(e){return a(e)?e:X(e)}function r(e){return s(e)?e:q(e)}function i(e){return c(e)?e:Y(e)}function o(e){return a(e)&&!u(e)?e:J(e)}function a(e){return!(!e||!e[h])}function s(e){return!(!e||!e[d])}function c(e){return!(!e||!e[f])}function u(e){return s(e)||c(e)}function l(e){return!(!e||!e[p])}t(r,n),t(i,n),t(o,n),n.isIterable=a,n.isKeyed=s,n.isIndexed=c,n.isAssociative=u,n.isOrdered=l,n.Keyed=r,n.Indexed=i,n.Set=o;var h="@@__IMMUTABLE_ITERABLE__@@",d="@@__IMMUTABLE_KEYED__@@",f="@@__IMMUTABLE_INDEXED__@@",p="@@__IMMUTABLE_ORDERED__@@",m=5,v=1<<m,g=v-1,y={},b={value:!1},x={value:!1};function w(e){return e.value=!1,e}function _(e){e&&(e.value=!0)}function S(){}function M(e,t){t=t||0;for(var n=Math.max(0,e.length-t),r=new Array(n),i=0;i<n;i++)r[i]=e[i+t];return r}function T(e){return void 0===e.size&&(e.size=e.__iterate(E)),e.size}function A(e,t){if("number"!=typeof t){var n=t>>>0;if(""+n!==t||4294967295===n)return NaN;t=n}return t<0?T(e)+t:t}function E(){return!0}function C(e,t,n){return(0===e||void 0!==n&&e<=-n)&&(void 0===t||void 0!==n&&t>=n)}function P(e,t){return O(e,t,0)}function L(e,t){return O(e,t,t)}function O(e,t,n){return void 0===e?n:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}var N=0,R=1,I=2,D="function"==typeof Symbol&&Symbol.iterator,F="@@iterator",k=D||F;function U(e){this.next=e}function B(e,t,n,r){var i=0===e?t:1===e?n:[t,n];return r?r.value=i:r={value:i,done:!1},r}function z(){return{value:void 0,done:!0}}function j(e){return!!W(e)}function V(e){return e&&"function"==typeof e.next}function G(e){var t=W(e);return t&&t.call(e)}function W(e){var t=e&&(D&&e[D]||e[F]);if("function"==typeof t)return t}function H(e){return e&&"number"==typeof e.length}function X(e){return null===e||void 0===e?oe():a(e)?e.toSeq():function(e){var t=ce(e)||"object"==typeof e&&new te(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}(e)}function q(e){return null===e||void 0===e?oe().toKeyedSeq():a(e)?s(e)?e.toSeq():e.fromEntrySeq():ae(e)}function Y(e){return null===e||void 0===e?oe():a(e)?s(e)?e.entrySeq():e.toIndexedSeq():se(e)}function J(e){return(null===e||void 0===e?oe():a(e)?s(e)?e.entrySeq():e:se(e)).toSetSeq()}U.prototype.toString=function(){return"[Iterator]"},U.KEYS=N,U.VALUES=R,U.ENTRIES=I,U.prototype.inspect=U.prototype.toSource=function(){return this.toString()},U.prototype[k]=function(){return this},t(X,n),X.of=function(){return X(arguments)},X.prototype.toSeq=function(){return this},X.prototype.toString=function(){return this.__toString("Seq {","}")},X.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},X.prototype.__iterate=function(e,t){return ue(this,e,t,!0)},X.prototype.__iterator=function(e,t){return le(this,e,t,!0)},t(q,X),q.prototype.toKeyedSeq=function(){return this},t(Y,X),Y.of=function(){return Y(arguments)},Y.prototype.toIndexedSeq=function(){return this},Y.prototype.toString=function(){return this.__toString("Seq [","]")},Y.prototype.__iterate=function(e,t){return ue(this,e,t,!1)},Y.prototype.__iterator=function(e,t){return le(this,e,t,!1)},t(J,X),J.of=function(){return J(arguments)},J.prototype.toSetSeq=function(){return this},X.isSeq=ie,X.Keyed=q,X.Set=J,X.Indexed=Y;var Q,Z,K,$="@@__IMMUTABLE_SEQ__@@";function ee(e){this._array=e,this.size=e.length}function te(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function ne(e){this._iterable=e,this.size=e.length||e.size}function re(e){this._iterator=e,this._iteratorCache=[]}function ie(e){return!(!e||!e[$])}function oe(){return Q||(Q=new ee([]))}function ae(e){var t=Array.isArray(e)?new ee(e).fromEntrySeq():V(e)?new re(e).fromEntrySeq():j(e)?new ne(e).fromEntrySeq():"object"==typeof e?new te(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function se(e){var t=ce(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function ce(e){return H(e)?new ee(e):V(e)?new re(e):j(e)?new ne(e):void 0}function ue(e,t,n,r){var i=e._cache;if(i){for(var o=i.length-1,a=0;a<=o;a++){var s=i[n?o-a:a];if(!1===t(s[1],r?s[0]:a,e))return a+1}return a}return e.__iterateUncached(t,n)}function le(e,t,n,r){var i=e._cache;if(i){var o=i.length-1,a=0;return new U(function(){var e=i[n?o-a:a];return a++>o?{value:void 0,done:!0}:B(t,r?e[0]:a-1,e[1])})}return e.__iteratorUncached(t,n)}function he(e,t){return t?function e(t,n,r,i){return Array.isArray(n)?t.call(i,r,Y(n).map(function(r,i){return e(t,r,i,n)})):fe(n)?t.call(i,r,q(n).map(function(r,i){return e(t,r,i,n)})):n}(t,e,"",{"":e}):de(e)}function de(e){return Array.isArray(e)?Y(e).map(de).toList():fe(e)?q(e).map(de).toMap():e}function fe(e){return e&&(e.constructor===Object||void 0===e.constructor)}function pe(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function me(e,t){if(e===t)return!0;if(!a(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||s(e)!==s(t)||c(e)!==c(t)||l(e)!==l(t))return!1;if(0===e.size&&0===t.size)return!0;var n=!u(e);if(l(e)){var r=e.entries();return t.every(function(e,t){var i=r.next().value;return i&&pe(i[1],e)&&(n||pe(i[0],t))})&&r.next().done}var i=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{i=!0;var o=e;e=t,t=o}var h=!0,d=t.__iterate(function(t,r){if(n?!e.has(t):i?!pe(t,e.get(r,y)):!pe(e.get(r,y),t))return h=!1,!1});return h&&e.size===d}function ve(e,t){if(!(this instanceof ve))return new ve(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(Z)return Z;Z=this}}function ge(e,t){if(!e)throw new Error(t)}function ye(e,t,n){if(!(this instanceof ye))return new ye(e,t,n);if(ge(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),n=void 0===n?1:Math.abs(n),t<e&&(n=-n),this._start=e,this._end=t,this._step=n,this.size=Math.max(0,Math.ceil((t-e)/n-1)+1),0===this.size){if(K)return K;K=this}}function be(){throw TypeError("Abstract")}function xe(){}function we(){}function _e(){}X.prototype[$]=!0,t(ee,Y),ee.prototype.get=function(e,t){return this.has(e)?this._array[A(this,e)]:t},ee.prototype.__iterate=function(e,t){for(var n=this._array,r=n.length-1,i=0;i<=r;i++)if(!1===e(n[t?r-i:i],i,this))return i+1;return i},ee.prototype.__iterator=function(e,t){var n=this._array,r=n.length-1,i=0;return new U(function(){return i>r?{value:void 0,done:!0}:B(e,i,n[t?r-i++:i++])})},t(te,q),te.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},te.prototype.has=function(e){return this._object.hasOwnProperty(e)},te.prototype.__iterate=function(e,t){for(var n=this._object,r=this._keys,i=r.length-1,o=0;o<=i;o++){var a=r[t?i-o:o];if(!1===e(n[a],a,this))return o+1}return o},te.prototype.__iterator=function(e,t){var n=this._object,r=this._keys,i=r.length-1,o=0;return new U(function(){var a=r[t?i-o:o];return o++>i?{value:void 0,done:!0}:B(e,a,n[a])})},te.prototype[p]=!0,t(ne,Y),ne.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var n=this._iterable,r=G(n),i=0;if(V(r))for(var o;!(o=r.next()).done&&!1!==e(o.value,i++,this););return i},ne.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterable,r=G(n);if(!V(r))return new U(z);var i=0;return new U(function(){var t=r.next();return t.done?t:B(e,i++,t.value)})},t(re,Y),re.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var n,r=this._iterator,i=this._iteratorCache,o=0;o<i.length;)if(!1===e(i[o],o++,this))return o;for(;!(n=r.next()).done;){var a=n.value;if(i[o]=a,!1===e(a,o++,this))break}return o},re.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var n=this._iterator,r=this._iteratorCache,i=0;return new U(function(){if(i>=r.length){var t=n.next();if(t.done)return t;r[i]=t.value}return B(e,i,r[i++])})},t(ve,Y),ve.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},ve.prototype.get=function(e,t){return this.has(e)?this._value:t},ve.prototype.includes=function(e){return pe(this._value,e)},ve.prototype.slice=function(e,t){var n=this.size;return C(e,t,n)?this:new ve(this._value,L(t,n)-P(e,n))},ve.prototype.reverse=function(){return this},ve.prototype.indexOf=function(e){return pe(this._value,e)?0:-1},ve.prototype.lastIndexOf=function(e){return pe(this._value,e)?this.size:-1},ve.prototype.__iterate=function(e,t){for(var n=0;n<this.size;n++)if(!1===e(this._value,n,this))return n+1;return n},ve.prototype.__iterator=function(e,t){var n=this,r=0;return new U(function(){return r<n.size?B(e,r++,n._value):{value:void 0,done:!0}})},ve.prototype.equals=function(e){return e instanceof ve?pe(this._value,e._value):me(e)},t(ye,Y),ye.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},ye.prototype.get=function(e,t){return this.has(e)?this._start+A(this,e)*this._step:t},ye.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},ye.prototype.slice=function(e,t){return C(e,t,this.size)?this:(e=P(e,this.size),(t=L(t,this.size))<=e?new ye(0,0):new ye(this.get(e,this._end),this.get(t,this._end),this._step))},ye.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var n=t/this._step;if(n>=0&&n<this.size)return n}return-1},ye.prototype.lastIndexOf=function(e){return this.indexOf(e)},ye.prototype.__iterate=function(e,t){for(var n=this.size-1,r=this._step,i=t?this._start+n*r:this._start,o=0;o<=n;o++){if(!1===e(i,o,this))return o+1;i+=t?-r:r}return o},ye.prototype.__iterator=function(e,t){var n=this.size-1,r=this._step,i=t?this._start+n*r:this._start,o=0;return new U(function(){var a=i;return i+=t?-r:r,o>n?{value:void 0,done:!0}:B(e,o++,a)})},ye.prototype.equals=function(e){return e instanceof ye?this._start===e._start&&this._end===e._end&&this._step===e._step:me(this,e)},t(be,n),t(xe,be),t(we,be),t(_e,be),be.Keyed=xe,be.Indexed=we,be.Set=_e;var Se="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){var n=65535&(e|=0),r=65535&(t|=0);return n*r+((e>>>16)*r+n*(t>>>16)<<16>>>0)|0};function Me(e){return e>>>1&1073741824|3221225471&e}function Te(e){if(!1===e||null===e||void 0===e)return 0;if("function"==typeof e.valueOf&&(!1===(e=e.valueOf())||null===e||void 0===e))return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){if(e!=e||e===1/0)return 0;var n=0|e;for(n!==e&&(n^=4294967295*e);e>4294967295;)n^=e/=4294967295;return Me(n)}if("string"===t)return e.length>Re?function(e){var t=Fe[e];return void 0===t&&(t=Ae(e),De===Ie&&(De=0,Fe={}),De++,Fe[e]=t),t}(e):Ae(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return function(e){var t;if(Le&&void 0!==(t=Ee.get(e)))return t;if(void 0!==(t=e[Ne]))return t;if(!Pe){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Ne]))return t;if(void 0!==(t=function(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}(e)))return t}if(t=++Oe,1073741824&Oe&&(Oe=0),Le)Ee.set(e,t);else{if(void 0!==Ce&&!1===Ce(e))throw new Error("Non-extensible objects are not allowed as keys.");if(Pe)Object.defineProperty(e,Ne,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Ne]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Ne]=t}}return t}(e);if("function"==typeof e.toString)return Ae(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function Ae(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)|0;return Me(t)}var Ee,Ce=Object.isExtensible,Pe=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),Le="function"==typeof WeakMap;Le&&(Ee=new WeakMap);var Oe=0,Ne="__immutablehash__";"function"==typeof Symbol&&(Ne=Symbol(Ne));var Re=16,Ie=255,De=0,Fe={};function ke(e){ge(e!==1/0,"Cannot perform this action with an infinite size.")}function Ue(e){return null===e||void 0===e?Ke():Be(e)&&!l(e)?e:Ke().withMutations(function(t){var n=r(e);ke(n.size),n.forEach(function(e,n){return t.set(n,e)})})}function Be(e){return!(!e||!e[je])}t(Ue,xe),Ue.of=function(){var t=e.call(arguments,0);return Ke().withMutations(function(e){for(var n=0;n<t.length;n+=2){if(n+1>=t.length)throw new Error("Missing value for key: "+t[n]);e.set(t[n],t[n+1])}})},Ue.prototype.toString=function(){return this.__toString("Map {","}")},Ue.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},Ue.prototype.set=function(e,t){return $e(this,e,t)},Ue.prototype.setIn=function(e,t){return this.updateIn(e,y,function(){return t})},Ue.prototype.remove=function(e){return $e(this,e,y)},Ue.prototype.deleteIn=function(e){return this.updateIn(e,function(){return y})},Ue.prototype.update=function(e,t,n){return 1===arguments.length?e(this):this.updateIn([e],t,n)},Ue.prototype.updateIn=function(e,t,n){n||(n=t,t=void 0);var r=function e(t,n,r,i){var o=t===y,a=n.next();if(a.done){var s=o?r:t,c=i(s);return c===s?t:c}ge(o||t&&t.set,"invalid keyPath");var u=a.value,l=o?y:t.get(u,y),h=e(l,n,r,i);return h===l?t:h===y?t.remove(u):(o?Ke():t).set(u,h)}(this,nn(e),t,n);return r===y?void 0:r},Ue.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ke()},Ue.prototype.merge=function(){return rt(this,void 0,arguments)},Ue.prototype.mergeWith=function(t){var n=e.call(arguments,1);return rt(this,t,n)},Ue.prototype.mergeIn=function(t){var n=e.call(arguments,1);return this.updateIn(t,Ke(),function(e){return"function"==typeof e.merge?e.merge.apply(e,n):n[n.length-1]})},Ue.prototype.mergeDeep=function(){return rt(this,it,arguments)},Ue.prototype.mergeDeepWith=function(t){var n=e.call(arguments,1);return rt(this,ot(t),n)},Ue.prototype.mergeDeepIn=function(t){var n=e.call(arguments,1);return this.updateIn(t,Ke(),function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,n):n[n.length-1]})},Ue.prototype.sort=function(e){return Pt(Ht(this,e))},Ue.prototype.sortBy=function(e,t){return Pt(Ht(this,t,e))},Ue.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},Ue.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new S)},Ue.prototype.asImmutable=function(){return this.__ensureOwner()},Ue.prototype.wasAltered=function(){return this.__altered},Ue.prototype.__iterator=function(e,t){return new Ye(this,e,t)},Ue.prototype.__iterate=function(e,t){var n=this,r=0;return this._root&&this._root.iterate(function(t){return r++,e(t[1],t[0],n)},t),r},Ue.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ze(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Ue.isMap=Be;var ze,je="@@__IMMUTABLE_MAP__@@",Ve=Ue.prototype;function Ge(e,t){this.ownerID=e,this.entries=t}function We(e,t,n){this.ownerID=e,this.bitmap=t,this.nodes=n}function He(e,t,n){this.ownerID=e,this.count=t,this.nodes=n}function Xe(e,t,n){this.ownerID=e,this.keyHash=t,this.entries=n}function qe(e,t,n){this.ownerID=e,this.keyHash=t,this.entry=n}function Ye(e,t,n){this._type=t,this._reverse=n,this._stack=e._root&&Qe(e._root)}function Je(e,t){return B(e,t[0],t[1])}function Qe(e,t){return{node:e,index:0,__prev:t}}function Ze(e,t,n,r){var i=Object.create(Ve);return i.size=e,i._root=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Ke(){return ze||(ze=Ze(0))}function $e(e,t,n){var r,i;if(e._root){var o=w(b),a=w(x);if(r=et(e._root,e.__ownerID,0,void 0,t,n,o,a),!a.value)return e;i=e.size+(o.value?n===y?-1:1:0)}else{if(n===y)return e;i=1,r=new Ge(e.__ownerID,[[t,n]])}return e.__ownerID?(e.size=i,e._root=r,e.__hash=void 0,e.__altered=!0,e):r?Ze(i,r):Ke()}function et(e,t,n,r,i,o,a,s){return e?e.update(t,n,r,i,o,a,s):o===y?e:(_(s),_(a),new qe(t,r,[i,o]))}function tt(e){return e.constructor===qe||e.constructor===Xe}function nt(e,t,n,r,i){if(e.keyHash===r)return new Xe(t,r,[e.entry,i]);var o,a=(0===n?e.keyHash:e.keyHash>>>n)&g,s=(0===n?r:r>>>n)&g,c=a===s?[nt(e,t,n+m,r,i)]:(o=new qe(t,r,i),a<s?[e,o]:[o,e]);return new We(t,1<<a|1<<s,c)}function rt(e,t,n){for(var i=[],o=0;o<n.length;o++){var s=n[o],c=r(s);a(s)||(c=c.map(function(e){return he(e)})),i.push(c)}return at(e,t,i)}function it(e,t,n){return e&&e.mergeDeep&&a(t)?e.mergeDeep(t):pe(e,t)?e:t}function ot(e){return function(t,n,r){if(t&&t.mergeDeepWith&&a(n))return t.mergeDeepWith(e,n);var i=e(t,n,r);return pe(t,i)?t:i}}function at(e,t,n){return 0===(n=n.filter(function(e){return 0!==e.size})).length?e:0!==e.size||e.__ownerID||1!==n.length?e.withMutations(function(e){for(var r=t?function(n,r){e.update(r,y,function(e){return e===y?n:t(e,n,r)})}:function(t,n){e.set(n,t)},i=0;i<n.length;i++)n[i].forEach(r)}):e.constructor(n[0])}function st(e){return e=(e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function ct(e,t,n,r){var i=r?e:M(e);return i[t]=n,i}Ve[je]=!0,Ve.delete=Ve.remove,Ve.removeIn=Ve.deleteIn,Ge.prototype.get=function(e,t,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(pe(n,i[o][0]))return i[o][1];return r},Ge.prototype.update=function(e,t,n,r,i,o,a){for(var s=i===y,c=this.entries,u=0,l=c.length;u<l&&!pe(r,c[u][0]);u++);var h=u<l;if(h?c[u][1]===i:s)return this;if(_(a),(s||!h)&&_(o),!s||1!==c.length){if(!h&&!s&&c.length>=ut)return function(e,t,n,r){e||(e=new S);for(var i=new qe(e,Te(n),[n,r]),o=0;o<t.length;o++){var a=t[o];i=i.update(e,0,void 0,a[0],a[1])}return i}(e,c,r,i);var d=e&&e===this.ownerID,f=d?c:M(c);return h?s?u===l-1?f.pop():f[u]=f.pop():f[u]=[r,i]:f.push([r,i]),d?(this.entries=f,this):new Ge(e,f)}},We.prototype.get=function(e,t,n,r){void 0===t&&(t=Te(n));var i=1<<((0===e?t:t>>>e)&g),o=this.bitmap;return 0==(o&i)?r:this.nodes[st(o&i-1)].get(e+m,t,n,r)},We.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=Te(r));var s=(0===t?n:n>>>t)&g,c=1<<s,u=this.bitmap,l=0!=(u&c);if(!l&&i===y)return this;var h=st(u&c-1),d=this.nodes,f=l?d[h]:void 0,p=et(f,e,t+m,n,r,i,o,a);if(p===f)return this;if(!l&&p&&d.length>=lt)return function(e,t,n,r,i){for(var o=0,a=new Array(v),s=0;0!==n;s++,n>>>=1)a[s]=1&n?t[o++]:void 0;return a[r]=i,new He(e,o+1,a)}(e,d,u,s,p);if(l&&!p&&2===d.length&&tt(d[1^h]))return d[1^h];if(l&&p&&1===d.length&&tt(p))return p;var b=e&&e===this.ownerID,x=l?p?u:u^c:u|c,w=l?p?ct(d,h,p,b):function(e,t,n){var r=e.length-1;if(n&&t===r)return e.pop(),e;for(var i=new Array(r),o=0,a=0;a<r;a++)a===t&&(o=1),i[a]=e[a+o];return i}(d,h,b):function(e,t,n,r){var i=e.length+1;if(r&&t+1===i)return e[t]=n,e;for(var o=new Array(i),a=0,s=0;s<i;s++)s===t?(o[s]=n,a=-1):o[s]=e[s+a];return o}(d,h,p,b);return b?(this.bitmap=x,this.nodes=w,this):new We(e,x,w)},He.prototype.get=function(e,t,n,r){void 0===t&&(t=Te(n));var i=(0===e?t:t>>>e)&g,o=this.nodes[i];return o?o.get(e+m,t,n,r):r},He.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=Te(r));var s=(0===t?n:n>>>t)&g,c=i===y,u=this.nodes,l=u[s];if(c&&!l)return this;var h=et(l,e,t+m,n,r,i,o,a);if(h===l)return this;var d=this.count;if(l){if(!h&&--d<ht)return function(e,t,n,r){for(var i=0,o=0,a=new Array(n),s=0,c=1,u=t.length;s<u;s++,c<<=1){var l=t[s];void 0!==l&&s!==r&&(i|=c,a[o++]=l)}return new We(e,i,a)}(e,u,d,s)}else d++;var f=e&&e===this.ownerID,p=ct(u,s,h,f);return f?(this.count=d,this.nodes=p,this):new He(e,d,p)},Xe.prototype.get=function(e,t,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(pe(n,i[o][0]))return i[o][1];return r},Xe.prototype.update=function(e,t,n,r,i,o,a){void 0===n&&(n=Te(r));var s=i===y;if(n!==this.keyHash)return s?this:(_(a),_(o),nt(this,e,t,n,[r,i]));for(var c=this.entries,u=0,l=c.length;u<l&&!pe(r,c[u][0]);u++);var h=u<l;if(h?c[u][1]===i:s)return this;if(_(a),(s||!h)&&_(o),s&&2===l)return new qe(e,this.keyHash,c[1^u]);var d=e&&e===this.ownerID,f=d?c:M(c);return h?s?u===l-1?f.pop():f[u]=f.pop():f[u]=[r,i]:f.push([r,i]),d?(this.entries=f,this):new Xe(e,this.keyHash,f)},qe.prototype.get=function(e,t,n,r){return pe(n,this.entry[0])?this.entry[1]:r},qe.prototype.update=function(e,t,n,r,i,o,a){var s=i===y,c=pe(r,this.entry[0]);return(c?i===this.entry[1]:s)?this:(_(a),s?void _(o):c?e&&e===this.ownerID?(this.entry[1]=i,this):new qe(e,this.keyHash,[r,i]):(_(o),nt(this,e,t,Te(r),[r,i])))},Ge.prototype.iterate=Xe.prototype.iterate=function(e,t){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===e(n[t?i-r:r]))return!1},We.prototype.iterate=He.prototype.iterate=function(e,t){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[t?i-r:r];if(o&&!1===o.iterate(e,t))return!1}},qe.prototype.iterate=function(e,t){return e(this.entry)},t(Ye,U),Ye.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var n,r=t.node,i=t.index++;if(r.entry){if(0===i)return Je(e,r.entry)}else if(r.entries){if(n=r.entries.length-1,i<=n)return Je(e,r.entries[this._reverse?n-i:i])}else if(n=r.nodes.length-1,i<=n){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return Je(e,o.entry);t=this._stack=Qe(o,t)}continue}t=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var ut=v/4,lt=v/2,ht=v/4;function dt(e){var t=_t();if(null===e||void 0===e)return t;if(ft(e))return e;var n=i(e),r=n.size;return 0===r?t:(ke(r),r>0&&r<v?wt(0,r,m,null,new vt(n.toArray())):t.withMutations(function(e){e.setSize(r),n.forEach(function(t,n){return e.set(n,t)})}))}function ft(e){return!(!e||!e[pt])}t(dt,we),dt.of=function(){return this(arguments)},dt.prototype.toString=function(){return this.__toString("List [","]")},dt.prototype.get=function(e,t){if((e=A(this,e))>=0&&e<this.size){var n=Tt(this,e+=this._origin);return n&&n.array[e&g]}return t},dt.prototype.set=function(e,t){return function(e,t,n){if((t=A(e,t))!=t)return e;if(t>=e.size||t<0)return e.withMutations(function(e){t<0?At(e,t).set(0,n):At(e,0,t+1).set(t,n)});t+=e._origin;var r=e._tail,i=e._root,o=w(x);return t>=Ct(e._capacity)?r=St(r,e.__ownerID,0,t,n,o):i=St(i,e.__ownerID,e._level,t,n,o),o.value?e.__ownerID?(e._root=i,e._tail=r,e.__hash=void 0,e.__altered=!0,e):wt(e._origin,e._capacity,e._level,i,r):e}(this,e,t)},dt.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},dt.prototype.insert=function(e,t){return this.splice(e,0,t)},dt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=m,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):_t()},dt.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(n){At(n,0,t+e.length);for(var r=0;r<e.length;r++)n.set(t+r,e[r])})},dt.prototype.pop=function(){return At(this,0,-1)},dt.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){At(t,-e.length);for(var n=0;n<e.length;n++)t.set(n,e[n])})},dt.prototype.shift=function(){return At(this,1)},dt.prototype.merge=function(){return Et(this,void 0,arguments)},dt.prototype.mergeWith=function(t){var n=e.call(arguments,1);return Et(this,t,n)},dt.prototype.mergeDeep=function(){return Et(this,it,arguments)},dt.prototype.mergeDeepWith=function(t){var n=e.call(arguments,1);return Et(this,ot(t),n)},dt.prototype.setSize=function(e){return At(this,0,e)},dt.prototype.slice=function(e,t){var n=this.size;return C(e,t,n)?this:At(this,P(e,n),L(t,n))},dt.prototype.__iterator=function(e,t){var n=0,r=xt(this,t);return new U(function(){var t=r();return t===bt?{value:void 0,done:!0}:B(e,n++,t)})},dt.prototype.__iterate=function(e,t){for(var n,r=0,i=xt(this,t);(n=i())!==bt&&!1!==e(n,r++,this););return r},dt.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?wt(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},dt.isList=ft;var pt="@@__IMMUTABLE_LIST__@@",mt=dt.prototype;function vt(e,t){this.array=e,this.ownerID=t}mt[pt]=!0,mt.delete=mt.remove,mt.setIn=Ve.setIn,mt.deleteIn=mt.removeIn=Ve.removeIn,mt.update=Ve.update,mt.updateIn=Ve.updateIn,mt.mergeIn=Ve.mergeIn,mt.mergeDeepIn=Ve.mergeDeepIn,mt.withMutations=Ve.withMutations,mt.asMutable=Ve.asMutable,mt.asImmutable=Ve.asImmutable,mt.wasAltered=Ve.wasAltered,vt.prototype.removeBefore=function(e,t,n){if(n===t?1<<t:0===this.array.length)return this;var r=n>>>t&g;if(r>=this.array.length)return new vt([],e);var i,o=0===r;if(t>0){var a=this.array[r];if((i=a&&a.removeBefore(e,t-m,n))===a&&o)return this}if(o&&!i)return this;var s=Mt(this,e);if(!o)for(var c=0;c<r;c++)s.array[c]=void 0;return i&&(s.array[r]=i),s},vt.prototype.removeAfter=function(e,t,n){if(n===(t?1<<t:0)||0===this.array.length)return this;var r,i=n-1>>>t&g;if(i>=this.array.length)return this;if(t>0){var o=this.array[i];if((r=o&&o.removeAfter(e,t-m,n))===o&&i===this.array.length-1)return this}var a=Mt(this,e);return a.array.splice(i+1),r&&(a.array[i]=r),a};var gt,yt,bt={};function xt(e,t){var n=e._origin,r=e._capacity,i=Ct(r),o=e._tail;return a(e._root,e._level,0);function a(e,s,c){return 0===s?function(e,a){var s=a===i?o&&o.array:e&&e.array,c=a>n?0:n-a,u=r-a;return u>v&&(u=v),function(){if(c===u)return bt;var e=t?--u:c++;return s&&s[e]}}(e,c):function(e,i,o){var s,c=e&&e.array,u=o>n?0:n-o>>i,l=1+(r-o>>i);return l>v&&(l=v),function(){for(;;){if(s){var e=s();if(e!==bt)return e;s=null}if(u===l)return bt;var n=t?--l:u++;s=a(c&&c[n],i-m,o+(n<<i))}}}(e,s,c)}}function wt(e,t,n,r,i,o,a){var s=Object.create(mt);return s.size=t-e,s._origin=e,s._capacity=t,s._level=n,s._root=r,s._tail=i,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function _t(){return gt||(gt=wt(0,0,m))}function St(e,t,n,r,i,o){var a,s=r>>>n&g,c=e&&s<e.array.length;if(!c&&void 0===i)return e;if(n>0){var u=e&&e.array[s],l=St(u,t,n-m,r,i,o);return l===u?e:((a=Mt(e,t)).array[s]=l,a)}return c&&e.array[s]===i?e:(_(o),a=Mt(e,t),void 0===i&&s===a.array.length-1?a.array.pop():a.array[s]=i,a)}function Mt(e,t){return t&&e&&t===e.ownerID?e:new vt(e?e.array.slice():[],t)}function Tt(e,t){if(t>=Ct(e._capacity))return e._tail;if(t<1<<e._level+m){for(var n=e._root,r=e._level;n&&r>0;)n=n.array[t>>>r&g],r-=m;return n}}function At(e,t,n){void 0!==t&&(t|=0),void 0!==n&&(n|=0);var r=e.__ownerID||new S,i=e._origin,o=e._capacity,a=i+t,s=void 0===n?o:n<0?o+n:i+n;if(a===i&&s===o)return e;if(a>=s)return e.clear();for(var c=e._level,u=e._root,l=0;a+l<0;)u=new vt(u&&u.array.length?[void 0,u]:[],r),l+=1<<(c+=m);l&&(a+=l,i+=l,s+=l,o+=l);for(var h=Ct(o),d=Ct(s);d>=1<<c+m;)u=new vt(u&&u.array.length?[u]:[],r),c+=m;var f=e._tail,p=d<h?Tt(e,s-1):d>h?new vt([],r):f;if(f&&d>h&&a<o&&f.array.length){for(var v=u=Mt(u,r),y=c;y>m;y-=m){var b=h>>>y&g;v=v.array[b]=Mt(v.array[b],r)}v.array[h>>>m&g]=f}if(s<o&&(p=p&&p.removeAfter(r,0,s)),a>=d)a-=d,s-=d,c=m,u=null,p=p&&p.removeBefore(r,0,a);else if(a>i||d<h){for(l=0;u;){var x=a>>>c&g;if(x!==d>>>c&g)break;x&&(l+=(1<<c)*x),c-=m,u=u.array[x]}u&&a>i&&(u=u.removeBefore(r,c,a-l)),u&&d<h&&(u=u.removeAfter(r,c,d-l)),l&&(a-=l,s-=l)}return e.__ownerID?(e.size=s-a,e._origin=a,e._capacity=s,e._level=c,e._root=u,e._tail=p,e.__hash=void 0,e.__altered=!0,e):wt(a,s,c,u,p)}function Et(e,t,n){for(var r=[],o=0,s=0;s<n.length;s++){var c=n[s],u=i(c);u.size>o&&(o=u.size),a(c)||(u=u.map(function(e){return he(e)})),r.push(u)}return o>e.size&&(e=e.setSize(o)),at(e,t,r)}function Ct(e){return e<v?0:e-1>>>m<<m}function Pt(e){return null===e||void 0===e?Nt():Lt(e)?e:Nt().withMutations(function(t){var n=r(e);ke(n.size),n.forEach(function(e,n){return t.set(n,e)})})}function Lt(e){return Be(e)&&l(e)}function Ot(e,t,n,r){var i=Object.create(Pt.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=n,i.__hash=r,i}function Nt(){return yt||(yt=Ot(Ke(),_t()))}function Rt(e,t,n){var r,i,o=e._map,a=e._list,s=o.get(t),c=void 0!==s;if(n===y){if(!c)return e;a.size>=v&&a.size>=2*o.size?(i=a.filter(function(e,t){return void 0!==e&&s!==t}),r=i.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(r.__ownerID=i.__ownerID=e.__ownerID)):(r=o.remove(t),i=s===a.size-1?a.pop():a.set(s,void 0))}else if(c){if(n===a.get(s)[1])return e;r=o,i=a.set(s,[t,n])}else r=o.set(t,a.size),i=a.set(a.size,[t,n]);return e.__ownerID?(e.size=r.size,e._map=r,e._list=i,e.__hash=void 0,e):Ot(r,i)}function It(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function Dt(e){this._iter=e,this.size=e.size}function Ft(e){this._iter=e,this.size=e.size}function kt(e){this._iter=e,this.size=e.size}function Ut(e){var t=$t(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=en,t.__iterateUncached=function(t,n){var r=this;return e.__iterate(function(e,n){return!1!==t(n,e,r)},n)},t.__iteratorUncached=function(t,n){if(t===I){var r=e.__iterator(t,n);return new U(function(){var e=r.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===R?N:R,n)},t}function Bt(e,t,n){var r=$t(e);return r.size=e.size,r.has=function(t){return e.has(t)},r.get=function(r,i){var o=e.get(r,y);return o===y?i:t.call(n,o,r,e)},r.__iterateUncached=function(r,i){var o=this;return e.__iterate(function(e,i,a){return!1!==r(t.call(n,e,i,a),i,o)},i)},r.__iteratorUncached=function(r,i){var o=e.__iterator(I,i);return new U(function(){var i=o.next();if(i.done)return i;var a=i.value,s=a[0];return B(r,s,t.call(n,a[1],s,e),i)})},r}function zt(e,t){var n=$t(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=Ut(e);return t.reverse=function(){return e.flip()},t}),n.get=function(n,r){return e.get(t?n:-1-n,r)},n.has=function(n){return e.has(t?n:-1-n)},n.includes=function(t){return e.includes(t)},n.cacheResult=en,n.__iterate=function(t,n){var r=this;return e.__iterate(function(e,n){return t(e,n,r)},!n)},n.__iterator=function(t,n){return e.__iterator(t,!n)},n}function jt(e,t,n,r){var i=$t(e);return r&&(i.has=function(r){var i=e.get(r,y);return i!==y&&!!t.call(n,i,r,e)},i.get=function(r,i){var o=e.get(r,y);return o!==y&&t.call(n,o,r,e)?o:i}),i.__iterateUncached=function(i,o){var a=this,s=0;return e.__iterate(function(e,o,c){if(t.call(n,e,o,c))return s++,i(e,r?o:s-1,a)},o),s},i.__iteratorUncached=function(i,o){var a=e.__iterator(I,o),s=0;return new U(function(){for(;;){var o=a.next();if(o.done)return o;var c=o.value,u=c[0],l=c[1];if(t.call(n,l,u,e))return B(i,r?u:s++,l,o)}})},i}function Vt(e,t,n,r){var i=e.size;if(void 0!==t&&(t|=0),void 0!==n&&(n===1/0?n=i:n|=0),C(t,n,i))return e;var o=P(t,i),a=L(n,i);if(o!=o||a!=a)return Vt(e.toSeq().cacheResult(),t,n,r);var s,c=a-o;c==c&&(s=c<0?0:c);var u=$t(e);return u.size=0===s?s:e.size&&s||void 0,!r&&ie(e)&&s>=0&&(u.get=function(t,n){return(t=A(this,t))>=0&&t<s?e.get(t+o,n):n}),u.__iterateUncached=function(t,n){var i=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(t,n);var a=0,c=!0,u=0;return e.__iterate(function(e,n){if(!c||!(c=a++<o))return u++,!1!==t(e,r?n:u-1,i)&&u!==s}),u},u.__iteratorUncached=function(t,n){if(0!==s&&n)return this.cacheResult().__iterator(t,n);var i=0!==s&&e.__iterator(t,n),a=0,c=0;return new U(function(){for(;a++<o;)i.next();if(++c>s)return{value:void 0,done:!0};var e=i.next();return r||t===R?e:B(t,c-1,t===N?void 0:e.value[1],e)})},u}function Gt(e,t,n,r){var i=$t(e);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,c=0;return e.__iterate(function(e,o,u){if(!s||!(s=t.call(n,e,o,u)))return c++,i(e,r?o:c-1,a)}),c},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var s=e.__iterator(I,o),c=!0,u=0;return new U(function(){var e,o,l;do{if((e=s.next()).done)return r||i===R?e:B(i,u++,i===N?void 0:e.value[1],e);var h=e.value;o=h[0],l=h[1],c&&(c=t.call(n,l,o,a))}while(c);return i===I?e:B(i,o,l,e)})},i}function Wt(e,t,n){var r=$t(e);return r.__iterateUncached=function(r,i){var o=0,s=!1;return function e(c,u){var l=this;c.__iterate(function(i,c){return(!t||u<t)&&a(i)?e(i,u+1):!1===r(i,n?c:o++,l)&&(s=!0),!s},i)}(e,0),o},r.__iteratorUncached=function(r,i){var o=e.__iterator(r,i),s=[],c=0;return new U(function(){for(;o;){var e=o.next();if(!1===e.done){var u=e.value;if(r===I&&(u=u[1]),t&&!(s.length<t)||!a(u))return n?e:B(r,c++,u,e);s.push(o),o=u.__iterator(r,i)}else o=s.pop()}return{value:void 0,done:!0}})},r}function Ht(e,t,n){t||(t=tn);var r=s(e),i=0,o=e.toSeq().map(function(t,r){return[r,t,i++,n?n(t,r,e):t]}).toArray();return o.sort(function(e,n){return t(e[3],n[3])||e[2]-n[2]}).forEach(r?function(e,t){o[t].length=2}:function(e,t){o[t]=e[1]}),r?q(o):c(e)?Y(o):J(o)}function Xt(e,t,n){if(t||(t=tn),n){var r=e.toSeq().map(function(t,r){return[t,n(t,r,e)]}).reduce(function(e,n){return qt(t,e[1],n[1])?n:e});return r&&r[0]}return e.reduce(function(e,n){return qt(t,e,n)?n:e})}function qt(e,t,n){var r=e(n,t);return 0===r&&n!==t&&(void 0===n||null===n||n!=n)||r>0}function Yt(e,t,r){var i=$t(e);return i.size=new ee(r).map(function(e){return e.size}).min(),i.__iterate=function(e,t){for(var n,r=this.__iterator(R,t),i=0;!(n=r.next()).done&&!1!==e(n.value,i++,this););return i},i.__iteratorUncached=function(e,i){var o=r.map(function(e){return e=n(e),G(i?e.reverse():e)}),a=0,s=!1;return new U(function(){var n;return s||(n=o.map(function(e){return e.next()}),s=n.some(function(e){return e.done})),s?{value:void 0,done:!0}:B(e,a++,t.apply(null,n.map(function(e){return e.value})))})},i}function Jt(e,t){return ie(e)?t:e.constructor(t)}function Qt(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Zt(e){return ke(e.size),T(e)}function Kt(e){return s(e)?r:c(e)?i:o}function $t(e){return Object.create((s(e)?q:c(e)?Y:J).prototype)}function en(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):X.prototype.cacheResult.call(this)}function tn(e,t){return e>t?1:e<t?-1:0}function nn(e){var t=G(e);if(!t){if(!H(e))throw new TypeError("Expected iterable or array-like: "+e);t=G(n(e))}return t}function rn(e,t){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var a=Object.keys(e);!function(e,t){try{t.forEach(function(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){ge(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}.bind(void 0,e))}catch(e){}}(i,a),i.size=a.length,i._name=t,i._keys=a,i._defaultValues=e}this._map=Ue(o)},i=r.prototype=Object.create(on);return i.constructor=r,r}t(Pt,Ue),Pt.of=function(){return this(arguments)},Pt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Pt.prototype.get=function(e,t){var n=this._map.get(e);return void 0!==n?this._list.get(n)[1]:t},Pt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Nt()},Pt.prototype.set=function(e,t){return Rt(this,e,t)},Pt.prototype.remove=function(e){return Rt(this,e,y)},Pt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Pt.prototype.__iterate=function(e,t){var n=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],n)},t)},Pt.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},Pt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),n=this._list.__ensureOwner(e);return e?Ot(t,n,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=n,this)},Pt.isOrderedMap=Lt,Pt.prototype[p]=!0,Pt.prototype.delete=Pt.prototype.remove,t(It,q),It.prototype.get=function(e,t){return this._iter.get(e,t)},It.prototype.has=function(e){return this._iter.has(e)},It.prototype.valueSeq=function(){return this._iter.valueSeq()},It.prototype.reverse=function(){var e=this,t=zt(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},It.prototype.map=function(e,t){var n=this,r=Bt(this,e,t);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(e,t)}),r},It.prototype.__iterate=function(e,t){var n,r=this;return this._iter.__iterate(this._useKeys?function(t,n){return e(t,n,r)}:(n=t?Zt(this):0,function(i){return e(i,t?--n:n++,r)}),t)},It.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var n=this._iter.__iterator(R,t),r=t?Zt(this):0;return new U(function(){var i=n.next();return i.done?i:B(e,t?--r:r++,i.value,i)})},It.prototype[p]=!0,t(Dt,Y),Dt.prototype.includes=function(e){return this._iter.includes(e)},Dt.prototype.__iterate=function(e,t){var n=this,r=0;return this._iter.__iterate(function(t){return e(t,r++,n)},t)},Dt.prototype.__iterator=function(e,t){var n=this._iter.__iterator(R,t),r=0;return new U(function(){var t=n.next();return t.done?t:B(e,r++,t.value,t)})},t(Ft,J),Ft.prototype.has=function(e){return this._iter.includes(e)},Ft.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){return e(t,t,n)},t)},Ft.prototype.__iterator=function(e,t){var n=this._iter.__iterator(R,t);return new U(function(){var t=n.next();return t.done?t:B(e,t.value,t.value,t)})},t(kt,q),kt.prototype.entrySeq=function(){return this._iter.toSeq()},kt.prototype.__iterate=function(e,t){var n=this;return this._iter.__iterate(function(t){if(t){Qt(t);var r=a(t);return e(r?t.get(1):t[1],r?t.get(0):t[0],n)}},t)},kt.prototype.__iterator=function(e,t){var n=this._iter.__iterator(R,t);return new U(function(){for(;;){var t=n.next();if(t.done)return t;var r=t.value;if(r){Qt(r);var i=a(r);return B(e,i?r.get(0):r[0],i?r.get(1):r[1],t)}}})},Dt.prototype.cacheResult=It.prototype.cacheResult=Ft.prototype.cacheResult=kt.prototype.cacheResult=en,t(rn,xe),rn.prototype.toString=function(){return this.__toString(sn(this)+" {","}")},rn.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},rn.prototype.get=function(e,t){if(!this.has(e))return t;var n=this._defaultValues[e];return this._map?this._map.get(e,n):n},rn.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=an(this,Ke()))},rn.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+sn(this));if(this._map&&!this._map.has(e)){var n=this._defaultValues[e];if(t===n)return this}var r=this._map&&this._map.set(e,t);return this.__ownerID||r===this._map?this:an(this,r)},rn.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:an(this,t)},rn.prototype.wasAltered=function(){return this._map.wasAltered()},rn.prototype.__iterator=function(e,t){var n=this;return r(this._defaultValues).map(function(e,t){return n.get(t)}).__iterator(e,t)},rn.prototype.__iterate=function(e,t){var n=this;return r(this._defaultValues).map(function(e,t){return n.get(t)}).__iterate(e,t)},rn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?an(this,t,e):(this.__ownerID=e,this._map=t,this)};var on=rn.prototype;function an(e,t,n){var r=Object.create(Object.getPrototypeOf(e));return r._map=t,r.__ownerID=n,r}function sn(e){return e._name||e.constructor.name||"Record"}function cn(e){return null===e||void 0===e?mn():un(e)&&!l(e)?e:mn().withMutations(function(t){var n=o(e);ke(n.size),n.forEach(function(e){return t.add(e)})})}function un(e){return!(!e||!e[hn])}on.delete=on.remove,on.deleteIn=on.removeIn=Ve.removeIn,on.merge=Ve.merge,on.mergeWith=Ve.mergeWith,on.mergeIn=Ve.mergeIn,on.mergeDeep=Ve.mergeDeep,on.mergeDeepWith=Ve.mergeDeepWith,on.mergeDeepIn=Ve.mergeDeepIn,on.setIn=Ve.setIn,on.update=Ve.update,on.updateIn=Ve.updateIn,on.withMutations=Ve.withMutations,on.asMutable=Ve.asMutable,on.asImmutable=Ve.asImmutable,t(cn,_e),cn.of=function(){return this(arguments)},cn.fromKeys=function(e){return this(r(e).keySeq())},cn.prototype.toString=function(){return this.__toString("Set {","}")},cn.prototype.has=function(e){return this._map.has(e)},cn.prototype.add=function(e){return fn(this,this._map.set(e,!0))},cn.prototype.remove=function(e){return fn(this,this._map.remove(e))},cn.prototype.clear=function(){return fn(this,this._map.clear())},cn.prototype.union=function(){var t=e.call(arguments,0);return 0===(t=t.filter(function(e){return 0!==e.size})).length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var n=0;n<t.length;n++)o(t[n]).forEach(function(t){return e.add(t)})}):this.constructor(t[0])},cn.prototype.intersect=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map(function(e){return o(e)});var n=this;return this.withMutations(function(e){n.forEach(function(n){t.every(function(e){return e.includes(n)})||e.remove(n)})})},cn.prototype.subtract=function(){var t=e.call(arguments,0);if(0===t.length)return this;t=t.map(function(e){return o(e)});var n=this;return this.withMutations(function(e){n.forEach(function(n){t.some(function(e){return e.includes(n)})&&e.remove(n)})})},cn.prototype.merge=function(){return this.union.apply(this,arguments)},cn.prototype.mergeWith=function(t){var n=e.call(arguments,1);return this.union.apply(this,n)},cn.prototype.sort=function(e){return vn(Ht(this,e))},cn.prototype.sortBy=function(e,t){return vn(Ht(this,t,e))},cn.prototype.wasAltered=function(){return this._map.wasAltered()},cn.prototype.__iterate=function(e,t){var n=this;return this._map.__iterate(function(t,r){return e(r,r,n)},t)},cn.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},cn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},cn.isSet=un;var ln,hn="@@__IMMUTABLE_SET__@@",dn=cn.prototype;function fn(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function pn(e,t){var n=Object.create(dn);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function mn(){return ln||(ln=pn(Ke()))}function vn(e){return null===e||void 0===e?wn():gn(e)?e:wn().withMutations(function(t){var n=o(e);ke(n.size),n.forEach(function(e){return t.add(e)})})}function gn(e){return un(e)&&l(e)}dn[hn]=!0,dn.delete=dn.remove,dn.mergeDeep=dn.merge,dn.mergeDeepWith=dn.mergeWith,dn.withMutations=Ve.withMutations,dn.asMutable=Ve.asMutable,dn.asImmutable=Ve.asImmutable,dn.__empty=mn,dn.__make=pn,t(vn,cn),vn.of=function(){return this(arguments)},vn.fromKeys=function(e){return this(r(e).keySeq())},vn.prototype.toString=function(){return this.__toString("OrderedSet {","}")},vn.isOrderedSet=gn;var yn,bn=vn.prototype;function xn(e,t){var n=Object.create(bn);return n.size=e?e.size:0,n._map=e,n.__ownerID=t,n}function wn(){return yn||(yn=xn(Nt()))}function _n(e){return null===e||void 0===e?Cn():Sn(e)?e:Cn().unshiftAll(e)}function Sn(e){return!(!e||!e[Tn])}bn[p]=!0,bn.__empty=wn,bn.__make=xn,t(_n,we),_n.of=function(){return this(arguments)},_n.prototype.toString=function(){return this.__toString("Stack [","]")},_n.prototype.get=function(e,t){var n=this._head;for(e=A(this,e);n&&e--;)n=n.next;return n?n.value:t},_n.prototype.peek=function(){return this._head&&this._head.value},_n.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,n=arguments.length-1;n>=0;n--)t={value:arguments[n],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):En(e,t)},_n.prototype.pushAll=function(e){if(0===(e=i(e)).size)return this;ke(e.size);var t=this.size,n=this._head;return e.reverse().forEach(function(e){t++,n={value:e,next:n}}),this.__ownerID?(this.size=t,this._head=n,this.__hash=void 0,this.__altered=!0,this):En(t,n)},_n.prototype.pop=function(){return this.slice(1)},_n.prototype.unshift=function(){return this.push.apply(this,arguments)},_n.prototype.unshiftAll=function(e){return this.pushAll(e)},_n.prototype.shift=function(){return this.pop.apply(this,arguments)},_n.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Cn()},_n.prototype.slice=function(e,t){if(C(e,t,this.size))return this;var n=P(e,this.size),r=L(t,this.size);if(r!==this.size)return we.prototype.slice.call(this,e,t);for(var i=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):En(i,o)},_n.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?En(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},_n.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var n=0,r=this._head;r&&!1!==e(r.value,n++,this);)r=r.next;return n},_n.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var n=0,r=this._head;return new U(function(){if(r){var t=r.value;return r=r.next,B(e,n++,t)}return{value:void 0,done:!0}})},_n.isStack=Sn;var Mn,Tn="@@__IMMUTABLE_STACK__@@",An=_n.prototype;function En(e,t,n,r){var i=Object.create(An);return i.size=e,i._head=t,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Cn(){return Mn||(Mn=En(0))}function Pn(e,t){var n=function(n){e.prototype[n]=t[n]};return Object.keys(t).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(n),e}An[Tn]=!0,An.withMutations=Ve.withMutations,An.asMutable=Ve.asMutable,An.asImmutable=Ve.asImmutable,An.wasAltered=Ve.wasAltered,n.Iterator=U,Pn(n,{toArray:function(){ke(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,n){e[n]=t}),e},toIndexedSeq:function(){return new Dt(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toJSON:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e}).__toJS()},toKeyedSeq:function(){return new It(this,!0)},toMap:function(){return Ue(this.toKeyedSeq())},toObject:function(){ke(this.size);var e={};return this.__iterate(function(t,n){e[n]=t}),e},toOrderedMap:function(){return Pt(this.toKeyedSeq())},toOrderedSet:function(){return vn(s(this)?this.valueSeq():this)},toSet:function(){return cn(s(this)?this.valueSeq():this)},toSetSeq:function(){return new Ft(this)},toSeq:function(){return c(this)?this.toIndexedSeq():s(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return _n(s(this)?this.valueSeq():this)},toList:function(){return dt(s(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){var t=e.call(arguments,0);return Jt(this,function(e,t){var n=s(e),i=[e].concat(t).map(function(e){return a(e)?n&&(e=r(e)):e=n?ae(e):se(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===i.length)return e;if(1===i.length){var o=i[0];if(o===e||n&&s(o)||c(e)&&c(o))return o}var u=new ee(i);return n?u=u.toKeyedSeq():c(e)||(u=u.toSetSeq()),(u=u.flatten(!0)).size=i.reduce(function(e,t){if(void 0!==e){var n=t.size;if(void 0!==n)return e+n}},0),u}(this,t))},includes:function(e){return this.some(function(t){return pe(t,e)})},entries:function(){return this.__iterator(I)},every:function(e,t){ke(this.size);var n=!0;return this.__iterate(function(r,i,o){if(!e.call(t,r,i,o))return n=!1,!1}),n},filter:function(e,t){return Jt(this,jt(this,e,t,!0))},find:function(e,t,n){var r=this.findEntry(e,t);return r?r[1]:n},forEach:function(e,t){return ke(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){ke(this.size),e=void 0!==e?""+e:",";var t="",n=!0;return this.__iterate(function(r){n?n=!1:t+=e,t+=null!==r&&void 0!==r?r.toString():""}),t},keys:function(){return this.__iterator(N)},map:function(e,t){return Jt(this,Bt(this,e,t))},reduce:function(e,t,n){var r,i;return ke(this.size),arguments.length<2?i=!0:r=t,this.__iterate(function(t,o,a){i?(i=!1,r=t):r=e.call(n,r,t,o,a)}),r},reduceRight:function(e,t,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return Jt(this,zt(this,!0))},slice:function(e,t){return Jt(this,Vt(this,e,t,!0))},some:function(e,t){return!this.every(In(e),t)},sort:function(e){return Jt(this,Ht(this,e))},values:function(){return this.__iterator(R)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return T(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return function(e,t,n){var r=Ue().asMutable();return e.__iterate(function(i,o){r.update(t.call(n,i,o,e),0,function(e){return e+1})}),r.asImmutable()}(this,e,t)},equals:function(e){return me(this,e)},entrySeq:function(){var e=this;if(e._cache)return new ee(e._cache);var t=e.toSeq().map(Rn).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter(In(e),t)},findEntry:function(e,t,n){var r=n;return this.__iterate(function(n,i,o){if(e.call(t,n,i,o))return r=[i,n],!1}),r},findKey:function(e,t){var n=this.findEntry(e,t);return n&&n[0]},findLast:function(e,t,n){return this.toKeyedSeq().reverse().find(e,t,n)},findLastEntry:function(e,t,n){return this.toKeyedSeq().reverse().findEntry(e,t,n)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(){return this.find(E)},flatMap:function(e,t){return Jt(this,function(e,t,n){var r=Kt(e);return e.toSeq().map(function(i,o){return r(t.call(n,i,o,e))}).flatten(!0)}(this,e,t))},flatten:function(e){return Jt(this,Wt(this,e,!0))},fromEntrySeq:function(){return new kt(this)},get:function(e,t){return this.find(function(t,n){return pe(n,e)},void 0,t)},getIn:function(e,t){for(var n,r=this,i=nn(e);!(n=i.next()).done;){var o=n.value;if((r=r&&r.get?r.get(o,y):y)===y)return t}return r},groupBy:function(e,t){return function(e,t,n){var r=s(e),i=(l(e)?Pt():Ue()).asMutable();e.__iterate(function(o,a){i.update(t.call(n,o,a,e),function(e){return(e=e||[]).push(r?[a,o]:o),e})});var o=Kt(e);return i.map(function(t){return Jt(e,o(t))})}(this,e,t)},has:function(e){return this.get(e,y)!==y},hasIn:function(e){return this.getIn(e,y)!==y},isSubset:function(e){return e="function"==typeof e.includes?e:n(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return(e="function"==typeof e.isSubset?e:n(e)).isSubset(this)},keyOf:function(e){return this.findKey(function(t){return pe(t,e)})},keySeq:function(){return this.toSeq().map(Nn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return Xt(this,e)},maxBy:function(e,t){return Xt(this,t,e)},min:function(e){return Xt(this,e?Dn(e):Un)},minBy:function(e,t){return Xt(this,t?Dn(t):Un,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return Jt(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return Jt(this,Gt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(In(e),t)},sortBy:function(e,t){return Jt(this,Ht(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return Jt(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return Jt(this,function(e,t,n){var r=$t(e);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var a=0;return e.__iterate(function(e,i,s){return t.call(n,e,i,s)&&++a&&r(e,i,o)}),a},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var a=e.__iterator(I,i),s=!0;return new U(function(){if(!s)return{value:void 0,done:!0};var e=a.next();if(e.done)return e;var i=e.value,c=i[0],u=i[1];return t.call(n,u,c,o)?r===I?e:B(r,c,u,e):(s=!1,{value:void 0,done:!0})})},r}(this,e,t))},takeUntil:function(e,t){return this.takeWhile(In(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(e){if(e.size===1/0)return 0;var t=l(e),n=s(e),r=t?1:0;return function(e,t){return t=Se(t,3432918353),t=Se(t<<15|t>>>-15,461845907),t=Se(t<<13|t>>>-13,5),t=Se((t=(t+3864292196|0)^e)^t>>>16,2246822507),t=Me((t=Se(t^t>>>13,3266489909))^t>>>16)}(e.__iterate(n?t?function(e,t){r=31*r+Bn(Te(e),Te(t))|0}:function(e,t){r=r+Bn(Te(e),Te(t))|0}:t?function(e){r=31*r+Te(e)|0}:function(e){r=r+Te(e)|0}),r)}(this))}});var Ln=n.prototype;Ln[h]=!0,Ln[k]=Ln.values,Ln.__toJS=Ln.toArray,Ln.__toStringMapper=Fn,Ln.inspect=Ln.toSource=function(){return this.toString()},Ln.chain=Ln.flatMap,Ln.contains=Ln.includes,Pn(r,{flip:function(){return Jt(this,Ut(this))},mapEntries:function(e,t){var n=this,r=0;return Jt(this,this.toSeq().map(function(i,o){return e.call(t,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(e,t){var n=this;return Jt(this,this.toSeq().flip().map(function(r,i){return e.call(t,r,i,n)}).flip())}});var On=r.prototype;function Nn(e,t){return t}function Rn(e,t){return[t,e]}function In(e){return function(){return!e.apply(this,arguments)}}function Dn(e){return function(){return-e.apply(this,arguments)}}function Fn(e){return"string"==typeof e?JSON.stringify(e):String(e)}function kn(){return M(arguments)}function Un(e,t){return e<t?1:e>t?-1:0}function Bn(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}return On[d]=!0,On[k]=Ln.entries,On.__toJS=Ln.toObject,On.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+Fn(e)},Pn(i,{toKeyedSeq:function(){return new It(this,!1)},filter:function(e,t){return Jt(this,jt(this,e,t,!1))},findIndex:function(e,t){var n=this.findEntry(e,t);return n?n[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return Jt(this,zt(this,!1))},slice:function(e,t){return Jt(this,Vt(this,e,t,!1))},splice:function(e,t){var n=arguments.length;if(t=Math.max(0|t,0),0===n||2===n&&!t)return this;e=P(e,e<0?this.count():this.size);var r=this.slice(0,e);return Jt(this,1===n?r:r.concat(M(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var n=this.findLastEntry(e,t);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(e){return Jt(this,Wt(this,e,!1))},get:function(e,t){return(e=A(this,e))<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,n){return n===e},void 0,t)},has:function(e){return(e=A(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return Jt(this,function(e,t){var n=$t(e);return n.size=e.size&&2*e.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return e.__iterate(function(e,r){return(!o||!1!==n(t,o++,i))&&!1!==n(e,o++,i)},r),o},n.__iteratorUncached=function(n,r){var i,o=e.__iterator(R,r),a=0;return new U(function(){return(!i||a%2)&&(i=o.next()).done?i:a%2?B(n,a++,t):B(n,a++,i.value,i)})},n}(this,e))},interleave:function(){var e=[this].concat(M(arguments)),t=Yt(this.toSeq(),Y.of,e),n=t.flatten(!0);return t.size&&(n.size=t.size*e.length),Jt(this,n)},keySeq:function(){return ye(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(e,t){return Jt(this,Gt(this,e,t,!1))},zip:function(){return Jt(this,Yt(this,kn,[this].concat(M(arguments))))},zipWith:function(e){var t=M(arguments);return t[0]=this,Jt(this,Yt(this,e,t))}}),i.prototype[f]=!0,i.prototype[p]=!0,Pn(o,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),o.prototype.has=Ln.includes,o.prototype.contains=o.prototype.includes,Pn(q,r.prototype),Pn(Y,i.prototype),Pn(J,o.prototype),Pn(xe,r.prototype),Pn(we,i.prototype),Pn(_e,o.prototype),{Iterable:n,Seq:X,Collection:be,Map:Ue,OrderedMap:Pt,List:dt,Stack:_n,Set:cn,OrderedSet:vn,Record:rn,Range:ye,Repeat:ve,is:pe,fromJS:he}}()},"5692bffd717498245e82":function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=l(n("49a47d064cfbf2949ee5")),o=l(n("6a4f9c383785f9168266")),a=l(n("8af190b70a6bc55c6f1b")),s=l(n("8a2d1b95e05b6a321e74")),c=n("12ba4fef039ee145f0aa"),u=l(n("07a2173bac8ab93c3080"));function l(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){return"/"===e.charAt(0)?e:"/"+e},f=function(e,t){return e?r({},t,{pathname:d(e)+t.pathname}):t},p=function(e){return"string"==typeof e?e:(0,c.createPath)(e)},m=function(e){return function(){(0,o.default)(!1,"You cannot %s with <StaticRouter>",e)}},v=function(){},g=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=h(this,e.call.apply(e,[this].concat(o))),r.createHref=function(e){return d(r.props.basename+p(e))},r.handlePush=function(e){var t=r.props,n=t.basename,i=t.context;i.action="PUSH",i.location=f(n,(0,c.createLocation)(e)),i.url=p(i.location)},r.handleReplace=function(e){var t=r.props,n=t.basename,i=t.context;i.action="REPLACE",i.location=f(n,(0,c.createLocation)(e)),i.url=p(i.location)},r.handleListen=function(){return v},r.handleBlock=function(){return v},h(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},t.prototype.componentWillMount=function(){(0,i.default)(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},t.prototype.render=function(){var e=this.props,t=e.basename,n=(e.context,e.location),i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["basename","context","location"]),o={createHref:this.createHref,action:"POP",location:function(e,t){if(!e)return t;var n=d(e);return 0!==t.pathname.indexOf(n)?t:r({},t,{pathname:t.pathname.substr(n.length)})}(t,(0,c.createLocation)(n)),push:this.handlePush,replace:this.handleReplace,go:m("go"),goBack:m("goBack"),goForward:m("goForward"),listen:this.handleListen,block:this.handleBlock};return a.default.createElement(u.default,r({},i,{history:o}))},t}(a.default.Component);g.propTypes={basename:s.default.string,context:s.default.object.isRequired,location:s.default.oneOfType([s.default.string,s.default.object])},g.defaultProps={basename:"",location:"/"},g.childContextTypes={router:s.default.object.isRequired},t.default=g},"56b82ba00e9aa7744555":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Math",{clamp:function(e,t,n){return Math.min(n,Math.max(t,e))}})},"56ca38cb7a1b85e3b391":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("7ae46632a49db7ab2ae0");r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},"56f612169e8c0cac4c0c":function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("d7d78b23c2948e92a9a9"));var i={},o=0;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"==typeof t&&(t={path:t});var a=t,s=a.path,c=a.exact,u=void 0!==c&&c,l=a.strict,h=void 0!==l&&l,d=a.sensitive,f=void 0!==d&&d;if(null==s)return n;var p=function(e,t){var n=""+t.end+t.strict+t.sensitive,a=i[n]||(i[n]={});if(a[e])return a[e];var s=[],c={re:(0,r.default)(e,s,t),keys:s};return o<1e4&&(a[e]=c,o++),c}(s,{end:u,strict:h,sensitive:f}),m=p.re,v=p.keys,g=m.exec(e);if(!g)return null;var y=g[0],b=g.slice(1),x=e===y;return u&&!x?null:{path:s,url:"/"===s&&""===y?"/":y,isExact:x,params:v.reduce(function(e,t,n){return e[t.name]=b[n],e},{})}}},"5712f1b9446531a0f3b8":function(e,t,n){"use strict";
/** @license React v16.4.1
 * react-dom.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n("277cfc1331526160cbd4"),i=n("8af190b70a6bc55c6f1b"),o=n("7c757e9b280b4a302846"),a=n("83406643bfb209d249f4"),s=n("ec9de96ce27c00ac79c5"),c=n("f7ee588e96ed47a6425e"),u=n("57f97042002e57c90c3d"),l=n("5e294ff5186056b35d02"),h=n("bef911c5daed007bb174");function d(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);r(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}i||d("227");var f={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(e,t,n,r,i,o,a,s,c){(function(e,t,n,r,i,o,a,s,c){this._hasCaughtError=!1,this._caughtError=null;var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this._caughtError=e,this._hasCaughtError=!0}}).apply(f,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,i,o,a,s,c){if(f.invokeGuardedCallback.apply(this,arguments),f.hasCaughtError()){var u=f.clearCaughtError();f._hasRethrowError||(f._hasRethrowError=!0,f._rethrowError=u)}},rethrowCaughtError:function(){return function(){if(f._hasRethrowError){var e=f._rethrowError;throw f._rethrowError=null,f._hasRethrowError=!1,e}}.apply(f,arguments)},hasCaughtError:function(){return f._hasCaughtError},clearCaughtError:function(){if(f._hasCaughtError){var e=f._caughtError;return f._caughtError=null,f._hasCaughtError=!1,e}d("198")}};var p=null,m={};function v(){if(p)for(var e in m){var t=m[e],n=p.indexOf(e);if(-1<n||d("96",e),!y[n])for(var r in t.extractEvents||d("97",e),y[n]=t,n=t.eventTypes){var i=void 0,o=n[r],a=t,s=r;b.hasOwnProperty(s)&&d("99",s),b[s]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&g(c[i],a,s);i=!0}else o.registrationName?(g(o.registrationName,a,s),i=!0):i=!1;i||d("98",r,e)}}}function g(e,t,n){x[e]&&d("100",e),x[e]=t,w[e]=t.eventTypes[n].dependencies}var y=[],b={},x={},w={};function _(e){p&&d("101"),p=Array.prototype.slice.call(e),v()}function S(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];m.hasOwnProperty(t)&&m[t]===r||(m[t]&&d("102",t),m[t]=r,n=!0)}n&&v()}var M={plugins:y,eventNameDispatchConfigs:b,registrationNameModules:x,registrationNameDependencies:w,possibleRegistrationNames:null,injectEventPluginOrder:_,injectEventPluginsByName:S},T=null,A=null,E=null;function C(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=E(r),f.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function P(e,t){return null==t&&d("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function L(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var O=null;function N(e,t){if(e){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)C(e,t,n[i],r[i]);else n&&C(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function R(e){return N(e,!0)}function I(e){return N(e,!1)}var D={injectEventPluginOrder:_,injectEventPluginsByName:S};function F(e,t){var n=e.stateNode;if(!n)return null;var r=T(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&d("231",t,typeof n),n)}function k(e,t){null!==e&&(O=P(O,e)),e=O,O=null,e&&(L(e,t?R:I),O&&d("95"),f.rethrowCaughtError())}function U(e,t,n,r){for(var i=null,o=0;o<y.length;o++){var a=y[o];a&&(a=a.extractEvents(e,t,n,r))&&(i=P(i,a))}k(i,!1)}var B={injection:D,getListener:F,runEventsInBatch:k,runExtractedEventsInBatch:U},z=Math.random().toString(36).slice(2),j="__reactInternalInstance$"+z,V="__reactEventHandlers$"+z;function G(e){if(e[j])return e[j];for(;!e[j];){if(!e.parentNode)return null;e=e.parentNode}return 5===(e=e[j]).tag||6===e.tag?e:null}function W(e){if(5===e.tag||6===e.tag)return e.stateNode;d("33")}function H(e){return e[V]||null}var X={precacheFiberNode:function(e,t){t[j]=e},getClosestInstanceFromNode:G,getInstanceFromNode:function(e){return!(e=e[j])||5!==e.tag&&6!==e.tag?null:e},getNodeFromInstance:W,getFiberCurrentPropsFromNode:H,updateFiberProps:function(e,t){e[V]=t}};function q(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Y(e,t,n){for(var r=[];e;)r.push(e),e=q(e);for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)}function J(e,t,n){(t=F(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=P(n._dispatchListeners,t),n._dispatchInstances=P(n._dispatchInstances,e))}function Q(e){e&&e.dispatchConfig.phasedRegistrationNames&&Y(e._targetInst,J,e)}function Z(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;Y(t=t?q(t):null,J,e)}}function K(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=F(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=P(n._dispatchListeners,t),n._dispatchInstances=P(n._dispatchInstances,e))}function $(e){e&&e.dispatchConfig.registrationName&&K(e._targetInst,null,e)}function ee(e){L(e,Q)}function te(e,t,n,r){if(n&&r)e:{for(var i=n,o=r,a=0,s=i;s;s=q(s))a++;s=0;for(var c=o;c;c=q(c))s++;for(;0<a-s;)i=q(i),a--;for(;0<s-a;)o=q(o),s--;for(;a--;){if(i===o||i===o.alternate)break e;i=q(i),o=q(o)}i=null}else i=null;for(o=i,i=[];n&&n!==o&&(null===(a=n.alternate)||a!==o);)i.push(n),n=q(n);for(n=[];r&&r!==o&&(null===(a=r.alternate)||a!==o);)n.push(r),r=q(r);for(r=0;r<i.length;r++)K(i[r],"bubbled",e);for(e=n.length;0<e--;)K(n[e],"captured",t)}var ne={accumulateTwoPhaseDispatches:ee,accumulateTwoPhaseDispatchesSkipTarget:function(e){L(e,Z)},accumulateEnterLeaveDispatches:te,accumulateDirectDispatches:function(e){L(e,$)}};function re(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}var ie={animationend:re("Animation","AnimationEnd"),animationiteration:re("Animation","AnimationIteration"),animationstart:re("Animation","AnimationStart"),transitionend:re("Transition","TransitionEnd")},oe={},ae={};function se(e){if(oe[e])return oe[e];if(!ie[e])return e;var t,n=ie[e];for(t in n)if(n.hasOwnProperty(t)&&t in ae)return oe[e]=n[t];return e}o.canUseDOM&&(ae=document.createElement("div").style,"AnimationEvent"in window||(delete ie.animationend.animation,delete ie.animationiteration.animation,delete ie.animationstart.animation),"TransitionEvent"in window||delete ie.transitionend.transition);var ce=se("animationend"),ue=se("animationiteration"),le=se("animationstart"),he=se("transitionend"),de="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fe=null;function pe(){return!fe&&o.canUseDOM&&(fe="textContent"in document.documentElement?"textContent":"innerText"),fe}var me={_root:null,_startText:null,_fallbackText:null};function ve(){if(me._fallbackText)return me._fallbackText;var e,t,n=me._startText,r=n.length,i=ge(),o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return me._fallbackText=i.slice(e,1<t?1-t:void 0),me._fallbackText}function ge(){return"value"in me._root?me._root.value:me._root[pe()]}var ye="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),be={type:null,target:null,currentTarget:s.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function xe(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?s.thatReturnsTrue:s.thatReturnsFalse,this.isPropagationStopped=s.thatReturnsFalse,this}function we(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function _e(e){e instanceof this||d("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Se(e){e.eventPool=[],e.getPooled=we,e.release=_e}a(xe.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=s.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=s.thatReturnsTrue)},persist:function(){this.isPersistent=s.thatReturnsTrue},isPersistent:s.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<ye.length;t++)this[ye[t]]=null}}),xe.Interface=be,xe.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return a(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=a({},r.Interface,e),n.extend=r.extend,Se(n),n},Se(xe);var Me=xe.extend({data:null}),Te=xe.extend({data:null}),Ae=[9,13,27,32],Ee=o.canUseDOM&&"CompositionEvent"in window,Ce=null;o.canUseDOM&&"documentMode"in document&&(Ce=document.documentMode);var Pe=o.canUseDOM&&"TextEvent"in window&&!Ce,Le=o.canUseDOM&&(!Ee||Ce&&8<Ce&&11>=Ce),Oe=String.fromCharCode(32),Ne={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Re=!1;function Ie(e,t){switch(e){case"keyup":return-1!==Ae.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function De(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Fe=!1;var ke={eventTypes:Ne,extractEvents:function(e,t,n,r){var i=void 0,o=void 0;if(Ee)e:{switch(e){case"compositionstart":i=Ne.compositionStart;break e;case"compositionend":i=Ne.compositionEnd;break e;case"compositionupdate":i=Ne.compositionUpdate;break e}i=void 0}else Fe?Ie(e,n)&&(i=Ne.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=Ne.compositionStart);return i?(Le&&(Fe||i!==Ne.compositionStart?i===Ne.compositionEnd&&Fe&&(o=ve()):(me._root=r,me._startText=ge(),Fe=!0)),i=Me.getPooled(i,t,n,r),o?i.data=o:null!==(o=De(n))&&(i.data=o),ee(i),o=i):o=null,(e=Pe?function(e,t){switch(e){case"compositionend":return De(t);case"keypress":return 32!==t.which?null:(Re=!0,Oe);case"textInput":return(e=t.data)===Oe&&Re?null:e;default:return null}}(e,n):function(e,t){if(Fe)return"compositionend"===e||!Ee&&Ie(e,t)?(e=ve(),me._root=null,me._startText=null,me._fallbackText=null,Fe=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Le?null:t.data;default:return null}}(e,n))?((t=Te.getPooled(Ne.beforeInput,t,n,r)).data=e,ee(t)):t=null,null===o?t:null===t?o:[o,t]}},Ue=null,Be={injectFiberControlledHostComponent:function(e){Ue=e}},ze=null,je=null;function Ve(e){if(e=A(e)){Ue&&"function"==typeof Ue.restoreControlledState||d("194");var t=T(e.stateNode);Ue.restoreControlledState(e.stateNode,e.type,t)}}function Ge(e){ze?je?je.push(e):je=[e]:ze=e}function We(){return null!==ze||null!==je}function He(){if(ze){var e=ze,t=je;if(je=ze=null,Ve(e),t)for(e=0;e<t.length;e++)Ve(t[e])}}var Xe={injection:Be,enqueueStateRestore:Ge,needsStateRestore:We,restoreStateIfNeeded:He};function qe(e,t){return e(t)}function Ye(e,t,n){return e(t,n)}function Je(){}var Qe=!1;function Ze(e,t){if(Qe)return e(t);Qe=!0;try{return qe(e,t)}finally{Qe=!1,We()&&(Je(),He())}}var Ke={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $e(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ke[e.type]:"textarea"===t}function et(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function tt(e,t){return!(!o.canUseDOM||t&&!("addEventListener"in document))&&((t=(e="on"+e)in document)||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t)}function nt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function rt(e){e._valueTracker||(e._valueTracker=function(e){var t=nt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function it(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=nt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var ot=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,at="function"==typeof Symbol&&Symbol.for,st=at?Symbol.for("react.element"):60103,ct=at?Symbol.for("react.portal"):60106,ut=at?Symbol.for("react.fragment"):60107,lt=at?Symbol.for("react.strict_mode"):60108,ht=at?Symbol.for("react.profiler"):60114,dt=at?Symbol.for("react.provider"):60109,ft=at?Symbol.for("react.context"):60110,pt=at?Symbol.for("react.async_mode"):60111,mt=at?Symbol.for("react.forward_ref"):60112,vt=at?Symbol.for("react.timeout"):60113,gt="function"==typeof Symbol&&Symbol.iterator;function yt(e){return null===e||void 0===e?null:"function"==typeof(e=gt&&e[gt]||e["@@iterator"])?e:null}function bt(e){var t=e.type;if("function"==typeof t)return t.displayName||t.name;if("string"==typeof t)return t;switch(t){case pt:return"AsyncMode";case ft:return"Context.Consumer";case ut:return"ReactFragment";case ct:return"ReactPortal";case ht:return"Profiler("+e.pendingProps.id+")";case dt:return"Context.Provider";case lt:return"StrictMode";case vt:return"Timeout"}if("object"==typeof t&&null!==t)switch(t.$$typeof){case mt:return""!==(e=t.render.displayName||t.render.name||"")?"ForwardRef("+e+")":"ForwardRef"}return null}function xt(e){var t="";do{e:switch(e.tag){case 0:case 1:case 2:case 5:var n=e._debugOwner,r=e._debugSource,i=bt(e),o=null;n&&(o=bt(n)),n=r,i="\n    in "+(i||"Unknown")+(n?" (at "+n.fileName.replace(/^.*[\\\/]/,"")+":"+n.lineNumber+")":o?" (created by "+o+")":"");break e;default:i=""}t+=i,e=e.return}while(e);return t}var wt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_t={},St={};function Mt(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Tt[e]=new Mt(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Tt[t]=new Mt(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){Tt[e]=new Mt(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(e){Tt[e]=new Mt(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Tt[e]=new Mt(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){Tt[e]=new Mt(e,3,!0,e.toLowerCase(),null)}),["capture","download"].forEach(function(e){Tt[e]=new Mt(e,4,!1,e.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(e){Tt[e]=new Mt(e,6,!1,e.toLowerCase(),null)}),["rowSpan","start"].forEach(function(e){Tt[e]=new Mt(e,5,!1,e.toLowerCase(),null)});var At=/[\-:]([a-z])/g;function Et(e){return e[1].toUpperCase()}function Ct(e,t,n,r){var i=Tt.hasOwnProperty(t)?Tt[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||void 0===t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!St.hasOwnProperty(e)||!_t.hasOwnProperty(e)&&(wt.test(e)?St[e]=!0:(_t[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Pt(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Lt(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Dt(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ot(e,t){null!=(t=t.checked)&&Ct(e,"checked",t,!1)}function Nt(e,t){Ot(e,t);var n=Dt(t.value);null!=n&&("number"===t.type?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n)),t.hasOwnProperty("value")?It(e,t.type,n):t.hasOwnProperty("defaultValue")&&It(e,t.type,Dt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Rt(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){t=""+e._wrapperState.initialValue;var r=e.value;n||t===r||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==n&&(e.name=n)}function It(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Dt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(At,Et);Tt[t]=new Mt(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(At,Et);Tt[t]=new Mt(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(At,Et);Tt[t]=new Mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),Tt.tabIndex=new Mt("tabIndex",1,!1,"tabindex",null);var Ft={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function kt(e,t,n){return(e=xe.getPooled(Ft.change,e,t,n)).type="change",Ge(n),ee(e),e}var Ut=null,Bt=null;function zt(e){k(e,!1)}function jt(e){if(it(W(e)))return e}function Vt(e,t){if("change"===e)return t}var Gt=!1;function Wt(){Ut&&(Ut.detachEvent("onpropertychange",Ht),Bt=Ut=null)}function Ht(e){"value"===e.propertyName&&jt(Bt)&&Ze(zt,e=kt(Bt,e,et(e)))}function Xt(e,t,n){"focus"===e?(Wt(),Bt=n,(Ut=t).attachEvent("onpropertychange",Ht)):"blur"===e&&Wt()}function qt(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return jt(Bt)}function Yt(e,t){if("click"===e)return jt(t)}function Jt(e,t){if("input"===e||"change"===e)return jt(t)}o.canUseDOM&&(Gt=tt("input")&&(!document.documentMode||9<document.documentMode));var Qt={eventTypes:Ft,_isInputEventSupported:Gt,extractEvents:function(e,t,n,r){var i=t?W(t):window,o=void 0,a=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?o=Vt:$e(i)?Gt?o=Jt:(o=qt,a=Xt):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(o=Yt),o&&(o=o(e,t)))return kt(o,n,r);a&&a(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&It(i,"number",i.value)}},Zt=xe.extend({view:null,detail:null}),Kt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $t(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Kt[e])&&!!t[e]}function en(){return $t}var tn=Zt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:en,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}}),nn=tn.extend({pointerId:null,width:null,height:null,pressure:null,tiltX:null,tiltY:null,pointerType:null,isPrimary:null}),rn={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},on={eventTypes:rn,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!o&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=t,t=(t=n.relatedTarget||n.toElement)?G(t):null):o=null,o===t)return null;var a=void 0,s=void 0,c=void 0,u=void 0;return"mouseout"===e||"mouseover"===e?(a=tn,s=rn.mouseLeave,c=rn.mouseEnter,u="mouse"):"pointerout"!==e&&"pointerover"!==e||(a=nn,s=rn.pointerLeave,c=rn.pointerEnter,u="pointer"),e=null==o?i:W(o),i=null==t?i:W(t),(s=a.getPooled(s,o,n,r)).type=u+"leave",s.target=e,s.relatedTarget=i,(n=a.getPooled(c,t,n,r)).type=u+"enter",n.target=i,n.relatedTarget=e,te(s,n,o,t),[s,n]}};function an(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function sn(e){2!==an(e)&&d("188")}function cn(e){var t=e.alternate;if(!t)return 3===(t=an(e))&&d("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,o=i?i.alternate:null;if(!i||!o)break;if(i.child===o.child){for(var a=i.child;a;){if(a===n)return sn(i),e;if(a===r)return sn(i),t;a=a.sibling}d("188")}if(n.return!==r.return)n=i,r=o;else{a=!1;for(var s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}a||d("189")}}n.alternate!==r&&d("190")}return 3!==n.tag&&d("188"),n.stateNode.current===n?e:t}function un(e){if(!(e=cn(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var ln=xe.extend({animationName:null,elapsedTime:null,pseudoElement:null}),hn=xe.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dn=Zt.extend({relatedTarget:null});function fn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var pn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vn=Zt.extend({key:function(e){if(e.key){var t=pn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=fn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?mn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:en,charCode:function(e){return"keypress"===e.type?fn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?fn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),gn=tn.extend({dataTransfer:null}),yn=Zt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:en}),bn=xe.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),xn=tn.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),wn=[["abort","abort"],[ce,"animationEnd"],[ue,"animationIteration"],[le,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[he,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],_n={},Sn={};function Mn(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},_n[e]=t,Sn[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){Mn(e,!0)}),wn.forEach(function(e){Mn(e,!1)});var Tn={eventTypes:_n,isInteractiveTopLevelEventType:function(e){return void 0!==(e=Sn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=Sn[e];if(!i)return null;switch(e){case"keypress":if(0===fn(n))return null;case"keydown":case"keyup":e=vn;break;case"blur":case"focus":e=dn;break;case"click":if(2===n.button)return null;case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=tn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=yn;break;case ce:case ue:case le:e=ln;break;case he:e=bn;break;case"scroll":e=Zt;break;case"wheel":e=xn;break;case"copy":case"cut":case"paste":e=hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=nn;break;default:e=xe}return ee(t=e.getPooled(i,t,n,r)),t}},An=Tn.isInteractiveTopLevelEventType,En=[];function Cn(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n;for(n=t;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(t),t=G(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],U(e.topLevelType,t,e.nativeEvent,et(e.nativeEvent))}var Pn=!0;function Ln(e){Pn=!!e}function On(e,t){if(!t)return null;var n=(An(e)?Rn:In).bind(null,e);t.addEventListener(e,n,!1)}function Nn(e,t){if(!t)return null;var n=(An(e)?Rn:In).bind(null,e);t.addEventListener(e,n,!0)}function Rn(e,t){Ye(In,e,t)}function In(e,t){if(Pn){var n=et(t);if(null===(n=G(n))||"number"!=typeof n.tag||2===an(n)||(n=null),En.length){var r=En.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Ze(Cn,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>En.length&&En.push(e)}}}var Dn={get _enabled(){return Pn},setEnabled:Ln,isEnabled:function(){return Pn},trapBubbledEvent:On,trapCapturedEvent:Nn,dispatchEvent:In},Fn={},kn=0,Un="_reactListenersID"+(""+Math.random()).slice(2);function Bn(e){return Object.prototype.hasOwnProperty.call(e,Un)||(e[Un]=kn++,Fn[e[Un]]={}),Fn[e[Un]]}function zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jn(e,t){var n,r=zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zn(r)}}function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Gn=o.canUseDOM&&"documentMode"in document&&11>=document.documentMode,Wn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Hn=null,Xn=null,qn=null,Yn=!1;function Jn(e,t){if(Yn||null==Hn||Hn!==c())return null;var n=Hn;return"selectionStart"in n&&Vn(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?n={anchorNode:(n=window.getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}:n=void 0,qn&&u(qn,n)?null:(qn=n,(e=xe.getPooled(Wn.select,Xn,e,t)).type="select",e.target=Hn,ee(e),e)}var Qn={eventTypes:Wn,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=Bn(o),i=w.onSelect;for(var a=0;a<i.length;a++){var s=i[a];if(!o.hasOwnProperty(s)||!o[s]){o=!1;break e}}o=!0}i=!o}if(i)return null;switch(o=t?W(t):window,e){case"focus":($e(o)||"true"===o.contentEditable)&&(Hn=o,Xn=t,qn=null);break;case"blur":qn=Xn=Hn=null;break;case"mousedown":Yn=!0;break;case"contextmenu":case"mouseup":return Yn=!1,Jn(n,r);case"selectionchange":if(Gn)break;case"keydown":case"keyup":return Jn(n,r)}return null}};D.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),T=X.getFiberCurrentPropsFromNode,A=X.getInstanceFromNode,E=X.getNodeFromInstance,D.injectEventPluginsByName({SimpleEventPlugin:Tn,EnterLeaveEventPlugin:on,ChangeEventPlugin:Qt,SelectEventPlugin:Qn,BeforeInputEventPlugin:ke});var Zn="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,Kn=Date,$n=setTimeout,er=clearTimeout,tr=void 0;if("object"==typeof performance&&"function"==typeof performance.now){var nr=performance;tr=function(){return nr.now()}}else tr=function(){return Kn.now()};var rr=void 0,ir=void 0;if(o.canUseDOM){var or="function"==typeof Zn?Zn:function(){d("276")},ar=null,sr=null,cr=-1,ur=!1,lr=!1,hr=0,dr=33,fr=33,pr={didTimeout:!1,timeRemaining:function(){var e=hr-tr();return 0<e?e:0}},mr=function(e,t){var n=e.scheduledCallback,r=!1;try{n(t),r=!0}finally{ir(e),r||(ur=!0,window.postMessage(vr,"*"))}},vr="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===vr&&(ur=!1,null!==ar)){if(null!==ar){var t=tr();if(!(-1===cr||cr>t)){e=-1;for(var n=[],r=ar;null!==r;){var i=r.timeoutTime;-1!==i&&i<=t?n.push(r):-1!==i&&(-1===e||i<e)&&(e=i),r=r.next}if(0<n.length)for(pr.didTimeout=!0,t=0,r=n.length;t<r;t++)mr(n[t],pr);cr=e}}for(e=tr();0<hr-e&&null!==ar;)e=ar,pr.didTimeout=!1,mr(e,pr),e=tr();null===ar||lr||(lr=!0,or(gr))}},!1);var gr=function(e){lr=!1;var t=e-hr+fr;t<fr&&dr<fr?(8>t&&(t=8),fr=t<dr?dr:t):dr=t,hr=e+fr,ur||(ur=!0,window.postMessage(vr,"*"))};rr=function(e,t){var n=-1;return null!=t&&"number"==typeof t.timeout&&(n=tr()+t.timeout),(-1===cr||-1!==n&&n<cr)&&(cr=n),e={scheduledCallback:e,timeoutTime:n,prev:null,next:null},null===ar?ar=e:null!==(t=e.prev=sr)&&(t.next=e),sr=e,lr||(lr=!0,or(gr)),e},ir=function(e){if(null!==e.prev||ar===e){var t=e.next,n=e.prev;e.next=null,e.prev=null,null!==t?null!==n?(n.next=t,t.prev=n):(t.prev=null,ar=t):null!==n?(n.next=null,sr=n):sr=ar=null}}}else{var yr=new Map;rr=function(e){var t={scheduledCallback:e,timeoutTime:0,next:null,prev:null},n=$n(function(){e({timeRemaining:function(){return 1/0},didTimeout:!1})});return yr.set(e,n),t},ir=function(e){var t=yr.get(e.scheduledCallback);yr.delete(e),er(t)}}function br(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,function(e){null==e||"string"!=typeof e&&"number"!=typeof e||(t+=e)}),t}(t.children))&&(e.children=t),e}function xr(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+n,t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wr(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}}function _r(e,t){return null!=t.dangerouslySetInnerHTML&&d("91"),a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Sr(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&d("92"),Array.isArray(t)&&(1>=t.length||d("93"),t=t[0]),n=""+t),null==n&&(n="")),e._wrapperState={initialValue:""+n}}function Mr(e,t){var n=t.value;null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)}function Tr(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}var Ar={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Er(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cr(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Er(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Pr=void 0,Lr=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==Ar.svg||"innerHTML"in e)e.innerHTML=t;else{for((Pr=Pr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=Pr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Or(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Nr={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rr=["Webkit","ms","Moz","O"];function Ir(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=n,o=t[n];i=null==o||"boolean"==typeof o||""===o?"":r||"number"!=typeof o||0===o||Nr.hasOwnProperty(i)&&Nr[i]?(""+o).trim():o+"px","float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Nr).forEach(function(e){Rr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Nr[t]=Nr[e]})});var Dr=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fr(e,t,n){t&&(Dr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&d("137",e,n()),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&d("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||d("61")),null!=t.style&&"object"!=typeof t.style&&d("62",n()))}function kr(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ur=s.thatReturns("");function Br(e,t){var n=Bn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=w[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Nn("scroll",e);break;case"focus":case"blur":Nn("focus",e),Nn("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":tt(i,!0)&&Nn(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===de.indexOf(i)&&On(i,e)}n[i]=!0}}}function zr(e,t,n,r){return n=9===n.nodeType?n:n.ownerDocument,r===Ar.html&&(r=Er(e)),r===Ar.html?"script"===e?((e=n.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"==typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(r,e),e}function jr(e,t){return(9===t.nodeType?t:t.ownerDocument).createTextNode(e)}function Vr(e,t,n,r){var i=kr(t,n);switch(t){case"iframe":case"object":On("load",e);var o=n;break;case"video":case"audio":for(o=0;o<de.length;o++)On(de[o],e);o=n;break;case"source":On("error",e),o=n;break;case"img":case"image":case"link":On("error",e),On("load",e),o=n;break;case"form":On("reset",e),On("submit",e),o=n;break;case"details":On("toggle",e),o=n;break;case"input":Lt(e,n),o=Pt(e,n),On("invalid",e),Br(r,"onChange");break;case"option":o=br(e,n);break;case"select":wr(e,n),o=a({},n,{value:void 0}),On("invalid",e),Br(r,"onChange");break;case"textarea":Sr(e,n),o=_r(e,n),On("invalid",e),Br(r,"onChange");break;default:o=n}Fr(t,o,Ur);var c,u=o;for(c in u)if(u.hasOwnProperty(c)){var l=u[c];"style"===c?Ir(e,l):"dangerouslySetInnerHTML"===c?null!=(l=l?l.__html:void 0)&&Lr(e,l):"children"===c?"string"==typeof l?("textarea"!==t||""!==l)&&Or(e,l):"number"==typeof l&&Or(e,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(x.hasOwnProperty(c)?null!=l&&Br(r,c):null!=l&&Ct(e,c,l,i))}switch(t){case"input":rt(e),Rt(e,n,!1);break;case"textarea":rt(e),Tr(e);break;case"option":null!=n.value&&e.setAttribute("value",n.value);break;case"select":e.multiple=!!n.multiple,null!=(t=n.value)?xr(e,!!n.multiple,t,!1):null!=n.defaultValue&&xr(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof o.onClick&&(e.onclick=s)}}function Gr(e,t,n,r,i){var o=null;switch(t){case"input":n=Pt(e,n),r=Pt(e,r),o=[];break;case"option":n=br(e,n),r=br(e,r),o=[];break;case"select":n=a({},n,{value:void 0}),r=a({},r,{value:void 0}),o=[];break;case"textarea":n=_r(e,n),r=_r(e,r),o=[];break;default:"function"!=typeof n.onClick&&"function"==typeof r.onClick&&(e.onclick=s)}Fr(t,r,Ur),t=e=void 0;var c=null;for(e in n)if(!r.hasOwnProperty(e)&&n.hasOwnProperty(e)&&null!=n[e])if("style"===e){var u=n[e];for(t in u)u.hasOwnProperty(t)&&(c||(c={}),c[t]="")}else"dangerouslySetInnerHTML"!==e&&"children"!==e&&"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&"autoFocus"!==e&&(x.hasOwnProperty(e)?o||(o=[]):(o=o||[]).push(e,null));for(e in r){var l=r[e];if(u=null!=n?n[e]:void 0,r.hasOwnProperty(e)&&l!==u&&(null!=l||null!=u))if("style"===e)if(u){for(t in u)!u.hasOwnProperty(t)||l&&l.hasOwnProperty(t)||(c||(c={}),c[t]="");for(t in l)l.hasOwnProperty(t)&&u[t]!==l[t]&&(c||(c={}),c[t]=l[t])}else c||(o||(o=[]),o.push(e,c)),c=l;else"dangerouslySetInnerHTML"===e?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(e,""+l)):"children"===e?u===l||"string"!=typeof l&&"number"!=typeof l||(o=o||[]).push(e,""+l):"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&(x.hasOwnProperty(e)?(null!=l&&Br(i,e),o||u===l||(o=[])):(o=o||[]).push(e,l))}return c&&(o=o||[]).push("style",c),o}function Wr(e,t,n,r,i){"input"===n&&"radio"===i.type&&null!=i.name&&Ot(e,i),kr(n,r),r=kr(n,i);for(var o=0;o<t.length;o+=2){var a=t[o],s=t[o+1];"style"===a?Ir(e,s):"dangerouslySetInnerHTML"===a?Lr(e,s):"children"===a?Or(e,s):Ct(e,a,s,r)}switch(n){case"input":Nt(e,i);break;case"textarea":Mr(e,i);break;case"select":e._wrapperState.initialValue=void 0,t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?xr(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?xr(e,!!i.multiple,i.defaultValue,!0):xr(e,!!i.multiple,i.multiple?[]:"",!1))}}function Hr(e,t,n,r,i){switch(t){case"iframe":case"object":On("load",e);break;case"video":case"audio":for(r=0;r<de.length;r++)On(de[r],e);break;case"source":On("error",e);break;case"img":case"image":case"link":On("error",e),On("load",e);break;case"form":On("reset",e),On("submit",e);break;case"details":On("toggle",e);break;case"input":Lt(e,n),On("invalid",e),Br(i,"onChange");break;case"select":wr(e,n),On("invalid",e),Br(i,"onChange");break;case"textarea":Sr(e,n),On("invalid",e),Br(i,"onChange")}for(var o in Fr(t,n,Ur),r=null,n)if(n.hasOwnProperty(o)){var a=n[o];"children"===o?"string"==typeof a?e.textContent!==a&&(r=["children",a]):"number"==typeof a&&e.textContent!==""+a&&(r=["children",""+a]):x.hasOwnProperty(o)&&null!=a&&Br(i,o)}switch(t){case"input":rt(e),Rt(e,n,!0);break;case"textarea":rt(e),Tr(e);break;case"select":case"option":break;default:"function"==typeof n.onClick&&(e.onclick=s)}return r}function Xr(e,t){return e.nodeValue!==t}var qr={createElement:zr,createTextNode:jr,setInitialProperties:Vr,diffProperties:Gr,updateProperties:Wr,diffHydratedProperties:Hr,diffHydratedText:Xr,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":if(Nt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=H(r);i||d("90"),it(r),Nt(r,i)}}}break;case"textarea":Mr(e,n);break;case"select":null!=(t=n.value)&&xr(e,!!n.multiple,t,!1)}}},Yr=null,Jr=null;function Qr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Zr(e,t){return"textarea"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"==typeof t.dangerouslySetInnerHTML.__html}var Kr=tr,$r=rr,ei=ir;function ti(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function ni(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var ri=[],ii=-1;function oi(e){return{current:e}}function ai(e){0>ii||(e.current=ri[ii],ri[ii]=null,ii--)}function si(e,t){ri[++ii]=e.current,e.current=t}var ci=oi(h),ui=oi(!1),li=h;function hi(e){return fi(e)?li:ci.current}function di(e,t){var n=e.type.contextTypes;if(!n)return h;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function fi(e){return 2===e.tag&&null!=e.type.childContextTypes}function pi(e){fi(e)&&(ai(ui),ai(ci))}function mi(e){ai(ui),ai(ci)}function vi(e,t,n){ci.current!==h&&d("168"),si(ci,t),si(ui,n)}function gi(e,t){var n=e.stateNode,r=e.type.childContextTypes;if("function"!=typeof n.getChildContext)return t;for(var i in n=n.getChildContext())i in r||d("108",bt(e)||"Unknown",i);return a({},t,n)}function yi(e){if(!fi(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||h,li=ci.current,si(ci,t),si(ui,ui.current),!0}function bi(e,t){var n=e.stateNode;if(n||d("169"),t){var r=gi(e,li);n.__reactInternalMemoizedMergedChildContext=r,ai(ui),ai(ci),si(ci,r)}else ai(ui);si(ui,t)}function xi(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=null,this.index=0,this.ref=null,this.pendingProps=t,this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function wi(e,t,n){var r=e.alternate;return null===r?((r=new xi(e.tag,t,e.key,e.mode)).type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function _i(e,t,n){var r=e.type,i=e.key;if(e=e.props,"function"==typeof r)var o=r.prototype&&r.prototype.isReactComponent?2:0;else if("string"==typeof r)o=5;else switch(r){case ut:return Si(e.children,t,n,i);case pt:o=11,t|=3;break;case lt:o=11,t|=2;break;case ht:return(r=new xi(15,e,i,4|t)).type=ht,r.expirationTime=n,r;case vt:o=16,t|=2;break;default:e:{switch("object"==typeof r&&null!==r?r.$$typeof:null){case dt:o=13;break e;case ft:o=12;break e;case mt:o=14;break e;default:d("130",null==r?r:typeof r,"")}o=void 0}}return(t=new xi(o,e,i,t)).type=r,t.expirationTime=n,t}function Si(e,t,n,r){return(e=new xi(10,e,r,t)).expirationTime=n,e}function Mi(e,t,n){return(e=new xi(6,e,null,t)).expirationTime=n,e}function Ti(e,t,n){return(t=new xi(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ai(e,t,n){return e={current:t=new xi(3,null,null,t?3:0),containerInfo:e,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null},t.stateNode=e}var Ei=null,Ci=null;function Pi(e){return function(t){try{return e(t)}catch(e){}}}function Li(e){"function"==typeof Ei&&Ei(e)}function Oi(e){"function"==typeof Ci&&Ci(e)}var Ni=!1;function Ri(e){return{expirationTime:0,baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Ii(e){return{expirationTime:e.expirationTime,baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Di(e){return{expirationTime:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Fi(e,t,n){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t),(0===e.expirationTime||e.expirationTime>n)&&(e.expirationTime=n)}function ki(e,t,n){var r=e.alternate;if(null===r){var i=e.updateQueue,o=null;null===i&&(i=e.updateQueue=Ri(e.memoizedState))}else i=e.updateQueue,o=r.updateQueue,null===i?null===o?(i=e.updateQueue=Ri(e.memoizedState),o=r.updateQueue=Ri(r.memoizedState)):i=e.updateQueue=Ii(o):null===o&&(o=r.updateQueue=Ii(i));null===o||i===o?Fi(i,t,n):null===i.lastUpdate||null===o.lastUpdate?(Fi(i,t,n),Fi(o,t,n)):(Fi(i,t,n),o.lastUpdate=t)}function Ui(e,t,n){var r=e.updateQueue;null===(r=null===r?e.updateQueue=Ri(e.memoizedState):Bi(e,r)).lastCapturedUpdate?r.firstCapturedUpdate=r.lastCapturedUpdate=t:(r.lastCapturedUpdate.next=t,r.lastCapturedUpdate=t),(0===r.expirationTime||r.expirationTime>n)&&(r.expirationTime=n)}function Bi(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Ii(t)),t}function zi(e,t,n,r,i,o){switch(n.tag){case 1:return"function"==typeof(e=n.payload)?e.call(o,r,i):e;case 3:e.effectTag=-1025&e.effectTag|64;case 0:if(null===(i="function"==typeof(e=n.payload)?e.call(o,r,i):e)||void 0===i)break;return a({},r,i);case 2:Ni=!0}return r}function ji(e,t,n,r,i){if(Ni=!1,!(0===t.expirationTime||t.expirationTime>i)){for(var o=(t=Bi(e,t)).baseState,a=null,s=0,c=t.firstUpdate,u=o;null!==c;){var l=c.expirationTime;l>i?(null===a&&(a=c,o=u),(0===s||s>l)&&(s=l)):(u=zi(e,0,c,u,n,r),null!==c.callback&&(e.effectTag|=32,c.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=c:(t.lastEffect.nextEffect=c,t.lastEffect=c))),c=c.next}for(l=null,c=t.firstCapturedUpdate;null!==c;){var h=c.expirationTime;h>i?(null===l&&(l=c,null===a&&(o=u)),(0===s||s>h)&&(s=h)):(u=zi(e,0,c,u,n,r),null!==c.callback&&(e.effectTag|=32,c.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=c:(t.lastCapturedEffect.nextEffect=c,t.lastCapturedEffect=c))),c=c.next}null===a&&(t.lastUpdate=null),null===l?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===l&&(o=u),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=l,t.expirationTime=s,e.memoizedState=u}}function Vi(e,t){"function"!=typeof e&&d("191",e),e.call(t)}function Gi(e,t,n){for(null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),e=t.firstEffect,t.firstEffect=t.lastEffect=null;null!==e;){var r=e.callback;null!==r&&(e.callback=null,Vi(r,n)),e=e.nextEffect}for(e=t.firstCapturedEffect,t.firstCapturedEffect=t.lastCapturedEffect=null;null!==e;)null!==(t=e.callback)&&(e.callback=null,Vi(t,n)),e=e.nextEffect}function Wi(e,t){return{value:e,source:t,stack:xt(t)}}var Hi=oi(null),Xi=oi(null),qi=oi(0);function Yi(e){var t=e.type._context;si(qi,t._changedBits),si(Xi,t._currentValue),si(Hi,e),t._currentValue=e.pendingProps.value,t._changedBits=e.stateNode}function Ji(e){var t=qi.current,n=Xi.current;ai(Hi),ai(Xi),ai(qi),(e=e.type._context)._currentValue=n,e._changedBits=t}var Qi={},Zi=oi(Qi),Ki=oi(Qi),$i=oi(Qi);function eo(e){return e===Qi&&d("174"),e}function to(e,t){si($i,t),si(Ki,e),si(Zi,Qi);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Cr(null,"");break;default:t=Cr(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}ai(Zi),si(Zi,t)}function no(e){ai(Zi),ai(Ki),ai($i)}function ro(e){Ki.current===e&&(ai(Zi),ai(Ki))}function io(e,t,n){var r=e.memoizedState;r=null===(t=t(n,r))||void 0===t?r:a({},r,t),e.memoizedState=r,null!==(e=e.updateQueue)&&0===e.expirationTime&&(e.baseState=r)}var oo={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===an(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=ya(),i=Di(r=va(r,e));i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ki(e,i,r),ga(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=ya(),i=Di(r=va(r,e));i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ki(e,i,r),ga(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=ya(),r=Di(n=va(n,e));r.tag=2,void 0!==t&&null!==t&&(r.callback=t),ki(e,r,n),ga(e,n)}};function ao(e,t,n,r,i,o){var a=e.stateNode;return e=e.type,"function"==typeof a.shouldComponentUpdate?a.shouldComponentUpdate(n,i,o):!e.prototype||!e.prototype.isPureReactComponent||(!u(t,n)||!u(r,i))}function so(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&oo.enqueueReplaceState(t,t.state,null)}function co(e,t){var n=e.type,r=e.stateNode,i=e.pendingProps,o=hi(e);r.props=i,r.state=e.memoizedState,r.refs=h,r.context=di(e,o),null!==(o=e.updateQueue)&&(ji(e,o,i,r,t),r.state=e.memoizedState),"function"==typeof(o=e.type.getDerivedStateFromProps)&&(io(e,o,i),r.state=e.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(n=r.state,"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),n!==r.state&&oo.enqueueReplaceState(r,r.state,null),null!==(o=e.updateQueue)&&(ji(e,o,i,r,t),r.state=e.memoizedState)),"function"==typeof r.componentDidMount&&(e.effectTag|=4)}var uo=Array.isArray;function lo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){var r=void 0;(n=n._owner)&&(2!==n.tag&&d("110"),r=n.stateNode),r||d("147",e);var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs===h?r.refs={}:r.refs;null===e?delete t[i]:t[i]=e})._stringRef=i,t)}"string"!=typeof e&&d("148"),n._owner||d("254",e)}return e}function ho(e,t){"textarea"!==e.type&&d("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function fo(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=wi(e,t,n)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function a(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mi(n,e.mode,r)).return=e,t):((t=i(t,n,r)).return=e,t)}function c(e,t,n,r){return null!==t&&t.type===n.type?((r=i(t,n.props,r)).ref=lo(e,t,n),r.return=e,r):((r=_i(n,e.mode,r)).ref=lo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ti(n,e.mode,r)).return=e,t):((t=i(t,n.children||[],r)).return=e,t)}function l(e,t,n,r,o){return null===t||10!==t.tag?((t=Si(n,e.mode,r,o)).return=e,t):((t=i(t,n,r)).return=e,t)}function h(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Mi(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case st:return(n=_i(t,e.mode,n)).ref=lo(e,null,t),n.return=e,n;case ct:return(t=Ti(t,e.mode,n)).return=e,t}if(uo(t)||yt(t))return(t=Si(t,e.mode,n,null)).return=e,t;ho(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case st:return n.key===i?n.type===ut?l(e,t,n.props.children,r,i):c(e,t,n,r):null;case ct:return n.key===i?u(e,t,n,r):null}if(uo(n)||yt(n))return null!==i?null:l(e,t,n,r,null);ho(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case st:return e=e.get(null===r.key?n:r.key)||null,r.type===ut?l(t,e,r.props.children,i,r.key):c(t,e,r,i);case ct:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(uo(r)||yt(r))return l(t,e=e.get(n)||null,r,i,null);ho(t,r)}return null}function m(i,a,s,c){for(var u=null,l=null,d=a,m=a=0,v=null;null!==d&&m<s.length;m++){d.index>m?(v=d,d=null):v=d.sibling;var g=f(i,d,s[m],c);if(null===g){null===d&&(d=v);break}e&&d&&null===g.alternate&&t(i,d),a=o(g,a,m),null===l?u=g:l.sibling=g,l=g,d=v}if(m===s.length)return n(i,d),u;if(null===d){for(;m<s.length;m++)(d=h(i,s[m],c))&&(a=o(d,a,m),null===l?u=d:l.sibling=d,l=d);return u}for(d=r(i,d);m<s.length;m++)(v=p(d,i,m,s[m],c))&&(e&&null!==v.alternate&&d.delete(null===v.key?m:v.key),a=o(v,a,m),null===l?u=v:l.sibling=v,l=v);return e&&d.forEach(function(e){return t(i,e)}),u}function v(i,a,s,c){var u=yt(s);"function"!=typeof u&&d("150"),null==(s=u.call(s))&&d("151");for(var l=u=null,m=a,v=a=0,g=null,y=s.next();null!==m&&!y.done;v++,y=s.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=f(i,m,y.value,c);if(null===b){m||(m=g);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,v),null===l?u=b:l.sibling=b,l=b,m=g}if(y.done)return n(i,m),u;if(null===m){for(;!y.done;v++,y=s.next())null!==(y=h(i,y.value,c))&&(a=o(y,a,v),null===l?u=y:l.sibling=y,l=y);return u}for(m=r(i,m);!y.done;v++,y=s.next())null!==(y=p(m,i,v,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?u=y:l.sibling=y,l=y);return e&&m.forEach(function(e){return t(i,e)}),u}return function(e,r,o,s){var c="object"==typeof o&&null!==o&&o.type===ut&&null===o.key;c&&(o=o.props.children);var u="object"==typeof o&&null!==o;if(u)switch(o.$$typeof){case st:e:{for(u=o.key,c=r;null!==c;){if(c.key===u){if(10===c.tag?o.type===ut:c.type===o.type){n(e,c.sibling),(r=i(c,o.type===ut?o.props.children:o.props,s)).ref=lo(e,c,o),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===ut?((r=Si(o.props.children,e.mode,s,o.key)).return=e,e=r):((s=_i(o,e.mode,s)).ref=lo(e,r,o),s.return=e,e=s)}return a(e);case ct:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[],s)).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ti(o,e.mode,s)).return=e,e=r}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o,s)).return=e,e=r):(n(e,r),(r=Mi(o,e.mode,s)).return=e,e=r),a(e);if(uo(o))return m(e,r,o,s);if(yt(o))return v(e,r,o,s);if(u&&ho(e,o),void 0===o&&!c)switch(e.tag){case 2:case 1:d("152",(s=e.type).displayName||s.name||"Component")}return n(e,r)}}var po=fo(!0),mo=fo(!1),vo=null,go=null,yo=!1;function bo(e,t){var n=new xi(5,null,null,0);n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function xo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function wo(e){if(yo){var t=go;if(t){var n=t;if(!xo(e,t)){if(!(t=ti(n))||!xo(e,t))return e.effectTag|=2,yo=!1,void(vo=e);bo(vo,n)}vo=e,go=ni(t)}else e.effectTag|=2,yo=!1,vo=e}}function _o(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;vo=e}function So(e){if(e!==vo)return!1;if(!yo)return _o(e),yo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Zr(t,e.memoizedProps))for(t=go;t;)bo(e,t),t=ti(t);return _o(e),go=vo?ti(e.stateNode):null,!0}function Mo(){go=vo=null,yo=!1}function To(e,t,n){Ao(e,t,n,t.expirationTime)}function Ao(e,t,n,r){t.child=null===e?mo(t,null,n,r):po(t,e.child,n,r)}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Co(e,t,n,r,i){Eo(e,t);var o=0!=(64&t.effectTag);if(!n&&!o)return r&&bi(t,!1),Oo(e,t);n=t.stateNode,ot.current=t;var a=o?null:n.render();return t.effectTag|=1,o&&(Ao(e,t,null,i),t.child=null),Ao(e,t,a,i),t.memoizedState=n.state,t.memoizedProps=n.props,r&&bi(t,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?vi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&vi(0,t.context,!1),to(e,t.containerInfo)}function Lo(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){switch(i.tag){case 12:var o=0|i.stateNode;if(i.type===t&&0!=(o&n)){for(o=i;null!==o;){var a=o.alternate;if(0===o.expirationTime||o.expirationTime>r)o.expirationTime=r,null!==a&&(0===a.expirationTime||a.expirationTime>r)&&(a.expirationTime=r);else{if(null===a||!(0===a.expirationTime||a.expirationTime>r))break;a.expirationTime=r}o=o.return}o=null}else o=i.child;break;case 13:o=i.type===e.type?null:i.child;break;default:o=i.child}if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function Oo(e,t){if(null!==e&&t.child!==e.child&&d("153"),null!==t.child){var n=wi(e=t.child,e.pendingProps,e.expirationTime);for(t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=wi(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function No(e,t,n){if(0===t.expirationTime||t.expirationTime>n){switch(t.tag){case 3:Po(t);break;case 2:yi(t);break;case 4:to(t,t.stateNode.containerInfo);break;case 13:Yi(t)}return null}switch(t.tag){case 0:null!==e&&d("155");var r=t.type,i=t.pendingProps,o=hi(t);return r=r(i,o=di(t,o)),t.effectTag|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render&&void 0===r.$$typeof?(o=t.type,t.tag=2,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,"function"==typeof(o=o.getDerivedStateFromProps)&&io(t,o,i),i=yi(t),r.updater=oo,t.stateNode=r,r._reactInternalFiber=t,co(t,n),e=Co(e,t,!0,i,n)):(t.tag=1,To(e,t,r),t.memoizedProps=i,e=t.child),e;case 1:return i=t.type,n=t.pendingProps,ui.current||t.memoizedProps!==n?(i=i(n,r=di(t,r=hi(t))),t.effectTag|=1,To(e,t,i),t.memoizedProps=n,e=t.child):e=Oo(e,t),e;case 2:if(i=yi(t),null===e)if(null===t.stateNode){var a=t.pendingProps,s=t.type;r=hi(t);var c=2===t.tag&&null!=t.type.contextTypes;a=new s(a,o=c?di(t,r):h),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=oo,t.stateNode=a,a._reactInternalFiber=t,c&&((c=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,c.__reactInternalMemoizedMaskedChildContext=o),co(t,n),r=!0}else{s=t.type,r=t.stateNode,c=t.memoizedProps,o=t.pendingProps,r.props=c;var u=r.context;a=di(t,a=hi(t));var l=s.getDerivedStateFromProps;(s="function"==typeof l||"function"==typeof r.getSnapshotBeforeUpdate)||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(c!==o||u!==a)&&so(t,r,o,a),Ni=!1;var f=t.memoizedState;u=r.state=f;var p=t.updateQueue;null!==p&&(ji(t,p,o,r,n),u=t.memoizedState),c!==o||f!==u||ui.current||Ni?("function"==typeof l&&(io(t,l,o),u=t.memoizedState),(c=Ni||ao(t,c,o,f,u,a))?(s||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||("function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"==typeof r.componentDidMount&&(t.effectTag|=4)):("function"==typeof r.componentDidMount&&(t.effectTag|=4),t.memoizedProps=o,t.memoizedState=u),r.props=o,r.state=u,r.context=a,r=c):("function"==typeof r.componentDidMount&&(t.effectTag|=4),r=!1)}else s=t.type,r=t.stateNode,o=t.memoizedProps,c=t.pendingProps,r.props=o,u=r.context,a=di(t,a=hi(t)),(s="function"==typeof(l=s.getDerivedStateFromProps)||"function"==typeof r.getSnapshotBeforeUpdate)||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(o!==c||u!==a)&&so(t,r,c,a),Ni=!1,u=t.memoizedState,f=r.state=u,null!==(p=t.updateQueue)&&(ji(t,p,c,r,n),f=t.memoizedState),o!==c||u!==f||ui.current||Ni?("function"==typeof l&&(io(t,l,c),f=t.memoizedState),(l=Ni||ao(t,o,c,u,f,a))?(s||"function"!=typeof r.UNSAFE_componentWillUpdate&&"function"!=typeof r.componentWillUpdate||("function"==typeof r.componentWillUpdate&&r.componentWillUpdate(c,f,a),"function"==typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(c,f,a)),"function"==typeof r.componentDidUpdate&&(t.effectTag|=4),"function"==typeof r.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof r.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=c,t.memoizedState=f),r.props=c,r.state=f,r.context=a,r=l):("function"!=typeof r.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return Co(e,t,r,i,n);case 3:return Po(t),null!==(i=t.updateQueue)?(r=null!==(r=t.memoizedState)?r.element:null,ji(t,i,t.pendingProps,null,n),(i=t.memoizedState.element)===r?(Mo(),e=Oo(e,t)):(r=t.stateNode,(r=(null===e||null===e.child)&&r.hydrate)&&(go=ni(t.stateNode.containerInfo),vo=t,r=yo=!0),r?(t.effectTag|=2,t.child=mo(t,null,i,n)):(Mo(),To(e,t,i)),e=t.child)):(Mo(),e=Oo(e,t)),e;case 5:return eo($i.current),(i=eo(Zi.current))!==(r=Cr(i,t.type))&&(si(Ki,t),si(Zi,r)),null===e&&wo(t),i=t.type,c=t.memoizedProps,r=t.pendingProps,o=null!==e?e.memoizedProps:null,ui.current||c!==r||((c=1&t.mode&&!!r.hidden)&&(t.expirationTime=1073741823),c&&1073741823===n)?(c=r.children,Zr(i,r)?c=null:o&&Zr(i,o)&&(t.effectTag|=16),Eo(e,t),1073741823!==n&&1&t.mode&&r.hidden?(t.expirationTime=1073741823,t.memoizedProps=r,e=null):(To(e,t,c),t.memoizedProps=r,e=t.child)):e=Oo(e,t),e;case 6:return null===e&&wo(t),t.memoizedProps=t.pendingProps,null;case 16:return null;case 4:return to(t,t.stateNode.containerInfo),i=t.pendingProps,ui.current||t.memoizedProps!==i?(null===e?t.child=po(t,null,i,n):To(e,t,i),t.memoizedProps=i,e=t.child):e=Oo(e,t),e;case 14:return i=t.type.render,n=t.pendingProps,r=t.ref,ui.current||t.memoizedProps!==n||r!==(null!==e?e.ref:null)?(To(e,t,i=i(n,r)),t.memoizedProps=n,e=t.child):e=Oo(e,t),e;case 10:return n=t.pendingProps,ui.current||t.memoizedProps!==n?(To(e,t,n),t.memoizedProps=n,e=t.child):e=Oo(e,t),e;case 11:return n=t.pendingProps.children,ui.current||null!==n&&t.memoizedProps!==n?(To(e,t,n),t.memoizedProps=n,e=t.child):e=Oo(e,t),e;case 15:return n=t.pendingProps,t.memoizedProps===n?e=Oo(e,t):(To(e,t,n.children),t.memoizedProps=n,e=t.child),e;case 13:return function(e,t,n){var r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=!0;if(ui.current)a=!1;else if(o===i)return t.stateNode=0,Yi(t),Oo(e,t);var s=i.value;if(t.memoizedProps=i,null===o)s=1073741823;else if(o.value===i.value){if(o.children===i.children&&a)return t.stateNode=0,Yi(t),Oo(e,t);s=0}else{var c=o.value;if(c===s&&(0!==c||1/c==1/s)||c!=c&&s!=s){if(o.children===i.children&&a)return t.stateNode=0,Yi(t),Oo(e,t);s=0}else if(s="function"==typeof r._calculateChangedBits?r._calculateChangedBits(c,s):1073741823,0==(s|=0)){if(o.children===i.children&&a)return t.stateNode=0,Yi(t),Oo(e,t)}else Lo(t,r,s,n)}return t.stateNode=s,Yi(t),To(e,t,i.children),t.child}(e,t,n);case 12:e:if(r=t.type,o=t.pendingProps,c=t.memoizedProps,i=r._currentValue,a=r._changedBits,ui.current||0!==a||c!==o){if(t.memoizedProps=o,void 0!==(s=o.unstable_observedBits)&&null!==s||(s=1073741823),t.stateNode=s,0!=(a&s))Lo(t,r,a,n);else if(c===o){e=Oo(e,t);break e}n=(n=o.children)(i),t.effectTag|=1,To(e,t,n),e=t.child}else e=Oo(e,t);return e;default:d("156")}}function Ro(e){e.effectTag|=4}var Io=void 0,Do=void 0,Fo=void 0;function ko(e,t){var n=t.pendingProps;switch(t.tag){case 1:return null;case 2:return pi(t),null;case 3:no(),mi();var r=t.stateNode;return r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(So(t),t.effectTag&=-3),Io(t),null;case 5:ro(t),r=eo($i.current);var i=t.type;if(null!==e&&null!=t.stateNode){var o=e.memoizedProps,a=t.stateNode,s=eo(Zi.current);a=Gr(a,i,o,n,r),Do(e,t,a,i,o,n,r,s),e.ref!==t.ref&&(t.effectTag|=128)}else{if(!n)return null===t.stateNode&&d("166"),null;if(e=eo(Zi.current),So(t))n=t.stateNode,i=t.type,o=t.memoizedProps,n[j]=t,n[V]=o,r=Hr(n,i,o,e,r),t.updateQueue=r,null!==r&&Ro(t);else{(e=zr(i,n,r,e))[j]=t,e[V]=n;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)e.appendChild(o.stateNode);else if(4!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}Vr(e,i,n,r),Qr(i,n)&&Ro(t),t.stateNode=e}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Fo(e,t,e.memoizedProps,n);else{if("string"!=typeof n)return null===t.stateNode&&d("166"),null;r=eo($i.current),eo(Zi.current),So(t)?(r=t.stateNode,n=t.memoizedProps,r[j]=t,Xr(r,n)&&Ro(t)):((r=jr(n,r))[j]=t,t.stateNode=r)}return null;case 14:case 16:case 10:case 11:case 15:return null;case 4:return no(),Io(t),null;case 13:return Ji(t),null;case 12:return null;case 0:d("167");default:d("156")}}function Uo(e,t){var n=t.source;null===t.stack&&null!==n&&xt(n),null!==n&&bt(n),t=t.value,null!==e&&2===e.tag&&bt(e);try{t&&t.suppressReactErrorLogging||console.error(t)}catch(e){e&&e.suppressReactErrorLogging||console.error(e)}}function Bo(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){pa(e,t)}else t.current=null}function zo(e){switch(Oi(e),e.tag){case 2:Bo(e);var t=e.stateNode;if("function"==typeof t.componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){pa(e,t)}break;case 5:Bo(e);break;case 4:Go(e)}}function jo(e){return 5===e.tag||3===e.tag||4===e.tag}function Vo(e){e:{for(var t=e.return;null!==t;){if(jo(t)){var n=t;break e}t=t.return}d("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:d("161")}16&n.effectTag&&(Or(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||jo(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)if(n)if(r){var o=t,a=i.stateNode,s=n;8===o.nodeType?o.parentNode.insertBefore(a,s):o.insertBefore(a,s)}else t.insertBefore(i.stateNode,n);else r?(o=t,a=i.stateNode,8===o.nodeType?o.parentNode.insertBefore(a,o):o.appendChild(a)):t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Go(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&d("160"),n.tag){case 5:r=n.stateNode,i=!1;break e;case 3:case 4:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag){e:for(var o=t,a=o;;)if(zo(a),null!==a.child&&4!==a.tag)a.child.return=a,a=a.child;else{if(a===o)break;for(;null===a.sibling;){if(null===a.return||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}i?(o=r,a=t.stateNode,8===o.nodeType?o.parentNode.removeChild(a):o.removeChild(a)):r.removeChild(t.stateNode)}else if(4===t.tag?r=t.stateNode.containerInfo:zo(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function Wo(e,t){switch(t.tag){case 2:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&(n[V]=r,Wr(n,o,i,e,r))}break;case 6:null===t.stateNode&&d("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 3:case 15:case 16:break;default:d("163")}}function Ho(e,t,n){(n=Di(n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Za(r),Uo(e,t)},n}function Xo(e,t,n){(n=Di(n)).tag=3;var r=e.stateNode;return null!==r&&"function"==typeof r.componentDidCatch&&(n.callback=function(){null===ua?ua=new Set([this]):ua.add(this);var n=t.value,r=t.stack;Uo(e,t),this.componentDidCatch(n,{componentStack:null!==r?r:""})}),n}function qo(e,t,n,r,i,o){n.effectTag|=512,n.firstEffect=n.lastEffect=null,r=Wi(r,n),e=t;do{switch(e.tag){case 3:return e.effectTag|=1024,void Ui(e,r=Ho(e,r,o),o);case 2:if(t=r,n=e.stateNode,0==(64&e.effectTag)&&null!==n&&"function"==typeof n.componentDidCatch&&(null===ua||!ua.has(n)))return e.effectTag|=1024,void Ui(e,r=Xo(e,t,o),o)}e=e.return}while(null!==e)}function Yo(e){switch(e.tag){case 2:pi(e);var t=e.effectTag;return 1024&t?(e.effectTag=-1025&t|64,e):null;case 3:return no(),mi(),1024&(t=e.effectTag)?(e.effectTag=-1025&t|64,e):null;case 5:return ro(e),null;case 16:return 1024&(t=e.effectTag)?(e.effectTag=-1025&t|64,e):null;case 4:return no(),null;case 13:return Ji(e),null;default:return null}}Io=function(){},Do=function(e,t,n){(t.updateQueue=n)&&Ro(t)},Fo=function(e,t,n,r){n!==r&&Ro(t)};var Jo=Kr(),Qo=2,Zo=Jo,Ko=0,$o=0,ea=!1,ta=null,na=null,ra=0,ia=-1,oa=!1,aa=null,sa=!1,ca=!1,ua=null;function la(){if(null!==ta)for(var e=ta.return;null!==e;){var t=e;switch(t.tag){case 2:pi(t);break;case 3:no(),mi();break;case 5:ro(t);break;case 4:no();break;case 13:Ji(t)}e=e.return}na=null,ra=0,ia=-1,oa=!1,ta=null,ca=!1}function ha(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0==(512&e.effectTag)){t=ko(t,e);var i=e;if(1073741823===ra||1073741823!==i.expirationTime){var o=0;switch(i.tag){case 3:case 2:var a=i.updateQueue;null!==a&&(o=a.expirationTime)}for(a=i.child;null!==a;)0!==a.expirationTime&&(0===o||o>a.expirationTime)&&(o=a.expirationTime),a=a.sibling;i.expirationTime=o}if(null!==t)return t;if(null!==n&&0==(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==r)return r;if(null===n){ca=!0;break}e=n}else{if(null!==(e=Yo(e)))return e.effectTag&=511,e;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512),null!==r)return r;if(null===n)break;e=n}}return null}function da(e){var t=No(e.alternate,e,ra);return null===t&&(t=ha(e)),ot.current=null,t}function fa(e,t,n){ea&&d("243"),ea=!0,t===ra&&e===na&&null!==ta||(la(),ra=t,ia=-1,ta=wi((na=e).current,null,ra),e.pendingCommitExpirationTime=0);var r=!1;for(oa=!n||ra<=Qo;;){try{if(n)for(;null!==ta&&!Qa();)ta=da(ta);else for(;null!==ta;)ta=da(ta)}catch(t){if(null===ta)r=!0,Za(t);else{null===ta&&d("271");var i=(n=ta).return;if(null===i){r=!0,Za(t);break}qo(e,i,n,t,0,ra),ta=ha(n)}}break}if(ea=!1,r)return null;if(null===ta){if(ca)return e.pendingCommitExpirationTime=t,e.current.alternate;oa&&d("262"),0<=ia&&setTimeout(function(){var t=e.current.expirationTime;0!==t&&(0===e.remainingExpirationTime||e.remainingExpirationTime<t)&&ja(e,t)},ia),function(e){null===Aa&&d("246"),Aa.remainingExpirationTime=e}(e.current.expirationTime)}return null}function pa(e,t){var n;e:{for(ea&&!sa&&d("263"),n=e.return;null!==n;){switch(n.tag){case 2:var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromCatch||"function"==typeof r.componentDidCatch&&(null===ua||!ua.has(r))){ki(n,e=Xo(n,e=Wi(t,e),1),1),ga(n,1),n=void 0;break e}break;case 3:ki(n,e=Ho(n,e=Wi(t,e),1),1),ga(n,1),n=void 0;break e}n=n.return}3===e.tag&&(ki(e,n=Ho(e,n=Wi(t,e),1),1),ga(e,1)),n=void 0}return n}function ma(){var e=2+25*(1+((ya()-2+500)/25|0));return e<=Ko&&(e=Ko+1),Ko=e}function va(e,t){return e=0!==$o?$o:ea?sa?1:ra:1&t.mode?Da?2+10*(1+((e-2+15)/10|0)):2+25*(1+((e-2+500)/25|0)):1,Da&&(0===Ca||e>Ca)&&(Ca=e),e}function ga(e,t){for(;null!==e;){if((0===e.expirationTime||e.expirationTime>t)&&(e.expirationTime=t),null!==e.alternate&&(0===e.alternate.expirationTime||e.alternate.expirationTime>t)&&(e.alternate.expirationTime=t),null===e.return){if(3!==e.tag)break;var n=e.stateNode;!ea&&0!==ra&&t<ra&&la();var r=n.current.expirationTime;ea&&!sa&&na===n||ja(n,r),Ua>ka&&d("185")}e=e.return}}function ya(){return Zo=Kr()-Jo,Qo=2+(Zo/10|0)}function ba(e){var t=$o;$o=2+25*(1+((ya()-2+500)/25|0));try{return e()}finally{$o=t}}function xa(e,t,n,r,i){var o=$o;$o=1;try{return e(t,n,r,i)}finally{$o=o}}var wa=null,_a=null,Sa=0,Ma=void 0,Ta=!1,Aa=null,Ea=0,Ca=0,Pa=!1,La=!1,Oa=null,Na=null,Ra=!1,Ia=!1,Da=!1,Fa=null,ka=1e3,Ua=0,Ba=1;function za(e){if(0!==Sa){if(e>Sa)return;null!==Ma&&ei(Ma)}var t=Kr()-Jo;Sa=e,Ma=$r(Ga,{timeout:10*(e-2)-t})}function ja(e,t){if(null===e.nextScheduledRoot)e.remainingExpirationTime=t,null===_a?(wa=_a=e,e.nextScheduledRoot=e):(_a=_a.nextScheduledRoot=e).nextScheduledRoot=wa;else{var n=e.remainingExpirationTime;(0===n||t<n)&&(e.remainingExpirationTime=t)}Ta||(Ra?Ia&&(Aa=e,Ea=1,Ya(e,1,!1)):1===t?Wa():za(t))}function Va(){var e=0,t=null;if(null!==_a)for(var n=_a,r=wa;null!==r;){var i=r.remainingExpirationTime;if(0===i){if((null===n||null===_a)&&d("244"),r===r.nextScheduledRoot){wa=_a=r.nextScheduledRoot=null;break}if(r===wa)wa=i=r.nextScheduledRoot,_a.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===_a){(_a=n).nextScheduledRoot=wa,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if((0===e||i<e)&&(e=i,t=r),r===_a)break;n=r,r=r.nextScheduledRoot}}null!==(n=Aa)&&n===t&&1===e?Ua++:Ua=0,Aa=t,Ea=e}function Ga(e){Ha(0,!0,e)}function Wa(){Ha(1,!1,null)}function Ha(e,t,n){if(Na=n,Va(),t)for(;null!==Aa&&0!==Ea&&(0===e||e>=Ea)&&(!Pa||ya()>=Ea);)ya(),Ya(Aa,Ea,!Pa),Va();else for(;null!==Aa&&0!==Ea&&(0===e||e>=Ea);)Ya(Aa,Ea,!1),Va();null!==Na&&(Sa=0,Ma=null),0!==Ea&&za(Ea),Na=null,Pa=!1,qa()}function Xa(e,t){Ta&&d("253"),Aa=e,Ea=t,Ya(e,t,!1),Wa(),qa()}function qa(){if(Ua=0,null!==Fa){var e=Fa;Fa=null;for(var t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){La||(La=!0,Oa=e)}}}if(La)throw e=Oa,Oa=null,La=!1,e}function Ya(e,t,n){Ta&&d("245"),Ta=!0,n?null!==(n=e.finishedWork)?Ja(e,n,t):null!==(n=fa(e,t,!0))&&(Qa()?e.finishedWork=n:Ja(e,n,t)):null!==(n=e.finishedWork)?Ja(e,n,t):null!==(n=fa(e,t,!1))&&Ja(e,n,t),Ta=!1}function Ja(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime<=n&&(null===Fa?Fa=[r]:Fa.push(r),r._defer))return e.finishedWork=t,void(e.remainingExpirationTime=0);if(e.finishedWork=null,sa=ea=!0,(n=t.stateNode).current===t&&d("177"),0===(r=n.pendingCommitExpirationTime)&&d("261"),n.pendingCommitExpirationTime=0,ya(),ot.current=null,1<t.effectTag)if(null!==t.lastEffect){t.lastEffect.nextEffect=t;var i=t.firstEffect}else i=t;else i=t.firstEffect;Yr=Pn;var o=c();if(Vn(o)){if("selectionStart"in o)var a={start:o.selectionStart,end:o.selectionEnd};else e:{var s=window.getSelection&&window.getSelection();if(s&&0!==s.rangeCount){a=s.anchorNode;var u=s.anchorOffset,h=s.focusNode;s=s.focusOffset;try{a.nodeType,h.nodeType}catch(e){a=null;break e}var f=0,p=-1,m=-1,v=0,g=0,y=o,b=null;t:for(;;){for(var x;y!==a||0!==u&&3!==y.nodeType||(p=f+u),y!==h||0!==s&&3!==y.nodeType||(m=f+s),3===y.nodeType&&(f+=y.nodeValue.length),null!==(x=y.firstChild);)b=y,y=x;for(;;){if(y===o)break t;if(b===a&&++v===u&&(p=f),b===h&&++g===s&&(m=f),null!==(x=y.nextSibling))break;b=(y=b).parentNode}y=x}a=-1===p||-1===m?null:{start:p,end:m}}else a=null}a=a||{start:0,end:0}}else a=null;for(Jr={focusedElem:o,selectionRange:a},Ln(!1),aa=i;null!==aa;){o=!1,a=void 0;try{for(;null!==aa;){if(256&aa.effectTag){var w=aa.alternate;switch((u=aa).tag){case 2:if(256&u.effectTag&&null!==w){var _=w.memoizedProps,S=w.memoizedState,M=u.stateNode;M.props=u.memoizedProps,M.state=u.memoizedState;var T=M.getSnapshotBeforeUpdate(_,S);M.__reactInternalSnapshotBeforeUpdate=T}break;case 3:case 5:case 6:case 4:break;default:d("163")}}aa=aa.nextEffect}}catch(e){o=!0,a=e}o&&(null===aa&&d("178"),pa(aa,a),null!==aa&&(aa=aa.nextEffect))}for(aa=i;null!==aa;){w=!1,_=void 0;try{for(;null!==aa;){var A=aa.effectTag;if(16&A&&Or(aa.stateNode,""),128&A){var E=aa.alternate;if(null!==E){var C=E.ref;null!==C&&("function"==typeof C?C(null):C.current=null)}}switch(14&A){case 2:Vo(aa),aa.effectTag&=-3;break;case 6:Vo(aa),aa.effectTag&=-3,Wo(aa.alternate,aa);break;case 4:Wo(aa.alternate,aa);break;case 8:Go(S=aa),S.return=null,S.child=null,S.alternate&&(S.alternate.child=null,S.alternate.return=null)}aa=aa.nextEffect}}catch(e){w=!0,_=e}w&&(null===aa&&d("178"),pa(aa,_),null!==aa&&(aa=aa.nextEffect))}if(C=Jr,E=c(),A=C.focusedElem,w=C.selectionRange,E!==A&&l(document.documentElement,A)){null!==w&&Vn(A)&&(E=w.start,void 0===(C=w.end)&&(C=E),"selectionStart"in A?(A.selectionStart=E,A.selectionEnd=Math.min(C,A.value.length)):window.getSelection&&(E=window.getSelection(),_=A[pe()].length,C=Math.min(w.start,_),w=void 0===w.end?C:Math.min(w.end,_),!E.extend&&C>w&&(_=w,w=C,C=_),_=jn(A,C),S=jn(A,w),_&&S&&(1!==E.rangeCount||E.anchorNode!==_.node||E.anchorOffset!==_.offset||E.focusNode!==S.node||E.focusOffset!==S.offset)&&((M=document.createRange()).setStart(_.node,_.offset),E.removeAllRanges(),C>w?(E.addRange(M),E.extend(S.node,S.offset)):(M.setEnd(S.node,S.offset),E.addRange(M))))),E=[];for(C=A;C=C.parentNode;)1===C.nodeType&&E.push({element:C,left:C.scrollLeft,top:C.scrollTop});for("function"==typeof A.focus&&A.focus(),A=0;A<E.length;A++)(C=E[A]).element.scrollLeft=C.left,C.element.scrollTop=C.top}for(Jr=null,Ln(Yr),Yr=null,n.current=t,aa=i;null!==aa;){i=!1,A=void 0;try{for(E=r;null!==aa;){var P=aa.effectTag;if(36&P){var L=aa.alternate;switch(w=E,(C=aa).tag){case 2:var O=C.stateNode;if(4&C.effectTag)if(null===L)O.props=C.memoizedProps,O.state=C.memoizedState,O.componentDidMount();else{var N=L.memoizedProps,R=L.memoizedState;O.props=C.memoizedProps,O.state=C.memoizedState,O.componentDidUpdate(N,R,O.__reactInternalSnapshotBeforeUpdate)}var I=C.updateQueue;null!==I&&(O.props=C.memoizedProps,O.state=C.memoizedState,Gi(C,I,O));break;case 3:var D=C.updateQueue;if(null!==D){if(_=null,null!==C.child)switch(C.child.tag){case 5:_=C.child.stateNode;break;case 2:_=C.child.stateNode}Gi(C,D,_)}break;case 5:var F=C.stateNode;null===L&&4&C.effectTag&&Qr(C.type,C.memoizedProps)&&F.focus();break;case 6:case 4:case 15:case 16:break;default:d("163")}}if(128&P){C=void 0;var k=aa.ref;if(null!==k){var U=aa.stateNode;switch(aa.tag){case 5:C=U;break;default:C=U}"function"==typeof k?k(C):k.current=C}}var B=aa.nextEffect;aa.nextEffect=null,aa=B}}catch(e){i=!0,A=e}i&&(null===aa&&d("178"),pa(aa,A),null!==aa&&(aa=aa.nextEffect))}ea=sa=!1,Li(t.stateNode),0===(t=n.current.expirationTime)&&(ua=null),e.remainingExpirationTime=t}function Qa(){return!(null===Na||Na.timeRemaining()>Ba)&&(Pa=!0)}function Za(e){null===Aa&&d("246"),Aa.remainingExpirationTime=0,La||(La=!0,Oa=e)}function Ka(e,t){var n=Ra;Ra=!0;try{return e(t)}finally{(Ra=n)||Ta||Wa()}}function $a(e,t){if(Ra&&!Ia){Ia=!0;try{return e(t)}finally{Ia=!1}}return e(t)}function es(e,t){Ta&&d("187");var n=Ra;Ra=!0;try{return xa(e,t)}finally{Ra=n,Wa()}}function ts(e,t,n){if(Da)return e(t,n);Ra||Ta||0===Ca||(Ha(Ca,!1,null),Ca=0);var r=Da,i=Ra;Ra=Da=!0;try{return e(t,n)}finally{Da=r,(Ra=i)||Ta||Wa()}}function ns(e){var t=Ra;Ra=!0;try{xa(e)}finally{(Ra=t)||Ta||Ha(1,!1,null)}}function rs(e,t,n,r,i){var o=t.current;if(n){var a;n=n._reactInternalFiber;e:{for(2===an(n)&&2===n.tag||d("170"),a=n;3!==a.tag;){if(fi(a)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}(a=a.return)||d("171")}a=a.stateNode.context}n=fi(n)?gi(n,a):a}else n=h;return null===t.context?t.context=n:t.pendingContext=n,t=i,(i=Di(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),ki(o,i,r),ga(o,r),r}function is(e){var t=e._reactInternalFiber;return void 0===t&&("function"==typeof e.render?d("188"):d("268",Object.keys(e))),null===(e=un(t))?null:e.stateNode}function os(e,t,n,r){var i=t.current;return rs(e,t,n,i=va(ya(),i),r)}function as(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function ss(e){var t=e.findFiberByHostInstance;return function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Ei=Pi(function(e){return t.onCommitFiberRoot(n,e)}),Ci=Pi(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}(a({},e,{findHostInstanceByFiber:function(e){return null===(e=un(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}var cs=Ka,us=ts,ls=function(){Ta||0===Ca||(Ha(Ca,!1,null),Ca=0)};function hs(e){this._expirationTime=ma(),this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function ds(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function fs(e,t,n){this._internalRoot=Ai(e,t,n)}function ps(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ms(e,t,n,r,i){ps(n)||d("200");var o=n._reactRootContainer;if(o){if("function"==typeof i){var a=i;i=function(){var e=as(o._internalRoot);a.call(e)}}null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new fs(e,!1,t)}(n,r),"function"==typeof i){var s=i;i=function(){var e=as(o._internalRoot);s.call(e)}}$a(function(){null!=e?o.legacy_renderSubtreeIntoContainer(e,t,i):o.render(t,i)})}return as(o._internalRoot)}function vs(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return ps(t)||d("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ct,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Be.injectFiberControlledHostComponent(qr),hs.prototype.render=function(e){this._defer||d("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new ds;return rs(e,t,null,n,r._onCommit),r},hs.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},hs.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||d("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;null===r&&d("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,Xa(e,n),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},hs.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},ds.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},ds.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!=typeof n&&d("191",n),n()}}},fs.prototype.render=function(e,t){var n=this._internalRoot,r=new ds;return null!==(t=void 0===t?null:t)&&r.then(t),os(e,n,null,r._onCommit),r},fs.prototype.unmount=function(e){var t=this._internalRoot,n=new ds;return null!==(e=void 0===e?null:e)&&n.then(e),os(null,t,null,n._onCommit),n},fs.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new ds;return null!==(n=void 0===n?null:n)&&i.then(n),os(t,r,e,i._onCommit),i},fs.prototype.createBatch=function(){var e=new hs(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime<=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},qe=cs,Ye=us,Je=ls;var gs={createPortal:vs,findDOMNode:function(e){return null==e?null:1===e.nodeType?e:is(e)},hydrate:function(e,t,n){return ms(null,e,t,!0,n)},render:function(e,t,n){return ms(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return(null==e||void 0===e._reactInternalFiber)&&d("38"),ms(e,t,n,!1,r)},unmountComponentAtNode:function(e){return ps(e)||d("40"),!!e._reactRootContainer&&($a(function(){ms(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return vs.apply(void 0,arguments)},unstable_batchedUpdates:Ka,unstable_deferredUpdates:ba,unstable_interactiveUpdates:ts,flushSync:es,unstable_flushControlled:ns,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:B,EventPluginRegistry:M,EventPropagators:ne,ReactControlledComponent:Xe,ReactDOMComponentTree:X,ReactDOMEventListener:Dn},unstable_createRoot:function(e,t){return new fs(e,!0,null!=t&&!0===t.hydrate)}};ss({findFiberByHostInstance:G,bundleType:0,version:"16.4.1",rendererPackageName:"react-dom"});var ys={default:gs},bs=ys&&gs||ys;e.exports=bs.default?bs.default:bs},"574ea81f94fc0b2f332a":function(e,t,n){var r=n("621a65702ee1a566fd32")("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},"578d8dc958c3920ef454":function(e,t,n){"use strict";n("03ba1ede2f4706d1e7f7")("link",function(e){return function(t){return e(this,"a","href",t)}})},"57e7a4ee5fd1ce9280ef":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("7ad2c0eb9a8edcc472a4"),o=n("7a7739dd8a198a2cfcb5"),a=n("f3bd18506acf22d8f1d4"),s="["+a+"]",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),l=function(e,t,n){var i={},s=o(function(){return!!a[e]()||""!=""[e]()}),c=i[e]=s?t(h):a[e];n&&(i[n]=c),r(r.P+r.F*s,"String",i)},h=l.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=l},"57f97042002e57c90c3d":function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function i(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}e.exports=function(e,t){if(i(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!r.call(t,n[a])||!i(e[n[a]],t[n[a]]))return!1;return!0}},"58a497e2c18ee06b3067":function(e,t,n){"use strict";n("03ba1ede2f4706d1e7f7")("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},"58a762c5dd9e5f9d6ad3":function(e,t,n){"use strict";t.__esModule=!0;var r=c(n("8af190b70a6bc55c6f1b")),i=c(n("8a2d1b95e05b6a321e74")),o=c(n("49a47d064cfbf2949ee5")),a=c(n("6a4f9c383785f9168266")),s=c(n("56f612169e8c0cac4c0c"));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){(0,a.default)(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){(0,o.default)(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),(0,o.default)(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,i=void 0,o=void 0;return r.default.Children.forEach(t,function(t){if(null==i&&r.default.isValidElement(t)){var a=t.props,c=a.path,u=a.exact,l=a.strict,h=a.sensitive,d=a.from,f=c||d;o=t,i=(0,s.default)(n.pathname,{path:f,exact:u,strict:l,sensitive:h},e.match)}}),i?r.default.cloneElement(o,{location:n,computedMatch:i}):null},t}(r.default.Component);u.contextTypes={router:i.default.shape({route:i.default.object.isRequired}).isRequired},u.propTypes={children:i.default.node,location:i.default.object},t.default=u},"5925dad3c5243ffee3db":function(e,t){var n=e.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},"5975c7ea3ecd56e534e3":function(e,t,n){e.exports=!n("7a7739dd8a198a2cfcb5")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"5a3b914e449c6d95aadc":function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},"5abe37fc05566b7b9eff":function(e,t,n){var r=n("1139de1233fd67f45bd7").navigator;e.exports=r&&r.userAgent||""},"5b56f889e8364e6f86ab":function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},"5b9dc0e027f5c68eff1a":function(e,t,n){var r=n("1139de1233fd67f45bd7").document;e.exports=r&&r.documentElement},"5baa1143f58e62614ca0":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("4d073e2fededcdd3f3d3"),o=n("d394d0a4c1838202489d"),a=n("7a7739dd8a198a2cfcb5"),s=[].sort,c=[1,2,3];r(r.P+r.F*(a(function(){c.sort(void 0)})||!a(function(){c.sort(null)})||!n("40b064d4eb439c0c1c2b")(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},"5c5d334c57135891e397":function(e,t,n){"use strict";var r=n("ef09ce044ac3210bc947"),i=n("9d5592e83ab7f3d08974"),o=n("62828dc3ffa96c06b7c9"),a={};n("5f25c015bbbf9d42c661")(a,n("621a65702ee1a566fd32")("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},"5d829f854abca808c16c":function(e,t,n){n("9f769c6d0e4c9e82ba05")("WeakSet")},"5dd61c3148e8f3bbc5d7":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("2076e982c14c41925fb4")(!0);r(r.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("a5e6f0092ff0290e0bcf")("includes")},"5de5c65c2c431f821291":function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n("698d75b157f24ae829cc"))},"5e08439cbfed19129a22":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("ef09ce044ac3210bc947"),o=n("4d073e2fededcdd3f3d3"),a=n("79c91dcd8cd554c59c7b"),s=n("a459ab805827640a27e8"),c=n("7a7739dd8a198a2cfcb5"),u=n("d7134433f426bbf0c311"),l=(n("1139de1233fd67f45bd7").Reflect||{}).construct,h=c(function(){function e(){}return!(l(function(){},[],e)instanceof e)}),d=!c(function(){l(function(){})});r(r.S+r.F*(h||d),"Reflect",{construct:function(e,t){o(e),a(t);var n=arguments.length<3?e:o(arguments[2]);if(d&&!h)return l(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(u.apply(e,r))}var c=n.prototype,f=i(s(c)?c:Object.prototype),p=Function.apply.call(e,f,t);return s(p)?p:f}})},"5e294ff5186056b35d02":function(e,t,n){"use strict";var r=n("ea43fcdd13c8985f076e");e.exports=function e(t,n){return!(!t||!n)&&(t===n||!r(t)&&(r(n)?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}},"5e511fa944f88972e69c":function(e,t){!function(e){"use strict";if(!e.fetch){var t={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(t.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=function(e){return e&&DataView.prototype.isPrototypeOf(e)},i=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};l.prototype.append=function(e,t){e=s(e),t=c(t);var n=this.map[e];this.map[e]=n?n+","+t:t},l.prototype.delete=function(e){delete this.map[s(e)]},l.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},l.prototype.set=function(e,t){this.map[s(e)]=c(t)},l.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},l.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),u(e)},l.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),u(e)},l.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),u(e)},t.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries);var o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},m.call(v.prototype),m.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var a=[301,302,303,307,308];y.redirect=function(e,t){if(-1===a.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},e.Headers=l,e.Request=v,e.Response=y,e.fetch=function(e,n){return new Promise(function(r,i){var o=new v(e,n),a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:function(e){var t=new l;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;r(new y(t,e))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&t.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0}function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function c(e){return"string"!=typeof e&&(e=String(e)),e}function u(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(n[Symbol.iterator]=function(){return n}),n}function l(e){this.map={},e instanceof l?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function d(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function f(e){var t=new FileReader,n=d(t);return t.readAsArrayBuffer(e),n}function p(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(t.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(t.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(t.arrayBuffer&&t.blob&&r(e))this._bodyArrayBuffer=p(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!t.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!i(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=p(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=d(t);return t.readAsText(e),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}function v(e,t){var n=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=function(e){var t=e.toUpperCase();return o.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function g(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function y(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:this),e.exports=self.fetch},"5ef9de3df8d92ea0e41c":function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o=Object.defineProperty,a=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,l=u&&u(Object);e.exports=function e(t,n,h){if("string"!=typeof n){if(l){var d=u(n);d&&d!==l&&e(t,d,h)}var f=a(n);s&&(f=f.concat(s(n)));for(var p=0;p<f.length;++p){var m=f[p];if(!(r[m]||i[m]||h&&h[m])){var v=c(n,m);try{o(t,m,v)}catch(e){}}}return t}return t}},"5f25c015bbbf9d42c661":function(e,t,n){var r=n("1b01d0e59d3af79760a0"),i=n("9d5592e83ab7f3d08974");e.exports=n("5975c7ea3ecd56e534e3")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},"5f604e5c8e15a9c73536":function(e,t,n){var r=n("14462f9650d45fd47dc7"),i=n("79c91dcd8cd554c59c7b"),o=n("12323e1413cbffdabe02"),a=r.has,s=r.key,c=function(e,t,n){if(a(e,t,n))return!0;var r=o(t);return null!==r&&c(e,r,n)};r.exp({hasMetadata:function(e,t){return c(e,i(t),arguments.length<3?void 0:s(arguments[2]))}})},"5f6eded14a8ed86276fc":function(e,t,n){var r=n("43a62b7f9a94dda95bf8")("keys"),i=n("273d2eedcd369c189e70");e.exports=function(e){return r[e]||(r[e]=i(e))}},"5fa3f8487e09c6182715":function(e,t,n){var r=n("67042e57ad02a5947bc9"),i=n("f2ef6f6e544aad97aa22"),o=n("4b93c5a7bb60dd6ab0f4"),a="[object String]";e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&r(e)==a}},"5fd4d3d5ac2fe9bfd20e":function(e,t,n){var r=n("4133d6461867e9751fc3");e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},"61597e5c866e9f95c20b":function(e,t,n){"use strict";t.__esModule=!0;var r=n("8af190b70a6bc55c6f1b"),i=c(r),o=c(n("8a2d1b95e05b6a321e74")),a=n("999b8422c18ed8d20c8d"),s=n("2e20dfefd16154e6ed7b");function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=u(this,e.call.apply(e,[this].concat(o))),r.handleLocationChange=function(e){r.store.dispatch({type:s.LOCATION_CHANGE,payload:e})},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){var e=this.props,t=e.store,n=e.history,r=e.isSSR;this.store=t||this.context.store,this.handleLocationChange(n.location),r||(this.unsubscribeFromHistory=n.listen(this.handleLocationChange))},t.prototype.componentWillUnmount=function(){this.unsubscribeFromHistory&&this.unsubscribeFromHistory()},t.prototype.render=function(){return i.default.createElement(a.Router,this.props)},t}(r.Component);l.propTypes={store:o.default.object,history:o.default.object.isRequired,children:o.default.node,isSSR:o.default.bool},l.contextTypes={store:o.default.object},t.default=l},"615b8c1bc8c3f66221bc":function(e,t,n){"use strict";e.exports=n("46a1a30d151cac60057c")||!n("7a7739dd8a198a2cfcb5")(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n("1139de1233fd67f45bd7")[e]})},"61fcea04092a9580d371":function(e,t,n){var r=n("0091fa8d74c45e0dd589"),i=n("9d5592e83ab7f3d08974"),o=n("efae14a3f8cd9a616256"),a=n("4ef7a75a1d1957a7c5c0"),s=n("d34390b928ecadc11dc8"),c=n("bc1a333d2b6eceac22e3"),u=Object.getOwnPropertyDescriptor;t.f=n("5975c7ea3ecd56e534e3")?u:function(e,t){if(e=o(e),t=a(t,!0),c)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},"621a65702ee1a566fd32":function(e,t,n){var r=n("43a62b7f9a94dda95bf8")("wks"),i=n("273d2eedcd369c189e70"),o=n("1139de1233fd67f45bd7").Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},"622bea1a0aa515bde59f":function(e,t,n){for(var r,i=n("1139de1233fd67f45bd7"),o=n("5f25c015bbbf9d42c661"),a=n("273d2eedcd369c189e70"),s=a("typed_array"),c=a("view"),u=!(!i.ArrayBuffer||!i.DataView),l=u,h=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(r=i[d[h++]])?(o(r.prototype,s,!0),o(r.prototype,c,!0)):l=!1;e.exports={ABV:u,CONSTR:l,TYPED:s,VIEW:c}},"6251dc1015f605aa27c7":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Math",{fround:n("3cf3ac9966b923e35829")})},"62828dc3ffa96c06b7c9":function(e,t,n){var r=n("1b01d0e59d3af79760a0").f,i=n("d34390b928ecadc11dc8"),o=n("621a65702ee1a566fd32")("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},"637643d0c0e16de3ee55":function(e,t,n){"use strict";t.__esModule=!0,t.createMatchSelector=t.getLocation=void 0;var r=n("999b8422c18ed8d20c8d"),i=t.getLocation=function(e){return e.router.location};t.createMatchSelector=function(e){var t=null,n=null;return function(o){var a=(i(o)||{}).pathname;if(a===t)return n;t=a;var s=(0,r.matchPath)(a,e);return s&&n&&s.url===n.url||(n=s),n}}},"63f14ac74ce296f77f4d":function(e,t,n){"use strict";e.exports=n("70186e4579c0bd0af1db")},"64c9c4b07fb151f67f60":function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=u(n("8af190b70a6bc55c6f1b")),a=u(n("8a2d1b95e05b6a321e74")),s=u(n("f4443236244759f9cc1d")),c=u(n("c5dd00b0f3b91ce870bd"));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.to,n=e.exact,a=e.strict,u=e.location,l=e.activeClassName,h=e.className,d=e.activeStyle,f=e.style,p=e.isActive,m=e["aria-current"],v=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),g="object"===(void 0===t?"undefined":i(t))?t.pathname:t,y=g&&g.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1");return o.default.createElement(s.default,{path:y,exact:n,strict:a,location:u,children:function(e){var n=e.location,i=e.match,a=!!(p?p(i,n):i);return o.default.createElement(c.default,r({to:t,className:a?[h,l].filter(function(e){return e}).join(" "):h,style:a?r({},f,d):f,"aria-current":a&&m||null},v))}})};l.propTypes={to:c.default.propTypes.to,exact:a.default.bool,strict:a.default.bool,location:a.default.object,activeClassName:a.default.string,className:a.default.string,activeStyle:a.default.object,style:a.default.object,isActive:a.default.func,"aria-current":a.default.oneOf(["page","step","location","date","time","true"])},l.defaultProps={activeClassName:"active","aria-current":"page"},t.default=l},"654ecb2e7a4241ef8f08":function(e,t,n){"use strict";n("941df1c42d2f478ed942");var r=n("79c91dcd8cd554c59c7b"),i=n("f936413e306f54e59a2a"),o=n("5975c7ea3ecd56e534e3"),a=/./.toString,s=function(e){n("88db22626e6c88b175cf")(RegExp.prototype,"toString",e,!0)};n("7a7739dd8a198a2cfcb5")(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?s(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?i.call(e):void 0)}):"toString"!=a.name&&s(function(){return a.call(this)})},"65955717fc58c97d7378":function(e,t,n){var r=n("f3b0ff1628e56352bcbf"),i=n("f883c6a0eaee60a48ea0"),o=n("d3a850c4000d77bccc89"),a=n("cef4e105446199aaf71e"),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,l=c.toString,h=u.hasOwnProperty,d=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?d:s).test(a(e))}},"65bf45411dca6e57791d":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S+r.F*!n("5975c7ea3ecd56e534e3"),"Object",{defineProperty:n("1b01d0e59d3af79760a0").f})},"66914ad4ab026b9ba2e8":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("39dac2a92593ee9501cd");r(r.P+r.F*n("e5c4ff14bae25ddfa508")("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},"669a82d2d2cdff2f9f35":function(e,t,n){var r,i,o;i=[t,n("8af190b70a6bc55c6f1b"),n("8a2d1b95e05b6a321e74")],void 0===(o="function"==typeof(r=function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHasSupportToCaptureOption=c;var r=o(t),i=o(n);function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=!1;function c(e){s=e}try{addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){c(!0)}}))}catch(e){}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{capture:!0};return s?e:e.capture}function l(e){if("touches"in e){var t=e.touches[0],n=t.pageX,r=t.pageY;return{x:n,y:r}}var i=e.screenX,o=e.screenY;return{x:i,y:o}}var h=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return o._handleSwipeStart=o._handleSwipeStart.bind(o),o._handleSwipeMove=o._handleSwipeMove.bind(o),o._handleSwipeEnd=o._handleSwipeEnd.bind(o),o._onMouseDown=o._onMouseDown.bind(o),o._onMouseMove=o._onMouseMove.bind(o),o._onMouseUp=o._onMouseUp.bind(o),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.swiper&&this.swiper.addEventListener("touchmove",this._handleSwipeMove,u({capture:!0,passive:!1}))}},{key:"componentWillUnmount",value:function(){this.swiper&&this.swiper.removeEventListener("touchmove",this._handleSwipeMove,u({capture:!0,passive:!1}))}},{key:"_onMouseDown",value:function(e){this.props.allowMouseEvents&&(this.mouseDown=!0,document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("mousemove",this._onMouseMove),this._handleSwipeStart(e))}},{key:"_onMouseMove",value:function(e){this.mouseDown&&this._handleSwipeMove(e)}},{key:"_onMouseUp",value:function(e){this.mouseDown=!1,document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("mousemove",this._onMouseMove),this._handleSwipeEnd(e)}},{key:"_handleSwipeStart",value:function(e){var t=l(e),n=t.x,r=t.y;this.moveStart={x:n,y:r},this.props.onSwipeStart(e)}},{key:"_handleSwipeMove",value:function(e){if(this.moveStart){var t=l(e),n=t.x,r=t.y,i=n-this.moveStart.x,o=r-this.moveStart.y;this.moving=!0;var a=this.props.onSwipeMove({x:i,y:o},e);a&&e.preventDefault(),this.movePosition={deltaX:i,deltaY:o}}}},{key:"_handleSwipeEnd",value:function(e){this.props.onSwipeEnd(e);var t=this.props.tolerance;this.moving&&this.movePosition&&(this.movePosition.deltaX<-t?this.props.onSwipeLeft(1,e):this.movePosition.deltaX>t&&this.props.onSwipeRight(1,e),this.movePosition.deltaY<-t?this.props.onSwipeUp(1,e):this.movePosition.deltaY>t&&this.props.onSwipeDown(1,e)),this.moveStart=null,this.moving=!1,this.movePosition=null}},{key:"render",value:function(){var e=this;return r.default.createElement(this.props.tagName,{ref:function(t){return e.swiper=t},onMouseDown:this._onMouseDown,onTouchStart:this._handleSwipeStart,onTouchEnd:this._handleSwipeEnd,className:this.props.className,style:this.props.style},this.props.children)}}]),t}(t.Component);h.displayName="ReactSwipe",h.propTypes={tagName:i.default.string,className:i.default.string,style:i.default.object,children:i.default.node,allowMouseEvents:i.default.bool,onSwipeUp:i.default.func,onSwipeDown:i.default.func,onSwipeLeft:i.default.func,onSwipeRight:i.default.func,onSwipeStart:i.default.func,onSwipeMove:i.default.func,onSwipeEnd:i.default.func,tolerance:i.default.number.isRequired},h.defaultProps={tagName:"div",allowMouseEvents:!1,onSwipeUp:function(){},onSwipeDown:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){},tolerance:0},e.default=h})?r.apply(t,i):r)||(e.exports=o)},"67042e57ad02a5947bc9":function(e,t,n){var r=n("80e6088e4899523ce7ea"),i=n("83306aed22ee07ce18aa"),o=n("089f6438d068e21c2e37"),a="[object Null]",s="[object Undefined]",c=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:a:c&&c in Object(e)?i(e):o(e)}},"6735bdf1a3a541ab43fd":function(e,t,n){var r=n("01a9501d9e4a26a76a44");"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n("1e4534d1d62a11482e97")(r,i);r.locals&&(e.exports=r.locals)},"6857028c584e68dfacd6":function(e,t,n){n("ccf79254fef1a499b486")("WeakMap")},"68a989d6f90923909f2a":function(e,t,n){var r=n("a459ab805827640a27e8"),i=n("1139de1233fd67f45bd7").document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},"68a9e58f394bd4c836d2":function(e,t,n){"use strict";var r=n("ec9de96ce27c00ac79c5");r=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0,o="Warning: "+e.replace(/%s/g,function(){return n[i++]});"undefined"!=typeof console&&console.error(o);try{throw new Error(o)}catch(e){}}).apply(void 0,[t].concat(r))}},e.exports=r},"693c9c0dfc6db2b00620":function(e,t,n){var r=n("0116c75136b233002fb9");e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},"698d75b157f24ae829cc":function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"6a4f9c383785f9168266":function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(void 0===t)throw new Error("invariant requires an error message argument");if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],l=0;(c=new Error(t.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}},"6ad07de816cfee1e2bda":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},"6ae198bd7922e25e2128":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("770f76c876afc046e4e0")(!0);r(r.P,"String",{at:function(e){return i(this,e)}})},"6ae9955278ddcf01bbfd":function(e,t,n){var r=n("a459ab805827640a27e8"),i=n("8f648b1026e01323935b"),o=n("621a65702ee1a566fd32")("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},"6c07e9b5d58510c21784":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("1ae513448994dc2a1e86");r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},"6d6f766831bb1cf8facf":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},"6d7c634dd1858355953f":function(e,t,n){"use strict";n("03ba1ede2f4706d1e7f7")("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},"6d8be12a50447a7c97b1":function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"6d98b32f91eb8777ca21":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.P,"Function",{bind:n("d7134433f426bbf0c311")})},"70186e4579c0bd0af1db":function(e,t,n){"use strict";
/** @license React v16.4.1
 * react-dom.development.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var t=n("277cfc1331526160cbd4"),r=n("8af190b70a6bc55c6f1b"),i=n("68a9e58f394bd4c836d2"),o=n("7c757e9b280b4a302846"),a=n("83406643bfb209d249f4"),s=n("ec9de96ce27c00ac79c5"),c=n("d5aa26791992324990d2"),u=n("f7ee588e96ed47a6425e"),l=n("57f97042002e57c90c3d"),h=n("5e294ff5186056b35d02"),d=n("bef911c5daed007bb174"),f=n("4b277a517db3f3e840ae"),p=n("ef3fd6154f7e5f8801e4");r||t(!1,"ReactDOM was loaded before React. Make sure you load the React package before loading ReactDOM.");var m=function(e,t,n,r,i,o,a,s,c){this._hasCaughtError=!1,this._caughtError=null;var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this._caughtError=e,this._hasCaughtError=!0}};if("undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var v=document.createElement("react");m=function(e,n,r,i,o,a,s,c,u){"undefined"==typeof document&&t(!1,"The `document` global was defined when React was initialized, but is not defined anymore. This can happen in a test environment if a component schedules an update from an asynchronous callback, but the test has already finished running. To solve this, you can either unmount the component at the end of your test (and ensure that any asynchronous operations get canceled in `componentWillUnmount`), or you can change the test itself to be asynchronous.");var l=document.createEvent("Event"),h=!0,d=Array.prototype.slice.call(arguments,3);var f=void 0,p=!1,m=!1;function g(e){f=e.error,p=!0,null===f&&0===e.colno&&0===e.lineno&&(m=!0)}var y="react-"+(e||"invokeguardedcallback");window.addEventListener("error",g),v.addEventListener(y,function e(){v.removeEventListener(y,e,!1),n.apply(r,d),h=!1},!1),l.initEvent(y,!1,!1),v.dispatchEvent(l),h?(p?m&&(f=new Error("A cross-origin error was thrown. React doesn't have access to the actual error object in development. See https://fb.me/react-crossorigin-error for more information.")):f=new Error("An error was thrown inside one of your components, but React doesn't know what it was. This is likely due to browser flakiness. React does its best to preserve the \"Pause on exceptions\" behavior of the DevTools, which requires some DEV-mode only tricks. It's possible that these don't work in your browser. Try triggering the error in production mode, or switching to a modern browser. If you suspect that this is actually an issue with React, please file an issue."),this._hasCaughtError=!0,this._caughtError=f):(this._hasCaughtError=!1,this._caughtError=null),window.removeEventListener("error",g)}}var g=m,y={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(e,t,n,r,i,o,a,s,c){g.apply(y,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,i,o,a,s,c){if(y.invokeGuardedCallback.apply(this,arguments),y.hasCaughtError()){var u=y.clearCaughtError();y._hasRethrowError||(y._hasRethrowError=!0,y._rethrowError=u)}},rethrowCaughtError:function(){return b.apply(y,arguments)},hasCaughtError:function(){return y._hasCaughtError},clearCaughtError:function(){if(y._hasCaughtError){var e=y._caughtError;return y._caughtError=null,y._hasCaughtError=!1,e}t(!1,"clearCaughtError was called but no error was captured. This error is likely caused by a bug in React. Please file an issue.")}},b=function(){if(y._hasRethrowError){var e=y._rethrowError;throw y._rethrowError=null,y._hasRethrowError=!1,e}},x=null,w={};function _(){if(x)for(var e in w){var n=w[e],r=x.indexOf(e);if(r>-1||t(!1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",e),!T[r]){n.extractEvents||t(!1,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",e),T[r]=n;var i=n.eventTypes;for(var o in i)S(i[o],n,o)||t(!1,"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",o,e)}}}function S(e,n,r){A.hasOwnProperty(r)&&t(!1,"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",r),A[r]=e;var i=e.phasedRegistrationNames;if(i){for(var o in i){if(i.hasOwnProperty(o))M(i[o],n,r)}return!0}return!!e.registrationName&&(M(e.registrationName,n,r),!0)}function M(e,n,r){E[e]&&t(!1,"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",e),E[e]=n,C[e]=n.eventTypes[r].dependencies;var i=e.toLowerCase();P[i]=e,"onDoubleClick"===e&&(P.ondblclick=e)}var T=[],A={},E={},C={},P={};function L(e){x&&t(!1,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."),x=Array.prototype.slice.call(e),_()}function O(e){var n=!1;for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];w.hasOwnProperty(r)&&w[r]===i||(w[r]&&t(!1,"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",r),w[r]=i,n=!0)}n&&_()}var N=Object.freeze({plugins:T,eventNameDispatchConfigs:A,registrationNameModules:E,registrationNameDependencies:C,possibleRegistrationNames:P,injectEventPluginOrder:L,injectEventPluginsByName:O}),R=null,I=null,D=null,F=function(e){R=e.getFiberCurrentPropsFromNode,I=e.getInstanceFromNode,(D=e.getNodeFromInstance)&&I||i(!1,"EventPluginUtils.injection.injectComponentTree(...): Injected module is missing getNodeFromInstance or getInstanceFromNode.")},k=void 0;function U(e,t,n,r){var i=e.type||"unknown-event";e.currentTarget=D(r),y.invokeGuardedCallbackAndCatchFirstError(i,n,void 0,e),e.currentTarget=null}function B(e,n){return null==n&&t(!1,"accumulateInto(...): Accumulated items must not be null or undefined."),null==e?n:Array.isArray(e)?Array.isArray(n)?(e.push.apply(e,n),e):(e.push(n),e):Array.isArray(n)?[e].concat(n):[e,n]}function z(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}k=function(e){var t=e._dispatchListeners,n=e._dispatchInstances,r=Array.isArray(t),o=r?t.length:t?1:0,a=Array.isArray(n),s=a?n.length:n?1:0;(a!==r||s!==o)&&i(!1,"EventPluginUtils: Invalid `event`.")};var j=null,V=function(e,t){e&&(!function(e,t){var n=e._dispatchListeners,r=e._dispatchInstances;if(k(e),Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)U(e,0,n[i],r[i]);else n&&U(e,0,n,r);e._dispatchListeners=null,e._dispatchInstances=null}(e),e.isPersistent()||e.constructor.release(e))},G=function(e){return V(e)},W=function(e){return V(e)};var H={injectEventPluginOrder:L,injectEventPluginsByName:O};function X(e,n){var r,i=e.stateNode;if(!i)return null;var o=R(i);return o?(r=o[n],function(e,t,n){switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||!function(e){return"button"===e||"input"===e||"select"===e||"textarea"===e}(t));default:return!1}}(n,e.type,o)?null:(r&&"function"!=typeof r&&t(!1,"Expected `%s` listener to be a function, instead got a value of `%s` type.",n,typeof r),r)):null}function q(e,n){null!==e&&(j=B(j,e));var r=j;j=null,r&&(z(r,n?G:W),j&&t(!1,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented."),y.rethrowCaughtError())}function Y(e,t,n,r){q(function(e,t,n,r){for(var i=null,o=0;o<T.length;o++){var a=T[o];if(a){var s=a.extractEvents(e,t,n,r);s&&(i=B(i,s))}}return i}(e,t,n,r),!1)}var J=Object.freeze({injection:H,getListener:X,runEventsInBatch:q,runExtractedEventsInBatch:Y}),Q=0,Z=1,K=2,$=3,ee=4,te=5,ne=6,re=10,ie=11,oe=12,ae=13,se=14,ce=15,ue=16,le=Math.random().toString(36).slice(2),he="__reactInternalInstance$"+le,de="__reactEventHandlers$"+le;function fe(e,t){t[he]=e}function pe(e){if(e[he])return e[he];for(;!e[he];){if(!e.parentNode)return null;e=e.parentNode}var t=e[he];return t.tag===te||t.tag===ne?t:null}function me(e){var t=e[he];return t&&(t.tag===te||t.tag===ne)?t:null}function ve(e){if(e.tag===te||e.tag===ne)return e.stateNode;t(!1,"getNodeFromInstance: Invalid argument.")}function ge(e){return e[de]||null}function ye(e,t){e[de]=t}var be=Object.freeze({precacheFiberNode:fe,getClosestInstanceFromNode:pe,getInstanceFromNode:me,getNodeFromInstance:ve,getFiberCurrentPropsFromNode:ge,updateFiberProps:ye});function xe(e){do{e=e.return}while(e&&e.tag!==te);return e||null}function we(e,t,n){for(var r=[];e;)r.push(e),e=xe(e);var i=void 0;for(i=r.length;i-- >0;)t(r[i],"captured",n);for(i=0;i<r.length;i++)t(r[i],"bubbled",n)}function _e(e,t,n,r,i){for(var o=e&&t?function(e,t){for(var n=0,r=e;r;r=xe(r))n++;for(var i=0,o=t;o;o=xe(o))i++;for(;n-i>0;)e=xe(e),n--;for(;i-n>0;)t=xe(t),i--;for(var a=n;a--;){if(e===t||e===t.alternate)return e;e=xe(e),t=xe(t)}return null}(e,t):null,a=[];e&&e!==o;){var s=e.alternate;if(null!==s&&s===o)break;a.push(e),e=xe(e)}for(var c=[];t&&t!==o;){var u=t.alternate;if(null!==u&&u===o)break;c.push(t),t=xe(t)}for(var l=0;l<a.length;l++)n(a[l],"bubbled",r);for(var h=c.length;h-- >0;)n(c[h],"captured",i)}function Se(e,t,n){e||i(!1,"Dispatching inst must not be null");var r=function(e,t,n){return X(e,t.dispatchConfig.phasedRegistrationNames[n])}(e,n,t);r&&(n._dispatchListeners=B(n._dispatchListeners,r),n._dispatchInstances=B(n._dispatchInstances,e))}function Me(e){e&&e.dispatchConfig.phasedRegistrationNames&&we(e._targetInst,Se,e)}function Te(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;we(t?function(e){return xe(e)}(t):null,Se,e)}}function Ae(e,t,n){if(e&&n&&n.dispatchConfig.registrationName){var r=X(e,n.dispatchConfig.registrationName);r&&(n._dispatchListeners=B(n._dispatchListeners,r),n._dispatchInstances=B(n._dispatchInstances,e))}}function Ee(e){e&&e.dispatchConfig.registrationName&&Ae(e._targetInst,0,e)}function Ce(e){z(e,Me)}function Pe(e,t,n,r){_e(n,r,Ae,e,t)}var Le=Object.freeze({accumulateTwoPhaseDispatches:Ce,accumulateTwoPhaseDispatchesSkipTarget:function(e){z(e,Te)},accumulateEnterLeaveDispatches:Pe,accumulateDirectDispatches:function(e){z(e,Ee)}});function Oe(e){return e}function Ne(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}var Re={animationend:Ne("Animation","AnimationEnd"),animationiteration:Ne("Animation","AnimationIteration"),animationstart:Ne("Animation","AnimationStart"),transitionend:Ne("Transition","TransitionEnd")},Ie={},De={};function Fe(e){if(Ie[e])return Ie[e];if(!Re[e])return e;var t=Re[e];for(var n in t)if(t.hasOwnProperty(n)&&n in De)return Ie[e]=t[n];return e}o.canUseDOM&&(De=document.createElement("div").style,"AnimationEvent"in window||(delete Re.animationend.animation,delete Re.animationiteration.animation,delete Re.animationstart.animation),"TransitionEvent"in window||delete Re.transitionend.transition);var ke=Oe("abort"),Ue=Oe(Fe("animationend")),Be=Oe(Fe("animationiteration")),ze=Oe(Fe("animationstart")),je=Oe("blur"),Ve=Oe("canplay"),Ge=Oe("canplaythrough"),We=Oe("cancel"),He=Oe("change"),Xe=Oe("click"),qe=Oe("close"),Ye=Oe("compositionend"),Je=Oe("compositionstart"),Qe=Oe("compositionupdate"),Ze=Oe("contextmenu"),Ke=Oe("copy"),$e=Oe("cut"),et=Oe("dblclick"),tt=Oe("drag"),nt=Oe("dragend"),rt=Oe("dragenter"),it=Oe("dragexit"),ot=Oe("dragleave"),at=Oe("dragover"),st=Oe("dragstart"),ct=Oe("drop"),ut=Oe("durationchange"),lt=Oe("emptied"),ht=Oe("encrypted"),dt=Oe("ended"),ft=Oe("error"),pt=Oe("focus"),mt=Oe("gotpointercapture"),vt=Oe("input"),gt=Oe("invalid"),yt=Oe("keydown"),bt=Oe("keypress"),xt=Oe("keyup"),wt=Oe("load"),_t=Oe("loadstart"),St=Oe("loadeddata"),Mt=Oe("loadedmetadata"),Tt=Oe("lostpointercapture"),At=Oe("mousedown"),Et=Oe("mousemove"),Ct=Oe("mouseout"),Pt=Oe("mouseover"),Lt=Oe("mouseup"),Ot=Oe("paste"),Nt=Oe("pause"),Rt=Oe("play"),It=Oe("playing"),Dt=Oe("pointercancel"),Ft=Oe("pointerdown"),kt=Oe("pointermove"),Ut=Oe("pointerout"),Bt=Oe("pointerover"),zt=Oe("pointerup"),jt=Oe("progress"),Vt=Oe("ratechange"),Gt=Oe("reset"),Wt=Oe("scroll"),Ht=Oe("seeked"),Xt=Oe("seeking"),qt=Oe("selectionchange"),Yt=Oe("stalled"),Jt=Oe("submit"),Qt=Oe("suspend"),Zt=Oe("textInput"),Kt=Oe("timeupdate"),$t=Oe("toggle"),en=Oe("touchcancel"),tn=Oe("touchend"),nn=Oe("touchmove"),rn=Oe("touchstart"),on=Oe(Fe("transitionend")),an=Oe("volumechange"),sn=Oe("waiting"),cn=Oe("wheel"),un=[ke,Ve,Ge,ut,lt,ht,dt,ft,St,Mt,_t,Nt,Rt,It,jt,Vt,Ht,Xt,Yt,Qt,Kt,an,sn];function ln(e){return function(e){return e}(e)}var hn=null;function dn(){return!hn&&o.canUseDOM&&(hn="textContent"in document.documentElement?"textContent":"innerText"),hn}var fn={_root:null,_startText:null,_fallbackText:null};function pn(){if(fn._fallbackText)return fn._fallbackText;var e=void 0,t=fn._startText,n=t.length,r=void 0,i=mn(),o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);var s=r>1?1-r:void 0;return fn._fallbackText=i.slice(e,s),fn._fallbackText}function mn(){return"value"in fn._root?fn._root.value:fn._root[dn()]}var vn=!1,gn=10,yn=["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"],bn={type:null,target:null,currentTarget:s.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function xn(e,t,n,r){delete this.nativeEvent,delete this.preventDefault,delete this.stopPropagation,this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var i=this.constructor.Interface;for(var o in i)if(i.hasOwnProperty(o)){delete this[o];var a=i[o];a?this[o]=a(n):"target"===o?this.target=r:this[o]=n[o]}var c=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;return this.isDefaultPrevented=c?s.thatReturnsTrue:s.thatReturnsFalse,this.isPropagationStopped=s.thatReturnsFalse,this}function wn(e,t){var n="function"==typeof t;return{configurable:!0,set:function(e){return r(n?"setting the method":"setting the property","This is effectively a no-op"),e},get:function(){return r(n?"accessing the method":"accessing the property",n?"This is a no-op function":"This is set to null"),t}};function r(t,n){i(!1,"This synthetic event is reused for performance reasons. If you're seeing this, you're %s `%s` on a released/nullified synthetic event. %s. If you must keep the original synthetic event around, use event.persist(). See https://fb.me/react-event-pooling for more information.",t,e,n)}}function _n(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Sn(e){e instanceof this||t(!1,"Trying to release an event instance  into a pool of a different type."),e.destructor(),this.eventPool.length<gn&&this.eventPool.push(e)}function Mn(e){e.eventPool=[],e.getPooled=_n,e.release=Sn}a(xn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=s.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=s.thatReturnsTrue)},persist:function(){this.isPersistent=s.thatReturnsTrue},isPersistent:s.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)Object.defineProperty(this,t,wn(t,e[t]));for(var n=0;n<yn.length;n++)this[yn[n]]=null;Object.defineProperty(this,"nativeEvent",wn("nativeEvent",null)),Object.defineProperty(this,"preventDefault",wn("preventDefault",s)),Object.defineProperty(this,"stopPropagation",wn("stopPropagation",s))}}),xn.Interface=bn,xn.extend=function(e){var t=this,n=function(){};n.prototype=t.prototype;var r=new n;function i(){return t.apply(this,arguments)}return a(r,i.prototype),i.prototype=r,i.prototype.constructor=i,i.Interface=a({},t.Interface,e),i.extend=t.extend,Mn(i),i},"function"==typeof Proxy&&!Object.isSealed(new Proxy({},{}))&&(xn=new Proxy(xn,{construct:function(e,t){return this.apply(e,Object.create(e.prototype),t)},apply:function(e,t,n){return new Proxy(e.apply(t,n),{set:function(e,t,n){return"isPersistent"===t||e.constructor.Interface.hasOwnProperty(t)||-1!==yn.indexOf(t)||(vn||e.isPersistent()||i(!1,"This synthetic event is reused for performance reasons. If you're seeing this, you're adding a new property in the synthetic event object. The property is never released. See https://fb.me/react-event-pooling for more information."),vn=!0),e[t]=n,!0}})}})),Mn(xn);var Tn=xn,An=Tn.extend({data:null}),En=Tn.extend({data:null}),Cn=[9,13,27,32],Pn=229,Ln=o.canUseDOM&&"CompositionEvent"in window,On=null;o.canUseDOM&&"documentMode"in document&&(On=document.documentMode);var Nn=o.canUseDOM&&"TextEvent"in window&&!On,Rn=o.canUseDOM&&(!Ln||On&&On>8&&On<=11),In=32,Dn=String.fromCharCode(In),Fn={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:[Ye,bt,Zt,Ot]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:[je,Ye,yt,bt,xt,At]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:[je,Je,yt,bt,xt,At]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:[je,Qe,yt,bt,xt,At]}},kn=!1;function Un(e,t){switch(e){case xt:return-1!==Cn.indexOf(t.keyCode);case yt:return t.keyCode!==Pn;case bt:case At:case je:return!0;default:return!1}}function Bn(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}var zn=!1;function jn(e,t,n,r){var i=void 0,o=void 0;if(Ln?i=function(e){switch(e){case Je:return Fn.compositionStart;case Ye:return Fn.compositionEnd;case Qe:return Fn.compositionUpdate}}(e):zn?Un(e,n)&&(i=Fn.compositionEnd):function(e,t){return e===yt&&t.keyCode===Pn}(e,n)&&(i=Fn.compositionStart),!i)return null;Rn&&(zn||i!==Fn.compositionStart?i===Fn.compositionEnd&&zn&&(o=pn()):zn=function(e){return fn._root=e,fn._startText=mn(),!0}(r));var a=An.getPooled(i,t,n,r);if(o)a.data=o;else{var s=Bn(n);null!==s&&(a.data=s)}return Ce(a),a}function Vn(e,t){if(zn){if(e===Ye||!Ln&&Un(e,t)){var n=pn();return fn._root=null,fn._startText=null,fn._fallbackText=null,zn=!1,n}return null}switch(e){case Ot:return null;case bt:if(!function(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}(t)){if(t.char&&t.char.length>1)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case Ye:return Rn?null:t.data;default:return null}}function Gn(e,t,n,r){var i=void 0;if(!(i=Nn?function(e,t){switch(e){case Ye:return Bn(t);case bt:return t.which!==In?null:(kn=!0,Dn);case Zt:var n=t.data;return n===Dn&&kn?null:n;default:return null}}(e,n):Vn(e,n)))return null;var o=En.getPooled(Fn.beforeInput,t,n,r);return o.data=i,Ce(o),o}var Wn={eventTypes:Fn,extractEvents:function(e,t,n,r){var i=jn(e,t,n,r),o=Gn(e,t,n,r);return null===i?o:null===o?i:[i,o]}},Hn=null,Xn=null,qn=null;function Yn(e){var n=I(e);if(n){Hn&&"function"==typeof Hn.restoreControlledState||t(!1,"Fiber needs to be injected to handle a fiber target for controlled events. This error is likely caused by a bug in React. Please file an issue.");var r=R(n.stateNode);Hn.restoreControlledState(n.stateNode,n.type,r)}}var Jn={injectFiberControlledHostComponent:function(e){Hn=e}};function Qn(e){Xn?qn?qn.push(e):qn=[e]:Xn=e}function Zn(){return null!==Xn||null!==qn}function Kn(){if(Xn){var e=Xn,t=qn;if(Xn=null,qn=null,Yn(e),t)for(var n=0;n<t.length;n++)Yn(t[n])}}var $n=Object.freeze({injection:Jn,enqueueStateRestore:Qn,needsStateRestore:Zn,restoreStateIfNeeded:Kn}),er=function(e,t){return e(t)},tr=function(e,t,n){return e(t,n)},nr=function(){},rr=!1;function ir(e,t){if(rr)return e(t);rr=!0;try{return er(e,t)}finally{rr=!1,Zn()&&(nr(),Kn())}}var or=function(e){er=e.batchedUpdates,tr=e.interactiveUpdates,nr=e.flushInteractiveUpdates},ar={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ar[e.type]:"textarea"===t}var cr=1,ur=3,lr=8,hr=9,dr=11;function fr(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===ur?t.parentNode:t}
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function pr(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r="function"==typeof i[n]}return r}function mr(e){var t=e.type,n=e.nodeName;return n&&"input"===n.toLowerCase()&&("checkbox"===t||"radio"===t)}function vr(e){return e._valueTracker}function gr(e){vr(e)||(e._valueTracker=function(e){var t=mr(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){!function(e){e._valueTracker=null}(e),delete e[t]}}}}(e))}function yr(e){if(!e)return!1;var t=vr(e);if(!t)return!0;var n=t.getValue(),r=function(e){var t="";return e?t=mr(e)?e.checked?"true":"false":e.value:t}(e);return r!==n&&(t.setValue(r),!0)}var br=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xr=br.ReactCurrentOwner,wr=br.ReactDebugCurrentFrame,_r=function(e,t,n){return"\n    in "+(e||"Unknown")+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":n?" (created by "+n+")":"")},Sr="function"==typeof Symbol&&Symbol.for,Mr=Sr?Symbol.for("react.element"):60103,Tr=Sr?Symbol.for("react.portal"):60106,Ar=Sr?Symbol.for("react.fragment"):60107,Er=Sr?Symbol.for("react.strict_mode"):60108,Cr=Sr?Symbol.for("react.profiler"):60114,Pr=Sr?Symbol.for("react.provider"):60109,Lr=Sr?Symbol.for("react.context"):60110,Or=Sr?Symbol.for("react.async_mode"):60111,Nr=Sr?Symbol.for("react.forward_ref"):60112,Rr=Sr?Symbol.for("react.timeout"):60113,Ir="function"==typeof Symbol&&Symbol.iterator,Dr="@@iterator";function Fr(e){if(null===e||void 0===e)return null;var t=Ir&&e[Ir]||e[Dr];return"function"==typeof t?t:null}function kr(e){var t=e.type;if("function"==typeof t)return t.displayName||t.name;if("string"==typeof t)return t;switch(t){case Or:return"AsyncMode";case Lr:return"Context.Consumer";case Ar:return"ReactFragment";case Tr:return"ReactPortal";case Cr:return"Profiler("+e.pendingProps.id+")";case Pr:return"Context.Provider";case Er:return"StrictMode";case Rr:return"Timeout"}if("object"==typeof t&&null!==t)switch(t.$$typeof){case Nr:var n=t.render.displayName||t.render.name||"";return""!==n?"ForwardRef("+n+")":"ForwardRef"}return null}function Ur(e){switch(e.tag){case Q:case Z:case K:case te:var t=e._debugOwner,n=e._debugSource,r=kr(e),i=null;return t&&(i=kr(t)),_r(r,n,i);default:return""}}function Br(e){var t="",n=e;do{t+=Ur(n),n=n.return}while(n);return t}function zr(){var e=jr.current;return null===e?null:Br(e)}var jr={current:null,phase:null,resetCurrentFiber:function(){wr.getCurrentStack=null,jr.current=null,jr.phase=null},setCurrentFiber:function(e){wr.getCurrentStack=zr,jr.current=e,jr.phase=null},setCurrentPhase:function(e){jr.phase=e},getCurrentFiberOwnerName:function(){var e=jr.current;if(null===e)return null;var t=e._debugOwner;return null!==t&&void 0!==t?kr(t):null},getCurrentFiberStackAddendum:zr},Vr=0,Gr=2,Wr=3,Hr=4,Xr=5,qr=6,Yr=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Jr=Yr+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Qr="data-reactroot",Zr=new RegExp("^["+Yr+"]["+Jr+"]*$"),Kr={},$r={};function ei(e){return!!$r.hasOwnProperty(e)||!Kr.hasOwnProperty(e)&&(Zr.test(e)?($r[e]=!0,!0):(Kr[e]=!0,i(!1,"Invalid attribute name: `%s`",e),!1))}function ti(e,t,n){return null!==t?t.type===Vr:!n&&(e.length>2&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))}function ni(e,t,n,r){if(null!==n&&n.type===Vr)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":if(r)return!1;if(null!==n)return!n.acceptsBooleans;var i=e.toLowerCase().slice(0,5);return"data-"!==i&&"aria-"!==i;default:return!1}}function ri(e,t,n,r){if(null===t||void 0===t)return!0;if(ni(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case Wr:return!t;case Hr:return!1===t;case Xr:return isNaN(t);case qr:return isNaN(t)||t<1}return!1}function ii(e){return ai.hasOwnProperty(e)?ai[e]:null}function oi(e,t,n,r,i){this.acceptsBooleans=t===Gr||t===Wr||t===Hr,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var ai={};["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"].forEach(function(e){ai[e]=new oi(e,Vr,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0],n=e[1];ai[t]=new oi(t,1,!1,n,null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ai[e]=new oi(e,Gr,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(e){ai[e]=new oi(e,Gr,!1,e,null)}),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(function(e){ai[e]=new oi(e,Wr,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){ai[e]=new oi(e,Wr,!0,e.toLowerCase(),null)}),["capture","download"].forEach(function(e){ai[e]=new oi(e,Hr,!1,e.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(e){ai[e]=new oi(e,qr,!1,e.toLowerCase(),null)}),["rowSpan","start"].forEach(function(e){ai[e]=new oi(e,Xr,!1,e.toLowerCase(),null)});var si=/[\-\:]([a-z])/g,ci=function(e){return e[1].toUpperCase()};function ui(e,t,n,r){if(r.mustUseProperty)return e[r.propertyName];var i=r.attributeName,o=null;if(r.type===Hr){if(e.hasAttribute(i)){var a=e.getAttribute(i);return""===a||(ri(t,n,r,!1)?a:a===""+n?n:a)}}else if(e.hasAttribute(i)){if(ri(t,n,r,!1))return e.getAttribute(i);if(r.type===Wr)return n;o=e.getAttribute(i)}return ri(t,n,r,!1)?null===o?n:o:o===""+n?n:o}function li(e,t,n){if(ei(t)){if(!e.hasAttribute(t))return void 0===n?void 0:null;var r=e.getAttribute(t);return r===""+n?n:r}}function hi(e,t,n,r){var i=ii(t);if(!ti(t,i,r))if(ri(t,n,i,r)&&(n=null),r||null===i){if(ei(t)){var o=t;null===n?e.removeAttribute(o):e.setAttribute(o,""+n)}}else if(i.mustUseProperty){var a=i.propertyName;if(null===n){var s=i.type;e[a]=s!==Wr&&""}else e[a]=n}else{var c=i.attributeName,u=i.attributeNamespace;if(null===n)e.removeAttribute(c);else{var l=i.type,h=void 0;h=l===Wr||l===Hr&&!0===n?"":""+n,u?e.setAttributeNS(u,c,h):e.setAttribute(c,h)}}}["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(function(e){var t=e.replace(si,ci);ai[t]=new oi(t,1,!1,e,null)}),["xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(function(e){var t=e.replace(si,ci);ai[t]=new oi(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(si,ci);ai[t]=new oi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),ai.tabIndex=new oi("tabIndex",1,!1,"tabindex",null);var di={checkPropTypes:null},fi={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},pi={value:function(e,t,n){return!e[t]||fi[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")}};di.checkPropTypes=function(e,t,n){c(pi,t,"prop",e,n)};var mi=jr.getCurrentFiberOwnerName,vi=jr.getCurrentFiberStackAddendum,gi=!1,yi=!1,bi=!1,xi=!1;function wi(e){return"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}function _i(e,t){var n=e,r=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:n._wrapperState.initialChecked})}function Si(e,t){di.checkPropTypes("input",t,vi),void 0===t.checked||void 0===t.defaultChecked||yi||(i(!1,"%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://fb.me/react-controlled-components",mi()||"A component",t.type),yi=!0),void 0===t.value||void 0===t.defaultValue||gi||(i(!1,"%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://fb.me/react-controlled-components",mi()||"A component",t.type),gi=!0);var n=e,r=null==t.defaultValue?"":t.defaultValue;n._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:Pi(null!=t.value?t.value:r),controlled:wi(t)}}function Mi(e,t){var n=e,r=t.checked;null!=r&&hi(n,"checked",r,!1)}function Ti(e,t){var n=e,r=wi(t);n._wrapperState.controlled||!r||xi||(i(!1,"A component is changing an uncontrolled input of type %s to be controlled. Input elements should not switch from uncontrolled to controlled (or vice versa). Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://fb.me/react-controlled-components%s",t.type,vi()),xi=!0),!n._wrapperState.controlled||r||bi||(i(!1,"A component is changing a controlled input of type %s to be uncontrolled. Input elements should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://fb.me/react-controlled-components%s",t.type,vi()),bi=!0),Mi(e,t);var o=Pi(t.value);null!=o&&("number"===t.type?(0===o&&""===n.value||n.value!=o)&&(n.value=""+o):n.value!==""+o&&(n.value=""+o)),t.hasOwnProperty("value")?Ci(n,t.type,o):t.hasOwnProperty("defaultValue")&&Ci(n,t.type,Pi(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(n.defaultChecked=!!t.defaultChecked)}function Ai(e,t,n){var r=e;if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=""+r._wrapperState.initialValue,o=r.value;n||i!==o&&(r.value=i),r.defaultValue=i}var a=r.name;""!==a&&(r.name=""),r.defaultChecked=!r.defaultChecked,r.defaultChecked=!r.defaultChecked,""!==a&&(r.name=a)}function Ei(e,n){var r=e;Ti(r,n),function(e,n){var r=n.name;if("radio"===n.type&&null!=r){for(var i=e;i.parentNode;)i=i.parentNode;for(var o=i.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),a=0;a<o.length;a++){var s=o[a];if(s!==e&&s.form===e.form){var c=ge(s);c||t(!1,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported."),yr(s),Ti(s,c)}}}}(r,n)}function Ci(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Pi(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}var Li={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:[je,He,Xe,pt,vt,yt,xt,qt]}};function Oi(e,t,n){var r=Tn.getPooled(Li.change,e,t,n);return r.type="change",Qn(n),Ce(r),r}var Ni=null,Ri=null;function Ii(e){q(e,!1)}function Di(e){if(yr(ve(e)))return e}function Fi(e,t){if(e===He)return t}var ki=!1;function Ui(){Ni&&(Ni.detachEvent("onpropertychange",Bi),Ni=null,Ri=null)}function Bi(e){"value"===e.propertyName&&Di(Ri)&&function(e){ir(Ii,Oi(Ri,e,fr(e)))}(e)}function zi(e,t,n){e===pt?(Ui(),function(e,t){Ri=t,(Ni=e).attachEvent("onpropertychange",Bi)}(t,n)):e===je&&Ui()}function ji(e,t){if(e===qt||e===xt||e===yt)return Di(Ri)}function Vi(e,t){if(e===Xe)return Di(t)}function Gi(e,t){if(e===vt||e===He)return Di(t)}o.canUseDOM&&(ki=pr("input")&&(!document.documentMode||document.documentMode>9));var Wi={eventTypes:Li,_isInputEventSupported:ki,extractEvents:function(e,t,n,r){var i=t?ve(t):window,o=void 0,a=void 0;if(!function(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}(i)?sr(i)?ki?o=Gi:(o=ji,a=zi):function(e){var t=e.nodeName;return t&&"input"===t.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}(i)&&(o=Vi):o=Fi,o){var s=o(e,t);if(s)return Oi(s,n,r)}a&&a(e,i,t),e===je&&function(e){var t=e._wrapperState;t&&t.controlled&&"number"===e.type&&Ci(e,"number",e.value)}(i)}},Hi=Tn.extend({view:null,detail:null}),Xi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qi(e){var t=this.nativeEvent;if(t.getModifierState)return t.getModifierState(e);var n=Xi[e];return!!n&&!!t[n]}function Yi(e){return qi}var Ji=Hi.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Yi,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}}),Qi=Ji.extend({pointerId:null,width:null,height:null,pressure:null,tiltX:null,tiltY:null,pointerType:null,isPrimary:null}),Zi={mouseEnter:{registrationName:"onMouseEnter",dependencies:[Ct,Pt]},mouseLeave:{registrationName:"onMouseLeave",dependencies:[Ct,Pt]},pointerEnter:{registrationName:"onPointerEnter",dependencies:[Ut,Bt]},pointerLeave:{registrationName:"onPointerLeave",dependencies:[Ut,Bt]}},Ki={eventTypes:Zi,extractEvents:function(e,t,n,r){var i=e===Pt||e===Bt,o=e===Ct||e===Ut;if(i&&(n.relatedTarget||n.fromElement))return null;if(!o&&!i)return null;var a=void 0;if(r.window===r)a=r;else{var s=r.ownerDocument;a=s?s.defaultView||s.parentWindow:window}var c=void 0,u=void 0;if(o){c=t;var l=n.relatedTarget||n.toElement;u=l?pe(l):null}else c=null,u=t;if(c===u)return null;var h=void 0,d=void 0,f=void 0,p=void 0;e===Ct||e===Pt?(h=Ji,d=Zi.mouseLeave,f=Zi.mouseEnter,p="mouse"):e!==Ut&&e!==Bt||(h=Qi,d=Zi.pointerLeave,f=Zi.pointerEnter,p="pointer");var m=null==c?a:ve(c),v=null==u?a:ve(u),g=h.getPooled(d,c,n,r);g.type=p+"leave",g.target=m,g.relatedTarget=v;var y=h.getPooled(f,u,n,r);return y.type=p+"enter",y.target=v,y.relatedTarget=m,Pe(g,y,c,u),[g,y]}};function $i(e){return e._reactInternalFiber}var eo=0,to=1,no=2,ro=4,io=6,oo=8,ao=16,so=32,co=64,uo=128,lo=256,ho=511,fo=512,po=1024,mo=1,vo=2,go=3;function yo(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if((t.effectTag&no)!==eo)return mo;for(;t.return;)if(((t=t.return).effectTag&no)!==eo)return mo}return t.tag===$?vo:go}function bo(e){return yo(e)===vo}function xo(e){yo(e)!==vo&&t(!1,"Unable to find node on an unmounted component.")}function wo(e){var n=e.alternate;if(!n){var r=yo(e);return r===go&&t(!1,"Unable to find node on an unmounted component."),r===mo?null:e}for(var i=e,o=n;;){var a=i.return,s=a?a.alternate:null;if(!a||!s)break;if(a.child===s.child){for(var c=a.child;c;){if(c===i)return xo(a),e;if(c===o)return xo(a),n;c=c.sibling}t(!1,"Unable to find node on an unmounted component.")}if(i.return!==o.return)i=a,o=s;else{for(var u=!1,l=a.child;l;){if(l===i){u=!0,i=a,o=s;break}if(l===o){u=!0,o=a,i=s;break}l=l.sibling}if(!u){for(l=s.child;l;){if(l===i){u=!0,i=s,o=a;break}if(l===o){u=!0,o=s,i=a;break}l=l.sibling}u||t(!1,"Child was not found in either parent set. This indicates a bug in React related to the return pointer. Please file an issue.")}}i.alternate!==o&&t(!1,"Return fibers should always be each others' alternates. This error is likely caused by a bug in React. Please file an issue.")}return i.tag!==$&&t(!1,"Unable to find node on an unmounted component."),i.stateNode.current===i?e:n}function _o(e){var t=wo(e);if(!t)return null;for(var n=t;;){if(n.tag===te||n.tag===ne)return n;if(n.child)n.child.return=n,n=n.child;else{if(n===t)return null;for(;!n.sibling;){if(!n.return||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}var So=Tn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Mo=Tn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),To=Hi.extend({relatedTarget:null});function Ao(e){var t=void 0,n=e.keyCode;return"charCode"in e?0===(t=e.charCode)&&13===n&&(t=13):t=n,10===t&&(t=13),t>=32||13===t?t:0}var Eo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Co={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};var Po=Hi.extend({key:function(e){if(e.key){var t=Eo[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=Ao(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?Co[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Yi,charCode:function(e){return"keypress"===e.type?Ao(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ao(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Lo=Ji.extend({dataTransfer:null}),Oo=Hi.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Yi}),No=Tn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Ro=Ji.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),Io=[[ke,"abort"],[Ue,"animationEnd"],[Be,"animationIteration"],[ze,"animationStart"],[Ve,"canPlay"],[Ge,"canPlayThrough"],[tt,"drag"],[rt,"dragEnter"],[it,"dragExit"],[ot,"dragLeave"],[at,"dragOver"],[ut,"durationChange"],[lt,"emptied"],[ht,"encrypted"],[dt,"ended"],[ft,"error"],[mt,"gotPointerCapture"],[wt,"load"],[St,"loadedData"],[Mt,"loadedMetadata"],[_t,"loadStart"],[Tt,"lostPointerCapture"],[Et,"mouseMove"],[Ct,"mouseOut"],[Pt,"mouseOver"],[It,"playing"],[kt,"pointerMove"],[Ut,"pointerOut"],[Bt,"pointerOver"],[jt,"progress"],[Wt,"scroll"],[Xt,"seeking"],[Yt,"stalled"],[Qt,"suspend"],[Kt,"timeUpdate"],[$t,"toggle"],[nn,"touchMove"],[on,"transitionEnd"],[sn,"waiting"],[cn,"wheel"]],Do={},Fo={};function ko(e,t){var n=e[0],r=e[1],i="on"+(r[0].toUpperCase()+r.slice(1)),o={phasedRegistrationNames:{bubbled:i,captured:i+"Capture"},dependencies:[n],isInteractive:t};Do[r]=o,Fo[n]=o}[[je,"blur"],[We,"cancel"],[Xe,"click"],[qe,"close"],[Ze,"contextMenu"],[Ke,"copy"],[$e,"cut"],[et,"doubleClick"],[nt,"dragEnd"],[st,"dragStart"],[ct,"drop"],[pt,"focus"],[vt,"input"],[gt,"invalid"],[yt,"keyDown"],[bt,"keyPress"],[xt,"keyUp"],[At,"mouseDown"],[Lt,"mouseUp"],[Ot,"paste"],[Nt,"pause"],[Rt,"play"],[Dt,"pointerCancel"],[Ft,"pointerDown"],[zt,"pointerUp"],[Vt,"rateChange"],[Gt,"reset"],[Ht,"seeked"],[Jt,"submit"],[en,"touchCancel"],[tn,"touchEnd"],[rn,"touchStart"],[an,"volumeChange"]].forEach(function(e){ko(e,!0)}),Io.forEach(function(e){ko(e,!1)});var Uo=[ke,We,Ve,Ge,qe,ut,lt,ht,dt,ft,vt,gt,wt,St,Mt,_t,Nt,Rt,It,jt,Vt,Gt,Ht,Xt,Yt,Jt,Qt,Kt,$t,an,sn],Bo={eventTypes:Do,isInteractiveTopLevelEventType:function(e){var t=Fo[e];return void 0!==t&&!0===t.isInteractive},extractEvents:function(e,t,n,r){var o=Fo[e];if(!o)return null;var a=void 0;switch(e){case bt:if(0===Ao(n))return null;case yt:case xt:a=Po;break;case je:case pt:a=To;break;case Xe:if(2===n.button)return null;case et:case At:case Et:case Lt:case Ct:case Pt:case Ze:a=Ji;break;case tt:case nt:case rt:case it:case ot:case at:case st:case ct:a=Lo;break;case en:case tn:case nn:case rn:a=Oo;break;case Ue:case Be:case ze:a=So;break;case on:a=No;break;case Wt:a=Hi;break;case cn:a=Ro;break;case Ke:case $e:case Ot:a=Mo;break;case mt:case Tt:case Dt:case Ft:case kt:case Ut:case Bt:case zt:a=Qi;break;default:-1===Uo.indexOf(e)&&i(!1,"SimpleEventPlugin: Unhandled event type, `%s`. This warning is likely caused by a bug in React. Please file an issue.",e),a=Tn}var s=a.getPooled(o,t,n,r);return Ce(s),s}},zo=Bo.isInteractiveTopLevelEventType,jo=10,Vo=[];function Go(e){for(;e.return;)e=e.return;return e.tag!==$?null:e.stateNode.containerInfo}function Wo(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=Go(n);if(!r)break;e.ancestors.push(n),n=pe(r)}while(n);for(var i=0;i<e.ancestors.length;i++)t=e.ancestors[i],Y(e.topLevelType,t,e.nativeEvent,fr(e.nativeEvent))}var Ho=!0;function Xo(e){Ho=!!e}function qo(){return Ho}function Yo(e,t){if(!t)return null;var n=zo(e)?Qo:Zo;!function(e,t,n){e.addEventListener(t,n,!1)}(t,ln(e),n.bind(null,e))}function Jo(e,t){if(!t)return null;var n=zo(e)?Qo:Zo;!function(e,t,n){e.addEventListener(t,n,!0)}(t,ln(e),n.bind(null,e))}function Qo(e,t){!function(e,t,n){tr(e,t,n)}(Zo,e,t)}function Zo(e,t){if(Ho){var n=pe(fr(t));null===n||"number"!=typeof n.tag||bo(n)||(n=null);var r=function(e,t,n){if(Vo.length){var r=Vo.pop();return r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,r}return{topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]}}(e,t,n);try{ir(Wo,r)}finally{!function(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,Vo.length<jo&&Vo.push(e)}(r)}}}var Ko=Object.freeze({get _enabled(){return Ho},setEnabled:Xo,isEnabled:qo,trapBubbledEvent:Yo,trapCapturedEvent:Jo,dispatchEvent:Zo}),$o={},ea=0,ta="_reactListenersID"+(""+Math.random()).slice(2);function na(e){return Object.prototype.hasOwnProperty.call(e,ta)||(e[ta]=ea++,$o[e[ta]]={}),$o[e[ta]]}function ra(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ia(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function oa(e,t){for(var n=ra(e),r=0,i=0;n;){if(n.nodeType===ur){if(i=r+n.textContent.length,r<=t&&i>=t)return{node:n,offset:t-r};r=i}n=ra(ia(n))}}function aa(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,r=t.anchorOffset,i=t.focusNode,o=t.focusOffset;try{n.nodeType,i.nodeType}catch(e){return null}return function(e,t,n,r,i){var o=0,a=-1,s=-1,c=0,u=0,l=e,h=null;e:for(;;){for(var d=null;l!==t||0!==n&&l.nodeType!==ur||(a=o+n),l!==r||0!==i&&l.nodeType!==ur||(s=o+i),l.nodeType===ur&&(o+=l.nodeValue.length),null!==(d=l.firstChild);)h=l,l=d;for(;;){if(l===e)break e;if(h===t&&++c===n&&(a=o),h===r&&++u===i&&(s=o),null!==(d=l.nextSibling))break;h=(l=h).parentNode}l=d}if(-1===a||-1===s)return null;return{start:a,end:s}}(e,n,r,i,o)}function sa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ca(){var e=u();return{focusedElem:e,selectionRange:sa(e)?function(e){var t=void 0;t="selectionStart"in e?{start:e.selectionStart,end:e.selectionEnd}:aa(e);return t||{start:0,end:0}}(e):null}}function ua(e){var t=u(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&function(e){return h(document.documentElement,e)}(n)){null!==r&&sa(n)&&function(e,t){var n=t.start,r=t.end;void 0===r&&(r=n);"selectionStart"in e?(e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length)):function(e,t){if(window.getSelection){var n=window.getSelection(),r=e[dn()].length,i=Math.min(t.start,r),o=void 0===t.end?i:Math.min(t.end,r);if(!n.extend&&i>o){var a=o;o=i,i=a}var s=oa(e,i),c=oa(e,o);if(s&&c){if(1===n.rangeCount&&n.anchorNode===s.node&&n.anchorOffset===s.offset&&n.focusNode===c.node&&n.focusOffset===c.offset)return;var u=document.createRange();u.setStart(s.node,s.offset),n.removeAllRanges(),i>o?(n.addRange(u),n.extend(c.node,c.offset)):(u.setEnd(c.node,c.offset),n.addRange(u))}}}(e,t)}(n,r);for(var i=[],o=n;o=o.parentNode;)o.nodeType===cr&&i.push({element:o,left:o.scrollLeft,top:o.scrollTop});"function"==typeof n.focus&&n.focus();for(var a=0;a<i.length;a++){var s=i[a];s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}}var la=o.canUseDOM&&"documentMode"in document&&document.documentMode<=11,ha={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:[je,Ze,pt,yt,xt,At,Lt,qt]}},da=null,fa=null,pa=null,ma=!1;function va(e,t){if(ma||null==da||da!==u())return null;var n=function(e){if("selectionStart"in e&&sa(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}}(da);if(!pa||!l(pa,n)){pa=n;var r=Tn.getPooled(ha.select,fa,e,t);return r.type="select",r.target=da,Ce(r),r}return null}var ga={eventTypes:ha,extractEvents:function(e,t,n,r){var i=r.window===r?r.document:r.nodeType===hr?r:r.ownerDocument;if(!i||!function(e,t){for(var n=na(t),r=C[e],i=0;i<r.length;i++){var o=r[i];if(!n.hasOwnProperty(o)||!n[o])return!1}return!0}("onSelect",i))return null;var o=t?ve(t):window;switch(e){case pt:(sr(o)||"true"===o.contentEditable)&&(da=o,fa=t,pa=null);break;case je:da=null,fa=null,pa=null;break;case At:ma=!0;break;case Ze:case Lt:return ma=!1,va(n,r);case qt:if(la)break;case yt:case xt:return va(n,r)}return null}};H.injectEventPluginOrder(["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"]),F(be),H.injectEventPluginsByName({SimpleEventPlugin:Bo,EnterLeaveEventPlugin:Ki,ChangeEventPlugin:Wi,SelectEventPlugin:ga,BeforeInputEventPlugin:Wn});var ya="function"==typeof requestAnimationFrame?requestAnimationFrame:void 0,ba=Date,xa=setTimeout,wa=clearTimeout,_a=void 0;if("object"==typeof performance&&"function"==typeof performance.now){var Sa=performance;_a=function(){return Sa.now()}}else _a=function(){return ba.now()};var Ma=void 0,Ta=void 0;if(o.canUseDOM){"function"!=typeof ya&&i(!1,"React depends on requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills");var Aa="function"==typeof ya?ya:function(e){t(!1,"React depends on requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")},Ea=null,Ca=null,Pa=-1,La=!1,Oa=!1,Na=0,Ra=33,Ia=33,Da={didTimeout:!1,timeRemaining:function(){var e=Na-_a();return e>0?e:0}},Fa=function(e,t){var n=e.scheduledCallback,r=!1;try{n(t),r=!0}finally{Ta(e),r||(La=!0,window.postMessage(ka,"*"))}},ka="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===ka&&(La=!1,null!==Ea)){!function(){if(null!==Ea){var e=_a();if(!(-1===Pa||Pa>e)){for(var t=-1,n=[],r=Ea;null!==r;){var i=r.timeoutTime;-1!==i&&i<=e?n.push(r):-1!==i&&(-1===t||i<t)&&(t=i),r=r.next}if(n.length>0){Da.didTimeout=!0;for(var o=0,a=n.length;o<a;o++)Fa(n[o],Da)}Pa=t}}}();for(var t=_a();Na-t>0&&null!==Ea;){var n=Ea;Da.didTimeout=!1,Fa(n,Da),t=_a()}null!==Ea&&(Oa||(Oa=!0,Aa(Ua)))}},!1);var Ua=function(e){Oa=!1;var t=e-Na+Ia;t<Ia&&Ra<Ia?(t<8&&(t=8),Ia=t<Ra?Ra:t):Ra=t,Na=e+Ia,La||(La=!0,window.postMessage(ka,"*"))};Ma=function(e,t){var n=-1;null!=t&&"number"==typeof t.timeout&&(n=_a()+t.timeout),(-1===Pa||-1!==n&&n<Pa)&&(Pa=n);var r={scheduledCallback:e,timeoutTime:n,prev:null,next:null};if(null===Ea)Ea=r,Ca=r;else{r.prev=Ca;null!==Ca&&(Ca.next=r),Ca=r}return Oa||(Oa=!0,Aa(Ua)),r},Ta=function(e){if(null!==e.prev||Ea===e){var t=e.next,n=e.prev;return e.next=null,e.prev=null,null!==t?null!==n?(n.next=t,void(t.prev=n)):(t.prev=null,void(Ea=t)):null!==n?(n.next=null,void(Ca=n)):(Ea=null,void(Ca=null))}}}else{var Ba=new Map;Ma=function(e,t){var n={scheduledCallback:e,timeoutTime:0,next:null,prev:null},r=xa(function(){e({timeRemaining:function(){return 1/0},didTimeout:!1})});return Ba.set(e,r),n},Ta=function(e){var t=e.scheduledCallback,n=Ba.get(t);Ba.delete(e),wa(n)}}var za=!1;function ja(e,t){null==t.selected||za||(i(!1,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>."),za=!0)}function Va(e,t){var n=a({children:void 0},t),i=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&("string"!=typeof e&&"number"!=typeof e||(t+=e))}),t}(t.children);return i&&(n.children=i),n}var Ga=jr.getCurrentFiberOwnerName,Wa=jr.getCurrentFiberStackAddendum,Ha=void 0;function Xa(){var e=Ga();return e?"\n\nCheck the render method of `"+e+"`.":""}Ha=!1;var qa=["value","defaultValue"];function Ya(e,t,n,r){var i=e.options;if(t){for(var o=n,a={},s=0;s<o.length;s++)a["$"+o[s]]=!0;for(var c=0;c<i.length;c++){var u=a.hasOwnProperty("$"+i[c].value);i[c].selected!==u&&(i[c].selected=u),u&&r&&(i[c].defaultSelected=!0)}}else{for(var l=""+n,h=null,d=0;d<i.length;d++){if(i[d].value===l)return i[d].selected=!0,void(r&&(i[d].defaultSelected=!0));null!==h||i[d].disabled||(h=i[d])}null!==h&&(h.selected=!0)}}function Ja(e,t){return a({},t,{value:void 0})}function Qa(e,t){var n=e;!function(e){di.checkPropTypes("select",e,Wa);for(var t=0;t<qa.length;t++){var n=qa[t];if(null!=e[n]){var r=Array.isArray(e[n]);e.multiple&&!r?i(!1,"The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",n,Xa()):!e.multiple&&r&&i(!1,"The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",n,Xa())}}}(t);var r=t.value;n._wrapperState={initialValue:null!=r?r:t.defaultValue,wasMultiple:!!t.multiple},void 0===t.value||void 0===t.defaultValue||Ha||(i(!1,"Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://fb.me/react-controlled-components"),Ha=!0)}var Za=jr.getCurrentFiberStackAddendum,Ka=!1;function $a(e,n){var r=e;return null!=n.dangerouslySetInnerHTML&&t(!1,"`dangerouslySetInnerHTML` does not make sense on <textarea>."),a({},n,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function es(e,n){var r=e;di.checkPropTypes("textarea",n,Za),void 0===n.value||void 0===n.defaultValue||Ka||(i(!1,"Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://fb.me/react-controlled-components"),Ka=!0);var o=n.value;if(null==o){var a=n.defaultValue,s=n.children;null!=s&&(i(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."),null!=a&&t(!1,"If you supply `defaultValue` on a <textarea>, do not pass children."),Array.isArray(s)&&(s.length<=1||t(!1,"<textarea> can only have at most one child."),s=s[0]),a=""+s),null==a&&(a=""),o=a}r._wrapperState={initialValue:""+o}}function ts(e,t){var n=e,r=t.value;if(null!=r){var i=""+r;i!==n.value&&(n.value=i),null==t.defaultValue&&(n.defaultValue=i)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)}function ns(e,t){var n=e,r=n.textContent;r===n._wrapperState.initialValue&&(n.value=r)}var rs="http://www.w3.org/1999/xhtml",is="http://www.w3.org/1998/Math/MathML",os="http://www.w3.org/2000/svg",as={html:rs,mathml:is,svg:os};function ss(e){switch(e){case"svg":return os;case"math":return is;default:return rs}}function cs(e,t){return null==e||e===rs?ss(t):e===os&&"foreignObject"===t?rs:e}var us=void 0,ls=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!==as.svg||"innerHTML"in e)e.innerHTML=t;else{(us=us||document.createElement("div")).innerHTML="<svg>"+t+"</svg>";for(var n=us.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}}),hs=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===ur)return void(n.nodeValue=t)}e.textContent=t},ds={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};var fs=["Webkit","ms","Moz","O"];function ps(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ds.hasOwnProperty(e)&&ds[e]?(""+t).trim():t+"px"}Object.keys(ds).forEach(function(e){fs.forEach(function(t){ds[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(t,e)]=ds[e]})});var ms=/^(?:webkit|moz|o)[A-Z]/,vs=/;\s*$/,gs={},ys={},bs=!1,xs=!1,ws=function(e,t,n){e.indexOf("-")>-1?function(e,t){gs.hasOwnProperty(e)&&gs[e]||(gs[e]=!0,i(!1,"Unsupported style property %s. Did you mean %s?%s",e,p(e),t()))}(e,n):ms.test(e)?function(e,t){gs.hasOwnProperty(e)&&gs[e]||(gs[e]=!0,i(!1,"Unsupported vendor-prefixed style property %s. Did you mean %s?%s",e,e.charAt(0).toUpperCase()+e.slice(1),t()))}(e,n):vs.test(t)&&function(e,t,n){ys.hasOwnProperty(t)&&ys[t]||(ys[t]=!0,i(!1,'Style property values shouldn\'t contain a semicolon. Try "%s: %s" instead.%s',e,t.replace(vs,""),n()))}(e,t,n),"number"==typeof t&&(isNaN(t)?function(e,t,n){bs||(bs=!0,i(!1,"`NaN` is an invalid value for the `%s` css style property.%s",e,n()))}(e,0,n):isFinite(t)||function(e,t,n){xs||(xs=!0,i(!1,"`Infinity` is an invalid value for the `%s` css style property.%s",e,n()))}(e,0,n))};function _s(e){var t="",n="";for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(null!=i){var o=0===r.indexOf("--");t+=n+f(r)+":",t+=ps(r,i,o),n=";"}}return t||null}function Ss(e,t,n){var r=e.style;for(var i in t)if(t.hasOwnProperty(i)){var o=0===i.indexOf("--");o||ws(i,t[i],n);var a=ps(i,t[i],o);"float"===i&&(i="cssFloat"),o?r.setProperty(i,a):r[i]=a}}var Ms=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Ts="__html";function As(e,n,r){n&&(Ms[e]&&(null!=n.children||null!=n.dangerouslySetInnerHTML)&&t(!1,"%s is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.%s",e,r()),null!=n.dangerouslySetInnerHTML&&(null!=n.children&&t(!1,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."),"object"==typeof n.dangerouslySetInnerHTML&&Ts in n.dangerouslySetInnerHTML||t(!1,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://fb.me/react-invariant-dangerously-set-inner-html for more information.")),!n.suppressContentEditableWarning&&n.contentEditable&&null!=n.children&&i(!1,"A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional.%s",r()),null!=n.style&&"object"!=typeof n.style&&t(!1,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.%s",r()))}function Es(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cs={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",enctype:"encType",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",about:"about",accentheight:"accentHeight","accent-height":"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline","alignment-baseline":"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm","arabic-form":"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baselineshift:"baselineShift","baseline-shift":"baselineShift",baseprofile:"baseProfile",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight","cap-height":"capHeight",clip:"clip",clippath:"clipPath","clip-path":"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule","clip-rule":"clipRule",color:"color",colorinterpolation:"colorInterpolation","color-interpolation":"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters","color-interpolation-filters":"colorInterpolationFilters",colorprofile:"colorProfile","color-profile":"colorProfile",colorrendering:"colorRendering","color-rendering":"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",datatype:"datatype",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline","dominant-baseline":"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground","enable-background":"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity","fill-opacity":"fillOpacity",fillrule:"fillRule","fill-rule":"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodopacity:"floodOpacity","flood-opacity":"floodOpacity",floodcolor:"floodColor","flood-color":"floodColor",focusable:"focusable",fontfamily:"fontFamily","font-family":"fontFamily",fontsize:"fontSize","font-size":"fontSize",fontsizeadjust:"fontSizeAdjust","font-size-adjust":"fontSizeAdjust",fontstretch:"fontStretch","font-stretch":"fontStretch",fontstyle:"fontStyle","font-style":"fontStyle",fontvariant:"fontVariant","font-variant":"fontVariant",fontweight:"fontWeight","font-weight":"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName","glyph-name":"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal","glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical","glyph-orientation-vertical":"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX","horiz-adv-x":"horizAdvX",horizoriginx:"horizOriginX","horiz-origin-x":"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering","image-rendering":"imageRendering",in2:"in2",in:"in",inlist:"inlist",intercept:"intercept",k1:"k1",k2:"k2",k3:"k3",k4:"k4",k:"k",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing","letter-spacing":"letterSpacing",lightingcolor:"lightingColor","lighting-color":"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd","marker-end":"markerEnd",markerheight:"markerHeight",markermid:"markerMid","marker-mid":"markerMid",markerstart:"markerStart","marker-start":"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition","overline-position":"overlinePosition",overlinethickness:"overlineThickness","overline-thickness":"overlineThickness",paintorder:"paintOrder","paint-order":"paintOrder",panose1:"panose1","panose-1":"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents","pointer-events":"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",prefix:"prefix",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",property:"property",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent","rendering-intent":"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",resource:"resource",restart:"restart",result:"result",results:"results",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",security:"security",seed:"seed",shaperendering:"shapeRendering","shape-rendering":"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor","stop-color":"stopColor",stopopacity:"stopOpacity","stop-opacity":"stopOpacity",strikethroughposition:"strikethroughPosition","strikethrough-position":"strikethroughPosition",strikethroughthickness:"strikethroughThickness","strikethrough-thickness":"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray","stroke-dasharray":"strokeDasharray",strokedashoffset:"strokeDashoffset","stroke-dashoffset":"strokeDashoffset",strokelinecap:"strokeLinecap","stroke-linecap":"strokeLinecap",strokelinejoin:"strokeLinejoin","stroke-linejoin":"strokeLinejoin",strokemiterlimit:"strokeMiterlimit","stroke-miterlimit":"strokeMiterlimit",strokewidth:"strokeWidth","stroke-width":"strokeWidth",strokeopacity:"strokeOpacity","stroke-opacity":"strokeOpacity",suppresscontenteditablewarning:"suppressContentEditableWarning",suppresshydrationwarning:"suppressHydrationWarning",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor","text-anchor":"textAnchor",textdecoration:"textDecoration","text-decoration":"textDecoration",textlength:"textLength",textrendering:"textRendering","text-rendering":"textRendering",to:"to",transform:"transform",typeof:"typeof",u1:"u1",u2:"u2",underlineposition:"underlinePosition","underline-position":"underlinePosition",underlinethickness:"underlineThickness","underline-thickness":"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi","unicode-bidi":"unicodeBidi",unicoderange:"unicodeRange","unicode-range":"unicodeRange",unitsperem:"unitsPerEm","units-per-em":"unitsPerEm",unselectable:"unselectable",valphabetic:"vAlphabetic","v-alphabetic":"vAlphabetic",values:"values",vectoreffect:"vectorEffect","vector-effect":"vectorEffect",version:"version",vertadvy:"vertAdvY","vert-adv-y":"vertAdvY",vertoriginx:"vertOriginX","vert-origin-x":"vertOriginX",vertoriginy:"vertOriginY","vert-origin-y":"vertOriginY",vhanging:"vHanging","v-hanging":"vHanging",videographic:"vIdeographic","v-ideographic":"vIdeographic",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",vmathematical:"vMathematical","v-mathematical":"vMathematical",vocab:"vocab",widths:"widths",wordspacing:"wordSpacing","word-spacing":"wordSpacing",writingmode:"writingMode","writing-mode":"writingMode",x1:"x1",x2:"x2",x:"x",xchannelselector:"xChannelSelector",xheight:"xHeight","x-height":"xHeight",xlinkactuate:"xlinkActuate","xlink:actuate":"xlinkActuate",xlinkarcrole:"xlinkArcrole","xlink:arcrole":"xlinkArcrole",xlinkhref:"xlinkHref","xlink:href":"xlinkHref",xlinkrole:"xlinkRole","xlink:role":"xlinkRole",xlinkshow:"xlinkShow","xlink:show":"xlinkShow",xlinktitle:"xlinkTitle","xlink:title":"xlinkTitle",xlinktype:"xlinkType","xlink:type":"xlinkType",xmlbase:"xmlBase","xml:base":"xmlBase",xmllang:"xmlLang","xml:lang":"xmlLang",xmlns:"xmlns","xml:space":"xmlSpace",xmlnsxlink:"xmlnsXlink","xmlns:xlink":"xmlnsXlink",xmlspace:"xmlSpace",y1:"y1",y2:"y2",y:"y",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan"},Ps={"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},Ls={},Os=new RegExp("^(aria)-["+Jr+"]*$"),Ns=new RegExp("^(aria)[A-Z]["+Jr+"]*$"),Rs=Object.prototype.hasOwnProperty;function Is(){var e=wr.getStackAddendum();return null!=e?e:""}function Ds(e,t){if(Rs.call(Ls,t)&&Ls[t])return!0;if(Ns.test(t)){var n="aria-"+t.slice(4).toLowerCase(),r=Ps.hasOwnProperty(n)?n:null;if(null==r)return i(!1,"Invalid ARIA attribute `%s`. ARIA attributes follow the pattern aria-* and must be lowercase.%s",t,Is()),Ls[t]=!0,!0;if(t!==r)return i(!1,"Invalid ARIA attribute `%s`. Did you mean `%s`?%s",t,r,Is()),Ls[t]=!0,!0}if(Os.test(t)){var o=t.toLowerCase(),a=Ps.hasOwnProperty(o)?o:null;if(null==a)return Ls[t]=!0,!1;if(t!==a)return i(!1,"Unknown ARIA attribute `%s`. Did you mean `%s`?%s",t,a,Is()),Ls[t]=!0,!0}return!0}function Fs(e,t){Es(e,t)||function(e,t){var n=[];for(var r in t)Ds(0,r)||n.push(r);var o=n.map(function(e){return"`"+e+"`"}).join(", ");1===n.length?i(!1,"Invalid aria prop %s on <%s> tag. For details, see https://fb.me/invalid-aria-prop%s",o,e,Is()):n.length>1&&i(!1,"Invalid aria props %s on <%s> tag. For details, see https://fb.me/invalid-aria-prop%s",o,e,Is())}(e,t)}var ks=!1;function Us(){var e=wr.getStackAddendum();return null!=e?e:""}function Bs(){var e=wr.getStackAddendum();return null!=e?e:""}var zs,js={},Vs=Object.prototype.hasOwnProperty,Gs=/^on./,Ws=/^on[^A-Z]/,Hs=new RegExp("^(aria)-["+Jr+"]*$"),Xs=new RegExp("^(aria)[A-Z]["+Jr+"]*$");zs=function(e,t,n,r){if(Vs.call(js,t)&&js[t])return!0;var o=t.toLowerCase();if("onfocusin"===o||"onfocusout"===o)return i(!1,"React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React."),js[t]=!0,!0;if(r){if(E.hasOwnProperty(t))return!0;var a=P.hasOwnProperty(o)?P[o]:null;if(null!=a)return i(!1,"Invalid event handler property `%s`. Did you mean `%s`?%s",t,a,Bs()),js[t]=!0,!0;if(Gs.test(t))return i(!1,"Unknown event handler property `%s`. It will be ignored.%s",t,Bs()),js[t]=!0,!0}else if(Gs.test(t))return Ws.test(t)&&i(!1,"Invalid event handler property `%s`. React events use the camelCase naming convention, for example `onClick`.%s",t,Bs()),js[t]=!0,!0;if(Hs.test(t)||Xs.test(t))return!0;if("innerhtml"===o)return i(!1,"Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),js[t]=!0,!0;if("aria"===o)return i(!1,"The `aria` attribute is reserved for future use in React. Pass individual `aria-` attributes instead."),js[t]=!0,!0;if("is"===o&&null!==n&&void 0!==n&&"string"!=typeof n)return i(!1,"Received a `%s` for a string attribute `is`. If this is expected, cast the value to a string.%s",typeof n,Bs()),js[t]=!0,!0;if("number"==typeof n&&isNaN(n))return i(!1,"Received NaN for the `%s` attribute. If this is expected, cast the value to a string.%s",t,Bs()),js[t]=!0,!0;var s=ii(t),c=null!==s&&s.type===Vr;if(Cs.hasOwnProperty(o)){var u=Cs[o];if(u!==t)return i(!1,"Invalid DOM property `%s`. Did you mean `%s`?%s",t,u,Bs()),js[t]=!0,!0}else if(!c&&t!==o)return i(!1,"React does not recognize the `%s` prop on a DOM element. If you intentionally want it to appear in the DOM as a custom attribute, spell it as lowercase `%s` instead. If you accidentally passed it from a parent component, remove it from the DOM element.%s",t,o,Bs()),js[t]=!0,!0;return"boolean"==typeof n&&ni(t,n,s,!1)?(n?i(!1,'Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.%s',n,t,t,n,t,Bs()):i(!1,'Received `%s` for a non-boolean attribute `%s`.\n\nIf you want to write it to the DOM, pass a string instead: %s="%s" or %s={value.toString()}.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.%s',n,t,t,n,t,t,t,Bs()),js[t]=!0,!0):!!c||(!ni(t,n,s,!1)||(js[t]=!0,!1))};var qs=function(e,t,n){var r=[];for(var o in t){zs(0,o,t[o],n)||r.push(o)}var a=r.map(function(e){return"`"+e+"`"}).join(", ");1===r.length?i(!1,"Invalid value for prop %s on <%s> tag. Either remove it from the element, or pass a string or number value to keep it in the DOM. For details, see https://fb.me/react-attribute-behavior%s",a,e,Bs()):r.length>1&&i(!1,"Invalid values for props %s on <%s> tag. Either remove them from the element, or pass a string or number value to keep them in the DOM. For details, see https://fb.me/react-attribute-behavior%s",a,e,Bs())};var Ys,Js=jr.getCurrentFiberOwnerName,Qs=jr.getCurrentFiberStackAddendum,Zs=!1,Ks=!1,$s="dangerouslySetInnerHTML",ec="suppressContentEditableWarning",tc="suppressHydrationWarning",nc="autoFocus",rc="children",ic="style",oc="__html",ac=as.html,sc=s.thatReturns(""),cc=void 0,uc=void 0,lc=void 0,hc=void 0,dc=void 0,fc=void 0,pc=void 0,mc=void 0;sc=Qs,cc={time:!0,dialog:!0},lc=function(e,t){Fs(e,t),function(e,t){"input"!==e&&"textarea"!==e&&"select"!==e||null==t||null!==t.value||ks||(ks=!0,"select"===e&&t.multiple?i(!1,"`value` prop on `%s` should not be null. Consider using an empty array when `multiple` is set to `true` to clear the component or `undefined` for uncontrolled components.%s",e,Us()):i(!1,"`value` prop on `%s` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.%s",e,Us()))}(e,t),function(e,t,n){Es(e,t)||qs(e,t,n)}(e,t,!0)};var vc=/\r\n?/g,gc=/\u0000|\uFFFD/g;function yc(e,t){!function(e,t){for(var n=na(t),r=C[e],i=0;i<r.length;i++){var o=r[i];if(!n.hasOwnProperty(o)||!n[o]){switch(o){case Wt:Jo(Wt,t);break;case pt:case je:Jo(pt,t),Jo(je,t),n[je]=!0,n[pt]=!0;break;case We:case qe:pr(ln(o),!0)&&Jo(o,t);break;case gt:case Jt:case Gt:break;default:-1!==un.indexOf(o)||Yo(o,t)}n[o]=!0}}}(t,e.nodeType===hr||e.nodeType===dr?e:e.ownerDocument)}function bc(e){return e.nodeType===hr?e:e.ownerDocument}function xc(e){e.onclick=s}function wc(e,t,n,r){var o=void 0,a=bc(n),s=void 0,c=r;if(c===ac&&(c=ss(e)),c===ac)if((o=Es(e,t))||e===e.toLowerCase()||i(!1,"<%s /> is using incorrect casing. Use PascalCase for React components, or lowercase for HTML elements.",e),"script"===e){var u=a.createElement("div");u.innerHTML="<script><\/script>";var l=u.firstChild;s=u.removeChild(l)}else s="string"==typeof t.is?a.createElement(e,{is:t.is}):a.createElement(e);else s=a.createElementNS(c,e);return c===ac&&(o||"[object HTMLUnknownElement]"!==Object.prototype.toString.call(s)||Object.prototype.hasOwnProperty.call(cc,e)||(cc[e]=!0,i(!1,"The tag <%s> is unrecognized in this browser. If you meant to render a React component, start its name with an uppercase letter.",e))),s}function _c(e,t){return bc(t).createTextNode(e)}function Sc(e,t,n,r){var o=Es(t,n);lc(t,n),o&&!Ks&&e.shadyRoot&&(i(!1,"%s is using shady DOM. Using shady DOM with React can cause things to break subtly.",Js()||"A component"),Ks=!0);var a=void 0;switch(t){case"iframe":case"object":Yo(wt,e),a=n;break;case"video":case"audio":for(var s=0;s<un.length;s++)Yo(un[s],e);a=n;break;case"source":Yo(ft,e),a=n;break;case"img":case"image":case"link":Yo(ft,e),Yo(wt,e),a=n;break;case"form":Yo(Gt,e),Yo(Jt,e),a=n;break;case"details":Yo($t,e),a=n;break;case"input":Si(e,n),a=_i(e,n),Yo(gt,e),yc(r,"onChange");break;case"option":ja(0,n),a=Va(0,n);break;case"select":Qa(e,n),a=Ja(0,n),Yo(gt,e),yc(r,"onChange");break;case"textarea":es(e,n),a=$a(e,n),Yo(gt,e),yc(r,"onChange");break;default:a=n}switch(As(t,a,sc),function(e,t,n,r,i){for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];if(o===ic)a&&Object.freeze(a),Ss(t,a,sc);else if(o===$s){var s=a?a[oc]:void 0;null!=s&&ls(t,s)}else o===rc?"string"==typeof a?("textarea"!==e||""!==a)&&hs(t,a):"number"==typeof a&&hs(t,""+a):o===ec||o===tc||o===nc||(E.hasOwnProperty(o)?null!=a&&("function"!=typeof a&&pc(o,a),yc(n,o)):null!=a&&hi(t,o,a,i))}}(t,e,r,a,o),t){case"input":gr(e),Ai(e,n,!1);break;case"textarea":gr(e),ns(e);break;case"option":!function(e,t){null!=t.value&&e.setAttribute("value",t.value)}(e,n);break;case"select":!function(e,t){var n=e;n.multiple=!!t.multiple;var r=t.value;null!=r?Ya(n,!!t.multiple,r,!1):null!=t.defaultValue&&Ya(n,!!t.multiple,t.defaultValue,!0)}(e,n);break;default:"function"==typeof a.onClick&&xc(e)}}function Mc(e,t,n,r,i){lc(t,r);var o=null,a=void 0,s=void 0;switch(t){case"input":a=_i(e,n),s=_i(e,r),o=[];break;case"option":a=Va(0,n),s=Va(0,r),o=[];break;case"select":a=Ja(0,n),s=Ja(0,r),o=[];break;case"textarea":a=$a(e,n),s=$a(e,r),o=[];break;default:s=r,"function"!=typeof(a=n).onClick&&"function"==typeof s.onClick&&xc(e)}As(t,s,sc);var c=void 0,u=void 0,l=null;for(c in a)if(!s.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if(c===ic){var h=a[c];for(u in h)h.hasOwnProperty(u)&&(l||(l={}),l[u]="")}else c===$s||c===rc||c===ec||c===tc||c===nc||(E.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in s){var d=s[c],f=null!=a?a[c]:void 0;if(s.hasOwnProperty(c)&&d!==f&&(null!=d||null!=f))if(c===ic)if(d&&Object.freeze(d),f){for(u in f)!f.hasOwnProperty(u)||d&&d.hasOwnProperty(u)||(l||(l={}),l[u]="");for(u in d)d.hasOwnProperty(u)&&f[u]!==d[u]&&(l||(l={}),l[u]=d[u])}else l||(o||(o=[]),o.push(c,l)),l=d;else if(c===$s){var p=d?d[oc]:void 0,m=f?f[oc]:void 0;null!=p&&m!==p&&(o=o||[]).push(c,""+p)}else c===rc?f===d||"string"!=typeof d&&"number"!=typeof d||(o=o||[]).push(c,""+d):c===ec||c===tc||(E.hasOwnProperty(c)?(null!=d&&("function"!=typeof d&&pc(c,d),yc(i,c)),o||f===d||(o=[])):(o=o||[]).push(c,d))}return l&&(o=o||[]).push(ic,l),o}function Tc(e,t,n,r,i){"input"===n&&"radio"===i.type&&null!=i.name&&Mi(e,i);Es(n,r);switch(function(e,t,n,r){for(var i=0;i<t.length;i+=2){var o=t[i],a=t[i+1];o===ic?Ss(e,a,sc):o===$s?ls(e,a):o===rc?hs(e,a):hi(e,o,a,r)}}(e,t,0,Es(n,i)),n){case"input":Ti(e,i);break;case"textarea":ts(e,i);break;case"select":!function(e,t){var n=e;n._wrapperState.initialValue=void 0;var r=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!t.multiple;var i=t.value;null!=i?Ya(n,!!t.multiple,i,!1):r!==!!t.multiple&&(null!=t.defaultValue?Ya(n,!!t.multiple,t.defaultValue,!0):Ya(n,!!t.multiple,t.multiple?[]:"",!1))}(e,i)}}function Ac(e){var t=e.toLowerCase();return Cs.hasOwnProperty(t)&&Cs[t]||null}function Ec(e,t,n,r,o){var a,s=void 0;switch(uc=!0===n[tc],a=Es(t,n),lc(t,n),a&&!Ks&&e.shadyRoot&&(i(!1,"%s is using shady DOM. Using shady DOM with React can cause things to break subtly.",Js()||"A component"),Ks=!0),t){case"iframe":case"object":Yo(wt,e);break;case"video":case"audio":for(var c=0;c<un.length;c++)Yo(un[c],e);break;case"source":Yo(ft,e);break;case"img":case"image":case"link":Yo(ft,e),Yo(wt,e);break;case"form":Yo(Gt,e),Yo(Jt,e);break;case"details":Yo($t,e);break;case"input":Si(e,n),Yo(gt,e),yc(o,"onChange");break;case"option":ja(0,n);break;case"select":Qa(e,n),Yo(gt,e),yc(o,"onChange");break;case"textarea":es(e,n),Yo(gt,e),yc(o,"onChange")}As(t,n,sc),s=new Set;for(var u=e.attributes,l=0;l<u.length;l++){switch(u[l].name.toLowerCase()){case"data-reactroot":case"value":case"checked":case"selected":break;default:s.add(u[l].name)}}var h=null;for(var d in n)if(n.hasOwnProperty(d)){var f=n[d];if(d===rc)"string"==typeof f?e.textContent!==f&&(uc||hc(e.textContent,f),h=[rc,f]):"number"==typeof f&&e.textContent!==""+f&&(uc||hc(e.textContent,f),h=[rc,""+f]);else if(E.hasOwnProperty(d))null!=f&&("function"!=typeof f&&pc(d,f),yc(o,d));else if("boolean"==typeof a){var p=void 0,m=ii(d);if(uc);else if(d===ec||d===tc||"value"===d||"checked"===d||"selected"===d);else if(d===$s){var v=f&&f[oc]||"",g=e.innerHTML,y=mc(e,v);y!==g&&dc(d,g,y)}else if(d===ic){s.delete(d);var b=_s(f);b!==(p=e.getAttribute("style"))&&dc(d,p,b)}else if(a)s.delete(d.toLowerCase()),f!==(p=li(e,d,f))&&dc(d,p,f);else if(!ti(d,m,a)&&!ri(d,f,m,a)){var x=!1;if(null!==m)s.delete(m.attributeName),p=ui(e,d,f,m);else{var w=r;if(w===ac&&(w=ss(t)),w===ac)s.delete(d.toLowerCase());else{var _=Ac(d);null!==_&&_!==d&&(x=!0,s.delete(_)),s.delete(d)}p=li(e,d,f)}f===p||x||dc(d,p,f)}}}switch(s.size>0&&!uc&&fc(s),t){case"input":gr(e),Ai(e,n,!0);break;case"textarea":gr(e),ns(e);break;case"select":case"option":break;default:"function"==typeof n.onClick&&xc(e)}return h}function Cc(e,t){return e.nodeValue!==t}function Pc(e,t){hc(e.nodeValue,t)}function Lc(e,t){Zs||(Zs=!0,i(!1,"Did not expect server HTML to contain a <%s> in <%s>.",t.nodeName.toLowerCase(),e.nodeName.toLowerCase()))}function Oc(e,t){Zs||(Zs=!0,i(!1,'Did not expect server HTML to contain the text node "%s" in <%s>.',t.nodeValue,e.nodeName.toLowerCase()))}function Nc(e,t,n){Zs||(Zs=!0,i(!1,"Expected server HTML to contain a matching <%s> in <%s>.",t,e.nodeName.toLowerCase()))}function Rc(e,t){""!==t&&(Zs||(Zs=!0,i(!1,'Expected server HTML to contain a matching text node for "%s" in <%s>.',t,e.nodeName.toLowerCase())))}Ys=function(e){return("string"==typeof e?e:""+e).replace(vc,"\n").replace(gc,"")},hc=function(e,t){if(!Zs){var n=Ys(t),r=Ys(e);r!==n&&(Zs=!0,i(!1,'Text content did not match. Server: "%s" Client: "%s"',r,n))}},dc=function(e,t,n){if(!Zs){var r=Ys(n),o=Ys(t);o!==r&&(Zs=!0,i(!1,"Prop `%s` did not match. Server: %s Client: %s",e,JSON.stringify(o),JSON.stringify(r)))}},fc=function(e){if(!Zs){Zs=!0;var t=[];e.forEach(function(e){t.push(e)}),i(!1,"Extra attributes from the server: %s",t)}},pc=function(e,t){!1===t?i(!1,"Expected `%s` listener to be a function, instead got `false`.\n\nIf you used to conditionally omit it with %s={condition && value}, pass %s={condition ? value : undefined} instead.%s",e,e,e,Qs()):i(!1,"Expected `%s` listener to be a function, instead got a value of `%s` type.%s",e,typeof t,Qs())},mc=function(e,t){var n=e.namespaceURI===ac?e.ownerDocument.createElement(e.tagName):e.ownerDocument.createElementNS(e.namespaceURI,e.tagName);return n.innerHTML=t,n.innerHTML};var Ic,Dc=Object.freeze({createElement:wc,createTextNode:_c,setInitialProperties:Sc,diffProperties:Mc,updateProperties:Tc,diffHydratedProperties:Ec,diffHydratedText:Cc,warnForUnmatchedText:Pc,warnForDeletedHydratableElement:Lc,warnForDeletedHydratableText:Oc,warnForInsertedHydratedElement:Nc,warnForInsertedHydratedText:Rc,restoreControlledState:function(e,t,n){switch(t){case"input":return void Ei(e,n);case"textarea":return void function(e,t){ts(e,t)}(e,n);case"select":return void function(e,t){var n=e,r=t.value;null!=r&&Ya(n,!!t.multiple,r,!1)}(e,n)}}}),Fc=jr.getCurrentFiberStackAddendum,kc=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],Uc=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],Bc=Uc.concat(["button"]),zc=["dd","dt","li","option","optgroup","p","rp","rt"],jc={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null},Vc={};(Ic=function(e,t,n){var r=(n=n||jc).current,o=r&&r.tag;null!=t&&(null!=e&&i(!1,"validateDOMNesting: when childText is passed, childTag should be null"),e="#text");var a=function(e,t){switch(t){case"select":return"option"===e||"optgroup"===e||"#text"===e;case"optgroup":return"option"===e||"#text"===e;case"option":return"#text"===e;case"tr":return"th"===e||"td"===e||"style"===e||"script"===e||"template"===e;case"tbody":case"thead":case"tfoot":return"tr"===e||"style"===e||"script"===e||"template"===e;case"colgroup":return"col"===e||"template"===e;case"table":return"caption"===e||"colgroup"===e||"tbody"===e||"tfoot"===e||"thead"===e||"style"===e||"script"===e||"template"===e;case"head":return"base"===e||"basefont"===e||"bgsound"===e||"link"===e||"meta"===e||"title"===e||"noscript"===e||"noframes"===e||"style"===e||"script"===e||"template"===e;case"html":return"head"===e||"body"===e;case"#document":return"html"===e}switch(e){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return"h1"!==t&&"h2"!==t&&"h3"!==t&&"h4"!==t&&"h5"!==t&&"h6"!==t;case"rp":case"rt":return-1===zc.indexOf(t);case"body":case"caption":case"col":case"colgroup":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return null==t}return!0}(e,o)?null:r,s=a?null:function(e,t){switch(e){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return t.pTagInButtonScope;case"form":return t.formTag||t.pTagInButtonScope;case"li":return t.listItemTagAutoclosing;case"dd":case"dt":return t.dlItemTagAutoclosing;case"button":return t.buttonTagInScope;case"a":return t.aTagInScope;case"nobr":return t.nobrTagInScope}return null}(e,n),c=a||s;if(c){var u=c.tag,l=Fc(),h=!!a+"|"+e+"|"+u+"|"+l;if(!Vc[h]){Vc[h]=!0;var d=e,f="";if("#text"===e?/\S/.test(t)?d="Text nodes":(d="Whitespace text nodes",f=" Make sure you don't have any extra whitespace between tags on each line of your source code."):d="<"+e+">",a){var p="";"table"===u&&"tr"===e&&(p+=" Add a <tbody> to your code to match the DOM tree generated by the browser."),i(!1,"validateDOMNesting(...): %s cannot appear as a child of <%s>.%s%s%s",d,u,f,p,l)}else i(!1,"validateDOMNesting(...): %s cannot appear as a descendant of <%s>.%s",d,u,l)}}}).updatedAncestorInfo=function(e,t,n){var r=a({},e||jc),i={tag:t,instance:n};return-1!==Uc.indexOf(t)&&(r.aTagInScope=null,r.buttonTagInScope=null,r.nobrTagInScope=null),-1!==Bc.indexOf(t)&&(r.pTagInButtonScope=null),-1!==kc.indexOf(t)&&"address"!==t&&"div"!==t&&"p"!==t&&(r.listItemTagAutoclosing=null,r.dlItemTagAutoclosing=null),r.current=i,"form"===t&&(r.formTag=i),"a"===t&&(r.aTagInScope=i),"button"===t&&(r.buttonTagInScope=i),"nobr"===t&&(r.nobrTagInScope=i),"p"===t&&(r.pTagInButtonScope=i),"li"===t&&(r.listItemTagAutoclosing=i),"dd"!==t&&"dt"!==t||(r.dlItemTagAutoclosing=i),r};var Gc=Ic;function Wc(){t(!1,"The current renderer does not support persistence. This error is likely caused by a bug in React. Please file an issue.")}var Hc=!1,Xc=Wc,qc=Wc,Yc=Wc,Jc=Wc,Qc=Wc,Zc=wc,Kc=_c,$c=Sc,eu=Mc,tu=Tc,nu=Ec,ru=Cc,iu=Pc,ou=Lc,au=Oc,su=Nc,cu=Rc,uu=Gc.updatedAncestorInfo,lu=fe,hu=ye,du=void 0;du="suppressHydrationWarning";var fu=null,pu=null;function mu(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function vu(e){return e}function gu(e,t){e.appendChild(t)}function yu(e,t,n,r,i){return $c(e,t,n,r),mu(t,n)}function bu(e,t){return"textarea"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"==typeof t.dangerouslySetInnerHTML.__html}function xu(e,t){return!!t.hidden}function wu(e,t,n,r){Gc(null,e,n.ancestorInfo);var i=Kc(e,t);return lu(r,i),i}var _u=_a,Su=!0,Mu=Ma,Tu=Ta,Au=!0;function Eu(e){hs(e,"")}function Cu(e,t){e.appendChild(t)}function Pu(e,t){e.nodeType===lr?e.parentNode.insertBefore(t,e):e.appendChild(t)}function Lu(e,t,n){e.insertBefore(t,n)}function Ou(e,t,n){e.nodeType===lr?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)}function Nu(e,t){e.removeChild(t)}function Ru(e,t){e.nodeType===lr?e.parentNode.removeChild(t):e.removeChild(t)}var Iu=!0;function Du(e){for(var t=e.nextSibling;t&&t.nodeType!==cr&&t.nodeType!==ur;)t=t.nextSibling;return t}function Fu(e){for(var t=e.firstChild;t&&t.nodeType!==cr&&t.nodeType!==ur;)t=t.nextSibling;return t}var ku=!0,Uu=!1,Bu=!1,zu=!1,ju=!0,Vu=!0,Gu=!1,Wu=!1,Hu=!0,Xu="undefined"!=typeof performance&&"function"==typeof performance.mark&&"function"==typeof performance.clearMarks&&"function"==typeof performance.measure&&"function"==typeof performance.clearMeasures,qu=null,Yu=null,Ju=null,Qu=!1,Zu=!1,Ku=!1,$u=0,el=0,tl=!1,nl=new Set,rl=function(e){return" "+e},il=function(e){performance.mark(rl(e))},ol=function(e,t,n){var r=rl(t),i=function(e,t){return(t?" ":" ")+e+(t?" Warning: "+t:"")}(e,n);try{performance.measure(i,r)}catch(e){}performance.clearMarks(r),performance.clearMeasures(i)},al=function(e,t){return e+" (#"+t+")"},sl=function(e,t,n){return null===n?e+" ["+(t?"update":"mount")+"]":e+"."+n},cl=function(e,t){var n=kr(e)||"Unknown",r=e._debugID,i=null!==e.alternate,o=sl(n,i,t);if(Qu&&nl.has(o))return!1;nl.add(o);var a=al(o,r);return il(a),!0},ul=function(e,t){var n=kr(e)||"Unknown",r=e._debugID,i=null!==e.alternate,o=sl(n,i,t);!function(e){performance.clearMarks(rl(e))}(al(o,r))},ll=function(e,t,n){var r=kr(e)||"Unknown",i=e._debugID,o=null!==e.alternate,a=sl(r,o,t),s=al(a,i);ol(a,s,n)},hl=function(e){switch(e.tag){case $:case te:case ne:case ee:case re:case ae:case oe:case ie:return!0;default:return!1}},dl=function(){null!==Yu&&null!==Ju&&ul(Ju,Yu),Ju=null,Yu=null,Ku=!1},fl=function(){for(var e=qu;e;)e._debugIsCurrentlyTiming&&ll(e,null,null),e=e.return},pl=function(e){null!==e.return&&pl(e.return),e._debugIsCurrentlyTiming&&cl(e,null)},ml=function(){null!==qu&&pl(qu)};function vl(){ku&&el++}function gl(e){if(ku){if(!Xu||hl(e))return;e._debugIsCurrentlyTiming=!1,ul(e,null)}}function yl(e){if(ku){if(!Xu||hl(e))return;if(qu=e.return,!e._debugIsCurrentlyTiming)return;e._debugIsCurrentlyTiming=!1,ll(e,null,null)}}function bl(e){if(ku){if(!Xu||hl(e))return;if(qu=e.return,!e._debugIsCurrentlyTiming)return;e._debugIsCurrentlyTiming=!1;ll(e,null,"An error was thrown inside this error boundary")}}function xl(e,t){if(ku){if(!Xu)return;if(dl(),!cl(e,t))return;Ju=e,Yu=t}}function wl(){if(ku){if(!Xu)return;if(null!==Yu&&null!==Ju)ll(Ju,Yu,Ku?"Scheduled a cascading update":null);Yu=null,Ju=null}}function _l(e,t){if(ku){if(!Xu)return;var n=null;if(null!==e)if(e.tag===$)n="A top-level update interrupted the previous render";else n="An update to "+(kr(e)||"Unknown")+" interrupted the previous render";else $u>1&&(n="There were cascading updates");$u=0;var r=t?"(React Tree Reconciliation: Completed Root)":"(React Tree Reconciliation: Yielded)";fl(),ol(r,"(React Tree Reconciliation)",n)}}var Sl=[],Ml=void 0;Ml=[];var Tl=-1;function Al(e){return{current:e}}function El(e,t){Tl<0?i(!1,"Unexpected pop."):(t!==Ml[Tl]&&i(!1,"Unexpected Fiber popped."),e.current=Sl[Tl],Sl[Tl]=null,Ml[Tl]=null,Tl--)}function Cl(e,t,n){Sl[++Tl]=e.current,Ml[Tl]=n,e.current=t}var Pl=void 0;Pl={};var Ll=Al(d),Ol=Al(!1),Nl=d;function Rl(e){return kl(e)?Nl:Ll.current}function Il(e,t,n){var r=e.stateNode;r.__reactInternalMemoizedUnmaskedChildContext=t,r.__reactInternalMemoizedMaskedChildContext=n}function Dl(e,t){var n=e.type.contextTypes;if(!n)return d;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={};for(var o in n)i[o]=t[o];var a=kr(e)||"Unknown";return c(n,i,"context",a,jr.getCurrentFiberStackAddendum),r&&Il(e,t,i),i}function Fl(){return Ol.current}function kl(e){return e.tag===K&&null!=e.type.childContextTypes}function Ul(e){kl(e)&&(El(Ol,e),El(Ll,e))}function Bl(e){El(Ol,e),El(Ll,e)}function zl(e,n,r){Ll.current!==d&&t(!1,"Unexpected context found on stack. This error is likely caused by a bug in React. Please file an issue."),Cl(Ll,n,e),Cl(Ol,r,e)}function jl(e,n){var r=e.stateNode,o=e.type.childContextTypes;if("function"!=typeof r.getChildContext){var s=kr(e)||"Unknown";return Pl[s]||(Pl[s]=!0,i(!1,"%s.childContextTypes is specified but there is no getChildContext() method on the instance. You can either define getChildContext() on %s or remove childContextTypes from it.",s,s)),n}var u;for(var l in jr.setCurrentPhase("getChildContext"),xl(e,"getChildContext"),u=r.getChildContext(),wl(),jr.setCurrentPhase(null),u)l in o||t(!1,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',kr(e)||"Unknown",l);var h=kr(e)||"Unknown";return c(o,u,"child context",h,jr.getCurrentFiberStackAddendum),a({},n,u)}function Vl(e){if(!kl(e))return!1;var t=e.stateNode,n=t&&t.__reactInternalMemoizedMergedChildContext||d;return Nl=Ll.current,Cl(Ll,n,e),Cl(Ol,Ol.current,e),!0}function Gl(e,n){var r=e.stateNode;if(r||t(!1,"Expected to have an instance by this point. This error is likely caused by a bug in React. Please file an issue."),n){var i=jl(e,Nl);r.__reactInternalMemoizedMergedChildContext=i,El(Ol,e),El(Ll,e),Cl(Ll,i,e),Cl(Ol,n,e)}else El(Ol,e),Cl(Ol,n,e)}var Wl=1073741823,Hl=0,Xl=1,ql=Wl,Yl=10,Jl=2;function Ql(e){return(e/Yl|0)+Jl}function Zl(e){return(e-Jl)*Yl}function Kl(e,t,n){return Jl+function(e,t){return(1+(e/t|0))*t}(e-Jl+t/Yl,n/Yl)}var $l=0,eh=1,th=2,nh=4,rh=void 0;rh=!1;try{var ih=Object.preventExtensions({}),oh=new Map([[ih,null]]),ah=new Set([ih]);oh.set(0,0),ah.add(0)}catch(e){rh=!0}var sh=void 0;sh=1;var ch=function(e,t,n,r){return new function(e,t,n,r){this.tag=e,this.key=n,this.type=null,this.stateNode=null,this.return=null,this.child=null,this.sibling=null,this.index=0,this.ref=null,this.pendingProps=t,this.memoizedProps=null,this.updateQueue=null,this.memoizedState=null,this.mode=r,this.effectTag=eo,this.nextEffect=null,this.firstEffect=null,this.lastEffect=null,this.expirationTime=Hl,this.alternate=null,Hu&&(this.actualDuration=0,this.actualStartTime=0,this.selfBaseTime=0,this.treeBaseTime=0),this._debugID=sh++,this._debugSource=null,this._debugOwner=null,this._debugIsCurrentlyTiming=!1,rh||"function"!=typeof Object.preventExtensions||Object.preventExtensions(this)}(e,t,n,r)};function uh(e,t,n){var r=e.alternate;return null===r?((r=ch(e.tag,t,e.key,e.mode)).type=e.type,r.stateNode=e.stateNode,r._debugID=e._debugID,r._debugSource=e._debugSource,r._debugOwner=e._debugOwner,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=eo,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null,Hu&&(r.actualDuration=0,r.actualStartTime=0)),r.expirationTime=n,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,Hu&&(r.selfBaseTime=e.selfBaseTime,r.treeBaseTime=e.treeBaseTime),r}function lh(e,n,r){var i;i=e._owner;var o=void 0,a=e.type,s=e.key,c=e.props,u=void 0;if("function"==typeof a)u=function(e){return!(!e.prototype||!e.prototype.isReactComponent)}(a)?K:Q;else if("string"==typeof a)u=te;else switch(a){case Ar:return hh(c.children,n,r,s);case Or:u=ie,n|=eh|th;break;case Er:u=ie,n|=th;break;case Cr:return function(e,n,r,i){"string"==typeof e.id&&"function"==typeof e.onRender||t(!1,'Profiler must specify an "id" string and "onRender" function as props');var o=ch(ce,e,i,n|nh);return o.type=Cr,o.expirationTime=r,o}(c,n,r,s);case Rr:u=ue,n|=th;break;default:u=function(e,n){switch("object"==typeof e&&null!==e?e.$$typeof:null){case Pr:return ae;case Lr:return oe;case Nr:return se;default:var r="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(r+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var i=n?kr(n):null;i&&(r+="\n\nCheck the render method of `"+i+"`."),t(!1,"Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",null==e?e:typeof e,r)}}(a,i)}return(o=ch(u,c,s,n)).type=a,o.expirationTime=r,o._debugSource=e._source,o._debugOwner=e._owner,o}function hh(e,t,n,r){var i=ch(re,e,r,t);return i.expirationTime=n,i}function dh(e,t,n){var r=ch(ne,e,null,t);return r.expirationTime=n,r}function fh(e,t,n){var r=null!==e.children?e.children:[],i=ch(ee,r,e.key,t);return i.expirationTime=n,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function ph(e,t){return null===e&&(e=ch(Q,null,null,$l)),e.tag=t.tag,e.key=t.key,e.type=t.type,e.stateNode=t.stateNode,e.return=t.return,e.child=t.child,e.sibling=t.sibling,e.index=t.index,e.ref=t.ref,e.pendingProps=t.pendingProps,e.memoizedProps=t.memoizedProps,e.updateQueue=t.updateQueue,e.memoizedState=t.memoizedState,e.mode=t.mode,e.effectTag=t.effectTag,e.nextEffect=t.nextEffect,e.firstEffect=t.firstEffect,e.lastEffect=t.lastEffect,e.expirationTime=t.expirationTime,e.alternate=t.alternate,Hu&&(e.actualDuration=t.actualDuration,e.actualStartTime=t.actualStartTime,e.selfBaseTime=t.selfBaseTime,e.treeBaseTime=t.treeBaseTime),e._debugID=t._debugID,e._debugSource=t._debugSource,e._debugOwner=t._debugOwner,e._debugIsCurrentlyTiming=t._debugIsCurrentlyTiming,e}function mh(e,t,n){var r=function(e){return ch($,null,null,e?eh|th:$l)}(t),i={current:r,containerInfo:e,pendingChildren:null,earliestPendingTime:Hl,latestPendingTime:Hl,earliestSuspendedTime:Hl,latestSuspendedTime:Hl,latestPingedTime:Hl,pendingCommitExpirationTime:Hl,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:Hl,firstBatch:null,nextScheduledRoot:null};return r.stateNode=i,i}var vh=null,gh=null,yh=!1;function bh(e){return function(t){try{return e(t)}catch(e){yh||(yh=!0,i(!1,"React DevTools encountered an error: %s",e))}}}function xh(e){"function"==typeof vh&&vh(e)}function wh(e){"function"==typeof gh&&gh(e)}var _h=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(!e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0,o="Warning: "+e.replace(/%s/g,function(){return n[i++]});"undefined"!=typeof console&&console.warn(o);try{throw new Error(o)}catch(e){}}).apply(void 0,[t].concat(r))}},Sh={discardPendingWarnings:function(){},flushPendingDeprecationWarnings:function(){},flushPendingUnsafeLifecycleWarnings:function(){},recordDeprecationWarnings:function(e,t){},recordUnsafeLifecycleWarnings:function(e,t){},recordLegacyContextWarning:function(e,t){},flushLegacyContextWarning:function(){}},Mh={UNSAFE_componentWillMount:"componentDidMount",UNSAFE_componentWillReceiveProps:"static getDerivedStateFromProps",UNSAFE_componentWillUpdate:"componentDidUpdate"},Th=[],Ah=[],Eh=[],Ch=new Map,Ph=new Map,Lh=new Set,Oh=new Set,Nh=new Set,Rh=function(e){var t=[];return e.forEach(function(e){t.push(e)}),t.sort().join(", ")};Sh.discardPendingWarnings=function(){Th=[],Ah=[],Eh=[],Ch=new Map,Ph=new Map},Sh.flushPendingUnsafeLifecycleWarnings=function(){Ch.forEach(function(e,t){var n=[];if(Object.keys(e).forEach(function(t){var r=e[t];if(r.length>0){var i=new Set;r.forEach(function(e){i.add(kr(e)||"Component"),Oh.add(e.type)});var o=t.replace("UNSAFE_",""),a=Mh[t],s=Rh(i);n.push(o+": Please update the following components to use "+a+" instead: "+s)}}),n.length>0){var r=Br(t);i(!1,"Unsafe lifecycle methods were found within a strict-mode tree:%s\n\n%s\n\nLearn more about this warning here:\nhttps://fb.me/react-strict-mode-warnings",r,n.join("\n\n"))}}),Ch=new Map};var Ih=function(e){for(var t=null,n=e;null!==n;)n.mode&th&&(t=n),n=n.return;return t};Sh.flushPendingDeprecationWarnings=function(){if(Th.length>0){var e=new Set;Th.forEach(function(t){e.add(kr(t)||"Component"),Lh.add(t.type)});var t=Rh(e);_h(!1,"componentWillMount is deprecated and will be removed in the next major version. Use componentDidMount instead. As a temporary workaround, you can rename to UNSAFE_componentWillMount.\n\nPlease update the following components: %s\n\nLearn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks",t),Th=[]}if(Ah.length>0){var n=new Set;Ah.forEach(function(e){n.add(kr(e)||"Component"),Lh.add(e.type)});var r=Rh(n);_h(!1,"componentWillReceiveProps is deprecated and will be removed in the next major version. Use static getDerivedStateFromProps instead.\n\nPlease update the following components: %s\n\nLearn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks",r),Ah=[]}if(Eh.length>0){var i=new Set;Eh.forEach(function(e){i.add(kr(e)||"Component"),Lh.add(e.type)});var o=Rh(i);_h(!1,"componentWillUpdate is deprecated and will be removed in the next major version. Use componentDidUpdate instead. As a temporary workaround, you can rename to UNSAFE_componentWillUpdate.\n\nPlease update the following components: %s\n\nLearn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks",o),Eh=[]}},Sh.recordDeprecationWarnings=function(e,t){Lh.has(e.type)||("function"==typeof t.componentWillMount&&!0!==t.componentWillMount.__suppressDeprecationWarning&&Th.push(e),"function"==typeof t.componentWillReceiveProps&&!0!==t.componentWillReceiveProps.__suppressDeprecationWarning&&Ah.push(e),"function"==typeof t.componentWillUpdate&&!0!==t.componentWillUpdate.__suppressDeprecationWarning&&Eh.push(e))},Sh.recordUnsafeLifecycleWarnings=function(e,t){var n=Ih(e);if(null!==n){if(!Oh.has(e.type)){var r=void 0;Ch.has(n)?r=Ch.get(n):(r={UNSAFE_componentWillMount:[],UNSAFE_componentWillReceiveProps:[],UNSAFE_componentWillUpdate:[]},Ch.set(n,r));var o=[];("function"==typeof t.componentWillMount&&!0!==t.componentWillMount.__suppressDeprecationWarning||"function"==typeof t.UNSAFE_componentWillMount)&&o.push("UNSAFE_componentWillMount"),("function"==typeof t.componentWillReceiveProps&&!0!==t.componentWillReceiveProps.__suppressDeprecationWarning||"function"==typeof t.UNSAFE_componentWillReceiveProps)&&o.push("UNSAFE_componentWillReceiveProps"),("function"==typeof t.componentWillUpdate&&!0!==t.componentWillUpdate.__suppressDeprecationWarning||"function"==typeof t.UNSAFE_componentWillUpdate)&&o.push("UNSAFE_componentWillUpdate"),o.length>0&&o.forEach(function(t){r[t].push(e)})}}else i(!1,"Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.")},Sh.recordLegacyContextWarning=function(e,t){var n=Ih(e);if(null!==n){if(!Nh.has(e.type)){var r=Ph.get(n);(null!=e.type.contextTypes||null!=e.type.childContextTypes||null!==t&&"function"==typeof t.getChildContext)&&(void 0===r&&(r=[],Ph.set(n,r)),r.push(e))}}else i(!1,"Expected to find a StrictMode component in a strict mode tree. This error is likely caused by a bug in React. Please file an issue.")},Sh.flushLegacyContextWarning=function(){Ph.forEach(function(e,t){var n=new Set;e.forEach(function(e){n.add(kr(e)||"Component"),Nh.add(e.type)});var r=Rh(n),o=Br(t);i(!1,"Legacy context API has been detected within a strict-mode tree: %s\n\nPlease update the following components: %s\n\nLearn more about this warning here:\nhttps://fb.me/react-strict-mode-warnings",o,r)})};var Dh={debugTool:null};function Fh(e,t){if(Bu){var n=e.earliestPendingTime;if(n===Hl)e.earliestPendingTime=e.latestPendingTime=t;else if(n>t)e.earliestPendingTime=t;else e.latestPendingTime<t&&(e.latestPendingTime=t)}}function kh(e){if(Bu){var t=e.earliestSuspendedTime,n=e.earliestPendingTime;return t===Hl?n:n!==Hl?n:e.latestPingedTime}return e.current.expirationTime}var Uh=0,Bh=1,zh=2,jh=3,Vh=!1,Gh=void 0,Wh=void 0,Hh=void 0;function Xh(e){return{expirationTime:Hl,baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function qh(e){return{expirationTime:e.expirationTime,baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Yh(e){return{expirationTime:e,tag:Uh,payload:null,callback:null,next:null,nextEffect:null}}function Jh(e,t,n){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t),(e.expirationTime===Hl||e.expirationTime>n)&&(e.expirationTime=n)}function Qh(e,t,n){var r=e.alternate,o=void 0,a=void 0;null===r?(a=null,null===(o=e.updateQueue)&&(o=e.updateQueue=Xh(e.memoizedState))):(o=e.updateQueue,a=r.updateQueue,null===o?null===a?(o=e.updateQueue=Xh(e.memoizedState),a=r.updateQueue=Xh(r.memoizedState)):o=e.updateQueue=qh(a):null===a&&(a=r.updateQueue=qh(o))),null===a||o===a?Jh(o,t,n):null===o.lastUpdate||null===a.lastUpdate?(Jh(o,t,n),Jh(a,t,n)):(Jh(o,t,n),a.lastUpdate=t),e.tag!==K||Wh!==o&&(null===a||Wh!==a)||Gh||(i(!1,"An update (setState, replaceState, or forceUpdate) was scheduled from inside an update function. Update functions should be pure, with zero side-effects. Consider using componentDidUpdate or a callback."),Gh=!0)}function Zh(e,t,n){var r=e.updateQueue;null===(r=null===r?e.updateQueue=Xh(e.memoizedState):Kh(e,r)).lastCapturedUpdate?r.firstCapturedUpdate=r.lastCapturedUpdate=t:(r.lastCapturedUpdate.next=t,r.lastCapturedUpdate=t),(r.expirationTime===Hl||r.expirationTime>n)&&(r.expirationTime=n)}function Kh(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=qh(t)),t}function $h(e,t,n,r,i,o){switch(n.tag){case Bh:var s=n.payload;return"function"==typeof s?((zu||ju&&e.mode&th)&&s.call(o,r,i),s.call(o,r,i)):s;case jh:e.effectTag=e.effectTag&~po|co;case Uh:var c=n.payload,u=void 0;return"function"==typeof c?((zu||ju&&e.mode&th)&&c.call(o,r,i),u=c.call(o,r,i)):u=c,null===u||void 0===u?r:a({},r,u);case zh:return Vh=!0,r}return r}function ed(e,t,n,r,i){if(Vh=!1,!(t.expirationTime===Hl||t.expirationTime>i)){t=Kh(e,t),Wh=t;for(var o=t.baseState,a=null,s=Hl,c=t.firstUpdate,u=o;null!==c;){var l=c.expirationTime;if(l>i)null===a&&(a=c,o=u),(s===Hl||s>l)&&(s=l);else u=$h(e,0,c,u,n,r),null!==c.callback&&(e.effectTag|=so,c.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=c:(t.lastEffect.nextEffect=c,t.lastEffect=c));c=c.next}var h=null;for(c=t.firstCapturedUpdate;null!==c;){var d=c.expirationTime;if(d>i)null===h&&(h=c,null===a&&(o=u)),(s===Hl||s>d)&&(s=d);else u=$h(e,0,c,u,n,r),null!==c.callback&&(e.effectTag|=so,c.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=c:(t.lastCapturedEffect.nextEffect=c,t.lastCapturedEffect=c));c=c.next}null===a&&(t.lastUpdate=null),null===h?t.lastCapturedUpdate=null:e.effectTag|=so,null===a&&null===h&&(o=u),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=h,t.expirationTime=s,e.memoizedState=u,Wh=null}}function td(e,n){"function"!=typeof e&&t(!1,"Invalid argument passed as callback. Expected a function. Instead received: %s",e),e.call(n)}function nd(){Vh=!1}function rd(){return Vh}function id(e,t,n,r){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null);var i=t.firstEffect;for(t.firstEffect=t.lastEffect=null;null!==i;){var o=i.callback;null!==o&&(i.callback=null,td(o,n)),i=i.nextEffect}for(i=t.firstCapturedEffect,t.firstCapturedEffect=t.lastCapturedEffect=null;null!==i;){var a=i.callback;null!==a&&(i.callback=null,td(a,n)),i=i.nextEffect}}function od(e,t){return{value:e,source:t,stack:Br(t)}}Gh=!1,Wh=null,Hh=function(){Wh=null};var ad=Al(null),sd=Al(null),cd=Al(0),ud=void 0;function ld(e){var t=e.type._context;Su?(Cl(cd,t._changedBits,e),Cl(sd,t._currentValue,e),Cl(ad,e,e),t._currentValue=e.pendingProps.value,t._changedBits=e.stateNode,void 0!==t._currentRenderer&&null!==t._currentRenderer&&t._currentRenderer!==ud&&i(!1,"Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),t._currentRenderer=ud):(Cl(cd,t._changedBits2,e),Cl(sd,t._currentValue2,e),Cl(ad,e,e),t._currentValue2=e.pendingProps.value,t._changedBits2=e.stateNode,void 0!==t._currentRenderer2&&null!==t._currentRenderer2&&t._currentRenderer2!==ud&&i(!1,"Detected multiple renderers concurrently rendering the same context provider. This is currently unsupported."),t._currentRenderer2=ud)}function hd(e){var t=cd.current,n=sd.current;El(ad,e),El(sd,e),El(cd,e);var r=e.type._context;Su?(r._currentValue=n,r._changedBits=t):(r._currentValue2=n,r._changedBits2=t)}ud={};var dd={},fd=Al(dd),pd=Al(dd),md=Al(dd);function vd(e){return e===dd&&t(!1,"Expected host context to exist. This error is likely caused by a bug in React. Please file an issue."),e}function gd(){return vd(md.current)}function yd(e,t){Cl(md,t,e),Cl(pd,e,e),Cl(fd,dd,e);var n=function(e){var t=void 0,n=void 0,r=e.nodeType;switch(r){case hr:case dr:t=r===hr?"#document":"#fragment";var i=e.documentElement;n=i?i.namespaceURI:cs(null,"");break;default:var o=r===lr?e.parentNode:e;n=cs(o.namespaceURI||null,t=o.tagName)}var a=t.toLowerCase();return{namespace:n,ancestorInfo:uu(null,a,null)}}(t);El(fd,e),Cl(fd,n,e)}function bd(e){El(fd,e),El(pd,e),El(md,e)}function xd(){return vd(fd.current)}function wd(e){vd(md.current);var t=vd(fd.current),n=function(e,t,n){var r=e;return{namespace:cs(r.namespace,t),ancestorInfo:uu(r.ancestorInfo,t,null)}}(t,e.type);t!==n&&(Cl(pd,e,e),Cl(fd,n,e))}function _d(e){pd.current===e&&(El(fd,e),El(pd,e))}var Sd=0;var Md=void 0;Md=[];var Td=0,Ad=0;function Ed(){Hu&&0===Td&&(Td=_u())}function Cd(e){Hu&&(e!==Md.pop()&&i(!1,"Unexpected Fiber (%s) popped.",kr(e)),e.actualDuration=_u()-Ad-e.actualDuration)}function Pd(){Hu&&Td>0&&(Ad+=_u()-Td,Td=0)}var Ld=-1;function Od(){Hu&&(Ld=-1)}var Nd,Rd={},Id=Array.isArray,Dd=void 0,Fd=void 0,kd=void 0,Ud=void 0,Bd=void 0,zd=void 0;Dd=new Set,Fd=new Set,kd=new Set,Ud=new Set,Bd=new Set;var jd=new Set;function Vd(e,t,n){var r=e.memoizedState;(zu||ju&&e.mode&th)&&t(n,r);var i=t(n,r);zd(e,i);var o=null===i||void 0===i?r:a({},r,i);e.memoizedState=o;var s=e.updateQueue;null!==s&&s.expirationTime===Hl&&(s.baseState=o)}Nd=function(e,t){if(null!==e&&"function"!=typeof e){var n=t+"_"+e;jd.has(n)||(jd.add(n),i(!1,"%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",t,e))}},zd=function(e,t){if(void 0===t){var n=kr(e)||"Component";Bd.has(n)||(Bd.add(n),i(!1,"%s.getDerivedStateFromProps(): A valid state object (or null) must be returned. You have returned undefined.",n))}},Object.defineProperty(Rd,"_processChildContext",{enumerable:!1,value:function(){t(!1,"_processChildContext is not available in React 16+. This likely means you have multiple copies of React and are attempting to nest a React 15 tree inside a React 16 tree using unstable_renderSubtreeIntoContainer, which isn't supported. Try to make sure you have only one copy of React (and ideally, switch to ReactDOM.createPortal).")}}),Object.freeze(Rd);var Gd={isMounted:function(e){var t=xr.current;if(null!==t&&t.tag===K){var n=t,r=n.stateNode;r._warnedAboutRefsInRender||i(!1,"%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",kr(n)||"A component"),r._warnedAboutRefsInRender=!0}var o=$i(e);return!!o&&yo(o)===vo},enqueueSetState:function(e,t,n){var r=$i(e),i=im(sm(),r),o=Yh(i);o.payload=t,void 0!==n&&null!==n&&(Nd(n,"setState"),o.callback=n),Qh(r,o,i),am(r,i)},enqueueReplaceState:function(e,t,n){var r=$i(e),i=im(sm(),r),o=Yh(i);o.tag=Bh,o.payload=t,void 0!==n&&null!==n&&(Nd(n,"replaceState"),o.callback=n),Qh(r,o,i),am(r,i)},enqueueForceUpdate:function(e,t){var n=$i(e),r=im(sm(),n),i=Yh(r);i.tag=zh,void 0!==t&&null!==t&&(Nd(t,"forceUpdate"),i.callback=t),Qh(n,i,r),am(n,r)}};function Wd(e,t,n,r,o,a){var s=e.stateNode,c=e.type;if("function"==typeof s.shouldComponentUpdate){xl(e,"shouldComponentUpdate");var u=s.shouldComponentUpdate(n,o,a);return wl(),void 0===u&&i(!1,"%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",kr(e)||"Component"),u}return!c.prototype||!c.prototype.isPureReactComponent||(!l(t,n)||!l(r,o))}function Hd(e,t){t.updater=Gd,e.stateNode=t,function(e,t){e._reactInternalFiber=t}(t,e),t._reactInternalInstance=Rd}function Xd(e,t,n){var r=e.type,o=Rl(e),a=function(e){return e.tag===K&&null!=e.type.contextTypes}(e),s=a?Dl(e,o):d;(zu||ju&&e.mode&th)&&new r(t,s);var c=new r(t,s),u=e.memoizedState=null!==c.state&&void 0!==c.state?c.state:null;if(Hd(e,c),"function"==typeof r.getDerivedStateFromProps&&null===u){var l=kr(e)||"Component";Fd.has(l)||(Fd.add(l),i(!1,"%s: Did not properly initialize state during construction. Expected state to be an object, but it was %s.",l,null===c.state?"null":"undefined"))}if("function"==typeof r.getDerivedStateFromProps||"function"==typeof c.getSnapshotBeforeUpdate){var h=null,f=null,p=null;if("function"==typeof c.componentWillMount&&!0!==c.componentWillMount.__suppressDeprecationWarning?h="componentWillMount":"function"==typeof c.UNSAFE_componentWillMount&&(h="UNSAFE_componentWillMount"),"function"==typeof c.componentWillReceiveProps&&!0!==c.componentWillReceiveProps.__suppressDeprecationWarning?f="componentWillReceiveProps":"function"==typeof c.UNSAFE_componentWillReceiveProps&&(f="UNSAFE_componentWillReceiveProps"),"function"==typeof c.componentWillUpdate&&!0!==c.componentWillUpdate.__suppressDeprecationWarning?p="componentWillUpdate":"function"==typeof c.UNSAFE_componentWillUpdate&&(p="UNSAFE_componentWillUpdate"),null!==h||null!==f||null!==p){var m=kr(e)||"Component",v="function"==typeof r.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";Ud.has(m)||(Ud.add(m),i(!1,"Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n%s uses %s but also contains the following legacy lifecycles:%s%s%s\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks",m,v,null!==h?"\n  "+h:"",null!==f?"\n  "+f:"",null!==p?"\n  "+p:""))}}return a&&Il(e,o,s),c}function qd(e,t,n,r){var o=t.state;if(xl(e,"componentWillReceiveProps"),"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),wl(),t.state!==o){var a=kr(e)||"Component";Dd.has(a)||(Dd.add(a),i(!1,"%s.componentWillReceiveProps(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",a)),Gd.enqueueReplaceState(t,t.state,null)}}function Yd(e,t){var n=e.type;!function(e){var t=e.stateNode,n=e.type,r=kr(e)||"Component";t.render||(n.prototype&&"function"==typeof n.prototype.render?i(!1,"%s(...): No `render` method found on the returned component instance: did you accidentally return an object from the constructor?",r):i(!1,"%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",r)),!t.getInitialState||t.getInitialState.isReactClassApproved||t.state||i(!1,"getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",r),!t.getDefaultProps||t.getDefaultProps.isReactClassApproved||i(!1,"getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",r),!t.propTypes||i(!1,"propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",r),!t.contextTypes||i(!1,"contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",r),"function"!=typeof t.componentShouldUpdate||i(!1,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",r),n.prototype&&n.prototype.isPureReactComponent&&void 0!==t.shouldComponentUpdate&&i(!1,"%s has a method called shouldComponentUpdate(). shouldComponentUpdate should not be used when extending React.PureComponent. Please extend React.Component if shouldComponentUpdate is used.",kr(e)||"A pure component"),"function"!=typeof t.componentDidUnmount||i(!1,"%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",r),"function"!=typeof t.componentDidReceiveProps||i(!1,"%s has a method called componentDidReceiveProps(). But there is no such lifecycle method. If you meant to update the state in response to changing props, use componentWillReceiveProps(). If you meant to fetch data or run side-effects or mutations after React has updated the UI, use componentDidUpdate().",r),"function"!=typeof t.componentWillRecieveProps||i(!1,"%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",r),"function"!=typeof t.UNSAFE_componentWillRecieveProps||i(!1,"%s has a method called UNSAFE_componentWillRecieveProps(). Did you mean UNSAFE_componentWillReceiveProps()?",r);var o=t.props!==e.pendingProps;void 0!==t.props&&o&&i(!1,"%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",r,r),!t.defaultProps||i(!1,"Setting defaultProps as an instance property on %s is not supported and will be ignored. Instead, define defaultProps as a static property on %s.",r,r),"function"!=typeof t.getSnapshotBeforeUpdate||"function"==typeof t.componentDidUpdate||kd.has(n)||(kd.add(n),i(!1,"%s: getSnapshotBeforeUpdate() should be used with componentDidUpdate(). This component defines getSnapshotBeforeUpdate() only.",kr(e))),"function"!=typeof t.getDerivedStateFromProps||i(!1,"%s: getDerivedStateFromProps() is defined as an instance method and will be ignored. Instead, declare it as a static method.",r),"function"!=typeof t.getDerivedStateFromCatch||i(!1,"%s: getDerivedStateFromCatch() is defined as an instance method and will be ignored. Instead, declare it as a static method.",r),"function"!=typeof n.getSnapshotBeforeUpdate||i(!1,"%s: getSnapshotBeforeUpdate() is defined as a static method and will be ignored. Instead, declare it as an instance method.",r);var a=t.state;a&&("object"!=typeof a||Id(a))&&i(!1,"%s.state: must be set to an object or null",r),"function"==typeof t.getChildContext&&"object"!=typeof n.childContextTypes&&i(!1,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",r)}(e);var r=e.stateNode,o=e.pendingProps,a=Rl(e);r.props=o,r.state=e.memoizedState,r.refs=d,r.context=Dl(e,a),e.mode&th&&(Sh.recordUnsafeLifecycleWarnings(e,r),Sh.recordLegacyContextWarning(e,r)),Gu&&Sh.recordDeprecationWarnings(e,r);var s=e.updateQueue;null!==s&&(ed(e,s,o,r,t),r.state=e.memoizedState);var c=e.type.getDerivedStateFromProps;"function"==typeof c&&(Vd(e,c,o),r.state=e.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof r.getSnapshotBeforeUpdate||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(!function(e,t){xl(e,"componentWillMount");var n=t.state;"function"==typeof t.componentWillMount&&t.componentWillMount(),"function"==typeof t.UNSAFE_componentWillMount&&t.UNSAFE_componentWillMount(),wl(),n!==t.state&&(i(!1,"%s.componentWillMount(): Assigning directly to this.state is deprecated (except inside a component's constructor). Use setState instead.",kr(e)||"Component"),Gd.enqueueReplaceState(t,t.state,null))}(e,r),null!==(s=e.updateQueue)&&(ed(e,s,o,r,t),r.state=e.memoizedState)),"function"==typeof r.componentDidMount&&(e.effectTag|=ro)}var Jd=jr.getCurrentFiberStackAddendum,Qd=void 0,Zd=void 0,Kd=void 0,$d=void 0,ef=function(e){};Qd=!1,Zd={},Kd={},$d={},ef=function(e){if(null!==e&&"object"==typeof e&&e._store&&!e._store.validated&&null==e.key){"object"!=typeof e._store&&t(!1,"React Component in warnForMissingKey should have a _store. This error is likely caused by a bug in React. Please file an issue."),e._store.validated=!0;var n='Each child in an array or iterator should have a unique "key" prop. See https://fb.me/react-warning-keys for more information.'+(Jd()||"");Kd[n]||(Kd[n]=!0,i(!1,'Each child in an array or iterator should have a unique "key" prop. See https://fb.me/react-warning-keys for more information.%s',Jd()))}};var tf=Array.isArray;function nf(e,n,r){var o=r.ref;if(null!==o&&"function"!=typeof o&&"object"!=typeof o){if(e.mode&th){var a=kr(e)||"Component";Zd[a]||(i(!1,'A string ref, "%s",has been found within a strict mode tree. String refs are a source of potential bugs and should be avoided. We recommend using createRef() instead.\n%s\n\nLearn more about using refs safely here:\nhttps://fb.me/react-strict-mode-string-ref',o,Br(e)),Zd[a]=!0)}if(r._owner){var s=r._owner,c=void 0;if(s){var u=s;u.tag!==K&&t(!1,"Stateless function components cannot have refs."),c=u.stateNode}c||t(!1,"Missing owner for string ref %s. This error is likely caused by a bug in React. Please file an issue.",o);var l=""+o;if(null!==n&&null!==n.ref&&"function"==typeof n.ref&&n.ref._stringRef===l)return n.ref;var h=function(e){var t=c.refs===d?c.refs={}:c.refs;null===e?delete t[l]:t[l]=e};return h._stringRef=l,h}"string"!=typeof o&&t(!1,"Expected ref to be a function or a string."),r._owner||t(!1,"Element ref was specified as a string (%s) but no owner was set. This could happen for one of the following reasons:\n1. You may be adding a ref to a functional component\n2. You may be adding a ref to a component that was not created inside a component's render method\n3. You have multiple copies of React loaded\nSee https://fb.me/react-refs-must-have-owner for more information.",o)}return o}function rf(e,n){if("textarea"!==e.type){var r;r=" If you meant to render a collection of children, use an array instead."+(Jd()||""),t(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===Object.prototype.toString.call(n)?"object with keys {"+Object.keys(n).join(", ")+"}":n,r)}}function of(){var e="Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it."+(Jd()||"");$d[e]||($d[e]=!0,i(!1,"Functions are not valid as a React child. This may happen if you return a Component instead of <Component /> from render. Or maybe you meant to call this function rather than return it.%s",Jd()||""))}function af(e){function n(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=oo}}function r(t,r){if(!e)return null;for(var i=r;null!==i;)n(t,i),i=i.sibling;return null}function o(e,t){for(var n=new Map,r=t;null!==r;)null!==r.key?n.set(r.key,r):n.set(r.index,r),r=r.sibling;return n}function a(e,t,n){var r=uh(e,t,n);return r.index=0,r.sibling=null,r}function s(t,n,r){if(t.index=r,!e)return n;var i=t.alternate;if(null!==i){var o=i.index;return o<n?(t.effectTag=no,n):o}return t.effectTag=no,n}function c(t){return e&&null===t.alternate&&(t.effectTag=no),t}function u(e,t,n,r){if(null===t||t.tag!==ne){var i=dh(n,e.mode,r);return i.return=e,i}var o=a(t,n,r);return o.return=e,o}function l(e,t,n,r){if(null!==t&&t.type===n.type){var i=a(t,n.props,r);return i.ref=nf(e,t,n),i.return=e,i._debugSource=n._source,i._debugOwner=n._owner,i}var o=lh(n,e.mode,r);return o.ref=nf(e,t,n),o.return=e,o}function h(e,t,n,r){if(null===t||t.tag!==ee||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation){var i=fh(n,e.mode,r);return i.return=e,i}var o=a(t,n.children||[],r);return o.return=e,o}function d(e,t,n,r,i){if(null===t||t.tag!==re){var o=hh(n,e.mode,r,i);return o.return=e,o}var s=a(t,n,r);return s.return=e,s}function f(e,t,n){if("string"==typeof t||"number"==typeof t){var r=dh(""+t,e.mode,n);return r.return=e,r}if("object"==typeof t&&null!==t){switch(t.$$typeof){case Mr:var i=lh(t,e.mode,n);return i.ref=nf(e,null,t),i.return=e,i;case Tr:var o=fh(t,e.mode,n);return o.return=e,o}if(tf(t)||Fr(t)){var a=hh(t,e.mode,n,null);return a.return=e,a}rf(e,t)}return"function"==typeof t&&of(),null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Mr:return n.key===i?n.type===Ar?d(e,t,n.props.children,r,i):l(e,t,n,r):null;case Tr:return n.key===i?h(e,t,n,r):null}if(tf(n)||Fr(n))return null!==i?null:d(e,t,n,r,null);rf(e,n)}return"function"==typeof n&&of(),null}function m(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return u(t,e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Mr:var o=e.get(null===r.key?n:r.key)||null;return r.type===Ar?d(t,o,r.props.children,i,r.key):l(t,o,r,i);case Tr:return h(t,e.get(null===r.key?n:r.key)||null,r,i)}if(tf(r)||Fr(r))return d(t,e.get(n)||null,r,i,null);rf(t,r)}return"function"==typeof r&&of(),null}function v(e,t){if("object"!=typeof e||null===e)return t;switch(e.$$typeof){case Mr:case Tr:ef(e);var n=e.key;if("string"!=typeof n)break;if(null===t){(t=new Set).add(n);break}if(!t.has(n)){t.add(n);break}i(!1,"Encountered two children with the same key, `%s`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted  the behavior is unsupported and could change in a future version.%s",n,Jd())}return t}return function(u,l,h,d){var g="object"==typeof h&&null!==h&&h.type===Ar&&null===h.key;g&&(h=h.props.children);var y="object"==typeof h&&null!==h;if(y)switch(h.$$typeof){case Mr:return c(function(e,t,i,o){for(var s=i.key,c=t;null!==c;){if(c.key===s){if(c.tag===re?i.type===Ar:c.type===i.type){r(e,c.sibling);var u=a(c,i.type===Ar?i.props.children:i.props,o);return u.ref=nf(e,c,i),u.return=e,u._debugSource=i._source,u._debugOwner=i._owner,u}r(e,c);break}n(e,c),c=c.sibling}if(i.type===Ar){var l=hh(i.props.children,e.mode,o,i.key);return l.return=e,l}var h=lh(i,e.mode,o);return h.ref=nf(e,t,i),h.return=e,h}(u,l,h,d));case Tr:return c(function(e,t,i,o){for(var s=i.key,c=t;null!==c;){if(c.key===s){if(c.tag===ee&&c.stateNode.containerInfo===i.containerInfo&&c.stateNode.implementation===i.implementation){r(e,c.sibling);var u=a(c,i.children||[],o);return u.return=e,u}r(e,c);break}n(e,c),c=c.sibling}var l=fh(i,e.mode,o);return l.return=e,l}(u,l,h,d))}if("string"==typeof h||"number"==typeof h)return c(function(e,t,n,i){if(null!==t&&t.tag===ne){r(e,t.sibling);var o=a(t,n,i);return o.return=e,o}r(e,t);var s=dh(n,e.mode,i);return s.return=e,s}(u,l,""+h,d));if(tf(h))return function(t,i,a,c){for(var u=null,l=0;l<a.length;l++)u=v(a[l],u);for(var h=null,d=null,g=i,y=0,b=0,x=null;null!==g&&b<a.length;b++){g.index>b?(x=g,g=null):x=g.sibling;var w=p(t,g,a[b],c);if(null===w){null===g&&(g=x);break}e&&g&&null===w.alternate&&n(t,g),y=s(w,y,b),null===d?h=w:d.sibling=w,d=w,g=x}if(b===a.length)return r(t,g),h;if(null===g){for(;b<a.length;b++){var _=f(t,a[b],c);_&&(y=s(_,y,b),null===d?h=_:d.sibling=_,d=_)}return h}for(var S=o(0,g);b<a.length;b++){var M=m(S,t,b,a[b],c);M&&(e&&null!==M.alternate&&S.delete(null===M.key?b:M.key),y=s(M,y,b),null===d?h=M:d.sibling=M,d=M)}return e&&S.forEach(function(e){return n(t,e)}),h}(u,l,h,d);if(Fr(h))return function(a,c,u,l){var h=Fr(u);"function"!=typeof h&&t(!1,"An object is not an iterable. This error is likely caused by a bug in React. Please file an issue."),u.entries===h&&(Qd||i(!1,"Using Maps as children is unsupported and will likely yield unexpected results. Convert it to a sequence/iterable of keyed ReactElements instead.%s",Jd()),Qd=!0);var d=h.call(u);if(d)for(var g=null,y=d.next();!y.done;y=d.next())g=v(y.value,g);var b=h.call(u);null==b&&t(!1,"An iterable object provided no iterator.");for(var x=null,w=null,_=c,S=0,M=0,T=null,A=b.next();null!==_&&!A.done;M++,A=b.next()){_.index>M?(T=_,_=null):T=_.sibling;var E=p(a,_,A.value,l);if(null===E){_||(_=T);break}e&&_&&null===E.alternate&&n(a,_),S=s(E,S,M),null===w?x=E:w.sibling=E,w=E,_=T}if(A.done)return r(a,_),x;if(null===_){for(;!A.done;M++,A=b.next()){var C=f(a,A.value,l);null!==C&&(S=s(C,S,M),null===w?x=C:w.sibling=C,w=C)}return x}for(var P=o(0,_);!A.done;M++,A=b.next()){var L=m(P,a,M,A.value,l);null!==L&&(e&&null!==L.alternate&&P.delete(null===L.key?M:L.key),S=s(L,S,M),null===w?x=L:w.sibling=L,w=L)}return e&&P.forEach(function(e){return n(a,e)}),x}(u,l,h,d);if(y&&rf(u,h),"function"==typeof h&&of(),void 0===h&&!g)switch(u.tag){case K:if(u.stateNode.render._isMockFunction)break;case Z:var b=u.type;t(!1,"%s(...): Nothing was returned from render. This usually means a return statement is missing. Or, to render nothing, return null.",b.displayName||b.name||"Component")}return r(u,l)}}var sf=af(!0),cf=af(!1);var uf=null,lf=null,hf=!1;function df(e,t){switch(e.tag){case $:!function(e,t){1===t.nodeType?ou(e,t):au(e,t)}(e.stateNode.containerInfo,t);break;case te:!function(e,t,n,r){!0!==t[du]&&(1===r.nodeType?ou(n,r):au(n,r))}(e.type,e.memoizedProps,e.stateNode,t)}var n=function(){var e=ch(te,null,null,$l);return e.type="DELETED",e}();n.stateNode=t,n.return=e,n.effectTag=oo,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function ff(e,t){switch(t.effectTag|=no,e.tag){case $:var n=e.stateNode.containerInfo;switch(t.tag){case te:!function(e,t,n){su(e,t,n)}(n,t.type,t.pendingProps);break;case ne:!function(e,t){cu(e,t)}(n,t.pendingProps)}break;case te:e.type;var r=e.memoizedProps,i=e.stateNode;switch(t.tag){case te:!function(e,t,n,r,i){!0!==t[du]&&su(n,r,i)}(0,r,i,t.type,t.pendingProps);break;case ne:!function(e,t,n,r){!0!==t[du]&&cu(n,r)}(0,r,i,t.pendingProps)}break;default:return}}function pf(e,t){switch(e.tag){case te:var n=e.type,r=(e.pendingProps,function(e,t,n){return e.nodeType!==cr||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e}(t,n));return null!==r&&(e.stateNode=r,!0);case ne:var i=function(e,t){return""===t||e.nodeType!==ur?null:e}(t,e.pendingProps);return null!==i&&(e.stateNode=i,!0);default:return!1}}function mf(e){if(hf){var t=lf;if(!t)return ff(uf,e),hf=!1,void(uf=e);var n=t;if(!pf(e,t)){if(!(t=Du(n))||!pf(e,t))return ff(uf,e),hf=!1,void(uf=e);df(uf,n)}uf=e,lf=Fu(t)}}function vf(e,n,r){Iu||t(!1,"Expected prepareToHydrateHostInstance() to never be called. This error is likely caused by a bug in React. Please file an issue.");var i=function(e,t,n,r,i,o){var a;return lu(o,e),hu(e,n),a=i.namespace,nu(e,t,n,a,r)}(e.stateNode,e.type,e.memoizedProps,n,r,e);return e.updateQueue=i,null!==i}function gf(e){Iu||t(!1,"Expected prepareToHydrateHostTextInstance() to never be called. This error is likely caused by a bug in React. Please file an issue.");var n=e.stateNode,r=e.memoizedProps,i=function(e,t,n){return lu(n,e),ru(e,t)}(n,r,e);if(i){var o=uf;if(null!==o)switch(o.tag){case $:o.stateNode.containerInfo;!function(e,t,n){iu(t,n)}(0,n,r);break;case te:o.type;var a=o.memoizedProps;o.stateNode;!function(e,t,n,r,i){!0!==t[du]&&iu(r,i)}(0,a,0,n,r)}}return i}function yf(e){for(var t=e.return;null!==t&&t.tag!==te&&t.tag!==$;)t=t.return;uf=t}function bf(e){if(!Iu)return!1;if(e!==uf)return!1;if(!hf)return yf(e),hf=!0,!1;var t=e.type;if(e.tag!==te||"head"!==t&&"body"!==t&&!bu(t,e.memoizedProps))for(var n=lf;n;)df(e,n),n=Du(n);return yf(e),lf=uf?Du(e.stateNode):null,!0}function xf(){Iu&&(uf=null,lf=null,hf=!1)}var wf=jr.getCurrentFiberStackAddendum,_f=void 0,Sf=void 0,Mf=void 0;function Tf(e,t,n){Af(e,t,n,t.expirationTime)}function Af(e,t,n,r){t.child=null===e?cf(t,null,n,r):sf(t,e.child,n,r)}function Ef(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=uo)}function Cf(e,t,n){var r=Vl(t),i=void 0;return null===e?null===t.stateNode?(Xd(t,t.pendingProps),Yd(t,n),i=!0):i=function(e,t){var n=e.type,r=e.stateNode,i=e.memoizedProps,o=e.pendingProps;r.props=i;var a=r.context,s=Dl(e,Rl(e)),c=n.getDerivedStateFromProps,u="function"==typeof c||"function"==typeof r.getSnapshotBeforeUpdate;u||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||i===o&&a===s||qd(e,r,o,s),nd();var l=e.memoizedState,h=r.state=l,d=e.updateQueue;if(null!==d&&(ed(e,d,o,r,t),h=e.memoizedState),i===o&&l===h&&!Fl()&&!rd())return"function"==typeof r.componentDidMount&&(e.effectTag|=ro),!1;"function"==typeof c&&(Vd(e,c,o),h=e.memoizedState);var f=rd()||Wd(e,i,o,l,h,s);return f?(u||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||(xl(e,"componentWillMount"),"function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),wl()),"function"==typeof r.componentDidMount&&(e.effectTag|=ro)):("function"==typeof r.componentDidMount&&(e.effectTag|=ro),e.memoizedProps=o,e.memoizedState=h),r.props=o,r.state=h,r.context=s,f}(t,n):i=function(e,t,n){var r=t.type,i=t.stateNode,o=t.memoizedProps,a=t.pendingProps;i.props=o;var s=i.context,c=Dl(t,Rl(t)),u=r.getDerivedStateFromProps,l="function"==typeof u||"function"==typeof i.getSnapshotBeforeUpdate;l||"function"!=typeof i.UNSAFE_componentWillReceiveProps&&"function"!=typeof i.componentWillReceiveProps||o===a&&s===c||qd(t,i,a,c),nd();var h=t.memoizedState,d=i.state=h,f=t.updateQueue;if(null!==f&&(ed(t,f,a,i,n),d=t.memoizedState),o===a&&h===d&&!Fl()&&!rd())return"function"==typeof i.componentDidUpdate&&(o===e.memoizedProps&&h===e.memoizedState||(t.effectTag|=ro)),"function"==typeof i.getSnapshotBeforeUpdate&&(o===e.memoizedProps&&h===e.memoizedState||(t.effectTag|=lo)),!1;"function"==typeof u&&(Vd(t,u,a),d=t.memoizedState);var p=rd()||Wd(t,o,a,h,d,c);return p?(l||"function"!=typeof i.UNSAFE_componentWillUpdate&&"function"!=typeof i.componentWillUpdate||(xl(t,"componentWillUpdate"),"function"==typeof i.componentWillUpdate&&i.componentWillUpdate(a,d,c),"function"==typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(a,d,c),wl()),"function"==typeof i.componentDidUpdate&&(t.effectTag|=ro),"function"==typeof i.getSnapshotBeforeUpdate&&(t.effectTag|=lo)):("function"==typeof i.componentDidUpdate&&(o===e.memoizedProps&&h===e.memoizedState||(t.effectTag|=ro)),"function"==typeof i.getSnapshotBeforeUpdate&&(o===e.memoizedProps&&h===e.memoizedState||(t.effectTag|=lo)),t.memoizedProps=a,t.memoizedState=d),i.props=a,i.state=d,i.context=c,p}(e,t,n),Pf(e,t,i,r,n)}function Pf(e,t,n,r,i){Ef(e,t);var o=(t.effectTag&co)!==eo;if(!n&&!o)return r&&Gl(t,!1),If(e,t);var a=t.type,s=t.stateNode;xr.current=t;var c=void 0;return!o||Uu&&"function"==typeof a.getDerivedStateFromCatch?(jr.setCurrentPhase("render"),c=s.render(),(zu||ju&&t.mode&th)&&s.render(),jr.setCurrentPhase(null)):(c=null,Hu&&Od()),t.effectTag|=to,o&&(Af(e,t,null,i),t.child=null),Af(e,t,c,i),function(e,t){e.memoizedState=t}(t,s.state),Df(t,s.props),r&&Gl(t,!0),t.child}function Lf(e){var t=e.stateNode;t.pendingContext?zl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&zl(e,t.context,!1),yd(e,t.containerInfo)}function Of(e,t,n){Lf(t);var r=t.updateQueue;if(null!==r){var i=t.pendingProps,o=t.memoizedState,a=null!==o?o.element:null;ed(t,r,i,null,n);var s=t.memoizedState.element;if(s===a)return xf(),If(e,t);var c=t.stateNode;return(null===e||null===e.child)&&c.hydrate&&function(e){if(!Iu)return!1;var t=e.stateNode.containerInfo;return lf=Fu(t),uf=e,hf=!0,!0}(t)?(t.effectTag|=no,t.child=cf(t,null,s,n)):(xf(),Tf(e,t,s)),t.child}return xf(),If(e,t)}function Nf(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var o=void 0;switch(i.tag){case oe:var a=0|i.stateNode;if(i.type===t&&0!=(a&n)){for(var s=i;null!==s;){var c=s.alternate;if(s.expirationTime===Hl||s.expirationTime>r)s.expirationTime=r,null!==c&&(c.expirationTime===Hl||c.expirationTime>r)&&(c.expirationTime=r);else{if(null===c||!(c.expirationTime===Hl||c.expirationTime>r))break;c.expirationTime=r}s=s.return}o=null}else o=i.child;break;case ae:o=i.type===e.type?null:i.child;break;default:o=i.child}if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}var u=o.sibling;if(null!==u){u.return=o.return,o=u;break}o=o.return}i=o}}function Rf(e,t,n){var r=t.type,o=t.pendingProps,a=t.memoizedProps,s=function(e){return Su?e._currentValue:e._currentValue2}(r),c=function(e){return Su?e._changedBits:e._changedBits2}(r);if(Fl());else if(0===c&&a===o)return If(e,t);t.memoizedProps=o;var u=o.unstable_observedBits;if(void 0!==u&&null!==u||(u=Wl),t.stateNode=u,0!=(c&u))Nf(t,r,c,n);else if(a===o)return If(e,t);var l=o.children;"function"!=typeof l&&i(!1,"A context consumer was rendered with multiple children, or a child that isn't a function. A context consumer expects a single child that is a function. If you did pass a function, make sure there is no trailing or leading whitespace around it.");var h;return xr.current=t,jr.setCurrentPhase("render"),h=l(s),jr.setCurrentPhase(null),t.effectTag|=to,Tf(e,t,h),t.child}function If(e,n){return gl(n),Hu&&Od(),function(e,n){if(null!==e&&n.child!==e.child&&t(!1,"Resuming work not yet implemented."),null!==n.child){var r=n.child,i=uh(r,r.pendingProps,r.expirationTime);for(n.child=i,i.return=n;null!==r.sibling;)r=r.sibling,(i=i.sibling=uh(r,r.pendingProps,r.expirationTime)).return=n;i.sibling=null}}(e,n),n.child}function Df(e,t){e.memoizedProps=t}function Ff(e,n,r){if(Hu&&n.mode&nh&&function(e){Hu&&(Md.push(e),e.actualDuration=_u()-e.actualDuration-Ad,e.actualStartTime=_u())}(n),n.expirationTime===Hl||n.expirationTime>r)return function(e,t){switch(gl(t),Hu&&Od(),t.tag){case $:Lf(t);break;case K:Vl(t);break;case ee:yd(t,t.stateNode.containerInfo);break;case ae:ld(t)}return null}(0,n);switch(n.tag){case Q:return function(e,n,r){null!==e&&t(!1,"An indeterminate component should never have mounted. This error is likely caused by a bug in React. Please file an issue.");var o,a=n.type,s=n.pendingProps,c=Dl(n,Rl(n));if(a.prototype&&"function"==typeof a.prototype.render){var u=kr(n)||"Unknown";_f[u]||(i(!1,"The <%s /> component appears to have a render method, but doesn't extend React.Component. This is likely to cause errors. Change %s to extend React.Component instead.",u,u),_f[u]=!0)}if(n.mode&th&&Sh.recordLegacyContextWarning(n,null),xr.current=n,o=a(s,c),n.effectTag|=to,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){var l=n.type;n.tag=K,n.memoizedState=null!==o.state&&void 0!==o.state?o.state:null;var h=l.getDerivedStateFromProps;"function"==typeof h&&Vd(n,h,s);var d=Vl(n);return Hd(n,o),Yd(n,r),Pf(e,n,!0,d,r)}n.tag=Z;var f=n.type;if(f&&f.childContextTypes&&i(!1,"%s(...): childContextTypes cannot be defined on a functional component.",f.displayName||f.name||"Component"),null!==n.ref){var p="",m=jr.getCurrentFiberOwnerName();m&&(p+="\n\nCheck the render method of `"+m+"`.");var v=m||n._debugID||"",g=n._debugSource;g&&(v=g.fileName+":"+g.lineNumber),Mf[v]||(Mf[v]=!0,i(!1,"Stateless function components cannot be given refs. Attempts to access this ref will fail.%s%s",p,jr.getCurrentFiberStackAddendum()))}if("function"==typeof a.getDerivedStateFromProps){var y=kr(n)||"Unknown";Sf[y]||(i(!1,"%s: Stateless functional components do not support getDerivedStateFromProps.",y),Sf[y]=!0)}return Tf(e,n,o),Df(n,s),n.child}(e,n,r);case Z:return function(e,t){var n=t.type,r=t.pendingProps;if(Fl());else if(t.memoizedProps===r)return If(e,t);var i,o=Dl(t,Rl(t));return xr.current=t,jr.setCurrentPhase("render"),i=n(r,o),jr.setCurrentPhase(null),t.effectTag|=to,Tf(e,t,i),Df(t,r),t.child}(e,n);case K:return Cf(e,n,r);case $:return Of(e,n,r);case te:return function(e,t,n){wd(t),null===e&&mf(t);var r=t.type,i=t.memoizedProps,o=t.pendingProps,a=null!==e?e.memoizedProps:null;if(Fl());else if(i===o){var s=t.mode&eh&&xu(0,o);if(s&&(t.expirationTime=ql),!s||n!==ql)return If(e,t)}var c=o.children;return bu(r,o)?c=null:a&&bu(r,a)&&(t.effectTag|=ao),Ef(e,t),n!==ql&&t.mode&eh&&xu(0,o)?(t.expirationTime=ql,t.memoizedProps=o,null):(Tf(e,t,c),Df(t,o),t.child)}(e,n,r);case ne:return function(e,t){return null===e&&mf(t),Df(t,t.pendingProps),null}(e,n);case ue:return function(e,t,n){if(Bu){var r=t.pendingProps,i=t.memoizedProps,o=t.memoizedState,a=!((t.effectTag&co)===eo);if(Fl());else if(r===i&&a===o)return If(e,t);var s=(0,r.children)(a);return t.memoizedProps=r,t.memoizedState=a,Tf(e,t,s),t.child}return null}(e,n);case ee:return function(e,t,n){yd(t,t.stateNode.containerInfo);var r=t.pendingProps;if(Fl());else if(t.memoizedProps===r)return If(e,t);return null===e?(t.child=sf(t,null,r,n),Df(t,r)):(Tf(e,t,r),Df(t,r)),t.child}(e,n,r);case se:return function(e,t){var n,r=t.type.render,i=t.pendingProps,o=t.ref;if(Fl());else if(t.memoizedProps===i&&o===(null!==e?e.ref:null))return If(e,t);return xr.current=t,jr.setCurrentPhase("render"),n=r(i,o),jr.setCurrentPhase(null),Tf(e,t,n),Df(t,i),t.child}(e,n);case re:return function(e,t){var n=t.pendingProps;if(Fl());else if(t.memoizedProps===n)return If(e,t);return Tf(e,t,n),Df(t,n),t.child}(e,n);case ie:return function(e,t){var n=t.pendingProps.children;if(Fl());else if(null===n||t.memoizedProps===n)return If(e,t);return Tf(e,t,n),Df(t,n),t.child}(e,n);case ce:return function(e,t){var n=t.pendingProps;return Hu&&(t.effectTag|=ro),t.memoizedProps===n?If(e,t):(Tf(e,t,n.children),Df(t,n),t.child)}(e,n);case ae:return function(e,t,n){var r=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=!0;if(Fl())s=!1;else if(a===o)return t.stateNode=0,ld(t),If(e,t);var u=o.value;t.memoizedProps=o;var l=t.type.propTypes;l&&c(l,o,"prop","Context.Provider",wf);var h=void 0;if(null===a)h=Wl;else if(a.value===o.value){if(a.children===o.children&&s)return t.stateNode=0,ld(t),If(e,t);h=0}else{var d=a.value;if(d===u&&(0!==d||1/d==1/u)||d!=d&&u!=u){if(a.children===o.children&&s)return t.stateNode=0,ld(t),If(e,t);h=0}else if(((h="function"==typeof r._calculateChangedBits?r._calculateChangedBits(d,u):Wl)&Wl)!==h&&i(!1,"calculateChangedBits: Expected the return value to be a 31-bit integer. Instead received: %s",h),0==(h|=0)){if(a.children===o.children&&s)return t.stateNode=0,ld(t),If(e,t)}else Nf(t,r,h,n)}return t.stateNode=h,ld(t),Tf(e,t,o.children),t.child}(e,n,r);case oe:return Rf(e,n,r);default:t(!1,"Unknown unit of work tag. This error is likely caused by a bug in React. Please file an issue.")}}function kf(e){e.effectTag|=ro}function Uf(e){e.effectTag|=uo}function Bf(e,t){for(var n=t.child;null!==n;){if(n.tag===te||n.tag===ne)gu(e,n.stateNode);else if(n.tag===ee);else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)return;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}_f={},Sf={},Mf={};var zf=void 0,jf=void 0,Vf=void 0;if(Au)zf=function(e){},jf=function(e,t,n,r,i,o,a,s){t.updateQueue=n,n&&kf(t)},Vf=function(e,t,n,r){n!==r&&kf(t)};else if(Hc){zf=function(e){var t=e.stateNode;if(null===e.firstEffect);else{var n=t.containerInfo,r=qc(n);!function(e,t){for(var n=t.child;null!==n;){if(n.tag===te||n.tag===ne)Yc(e,n.stateNode);else if(n.tag===ee);else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)return;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}(r,e),t.pendingChildren=r,kf(e),Jc(n,r)}},jf=function(e,t,n,r,i,o,a,s){var c=null===t.firstEffect,u=e.stateNode;if(c&&null===n)t.stateNode=u;else{var l=t.stateNode,h=Xc(u,n,r,i,o,t,c,l);yu(h,r,o,a)&&kf(t),t.stateNode=h,c?kf(t):Bf(h,t)}},Vf=function(e,t,n,r){if(n!==r){var i=gd(),o=xd();t.stateNode=wu(r,i,o,t),kf(t)}}}else zf=function(e){},jf=function(e,t,n,r,i,o,a,s){},Vf=function(e,t,n,r){};function Gf(e,n,r){var i=n.pendingProps;switch(Hu&&n.mode&nh&&Cd(n),n.tag){case Z:return null;case K:return Ul(n),null;case $:bd(n),Bl(n);var o=n.stateNode;return o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),null!==e&&null!==e.child||(bf(n),n.effectTag&=~no),zf(n),null;case te:_d(n);var a=gd(),s=n.type;if(null!==e&&null!=n.stateNode){var c=e.memoizedProps,u=n.stateNode,l=xd(),h=function(e,t,n,r,i,o){var a=o;if(typeof r.children!=typeof n.children&&("string"==typeof r.children||"number"==typeof r.children)){var s=""+r.children,c=uu(a.ancestorInfo,t,null);Gc(null,s,c)}return eu(e,t,n,r,i)}(u,s,c,i,a,l);jf(e,n,h,s,c,i,a,l),e.ref!==n.ref&&Uf(n)}else{if(!i)return null===n.stateNode&&t(!1,"We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue."),null;var d=xd();if(bf(n))vf(n,a,d)&&kf(n);else{var f=function(e,t,n,r,i){var o,a=r;if(Gc(e,null,a.ancestorInfo),"string"==typeof t.children||"number"==typeof t.children){var s=""+t.children,c=uu(a.ancestorInfo,e,null);Gc(null,s,c)}o=a.namespace;var u=Zc(e,t,n,o);return lu(i,u),hu(u,t),u}(s,i,a,d,n);Bf(f,n),yu(f,s,i,a)&&kf(n),n.stateNode=f}null!==n.ref&&Uf(n)}return null;case ne:var p=i;if(e&&null!=n.stateNode){var m=e.memoizedProps;Vf(e,n,m,p)}else{if("string"!=typeof p)return null===n.stateNode&&t(!1,"We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue."),null;var v=gd(),g=xd();bf(n)?gf(n)&&kf(n):n.stateNode=wu(p,v,g,n)}return null;case se:case ue:case re:case ie:case ce:return null;case ee:return bd(n),zf(n),null;case ae:return hd(n),null;case oe:return null;case Q:t(!1,"An indeterminate component should have become determinate before completing. This error is likely caused by a bug in React. Please file an issue.");default:t(!1,"Unknown unit of work tag. This error is likely caused by a bug in React. Please file an issue.")}}var Wf=y.invokeGuardedCallback,Hf=y.hasCaughtError,Xf=y.clearCaughtError,qf=null;function Yf(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=Br(n));var i={componentName:null!==n?kr(n):null,componentStack:null!==r?r:"",error:t.value,errorBoundary:null,errorBoundaryName:null,errorBoundaryFound:!1,willRetry:!1};null!==e&&e.tag===K&&(i.errorBoundary=e.stateNode,i.errorBoundaryName=kr(e),i.errorBoundaryFound=!0,i.willRetry=!0);try{!function(e){var t=e.error;if(!t||!t.suppressReactErrorLogging){var n=e.componentName,r=e.componentStack,i=e.errorBoundaryName,o=e.errorBoundaryFound,a=e.willRetry,s=(n?"The above error occurred in the <"+n+"> component:":"The above error occurred in one of your React components:")+r+"\n\n"+(o&&i?a?"React will try to recreate this component tree from scratch using the error boundary you provided, "+i+".":"This error was initially handled by the error boundary "+i+".\nRecreating the tree from scratch failed so React will unmount the tree.":"Consider adding an error boundary to your tree to customize error handling behavior.\nVisit https://fb.me/react-error-boundaries to learn more about error boundaries.");console.error(s)}}(i)}catch(e){e&&e.suppressReactErrorLogging||console.error(e)}}qf=new Set;var Jf=function(e,t){xl(e,"componentWillUnmount"),t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount(),wl()};function Qf(e){var t=e.ref;null!==t&&("function"==typeof t?(Wf(null,t,null,null),Hf()&&tm(e,Xf())):t.current=null)}function Zf(e,n){switch(n.tag){case K:if(n.effectTag&lo&&null!==e){var r=e.memoizedProps,o=e.memoizedState;xl(n,"getSnapshotBeforeUpdate");var a=n.stateNode;a.props=n.memoizedProps,a.state=n.memoizedState;var s=a.getSnapshotBeforeUpdate(r,o),c=qf;void 0!==s||c.has(n.type)||(c.add(n.type),i(!1,"%s.getSnapshotBeforeUpdate(): A snapshot value (or null) must be returned. You have returned undefined.",kr(n))),a.__reactInternalSnapshotBeforeUpdate=s,wl()}return;case $:case te:case ne:case ee:return;default:t(!1,"This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}}function Kf(e,n,r,i,o){switch(r.tag){case K:var a=r.stateNode;if(r.effectTag&ro)if(null===n)xl(r,"componentDidMount"),a.props=r.memoizedProps,a.state=r.memoizedState,a.componentDidMount(),wl();else{var s=n.memoizedProps,c=n.memoizedState;xl(r,"componentDidUpdate"),a.props=r.memoizedProps,a.state=r.memoizedState,a.componentDidUpdate(s,c,a.__reactInternalSnapshotBeforeUpdate),wl()}var u=r.updateQueue;return void(null!==u&&(a.props=r.memoizedProps,a.state=r.memoizedState,id(0,u,a)));case $:var l=r.updateQueue;if(null!==l){var h=null;if(null!==r.child)switch(r.child.tag){case te:h=vu(r.child.stateNode);break;case K:h=r.child.stateNode}id(0,l,h)}return;case te:var d=r.stateNode;if(null===n&&r.effectTag&ro)!function(e,t,n,r){mu(t,n)&&e.focus()}(d,r.type,r.memoizedProps);return;case ne:case ee:case ce:case ue:return;default:t(!1,"This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}}function $f(e){var t=e.ref;if(null!==t){var n=e.stateNode,r=void 0;switch(e.tag){case te:r=vu(n);break;default:r=n}"function"==typeof t?t(r):(t.hasOwnProperty("current")||i(!1,"Unexpected ref object provided for %s. Use either a ref-setter function or React.createRef().%s",kr(e),Br(e)),t.current=r)}}function ep(e){var t=e.ref;null!==t&&("function"==typeof t?t(null):t.current=null)}function tp(e){switch(wh(e),e.tag){case K:Qf(e);var t=e.stateNode;return void("function"==typeof t.componentWillUnmount&&function(e,t){Wf(null,Jf,null,e,t),Hf()&&tm(e,Xf())}(e,t));case te:return void Qf(e);case ee:return void(Au?op(e):Hc&&function(e){if(!Hc)return;var t=e.stateNode.containerInfo,n=qc(t);Qc(t,n)}(e))}}function np(e){for(var t=e;;)if(tp(t),null===t.child||Au&&t.tag===ee){if(t===e)return;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}else t.child.return=t,t=t.child}function rp(e){return e.tag===te||e.tag===$||e.tag===ee}function ip(e){if(Au){var n=function(e){for(var n=e.return;null!==n;){if(rp(n))return n;n=n.return}t(!1,"Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue.")}(e),r=void 0,i=void 0;switch(n.tag){case te:r=n.stateNode,i=!1;break;case $:case ee:r=n.stateNode.containerInfo,i=!0;break;default:t(!1,"Invalid host parent fiber. This error is likely caused by a bug in React. Please file an issue.")}n.effectTag&ao&&(Eu(r),n.effectTag&=~ao);for(var o=function(e){var t=e;e:for(;;){for(;null===t.sibling;){if(null===t.return||rp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==te&&t.tag!==ne;){if(t.effectTag&no)continue e;if(null===t.child||t.tag===ee)continue e;t.child.return=t,t=t.child}if(!(t.effectTag&no))return t.stateNode}}(e),a=e;;){if(a.tag===te||a.tag===ne)o?i?Ou(r,a.stateNode,o):Lu(r,a.stateNode,o):i?Pu(r,a.stateNode):Cu(r,a.stateNode);else if(a.tag===ee);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===e)return;for(;null===a.sibling;){if(null===a.return||a.return===e)return;a=a.return}a.sibling.return=a.return,a=a.sibling}}}function op(e){for(var n=e,r=!1,i=void 0,o=void 0;;){if(!r){var a=n.return;e:for(;;){switch(null===a&&t(!1,"Expected to find a host parent. This error is likely caused by a bug in React. Please file an issue."),a.tag){case te:i=a.stateNode,o=!1;break e;case $:case ee:i=a.stateNode.containerInfo,o=!0;break e}a=a.return}r=!0}if(n.tag===te||n.tag===ne)np(n),o?Ru(i,n.stateNode):Nu(i,n.stateNode);else if(n.tag===ee){if(i=n.stateNode.containerInfo,null!==n.child){n.child.return=n,n=n.child;continue}}else if(tp(n),null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)return;for(;null===n.sibling;){if(null===n.return||n.return===e)return;(n=n.return).tag===ee&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function ap(e){Au?op(e):np(e),function(e){e.return=null,e.child=null,e.alternate&&(e.alternate.child=null,e.alternate.return=null)}(e)}function sp(e,n){if(Au)switch(n.tag){case K:return;case te:var r=n.stateNode;if(null!=r){var i=n.memoizedProps,o=null!==e?e.memoizedProps:i,a=n.type,s=n.updateQueue;n.updateQueue=null,null!==s&&function(e,t,n,r,i,o){hu(e,i),tu(e,t,n,r,i)}(r,s,a,o,i)}return;case ne:null===n.stateNode&&t(!1,"This should have a text node initialized. This error is likely caused by a bug in React. Please file an issue.");var c=n.stateNode,u=n.memoizedProps;null!==e&&e.memoizedProps;return void function(e,t,n){e.nodeValue=n}(c,0,u);case $:return;case ce:if(Hu)(0,n.memoizedProps.onRender)(n.memoizedProps.id,null===e?"mount":"update",n.actualDuration,n.treeBaseTime,n.actualStartTime,Sd);return;case ue:return;default:t(!1,"This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}else!function(e){if(Hc)switch(e.tag){case K:case te:case ne:return;case $:case ee:var n=e.stateNode,r=n.containerInfo,i=n.pendingChildren;return void Qc(r,i);default:t(!1,"This unit of work tag should not have side-effects. This error is likely caused by a bug in React. Please file an issue.")}}(n)}function cp(e){Au&&Eu(e.stateNode)}function up(e,t,n){var r=Yh(n);r.tag=jh,r.payload={element:null};var i=t.value;return r.callback=function(){zm(i),Yf(e,t)},r}function lp(e,t,n){var r=Yh(n);r.tag=jh;var i=e.type.getDerivedStateFromCatch;if(Uu&&"function"==typeof i){var o=t.value;r.payload=function(){return i(o)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(r.callback=function(){Uu&&"function"===i||function(e){null===kp?kp=new Set([e]):kp.add(e)}(this);var n=t.value,r=t.stack;Yf(e,t),this.componentDidCatch(n,{componentStack:null!==r?r:""})}),r}function hp(e){var t=im(sm(),e);Qh(e,Yh(t),t),am(e,t)}function dp(e,t,n,r,i,o,a){if(n.effectTag|=fo,n.firstEffect=n.lastEffect=null,Bu&&null!==r&&"object"==typeof r&&"function"==typeof r.then){var s=r,c=Zl(o),u=a-(c-5e3);u<0&&(u=0);var l=c-a,h=t,d=-1;e:do{if(h.tag===ue){var f=h.alternate;if(null!==f&&!0===f.memoizedState){d=0;break e}var p=h.pendingProps.ms;if("number"==typeof p){if(p<=0){d=0;break e}(-1===d||p<d)&&(d=p)}else-1===d&&(d=l)}h=h.return}while(null!==h);var m=d-u;if(o===ql||m>0){!function(e,t,n,r){n>=0&&Np<n&&(Np=n)}(0,0,m);var v=function(){om(e,o)};return void s.then(v,v)}h=t;do{switch(h.tag){case $:r=new Error(o===Xl?"A synchronous update was suspended, but no fallback UI was provided.":"An update was suspended for longer than the timeout, but no fallback UI was provided.");break;case ue:if((h.effectTag&co)===eo){h.effectTag|=po;var g=hp.bind(null,h);return void s.then(g,g)}}h=h.return}while(null!==h)}r=od(r,n);var y=t;do{switch(y.tag){case $:var b=r;return y.effectTag|=po,void Zh(y,up(y,b,o),o);case K:var x=r,w=y.type,_=y.stateNode;if((y.effectTag&co)===eo&&("function"==typeof w.getDerivedStateFromCatch&&Uu||null!==_&&"function"==typeof _.componentDidCatch&&!Yp(_)))return y.effectTag|=po,void Zh(y,lp(y,x,o),o)}y=y.return}while(null!==y)}function fp(e,t,n){switch(Hu&&e.mode&nh&&Cd(e),e.tag){case K:Ul(e);var r=e.effectTag;return r&po?(e.effectTag=r&~po|co,e):null;case $:bd(e),Bl(e);var i=e.effectTag;return i&po?(e.effectTag=i&~po|co,e):null;case te:return _d(e),null;case ue:var o=e.effectTag;return o&po?(e.effectTag=o&~po|co,e):null;case ee:return bd(e),null;case ae:return hd(e),null;default:return null}}function pp(e){switch(Hu&&e.mode&nh&&(Pd(),Cd(e)),e.tag){case K:Ul(e);break;case $:bd(e),Bl(e);break;case te:_d(e);break;case ee:bd(e);break;case ae:hd(e)}}var mp=y.invokeGuardedCallback,vp=y.hasCaughtError,gp=y.clearCaughtError,yp=void 0,bp=void 0,xp=void 0,wp=void 0;yp=!1,bp=!1;var _p={};xp=function(e){var t=kr(e)||"ReactClass";_p[t]||(i(!1,"Can't call setState (or forceUpdate) on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.%s",Br(e)),_p[t]=!0)},wp=function(e){switch(jr.phase){case"getChildContext":if(bp)return;i(!1,"setState(...): Cannot call setState() inside getChildContext()"),bp=!0;break;case"render":if(yp)return;i(!1,"Cannot update during an existing state transition (such as within `render` or another component's constructor). Render methods should be a pure function of props and state; constructor side-effects are an anti-pattern, but can be moved to `componentWillMount`."),yp=!0}};var Sp=_u(),Mp=Ql(0),Tp=Sp,Ap=0,Ep=Hl,Cp=!1,Pp=null,Lp=null,Op=Hl,Np=-1,Rp=!1,Ip=null,Dp=!1,Fp=!1,kp=null,Up=null,Bp=void 0,zp=void 0,jp=void 0,Vp=void 0,Gp=void 0;function Wp(){if(null!==Pp)for(var e=Pp.return;null!==e;)pp(e),e=e.return;Sh.discardPendingWarnings(),-1!==Tl&&i(!1,"Expected an empty stack. Something was not reset properly."),Lp=null,Op=Hl,Np=-1,Rp=!1,Pp=null,Fp=!1}function Hp(){for(;null!==Ip;){jr.setCurrentFiber(Ip),vl();var e=Ip.effectTag;if(e&ao&&cp(Ip),e&uo){var t=Ip.alternate;null!==t&&ep(t)}switch(e&(no|ro|oo)){case no:ip(Ip),Ip.effectTag&=~no;break;case io:ip(Ip),Ip.effectTag&=~no,sp(Ip.alternate,Ip);break;case ro:sp(Ip.alternate,Ip);break;case oo:ap(Ip)}Ip=Ip.nextEffect}jr.resetCurrentFiber()}function Xp(){for(;null!==Ip;){if(Ip.effectTag&lo)vl(),Zf(Ip.alternate,Ip);Ip=Ip.nextEffect}}function qp(e,t,n){for(Sh.flushPendingUnsafeLifecycleWarnings(),Gu&&Sh.flushPendingDeprecationWarnings(),Wu&&Sh.flushLegacyContextWarning();null!==Ip;){var r=Ip.effectTag;if(r&(ro|so))vl(),Kf(0,Ip.alternate,Ip);r&uo&&(vl(),$f(Ip));var i=Ip.nextEffect;Ip.nextEffect=null,Ip=i}}function Yp(e){return null!==kp&&kp.has(e)}function Jp(e){Cp=!0,Dp=!0,function(){if(ku){if(!Xu)return;Qu=!0,Zu=!1,nl.clear(),il("(Committing Changes)")}}();var n=e.stateNode;n.current===e&&t(!1,"Cannot commit the same tree as before. This is probably a bug related to the return field. This error is likely caused by a bug in React. Please file an issue.");var r=n.pendingCommitExpirationTime;r===Hl&&t(!1,"Cannot commit an incomplete root. This error is likely caused by a bug in React. Please file an issue."),n.pendingCommitExpirationTime=Hl;var o=sm();xr.current=null;var a=void 0;for(e.effectTag>to?null!==e.lastEffect?(e.lastEffect.nextEffect=e,a=e.firstEffect):a=e:a=e.firstEffect,n.containerInfo,fu=qo(),pu=ca(),Xo(!1),Ip=a,function(){if(ku){if(!Xu)return;el=0,il("(Committing Snapshot Effects)")}}();null!==Ip;){var s=!1,c=void 0;mp(null,Xp,null),vp()&&(s=!0,c=gp()),s&&(null===Ip&&t(!1,"Should have next effect. This error is likely caused by a bug in React. Please file an issue."),tm(Ip,c),null!==Ip&&(Ip=Ip.nextEffect))}for(!function(){if(ku){if(!Xu)return;var e=el;el=0,ol("(Committing Snapshot Effects: "+e+" Total)","(Committing Snapshot Effects)",null)}}(),Hu&&Hu&&(Sd=_u()),Ip=a,function(){if(ku){if(!Xu)return;el=0,il("(Committing Host Effects)")}}();null!==Ip;){var u=!1,l=void 0;mp(null,Hp,null),vp()&&(u=!0,l=gp()),u&&(null===Ip&&t(!1,"Should have next effect. This error is likely caused by a bug in React. Please file an issue."),tm(Ip,l),null!==Ip&&(Ip=Ip.nextEffect))}for(!function(){if(ku){if(!Xu)return;var e=el;el=0,ol("(Committing Host Effects: "+e+" Total)","(Committing Host Effects)",null)}}(),n.containerInfo,ua(pu),pu=null,Xo(fu),fu=null,n.current=e,Ip=a,function(){if(ku){if(!Xu)return;el=0,il("(Calling Lifecycle Methods)")}}();null!==Ip;){var h=!1,d=void 0;mp(null,qp,null,n,o,r),vp()&&(h=!0,d=gp()),h&&(null===Ip&&t(!1,"Should have next effect. This error is likely caused by a bug in React. Please file an issue."),tm(Ip,d),null!==Ip&&(Ip=Ip.nextEffect))}Hu&&(Hu&&0!==Md.length&&i(!1,"Expected an empty stack. Something was not reset properly."),Hu&&(Ad=0)),Dp=!1,Cp=!1,function(){if(ku){if(!Xu)return;var e=el;el=0,ol("(Calling Lifecycle Methods: "+e+" Total)","(Calling Lifecycle Methods)",null)}}(),function(){if(ku){if(!Xu)return;var e=null;Zu?e="Lifecycle hook scheduled a cascading update":$u>0&&(e="Caused by a cascading update in earlier commit"),Zu=!1,$u++,Qu=!1,nl.clear(),ol("(Committing Changes)","(Committing Changes)",e)}}(),xh(e.stateNode),Dh.debugTool&&Dh.debugTool.onCommitWork(e),function(e,t,n){if(Bu){if(n===Hl)return e.earliestPendingTime=Hl,e.latestPendingTime=Hl,e.earliestSuspendedTime=Hl,e.latestSuspendedTime=Hl,void(e.latestPingedTime=Hl);var r=e.latestPendingTime;r!==Hl&&(r<n?e.earliestPendingTime=e.latestPendingTime=Hl:e.earliestPendingTime<n&&(e.earliestPendingTime=e.latestPendingTime));var i=e.earliestSuspendedTime;if(i===Hl)return void Fh(e,n);if(n>e.latestSuspendedTime)return e.earliestSuspendedTime=Hl,e.latestSuspendedTime=Hl,e.latestPingedTime=Hl,void Fh(e,n);if(n<i)Fh(e,n)}}(n,0,n.current.expirationTime);var f=kh(n);return f===Hl&&(kp=null),f}function Qp(e,t){if(t===ql||e.expirationTime!==ql){var n=Hl;switch(e.tag){case $:case K:var r=e.updateQueue;null!==r&&(n=r.expirationTime)}if(Hu&&e.mode&nh){for(var i=e.selfBaseTime,o=e.child;null!==o;)i+=o.treeBaseTime,o.expirationTime!==Hl&&(n===Hl||n>o.expirationTime)&&(n=o.expirationTime),o=o.sibling;e.treeBaseTime=i}else for(var a=e.child;null!==a;)a.expirationTime!==Hl&&(n===Hl||n>a.expirationTime)&&(n=a.expirationTime),a=a.sibling;e.expirationTime=n}}function Zp(e){for(;;){var t=e.alternate;jr.setCurrentFiber(e);var n=e.return,r=e.sibling;if((e.effectTag&fo)===eo){var i=Gf(t,e);if(yl(e),Qp(e,Op),jr.resetCurrentFiber(),null!==i)return yl(e),Dh.debugTool&&Dh.debugTool.onCompleteWork(e),i;if(null!==n&&(n.effectTag&fo)===eo)null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),e.effectTag>to&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e);if(Dh.debugTool&&Dh.debugTool.onCompleteWork(e),null!==r)return r;if(null!==n){e=n;continue}return Fp=!0,null}var o=fp(e);if(e.effectTag&co?bl(e):yl(e),jr.resetCurrentFiber(),null!==o)return yl(e),Dh.debugTool&&Dh.debugTool.onCompleteWork(e),o.effectTag&=ho,o;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=fo),Dh.debugTool&&Dh.debugTool.onCompleteWork(e),null!==r)return r;if(null===n)return null;e=n}return null}function Kp(e){var t=e.alternate;!function(e){if(ku){if(!Xu||hl(e))return;if(qu=e,!cl(e,null))return;e._debugIsCurrentlyTiming=!0}}(e),jr.setCurrentFiber(e),Vu&&(Bp=ph(Bp,e));var n=void 0;return Hu?(e.mode&nh&&Hu&&(-1!==Ld&&i(!1,"Cannot start base timer that is already running. This error is likely caused by a bug in React. Please file an issue."),Ld=_u()),n=Ff(t,e,Op),e.mode&nh&&(!function(e){Hu&&-1!==Ld&&(e.selfBaseTime=_u()-Ld)}(e),Od())):n=Ff(t,e,Op),jr.resetCurrentFiber(),jp&&Gp(),Dh.debugTool&&Dh.debugTool.onBeginWork(e),null===n&&(n=Zp(e)),xr.current=null,n}function $p(e){if(e){for(;null!==Pp&&!Bm();)Pp=Kp(Pp);Hu&&Ed()}else for(;null!==Pp;)Pp=Kp(Pp)}function em(e,n,r){Cp&&t(!1,"renderRoot was called recursively. This error is likely caused by a bug in React. Please file an issue."),Cp=!0,n===Op&&e===Lp&&null!==Pp||(Wp(),Op=n,Np=-1,Pp=uh((Lp=e).current,null,Op),e.pendingCommitExpirationTime=Hl);var i=!1;for(Rp=!r||Op<=Mp,function(e){if(ku){if(qu=e,!Xu)return;$u=0,il("(React Tree Reconciliation)"),ml()}}(Pp);;){try{$p(r)}catch(n){if(Hu&&Od(),null===Pp)i=!0,zm(n);else{Hh(),Vu&&zp(Pp,n,r),null===Pp&&t(!1,"Failed to replay rendering after an error. This is likely caused by a bug in React. Please file an issue with a reproducing case to help us find it.");var o=Pp,a=o.return;if(null===a){i=!0,zm(n);break}dp(e,a,o,n,0,Op,Tp),Pp=Zp(o)}}break}var s=!1;return Cp=!1,i?(_l(Up,s),Up=null,Tl=-1,Sl.length=0,Ml.length=0,null):null===Pp?Fp?(_l(Up,s=!0),Up=null,e.pendingCommitExpirationTime=n,e.current.alternate):(_l(Up,s),Up=null,Rp&&t(!1,"Expired work should have completed. This error is likely caused by a bug in React. Please file an issue."),function(e,t){if(Bu){var n=e.earliestPendingTime,r=e.latestPendingTime;n===t?e.earliestPendingTime=r===t?e.latestPendingTime=Hl:r:r===t&&(e.latestPendingTime=n);var i=e.latestSuspendedTime;i===t&&(e.latestPingedTime=Hl);var o=e.earliestSuspendedTime;o===Hl?e.earliestSuspendedTime=e.latestSuspendedTime=t:o>t?e.earliestSuspendedTime=t:i<t&&(e.latestSuspendedTime=t)}}(e,n),Np>=0&&setTimeout(function(){om(e,n)},Np),function(e){null===mm&&t(!1,"Should be working on a root. This error is likely caused by a bug in React. Please file an issue."),mm.remainingExpirationTime=e}(kh(e)),null):(_l(Up,s),Up=null,null)}function tm(e,n){return function(e,n,r){Cp&&!Dp&&t(!1,"dispatch: Cannot dispatch during the render phase.");for(var i=e.return;null!==i;){switch(i.tag){case K:var o=i.type,a=i.stateNode;if("function"==typeof o.getDerivedStateFromCatch||"function"==typeof a.componentDidCatch&&!Yp(a))return Qh(i,lp(i,od(n,e),r),r),void am(i,r);break;case $:return Qh(i,up(i,od(n,e),r),r),void am(i,r)}i=i.return}if(e.tag===$){var s=e;Qh(s,up(s,od(n,s),r),r),am(s,r)}}(e,n,Xl)}function nm(e){return Kl(e,5e3,250)}function rm(){var e=nm(sm());return e<=Ap&&(e=Ap+1),Ap=e}function im(e,t){var n=void 0;return n=Ep!==Hl?Ep:Cp?Dp?Xl:Op:t.mode&eh?Mm?function(e){return Kl(e,500,100)}(e):nm(e):Xl,Mm&&(gm===Hl||n>gm)&&(gm=n),n}function om(e,t){!function(e,t){if(Bu){var n=e.latestSuspendedTime;if(n!==Hl&&n<=t){var r=e.latestPingedTime;(r===Hl||r<t)&&(e.latestPingedTime=t)}}}(e,t);var n=kh(e);n!==Hl&&function(e,t){(e.remainingExpirationTime===Hl||e.remainingExpirationTime<t)&&Lm(e,t)}(e,n)}function am(e,n){if(ku&&(Qu&&(Zu=!0),null!==Yu&&"componentWillMount"!==Yu&&"componentWillReceiveProps"!==Yu&&(Ku=!0)),e.tag===K){var r=e.stateNode;wp(r)}for(var i=e;null!==i;){if((i.expirationTime===Hl||i.expirationTime>n)&&(i.expirationTime=n),null!==i.alternate&&(i.alternate.expirationTime===Hl||i.alternate.expirationTime>n)&&(i.alternate.expirationTime=n),null===i.return){if(i.tag!==$)return void(e.tag===K&&xp(e));var o=i.stateNode;!Cp&&Op!==Hl&&n<Op&&(Up=e,Wp()),Fh(o,n);var a=kh(o);Cp&&!Dp&&Lp===o||Lm(o,a),Em>Am&&t(!1,"Maximum update depth exceeded. This can happen when a component repeatedly calls setState inside componentWillUpdate or componentDidUpdate. React limits the number of nested updates to prevent infinite loops.")}i=i.return}}function sm(){return Tp=_u()-Sp,Mp=Ql(Tp)}function cm(e){var t=Ep,n=sm();Ep=nm(n);try{return e()}finally{Ep=t}}function um(e,t,n,r,i){var o=Ep;Ep=Xl;try{return e(t,n,r,i)}finally{Ep=o}}Vu&&(Bp=null,jp=!1,Vp=null,zp=function(e,t,n){if(null===t||"object"!=typeof t||"function"!=typeof t.then)if(null!==Bp){switch(ph(e,Bp),e.tag){case $:bd(e),Bl(e);break;case te:_d(e);break;case K:Ul(e);break;case ee:bd(e);break;case ae:hd(e)}jp=!0,Vp=t,mp(null,$p,null,n),jp=!1,Vp=null,vp()?(gp(),Hu&&(e.mode&nh&&Cd(e),Od())):Pp=e}else i(!1,"Could not replay rendering after an error. This is likely a bug in React. Please file an issue.")},Gp=function(){throw Vp});var lm=null,hm=null,dm=Hl,fm=void 0,pm=!1,mm=null,vm=Hl,gm=Hl,ym=!1,bm=!1,xm=null,wm=null,_m=!1,Sm=!1,Mm=!1,Tm=null,Am=1e3,Em=0,Cm=1;function Pm(e){if(dm!==Hl){if(e>dm)return;null!==fm&&Tu(fm)}else ku&&Xu&&!tl&&(tl=!0,il("(Waiting for async callback...)"));var t=_u()-Sp,n=Zl(e);dm=e,fm=Mu(Nm,{timeout:n-t})}function Lm(e,t){!function(e,t){if(null===e.nextScheduledRoot)e.remainingExpirationTime=t,null===hm?(lm=hm=e,e.nextScheduledRoot=e):(hm.nextScheduledRoot=e,(hm=e).nextScheduledRoot=lm);else{var n=e.remainingExpirationTime;(n===Hl||t<n)&&(e.remainingExpirationTime=t)}}(e,t),pm||(_m?Sm&&(mm=e,vm=Xl,km(e,Xl,!1)):t===Xl?Rm():Pm(t))}function Om(){var e=Hl,n=null;if(null!==hm)for(var r=hm,i=lm;null!==i;){var o=i.remainingExpirationTime;if(o===Hl){if((null===r||null===hm)&&t(!1,"Should have a previous and last root. This error is likely caused by a bug in React. Please file an issue."),i===i.nextScheduledRoot){i.nextScheduledRoot=null,lm=hm=null;break}if(i===lm){var a=i.nextScheduledRoot;lm=a,hm.nextScheduledRoot=a,i.nextScheduledRoot=null}else{if(i===hm){(hm=r).nextScheduledRoot=lm,i.nextScheduledRoot=null;break}r.nextScheduledRoot=i.nextScheduledRoot,i.nextScheduledRoot=null}i=r.nextScheduledRoot}else{if((e===Hl||o<e)&&(e=o,n=i),i===hm)break;r=i,i=i.nextScheduledRoot}}null!==mm&&mm===n&&e===Xl?Em++:Em=0,mm=n,vm=e}function Nm(e){Im(Hl,!0,e)}function Rm(){Im(Xl,!1,null)}function Im(e,t,n){(wm=n,Om(),Hu&&Pd(),ku&&null!==wm)&&function(e,t){ku&&Xu&&(tl=!1,ol("(Waiting for async callback... will force flush in "+t+" ms)","(Waiting for async callback...)",e?"React was blocked by main thread":null))}(vm<sm(),Zl(vm));if(t)for(;null!==mm&&vm!==Hl&&(e===Hl||e>=vm)&&(!ym||sm()>=vm);)sm(),km(mm,vm,!ym),Om();else for(;null!==mm&&vm!==Hl&&(e===Hl||e>=vm);)km(mm,vm,!1),Om();null!==wm&&(dm=Hl,fm=null),vm!==Hl&&Pm(vm),wm=null,ym=!1,Fm()}function Dm(e,n){pm&&t(!1,"work.commit(): Cannot commit while already rendering. This likely means you attempted to commit from inside a lifecycle method."),mm=e,vm=n,km(e,n,!1),Rm(),Fm()}function Fm(){if(Em=0,null!==Tm){var e=Tm;Tm=null;for(var t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(r){bm||(bm=!0,xm=r)}}}if(bm){var r=xm;throw xm=null,bm=!1,r}}function km(e,n,r){if(pm&&t(!1,"performWorkOnRoot was called recursively. This error is likely caused by a bug in React. Please file an issue."),pm=!0,r){var i=e.finishedWork;null!==i?Um(e,i,n):null!==(i=em(e,n,!0))&&(Bm()?(e.finishedWork=i,Hu&&Ed()):Um(e,i,n))}else{var o=e.finishedWork;null!==o?Um(e,o,n):null!==(o=em(e,n,!1))&&Um(e,o,n)}pm=!1}function Um(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime<=n&&(null===Tm?Tm=[r]:Tm.push(r),r._defer))return e.finishedWork=t,void(e.remainingExpirationTime=Hl);e.finishedWork=null,e.remainingExpirationTime=Jp(t)}function Bm(){return null!==wm&&(!(wm.timeRemaining()>Cm)&&(ym=!0,!0))}function zm(e){null===mm&&t(!1,"Should be working on a root. This error is likely caused by a bug in React. Please file an issue."),mm.remainingExpirationTime=Hl,bm||(bm=!0,xm=e)}function jm(e,t){var n=_m;_m=!0;try{return e(t)}finally{(_m=n)||pm||Rm()}}function Vm(e,t){if(_m&&!Sm){Sm=!0;try{return e(t)}finally{Sm=!1}}return e(t)}function Gm(e,n){pm&&t(!1,"flushSync was called from inside a lifecycle method. It cannot be called when React is already rendering.");var r=_m;_m=!0;try{return um(e,n)}finally{_m=r,Rm()}}function Wm(e,t,n){if(Mm)return e(t,n);_m||pm||gm===Hl||(Im(gm,!1,null),gm=Hl);var r=Mm,i=_m;Mm=!0,_m=!0;try{return e(t,n)}finally{Mm=r,(_m=i)||pm||Rm()}}function Hm(e){var t=_m;_m=!0;try{um(e)}finally{(_m=t)||pm||Im(Xl,!1,null)}}var Xm=void 0;function qm(e){if(!e)return d;var n=$i(e),r=function(e){bo(e)&&e.tag===K||t(!1,"Expected subtree parent to be a mounted class component. This error is likely caused by a bug in React. Please file an issue.");for(var n=e;n.tag!==$;){if(kl(n))return n.stateNode.__reactInternalMemoizedMergedChildContext;var r=n.return;r||t(!1,"Found unexpected detached subtree parent. This error is likely caused by a bug in React. Please file an issue."),n=r}return n.stateNode.context}(n);return kl(n)?jl(n,r):r}function Ym(e,t,n,r,o){var a=t.current;Dh.debugTool&&(null===a.alternate?Dh.debugTool.onMountContainer(t):null===e?Dh.debugTool.onUnmountContainer(t):Dh.debugTool.onUpdateContainer(t));var s=qm(n);return null===t.context?t.context=s:t.pendingContext=s,function(e,t,n,r){"render"!==jr.phase||null===jr.current||Xm||(Xm=!0,i(!1,"Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.\n\nCheck the render method of %s.",kr(jr.current)||"Unknown"));var o=Yh(n);return o.payload={element:t},null!==(r=void 0===r?null:r)&&("function"!=typeof r&&i(!1,"render(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",r),o.callback=r),Qh(e,o,n),am(e,n),n}(a,e,r,o)}function Jm(e){var n=$i(e);void 0===n&&("function"==typeof e.render?t(!1,"Unable to find node on an unmounted component."):t(!1,"Argument appears to not be a ReactComponent. Keys: %s",Object.keys(e)));var r=_o(n);return null===r?null:r.stateNode}function Qm(e,t,n){return mh(e,t,n)}function Zm(e,t,n,r){var i=t.current;return Ym(e,t,n,im(sm(),i),r)}function Km(e){var t=e.current;if(!t.child)return null;switch(t.child.tag){case te:return vu(t.child.stateNode);default:return t.child.stateNode}}function $m(e){var t=function(e){var t=wo(e);if(!t)return null;for(var n=t;;){if(n.tag===te||n.tag===ne)return n;if(n.child&&n.tag!==ee)n.child.return=n,n=n.child;else{if(n===t)return null;for(;!n.sibling;){if(!n.return||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}}return null}(e);return null===t?null:t.stateNode}function ev(e){var t=e.findFiberByHostInstance;return function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled)return!0;if(!t.supportsFiber)return i(!1,"The installed version of React DevTools is too old and will not work with the current version of React. Please update React DevTools. https://fb.me/react-devtools"),!0;try{var n=t.inject(e);vh=bh(function(e){return t.onCommitFiberRoot(n,e)}),gh=bh(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){i(!1,"React DevTools encountered an error: %s.",e)}return!0}(a({},e,{findHostInstanceByFiber:function(e){var t=_o(e);return null===t?null:t.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}Xm=!1;var tv=Object.freeze({updateContainerAtExpirationTime:Ym,createContainer:Qm,updateContainer:Zm,flushRoot:Dm,requestWork:Lm,computeUniqueAsyncExpiration:rm,batchedUpdates:jm,unbatchedUpdates:Vm,deferredUpdates:cm,syncUpdates:um,interactiveUpdates:Wm,flushInteractiveUpdates:function(){pm||gm===Hl||(Im(gm,!1,null),gm=Hl)},flushControlled:Hm,flushSync:Gm,getPublicRootInstance:Km,findHostInstance:Jm,findHostInstanceWithNoPortals:$m,injectIntoDevTools:ev});var nv,rv=void 0,iv=!1;function ov(e){var t=rm();this._expirationTime=t,this._root=e,this._next=null,this._callbacks=null,this._didComplete=!1,this._hasChildren=!1,this._children=null,this._defer=!0}function av(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function sv(e,t,n){var r=Qm(e,t,n);this._internalRoot=r}function cv(e){return!(!e||e.nodeType!==cr&&e.nodeType!==hr&&e.nodeType!==dr&&(e.nodeType!==lr||" react-mount-point-unstable "!==e.nodeValue))}function uv(e){return e?e.nodeType===hr?e.documentElement:e.firstChild:null}"function"==typeof Map&&null!=Map.prototype&&"function"==typeof Map.prototype.forEach&&"function"==typeof Set&&null!=Set.prototype&&"function"==typeof Set.prototype.clear&&"function"==typeof Set.prototype.forEach||i(!1,"React depends on Map and Set built-in types. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),rv=function(e){if(e._reactRootContainer&&e.nodeType!==lr){var t=$m(e._reactRootContainer._internalRoot.current);t&&t.parentNode!==e&&i(!1,"render(...): It looks like the React-rendered content of this container was removed without using React. This is not supported and will cause errors. Instead, call ReactDOM.unmountComponentAtNode to empty a container.")}var n=!!e._reactRootContainer,r=uv(e);!(!r||!me(r))&&!n&&i(!1,"render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),e.nodeType===cr&&e.tagName&&"BODY"===e.tagName.toUpperCase()&&i(!1,"render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.")},nv=function(e,t){null!==e&&"function"!=typeof e&&i(!1,"%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",t,e)},Jn.injectFiberControlledHostComponent(Dc),ov.prototype.render=function(e){this._defer||t(!1,"batch.render: Cannot render a batch that already committed."),this._hasChildren=!0,this._children=e;var n=this._root._internalRoot,r=this._expirationTime,i=new av;return Ym(e,n,null,r,i._onCommit),i},ov.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},ov.prototype.commit=function(){var e=this._root._internalRoot,n=e.firstBatch;if(this._defer&&null!==n||t(!1,"batch.commit: Cannot commit a batch multiple times."),!this._hasChildren)return this._next=null,void(this._defer=!1);var r=this._expirationTime;if(n!==this){this._hasChildren&&(r=this._expirationTime=n._expirationTime,this.render(this._children));for(var i=null,o=n;o!==this;)i=o,o=o._next;null===i&&t(!1,"batch.commit: Cannot commit a batch multiple times."),i._next=o._next,this._next=n,n=e.firstBatch=this}this._defer=!1,Dm(e,r);var a=this._next;this._next=null,null!==(n=e.firstBatch=a)&&n._hasChildren&&n.render(n._children)},ov.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){(0,e[t])()}}},av.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},av.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var n=0;n<e.length;n++){var r=e[n];"function"!=typeof r&&t(!1,"Invalid argument passed as callback. Expected a function. Instead received: %s",r),r()}}},sv.prototype.render=function(e,t){var n=this._internalRoot,r=new av;return nv(t=void 0===t?null:t,"render"),null!==t&&r.then(t),Zm(e,n,null,r._onCommit),r},sv.prototype.unmount=function(e){var t=this._internalRoot,n=new av;return nv(e=void 0===e?null:e,"render"),null!==e&&n.then(e),Zm(null,t,null,n._onCommit),n},sv.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new av;return nv(n=void 0===n?null:n,"render"),null!==n&&i.then(n),Zm(t,r,e,i._onCommit),i},sv.prototype.createBatch=function(){var e=new ov(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(var i=null,o=r;null!==o&&o._expirationTime<=t;)i=o,o=o._next;e._next=o,null!==i&&(i._next=e)}return e},or(tv);var lv=!1;function hv(e,t){var n=t||function(e){var t=uv(e);return!(!t||t.nodeType!==cr||!t.hasAttribute(Qr))}(e);if(!n)for(var r=!1,o=void 0;o=e.lastChild;)!r&&o.nodeType===cr&&o.hasAttribute(Qr)&&(r=!0,i(!1,"render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup.")),e.removeChild(o);!n||t||lv||(lv=!0,_h(!1,"render(): Calling ReactDOM.render() to hydrate server-rendered markup will stop working in React v17. Replace the ReactDOM.render() call with ReactDOM.hydrate() if you want React to attach to the server HTML."));return new sv(e,!1,n)}function dv(e,n,r,i,o){cv(r)||t(!1,"Target container is not a DOM element."),rv(r);var a=r._reactRootContainer;if(a){if("function"==typeof o){var s=o;o=function(){var e=Km(a._internalRoot);s.call(e)}}null!=e?a.legacy_renderSubtreeIntoContainer(e,n,o):a.render(n,o)}else{if(a=r._reactRootContainer=hv(r,i),"function"==typeof o){var c=o;o=function(){var e=Km(a._internalRoot);c.call(e)}}Vm(function(){null!=e?a.legacy_renderSubtreeIntoContainer(e,n,o):a.render(n,o)})}return Km(a._internalRoot)}function fv(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return cv(n)||t(!1,"Target container is not a DOM element."),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Tr,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,n,null,r)}var pv={createPortal:fv,findDOMNode:function(e){var t=xr.current;null!==t&&null!==t.stateNode&&(t.stateNode._warnedAboutRefsInRender||i(!1,"%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",kr(t)||"A component"),t.stateNode._warnedAboutRefsInRender=!0);return null==e?null:e.nodeType===cr?e:Jm(e)},hydrate:function(e,t,n){return dv(null,e,t,!0,n)},render:function(e,t,n){return dv(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,n,r,i){return null!=e&&function(e){return void 0!==e._reactInternalFiber}(e)||t(!1,"parentComponent must be a valid React Component"),dv(e,n,r,!1,i)},unmountComponentAtNode:function(e){if(cv(e)||t(!1,"unmountComponentAtNode(...): Target container is not a DOM element."),e._reactRootContainer){var n=uv(e);return n&&!me(n)&&i(!1,"unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React."),Vm(function(){dv(null,null,e,!1,function(){e._reactRootContainer=null})}),!0}var r=uv(e),o=!(!r||!me(r)),a=1===e.nodeType&&cv(e.parentNode)&&!!e.parentNode._reactRootContainer;return o&&i(!1,"unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",a?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component."),!1},unstable_createPortal:function(){return iv||(iv=!0,_h(!1,'The ReactDOM.unstable_createPortal() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactDOM.createPortal() instead. It has the exact same API, but without the "unstable_" prefix.')),fv.apply(void 0,arguments)},unstable_batchedUpdates:jm,unstable_deferredUpdates:cm,unstable_interactiveUpdates:Wm,flushSync:Gm,unstable_flushControlled:Hm,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:J,EventPluginRegistry:N,EventPropagators:Le,ReactControlledComponent:$n,ReactDOMComponentTree:be,ReactDOMEventListener:Ko},unstable_createRoot:function(e,t){return new sv(e,!0,null!=t&&!0===t.hydrate)}};if(!ev({findFiberByHostInstance:pe,bundleType:1,version:"16.4.1",rendererPackageName:"react-dom"})&&o.canUseDOM&&window.top===window.self&&(navigator.userAgent.indexOf("Chrome")>-1&&-1===navigator.userAgent.indexOf("Edge")||navigator.userAgent.indexOf("Firefox")>-1)){var mv=window.location.protocol;/^(https?|file):$/.test(mv)&&console.info("%cDownload the React DevTools for a better development experience: https://fb.me/react-devtools"+("file:"===mv?"\nYou might need to use a local HTTP server (instead of file://): https://fb.me/react-devtools-faq":""),"font-weight:bold")}var vv=Object.freeze({default:pv}),gv=vv&&pv||vv,yv=gv.default?gv.default:gv;e.exports=yv})()},"71d3ec5bd65418e28ebc":function(e,t,n){var r=n("224ae09e536c09e69a0a"),i=n("621a65702ee1a566fd32")("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},"72301e3cc725dd502232":function(e,t,n){(function(e){var r=n("18caba858d9ea0f67284"),i=n("bc20db01ebac581e43a6"),o="object"==typeof t&&t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;e.exports=c}).call(this,n("f586cf5b9f4b7719b2c1")(e))},"72ac5893bfc7ed50a09c":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("ca19e32ab6ee3b3692aa"),o=n("39dac2a92593ee9501cd"),a="".endsWith;r(r.P+r.F*n("e5c4ff14bae25ddfa508")("endsWith"),"String",{endsWith:function(e){var t=o(this,e,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(t.length),s=void 0===n?r:Math.min(i(n),r),c=String(e);return a?a.call(t,c,s):t.slice(s-c.length,s)===c}})},"7336e9dece9add80afce":function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("5692bffd717498245e82"));t.default=r.default},"74431d47afb6248fcb69":function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"take",function(){return Fe}),n.d(r,"takem",function(){return ke}),n.d(r,"put",function(){return Ue}),n.d(r,"all",function(){return Be}),n.d(r,"race",function(){return ze}),n.d(r,"call",function(){return Ve}),n.d(r,"apply",function(){return Ge}),n.d(r,"cps",function(){return We}),n.d(r,"fork",function(){return He}),n.d(r,"spawn",function(){return Xe}),n.d(r,"join",function(){return qe}),n.d(r,"cancel",function(){return Ye}),n.d(r,"select",function(){return Je}),n.d(r,"actionChannel",function(){return Qe}),n.d(r,"cancelled",function(){return Ze}),n.d(r,"flush",function(){return Ke}),n.d(r,"getContext",function(){return $e}),n.d(r,"setContext",function(){return et}),n.d(r,"takeEvery",function(){return tt}),n.d(r,"takeLatest",function(){return nt}),n.d(r,"throttle",function(){return rt});var i={};n.r(i),n.d(i,"TASK",function(){return c}),n.d(i,"SAGA_ACTION",function(){return d}),n.d(i,"noop",function(){return v}),n.d(i,"is",function(){return w}),n.d(i,"deferred",function(){return T}),n.d(i,"arrayOfDeffered",function(){return A}),n.d(i,"createMockTask",function(){return C}),n.d(i,"cloneableGenerator",function(){return B}),n.d(i,"asEffect",function(){return ot}),n.d(i,"CHANNEL_END",function(){return ut});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e){return"@@redux-saga/"+e},c=s("TASK"),u=s("HELPER"),l=s("MATCH"),h=s("CANCEL_PROMISE"),d=s("SAGA_ACTION"),f=s("SELF_CANCELLATION"),p=function(e){return function(){return e}},m=p(!0),v=function(){},g=function(e){return e};function y(e,t,n){if(!t(e))throw R("error","uncaught at check",n),new Error(n)}var b=Object.prototype.hasOwnProperty;function x(e,t){return w.notUndef(e)&&b.call(e,t)}var w={undef:function(e){return null===e||void 0===e},notUndef:function(e){return null!==e&&void 0!==e},func:function(e){return"function"==typeof e},number:function(e){return"number"==typeof e},string:function(e){return"string"==typeof e},array:Array.isArray,object:function(e){return e&&!w.array(e)&&"object"===(void 0===e?"undefined":a(e))},promise:function(e){return e&&w.func(e.then)},iterator:function(e){return e&&w.func(e.next)&&w.func(e.throw)},iterable:function(e){return e&&w.func(Symbol)?w.func(e[Symbol.iterator]):w.array(e)},task:function(e){return e&&e[c]},observable:function(e){return e&&w.func(e.subscribe)},buffer:function(e){return e&&w.func(e.isEmpty)&&w.func(e.take)&&w.func(e.put)},pattern:function(e){return e&&(w.string(e)||"symbol"===(void 0===e?"undefined":a(e))||w.func(e)||w.array(e))},channel:function(e){return e&&w.func(e.take)&&w.func(e.close)},helper:function(e){return e&&e[u]},stringableFunc:function(e){return w.func(e)&&x(e,"toString")}},_={assign:function(e,t){for(var n in t)x(t,n)&&(e[n]=t[n])}};function S(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}var M={from:function(e){var t=Array(e.length);for(var n in e)x(e,n)&&(t[n]=e[n]);return t}};function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o({},e),n=new Promise(function(e,n){t.resolve=e,t.reject=n});return t.promise=n,t}function A(e){for(var t=[],n=0;n<e;n++)t.push(T());return t}function E(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=void 0,r=new Promise(function(r){n=setTimeout(function(){return r(t)},e)});return r[h]=function(){return clearTimeout(n)},r}function C(){var e,t=!0,n=void 0,r=void 0;return(e={})[c]=!0,e.isRunning=function(){return t},e.result=function(){return n},e.error=function(){return r},e.setRunning=function(e){return t=e},e.setResult=function(e){return n=e},e.setError=function(e){return r=e},e}var P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return++e}}(),L=function(e){throw e},O=function(e){return{value:e,done:!0}};function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments[3],i={name:n,next:e,throw:t,return:O};return r&&(i[u]=!0),"undefined"!=typeof Symbol&&(i[Symbol.iterator]=function(){return i}),i}function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"==typeof window?console.log("redux-saga "+e+": "+t+"\n"+(n&&n.stack||n)):console[e](t,n)}function I(e,t){return function(){return e.apply(void 0,arguments)}}var D=function(e,t){return e+" has been deprecated in favor of "+t+", please update your code"},F=function(e){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},k=function(e,t){return(e?e+".":"")+"setContext(props): argument "+t+" is not a plain object"},U=function(e){return function(t){return e(Object.defineProperty(t,d,{value:!0}))}},B=function e(t){return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=[],a=t.apply(void 0,r);return{next:function(e){return o.push(e),a.next(e)},clone:function(){var n=e(t).apply(void 0,r);return o.forEach(function(e){return n.next(e)}),n},return:function(e){return a.return(e)},throw:function(e){return a.throw(e)}}}},z="Channel's Buffer overflow!",j=1,V=3,G=4,W={isEmpty:m,put:v,take:v};function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments[1],n=new Array(e),r=0,i=0,o=0,a=function(t){n[i]=t,i=(i+1)%e,r++},s=function(){if(0!=r){var t=n[o];return n[o]=null,r--,o=(o+1)%e,t}},c=function(){for(var e=[];r;)e.push(s());return e};return{isEmpty:function(){return 0==r},put:function(s){if(r<e)a(s);else{var u=void 0;switch(t){case j:throw new Error(z);case V:n[i]=s,o=i=(i+1)%e;break;case G:u=2*e,n=c(),r=n.length,i=n.length,o=0,n.length=u,e=u,a(s)}}},take:s,flush:c}}var X={none:function(){return W},fixed:function(e){return H(e,j)},dropping:function(e){return H(e,2)},sliding:function(e){return H(e,V)},expanding:function(e){return H(e,G)}},q=[],Y=0;function J(e){try{Z(),e()}finally{K()}}function Q(e){q.push(e),Y||(Z(),$())}function Z(){Y++}function K(){Y--}function $(){K();for(var e=void 0;!Y&&void 0!==(e=q.shift());)J(e)}var ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},te={type:"@@redux-saga/CHANNEL_END"},ne=function(e){return e&&"@@redux-saga/CHANNEL_END"===e.type};var re="invalid buffer passed to channel factory function",ie="Saga was provided with an undefined action";function oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X.fixed(),t=!1,n=[];function r(){if(t&&n.length)throw F("Cannot have a closed channel with pending takers");if(n.length&&!e.isEmpty())throw F("Cannot have pending takers with non empty buffer")}return y(e,w.buffer,re),{take:function(i){r(),y(i,w.func,"channel.take's callback must be a function"),t&&e.isEmpty()?i(te):e.isEmpty()?(n.push(i),i.cancel=function(){return S(n,i)}):i(e.take())},put:function(i){if(r(),y(i,w.notUndef,ie),!t){if(!n.length)return e.put(i);for(var o=0;o<n.length;o++){var a=n[o];if(!a[l]||a[l](i))return n.splice(o,1),a(i)}}},flush:function(n){r(),y(n,w.func,"channel.flush' callback must be a function"),t&&e.isEmpty()?n(te):n(e.flush())},close:function(){if(r(),!t&&(t=!0,n.length)){var e=n;n=[];for(var i=0,o=e.length;i<o;i++)e[i](te)}},get __takers__(){return n},get __closed__(){return t}}}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X.none(),n=arguments[2];arguments.length>2&&y(n,w.func,"Invalid match function passed to eventChannel");var r=oe(t),i=function(){r.__closed__||(o&&o(),r.close())},o=e(function(e){ne(e)?i():n&&!n(e)||r.put(e)});if(r.__closed__&&o(),!w.func(o))throw new Error("in eventChannel: subscribe should return a function to unsubscribe");return{take:r.take,flush:r.flush,close:i}}ie+="\nHints:\n    - check that your Action Creator returns a non-undefined value\n    - if the Saga was started using runSaga, check that your subscribe source provides the action to its listeners\n  ";var se={done:!0,value:void 0},ce={};function ue(e){return w.channel(e)?"channel":Array.isArray(e)?String(e.map(function(e){return String(e)})):String(e)}function le(e,t){var n=void 0,r=t;function i(t,i){if(r===ce)return se;if(i)throw r=ce,i;n&&n(t);var o=e[r](),a=o[0],s=o[1],c=o[2];return n=c,(r=a)===ce?se:s}return N(i,function(e){return i(null,e)},arguments.length>2&&void 0!==arguments[2]?arguments[2]:"iterator",!0)}function he(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o={done:!1,value:Fe(e)},a=void 0,s=function(e){return a=e};return le({q1:function(){return["q2",o,s]},q2:function(){return a===te?[ce]:["q1",function(e){return{done:!1,value:He.apply(void 0,[t].concat(r,[e]))}}(a)]}},"q1","takeEvery("+ue(e)+", "+t.name+")")}function de(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o={done:!1,value:Fe(e)},a=function(e){return{done:!1,value:He.apply(void 0,[t].concat(r,[e]))}},s=void 0,c=void 0,u=function(e){return s=e},l=function(e){return c=e};return le({q1:function(){return["q2",o,l]},q2:function(){return c===te?[ce]:s?["q3",function(e){return{done:!1,value:Ye(e)}}(s)]:["q1",a(c),u]},q3:function(){return["q1",a(c),u]}},"q1","takeLatest("+ue(e)+", "+t.name+")")}function fe(e,t,n){for(var r=arguments.length,i=Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a=void 0,s=void 0,c={done:!1,value:Qe(t,X.sliding(1))},u={done:!1,value:Ve(E,e)},l=function(e){return a=e},h=function(e){return s=e};return le({q1:function(){return["q2",c,h]},q2:function(){return["q3",{done:!1,value:Fe(s)},l]},q3:function(){return a===te?[ce]:["q4",function(e){return{done:!1,value:He.apply(void 0,[n].concat(i,[e]))}}(a)]},q4:function(){return["q2",u]}},"q1","throttle("+ue(t)+", "+n.name+")")}var pe=I(he),me=I(de),ve=I(fe),ge=s("IO"),ye="TAKE",be="PUT",xe="ALL",we="RACE",_e="CALL",Se="CPS",Me="FORK",Te="JOIN",Ae="CANCEL",Ee="SELECT",Ce="ACTION_CHANNEL",Pe="CANCELLED",Le="FLUSH",Oe="GET_CONTEXT",Ne="SET_CONTEXT",Re="\n(HINT: if you are getting this errors in tests, consider using createMockTask from redux-saga/utils)",Ie=function(e,t){var n;return(n={})[ge]=!0,n[e]=t,n},De=function(e){return y(ot.fork(e),w.object,"detach(eff): argument must be a fork effect"),e[Me].detached=!0,e};function Fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";if(arguments.length&&y(arguments[0],w.notUndef,"take(patternOrChannel): patternOrChannel is undefined"),w.pattern(e))return Ie(ye,{pattern:e});if(w.channel(e))return Ie(ye,{channel:e});throw new Error("take(patternOrChannel): argument "+String(e)+" is not valid channel or a valid pattern")}Fe.maybe=function(){var e=Fe.apply(void 0,arguments);return e[ye].maybe=!0,e};var ke=I(Fe.maybe);function Ue(e,t){return arguments.length>1?(y(e,w.notUndef,"put(channel, action): argument channel is undefined"),y(e,w.channel,"put(channel, action): argument "+e+" is not a valid channel"),y(t,w.notUndef,"put(channel, action): argument action is undefined")):(y(e,w.notUndef,"put(action): argument action is undefined"),t=e,e=null),Ie(be,{channel:e,action:t})}function Be(e){return Ie(xe,e)}function ze(e){return Ie(we,e)}function je(e,t,n){y(t,w.notUndef,e+": argument fn is undefined");var r=null;if(w.array(t)){var i=t;r=i[0],t=i[1]}else if(t.fn){var o=t;r=o.context,t=o.fn}return r&&w.string(t)&&w.func(r[t])&&(t=r[t]),y(t,w.func,e+": argument "+t+" is not a function"),{context:r,fn:t,args:n}}function Ve(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ie(_e,je("call",e,n))}function Ge(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Ie(_e,je("apply",{context:e,fn:t},n))}function We(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ie(Se,je("cps",e,n))}function He(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ie(Me,je("fork",e,n))}function Xe(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return De(He.apply(void 0,[e].concat(n)))}function qe(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1)return Be(t.map(function(e){return qe(e)}));var r=t[0];return y(r,w.notUndef,"join(task): argument task is undefined"),y(r,w.task,"join(task): argument "+r+" is not a valid Task object "+Re),Ie(Te,r)}function Ye(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1)return Be(t.map(function(e){return Ye(e)}));var r=t[0];return 1===t.length&&(y(r,w.notUndef,"cancel(task): argument task is undefined"),y(r,w.task,"cancel(task): argument "+r+" is not a valid Task object "+Re)),Ie(Ae,r||f)}function Je(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return 0===arguments.length?e=g:(y(e,w.notUndef,"select(selector,[...]): argument selector is undefined"),y(e,w.func,"select(selector,[...]): argument "+e+" is not a function")),Ie(Ee,{selector:e,args:n})}function Qe(e,t){return y(e,w.notUndef,"actionChannel(pattern,...): argument pattern is undefined"),arguments.length>1&&(y(t,w.notUndef,"actionChannel(pattern, buffer): argument buffer is undefined"),y(t,w.buffer,"actionChannel(pattern, buffer): argument "+t+" is not a valid buffer")),Ie(Ce,{pattern:e,buffer:t})}function Ze(){return Ie(Pe,{})}function Ke(e){return y(e,w.channel,"flush(channel): argument "+e+" is not valid channel"),Ie(Le,e)}function $e(e){return y(e,w.string,"getContext(prop): argument "+e+" is not a string"),Ie(Oe,e)}function et(e){return y(e,w.object,k(null,e)),Ie(Ne,e)}function tt(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return He.apply(void 0,[he,e,t].concat(r))}function nt(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return He.apply(void 0,[de,e,t].concat(r))}function rt(e,t,n){for(var r=arguments.length,i=Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return He.apply(void 0,[fe,e,t,n].concat(i))}Ue.resolve=function(){var e=Ue.apply(void 0,arguments);return e[be].resolve=!0,e},Ue.sync=I(Ue.resolve);var it=function(e){return function(t){return t&&t[ge]&&t[e]}},ot={take:it(ye),put:it(be),all:it(xe),race:it(we),call:it(_e),cps:it(Se),fork:it(Me),join:it(Te),cancel:it(Ae),select:it(Ee),actionChannel:it(Ce),cancelled:it(Pe),flush:it(Le),getContext:it(Oe),setContext:it(Ne)},at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var ct="proc first argument (Saga function result) must be an iterator",ut={toString:function(){return"@@redux-saga/CHANNEL_END"}},lt={toString:function(){return"@@redux-saga/TASK_CANCEL"}},ht={wildcard:function(){return m},default:function(e){return"symbol"===(void 0===e?"undefined":st(e))?function(t){return t.type===e}:function(t){return t.type===String(e)}},array:function(e){return function(t){return e.some(function(e){return dt(e)(t)})}},predicate:function(e){return function(t){return e(t)}}};function dt(e){return("*"===e?ht.wildcard:w.array(e)?ht.array:w.stringableFunc(e)?ht.default:w.func(e)?ht.predicate:ht.default)(e)}var ft=function(e){return{fn:e}};function pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return v},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"anonymous",u=arguments[8];y(e,w.iterator,ct);var p=I(H,D("[...effects]","all([...effects])")),m=o.sagaMonitor,g=o.logger,b=o.onError,x=g||R,A=function(e){var t=e.sagaStack;!t&&e.stack&&(t=-1!==e.stack.split("\n")[0].indexOf(e.message)?e.stack:"Error: "+e.message+"\n"+e.stack),x("error","uncaught at "+s,t||e.message||e)},E=function(e){var t=ae(function(t){return e(function(e){e[d]?t(e):Q(function(){return t(e)})})});return ee({},t,{take:function(e,n){arguments.length>1&&(y(n,w.func,"channel.take's matcher argument must be a function"),e[l]=n),t.take(e)}})}(t),C=Object.create(i);B.cancel=v;var L=function(e,t,n,r){var i,o;return n._deferredEnd=null,(i={})[c]=!0,i.id=e,i.name=t,"done",(o={}).done=o.done||{},o.done.get=function(){if(n._deferredEnd)return n._deferredEnd.promise;var e=T();return n._deferredEnd=e,n._isRunning||(n._error?e.reject(n._error):e.resolve(n._result)),e.promise},i.cont=r,i.joiners=[],i.cancel=U,i.isRunning=function(){return n._isRunning},i.isCancelled=function(){return n._isCancelled},i.isAborted=function(){return n._isAborted},i.result=function(){return n._result},i.error=function(){return n._error},i.setContext=function(e){y(e,w.object,k("task",e)),_.assign(C,e)},function(e,t){for(var n in t){var r=t[n];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n,r)}}(i,o),i}(a,s,e,u),O={name:s,cancel:function(){O.isRunning&&!O.isCancelled&&(O.isCancelled=!0,B(lt))},isRunning:!0},F=function(e,t,n){var r=[],i=void 0,o=!1;function a(e){c(),n(e,!0)}function s(e){r.push(e),e.cont=function(s,c){o||(S(r,e),e.cont=v,c?a(s):(e===t&&(i=s),r.length||(o=!0,n(i))))}}function c(){o||(o=!0,r.forEach(function(e){e.cont=v,e.cancel()}),r=[])}return s(t),{addTask:s,cancelAll:c,abort:a,getTasks:function(){return r},taskNames:function(){return r.map(function(e){return e.name})}}}(0,O,z);function U(){e._isRunning&&!e._isCancelled&&(e._isCancelled=!0,F.cancelAll(),z(lt))}return u&&(u.cancel=U),e._isRunning=!0,B(),L;function B(t,n){if(!O.isRunning)throw new Error("Trying to resume an already finished generator");try{var r=void 0;n?r=e.throw(t):t===lt?(O.isCancelled=!0,B.cancel(),r=w.func(e.return)?e.return(lt):{done:!0,value:lt}):r=t===ut?w.func(e.return)?e.return():{done:!0}:e.next(t),r.done?(O.isMainRunning=!1,O.cont&&O.cont(r.value)):j(r.value,a,"",B)}catch(e){O.isCancelled&&A(e),O.isMainRunning=!1,O.cont(e,!0)}}function z(t,n){e._isRunning=!1,E.close(),n?(t instanceof Error&&Object.defineProperty(t,"sagaStack",{value:"at "+s+" \n "+(t.sagaStack||t.stack),configurable:!0}),L.cont||(t instanceof Error&&b?b(t):A(t)),e._error=t,e._isAborted=!0,e._deferredEnd&&e._deferredEnd.reject(t)):(e._result=t,e._deferredEnd&&e._deferredEnd.resolve(t)),L.cont&&L.cont(t,n),L.joiners.forEach(function(e){return e.cb(t,n)}),L.joiners=null}function j(e,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments[3],c=P();m&&m.effectTriggered({effectId:c,parentEffectId:i,label:o,effect:e});var u=void 0;function l(e,t){u||(u=!0,a.cancel=v,m&&(t?m.effectRejected(c,e):m.effectResolved(c,e)),a(e,t))}l.cancel=v,a.cancel=function(){if(!u){u=!0;try{l.cancel()}catch(e){A(e)}l.cancel=v,m&&m.effectCancelled(c)}};var h=void 0;return w.promise(e)?V(e,l):w.helper(e)?W(ft(e),c,l):w.iterator(e)?G(e,c,s,l):w.array(e)?p(e,c,l):(h=ot.take(e))?function(e,t){var n=e.channel,r=e.pattern,i=e.maybe;n=n||E;var o=function(e){return e instanceof Error?t(e,!0):ne(e)&&!i?t(ut):t(e)};try{n.take(o,dt(r))}catch(e){return t(e,!0)}t.cancel=o.cancel}(h,l):(h=ot.put(e))?function(e,t){var r=e.channel,i=e.action,o=e.resolve;Q(function(){var e=void 0;try{e=(r?r.put:n)(i)}catch(e){if(r||o)return t(e,!0);A(e)}if(!o||!w.promise(e))return t(e);V(e,t)})}(h,l):(h=ot.all(e))?H(h,c,l):(h=ot.race(e))?function(e,t,n){var r=void 0,i=Object.keys(e),o={};i.forEach(function(t){var a=function(o,a){if(!r)if(a)n.cancel(),n(o,!0);else if(!ne(o)&&o!==ut&&o!==lt){var s;n.cancel(),r=!0;var c=((s={})[t]=o,s);n(w.array(e)?[].slice.call(at({},c,{length:i.length})):c)}};a.cancel=v,o[t]=a}),n.cancel=function(){r||(r=!0,i.forEach(function(e){return o[e].cancel()}))},i.forEach(function(n){r||j(e[n],t,n,o[n])})}(h,c,l):(h=ot.call(e))?function(e,t,n){var r=e.context,i=e.fn,o=e.args,a=void 0;try{a=i.apply(r,o)}catch(e){return n(e,!0)}return w.promise(a)?V(a,n):w.iterator(a)?G(a,t,i.name,n):n(a)}(h,c,l):(h=ot.cps(e))?function(e,t){var n=e.context,r=e.fn,i=e.args;try{var o=function(e,n){return w.undef(e)?t(n):t(e,!0)};r.apply(n,i.concat(o)),o.cancel&&(t.cancel=function(){return o.cancel()})}catch(e){return t(e,!0)}}(h,l):(h=ot.fork(e))?W(h,c,l):(h=ot.join(e))?function(e,t){if(e.isRunning()){var n={task:L,cb:t};t.cancel=function(){return S(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())}(h,l):(h=ot.cancel(e))?function(e,t){e===f&&(e=L);e.isRunning()&&e.cancel();t()}(h,l):(h=ot.select(e))?function(e,t){var n=e.selector,i=e.args;try{var o=n.apply(void 0,[r()].concat(i));t(o)}catch(e){t(e,!0)}}(h,l):(h=ot.actionChannel(e))?function(e,n){var r=e.pattern,i=e.buffer,o=dt(r);o.pattern=r,n(ae(t,i||X.fixed(),o))}(h,l):(h=ot.flush(e))?function(e,t){e.flush(t)}(h,l):(h=ot.cancelled(e))?function(e,t){t(!!O.isCancelled)}(0,l):(h=ot.getContext(e))?function(e,t){t(C[e])}(h,l):(h=ot.setContext(e))?function(e,t){_.assign(C,e),t()}(h,l):l(e)}function V(e,t){var n=e[h];w.func(n)?t.cancel=n:w.func(e.abort)&&(t.cancel=function(){return e.abort()}),e.then(t,function(e){return t(e,!0)})}function G(e,i,a,s){pt(e,t,n,r,C,o,i,a,s)}function W(e,i,a){var s=e.context,c=e.fn,u=e.args,l=e.detached,h=function(e){var t=e.context,n=e.fn,r=e.args;if(w.iterator(n))return n;var i=void 0,o=void 0;try{i=n.apply(t,r)}catch(e){o=e}return w.iterator(i)?i:N(o?function(){throw o}:function(){var e=void 0,t={done:!1,value:i};return function(n){return e?function(e){return{done:!0,value:e}}(n):(e=!0,t)}}())}({context:s,fn:c,args:u});try{Z();var d=pt(h,t,n,r,C,o,i,c.name,l?null:v);l?a(d):h._isRunning?(F.addTask(d),a(d)):h._error?F.abort(h._error):a(d)}finally{$()}}function H(e,t,n){var r=Object.keys(e);if(!r.length)return n(w.array(e)?[]:{});var i=0,o=void 0,a={},s={};r.forEach(function(t){var c=function(s,c){o||(c||ne(s)||s===ut||s===lt?(n.cancel(),n(s,c)):(a[t]=s,++i===r.length&&(o=!0,n(w.array(e)?M.from(at({},a,{length:r.length})):a))))};c.cancel=v,s[t]=c}),n.cancel=function(){o||(o=!0,r.forEach(function(e){return s[e].cancel()}))},r.forEach(function(n){return j(e[n],t,n,s[n])})}}var mt="runSaga(storeInterface, saga, ...args)",vt=mt+": saga argument must be a Generator function!";function gt(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=void 0;w.iterator(e)?(o=e,e=t):(y(t,w.func,vt),y(o=t.apply(void 0,r),w.iterator,vt));var a=e,s=a.subscribe,c=a.dispatch,u=a.getState,l=a.context,h=a.sagaMonitor,d=a.logger,f=a.onError,p=P();h&&(h.effectTriggered=h.effectTriggered||v,h.effectResolved=h.effectResolved||v,h.effectRejected=h.effectRejected||v,h.effectCancelled=h.effectCancelled||v,h.actionDispatched=h.actionDispatched||v,h.effectTriggered({effectId:p,root:!0,parentEffectId:0,effect:{root:!0,saga:t,args:r}}));var m=pt(o,s,U(c),u,l,{sagaMonitor:h,logger:d,onError:f},p,t.name);return h&&h.effectResolved(p,m),m}n.d(t,!1,function(){return gt}),n.d(t,!1,function(){return te}),n.d(t,!1,function(){return ae}),n.d(t,!1,function(){return oe}),n.d(t,!1,function(){return X}),n.d(t,!1,function(){return pe}),n.d(t,!1,function(){return me}),n.d(t,!1,function(){return ve}),n.d(t,!1,function(){return E}),n.d(t,!1,function(){return h}),n.d(t,!1,function(){return De}),n.d(t,!1,function(){return r}),n.d(t,!1,function(){return i});t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=void 0===t?{}:t,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["context"]),i=r.sagaMonitor,o=r.logger,a=r.onError;if(w.func(r))throw new Error("You passed a function to the Saga middleware. You are likely trying to start a        Saga by directly passing it to the middleware. This is no longer possible starting from 0.10.0.        To run a Saga, you must do it dynamically AFTER mounting the middleware into the store.\n        Example:\n          import createSagaMiddleware from 'redux-saga'\n          ... other imports\n\n          const sagaMiddleware = createSagaMiddleware()\n          const store = createStore(reducer, applyMiddleware(sagaMiddleware))\n          sagaMiddleware.run(saga, ...args)\n      ");if(o&&!w.func(o))throw new Error("`options.logger` passed to the Saga middleware is not a function!");if(a&&!w.func(a))throw new Error("`options.onError` passed to the Saga middleware is not a function!");if(r.emitter&&!w.func(r.emitter))throw new Error("`options.emitter` passed to the Saga middleware is not a function!");function s(e){var t=e.getState,c=e.dispatch,u=function(){var e=[];return{subscribe:function(t){return e.push(t),function(){return S(e,t)}},emit:function(t){for(var n=e.slice(),r=0,i=n.length;r<i;r++)n[r](t)}}}();return u.emit=(r.emitter||g)(u.emit),s.run=gt.bind(null,{context:n,subscribe:u.subscribe,dispatch:c,getState:t,sagaMonitor:i,logger:o,onError:a}),function(e){return function(t){i&&i.actionDispatched&&i.actionDispatched(t);var n=e(t);return u.emit(t),n}}}return s.run=function(){throw new Error("Before running a Saga, you must mount the Saga middleware on the Store using applyMiddleware")},s.setContext=function(e){y(e,w.object,k("sagaMiddleware",e)),_.assign(n,e)},s}},"74988f1178e5f1cc2f7a":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Math",{isubh:function(e,t,n,r){var i=e>>>0,o=n>>>0;return(t>>>0)-(r>>>0)-((~i&o|~(i^o)&i-o>>>0)>>>31)|0}})},"74be682203e7c82cb4c9":function(e,t,n){n("89a21af31babcdc56725")("Array")},"7519864545a89c83682d":function(e,t,n){"use strict";var r=n("5f25c015bbbf9d42c661"),i=n("88db22626e6c88b175cf"),o=n("7a7739dd8a198a2cfcb5"),a=n("7ad2c0eb9a8edcc472a4"),s=n("621a65702ee1a566fd32");e.exports=function(e,t,n){var c=s(e),u=n(a,c,""[e]),l=u[0],h=u[1];o(function(){var t={};return t[c]=function(){return 7},7!=""[e](t)})&&(i(String.prototype,e,l),r(RegExp.prototype,c,2==t?function(e,t){return h.call(e,this,t)}:function(e){return h.call(e,this)}))}},"759097197b97ddad17eb":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("1f3157d073736826d4fa"),o=n("693c9c0dfc6db2b00620"),a=n("945a806e4f4787a7905b"),s=1..toFixed,c=Math.floor,u=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",h=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*u[n],u[n]=r%1e7,r=c(r/1e7)},d=function(e){for(var t=6,n=0;--t>=0;)n+=u[t],u[t]=c(n/e),n=n%e*1e7},f=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==u[e]){var n=String(u[e]);t=""===t?n:t+a.call("0",7-n.length)+n}return t},p=function(e,t,n){return 0===t?n:t%2==1?p(e,t-1,n*e):p(e*e,t/2,n)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n("7a7739dd8a198a2cfcb5")(function(){s.call({})})),"Number",{toFixed:function(e){var t,n,r,s,c=o(this,l),u=i(e),m="",v="0";if(u<0||u>20)throw RangeError(l);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(m="-",c=-c),c>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(c*p(2,69,1))-69)<0?c*p(2,-t,1):c/p(2,t,1),n*=4503599627370496,(t=52-t)>0){for(h(0,n),r=u;r>=7;)h(1e7,0),r-=7;for(h(p(10,r,1),0),r=t-1;r>=23;)d(1<<23),r-=23;d(1<<r),h(1,1),d(2),v=f()}else h(0,n),h(1<<-t,0),v=f()+a.call("0",u);return v=u>0?m+((s=v.length)<=u?"0."+a.call("0",u-s)+v:v.slice(0,s-u)+"."+v.slice(s-u)):m+v}})},"759a6902720117087dd3":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("79c91dcd8cd554c59c7b"),o=function(e){this._t=i(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n("5c5d334c57135891e397")(o,"Object",function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}}),r(r.S,"Reflect",{enumerate:function(e){return new o(e)}})},"770f76c876afc046e4e0":function(e,t,n){var r=n("1f3157d073736826d4fa"),i=n("7ad2c0eb9a8edcc472a4");e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}}},"77bfc0a151efbe7efe2d":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.P+r.R,"Map",{toJSON:n("b319470fdda47fb5d046")("Map")})},"7830fb198d99e49e14ff":function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=n("8af190b70a6bc55c6f1b"),o=r(i),a=r(n("f66a9a2f451f5f6cfabf")),s=r(n("a88d2aa2cbd689d523e2"));e.exports=function(e,t,n){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!=typeof r)throw new Error("Expected WrappedComponent to be a React component.");var c=[],u=void 0;function l(){u=e(c.map(function(e){return e.props})),h.canUseDOM?t(u):n&&(u=n(u))}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.peek=function(){return u},t.rewind=function(){if(t.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=u;return u=void 0,c=[],e},t.prototype.shouldComponentUpdate=function(e){return!s(e,this.props)},t.prototype.componentWillMount=function(){c.push(this),l()},t.prototype.componentDidUpdate=function(){l()},t.prototype.componentWillUnmount=function(){var e=c.indexOf(this);c.splice(e,1),l()},t.prototype.render=function(){return o.createElement(r,this.props)},t}(i.Component);return h.displayName="SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")",h.canUseDOM=a.canUseDOM,h}}},"7874b6e955f7d90ad7ec":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("1139de1233fd67f45bd7").isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},"79c91dcd8cd554c59c7b":function(e,t,n){var r=n("a459ab805827640a27e8");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},"7a7739dd8a198a2cfcb5":function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"7a8c0ef4f45a56962a18":function(e,t,n){"use strict";var r=n("1a5381b6e12121a4e33d"),i=n("2c407c4438ef2794ef23");e.exports=n("0633550d227682cecd10")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},"7ad2ae5e9bfa67dff4eb":function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.createConnect=f;var i=l(n("8de1be082e521bbaabf2")),o=l(n("4b80994996621a6e63f3")),a=l(n("b6fe868af5705c1105ee")),s=l(n("bd5434bb096a0db94771")),c=l(n("3d514c6d979a6ce94521")),u=l(n("b76ef4afb4fcdfa26ddc"));function l(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function d(e,t){return e===t}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.connectHOC,n=void 0===t?i.default:t,l=e.mapStateToPropsFactories,f=void 0===l?s.default:l,p=e.mapDispatchToPropsFactories,m=void 0===p?a.default:p,v=e.mergePropsFactories,g=void 0===v?c.default:v,y=e.selectorFactory,b=void 0===y?u.default:y;return function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=a.pure,c=void 0===s||s,u=a.areStatesEqual,l=void 0===u?d:u,p=a.areOwnPropsEqual,v=void 0===p?o.default:p,y=a.areStatePropsEqual,x=void 0===y?o.default:y,w=a.areMergedPropsEqual,_=void 0===w?o.default:w,S=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),M=h(e,f,"mapStateToProps"),T=h(t,m,"mapDispatchToProps"),A=h(i,g,"mergeProps");return n(b,r({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:M,initMapDispatchToProps:T,initMergeProps:A,pure:c,areStatesEqual:l,areOwnPropsEqual:v,areStatePropsEqual:x,areMergedPropsEqual:_},S))}}t.default=f()},"7ad2c0eb9a8edcc472a4":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},"7ae46632a49db7ab2ae0":function(e,t,n){var r=n("1139de1233fd67f45bd7").parseFloat,i=n("57e7a4ee5fd1ce9280ef").trim;e.exports=1/r(n("f3bd18506acf22d8f1d4")+"-0")!=-1/0?function(e){var t=i(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},"7c3eb54bc7a7e3451a7e":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},"7c757e9b280b4a302846":function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},"7caa05c4b9a2c1771918":function(e,t){e.exports=Math.scale||function(e,t,n,r,i){return 0===arguments.length||e!=e||t!=t||n!=n||r!=r||i!=i?NaN:e===1/0||e===-1/0?e:(e-t)*(i-r)/(n-t)+r}},"7e56d82a60dcbc0a4c8d":function(e,t,n){var r=n("104a011c3c0c4bae71c3")(Object.keys,Object);e.exports=r},"7f74493c48ab576afbd4":function(e,t,n){"use strict";t.__esModule=!0;var r=t.CALL_HISTORY_METHOD="@@router/CALL_HISTORY_METHOD";function i(e){return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return{type:r,payload:{method:e,args:n}}}}var o=t.push=i("push"),a=t.replace=i("replace"),s=t.go=i("go"),c=t.goBack=i("goBack"),u=t.goForward=i("goForward");t.routerActions={push:o,replace:a,go:s,goBack:c,goForward:u}},"7fc706acfdba9b87047f":function(e,t,n){var r=n("a9e0e4b5ca884ed0dd59"),i=n("f71a7c9d37f996326dd6"),o=n("79c91dcd8cd554c59c7b"),a=n("1139de1233fd67f45bd7").Reflect;e.exports=a&&a.ownKeys||function(e){var t=r.f(o(e)),n=i.f;return n?t.concat(n(e)):t}},"7fd90dee1f5cbd901d1c":function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},"801f84267d5c09c3892e":function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("4245b1933f7026101770"));t.default=r.default},"80e6088e4899523ce7ea":function(e,t,n){var r=n("18caba858d9ea0f67284").Symbol;e.exports=r},"825e103ed4a71fb91e11":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("770f76c876afc046e4e0")(!1);r(r.P,"String",{codePointAt:function(e){return i(this,e)}})},"8282da6ea45ca23bdd3c":function(e,t,n){n("02fcd2201285b358795d")("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},"82c3e6e6e3fe41af700d":function(e,t,n){"use strict";
/** @license React v16.5.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,c=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.placeholder"):60113;function p(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case h:case a:case c:case s:return e;default:switch(e=e&&e.$$typeof){case l:case d:case u:return e;default:return t}}case o:return t}}}t.typeOf=p,t.AsyncMode=h,t.ContextConsumer=l,t.ContextProvider=u,t.Element=i,t.ForwardRef=d,t.Fragment=a,t.Profiler=c,t.Portal=o,t.StrictMode=s,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===h||e===c||e===s||e===f||"object"==typeof e&&null!==e&&("function"==typeof e.then||e.$$typeof===u||e.$$typeof===l||e.$$typeof===d)},t.isAsyncMode=function(e){return p(e)===h},t.isContextConsumer=function(e){return p(e)===l},t.isContextProvider=function(e){return p(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return p(e)===d},t.isFragment=function(e){return p(e)===a},t.isProfiler=function(e){return p(e)===c},t.isPortal=function(e){return p(e)===o},t.isStrictMode=function(e){return p(e)===s}},"83306aed22ee07ce18aa":function(e,t,n){var r=n("80e6088e4899523ce7ea"),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},"83406643bfb209d249f4":function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in n=Object(arguments[c]))i.call(n,u)&&(s[u]=n[u]);if(r){a=r(n);for(var l=0;l<a.length;l++)o.call(n,a[l])&&(s[a[l]]=n[a[l]])}}return s}},"84696c4e387dcb8648dc":function(e,t){var n=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}},"848061d2617404d8a848":function(e,t,n){var r=n("4be2c15021f717a728f0")(n("18caba858d9ea0f67284"),"Promise");e.exports=r},"848c17107e77a319b83b":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("0116c75136b233002fb9");r(r.S,"Error",{isError:function(e){return"Error"===i(e)}})},"852099b0cfb6ec8571a2":function(e,t,n){var r=n("1b01d0e59d3af79760a0"),i=n("2d13d93c336705cd8ff9"),o=n("79c91dcd8cd554c59c7b"),a=n("4ef7a75a1d1957a7c5c0");i(i.S+i.F*n("7a7739dd8a198a2cfcb5")(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){o(e),t=a(t,!0),o(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},"8626e2682ea1d2ef4882":function(e,t,n){var r,i,o;i=[t,n("669a82d2d2cdff2f9f35")],void 0===(o="function"==typeof(r=function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(t);e.default=n.default})?r.apply(t,i):r)||(e.exports=o)},"862d27e3ce53aadb9a46":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},"87972ac436f8a43eea81":function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?r:i).supported=r,t.unsupported=i},"87df535ec0c75eb666f4":function(e,t,n){"use strict";n("57e7a4ee5fd1ce9280ef")("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},"87f7b2a2f3e179b5c40a":function(e,t,n){var r=n("273d2eedcd369c189e70")("meta"),i=n("a459ab805827640a27e8"),o=n("d34390b928ecadc11dc8"),a=n("1b01d0e59d3af79760a0").f,s=0,c=Object.isExtensible||function(){return!0},u=!n("7a7739dd8a198a2cfcb5")(function(){return c(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},h=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return u&&h.NEED&&c(e)&&!o(e,r)&&l(e),e}}},"88baaa5583416ec0cb42":function(e,t,n){n("7519864545a89c83682d")("match",1,function(e,t,n){return[function(n){"use strict";var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},n]})},"88db22626e6c88b175cf":function(e,t,n){var r=n("1139de1233fd67f45bd7"),i=n("5f25c015bbbf9d42c661"),o=n("d34390b928ecadc11dc8"),a=n("273d2eedcd369c189e70")("src"),s=Function.toString,c=(""+s).split("toString");n("5925dad3c5243ffee3db").inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,s){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",t)),e[t]!==n&&(u&&(o(n,a)||i(n,a,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=n:s?e[t]?e[t]=n:i(e,t,n):(delete e[t],i(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},"896f33738142bf70015e":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("1e0f00d296712713afe6");r(r.P+r.F*!n("40b064d4eb439c0c1c2b")([].reduceRight,!0),"Array",{reduceRight:function(e){return i(this,e,arguments.length,arguments[1],!0)}})},"89701ced11312fc14f3d":function(e,t,n){"use strict";var r,i,o,a,s=n("46a1a30d151cac60057c"),c=n("1139de1233fd67f45bd7"),u=n("0e717e1f47872428608d"),l=n("32b716d95af2fd3c5c23"),h=n("2d13d93c336705cd8ff9"),d=n("a459ab805827640a27e8"),f=n("4d073e2fededcdd3f3d3"),p=n("fd8b6034a9a06242cc87"),m=n("4133d6461867e9751fc3"),v=n("8b246eab22bc34690d38"),g=n("1ae513448994dc2a1e86").set,y=n("00c22f5845a5f3d8fe8c")(),b=n("0fcd62dab3511fe4dbf9"),x=n("b784fa01fa41fb2906a0"),w=n("5abe37fc05566b7b9eff"),_=n("8cea4f2c5f75a90121e7"),S=c.TypeError,M=c.process,T=M&&M.versions,A=T&&T.v8||"",E=c.Promise,C="process"==l(M),P=function(){},L=i=b.f,O=!!function(){try{var e=E.resolve(1),t=(e.constructor={})[n("621a65702ee1a566fd32")("species")]=function(e){e(P,P)};return(C||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t&&0!==A.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),N=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},R=function(e,t){if(!e._n){e._n=!0;var n=e._c;y(function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{s?(i||(2==e._h&&F(e),e._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===t.promise?u(S("Promise-chain cycle")):(o=N(n))?o.call(n,c,u):c(n)):u(r)}catch(e){l&&!a&&l.exit(),u(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){g.call(c,function(){var t,n,r,i=e._v,o=D(e);if(o&&(t=x(function(){C?M.emit("unhandledRejection",i,e):(n=c.onunhandledrejection)?n({promise:e,reason:i}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=C||D(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},D=function(e){return 1!==e._h&&0===(e._a||e._c).length},F=function(e){g.call(c,function(){var t;C?M.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})})},k=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),R(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw S("Promise can't be resolved itself");(t=N(e))?y(function(){var r={_w:n,_d:!1};try{t.call(e,u(U,r,1),u(k,r,1))}catch(e){k.call(r,e)}}):(n._v=e,n._s=1,R(n,!1))}catch(e){k.call({_w:n,_d:!1},e)}}};O||(E=function(e){p(this,E,"Promise","_h"),f(e),r.call(this);try{e(u(U,this,1),u(k,this,1))}catch(e){k.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n("503a0df91bcab33c39b8")(E.prototype,{then:function(e,t){var n=L(v(this,E));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=C?M.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=u(U,e,1),this.reject=u(k,e,1)},b.f=L=function(e){return e===E||e===a?new o(e):i(e)}),h(h.G+h.W+h.F*!O,{Promise:E}),n("62828dc3ffa96c06b7c9")(E,"Promise"),n("89a21af31babcdc56725")("Promise"),a=n("5925dad3c5243ffee3db").Promise,h(h.S+h.F*!O,"Promise",{reject:function(e){var t=L(this);return(0,t.reject)(e),t.promise}}),h(h.S+h.F*(s||!O),"Promise",{resolve:function(e){return _(s&&this===a?E:this,e)}}),h(h.S+h.F*!(O&&n("574ea81f94fc0b2f332a")(function(e){E.all(e).catch(P)})),"Promise",{all:function(e){var t=this,n=L(t),r=n.resolve,i=n.reject,o=x(function(){var n=[],o=0,a=1;m(e,!1,function(e){var s=o++,c=!1;n.push(void 0),a++,t.resolve(e).then(function(e){c||(c=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=L(t),r=n.reject,i=x(function(){m(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},"89a21af31babcdc56725":function(e,t,n){"use strict";var r=n("1139de1233fd67f45bd7"),i=n("1b01d0e59d3af79760a0"),o=n("5975c7ea3ecd56e534e3"),a=n("621a65702ee1a566fd32")("species");e.exports=function(e){var t=r[e];o&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},"89fa59dfd48f288c4600":function(e,t,n){"use strict";t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=h(n("412479c5138fb85aa19f")),a=h(n("6a4f9c383785f9168266")),s=n("92274ddfec80152892bc"),c=n("33ac025fdf0477f401a7"),u=h(n("ab8261c9b33ea00e4f82")),l=n("4a0368fb5bf578c56890");function h(e){return e&&e.__esModule?e:{default:e}}var d=function(){try{return window.history.state||{}}catch(e){return{}}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(l.canUseDOM,"Browser history needs a DOM");var t=window.history,n=(0,l.supportsHistory)(),h=!(0,l.supportsPopStateOnHashChange)(),f=e.forceRefresh,p=void 0!==f&&f,m=e.getUserConfirmation,v=void 0===m?l.getConfirmation:m,g=e.keyLength,y=void 0===g?6:g,b=e.basename?(0,c.stripTrailingSlash)((0,c.addLeadingSlash)(e.basename)):"",x=function(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return(0,o.default)(!b||(0,c.hasBasename)(a,b),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+a+'" to begin with "'+b+'".'),b&&(a=(0,c.stripBasename)(a,b)),(0,s.createLocation)(a,r,n)},w=function(){return Math.random().toString(36).substr(2,y)},_=(0,u.default)(),S=function(e){i(F,e),F.length=t.length,_.notifyListeners(F.location,F.action)},M=function(e){(0,l.isExtraneousPopstateEvent)(e)||E(x(e.state))},T=function(){E(x(d()))},A=!1,E=function(e){A?(A=!1,S()):_.confirmTransitionTo(e,"POP",v,function(t){t?S({action:"POP",location:e}):C(e)})},C=function(e){var t=F.location,n=L.indexOf(t.key);-1===n&&(n=0);var r=L.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(A=!0,N(i))},P=x(d()),L=[P.key],O=function(e){return b+(0,c.createPath)(e)},N=function(e){t.go(e)},R=0,I=function(e){1===(R+=e)?((0,l.addEventListener)(window,"popstate",M),h&&(0,l.addEventListener)(window,"hashchange",T)):0===R&&((0,l.removeEventListener)(window,"popstate",M),h&&(0,l.removeEventListener)(window,"hashchange",T))},D=!1,F={length:t.length,action:"POP",location:P,createHref:O,push:function(e,i){(0,o.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==i),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var a=(0,s.createLocation)(e,i,w(),F.location);_.confirmTransitionTo(a,"PUSH",v,function(e){if(e){var r=O(a),i=a.key,s=a.state;if(n)if(t.pushState({key:i,state:s},null,r),p)window.location.href=r;else{var c=L.indexOf(F.location.key),u=L.slice(0,-1===c?0:c+1);u.push(a.key),L=u,S({action:"PUSH",location:a})}else(0,o.default)(void 0===s,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=r}})},replace:function(e,i){(0,o.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==i),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var a=(0,s.createLocation)(e,i,w(),F.location);_.confirmTransitionTo(a,"REPLACE",v,function(e){if(e){var r=O(a),i=a.key,s=a.state;if(n)if(t.replaceState({key:i,state:s},null,r),p)window.location.replace(r);else{var c=L.indexOf(F.location.key);-1!==c&&(L[c]=a.key),S({action:"REPLACE",location:a})}else(0,o.default)(void 0===s,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(r)}})},go:N,goBack:function(){return N(-1)},goForward:function(){return N(1)},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=_.setPrompt(e);return D||(I(1),D=!0),function(){return D&&(D=!1,I(-1)),t()}},listen:function(e){var t=_.appendListener(e);return I(1),function(){I(-1),t()}}};return F}},"8a0cb697d98576e60b9d":function(e,t,n){n("02fcd2201285b358795d")("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},"8a2d1b95e05b6a321e74":function(e,t,n){var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=n("2e1d5004a01df935693d")(function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},!0)},"8af190b70a6bc55c6f1b":function(e,t,n){"use strict";e.exports=n("d4606d62f5b5fecf8cbd")},"8b246eab22bc34690d38":function(e,t,n){var r=n("79c91dcd8cd554c59c7b"),i=n("4d073e2fededcdd3f3d3"),o=n("621a65702ee1a566fd32")("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},"8c15b7ae3d0b33173ad3":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("7caa05c4b9a2c1771918"),o=n("3cf3ac9966b923e35829");r(r.S,"Math",{fscale:function(e,t,n,r,a){return o(i(e,t,n,r,a))}})},"8ce22de999557008faac":function(e,t){e.exports=function(e,t,n){var r=n.length;if(null==e)return!r;for(e=Object(e);r--;){var i=n[r],o=t[i],a=e[i];if(void 0===a&&!(i in e)||!o(a))return!1}return!0}},"8cea4f2c5f75a90121e7":function(e,t,n){var r=n("79c91dcd8cd554c59c7b"),i=n("a459ab805827640a27e8"),o=n("0fcd62dab3511fe4dbf9");e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},"8cf67abed7f2159af642":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Object",{is:n("34c27cd73a2e6a6b0450")})},"8dc3899bd56512a6de6d":function(e,t,n){var r=n("a459ab805827640a27e8");n("f34797c0b42452934317")("isSealed",function(e){return function(t){return!r(t)||!!e&&e(t)}})},"8dde765ba393a8f99a70":function(e,t,n){var r=n("a459ab805827640a27e8");n("f34797c0b42452934317")("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},"8de1be082e521bbaabf2":function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t,n,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=u.getDisplayName,p=void 0===f?function(e){return"ConnectAdvanced("+e+")"}:f,m=u.methodName,v=void 0===m?"connectAdvanced":m,g=u.renderCountProp,y=void 0===g?void 0:g,b=u.shouldHandleStateChanges,x=void 0===b||b,w=u.storeKey,_=void 0===w?"store":w,S=u.withRef,M=void 0!==S&&S,T=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(u,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),A=_+"Subscription",E=l++,C=((t={})[_]=c.storeShape,t[A]=c.subscriptionShape,t),P=((n={})[A]=c.subscriptionShape,n);return function(t){(0,o.default)("function"==typeof t,"You must pass a component to the function returned by "+v+". Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",c=p(n),u=r({},T,{getDisplayName:p,methodName:v,renderCountProp:y,shouldHandleStateChanges:x,storeKey:_,withRef:M,displayName:c,wrappedComponentName:n,WrappedComponent:t}),l=function(n){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,t));return r.version=E,r.state={},r.renderCount=0,r.store=e[_]||t[_],r.propsMode=Boolean(e[_]),r.setWrappedInstance=r.setWrappedInstance.bind(r),(0,o.default)(r.store,'Could not find "'+_+'" in either the context or props of "'+c+'". Either wrap the root component in a <Provider>, or explicitly pass "'+_+'" as a prop to "'+c+'".'),r.initSelector(),r.initSubscription(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,n),i.prototype.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[A]=t||this.context[A],e},i.prototype.componentDidMount=function(){x&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},i.prototype.componentWillReceiveProps=function(e){this.selector.run(e)},i.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},i.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=d,this.store=null,this.selector.run=d,this.selector.shouldComponentUpdate=!1},i.prototype.getWrappedInstance=function(){return(0,o.default)(M,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+v+"() call."),this.wrappedInstance},i.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},i.prototype.initSelector=function(){var t=e(this.store.dispatch,u);this.selector=function(e,t){var n={run:function(r){try{var i=e(t.getState(),r);(i!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=i,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}};return n}(t,this.store),this.selector.run(this.props)},i.prototype.initSubscription=function(){if(x){var e=(this.propsMode?this.props:this.context)[A];this.subscription=new s.default(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},i.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(h)):this.notifyNestedSubs()},i.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},i.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},i.prototype.addExtraProps=function(e){if(!(M||y||this.propsMode&&this.subscription))return e;var t=r({},e);return M&&(t.ref=this.setWrappedInstance),y&&(t[y]=this.renderCount++),this.propsMode&&this.subscription&&(t[A]=this.subscription),t},i.prototype.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return(0,a.createElement)(t,this.addExtraProps(e.props))},i}(a.Component);return l.WrappedComponent=t,l.displayName=c,l.childContextTypes=P,l.contextTypes=C,l.propTypes=C,l.prototype.componentWillUpdate=function(){var e=this;if(this.version!==E){this.version=E,this.initSelector();var t=[];this.subscription&&(t=this.subscription.listeners.get(),this.subscription.tryUnsubscribe()),this.initSubscription(),x&&(this.subscription.trySubscribe(),t.forEach(function(t){return e.subscription.listeners.subscribe(t)}))}},(0,i.default)(l,t)}};var i=u(n("5ef9de3df8d92ea0e41c")),o=u(n("6a4f9c383785f9168266")),a=n("8af190b70a6bc55c6f1b"),s=u(n("b7326326d1b249adb7bc")),c=n("1bd0e64edcedab820751");function u(e){return e&&e.__esModule?e:{default:e}}var l=0,h={};function d(){}},"8de492c765fbfb624515":function(e,t,n){"use strict";var r=n("1b01d0e59d3af79760a0"),i=n("9d5592e83ab7f3d08974");e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},"8e0402aa1481a930c9c3":function(e,t,n){"use strict";n("03ba1ede2f4706d1e7f7")("small",function(e){return function(){return e(this,"small","","")}})},"8f648b1026e01323935b":function(e,t,n){var r=n("0116c75136b233002fb9");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"9125d51ebaa93f49cfd5":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("ecd0e0fb36455021f082")(3);r(r.P+r.F*!n("40b064d4eb439c0c1c2b")([].some,!0),"Array",{some:function(e){return i(this,e,arguments[1])}})},"9130a6b385cb6030d86a":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(void 0===e)throw new Error('Reducer "'+t+'" returned undefined when handling "'+n.type+'" action. To ignore an action, you must explicitly return the previous state.')},e.exports=t.default},"92274ddfec80152892bc":function(e,t,n){"use strict";t.__esModule=!0,t.locationsAreEqual=t.createLocation=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=s(n("49555589e35fce2252cc")),o=s(n("c08c9d9f47b3a7dc389f")),a=n("33ac025fdf0477f401a7");function s(e){return e&&e.__esModule?e:{default:e}}t.createLocation=function(e,t,n,o){var s=void 0;"string"==typeof e?(s=(0,a.parsePath)(e)).state=t:(void 0===(s=r({},e)).pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==t&&void 0===s.state&&(s.state=t));try{s.pathname=decodeURI(s.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(s.key=n),o?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=(0,i.default)(s.pathname,o.pathname)):s.pathname=o.pathname:s.pathname||(s.pathname="/"),s},t.locationsAreEqual=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&(0,o.default)(e.state,t.state)}},"92af855fdee54bacfa47":function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},"92efe77f5aacb0dee3db":function(e,t,n){var r=n("efae14a3f8cd9a616256"),i=n("a9e0e4b5ca884ed0dd59").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},"9344d77decda1f9977b7":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("dae53c7f1be5fcfdbe4b"),o=Math.exp;r(r.S,"Math",{tanh:function(e){var t=i(e=+e),n=i(-e);return t==1/0?1:n==1/0?-1:(t-n)/(o(e)+o(-e))}})},"93608b8fd0e135fbe5e6":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,o=0,a=0,s=arguments.length,c=0;a<s;)c<(n=i(arguments[a++]))?(o=o*(r=c/n)*r+1,c=n):o+=n>0?(r=n/c)*r:n;return c===1/0?1/0:c*Math.sqrt(o)}})},"93aa2354fc0594ea6148":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("d394d0a4c1838202489d"),o=n("4ef7a75a1d1957a7c5c0");r(r.P+r.F*n("7a7739dd8a198a2cfcb5")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=i(this),n=o(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},"941df1c42d2f478ed942":function(e,t,n){n("5975c7ea3ecd56e534e3")&&"g"!=/./g.flags&&n("1b01d0e59d3af79760a0").f(RegExp.prototype,"flags",{configurable:!0,get:n("f936413e306f54e59a2a")})},"945a806e4f4787a7905b":function(e,t,n){"use strict";var r=n("1f3157d073736826d4fa"),i=n("7ad2c0eb9a8edcc472a4");e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},"94f99fc446430aabde47":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("7a7739dd8a198a2cfcb5"),o=n("693c9c0dfc6db2b00620"),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(e){var t=o(this,"Number#toPrecision: incorrect invocation!");return void 0===e?a.call(t):a.call(t,e)}})},"94fb07840c0fda6ca6a4":function(e,t,n){"use strict";var r=n("145c4f2bdc487b2578df"),i=n("f71a7c9d37f996326dd6"),o=n("0091fa8d74c45e0dd589"),a=n("d394d0a4c1838202489d"),s=n("a537d0accb907bf9d41f"),c=Object.assign;e.exports=!c||n("7a7739dd8a198a2cfcb5")(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=a(e),c=arguments.length,u=1,l=i.f,h=o.f;c>u;)for(var d,f=s(arguments[u++]),p=l?r(f).concat(l(f)):r(f),m=p.length,v=0;m>v;)h.call(f,d=p[v++])&&(n[d]=f[d]);return n}:c},"96006d3b208a72eaa49c":function(e,t,n){n("9f769c6d0e4c9e82ba05")("WeakMap")},"96903bd4a4f0ab20afc4":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=Math.PI/180;r(r.S,"Math",{radians:function(e){return e*i}})},"98e5f258a85d7fd22ef8":function(e,t,n){var r=n("b8bc1433202509fac65f"),i=n("e99524bb668f88c6c42e"),o=n("f2ef6f6e544aad97aa22"),a=n("72301e3cc725dd502232"),s=n("f72c7c366a646d5e453e"),c=n("1ef5eae0d45731e89b6f"),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&i(e),h=!n&&!l&&a(e),d=!n&&!l&&!h&&c(e),f=n||l||h||d,p=f?r(e.length,String):[],m=p.length;for(var v in e)!t&&!u.call(e,v)||f&&("length"==v||h&&("offset"==v||"parent"==v)||d&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,m))||p.push(v);return p}},"98e9f3c3a8d686f8cc0f":function(e,t,n){var r=n("ca19e32ab6ee3b3692aa"),i=n("945a806e4f4787a7905b"),o=n("7ad2c0eb9a8edcc472a4");e.exports=function(e,t,n,a){var s=String(o(e)),c=s.length,u=void 0===n?" ":String(n),l=r(t);if(l<=c||""==u)return s;var h=l-c,d=i.call(u,Math.ceil(h/u.length));return d.length>h&&(d=d.slice(0,h)),a?d+s:s+d}},"9941d65ede78b70dbd5a":function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=Math.exp;r(r.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},"99611036d7ebe5f0cac9":function(e,t,n){var r=n("61fcea04092a9580d371"),i=n("2d13d93c336705cd8ff9"),o=n("79c91dcd8cd554c59c7b");i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(o(e),t)}})},"999b8422c18ed8d20c8d":function(e,t,n){"use strict";t.__esModule=!0,t.withRouter=t.matchPath=t.generatePath=t.Switch=t.StaticRouter=t.Router=t.Route=t.Redirect=t.Prompt=t.MemoryRouter=void 0;var r=f(n("de6553e2eed497bebede")),i=f(n("cae0f026dfe4729a216f")),o=f(n("4245b1933f7026101770")),a=f(n("35440e3d539ea8d61c51")),s=f(n("07a2173bac8ab93c3080")),c=f(n("5692bffd717498245e82")),u=f(n("58a762c5dd9e5f9d6ad3")),l=f(n("d14c3129375a94963214")),h=f(n("56f612169e8c0cac4c0c")),d=f(n("2d8c8264a871cfe44bc2"));function f(e){return e&&e.__esModule?e:{default:e}}t.MemoryRouter=r.default,t.Prompt=i.default,t.Redirect=o.default,t.Route=a.default,t.Router=s.default,t.StaticRouter=c.default,t.Switch=u.default,t.generatePath=l.default,t.matchPath=h.default,t.withRouter=d.default},"9c0601b67ba572e10d92":function(e,t,n){"use strict";t.__esModule=!0,t.wrapMapToPropsConstant=function(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}},t.getDependsOnOwnProps=i,t.wrapMapToPropsFunc=function(e,t){return function(n,o){var a=o.displayName,s=function(e,t){return s.dependsOnOwnProps?s.mapToProps(e,t):s.mapToProps(e)};return s.dependsOnOwnProps=!0,s.mapToProps=function(n,o){s.mapToProps=e,s.dependsOnOwnProps=i(e);var c=s(n,o);return"function"==typeof c&&(s.mapToProps=c,s.dependsOnOwnProps=i(c),c=s(n,o)),(0,r.default)(c,a,t),c},s}};var r=function(e){return e&&e.__esModule?e:{default:e}}(n("b452ab1ee9229ca9f134"));function i(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}},"9d5592e83ab7f3d08974":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"9e0bbfb109257d4426cd":function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"==typeof Object.keys?Object.keys:n).shim=n},"9e57e2b1bf9af3290fa7":function(e,t,n){var r=n("1139de1233fd67f45bd7"),i=n("2d13d93c336705cd8ff9"),o=n("5abe37fc05566b7b9eff"),a=[].slice,s=/MSIE .\./.test(o),c=function(e){return function(t,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,n)}};i(i.G+i.B+i.F*s,{setTimeout:c(r.setTimeout),setInterval:c(r.setInterval)})},"9f769c6d0e4c9e82ba05":function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9");e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},a1cf5d6fa4ed65a6ddd5:function(e,t,n){var r=n("ab33744f6df37edcb9b2"),i=n("16a2663068191a21c134"),o=n("e99524bb668f88c6c42e"),a=n("f2ef6f6e544aad97aa22"),s=n("c9327538105d995811b8"),c=n("72301e3cc725dd502232"),u=n("47e9e16a3e339321eec5"),l=n("1ef5eae0d45731e89b6f"),h="[object Map]",d="[object Set]",f=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(s(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||l(e)||o(e)))return!e.length;var t=i(e);if(t==h||t==d)return!e.size;if(u(e))return!r(e).length;for(var n in e)if(f.call(e,n))return!1;return!0}},a26e52c4218006ed1d2f:function(e,t,n){"use strict";(function(e){if(n("bfea3a646c640826923d"),n("2c09af3fb5c4ba3698b3"),n("a87c75cb4bbbfc3ee4d7"),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var t="defineProperty";function r(e,n,r){e[n]||Object[t](e,n,{writable:!0,configurable:!0,value:r})}r(String.prototype,"padLeft","".padStart),r(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&r(Array,e,Function.call.bind([][e]))})}).call(this,n("698d75b157f24ae829cc"))},a28fc3c963a1d4d1a2e5:function(e,t,n){"use strict";function r(e,t){return e===t}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=null,i=null;return function(){return function(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}(t,n,arguments)||(i=e.apply(null,arguments)),n=arguments,i}}n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a});var o=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var a=0,s=r.pop(),c=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}(r),u=e.apply(void 0,[function(){return a++,s.apply(null,arguments)}].concat(n)),l=i(function(){for(var e=[],t=c.length,n=0;n<t;n++)e.push(c[n].apply(null,arguments));return u.apply(null,e)});return l.resultFunc=s,l.recomputations=function(){return a},l.resetRecomputations=function(){return a=0},l}}(i);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})}},a2e638f92950f2048141:function(e,t,n){"use strict";var r=/-(.)/g;e.exports=function(e){return e.replace(r,function(e,t){return t.toUpperCase()})}},a312a83ea9b9e61f1871:function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("f5ddf41194f6969220b2"),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return i(e)&&o(e)<=9007199254740991}})},a36c797149bbcb96646f:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e&&"@@redux/INIT"===e.type?"initialState argument passed to createStore":"previous state received by the reducer"},e.exports=t.default},a37430c2bf749b8b8f88:function(e,t,n){var r=n("145c4f2bdc487b2578df"),i=n("f71a7c9d37f996326dd6"),o=n("0091fa8d74c45e0dd589");e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),c=o.f,u=0;s.length>u;)c.call(e,a=s[u++])&&t.push(a);return t}},a459ab805827640a27e8:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},a48408c9c405e4fca6d9:function(e,t,n){"use strict";var r=n("ec9de96ce27c00ac79c5"),i=n("277cfc1331526160cbd4"),o=n("6d8be12a50447a7c97b1");e.exports=function(){function e(e,t,n,r,a,s){s!==o&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},a485a45ff240f20fb978:function(e,t,n){var r=n("14462f9650d45fd47dc7"),i=n("79c91dcd8cd554c59c7b"),o=r.key,a=r.set;r.exp({defineMetadata:function(e,t,n,r){a(e,t,i(n),o(r))}})},a537d0accb907bf9d41f:function(e,t,n){var r=n("0116c75136b233002fb9");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},a5e6f0092ff0290e0bcf:function(e,t,n){var r=n("621a65702ee1a566fd32")("unscopables"),i=Array.prototype;void 0==i[r]&&n("5f25c015bbbf9d42c661")(i,r,{}),e.exports=function(e){i[r][e]=!0}},a607943c6ce671e7106b:function(e,t,n){var r=n("104a011c3c0c4bae71c3")(Object.getPrototypeOf,Object);e.exports=r},a6d645856102faf17328:function(e,t,n){var r=n("1b01d0e59d3af79760a0"),i=n("79c91dcd8cd554c59c7b"),o=n("145c4f2bdc487b2578df");e.exports=n("5975c7ea3ecd56e534e3")?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,c=0;s>c;)r.f(e,n=a[c++],t[n]);return e}},a76f7d57f23e05fc0ac3:function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("dae53c7f1be5fcfdbe4b");r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},a7e3807798c0b990af09:function(e,t,n){"use strict";t.__esModule=!0,t.routerMiddleware=t.routerActions=t.goForward=t.goBack=t.go=t.replace=t.push=t.CALL_HISTORY_METHOD=t.routerReducer=t.LOCATION_CHANGE=t.createMatchSelector=t.getLocation=t.ConnectedRouter=void 0;var r=n("637643d0c0e16de3ee55");Object.defineProperty(t,"getLocation",{enumerable:!0,get:function(){return r.getLocation}}),Object.defineProperty(t,"createMatchSelector",{enumerable:!0,get:function(){return r.createMatchSelector}});var i=n("2e20dfefd16154e6ed7b");Object.defineProperty(t,"LOCATION_CHANGE",{enumerable:!0,get:function(){return i.LOCATION_CHANGE}}),Object.defineProperty(t,"routerReducer",{enumerable:!0,get:function(){return i.routerReducer}});var o=n("7f74493c48ab576afbd4");Object.defineProperty(t,"CALL_HISTORY_METHOD",{enumerable:!0,get:function(){return o.CALL_HISTORY_METHOD}}),Object.defineProperty(t,"push",{enumerable:!0,get:function(){return o.push}}),Object.defineProperty(t,"replace",{enumerable:!0,get:function(){return o.replace}}),Object.defineProperty(t,"go",{enumerable:!0,get:function(){return o.go}}),Object.defineProperty(t,"goBack",{enumerable:!0,get:function(){return o.goBack}}),Object.defineProperty(t,"goForward",{enumerable:!0,get:function(){return o.goForward}}),Object.defineProperty(t,"routerActions",{enumerable:!0,get:function(){return o.routerActions}});var a=c(n("61597e5c866e9f95c20b")),s=c(n("ce67b7d2fd06d83e5334"));function c(e){return e&&e.__esModule?e:{default:e}}t.ConnectedRouter=a.default,t.routerMiddleware=s.default},a87c75cb4bbbfc3ee4d7:function(e,t,n){n("24c5bf497be6b8e1330e"),e.exports=n("5925dad3c5243ffee3db").RegExp.escape},a88d2aa2cbd689d523e2:function(e,t){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),c=0;c<o.length;c++){var u=o[c];if(!s(u))return!1;var l=e[u],h=t[u];if(!1===(i=n?n.call(r,l,h,u):void 0)||void 0===i&&l!==h)return!1}return!0}},a9e0e4b5ca884ed0dd59:function(e,t,n){var r=n("e3136eea77d23f8d97ec"),i=n("380c0734c088ca78ccda").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},aaa8ac4298b679dfe295:function(e,t,n){"use strict";t.__esModule=!0,t.createProvider=u;var r=n("8af190b70a6bc55c6f1b"),i=s(n("8a2d1b95e05b6a321e74")),o=n("1bd0e64edcedab820751"),a=s(n("c0fa96a4e042118a422d"));function s(e){return e&&e.__esModule?e:{default:e}}var c=!1;function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",n=arguments[1]||t+"Subscription",s=function(e){function i(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return o[t]=n.store,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,e),i.prototype.getChildContext=function(){var e;return(e={})[t]=this[t],e[n]=null,e},i.prototype.render=function(){return r.Children.only(this.props.children)},i}(r.Component);return s.prototype.componentWillReceiveProps=function(e){this[t]!==e.store&&(c||(c=!0,(0,a.default)("<Provider> does not support changing `store` on the fly. It is most likely that you see this error because you updated to Redux 2.x and React Redux 2.x which no longer hot reload reducers automatically. See https://github.com/reactjs/react-redux/releases/tag/v2.0.0 for the migration instructions.")))},s.propTypes={store:o.storeShape.isRequired,children:i.default.element.isRequired},s.childContextTypes=((e={})[t]=o.storeShape.isRequired,e[n]=o.subscriptionShape,e),s}t.default=u()},aae15840322550f153dc:function(e,t,n){"use strict";var r=n("32b716d95af2fd3c5c23"),i={};i[n("621a65702ee1a566fd32")("toStringTag")]="z",i+""!="[object z]"&&n("88db22626e6c88b175cf")(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},ab33744f6df37edcb9b2:function(e,t,n){var r=n("47e9e16a3e339321eec5"),i=n("7e56d82a60dcbc0a4c8d"),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},ab4cb61bcb2dc161defb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&"object"==typeof e&&"default"in e?e.default:e}(n("acbc0369147222889acb")),i={INIT:"@@redux/INIT"+Math.random().toString(36).substring(7).split("").join("."),REPLACE:"@@redux/REPLACE"+Math.random().toString(36).substring(7).split("").join(".")},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function s(e){if("object"!==(void 0===e?"undefined":o(e))||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function c(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}function u(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function l(e,t){return function(){return t(e.apply(this,arguments))}}function h(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function d(){}"string"==typeof d.name&&"isCrushed"!==d.name&&c("You are currently using minified code outside of NODE_ENV === 'production'. This means that you are running a slower development build of Redux. You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) to ensure you have the correct code for your production build."),t.createStore=function e(t,n,a){var c;if("function"==typeof n&&void 0===a&&(a=n,n=void 0),void 0!==a){if("function"!=typeof a)throw new Error("Expected the enhancer to be a function.");return a(e)(t,n)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var u=t,l=n,h=[],d=h,f=!1;function p(){d===h&&(d=h.slice())}function m(){if(f)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return l}function v(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(f)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return p(),d.push(e),function(){if(t){if(f)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,p();var n=d.indexOf(e);d.splice(n,1)}}}function g(e){if(!s(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,l=u(l,e)}finally{f=!1}for(var t=h=d,n=0;n<t.length;n++)(0,t[n])();return e}return g({type:i.INIT}),(c={dispatch:g,subscribe:v,getState:m,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");u=e,g({type:i.REPLACE})}})[r]=function(){var e,t=v;return(e={subscribe:function(e){if("object"!==(void 0===e?"undefined":o(e))||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(m())}return n(),{unsubscribe:t(n)}}})[r]=function(){return this},e},c},t.combineReducers=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var o=t[r];void 0===e[o]&&c('No reducer provided for key "'+o+'"'),"function"==typeof e[o]&&(n[o]=e[o])}var a=Object.keys(n),l=void 0;l={};var h=void 0;try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:i.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+i.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(e){h=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(h)throw h;var r=function(e,t,n,r){var o=Object.keys(t),a=n&&n.type===i.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(0===o.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!s(e))return"The "+a+' has unexpected type of "'+{}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1]+'". Expected argument to be an object with the following keys: "'+o.join('", "')+'"';var c=Object.keys(e).filter(function(e){return!t.hasOwnProperty(e)&&!r[e]});return c.forEach(function(e){r[e]=!0}),n&&n.type===i.REPLACE?void 0:c.length>0?"Unexpected "+(c.length>1?"keys":"key")+' "'+c.join('", "')+'" found in '+a+'. Expected to find one of the known reducer keys instead: "'+o.join('", "')+'". Unexpected keys will be ignored.':void 0}(e,n,t,l);r&&c(r);for(var o=!1,d={},f=0;f<a.length;f++){var p=a[f],m=n[p],v=e[p],g=m(v,t);if(void 0===g){var y=u(p,t);throw new Error(y)}d[p]=g,o=o||g!==v}return o?d:e}},t.bindActionCreators=function(e,t){if("function"==typeof e)return l(e,t);if("object"!==(void 0===e?"undefined":o(e))||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":void 0===e?"undefined":o(e))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},i=0;i<n.length;i++){var a=n[i],s=e[a];"function"==typeof s&&(r[a]=l(s,t))}return r},t.applyMiddleware=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=e.apply(void 0,r),s=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},c={getState:o.getState,dispatch:function(){return s.apply(void 0,arguments)}},u=t.map(function(e){return e(c)});return s=h.apply(void 0,u)(o.dispatch),a({},o,{dispatch:s})}}},t.compose=h,t.__DO_NOT_USE__ActionTypes=i},ab8261c9b33ea00e4f82:function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("412479c5138fb85aa19f"));t.default=function(){var e=null,t=[];return{setPrompt:function(t){return(0,r.default)(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,i,o){if(null!=e){var a="function"==typeof e?e(t,n):e;"string"==typeof a?"function"==typeof i?i(a,o):((0,r.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),o(!0)):o(!1!==a)}else o(!0)},appendListener:function(e){var n=!0,r=function(){n&&e.apply(void 0,arguments)};return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}}},abdf39fa8a53fa100ee1:function(e,t,n){"use strict";n("03ba1ede2f4706d1e7f7")("blink",function(e){return function(){return e(this,"blink","","")}})},ac053bf94afc297b1d6f:function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("98e9f3c3a8d686f8cc0f"),o=n("5abe37fc05566b7b9eff");r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},ac4169b12b8023e0bb82:function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("06d4481d8fe57248a157");r(r.G+r.F*(parseInt!=i),{parseInt:i})},acb079530cb9191542a7:function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return r})},acbc0369147222889acb:function(e,t,n){"use strict";n.r(t),function(e,r){var i,o=n("acb079530cb9191542a7");i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var a=Object(o.a)(i);t.default=a}.call(this,n("698d75b157f24ae829cc"),n("044f282f6141fc605782")(e))},ad0c5026cb53565a281d:function(e,t,n){n("ccf79254fef1a499b486")("WeakSet")},ad8470b596eb2ec5826f:function(e,t,n){var r=n("4be2c15021f717a728f0")(n("18caba858d9ea0f67284"),"Set");e.exports=r},aef563822bc761fec37d:function(e,t,n){n("7519864545a89c83682d")("search",1,function(e,t,n){return[function(n){"use strict";var r=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,r):new RegExp(n)[t](String(r))},n]})},af481eff47a873748208:function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},afced8ddd725b0895412:function(e,t,n){var r=n("a459ab805827640a27e8"),i=n("87f7b2a2f3e179b5c40a").onFreeze;n("f34797c0b42452934317")("freeze",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},b04dcea169e01651bec4:function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("3dd7e3cb81b24cbd63d6"),o=n("d394d0a4c1838202489d"),a=n("ca19e32ab6ee3b3692aa"),s=n("4d073e2fededcdd3f3d3"),c=n("0594430ce9777a0767aa");r(r.P,"Array",{flatMap:function(e){var t,n,r=o(this);return s(e),t=a(r.length),n=c(r,0),i(n,r,r,t,0,1,e,arguments[1]),n}}),n("a5e6f0092ff0290e0bcf")("flatMap")},b05c6f46a9990189714c:function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("de6553e2eed497bebede"));t.default=r.default},b0b0e0fb335805985891:function(e,t,n){"use strict";var r=n("7a7739dd8a198a2cfcb5"),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(e){return e>9?e:"0"+e};e.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!r(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+a(e.getUTCMonth()+1)+"-"+a(e.getUTCDate())+"T"+a(e.getUTCHours())+":"+a(e.getUTCMinutes())+":"+a(e.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},b1d62e5029a9e6ba3c32:function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"System",{global:n("1139de1233fd67f45bd7")})},b319470fdda47fb5d046:function(e,t,n){var r=n("32b716d95af2fd3c5c23"),i=n("5fd4d3d5ac2fe9bfd20e");e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},b3b01db6127592dc78f8:function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("cae0f026dfe4729a216f"));t.default=r.default},b452ab1ee9229ca9f134:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){(0,r.default)(e)||(0,i.default)(n+"() in "+t+" must return a plain object. Instead received "+e+".")};var r=o(n("259390904b4b47fe24f8")),i=o(n("c0fa96a4e042118a422d"));function o(e){return e&&e.__esModule?e:{default:e}}},b49a2b6a876439c25655:function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Math",{imulh:function(e,t){var n=+e,r=+t,i=65535&n,o=65535&r,a=n>>16,s=r>>16,c=(a*o>>>0)+(i*o>>>16);return a*s+(c>>16)+((i*s>>>0)+(65535&c)>>16)}})},b69691de767a1b43d058:function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("0fcd62dab3511fe4dbf9"),o=n("b784fa01fa41fb2906a0");r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},b6fe868af5705c1105ee:function(e,t,n){"use strict";t.__esModule=!0,t.whenMapDispatchToPropsIsFunction=o,t.whenMapDispatchToPropsIsMissing=a,t.whenMapDispatchToPropsIsObject=s;var r=n("ab4cb61bcb2dc161defb"),i=n("9c0601b67ba572e10d92");function o(e){return"function"==typeof e?(0,i.wrapMapToPropsFunc)(e,"mapDispatchToProps"):void 0}function a(e){return e?void 0:(0,i.wrapMapToPropsConstant)(function(e){return{dispatch:e}})}function s(e){return e&&"object"==typeof e?(0,i.wrapMapToPropsConstant)(function(t){return(0,r.bindActionCreators)(e,t)}):void 0}t.default=[o,a,s]},b7326326d1b249adb7bc:function(e,t,n){"use strict";t.__esModule=!0;var r=null,i={notify:function(){}};var o=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.parentSub=n,this.onStateChange=r,this.unsubscribe=null,this.listeners=i}return e.prototype.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},e.prototype.notifyNestedSubs=function(){this.listeners.notify()},e.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},e.prototype.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=function(){var e=[],t=[];return{clear:function(){t=r,e=r},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},get:function(){return t},subscribe:function(n){var i=!0;return t===e&&(t=e.slice()),t.push(n),function(){i&&e!==r&&(i=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}}())},e.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=i)},e}();t.default=o},b76ef4afb4fcdfa26ddc:function(e,t,n){"use strict";t.__esModule=!0,t.impureFinalPropsSelectorFactory=i,t.pureFinalPropsSelectorFactory=o,t.default=function(e,t){var n=t.initMapStateToProps,a=t.initMapDispatchToProps,s=t.initMergeProps,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),u=n(e,c),l=a(e,c),h=s(e,c);(0,r.default)(u,l,h,c.displayName);return(c.pure?o:i)(u,l,h,e,c)};var r=function(e){return e&&e.__esModule?e:{default:e}}(n("d701338e3c92ad7598cc"));function i(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function o(e,t,n,r,i){var o=i.areStatesEqual,a=i.areOwnPropsEqual,s=i.areStatePropsEqual,c=!1,u=void 0,l=void 0,h=void 0,d=void 0,f=void 0;function p(i,c){var p=!a(c,l),m=!o(i,u);return u=i,l=c,p&&m?(h=e(u,l),t.dependsOnOwnProps&&(d=t(r,l)),f=n(h,d,l)):p?(e.dependsOnOwnProps&&(h=e(u,l)),t.dependsOnOwnProps&&(d=t(r,l)),f=n(h,d,l)):m?function(){var t=e(u,l),r=!s(t,h);return h=t,r&&(f=n(h,d,l)),f}():f}return function(i,o){return c?p(i,o):function(i,o){return h=e(u=i,l=o),d=t(r,l),f=n(h,d,l),c=!0,f}(i,o)}}},b784fa01fa41fb2906a0:function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},b7e0f648845bad52222c:function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("00c22f5845a5f3d8fe8c")(),o=n("1139de1233fd67f45bd7").process,a="process"==n("0116c75136b233002fb9")(o);r(r.G,{asap:function(e){var t=a&&o.domain;i(t?t.bind(e):e)}})},b82e15db0761df603831:function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("336cae077811264f3d1e")(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},b8bc1433202509fac65f:function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},b93293c8278c29a2c7c2:function(e,t){t.__esModule=!0;t.ATTRIBUTE_NAMES={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"};var n=t.TAG_NAMES={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},r=(t.VALID_TAG_NAMES=Object.keys(n).map(function(e){return n[e]}),t.TAG_PROPERTIES={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src"},t.REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"});t.HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},t.HTML_TAG_MAP=Object.keys(r).reduce(function(e,t){return e[r[t]]=t,e},{}),t.SELF_CLOSING_TAGS=[n.NOSCRIPT,n.SCRIPT,n.STYLE],t.HELMET_ATTRIBUTE="data-react-helmet"},b93ad0c707f45271bd41:function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Date",{now:function(){return(new Date).getTime()}})},b9bd1a2a618fdda58e33:function(e,t,n){"use strict";n("57e7a4ee5fd1ce9280ef")("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},bc0f72eb2321587e4779:function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.P,"Array",{copyWithin:n("06b2b473e53cc019ca74")}),n("a5e6f0092ff0290e0bcf")("copyWithin")},bc1a333d2b6eceac22e3:function(e,t,n){e.exports=!n("5975c7ea3ecd56e534e3")&&!n("7a7739dd8a198a2cfcb5")(function(){return 7!=Object.defineProperty(n("68a989d6f90923909f2a")("div"),"a",{get:function(){return 7}}).a})},bc20db01ebac581e43a6:function(e,t){e.exports=function(){return!1}},bd5434bb096a0db94771:function(e,t,n){"use strict";t.__esModule=!0,t.whenMapStateToPropsIsFunction=i,t.whenMapStateToPropsIsMissing=o;var r=n("9c0601b67ba572e10d92");function i(e){return"function"==typeof e?(0,r.wrapMapToPropsFunc)(e,"mapStateToProps"):void 0}function o(e){return e?void 0:(0,r.wrapMapToPropsConstant)(function(){return{}})}t.default=[i,o]},bdd7ec7e25634c0bd1d9:function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},bdd7fd0a625fdc88e057:function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("4d073e2fededcdd3f3d3"),o=n("79c91dcd8cd554c59c7b"),a=(n("1139de1233fd67f45bd7").Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n("7a7739dd8a198a2cfcb5")(function(){a(function(){})}),"Reflect",{apply:function(e,t,n){var r=i(e),c=o(n);return a?a(r,t,c):s.call(r,t,c)}})},bef911c5daed007bb174:function(e,t,n){"use strict";var r={};Object.freeze(r),e.exports=r},bf663dc27714ab10d46b:function(e,t,n){var r=n("14462f9650d45fd47dc7"),i=n("79c91dcd8cd554c59c7b"),o=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:o(arguments[2]),r=a(i(t),n,!1);if(void 0===r||!r.delete(e))return!1;if(r.size)return!0;var c=s.get(t);return c.delete(n),!!c.size||s.delete(t)}})},bf822756ee9f31cbbb10:function(e,t,n){n("ccf79254fef1a499b486")("Map")},bfea3a646c640826923d:function(e,t,n){n("41d819f9275ef20244e7"),n("112d1eecaede6e2dcf09"),n("65bf45411dca6e57791d"),n("ea45ad43eef3e386e18c"),n("23339791c405611c831e"),n("e92b89da57efd8b02487"),n("12a106a843fda580d627"),n("0f3e6bbfb9058f37cb22"),n("afced8ddd725b0895412"),n("0bd0985e8178c4e69b67"),n("39e786b6f73d0c2dc9e4"),n("4eb232e665ed4f2fa5b1"),n("8dc3899bd56512a6de6d"),n("8dde765ba393a8f99a70"),n("32c85c5c621c55a6b3ab"),n("8cf67abed7f2159af642"),n("531aa4a3a0a8a597b4b4"),n("aae15840322550f153dc"),n("6d98b32f91eb8777ca21"),n("e28425bb72f854691929"),n("d491591ee60d9ef0aa9d"),n("ac4169b12b8023e0bb82"),n("56ca38cb7a1b85e3b391"),n("49737199b59f0ac62d15"),n("759097197b97ddad17eb"),n("94f99fc446430aabde47"),n("d8fab3fc72ca23b52ae2"),n("7874b6e955f7d90ad7ec"),n("3bd50fa414ae910eb455"),n("d2fa9663cd158bd36d69"),n("a312a83ea9b9e61f1871"),n("af481eff47a873748208"),n("6ad07de816cfee1e2bda"),n("2499ce6d7ea1e9ca2579"),n("298b5be4dd10a9a11c49"),n("1792bb2ef9fe352edb1e"),n("39dc0152a90b3f79e9c4"),n("0b3f87eafc807ad7f3a2"),n("1655a801151bdc7ee673"),n("2d6ca68360dece574932"),n("9941d65ede78b70dbd5a"),n("a76f7d57f23e05fc0ac3"),n("6251dc1015f605aa27c7"),n("93608b8fd0e135fbe5e6"),n("494d4966d2dbdf891514"),n("2ecd99f9ea85b44ffe1d"),n("454dda5a76e3e8fad966"),n("7c3eb54bc7a7e3451a7e"),n("318358f29560c8862a62"),n("1bfd0b712b958ac38a24"),n("9344d77decda1f9977b7"),n("862d27e3ce53aadb9a46"),n("444c26bc43eec64c837a"),n("07f8363c924f4e12fef3"),n("d2e36888d16fa092915c"),n("340dbda6fe6f17098a91"),n("825e103ed4a71fb91e11"),n("72ac5893bfc7ed50a09c"),n("66914ad4ab026b9ba2e8"),n("15ad6b6c880d51697e5b"),n("29141de3bd8fb20e5e9a"),n("2fea013a9d0e76560f8b"),n("e6a347faa9f19b1ed599"),n("abdf39fa8a53fa100ee1"),n("1451c76b1b1b5a5ba260"),n("f519451816147948df30"),n("58a497e2c18ee06b3067"),n("6d7c634dd1858355953f"),n("e1840f007f040a84a1ab"),n("578d8dc958c3920ef454"),n("8e0402aa1481a930c9c3"),n("1627ebf46087710a4703"),n("d1a436d21f0debb638f5"),n("1860f64667ad8a670ab7"),n("b93ad0c707f45271bd41"),n("93aa2354fc0594ea6148"),n("d0990b8256a5f38a05aa"),n("dc5bd15c664880964ee5"),n("d5e0d50957e1364b4d8b"),n("cff317ca62d09454b2d3"),n("0a5193b0534d54dbcda1"),n("3f2012daa60f226e86ec"),n("4cc77e026250beeef142"),n("1b71f5e96f29a92413b6"),n("5baa1143f58e62614ca0"),n("0f025c284bc567debf3d"),n("1591b90b4327c94245ad"),n("0565be87d109f51269ca"),n("9125d51ebaa93f49cfd5"),n("cf802dc5a6982c8247e6"),n("481c1f0e850b0c8d0f7d"),n("896f33738142bf70015e"),n("c9be824f185f52a1979a"),n("1468f5d37f30f63d76ea"),n("bc0f72eb2321587e4779"),n("fa5cd10f53a62f249502"),n("3932316ffef991f5d157"),n("3fc8b4ca32b0aebd9ff3"),n("74be682203e7c82cb4c9"),n("307014e72ed12da69e15"),n("51a5b67212dfc6f7022a"),n("654ecb2e7a4241ef8f08"),n("941df1c42d2f478ed942"),n("88baaa5583416ec0cb42"),n("cb1771a9eba49d3e1de6"),n("aef563822bc761fec37d"),n("42f5768b7d8d9a994222"),n("89701ced11312fc14f3d"),n("413112319aa96af919d4"),n("7a8c0ef4f45a56962a18"),n("4b6c3e2b96a7fdc95a33"),n("e57aad3e28ab6bac0380"),n("45c7f885186b325fe183"),n("4824055ce03b0869d111"),n("2b4a4ef7612f955b8d3d"),n("cf50f2ac57a34b8deade"),n("8a0cb697d98576e60b9d"),n("c8a0e6ae37bbd5012724"),n("c42b35b1ec34a3818888"),n("0cfe2a6849380b697b26"),n("36fb70620452ffd2d407"),n("0f2d451cc44dcac3d457"),n("8282da6ea45ca23bdd3c"),n("bdd7fd0a625fdc88e057"),n("5e08439cbfed19129a22"),n("852099b0cfb6ec8571a2"),n("3430f3e283af0cf06931"),n("759a6902720117087dd3"),n("e72f1581ae3b588359b2"),n("99611036d7ebe5f0cac9"),n("e7474db296820464a2ff"),n("dbb8045293c85083c922"),n("07de7eab7d9aab23fb86"),n("cc1aef3f71c33f94b57e"),n("2598229f45b3da87877e"),n("f309c35c0ec3caac8c45"),n("4cd9a60f042223c9ba2c"),n("5dd61c3148e8f3bbc5d7"),n("b04dcea169e01651bec4"),n("22c4655df043ec6a4af2"),n("6ae198bd7922e25e2128"),n("ac053bf94afc297b1d6f"),n("2c54555c94aa6b1cce4a"),n("87df535ec0c75eb666f4"),n("b9bd1a2a618fdda58e33"),n("ebc27012af6f56e487f3"),n("f8695b95b3c9135976f0"),n("113c58cbe121d529688c"),n("1c750e24757a7c0c1e31"),n("fcdb9f352e4ad889e33f"),n("b82e15db0761df603831"),n("cfe37f364cc81a6415bd"),n("0ce98ded3187eccaf15a"),n("3a6600337fc4dae8f6f1"),n("1dddc8b9f5f30599741a"),n("77bfc0a151efbe7efe2d"),n("392615e2ae5e100214bd"),n("dae1b939e898dc140c93"),n("fb18731b3c51330e7b11"),n("96006d3b208a72eaa49c"),n("5d829f854abca808c16c"),n("bf822756ee9f31cbbb10"),n("cb2f5c21ba0f661fdebb"),n("6857028c584e68dfacd6"),n("ad0c5026cb53565a281d"),n("db019a029d69500cb816"),n("b1d62e5029a9e6ba3c32"),n("848c17107e77a319b83b"),n("56b82ba00e9aa7744555"),n("92af855fdee54bacfa47"),n("4faad91abd2171602dcc"),n("8c15b7ae3d0b33173ad3"),n("14aa1c87589cec105b74"),n("74988f1178e5f1cc2f7a"),n("b49a2b6a876439c25655"),n("6d6f766831bb1cf8facf"),n("96903bd4a4f0ab20afc4"),n("19a014a8d7781dbba23a"),n("3009383f3d0ad6342c19"),n("bdd7ec7e25634c0bd1d9"),n("da8dbcc3b692fc0676cc"),n("b69691de767a1b43d058"),n("a485a45ff240f20fb978"),n("bf663dc27714ab10d46b"),n("dc76537051b58b7ecd44"),n("1a29b1a839ce123011e8"),n("0b69aae3945a07e52c9a"),n("da57ca5397b5779e093d"),n("5f604e5c8e15a9c73536"),n("19289c2680cbdec14eed"),n("ff48eaa47603dbd72464"),n("b7e0f648845bad52222c"),n("3179bff1ebe47c49d3eb"),n("9e57e2b1bf9af3290fa7"),n("6c07e9b5d58510c21784"),n("c08bb95a2a1e7d3a36d4"),e.exports=n("5925dad3c5243ffee3db")},c08bb95a2a1e7d3a36d4:function(e,t,n){for(var r=n("307014e72ed12da69e15"),i=n("145c4f2bdc487b2578df"),o=n("88db22626e6c88b175cf"),a=n("1139de1233fd67f45bd7"),s=n("5f25c015bbbf9d42c661"),c=n("224ae09e536c09e69a0a"),u=n("621a65702ee1a566fd32"),l=u("iterator"),h=u("toStringTag"),d=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(f),m=0;m<p.length;m++){var v,g=p[m],y=f[g],b=a[g],x=b&&b.prototype;if(x&&(x[l]||s(x,l,d),x[h]||s(x,h,g),c[g]=d,y))for(v in r)x[v]||o(x,v,r[v],!0)}},c08c9d9f47b3a7dc389f:function(e,t,n){"use strict";t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])});var i=void 0===t?"undefined":r(t);if(i!==(void 0===n?"undefined":r(n)))return!1;if("object"===i){var o=t.valueOf(),a=n.valueOf();if(o!==t||a!==n)return e(o,a);var s=Object.keys(t),c=Object.keys(n);return s.length===c.length&&s.every(function(r){return e(t[r],n[r])})}return!1},e.exports=t.default},c0fa96a4e042118a422d:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}},c138e55a31f3f8960e99:function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),o=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},c42b35b1ec34a3818888:function(e,t,n){n("02fcd2201285b358795d")("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},c563599eb9734b6ef1c0:function(e,t,n){var r=n("4be2c15021f717a728f0")(n("18caba858d9ea0f67284"),"DataView");e.exports=r},c5dd00b0f3b91ce870bd:function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=c(n("8af190b70a6bc55c6f1b")),o=c(n("8a2d1b95e05b6a321e74")),a=c(n("6a4f9c383785f9168266")),s=n("12ba4fef039ee145f0aa");function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},h=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=u(this,e.call.apply(e,[this].concat(o))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!l(e)){e.preventDefault();var t=r.context.router.history,n=r.props,i=n.replace,o=n.to;i?t.replace(o):t.push(o)}},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["replace","to","innerRef"]);(0,a.default)(this.context.router,"You should not use <Link> outside a <Router>"),(0,a.default)(void 0!==t,'You must specify the "to" property');var c=this.context.router.history,u="string"==typeof t?(0,s.createLocation)(t,null,null,c.location):t,l=c.createHref(u);return i.default.createElement("a",r({},o,{onClick:this.handleClick,href:l,ref:n}))},t}(i.default.Component);h.propTypes={onClick:o.default.func,target:o.default.string,replace:o.default.bool,to:o.default.oneOfType([o.default.string,o.default.object]).isRequired,innerRef:o.default.oneOfType([o.default.string,o.default.func])},h.defaultProps={replace:!1},h.contextTypes={router:o.default.shape({history:o.default.shape({push:o.default.func.isRequired,replace:o.default.func.isRequired,createHref:o.default.func.isRequired}).isRequired}).isRequired},t.default=h},c68991e63a6e99ff2511:function(e,t,n){var r=n("1139de1233fd67f45bd7"),i=n("5925dad3c5243ffee3db"),o=n("46a1a30d151cac60057c"),a=n("42d2ac6d92467eceff72"),s=n("1b01d0e59d3af79760a0").f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},c8a0e6ae37bbd5012724:function(e,t,n){n("02fcd2201285b358795d")("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},c8f33559dbc0657cda35:function(e,t,n){(function(e){t.__esModule=!0,t.warn=t.requestAnimationFrame=t.reducePropsToState=t.mapStateOnServer=t.handleClientStateChange=t.convertReactPropstoHtmlAttributes=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=c(n("8af190b70a6bc55c6f1b")),a=c(n("83406643bfb209d249f4")),s=n("b93293c8278c29a2c7c2");function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},l=function(e,t){return t.filter(function(t){return void 0!==t[e]}).map(function(t){return t[e]}).reduce(function(e,t){return i({},e,t)},{})},h=function(e,t,n){var i={};return n.filter(function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&g("Helmet: "+e+' should be of type "Array". Instead found type "'+r(t[e])+'"'),!1)}).map(function(t){return t[e]}).reverse().reduce(function(e,n){var r={};n.filter(function(e){for(var n=void 0,o=Object.keys(e),a=0;a<o.length;a++){var c=o[a],u=c.toLowerCase();-1===t.indexOf(u)||n===s.TAG_PROPERTIES.REL&&"canonical"===e[n].toLowerCase()||u===s.TAG_PROPERTIES.REL&&"stylesheet"===e[u].toLowerCase()||(n=u),-1===t.indexOf(c)||c!==s.TAG_PROPERTIES.INNER_HTML&&c!==s.TAG_PROPERTIES.CSS_TEXT&&c!==s.TAG_PROPERTIES.ITEM_PROP||(n=c)}if(!n||!e[n])return!1;var l=e[n].toLowerCase();return i[n]||(i[n]={}),r[n]||(r[n]={}),!i[n][l]&&(r[n][l]=!0,!0)}).reverse().forEach(function(t){return e.push(t)});for(var o=Object.keys(r),c=0;c<o.length;c++){var u=o[c],l=(0,a.default)({},i[u],r[u]);i[u]=l}return e},[]).reverse()},d=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.hasOwnProperty(t))return r[t]}return null},f=function(){var e=Date.now();return function(t){var n=Date.now();n-e>16?(e=n,t(n)):setTimeout(function(){f(t)},0)}}(),p=function(e){return clearTimeout(e)},m="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||f:e.requestAnimationFrame||f,v="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||p:e.cancelAnimationFrame||p,g=function(e){return console&&"function"==typeof console.warn&&console.warn(e)},y=null,b=function(e,t){var n=e.baseTag,r=e.bodyAttributes,i=e.htmlAttributes,o=e.linkTags,a=e.metaTags,c=e.noscriptTags,u=e.onChangeClientState,l=e.scriptTags,h=e.styleTags,d=e.title,f=e.titleAttributes;_(s.TAG_NAMES.BODY,r),_(s.TAG_NAMES.HTML,i),w(d,f);var p={baseTag:S(s.TAG_NAMES.BASE,n),linkTags:S(s.TAG_NAMES.LINK,o),metaTags:S(s.TAG_NAMES.META,a),noscriptTags:S(s.TAG_NAMES.NOSCRIPT,c),scriptTags:S(s.TAG_NAMES.SCRIPT,l),styleTags:S(s.TAG_NAMES.STYLE,h)},m={},v={};Object.keys(p).forEach(function(e){var t=p[e],n=t.newTags,r=t.oldTags;n.length&&(m[e]=n),r.length&&(v[e]=p[e].oldTags)}),t&&t(),u(e,m,v)},x=function(e){return Array.isArray(e)?e.join(""):e},w=function(e,t){void 0!==e&&document.title!==e&&(document.title=x(e)),_(s.TAG_NAMES.TITLE,t)},_=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute(s.HELMET_ATTRIBUTE),i=r?r.split(","):[],o=[].concat(i),a=Object.keys(t),c=0;c<a.length;c++){var u=a[c],l=t[u]||"";n.getAttribute(u)!==l&&n.setAttribute(u,l),-1===i.indexOf(u)&&i.push(u);var h=o.indexOf(u);-1!==h&&o.splice(h,1)}for(var d=o.length-1;d>=0;d--)n.removeAttribute(o[d]);i.length===o.length?n.removeAttribute(s.HELMET_ATTRIBUTE):n.getAttribute(s.HELMET_ATTRIBUTE)!==a.join(",")&&n.setAttribute(s.HELMET_ATTRIBUTE,a.join(","))}},S=function(e,t){var n=document.head||document.querySelector(s.TAG_NAMES.HEAD),r=n.querySelectorAll(e+"["+s.HELMET_ATTRIBUTE+"]"),i=Array.prototype.slice.call(r),o=[],a=void 0;return t&&t.length&&t.forEach(function(t){var n=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===s.TAG_PROPERTIES.INNER_HTML)n.innerHTML=t.innerHTML;else if(r===s.TAG_PROPERTIES.CSS_TEXT)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{var c=void 0===t[r]?"":t[r];n.setAttribute(r,c)}n.setAttribute(s.HELMET_ATTRIBUTE,"true"),i.some(function(e,t){return a=t,n.isEqualNode(e)})?i.splice(a,1):o.push(n)}),i.forEach(function(e){return e.parentNode.removeChild(e)}),o.forEach(function(e){return n.appendChild(e)}),{oldTags:i,newTags:o}},M=function(e){return Object.keys(e).reduce(function(t,n){var r=void 0!==e[n]?n+'="'+e[n]+'"':""+n;return t?t+" "+r:r},"")},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,n){return t[s.REACT_TAG_MAP[n]||n]=e[n],t},t)},A=function(e,t,n){switch(e){case s.TAG_NAMES.TITLE:return{toComponent:function(){return function(e,t,n){var r,i=((r={key:t})[s.HELMET_ATTRIBUTE]=!0,r),a=T(n,i);return[o.default.createElement(s.TAG_NAMES.TITLE,a,t)]}(0,t.title,t.titleAttributes)},toString:function(){return function(e,t,n,r){var i=M(n),o=x(t);return i?"<"+e+" "+s.HELMET_ATTRIBUTE+'="true" '+i+">"+u(o,r)+"</"+e+">":"<"+e+" "+s.HELMET_ATTRIBUTE+'="true">'+u(o,r)+"</"+e+">"}(e,t.title,t.titleAttributes,n)}};case s.ATTRIBUTE_NAMES.BODY:case s.ATTRIBUTE_NAMES.HTML:return{toComponent:function(){return T(t)},toString:function(){return M(t)}};default:return{toComponent:function(){return function(e,t){return t.map(function(t,n){var r,i=((r={key:n})[s.HELMET_ATTRIBUTE]=!0,r);return Object.keys(t).forEach(function(e){var n=s.REACT_TAG_MAP[e]||e;if(n===s.TAG_PROPERTIES.INNER_HTML||n===s.TAG_PROPERTIES.CSS_TEXT){var r=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:r}}else i[n]=t[e]}),o.default.createElement(e,i)})}(e,t)},toString:function(){return function(e,t,n){return t.reduce(function(t,r){var i=Object.keys(r).filter(function(e){return!(e===s.TAG_PROPERTIES.INNER_HTML||e===s.TAG_PROPERTIES.CSS_TEXT)}).reduce(function(e,t){var i=void 0===r[t]?t:t+'="'+u(r[t],n)+'"';return e?e+" "+i:i},""),o=r.innerHTML||r.cssText||"",a=-1===s.SELF_CLOSING_TAGS.indexOf(e);return t+"<"+e+" "+s.HELMET_ATTRIBUTE+'="true" '+i+(a?"/>":">"+o+"</"+e+">")},"")}(e,t,n)}}}};t.convertReactPropstoHtmlAttributes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,n){return t[s.HTML_TAG_MAP[n]||n]=e[n],t},t)},t.handleClientStateChange=function(e){y&&v(y),e.defer?y=m(function(){b(e,function(){y=null})}):(b(e),y=null)},t.mapStateOnServer=function(e){var t=e.baseTag,n=e.bodyAttributes,r=e.encode,i=e.htmlAttributes,o=e.linkTags,a=e.metaTags,c=e.noscriptTags,u=e.scriptTags,l=e.styleTags,h=e.title,d=void 0===h?"":h,f=e.titleAttributes;return{base:A(s.TAG_NAMES.BASE,t,r),bodyAttributes:A(s.ATTRIBUTE_NAMES.BODY,n,r),htmlAttributes:A(s.ATTRIBUTE_NAMES.HTML,i,r),link:A(s.TAG_NAMES.LINK,o,r),meta:A(s.TAG_NAMES.META,a,r),noscript:A(s.TAG_NAMES.NOSCRIPT,c,r),script:A(s.TAG_NAMES.SCRIPT,u,r),style:A(s.TAG_NAMES.STYLE,l,r),title:A(s.TAG_NAMES.TITLE,{title:d,titleAttributes:f},r)}},t.reducePropsToState=function(e){return{baseTag:function(e,t){return t.filter(function(e){return void 0!==e[s.TAG_NAMES.BASE]}).map(function(e){return e[s.TAG_NAMES.BASE]}).reverse().reduce(function(t,n){if(!t.length)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=r[i].toLowerCase();if(-1!==e.indexOf(o)&&n[o])return t.concat(n)}return t},[])}([s.TAG_PROPERTIES.HREF],e),bodyAttributes:l(s.ATTRIBUTE_NAMES.BODY,e),defer:d(e,s.HELMET_PROPS.DEFER),encode:d(e,s.HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:l(s.ATTRIBUTE_NAMES.HTML,e),linkTags:h(s.TAG_NAMES.LINK,[s.TAG_PROPERTIES.REL,s.TAG_PROPERTIES.HREF],e),metaTags:h(s.TAG_NAMES.META,[s.TAG_PROPERTIES.NAME,s.TAG_PROPERTIES.CHARSET,s.TAG_PROPERTIES.HTTPEQUIV,s.TAG_PROPERTIES.PROPERTY,s.TAG_PROPERTIES.ITEM_PROP],e),noscriptTags:h(s.TAG_NAMES.NOSCRIPT,[s.TAG_PROPERTIES.INNER_HTML],e),onChangeClientState:function(e){return d(e,s.HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||function(){}}(e),scriptTags:h(s.TAG_NAMES.SCRIPT,[s.TAG_PROPERTIES.SRC,s.TAG_PROPERTIES.INNER_HTML],e),styleTags:h(s.TAG_NAMES.STYLE,[s.TAG_PROPERTIES.CSS_TEXT],e),title:function(e){var t=d(e,s.TAG_NAMES.TITLE),n=d(e,s.HELMET_PROPS.TITLE_TEMPLATE);if(n&&t)return n.replace(/%s/g,function(){return t});var r=d(e,s.HELMET_PROPS.DEFAULT_TITLE);return t||r||void 0}(e),titleAttributes:l(s.ATTRIBUTE_NAMES.TITLE,e)}},t.requestAnimationFrame=m,t.warn=g}).call(this,n("698d75b157f24ae829cc"))},c9327538105d995811b8:function(e,t,n){var r=n("f3b0ff1628e56352bcbf"),i=n("84696c4e387dcb8648dc");e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},c9be824f185f52a1979a:function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("2076e982c14c41925fb4")(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n("40b064d4eb439c0c1c2b")(o)),"Array",{indexOf:function(e){return a?o.apply(this,arguments)||0:i(this,e,arguments[1])}})},ca19e32ab6ee3b3692aa:function(e,t,n){var r=n("1f3157d073736826d4fa"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},cae0f026dfe4729a216f:function(e,t,n){"use strict";t.__esModule=!0;var r=a(n("8af190b70a6bc55c6f1b")),i=a(n("8a2d1b95e05b6a321e74")),o=a(n("6a4f9c383785f9168266"));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){(0,o.default)(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(r.default.Component);s.propTypes={when:i.default.bool,message:i.default.oneOfType([i.default.func,i.default.string]).isRequired},s.defaultProps={when:!0},s.contextTypes={router:i.default.shape({history:i.default.shape({block:i.default.func.isRequired}).isRequired}).isRequired},t.default=s},cb1771a9eba49d3e1de6:function(e,t,n){n("7519864545a89c83682d")("replace",2,function(e,t,n){return[function(r,i){"use strict";var o=e(this),a=void 0==r?void 0:r[t];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},n]})},cb2f5c21ba0f661fdebb:function(e,t,n){n("ccf79254fef1a499b486")("Set")},cc1aef3f71c33f94b57e:function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Reflect",{ownKeys:n("7fc706acfdba9b87047f")})},ccf730c83e7100f675a4:function(e,t,n){"use strict";var r=n("503a0df91bcab33c39b8"),i=n("87f7b2a2f3e179b5c40a").getWeak,o=n("79c91dcd8cd554c59c7b"),a=n("a459ab805827640a27e8"),s=n("fd8b6034a9a06242cc87"),c=n("4133d6461867e9751fc3"),u=n("ecd0e0fb36455021f082"),l=n("d34390b928ecadc11dc8"),h=n("2c407c4438ef2794ef23"),d=u(5),f=u(6),p=0,m=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},g=function(e,t){return d(e.a,function(e){return e[0]===t})};v.prototype={get:function(e){var t=g(this,e);if(t)return t[1]},has:function(e){return!!g(this,e)},set:function(e,t){var n=g(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=f(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,o){var u=e(function(e,r){s(e,u,t,"_i"),e._t=t,e._i=p++,e._l=void 0,void 0!=r&&c(r,n,e[o],e)});return r(u.prototype,{delete:function(e){if(!a(e))return!1;var n=i(e);return!0===n?m(h(this,t)).delete(e):n&&l(n,this._i)&&delete n[this._i]},has:function(e){if(!a(e))return!1;var n=i(e);return!0===n?m(h(this,t)).has(e):n&&l(n,this._i)}}),u},def:function(e,t,n){var r=i(o(t),!0);return!0===r?m(e).set(t,n):r[e._i]=n,e},ufstore:m}},ccf79254fef1a499b486:function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("4d073e2fededcdd3f3d3"),o=n("0e717e1f47872428608d"),a=n("4133d6461867e9751fc3");e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,c=arguments[1];return i(this),(t=void 0!==c)&&i(c),void 0==e?new this:(n=[],t?(r=0,s=o(c,arguments[2],2),a(e,!1,function(e){n.push(s(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},ce67b7d2fd06d83e5334:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){return function(){return function(t){return function(n){if(n.type!==r.CALL_HISTORY_METHOD)return t(n);var i=n.payload,o=i.method,a=i.args;e[o].apply(e,a)}}}};var r=n("7f74493c48ab576afbd4")},cef4e105446199aaf71e:function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},cf50f2ac57a34b8deade:function(e,t,n){n("02fcd2201285b358795d")("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},cf802dc5a6982c8247e6:function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("ecd0e0fb36455021f082")(4);r(r.P+r.F*!n("40b064d4eb439c0c1c2b")([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},cf8d6afd09746a2b5bc3:function(e,t,n){var r=n("a459ab805827640a27e8"),i=n("0d694d86343010af9d4f").set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},cfe37f364cc81a6415bd:function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("d394d0a4c1838202489d"),o=n("4d073e2fededcdd3f3d3"),a=n("1b01d0e59d3af79760a0");n("5975c7ea3ecd56e534e3")&&r(r.P+n("615b8c1bc8c3f66221bc"),"Object",{__defineGetter__:function(e,t){a.f(i(this),e,{get:o(t),enumerable:!0,configurable:!0})}})},cff317ca62d09454b2d3:function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Array",{isArray:n("8f648b1026e01323935b")})},d0990b8256a5f38a05aa:function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("b0b0e0fb335805985891");r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},d14c3129375a94963214:function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("d7d78b23c2948e92a9a9"));var i={},o=0;t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"/"===e?e:function(e){var t=e,n=i[t]||(i[t]={});if(n[e])return n[e];var a=r.default.compile(e);return o<1e4&&(n[e]=a,o++),a}(e)(t,{pretty:!0})}},d1a436d21f0debb638f5:function(e,t,n){"use strict";n("03ba1ede2f4706d1e7f7")("sub",function(e){return function(){return e(this,"sub","","")}})},d2e36888d16fa092915c:function(e,t,n){"use strict";n("57e7a4ee5fd1ce9280ef")("trim",function(e){return function(){return e(this,3)}})},d2fa9663cd158bd36d69:function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Number",{isNaN:function(e){return e!=e}})},d34390b928ecadc11dc8:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},d394d0a4c1838202489d:function(e,t,n){var r=n("7ad2c0eb9a8edcc472a4");e.exports=function(e){return Object(r(e))}},d3a850c4000d77bccc89:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},d4606d62f5b5fecf8cbd:function(e,t,n){"use strict";
/** @license React v16.4.1
 * react.development.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var t=n("83406643bfb209d249f4"),r=n("277cfc1331526160cbd4"),i=n("bef911c5daed007bb174"),o=n("68a9e58f394bd4c836d2"),a=n("ec9de96ce27c00ac79c5"),s=n("d5aa26791992324990d2"),c="function"==typeof Symbol&&Symbol.for,u=c?Symbol.for("react.element"):60103,l=c?Symbol.for("react.portal"):60106,h=c?Symbol.for("react.fragment"):60107,d=c?Symbol.for("react.strict_mode"):60108,f=c?Symbol.for("react.profiler"):60114,p=c?Symbol.for("react.provider"):60109,m=c?Symbol.for("react.context"):60110,v=c?Symbol.for("react.async_mode"):60111,g=c?Symbol.for("react.forward_ref"):60112,y=c?Symbol.for("react.timeout"):60113,b="function"==typeof Symbol&&Symbol.iterator,x="@@iterator";function w(e){if(null===e||void 0===e)return null;var t=b&&e[b]||e[x];return"function"==typeof t?t:null}var _=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(!e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0,o="Warning: "+e.replace(/%s/g,function(){return n[i++]});"undefined"!=typeof console&&console.warn(o);try{throw new Error(o)}catch(e){}}).apply(void 0,[t].concat(r))}},S={};function M(e,t){var n=e.constructor,r=n&&(n.displayName||n.name)||"ReactClass",i=r+"."+t;S[i]||(o(!1,"Can't call %s on a component that is not yet mounted. This is a no-op, but it might indicate a bug in your application. Instead, assign to `this.state` directly or define a `state = {};` class property with the desired state in the %s component.",t,r),S[i]=!0)}var T={isMounted:function(e){return!1},enqueueForceUpdate:function(e,t,n){M(e,"forceUpdate")},enqueueReplaceState:function(e,t,n,r){M(e,"replaceState")},enqueueSetState:function(e,t,n,r){M(e,"setState")}};function A(e,t,n){this.props=e,this.context=t,this.refs=i,this.updater=n||T}A.prototype.isReactComponent={},A.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&r(!1,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."),this.updater.enqueueSetState(this,e,t,"setState")},A.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};var E={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},C=function(e,t){Object.defineProperty(A.prototype,e,{get:function(){_(!1,"%s(...) is deprecated in plain JavaScript React classes. %s",t[0],t[1])}})};for(var P in E)E.hasOwnProperty(P)&&C(P,E[P]);function L(){}function O(e,t,n){this.props=e,this.context=t,this.refs=i,this.updater=n||T}L.prototype=A.prototype;var N=O.prototype=new L;N.constructor=O,t(N,A.prototype),N.isPureReactComponent=!0;var R={current:null},I=Object.prototype.hasOwnProperty,D={key:!0,ref:!0,__self:!0,__source:!0},F=void 0,k=void 0;function U(e){if(I.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}function B(e){if(I.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}var z=function(e,t,n,r,i,o,a){var s={$$typeof:u,type:e,key:t,ref:n,props:a,_owner:o,_store:{}};return Object.defineProperty(s._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(s,"_self",{configurable:!1,enumerable:!1,writable:!1,value:r}),Object.defineProperty(s,"_source",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.freeze&&(Object.freeze(s.props),Object.freeze(s)),s};function j(e,t,n){var r=void 0,i={},a=null,s=null,c=null,l=null;if(null!=t)for(r in U(t)&&(s=t.ref),B(t)&&(a=""+t.key),c=void 0===t.__self?null:t.__self,l=void 0===t.__source?null:t.__source,t)I.call(t,r)&&!D.hasOwnProperty(r)&&(i[r]=t[r]);var h=arguments.length-2;if(1===h)i.children=n;else if(h>1){for(var d=Array(h),f=0;f<h;f++)d[f]=arguments[f+2];Object.freeze&&Object.freeze(d),i.children=d}if(e&&e.defaultProps){var p=e.defaultProps;for(r in p)void 0===i[r]&&(i[r]=p[r])}if((a||s)&&(void 0===i.$$typeof||i.$$typeof!==u)){var m="function"==typeof e?e.displayName||e.name||"Unknown":e;a&&function(e,t){var n=function(){F||(F=!0,o(!1,"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"key",{get:n,configurable:!0})}(i,m),s&&function(e,t){var n=function(){k||(k=!0,o(!1,"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"ref",{get:n,configurable:!0})}(i,m)}return z(e,a,s,c,l,R.current,i)}function V(e){return"object"==typeof e&&null!==e&&e.$$typeof===u}var G={getCurrentStack:null,getStackAddendum:function(){var e=G.getCurrentStack;return e?e():null}},W=".",H=":";var X=!1,q=/\/+/g;function Y(e){return(""+e).replace(q,"$&/")}var J=10,Q=[];function Z(e,t,n,r){if(Q.length){var i=Q.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function K(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,Q.length<J&&Q.push(e)}function $(e,t,n){return null==e?0:function e(t,n,i,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var c=!1;if(null===t)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case u:case l:c=!0}}if(c)return i(a,t,""===n?W+ee(t,0):n),1;var h=void 0,d=0,f=""===n?W:n+H;if(Array.isArray(t))for(var p=0;p<t.length;p++)d+=e(h=t[p],f+ee(h,p),i,a);else{var m=w(t);if("function"==typeof m){m===t.entries&&(X||o(!1,"Using Maps as children is unsupported and will likely yield unexpected results. Convert it to a sequence/iterable of keyed ReactElements instead.%s",G.getStackAddendum()),X=!0);for(var v=m.call(t),g=void 0,y=0;!(g=v.next()).done;)d+=e(h=g.value,f+ee(h,y++),i,a)}else if("object"===s){var b;b=" If you meant to render a collection of children, use an array instead."+G.getStackAddendum();var x=""+t;r(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===x?"object with keys {"+Object.keys(t).join(", ")+"}":x,b)}}return d}(e,"",t,n)}function ee(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function te(e,t,n){var r=e.func,i=e.context;r.call(i,t,e.count++)}function ne(e,t,n){var r=e.result,i=e.keyPrefix,o=e.func,s=e.context,c=o.call(s,t,e.count++);Array.isArray(c)?re(c,r,n,a.thatReturnsArgument):null!=c&&(V(c)&&(c=function(e,t){return z(e.type,t,e.ref,e._self,e._source,e._owner,e.props)}(c,i+(!c.key||t&&t.key===c.key?"":Y(c.key)+"/")+n)),r.push(c))}function re(e,t,n,r,i){var o="";null!=n&&(o=Y(n)+"/");var a=Z(t,o,r,i);$(e,ne,a),K(a)}function ie(e){var t=e.type;if("function"==typeof t)return t.displayName||t.name;if("string"==typeof t)return t;switch(t){case v:return"AsyncMode";case m:return"Context.Consumer";case h:return"ReactFragment";case l:return"ReactPortal";case f:return"Profiler("+e.pendingProps.id+")";case p:return"Context.Provider";case d:return"StrictMode";case y:return"Timeout"}if("object"==typeof t&&null!==t)switch(t.$$typeof){case g:var n=t.render.displayName||t.render.name||"";return""!==n?"ForwardRef("+n+")":"ForwardRef"}return null}var oe,ae=void 0,se=void 0,ce=function(){};function ue(){if(R.current){var e=ie(R.current);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}ae=null,se=!1,oe=function(e){if(null==e)return"#empty";if("string"==typeof e||"number"==typeof e)return"#text";if("string"==typeof e.type)return e.type;var t=e.type;if(t===h)return"React.Fragment";if("object"==typeof t&&null!==t&&t.$$typeof===g){var n=t.render.displayName||t.render.name||"";return""!==n?"ForwardRef("+n+")":"ForwardRef"}return t.displayName||t.name||"Unknown"},ce=function(){var e="";if(ae){var t=oe(ae),n=ae._owner;e+=function(e,t,n){return"\n    in "+(e||"Unknown")+(t?" (at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+")":n?" (created by "+n+")":"")}(t,ae._source,n&&ie(n))}return e+=G.getStackAddendum()||""};var le={};function he(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var n=function(e){var t=ue();if(!t){var n="string"==typeof e?e:e.displayName||e.name;n&&(t="\n\nCheck the top-level render call using <"+n+">.")}return t}(t);if(!le[n]){le[n]=!0;var r="";e&&e._owner&&e._owner!==R.current&&(r=" It was passed a child from "+ie(e._owner)+"."),ae=e,o(!1,'Each child in an array or iterator should have a unique "key" prop.%s%s See https://fb.me/react-warning-keys for more information.%s',n,r,ce()),ae=null}}}function de(e,t){if("object"==typeof e)if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];V(r)&&he(r,t)}else if(V(e))e._store&&(e._store.validated=!0);else if(e){var i=w(e);if("function"==typeof i&&i!==e.entries)for(var o=i.call(e),a=void 0;!(a=o.next()).done;)V(a.value)&&he(a.value,t)}}function fe(e){var t=e.type,n=void 0,r=void 0;if("function"==typeof t)n=t.displayName||t.name,r=t.propTypes;else{if("object"!=typeof t||null===t||t.$$typeof!==g)return;var i=t.render.displayName||t.render.name||"";n=""!==i?"ForwardRef("+i+")":"ForwardRef",r=t.propTypes}r?(ae=e,s(r,e.props,"prop",n,ce),ae=null):void 0===t.PropTypes||se||(se=!0,o(!1,"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",n||"Unknown")),"function"==typeof t.getDefaultProps&&(t.getDefaultProps.isReactClassApproved||o(!1,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead."))}function pe(e,t,n){var r=function(e){return"string"==typeof e||"function"==typeof e||e===h||e===v||e===f||e===d||e===y||"object"==typeof e&&null!==e&&(e.$$typeof===p||e.$$typeof===m||e.$$typeof===g)}(e);if(!r){var i="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(i+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var a=function(e){if(null!==e&&void 0!==e&&void 0!==e.__source){var t=e.__source;return"\n\nCheck your code at "+t.fileName.replace(/^.*[\\\/]/,"")+":"+t.lineNumber+"."}return""}(t);i+=a||ue(),i+=ce()||"";var s=void 0;s=null===e?"null":Array.isArray(e)?"array":typeof e,o(!1,"React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",s,i)}var c=j.apply(this,arguments);if(null==c)return c;if(r)for(var u=2;u<arguments.length;u++)de(arguments[u],e);return e===h?function(e){ae=e;for(var t=Object.keys(e.props),n=0;n<t.length;n++){var r=t[n];if("children"!==r&&"key"!==r){o(!1,"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.%s",r,ce());break}}null!==e.ref&&o(!1,"Invalid attribute `ref` supplied to `React.Fragment`.%s",ce()),ae=null}(c):fe(c),c}var me={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return re(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;var r=Z(null,null,t,n);$(e,te,r),K(r)},count:function(e){return $(e,a.thatReturnsNull,null)},toArray:function(e){var t=[];return re(e,t,null,a.thatReturnsArgument),t},only:function(e){return V(e)||r(!1,"React.Children.only expected to receive a single React element child."),e}},createRef:function(){var e={current:null};return Object.seal(e),e},Component:A,PureComponent:O,createContext:function(e,t){void 0===t?t=null:null!==t&&"function"!=typeof t&&o(!1,"createContext: Expected the optional second argument to be a function. Instead received: %s",t);var n={$$typeof:m,_calculateChangedBits:t,_defaultValue:e,_currentValue:e,_currentValue2:e,_changedBits:0,_changedBits2:0,Provider:null,Consumer:null};return n.Provider={$$typeof:p,_context:n},n.Consumer=n,n._currentRenderer=null,n._currentRenderer2=null,n},forwardRef:function(e){return"function"!=typeof e&&o(!1,"forwardRef requires a render function but was given %s.",null===e?"null":typeof e),null!=e&&(null!=e.defaultProps||null!=e.propTypes)&&o(!1,"forwardRef render functions do not support propTypes or defaultProps. Did you accidentally pass a React component?"),{$$typeof:g,render:e}},Fragment:h,StrictMode:d,unstable_AsyncMode:v,unstable_Profiler:f,createElement:pe,cloneElement:function(e,n,i){for(var o=function(e,n,i){(null===e||void 0===e)&&r(!1,"React.cloneElement(...): The argument must be a React element, but you passed %s.",e);var o=void 0,a=t({},e.props),s=e.key,c=e.ref,u=e._self,l=e._source,h=e._owner;if(null!=n){U(n)&&(c=n.ref,h=R.current),B(n)&&(s=""+n.key);var d=void 0;for(o in e.type&&e.type.defaultProps&&(d=e.type.defaultProps),n)I.call(n,o)&&!D.hasOwnProperty(o)&&(void 0===n[o]&&void 0!==d?a[o]=d[o]:a[o]=n[o])}var f=arguments.length-2;if(1===f)a.children=i;else if(f>1){for(var p=Array(f),m=0;m<f;m++)p[m]=arguments[m+2];a.children=p}return z(e.type,s,c,u,l,h,a)}.apply(this,arguments),a=2;a<arguments.length;a++)de(arguments[a],o.type);return fe(o),o},createFactory:function(e){var t=pe.bind(null,e);return t.type=e,Object.defineProperty(t,"type",{enumerable:!1,get:function(){return _(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:e}),e}}),t},isValidElement:V,version:"16.4.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:R,assign:t}};t(me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,{ReactDebugCurrentFrame:G,ReactComponentTreeHook:{}});var ve=Object.freeze({default:me}),ge=ve&&me||ve,ye=ge.default?ge.default:ge;e.exports=ye})()},d491591ee60d9ef0aa9d:function(e,t,n){"use strict";var r=n("a459ab805827640a27e8"),i=n("12323e1413cbffdabe02"),o=n("621a65702ee1a566fd32")("hasInstance"),a=Function.prototype;o in a||n("1b01d0e59d3af79760a0").f(a,o,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=i(e);)if(this.prototype===e)return!0;return!1}})},d576fdbd1b2940cea26e:function(e,t,n){"use strict";
/** @license React v16.4.1
 * react.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n("83406643bfb209d249f4"),i=n("277cfc1331526160cbd4"),o=n("bef911c5daed007bb174"),a=n("ec9de96ce27c00ac79c5"),s="function"==typeof Symbol&&Symbol.for,c=s?Symbol.for("react.element"):60103,u=s?Symbol.for("react.portal"):60106,l=s?Symbol.for("react.fragment"):60107,h=s?Symbol.for("react.strict_mode"):60108,d=s?Symbol.for("react.profiler"):60114,f=s?Symbol.for("react.provider"):60109,p=s?Symbol.for("react.context"):60110,m=s?Symbol.for("react.async_mode"):60111,v=s?Symbol.for("react.forward_ref"):60112;s&&Symbol.for("react.timeout");var g="function"==typeof Symbol&&Symbol.iterator;function y(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);i(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function x(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||b}function w(){}function _(e,t,n){this.props=e,this.context=t,this.refs=o,this.updater=n||b}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&y("85"),this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=x.prototype;var S=_.prototype=new w;S.constructor=_,r(S,x.prototype),S.isPureReactComponent=!0;var M={current:null},T=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r=void 0,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)T.call(t,r)&&!A.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:c,type:e,key:o,ref:a,props:i,_owner:M.current}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===c}var P=/\/+/g,L=[];function O(e,t,n,r){if(L.length){var i=L.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function N(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>L.length&&L.push(e)}function R(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var o=!1;if(null===e)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case c:case u:o=!0}}if(o)return n(r,e,""===t?"."+I(e,0):t),1;if(o=0,t=""===t?".":t+":",Array.isArray(e))for(var a=0;a<e.length;a++){var s=t+I(i=e[a],a);o+=R(i,s,n,r)}else if(null===e||void 0===e?s=null:s="function"==typeof(s=g&&e[g]||e["@@iterator"])?s:null,"function"==typeof s)for(e=s.call(e),a=0;!(i=e.next()).done;)o+=R(i=i.value,s=t+I(i,a++),n,r);else"object"===i&&y("31","[object Object]"===(n=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return o}function I(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function D(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?k(e,r,n,a.thatReturnsArgument):null!=e&&(C(e)&&(t=i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(P,"$&/")+"/")+n,e={$$typeof:c,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),r.push(e))}function k(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(P,"$&/")+"/"),t=O(t,o,r,i),null==e||R(e,"",F,t),N(t)}var U={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return k(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;t=O(null,null,t,n),null==e||R(e,"",D,t),N(t)},count:function(e){return null==e?0:R(e,"",a.thatReturnsNull,null)},toArray:function(e){var t=[];return k(e,t,null,a.thatReturnsArgument),t},only:function(e){return C(e)||y("143"),e}},createRef:function(){return{current:null}},Component:x,PureComponent:_,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:p,_calculateChangedBits:t,_defaultValue:e,_currentValue:e,_currentValue2:e,_changedBits:0,_changedBits2:0,Provider:null,Consumer:null}).Provider={$$typeof:f,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:v,render:e}},Fragment:l,StrictMode:h,unstable_AsyncMode:m,unstable_Profiler:d,createElement:E,cloneElement:function(e,t,n){(null===e||void 0===e)&&y("267",e);var i=void 0,o=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){void 0!==t.ref&&(s=t.ref,u=M.current),void 0!==t.key&&(a=""+t.key);var l=void 0;for(i in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)T.call(t,i)&&!A.hasOwnProperty(i)&&(o[i]=void 0===t[i]&&void 0!==l?l[i]:t[i])}if(1===(i=arguments.length-2))o.children=n;else if(1<i){l=Array(i);for(var h=0;h<i;h++)l[h]=arguments[h+2];o.children=l}return{$$typeof:c,type:e.type,key:a,ref:s,props:o,_owner:u}},createFactory:function(e){var t=E.bind(null,e);return t.type=e,t},isValidElement:C,version:"16.4.1",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:M,assign:r}},B={default:U},z=B&&U||B;e.exports=z.default?z.default:z},d5aa26791992324990d2:function(e,t,n){"use strict";var r=n("277cfc1331526160cbd4"),i=n("68a9e58f394bd4c836d2"),o=n("6d8be12a50447a7c97b1"),a={};e.exports=function(e,t,n,s,c){for(var u in e)if(e.hasOwnProperty(u)){var l;try{r("function"==typeof e[u],"%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",s||"React class",n,u,typeof e[u]),l=e[u](t,u,s,n,null,o)}catch(e){l=e}if(i(!l||l instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",s||"React class",n,u,typeof l),l instanceof Error&&!(l.message in a)){a[l.message]=!0;var h=c?c():"";i(!1,"Failed %s type: %s%s",n,l.message,null!=h?h:"")}}}},d5e0d50957e1364b4d8b:function(e,t,n){var r=n("621a65702ee1a566fd32")("toPrimitive"),i=Date.prototype;r in i||n("5f25c015bbbf9d42c661")(i,r,n("31acd5ae212d901071a3"))},d701338e3c92ad7598cc:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n,r){i(e,"mapStateToProps",r),i(t,"mapDispatchToProps",r),i(n,"mergeProps",r)};var r=function(e){return e&&e.__esModule?e:{default:e}}(n("c0fa96a4e042118a422d"));function i(e,t,n){if(!e)throw new Error("Unexpected value for "+t+" in "+n+".");"mapStateToProps"!==t&&"mapDispatchToProps"!==t||e.hasOwnProperty("dependsOnOwnProps")||(0,r.default)("The selector for "+t+" of "+n+" did not specify a value for dependsOnOwnProps.")}},d7134433f426bbf0c311:function(e,t,n){"use strict";var r=n("4d073e2fededcdd3f3d3"),i=n("a459ab805827640a27e8"),o=n("5a3b914e449c6d95aadc"),a=[].slice,s={};e.exports=Function.bind||function(e){var t=r(this),n=a.call(arguments,1),c=function(){var r=n.concat(a.call(arguments));return this instanceof c?function(e,t,n){if(!(t in s)){for(var r=[],i=0;i<t;i++)r[i]="a["+i+"]";s[t]=Function("F,a","return new F("+r.join(",")+")")}return s[t](e,n)}(t,r.length,r):o(t,r,e)};return i(t.prototype)&&(c.prototype=t.prototype),c}},d7d78b23c2948e92a9a9:function(e,t,n){var r=n("5b56f889e8364e6f86ab");e.exports=p,e.exports.parse=o,e.exports.compile=function(e,t){return c(o(e,t))},e.exports.tokensToFunction=c,e.exports.tokensToRegExp=f;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,a=0,s="",c=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],d=n[1],f=n.index;if(s+=e.slice(a,f),a=f+h.length,d)s+=d[1];else{var p=e[a],m=n[2],v=n[3],g=n[4],y=n[5],b=n[6],x=n[7];s&&(r.push(s),s="");var w=null!=m&&null!=p&&p!==m,_="+"===b||"*"===b,S="?"===b||"*"===b,M=n[2]||c,T=g||y;r.push({name:v||o++,prefix:m||"",delimiter:M,optional:S,repeat:_,partial:w,asterisk:!!x,pattern:T?l(T):x?".*":"[^"+u(M)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&r.push(s),r}function a(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function s(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function c(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,i){for(var o="",c=n||{},u=(i||{}).pretty?a:encodeURIComponent,l=0;l<e.length;l++){var h=e[l];if("string"!=typeof h){var d,f=c[h.name];if(null==f){if(h.optional){h.partial&&(o+=h.prefix);continue}throw new TypeError('Expected "'+h.name+'" to be defined')}if(r(f)){if(!h.repeat)throw new TypeError('Expected "'+h.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(h.optional)continue;throw new TypeError('Expected "'+h.name+'" to not be empty')}for(var p=0;p<f.length;p++){if(d=u(f[p]),!t[l].test(d))throw new TypeError('Expected all "'+h.name+'" to match "'+h.pattern+'", but received `'+JSON.stringify(d)+"`");o+=(0===p?h.prefix:h.delimiter)+d}}else{if(d=h.asterisk?s(f):u(f),!t[l].test(d))throw new TypeError('Expected "'+h.name+'" to match "'+h.pattern+'", but received "'+d+'"');o+=h.prefix+d}}else o+=h}return o}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function h(e,t){return e.keys=t,e}function d(e){return e.sensitive?"":"i"}function f(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var c=e[s];if("string"==typeof c)a+=u(c);else{var l=u(c.prefix),f="(?:"+c.pattern+")";t.push(c),c.repeat&&(f+="(?:"+l+f+")*"),a+=f=c.optional?c.partial?l+"("+f+")?":"(?:"+l+"("+f+"))?":l+"("+f+")"}}var p=u(n.delimiter||"/"),m=a.slice(-p.length)===p;return i||(a=(m?a.slice(0,-p.length):a)+"(?:"+p+"(?=$))?"),a+=o?"$":i&&m?"":"(?="+p+"|$)",h(new RegExp("^"+a,d(n)),t)}function p(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return h(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(p(e[i],t,n).source);return h(new RegExp("(?:"+r.join("|")+")",d(n)),t)}(e,t,n):function(e,t,n){return f(o(e,n),t,n)}(e,t,n)}},d7dd51e1bf6bfc2c9c3d:function(e,t,n){"use strict";t.__esModule=!0,t.connect=t.connectAdvanced=t.createProvider=t.Provider=void 0;var r=n("aaa8ac4298b679dfe295"),i=s(r),o=s(n("8de1be082e521bbaabf2")),a=s(n("7ad2ae5e9bfa67dff4eb"));function s(e){return e&&e.__esModule?e:{default:e}}t.Provider=i.default,t.createProvider=r.createProvider,t.connectAdvanced=o.default,t.connect=a.default},d8fab3fc72ca23b52ae2:function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},da57ca5397b5779e093d:function(e,t,n){var r=n("14462f9650d45fd47dc7"),i=n("79c91dcd8cd554c59c7b"),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(e){return o(i(e),arguments.length<2?void 0:a(arguments[1]))}})},da8dbcc3b692fc0676cc:function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("5925dad3c5243ffee3db"),o=n("1139de1233fd67f45bd7"),a=n("8b246eab22bc34690d38"),s=n("8cea4f2c5f75a90121e7");r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},dabaabbe8ba08d59975f:function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},dae1b939e898dc140c93:function(e,t,n){n("9f769c6d0e4c9e82ba05")("Map")},dae53c7f1be5fcfdbe4b:function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},db019a029d69500cb816:function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.G,{global:n("1139de1233fd67f45bd7")})},dba25a6f599687a5b44e:function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},dbb8045293c85083c922:function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S,"Reflect",{has:function(e,t){return t in e}})},dbcdca8da350cc1706f8:function(e,t,n){e.exports=function e(t){"use strict";var n=/^\0+/g,r=/[\0\r\f]/g,i=/: */g,o=/zoo|gra/,a=/([,: ])(transform)/g,s=/,+\s*(?![^(]*[)])/g,c=/ +\s*(?![^(]*[)])/g,u=/ *[\0] */g,l=/,\r+?/g,h=/([\t\r\n ])*\f?&/g,d=/:global\(((?:[^\(\)\[\]]*|\[.*\]|\([^\(\)]*\))*)\)/g,f=/\W+/g,p=/@(k\w+)\s*(\S*)\s*/,m=/::(place)/g,v=/:(read-only)/g,g=/\s+(?=[{\];=:>])/g,y=/([[}=:>])\s+/g,b=/(\{[^{]+?);(?=\})/g,x=/\s{2,}/g,w=/([^\(])(:+) */g,_=/[svh]\w+-[tblr]{2}/,S=/\(\s*(.*)\s*\)/g,M=/([\s\S]*?);/g,T=/-self|flex-/g,A=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,C=/([^-])(image-set\()/,P="-webkit-",L="-moz-",O="-ms-",N=59,R=125,I=123,D=40,F=41,k=91,U=93,B=10,z=13,j=9,V=64,G=32,W=38,H=45,X=95,q=42,Y=44,J=58,Q=39,Z=34,K=47,$=62,ee=43,te=126,ne=0,re=12,ie=11,oe=107,ae=109,se=115,ce=112,ue=111,le=105,he=99,de=100,fe=112,pe=1,me=1,ve=0,ge=1,ye=1,be=1,xe=0,we=0,_e=0,Se=[],Me=[],Te=0,Ae=null,Ee=-2,Ce=-1,Pe=0,Le=1,Oe=2,Ne=3,Re=0,Ie=1,De="",Fe="",ke="";function Ue(e,t,i,o,a){for(var s,c,l=0,h=0,d=0,f=0,g=0,y=0,b=0,x=0,_=0,M=0,T=0,A=0,E=0,C=0,X=0,xe=0,Me=0,Ae=0,Ee=0,Ce=i.length,ze=Ce-1,Xe="",qe="",Ye="",Je="",Qe="",Ze="";X<Ce;){if(b=i.charCodeAt(X),X===ze&&h+f+d+l!==0&&(0!==h&&(b=h===K?B:K),f=d=l=0,Ce++,ze++),h+f+d+l===0){if(X===ze&&(xe>0&&(qe=qe.replace(r,"")),qe.trim().length>0)){switch(b){case G:case j:case N:case z:case B:break;default:qe+=i.charAt(X)}b=N}if(1===Me)switch(b){case I:case R:case N:case Z:case Q:case D:case F:case Y:Me=0;case j:case z:case B:case G:break;default:for(Me=0,Ee=X,g=b,X--,b=N;Ee<Ce;)switch(i.charCodeAt(Ee++)){case B:case z:case N:++X,b=g,Ee=Ce;break;case J:xe>0&&(++X,b=g);case I:Ee=Ce}}switch(b){case I:for(qe=qe.trim(),g=qe.charCodeAt(0),T=1,Ee=++X;X<Ce;){switch(b=i.charCodeAt(X)){case I:T++;break;case R:T--;break;case K:switch(y=i.charCodeAt(X+1)){case q:case K:X=He(y,X,ze,i)}break;case k:b++;case D:b++;case Z:case Q:for(;X++<ze&&i.charCodeAt(X)!==b;);}if(0===T)break;X++}switch(Ye=i.substring(Ee,X),g===ne&&(g=(qe=qe.replace(n,"").trim()).charCodeAt(0)),g){case V:switch(xe>0&&(qe=qe.replace(r,"")),y=qe.charCodeAt(1)){case de:case ae:case se:case H:s=t;break;default:s=Se}if(Ye=Ue(t,s,Ye,y,a+1),Ee=Ye.length,_e>0&&0===Ee&&(Ee=qe.length),Te>0&&(s=Be(Se,qe,Ae),c=We(Ne,Ye,s,t,me,pe,Ee,y,a,o),qe=s.join(""),void 0!==c&&0===(Ee=(Ye=c.trim()).length)&&(y=0,Ye="")),Ee>0)switch(y){case se:qe=qe.replace(S,Ge);case de:case ae:case H:Ye=qe+"{"+Ye+"}";break;case oe:qe=qe.replace(p,"$1 $2"+(Ie>0?De:"")),Ye=qe+"{"+Ye+"}",Ye=1===ye||2===ye&&Ve("@"+Ye,3)?"@"+P+Ye+"@"+Ye:"@"+Ye;break;default:Ye=qe+Ye,o===fe&&(Je+=Ye,Ye="")}else Ye="";break;default:Ye=Ue(t,Be(t,qe,Ae),Ye,o,a+1)}Qe+=Ye,A=0,Me=0,C=0,xe=0,Ae=0,E=0,qe="",Ye="",b=i.charCodeAt(++X);break;case R:case N:if(qe=(xe>0?qe.replace(r,""):qe).trim(),(Ee=qe.length)>1)switch(0===C&&((g=qe.charCodeAt(0))===H||g>96&&g<123)&&(Ee=(qe=qe.replace(" ",":")).length),Te>0&&void 0!==(c=We(Le,qe,t,e,me,pe,Je.length,o,a,o))&&0===(Ee=(qe=c.trim()).length)&&(qe="\0\0"),g=qe.charCodeAt(0),y=qe.charCodeAt(1),g){case ne:break;case V:if(y===le||y===he){Ze+=qe+i.charAt(X);break}default:if(qe.charCodeAt(Ee-1)===J)break;Je+=je(qe,g,y,qe.charCodeAt(2))}A=0,Me=0,C=0,xe=0,Ae=0,qe="",b=i.charCodeAt(++X)}}switch(b){case z:case B:if(h+f+d+l+we===0)switch(M){case F:case Q:case Z:case V:case te:case $:case q:case ee:case K:case H:case J:case Y:case N:case I:case R:break;default:C>0&&(Me=1)}h===K?h=0:ge+A===0&&o!==oe&&qe.length>0&&(xe=1,qe+="\0"),Te*Re>0&&We(Pe,qe,t,e,me,pe,Je.length,o,a,o),pe=1,me++;break;case N:case R:if(h+f+d+l===0){pe++;break}default:switch(pe++,Xe=i.charAt(X),b){case j:case G:if(f+l+h===0)switch(x){case Y:case J:case j:case G:Xe="";break;default:b!==G&&(Xe=" ")}break;case ne:Xe="\\0";break;case re:Xe="\\f";break;case ie:Xe="\\v";break;case W:f+h+l===0&&ge>0&&(Ae=1,xe=1,Xe="\f"+Xe);break;case 108:if(f+h+l+ve===0&&C>0)switch(X-C){case 2:x===ce&&i.charCodeAt(X-3)===J&&(ve=x);case 8:_===ue&&(ve=_)}break;case J:f+h+l===0&&(C=X);break;case Y:h+d+f+l===0&&(xe=1,Xe+="\r");break;case Z:case Q:0===h&&(f=f===b?0:0===f?b:f);break;case k:f+h+d===0&&l++;break;case U:f+h+d===0&&l--;break;case F:f+h+l===0&&d--;break;case D:if(f+h+l===0){if(0===A)switch(2*x+3*_){case 533:break;default:T=0,A=1}d++}break;case V:h+d+f+l+C+E===0&&(E=1);break;case q:case K:if(f+l+d>0)break;switch(h){case 0:switch(2*b+3*i.charCodeAt(X+1)){case 235:h=K;break;case 220:Ee=X,h=q}break;case q:b===K&&x===q&&Ee+2!==X&&(33===i.charCodeAt(Ee+2)&&(Je+=i.substring(Ee,X+1)),Xe="",h=0)}}if(0===h){if(ge+f+l+E===0&&o!==oe&&b!==N)switch(b){case Y:case te:case $:case ee:case F:case D:if(0===A){switch(x){case j:case G:case B:case z:Xe+="\0";break;default:Xe="\0"+Xe+(b===Y?"":"\0")}xe=1}else switch(b){case D:C+7===X&&108===x&&(C=0),A=++T;break;case F:0==(A=--T)&&(xe=1,Xe+="\0")}break;case j:case G:switch(x){case ne:case I:case R:case N:case Y:case re:case j:case G:case B:case z:break;default:0===A&&(xe=1,Xe+="\0")}}qe+=Xe,b!==G&&b!==j&&(M=b)}}_=x,x=b,X++}if(Ee=Je.length,_e>0&&0===Ee&&0===Qe.length&&0===t[0].length==0&&(o!==ae||1===t.length&&(ge>0?Fe:ke)===t[0])&&(Ee=t.join(",").length+2),Ee>0){if(s=0===ge&&o!==oe?function(e){for(var t,n,i=0,o=e.length,a=Array(o);i<o;++i){for(var s=e[i].split(u),c="",l=0,h=0,d=0,f=0,p=s.length;l<p;++l)if(!(0===(h=(n=s[l]).length)&&p>1)){if(d=c.charCodeAt(c.length-1),f=n.charCodeAt(0),t="",0!==l)switch(d){case q:case te:case $:case ee:case G:case D:break;default:t=" "}switch(f){case W:n=t+Fe;case te:case $:case ee:case G:case F:case D:break;case k:n=t+n+Fe;break;case J:switch(2*n.charCodeAt(1)+3*n.charCodeAt(2)){case 530:if(be>0){n=t+n.substring(8,h-1);break}default:(l<1||s[l-1].length<1)&&(n=t+Fe+n)}break;case Y:t="";default:n=h>1&&n.indexOf(":")>0?t+n.replace(w,"$1"+Fe+"$2"):t+n+Fe}c+=n}a[i]=c.replace(r,"").trim()}return a}(t):t,Te>0&&void 0!==(c=We(Oe,Je,s,e,me,pe,Ee,o,a,o))&&0===(Je=c).length)return Ze+Je+Qe;if(Je=s.join(",")+"{"+Je+"}",ye*ve!=0){switch(2!==ye||Ve(Je,2)||(ve=0),ve){case ue:Je=Je.replace(v,":"+L+"$1")+Je;break;case ce:Je=Je.replace(m,"::"+P+"input-$1")+Je.replace(m,"::"+L+"$1")+Je.replace(m,":"+O+"input-$1")+Je}ve=0}}return Ze+Je+Qe}function Be(e,t,n){var r=t.trim().split(l),i=r,o=r.length,a=e.length;switch(a){case 0:case 1:for(var s=0,c=0===a?"":e[0]+" ";s<o;++s)i[s]=ze(c,i[s],n,a).trim();break;default:for(var s=0,u=0,i=[];s<o;++s)for(var h=0;h<a;++h)i[u++]=ze(e[h]+" ",r[s],n,a).trim()}return i}function ze(e,t,n,r){var i=t,o=i.charCodeAt(0);switch(o<33&&(o=(i=i.trim()).charCodeAt(0)),o){case W:switch(ge+r){case 0:case 1:if(0===e.trim().length)break;default:return i.replace(h,"$1"+e.trim())}break;case J:switch(i.charCodeAt(1)){case 103:if(be>0&&ge>0)return i.replace(d,"$1").replace(h,"$1"+ke);break;default:return e.trim()+i.replace(h,"$1"+e.trim())}default:if(n*ge>0&&i.indexOf("\f")>0)return i.replace(h,(e.charCodeAt(0)===J?"":"$1")+e.trim())}return e+i}function je(e,t,n,r){var u,l=0,h=e+";",d=2*t+3*n+4*r;if(944===d)return function(e){var t=e.length,n=e.indexOf(":",9)+1,r=e.substring(0,n).trim(),i=e.substring(n,t-1).trim();switch(e.charCodeAt(9)*Ie){case 0:break;case H:if(110!==e.charCodeAt(10))break;default:for(var o=i.split((i="",s)),a=0,n=0,t=o.length;a<t;n=0,++a){for(var u=o[a],l=u.split(c);u=l[n];){var h=u.charCodeAt(0);if(1===Ie&&(h>V&&h<90||h>96&&h<123||h===X||h===H&&u.charCodeAt(1)!==H))switch(isNaN(parseFloat(u))+(-1!==u.indexOf("("))){case 1:switch(u){case"infinite":case"alternate":case"backwards":case"running":case"normal":case"forwards":case"both":case"none":case"linear":case"ease":case"ease-in":case"ease-out":case"ease-in-out":case"paused":case"reverse":case"alternate-reverse":case"inherit":case"initial":case"unset":case"step-start":case"step-end":break;default:u+=De}}l[n++]=u}i+=(0===a?"":",")+l.join(" ")}}return i=r+i+";",1===ye||2===ye&&Ve(i,1)?P+i+i:i}(h);if(0===ye||2===ye&&!Ve(h,1))return h;switch(d){case 1015:return 97===h.charCodeAt(10)?P+h+h:h;case 951:return 116===h.charCodeAt(3)?P+h+h:h;case 963:return 110===h.charCodeAt(5)?P+h+h:h;case 1009:if(100!==h.charCodeAt(4))break;case 969:case 942:return P+h+h;case 978:return P+h+L+h+h;case 1019:case 983:return P+h+L+h+O+h+h;case 883:return h.charCodeAt(8)===H?P+h+h:h.indexOf("image-set(",11)>0?h.replace(C,"$1"+P+"$2")+h:h;case 932:if(h.charCodeAt(4)===H)switch(h.charCodeAt(5)){case 103:return P+"box-"+h.replace("-grow","")+P+h+O+h.replace("grow","positive")+h;case 115:return P+h+O+h.replace("shrink","negative")+h;case 98:return P+h+O+h.replace("basis","preferred-size")+h}return P+h+O+h+h;case 964:return P+h+O+"flex-"+h+h;case 1023:if(99!==h.charCodeAt(8))break;return u=h.substring(h.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),P+"box-pack"+u+P+h+O+"flex-pack"+u+h;case 1005:return o.test(h)?h.replace(i,":"+P)+h.replace(i,":"+L)+h:h;case 1e3:switch(u=h.substring(13).trim(),l=u.indexOf("-")+1,u.charCodeAt(0)+u.charCodeAt(l)){case 226:u=h.replace(_,"tb");break;case 232:u=h.replace(_,"tb-rl");break;case 220:u=h.replace(_,"lr");break;default:return h}return P+h+O+u+h;case 1017:if(-1===h.indexOf("sticky",9))return h;case 975:switch(l=(h=e).length-10,u=(33===h.charCodeAt(l)?h.substring(0,l):h).substring(e.indexOf(":",7)+1).trim(),d=u.charCodeAt(0)+(0|u.charCodeAt(7))){case 203:if(u.charCodeAt(8)<111)break;case 115:h=h.replace(u,P+u)+";"+h;break;case 207:case 102:h=h.replace(u,P+(d>102?"inline-":"")+"box")+";"+h.replace(u,P+u)+";"+h.replace(u,O+u+"box")+";"+h}return h+";";case 938:if(h.charCodeAt(5)===H)switch(h.charCodeAt(6)){case 105:return u=h.replace("-items",""),P+h+P+"box-"+u+O+"flex-"+u+h;case 115:return P+h+O+"flex-item-"+h.replace(T,"")+h;default:return P+h+O+"flex-line-pack"+h.replace("align-content","").replace(T,"")+h}break;case 973:case 989:if(h.charCodeAt(3)!==H||122===h.charCodeAt(4))break;case 931:case 953:if(!0===E.test(e))return 115===(u=e.substring(e.indexOf(":")+1)).charCodeAt(0)?je(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):h.replace(u,P+u)+h.replace(u,L+u.replace("fill-",""))+h;break;case 962:if(h=P+h+(102===h.charCodeAt(5)?O+h:"")+h,n+r===211&&105===h.charCodeAt(13)&&h.indexOf("transform",10)>0)return h.substring(0,h.indexOf(";",27)+1).replace(a,"$1"+P+"$2")+h}return h}function Ve(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10),i=e.substring(n+1,e.length-1);return Ae(2!==t?r:r.replace(A,"$1"),i,t)}function Ge(e,t){var n=je(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(M," or ($1)").substring(4):"("+t+")"}function We(e,t,n,r,i,o,a,s,c,u){for(var l,h=0,d=t;h<Te;++h)switch(l=Me[h].call(qe,e,d,n,r,i,o,a,s,c,u)){case void 0:case!1:case!0:case null:break;default:d=l}switch(d){case void 0:case!1:case!0:case null:case t:break;default:return d}}function He(e,t,n,r){for(var i=t+1;i<n;++i)switch(r.charCodeAt(i)){case K:if(e===q&&r.charCodeAt(i-1)===q&&t+2!==i)return i+1;break;case B:if(e===K)return i+1}return i}function Xe(e){for(var t in e){var n=e[t];switch(t){case"keyframe":Ie=0|n;break;case"global":be=0|n;break;case"cascade":ge=0|n;break;case"compress":xe=0|n;break;case"semicolon":we=0|n;break;case"preserve":_e=0|n;break;case"prefix":Ae=null,n?"function"!=typeof n?ye=1:(ye=2,Ae=n):ye=0}}return Xe}function qe(t,n){if(void 0!==this&&this.constructor===qe)return e(t);var i=t,o=i.charCodeAt(0);o<33&&(o=(i=i.trim()).charCodeAt(0)),Ie>0&&(De=i.replace(f,o===k?"":"-")),o=1,1===ge?ke=i:Fe=i;var a,s=[ke];Te>0&&void 0!==(a=We(Ce,n,s,s,me,pe,0,0,0,0))&&"string"==typeof a&&(n=a);var c=Ue(Se,s,n,0,0);return Te>0&&void 0!==(a=We(Ee,c,s,s,me,pe,c.length,0,0,0))&&"string"!=typeof(c=a)&&(o=0),De="",ke="",Fe="",ve=0,me=1,pe=1,xe*o==0?c:function(e){return e.replace(r,"").replace(g,"").replace(y,"$1").replace(b,"$1").replace(x," ")}(c)}return qe.use=function e(t){switch(t){case void 0:case null:Te=Me.length=0;break;default:switch(t.constructor){case Array:for(var n=0,r=t.length;n<r;++n)e(t[n]);break;case Function:Me[Te++]=t;break;case Boolean:Re=0|!!t}}return e},qe.set=Xe,void 0!==t&&Xe(t),qe}(null)},dc5bd15c664880964ee5:function(e,t,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&n("88db22626e6c88b175cf")(r,"toString",function(){var e=o.call(this);return e==e?i.call(this):"Invalid Date"})},dc76537051b58b7ecd44:function(e,t,n){var r=n("14462f9650d45fd47dc7"),i=n("79c91dcd8cd554c59c7b"),o=n("12323e1413cbffdabe02"),a=r.has,s=r.get,c=r.key,u=function(e,t,n){if(a(e,t,n))return s(e,t,n);var r=o(t);return null!==r?u(e,r,n):void 0};r.exp({getMetadata:function(e,t){return u(e,i(t),arguments.length<3?void 0:c(arguments[2]))}})},de6553e2eed497bebede:function(e,t,n){"use strict";t.__esModule=!0;var r=c(n("49a47d064cfbf2949ee5")),i=c(n("8af190b70a6bc55c6f1b")),o=c(n("8a2d1b95e05b6a321e74")),a=n("12ba4fef039ee145f0aa"),s=c(n("07a2173bac8ab93c3080"));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=r=u(this,e.call.apply(e,[this].concat(o))),r.history=(0,a.createMemoryHistory)(r.props),u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){(0,r.default)(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},t.prototype.render=function(){return i.default.createElement(s.default,{history:this.history,children:this.props.children})},t}(i.default.Component);l.propTypes={initialEntries:o.default.array,initialIndex:o.default.number,getUserConfirmation:o.default.func,keyLength:o.default.number,children:o.default.node},t.default=l},deb1edf8e03fc2092ec7:function(e,t,n){"use strict";(function(e,r){n.d(t,"b",function(){return Be});var i=n("1f928caa5aa7943b8c1b"),o=n.n(i),a=n("dbcdca8da350cc1706f8"),s=n.n(a),c=n("2aec7b6edb2a47e3521f"),u=n.n(c),l=n("8af190b70a6bc55c6f1b"),h=n.n(l),d=n("8a2d1b95e05b6a321e74"),f=n.n(d),p=n("5ef9de3df8d92ea0e41c"),m=n.n(p),v=n("0efece4c8cb91e128a85"),g=/([A-Z])/g;var y=function(e){return e.replace(g,"-$1").toLowerCase()},b=/^ms-/;var x=function(e){return y(e).replace(b,"-ms-")},w=function e(t,n){return t.reduce(function(t,r){return void 0===r||null===r||!1===r||""===r?t:Array.isArray(r)?[].concat(t,e(r,n)):r.hasOwnProperty("styledComponentId")?[].concat(t,["."+r.styledComponentId]):"function"==typeof r?n?t.concat.apply(t,e([r(n)],n)):t.concat(r):t.concat(o()(r)?function e(t,n){var r=Object.keys(t).filter(function(e){var n=t[e];return void 0!==n&&null!==n&&!1!==n&&""!==n}).map(function(n){return o()(t[n])?e(t[n],n):x(n)+": "+t[n]+";"}).join(" ");return n?n+" {\n  "+r+"\n}":r}(r):r.toString())},[])},_=new s.a({global:!1,cascade:!0,keyframe:!1,prefix:!1,compress:!1,semicolon:!0}),S=new s.a({global:!1,cascade:!0,keyframe:!1,prefix:!0,compress:!1,semicolon:!1}),M=[],T=function(e){if(-2===e){var t=M;return M=[],t}},A=u()(function(e){M.push(e)});S.use([A,T]),_.use([A,T]);var E=function(e,t,n){var r=e.join("").replace(/^\s*\/\/.*$/gm,"");return S(n||!t?"":t,t&&n?n+" "+t+" { "+r+" }":r)},C=function(e){return _("",e)};function P(e){return"function"==typeof e&&"string"==typeof e.styledComponentId}var L=function(e){return String.fromCharCode(e+(e>25?39:97))},O=function(e){var t="",n=void 0;for(n=e;n>52;n=Math.floor(n/52))t=L(n%52)+t;return L(n%52)+t},N=function(e,t){return t.reduce(function(t,n,r){return t.concat(n,e[r+1])},[e[0]])},R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},D=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},U=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},B=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},z=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Array.isArray(e)||"object"!==(void 0===e?"undefined":R(e))?w(N(e,n)):w(N([],[e].concat(n)))},j=void 0!==e&&Object({NODE_ENV:void 0}).SC_ATTR||"data-styled-components",V="__styled-components-stylesheet__",G="undefined"!=typeof window&&"HTMLElement"in window,W=/^[^\S\n]*?\/\* sc-component-id:\s*(\S+)\s+\*\//gm,H=function(e){var t=""+(e||""),n=[];return t.replace(W,function(e,t,r){return n.push({componentId:t,matchIndex:r}),e}),n.map(function(e,r){var i=e.componentId,o=e.matchIndex,a=n[r+1];return{componentId:i,cssFromDOM:a?t.slice(o,a.matchIndex):t.slice(o)}})},X=function(){return n.nc},q=function(e){var t=!1;return function(){t||(t=!0,e())}},Y=function(e,t,n){n&&((e[t]||(e[t]=Object.create(null)))[n]=!0)},J=function(e,t){e[t]=Object.create(null)},Q=function(e){return function(t,n){return void 0!==e[t]&&e[t][n]}},Z=function(e){var t="";for(var n in e)t+=Object.keys(e[n]).join(" ")+" ";return t.trim()},K="\nTrying to insert a new style tag, but the given Node is unmounted!\n- Are you using a custom target that isn't mounted?\n- Does your document not have a valid head element?\n- Have you accidentally removed a style tag manually?\n".trim(),$=function(){throw new Error("\nThe clone method cannot be used on the client!\n- Are you running in a client-like environment on the server?\n- Are you trying to run SSR on the client?\n".trim())},ee=function(e){return"\n/* sc-component-id: "+e+" */\n"},te=function(e,t){return function(n){var r=X();return"<style "+[r&&'nonce="'+r+'"',j+'="'+Z(t)+'"',n].filter(Boolean).join(" ")+">"+e()+"</style>"}},ne=function(e,t){return function(){var n,r=((n={})[j]=Z(t),n),i=X();return i&&(r.nonce=i),h.a.createElement("style",F({},r,{dangerouslySetInnerHTML:{__html:e()}}))}},re=function(e){return function(){return Object.keys(e)}},ie=function e(t,n){var r=void 0===t?Object.create(null):t,i=void 0===n?Object.create(null):n,o=function(e){var t=i[e];return void 0!==t?t:i[e]=[""]},a=function(){var e="";for(var t in i){var n=i[t][0];n&&(e+=ee(t)+n)}return e};return{styleTag:null,getIds:re(i),hasNameForId:Q(r),insertMarker:o,insertRules:function(e,t,n){o(e)[0]+=t.join(" "),Y(r,e,n)},removeRules:function(e){var t=i[e];void 0!==t&&(t[0]="",J(r,e))},css:a,toHTML:te(a,r),toElement:ne(a,r),clone:function(){var t=function(e){var t=Object.create(null);for(var n in e)t[n]=F({},e[n]);return t}(r),n=Object.create(null);for(var o in i)n[o]=[i[o][0]];return e(t,n)}}},oe=function(e,t,n,r,i){if(G&&!n){var o=function(e,t,n){var r=document.createElement("style");r.setAttribute(j,"");var i=X();if(i&&r.setAttribute("nonce",i),r.appendChild(document.createTextNode("")),e&&!t)e.appendChild(r);else{if(!t||!e||!t.parentNode)throw new Error(K);t.parentNode.insertBefore(r,n?t:t.nextSibling)}return r}(e,t,r);return function(e,t){var n=Object.create(null),r=Object.create(null),i=void 0!==t,o=function(e){return document.createTextNode(ee(e))},a=!1,s=function(t){var i=r[t];return void 0!==i?i:(r[t]=o(t),e.appendChild(r[t]),n[t]=Object.create(null),r[t])},c=function(){var e="";for(var t in r)e+=r[t].data;return e};return{styleTag:e,getIds:re(r),hasNameForId:Q(n),insertMarker:s,insertRules:function(e,r,o){for(var c=s(e),u=[],l=r.length,h=0;h<l;h+=1){var d=r[h],f=i;if(f&&-1!==d.indexOf("@import"))u.push(d);else{f=!1;var p=h===l-1?"":" ";c.appendData(""+d+p)}}Y(n,e,o),i&&u.length>0&&(a=!0,t().insertRules(e+"-import",u))},removeRules:function(s){var c=r[s];if(void 0!==c){var u=o(s);e.replaceChild(u,c),r[s]=u,J(n,s),i&&a&&t().removeRules(s+"-import")}},css:c,toHTML:te(c,n),toElement:ne(c,n),clone:$}}(o,i)}return ie()},ae=void 0;ae=G?40:-1;var se,ce=0,ue=void 0,le=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G?document.head:null,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];I(this,e),this.getImportRuleTag=function(){var e=t.importRuleTag;if(void 0!==e)return e;var n=t.tags[0];return t.importRuleTag=oe(t.target,n?n.styleTag:null,t.forceServer,!0)},ce+=1,this.id=ce,this.sealed=!1,this.forceServer=r,this.target=r?null:n,this.tagMap={},this.deferred={},this.rehydratedNames={},this.ignoreRehydratedNames={},this.tags=[],this.capacity=1,this.clones=[]}return e.prototype.rehydrate=function(){if(!G||this.forceServer)return this;var e=[],t=[],n=[],r=!1,i=document.querySelectorAll("style["+j+"]"),o=i.length;if(0===o)return this;for(var a=0;a<o;a+=1){var s=i[a];r=!!s.getAttribute("data-styled-streamed")||r;for(var c=(s.getAttribute(j)||"").trim().split(/\s+/),u=c.length,l=0;l<u;l+=1){var h=c[l];this.rehydratedNames[h]=!0,t.push(h)}n=n.concat(H(s.textContent)),e.push(s)}var d=n.length;if(0===d)return this;var f=function(e,t,n,r,i){var o=q(function(){for(var r=0;r<n.length;r+=1){var i=n[r],o=i.componentId,a=i.cssFromDOM,s=C(a);e.insertRules(o,s)}for(var c=0;c<t.length;c+=1){var u=t[c];u.parentNode&&u.parentNode.removeChild(u)}});return i&&o(),F({},e,{insertMarker:function(t){return o(),e.insertMarker(t)},insertRules:function(t,n,r){return o(),e.insertRules(t,n,r)}})}(this.makeTag(null),e,n,0,r);this.capacity=Math.max(1,ae-d),this.tags.push(f);for(var p=0;p<d;p+=1)this.tagMap[n[p].componentId]=f;return this},e.reset=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ue=new e(void 0,t).rehydrate()},e.prototype.clone=function(){var t=new e(this.target,this.forceServer);return this.clones.push(t),t.tags=this.tags.map(function(e){for(var n=e.getIds(),r=e.clone(),i=0;i<n.length;i+=1)t.tagMap[n[i]]=r;return r}),t.rehydratedNames=F({},this.rehydratedNames),t.deferred=F({},this.deferred),t},e.prototype.sealAllTags=function(){this.capacity=1,this.sealed=!0},e.prototype.makeTag=function(e){var t=e?e.styleTag:null;return oe(this.target,t,this.forceServer,!1,this.getImportRuleTag)},e.prototype.getTagForId=function(e){var t=this.tagMap[e];if(void 0!==t&&!this.sealed)return t;var n=this.tags[this.tags.length-1];return this.capacity-=1,0===this.capacity&&(this.capacity=ae,this.sealed=!1,n=this.makeTag(n),this.tags.push(n)),this.tagMap[e]=n},e.prototype.hasId=function(e){return void 0!==this.tagMap[e]},e.prototype.hasNameForId=function(e,t){if(void 0===this.ignoreRehydratedNames[e]&&this.rehydratedNames[t])return!0;var n=this.tagMap[e];return void 0!==n&&n.hasNameForId(e,t)},e.prototype.deferredInject=function(e,t){if(void 0===this.tagMap[e]){for(var n=this.clones,r=0;r<n.length;r+=1)n[r].deferredInject(e,t);this.getTagForId(e).insertMarker(e),this.deferred[e]=t}},e.prototype.inject=function(e,t,n){for(var r=this.clones,i=0;i<r.length;i+=1)r[i].inject(e,t,n);var o=t,a=this.deferred[e];void 0!==a&&(o=a.concat(o),delete this.deferred[e]),this.getTagForId(e).insertRules(e,o,n)},e.prototype.remove=function(e){var t=this.tagMap[e];if(void 0!==t){for(var n=this.clones,r=0;r<n.length;r+=1)n[r].remove(e);t.removeRules(e),this.ignoreRehydratedNames[e]=!0,delete this.deferred[e]}},e.prototype.toHTML=function(){return this.tags.map(function(e){return e.toHTML()}).join("")},e.prototype.toReactElements=function(){var e=this.id;return this.tags.map(function(t,n){var r="sc-"+e+"-"+n;return Object(l.cloneElement)(t.toElement(),{key:r})})},D(e,null,[{key:"master",get:function(){return ue||(ue=(new e).rehydrate())}},{key:"instance",get:function(){return e.master}}]),e}(),he="\nThe StyleSheetManager expects a valid target or sheet prop!\n- Does this error occur on the client and is your target falsy?\n- Does this error occur on the server and is the sheet falsy?\n".trim(),de=function(e){function t(){return I(this,t),B(this,e.apply(this,arguments))}return k(t,e),t.prototype.getChildContext=function(){var e;return(e={})[V]=this.sheetInstance,e},t.prototype.componentWillMount=function(){if(this.props.sheet)this.sheetInstance=this.props.sheet;else{if(!this.props.target)throw new Error(he);this.sheetInstance=new le(this.props.target)}},t.prototype.render=function(){return h.a.Children.only(this.props.children)},t}(l.Component);de.childContextTypes=((se={})[V]=f.a.oneOfType([f.a.instanceOf(le),f.a.instanceOf(pe)]).isRequired,se),de.propTypes={sheet:f.a.oneOfType([f.a.instanceOf(le),f.a.instanceOf(pe)]),target:f.a.shape({appendChild:f.a.func.isRequired})};var fe="\nCan't collect styles once you've consumed a ServerStyleSheet's styles!\nServerStyleSheet is a one off instance for each server-side render cycle.\n- Are you trying to reuse it across renders?\n- Are you accidentally calling collectStyles twice?\n".trim(),pe=function(){function e(){I(this,e),this.masterSheet=le.master,this.instance=this.masterSheet.clone(),this.closed=!1}return e.prototype.complete=function(){if(!this.closed){var e=this.masterSheet.clones.indexOf(this.instance);this.masterSheet.clones.splice(e,1),this.closed=!0}},e.prototype.collectStyles=function(e){if(this.closed)throw new Error(fe);return h.a.createElement(de,{sheet:this.instance},e)},e.prototype.getStyleTags=function(){return this.complete(),this.instance.toHTML()},e.prototype.getStyleElement=function(){return this.complete(),this.instance.toReactElements()},e.prototype.interleaveWithNodeStream=function(e){throw new Error("Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.")},e}(),me=function(e,t,n){var r=n&&e.theme===n.theme;return e.theme&&!r?e.theme:t},ve=/[[\].#*$><+~=|^:(),"'`-]+/g,ge=/(^-|-$)/g;function ye(e){return e.replace(ve,"-").replace(ge,"")}function be(e){return e.displayName||e.name||"Component"}function xe(e){return"string"==typeof e}var we=/^((?:s(?:uppressContentEditableWarn|croll|pac)|(?:shape|image|text)Render|(?:letter|word)Spac|vHang|hang)ing|(?:on(?:AnimationIteration|C(?:o(?:mposition(?:Update|Start|End)|ntextMenu|py)|anPlayThrough|anPlay|hange|lick|ut)|(?:Animation|Touch|Load|Drag)Start|(?:(?:Duration|Volume|Rate)Chang|(?:MouseLea|(?:Touch|Mouse)Mo|DragLea)v|Paus)e|Loaded(?:Metad|D)ata|(?:(?:T(?:ransition|ouch)|Animation)E|Suspe)nd|DoubleClick|(?:TouchCanc|Whe)el|Lo(?:stPointer|ad)|TimeUpdate|(?:Mouse(?:Ent|Ov)e|Drag(?:Ent|Ov)e|Erro)r|GotPointer|MouseDown|(?:E(?:n(?:crypt|d)|mpti)|S(?:tall|eek))ed|KeyPress|(?:MouseOu|DragExi|S(?:elec|ubmi)|Rese|Inpu)t|P(?:rogress|laying)|DragEnd|Key(?:Down|Up)|(?:MouseU|Dro)p|(?:Wait|Seek)ing|Scroll|Focus|Paste|Abort|Drag|Play|Blur)Captur|alignmentBaselin|(?:limitingConeAng|xlink(?:(?:Arcr|R)o|Tit)|s(?:urfaceSca|ty|ca)|unselectab|baseProfi|fontSty|(?:focus|dragg)ab|multip|profi|tit)l|d(?:ominantBaselin|efaultValu)|onPointerLeav|a(?:uto(?:Capitaliz|Revers|Sav)|dditiv)|(?:(?:formNoValid|xlinkActu|noValid|accumul|rot)a|autoComple|decelera)t|(?:(?:attribute|item)T|datat)yp|onPointerMov|(?:attribute|glyph)Nam|playsInlin|(?:writing|input|edge)Mod|(?:formE|e)ncTyp|(?:amplitu|mo)d|(?:xlinkTy|itemSco|keyTy|slo)p|(?:xmlSpa|non)c|fillRul|(?:dateTi|na)m|r(?:esourc|ol)|xmlBas|wmod)e|(?:glyphOrientationHorizont|loc)al|(?:externalResourcesRequir|select|revers|mut)ed|c(?:o(?:lorInterpolationFilter|ord)s|o(?:lor(?:Interpolation)?|nt(?:rols|ent))|(?:ontentS(?:cript|tyle)Typ|o(?:ntentEditab|lorProfi)l|l(?:assNam|ipRul)|a(?:lcMod|ptur)|it)e|olorRendering|l(?:ipPathUnits|assID)|(?:ontrolsLis|apHeigh)t|h(?:eckedLink|a(?:llenge|rSet)|ildren|ecked)|ell(?:Spac|Padd)ing|o(?:ntextMenu|ls)|(?:rossOrigi|olSpa)n|lip(?:Path)?|ursor|[xy])|glyphOrientationVertical|d(?:angerouslySetInnerHTML|efaultChecked|ownload|isabled|isplay|[xy])|(?:s(?:trikethroughThickn|eaml)es|(?:und|ov)erlineThicknes|r(?:equiredExtension|adiu)|(?:requiredFeatur|tableValu|stitchTil|numOctav|filterR)e|key(?:(?:Splin|Tim)e|Param)|autoFocu|header|bia)s|(?:(?:st(?:rikethroughPosi|dDevia)|(?:und|ov)erlinePosi|(?:textDecor|elev)a|orienta)tio|(?:strokeLinejo|orig)i|on(?:PointerDow|FocusI)|formActio|zoomAndPa|directio|(?:vers|act)io|rowSpa|begi|ico)n|o(?:n(?:AnimationIteration|C(?:o(?:mposition(?:Update|Start|End)|ntextMenu|py)|anPlayThrough|anPlay|hange|lick|ut)|(?:(?:Duration|Volume|Rate)Chang|(?:MouseLea|(?:Touch|Mouse)Mo|DragLea)v|Paus)e|Loaded(?:Metad|D)ata|(?:Animation|Touch|Load|Drag)Start|(?:(?:T(?:ransition|ouch)|Animation)E|Suspe)nd|DoubleClick|(?:TouchCanc|Whe)el|(?:Mouse(?:Ent|Ov)e|Drag(?:Ent|Ov)e|Erro)r|TimeUpdate|(?:E(?:n(?:crypt|d)|mpti)|S(?:tall|eek))ed|MouseDown|P(?:rogress|laying)|(?:MouseOu|DragExi|S(?:elec|ubmi)|Rese|Inpu)t|KeyPress|DragEnd|Key(?:Down|Up)|(?:Wait|Seek)ing|(?:MouseU|Dro)p|Scroll|Paste|Focus|Abort|Drag|Play|Load|Blur)|rient)|p(?:reserveA(?:spectRatio|lpha)|ointsAt[X-Z]|anose1)|(?:patternContent|ma(?:sk(?:Content)?|rker)|primitive|gradient|pattern|filter)Units|(?:(?:allowTranspar|baseFrequ)enc|re(?:ferrerPolic|adOnl)|(?:(?:st(?:roke|op)O|floodO|fillO|o)pac|integr|secur)it|visibilit|fontFamil|accessKe|propert|summar)y|(?:gradientT|patternT|t)ransform|(?:[xy]ChannelSelect|lightingCol|textAnch|floodCol|stopCol|operat|htmlF)or|(?:strokeMiterlimi|(?:specularConsta|repeatCou|fontVaria)n|(?:(?:specularE|e)xpon|renderingInt|asc)en|d(?:iffuseConsta|esce)n|(?:fontSizeAdju|lengthAdju|manife)s|baselineShif|onPointerOu|vectorEffec|(?:(?:mar(?:ker|gin)|x)H|accentH|fontW)eigh|markerStar|a(?:utoCorrec|bou)|onFocusOu|intercep|restar|forma|inlis|heigh|lis)t|(?:(?:st(?:rokeDasho|artO)|o)ffs|acceptChars|formTarg|viewTarg|srcS)et|k(?:ernel(?:UnitLength|Matrix)|[1-4])|(?:(?:enableBackgrou|markerE)n|s(?:p(?:readMetho|ee)|ee)|formMetho|(?:markerM|onInval)i|preloa|metho|kin)d|strokeDasharray|(?:onPointerCanc|lab)el|(?:allowFullScre|hidd)en|systemLanguage|(?:(?:o(?:nPointer(?:Ent|Ov)|rd)|allowReord|placehold|frameBord|paintOrd|post)e|repeatDu|d(?:efe|u))r|v(?:Mathematical|ert(?:Origin[XY]|AdvY)|alues|ocab)|(?:pointerEve|keyPoi)nts|(?:strokeLineca|onPointerU|itemPro|useMa|wra|loo)p|h(?:oriz(?:Origin|Adv)X|ttpEquiv)|(?:vI|i)deographic|unicodeRange|mathematical|vAlphabetic|u(?:nicodeBidi|[12])|(?:fontStretc|hig)h|(?:(?:mar(?:ker|gin)W|strokeW)id|azimu)th|(?:xmlnsXl|valueL)ink|mediaGroup|spellCheck|(?:text|m(?:in|ax))Length|(?:unitsPerE|optimu|fro)m|r(?:adioGroup|e(?:sults|f[XY]|l)|ows|[xy])|a(?:rabicForm|l(?:phabetic|t)|sync)|pathLength|innerHTML|xlinkShow|(?:xlinkHr|glyphR)ef|(?:tabInde|(?:sand|b)bo|viewBo)x|(?:(?:href|xml|src)La|kerni)ng|autoPlay|o(?:verflow|pen)|f(?:o(?:ntSize|rm)|il(?:ter|l))|r(?:e(?:quired|sult|f))?|divisor|p(?:attern|oints)|unicode|d(?:efault|ata|ir)?|i(?:temRef|n2|s)|t(?:arget[XY]|o)|srcDoc|s(?:coped|te(?:m[hv]|p)|pan)|(?:width|size)s|prefix|typeof|itemID|s(?:t(?:roke|art)|hape|cope|rc)|t(?:arget|ype)|(?:stri|la)ng|a(?:ccept|s)|m(?:edia|a(?:sk|x)|in)|x(?:mlns)?|width|value|size|href|k(?:ey)?|end|low|by|i[dn]|y[12]|g[12]|x[12]|f[xy]|[yz])$/,_e=RegExp.prototype.test.bind(new RegExp("^(x|data|aria)-[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"));var Se,Me,Te="__styled-components__",Ae=Te+"next__",Ee=f.a.shape({getTheme:f.a.func,subscribe:f.a.func,unsubscribe:f.a.func}),Ce=void 0;Ce=q(function(){console.error("Warning: Usage of `context."+Te+"` as a function is deprecated. It will be replaced with the object on `.context."+Ae+"` in a future version.")});var Pe=function(e){function t(){I(this,t);var n=B(this,e.call(this));return n.unsubscribeToOuterId=-1,n.getTheme=n.getTheme.bind(n),n}return k(t,e),t.prototype.componentWillMount=function(){var e=this,t=this.context[Ae];void 0!==t&&(this.unsubscribeToOuterId=t.subscribe(function(t){e.outerTheme=t,void 0!==e.broadcast&&e.publish(e.props.theme)})),this.broadcast=function(e){var t={},n=0,r=e;return{publish:function(e){for(var n in r=e,t){var i=t[n];void 0!==i&&i(r)}},subscribe:function(e){var i=n;return t[i]=e,n+=1,e(r),i},unsubscribe:function(e){t[e]=void 0}}}(this.getTheme())},t.prototype.getChildContext=function(){var e,t=this;return F({},this.context,((e={})[Ae]={getTheme:this.getTheme,subscribe:this.broadcast.subscribe,unsubscribe:this.broadcast.unsubscribe},e[Te]=function(e){Ce();var n=t.broadcast.subscribe(e);return function(){return t.broadcast.unsubscribe(n)}},e))},t.prototype.componentWillReceiveProps=function(e){this.props.theme!==e.theme&&this.publish(e.theme)},t.prototype.componentWillUnmount=function(){-1!==this.unsubscribeToOuterId&&this.context[Ae].unsubscribe(this.unsubscribeToOuterId)},t.prototype.getTheme=function(e){var t=e||this.props.theme;if(function(e){return"function"==typeof e}(t)){var n=t(this.outerTheme);if(null===n||Array.isArray(n)||"object"!==(void 0===n?"undefined":R(n)))throw new Error("[ThemeProvider] Please return an object from your theme function, i.e. theme={() => ({})}!");return n}if(null===t||Array.isArray(t)||"object"!==(void 0===t?"undefined":R(t)))throw new Error("[ThemeProvider] Please make your theme prop an object");return F({},this.outerTheme,t)},t.prototype.publish=function(e){this.broadcast.publish(this.getTheme(e))},t.prototype.render=function(){return this.props.children?h.a.Children.only(this.props.children):null},t}(l.Component);Pe.childContextTypes=((Se={})[Te]=f.a.func,Se[Ae]=Ee,Se),Pe.contextTypes=((Me={})[Ae]=Ee,Me);var Le={};function Oe(e){for(var t,n=0|e.length,r=0|n,i=0;n>=4;)t=1540483477*(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+((1540483477*(t>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++i;switch(n){case 3:r^=(255&e.charCodeAt(i+2))<<16;case 2:r^=(255&e.charCodeAt(i+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(i)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0}var Ne=G,Re=function e(t,n){for(var r=0;r<t.length;r+=1){var i=t[r];if(Array.isArray(i)&&!e(i))return!1;if("function"==typeof i&&!P(i))return!1}if(void 0!==n)for(var o in n){if("function"==typeof n[o])return!1}return!0},Ie=void 0!==r&&r.hot&&!0,De=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];"undefined"!=typeof navigator&&"ReactNative"===navigator.product&&console.warn("It looks like you've imported 'styled-components' on React Native.\nPerhaps you're looking to import 'styled-components/native'?\nRead more about this at https://www.styled-components.com/docs/basics#react-native"),"undefined"!=typeof window&&"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&-1===navigator.userAgent.indexOf("Node.js")&&-1===navigator.userAgent.indexOf("jsdom")&&(window["__styled-components-init__"]=window["__styled-components-init__"]||0,1===window["__styled-components-init__"]&&console.warn("It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles not rendering properly, errors happening during rehydration process and makes your application bigger without a good reason.\n\nSee https://s-c.sh/2BAXzed for more info."),window["__styled-components-init__"]+=1);var Fe=function(e,t,n){var r=function(t){return e(Oe(t))};return function(){function e(t,n,r){if(I(this,e),this.rules=t,this.isStatic=!Ie&&Re(t,n),this.componentId=r,!le.master.hasId(r)){var i=["."+r+" {}"];le.master.deferredInject(r,i)}}return e.prototype.generateAndInjectStyles=function(e,i){var o=this.isStatic,a=this.componentId,s=this.lastClassName;if(Ne&&o&&void 0!==s&&i.hasNameForId(a,s))return s;var c=t(this.rules,e),u=r(this.componentId+c.join(""));if(!i.hasNameForId(a,u)){var l=n(c,"."+u);i.inject(this.componentId,l,u)}return this.lastClassName=u,u},e.generateName=function(e){return r(e)},e}()}(O,w,E),ke=function(e){return function t(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Object(v.isValidElementType)(r))throw new Error("Cannot create styled-component for component: "+String(r));var o=function(){return n(r,i,e.apply(void 0,arguments))};return o.withConfig=function(e){return t(n,r,F({},i,e))},o.attrs=function(e){return t(n,r,F({},i,{attrs:F({},i.attrs||{},e)}))},o}}(z),Ue=function(e,t){var n={},r=function(e){function t(){var n,r;I(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=B(this,e.call.apply(e,[this].concat(o))),r.attrs={},r.state={theme:null,generatedClassName:""},r.unsubscribeId=-1,B(r,n)}return k(t,e),t.prototype.unsubscribeFromContext=function(){-1!==this.unsubscribeId&&this.context[Ae].unsubscribe(this.unsubscribeId)},t.prototype.buildExecutionContext=function(e,t){var n=this.constructor.attrs,r=F({},t,{theme:e});return void 0===n?r:(this.attrs=Object.keys(n).reduce(function(e,t){var i=n[t];return e[t]="function"!=typeof i||function(e,t){for(var n=e;n;)if((n=Object.getPrototypeOf(n))&&n===t)return!0;return!1}(i,l.Component)?i:i(r),e},{}),F({},r,this.attrs))},t.prototype.generateAndInjectStyles=function(e,t){var n=this.constructor,r=n.attrs,i=n.componentStyle,o=n.warnTooManyClasses,a=this.context[V]||le.master;if(i.isStatic&&void 0===r)return i.generateAndInjectStyles(Le,a);var s=this.buildExecutionContext(e,t),c=i.generateAndInjectStyles(s,a);return void 0!==o&&o(c),c},t.prototype.componentWillMount=function(){var e=this,t=this.constructor.componentStyle,n=this.context[Ae];if(t.isStatic){var r=this.generateAndInjectStyles(Le,this.props);this.setState({generatedClassName:r})}else if(void 0!==n){var i=n.subscribe;this.unsubscribeId=i(function(t){var n=me(e.props,t,e.constructor.defaultProps),r=e.generateAndInjectStyles(n,e.props);e.setState({theme:n,generatedClassName:r})})}else{var o=this.props.theme||{},a=this.generateAndInjectStyles(o,this.props);this.setState({theme:o,generatedClassName:a})}},t.prototype.componentWillReceiveProps=function(e){var t=this;this.constructor.componentStyle.isStatic||this.setState(function(n){var r=me(e,n.theme,t.constructor.defaultProps);return{theme:r,generatedClassName:t.generateAndInjectStyles(r,e)}})},t.prototype.componentWillUnmount=function(){this.unsubscribeFromContext()},t.prototype.render=function(){var e=this,t=this.props.innerRef,n=this.state.generatedClassName,r=this.constructor,i=r.styledComponentId,o=r.target,a=xe(o),s=[this.props.className,i,this.attrs.className,n].filter(Boolean).join(" "),c=F({},this.attrs,{className:s});P(o)?c.innerRef=t:c.ref=t;var u=Object.keys(this.props).reduce(function(t,n){return"innerRef"===n||"className"===n||a&&!function(e){return we.test(e)||_e(e.toLowerCase())}(n)||(t[n]=e.props[n]),t},c);return Object(l.createElement)(o,u)},t}(l.Component);return function i(o,a,s){var c,u=a.isClass,l=void 0===u?!xe(o):u,h=a.displayName,d=void 0===h?function(e){return xe(e)?"styled."+e:"Styled("+be(e)+")"}(o):h,p=a.componentId,v=void 0===p?function(t,r){var i="string"!=typeof t?"sc":ye(t),o=void 0;if(t)o=i+"-"+e.generateName(i);else{var a=(n[i]||0)+1;n[i]=a,o=i+"-"+e.generateName(i+a)}return void 0!==r?r+"-"+o:o}(a.displayName,a.parentComponentId):p,g=a.ParentComponent,y=void 0===g?r:g,b=a.rules,x=a.attrs,w=a.displayName&&a.componentId?ye(a.displayName)+"-"+a.componentId:v,_=new e(void 0===b?s:b.concat(s),x,w),S=function(e){function n(){return I(this,n),B(this,e.apply(this,arguments))}return k(n,e),n.withComponent=function(e){var t=a.componentId,r=U(a,["componentId"]),o=t&&t+"-"+(xe(e)?e:ye(be(e))),c=F({},r,{componentId:o,ParentComponent:n});return i(e,c,s)},D(n,null,[{key:"extend",get:function(){var e=a.rules,r=a.componentId,c=U(a,["rules","componentId"]),u=void 0===e?s:e.concat(s),l=F({},c,{rules:u,parentComponentId:r,ParentComponent:n});return t(i,o,l)}}]),n}(y);return S.contextTypes=((c={})[Te]=f.a.func,c[Ae]=Ee,c[V]=f.a.oneOfType([f.a.instanceOf(le),f.a.instanceOf(pe)]),c),S.warnTooManyClasses=function(e){var t={},n=!1;return function(r){n||(t[r]=!0,Object.keys(t).length>=200&&(console.warn("Over 200 classes were generated for component "+e+". \nConsider using the attrs method, together with a style object for frequently changed styles.\nExample:\n  const Component = styled.div.attrs({\n    style: ({ background }) => ({\n      background,\n    }),\n  })`width: 100%;`\n\n  <Component />"),n=!0,t={}))}}(d),l&&m()(S,o),S.displayName=d,S.styledComponentId=w,S.attrs=x,S.componentStyle=_,S.target=o,S}}(Fe,ke),Be=(function(e,t,n){}(O,E,z),function(e,t){return function(){var n=le.master,r=t.apply(void 0,arguments),i="sc-global-"+Oe(JSON.stringify(r));n.hasId(i)||n.inject(i,e(r))}}(E,z)),ze=function(e,t){var n=function(n){return t(e,n)};return De.forEach(function(e){n[e]=n(e)}),n}(Ue,ke);t.a=ze}).call(this,n("26d59f808dff3e83c741"),n("044f282f6141fc605782")(e))},defadd612c0b27cd2d2d:function(e,t,n){"use strict";e.exports=function(e){var t=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof t.Node?e instanceof t.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}},e1840f007f040a84a1ab:function(e,t,n){"use strict";n("03ba1ede2f4706d1e7f7")("italics",function(e){return function(){return e(this,"i","","")}})},e28425bb72f854691929:function(e,t,n){var r=n("1b01d0e59d3af79760a0").f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n("5975c7ea3ecd56e534e3")&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},e3136eea77d23f8d97ec:function(e,t,n){var r=n("d34390b928ecadc11dc8"),i=n("efae14a3f8cd9a616256"),o=n("2076e982c14c41925fb4")(!1),a=n("5f6eded14a8ed86276fc")("IE_PROTO");e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~o(u,n)||u.push(n));return u}},e57aad3e28ab6bac0380:function(e,t,n){"use strict";var r=n("ccf730c83e7100f675a4"),i=n("2c407c4438ef2794ef23");n("0633550d227682cecd10")("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"WeakSet"),e,!0)}},r,!1,!0)},e5c4ff14bae25ddfa508:function(e,t,n){var r=n("621a65702ee1a566fd32")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},e61a87a9a868f6feefd8:function(e,t,n){!function(t,r){e.exports=r(n("8af190b70a6bc55c6f1b"),n("8a2d1b95e05b6a321e74"))}("undefined"!=typeof self&&self,function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){console.warn("[react-ga]",e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.replace(/^\s+|\s+$/g,"")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.testModeAPI=t.OutboundLink=t.plugin=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.initialize=_,t.ga=S,t.set=M,t.send=T,t.pageview=A,t.modalview=E,t.timing=C,t.event=P,t.exception=L,t.outboundLink=N;var o=f(n(3)),a=f(n(6)),s=f(n(1)),c=f(n(7)),u=f(n(0)),l=f(n(8)),h=f(n(9)),d=f(n(10));function f(e){return e&&e.__esModule?e:{default:e}}var p=!1,m=!0,v=!1,g=!0,y=function(){var e;return v?h.default.ga.apply(h.default,arguments):window.ga?(e=window).ga.apply(e,arguments):(0,u.default)("ReactGA.initialize must be called first or GoogleAnalytics should be loaded manually")};function b(e){return(0,o.default)(e,m)}function x(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n[0];if("function"==typeof y){if("string"!=typeof i)return void(0,u.default)("ga command must be a string");!g&&Array.isArray(e)||y.apply(void 0,n),Array.isArray(e)&&e.forEach(function(e){y.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}([e+"."+i].concat(n.slice(1))))})}}function w(e,t){e?(t&&(t.debug&&!0===t.debug&&(p=!0),!1===t.titleCase&&(m=!1)),t&&t.gaOptions?y("create",e,t.gaOptions):y("create",e,"auto")):(0,u.default)("gaTrackingID is required in initialize()")}function _(e,t){if(t&&!0===t.testMode)v=!0;else{if("undefined"==typeof window)return!1;(0,c.default)(t)}return g=!t||"boolean"!=typeof t.alwaysSendToDefaultTracker||t.alwaysSendToDefaultTracker,Array.isArray(e)?e.forEach(function(e){"object"===(void 0===e?"undefined":i(e))?w(e.trackingId,e):(0,u.default)("All configs must be an object")}):w(e,t),!0}function S(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length>0&&(y.apply(void 0,t),p&&((0,l.default)("called ga('arguments');"),(0,l.default)("with arguments: "+JSON.stringify(t)))),window.ga}function M(e,t){e?"object"===(void 0===e?"undefined":i(e))?(0===Object.keys(e).length&&(0,u.default)("empty `fieldsObject` given to .set()"),x(t,"set",e),p&&((0,l.default)("called ga('set', fieldsObject);"),(0,l.default)("with fieldsObject: "+JSON.stringify(e)))):(0,u.default)("Expected `fieldsObject` arg to be an Object"):(0,u.default)("`fieldsObject` is required in .set()")}function T(e,t){x(t,"send",e),p&&((0,l.default)("called ga('send', fieldObject);"),(0,l.default)("with fieldObject: "+JSON.stringify(e)),(0,l.default)("with trackers: "+JSON.stringify(t)))}function A(e,t,n){if(e){var i=(0,s.default)(e);if(""!==i){var o={};if(n&&(o.title=n),x(t,"send",r({hitType:"pageview",page:i},o)),p){(0,l.default)("called ga('send', 'pageview', path);");var a="";n&&(a=" and title: "+n),(0,l.default)("with path: "+i+a)}}else(0,u.default)("path cannot be an empty string in .pageview()")}else(0,u.default)("path is required in .pageview()")}function E(e,t){if(e){var n=(0,a.default)((0,s.default)(e));if(""!==n){var r="/modal/"+n;x(t,"send","pageview",r),p&&((0,l.default)("called ga('send', 'pageview', path);"),(0,l.default)("with path: "+r))}else(0,u.default)("modalName cannot be an empty string or a single / in .modalview()")}else(0,u.default)("modalName is required in .modalview(modalName)")}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.category,n=e.variable,r=e.value,i=e.label,o=arguments[1];if(t&&n&&r&&"number"==typeof r){var a={hitType:"timing",timingCategory:b(t),timingVar:b(n),timingValue:r};i&&(a.timingLabel=b(i)),T(a,o)}else(0,u.default)("args.category, args.variable AND args.value are required in timing() AND args.value has to be a number")}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=e.category,r=e.action,i=e.label,o=e.value,a=e.nonInteraction,s=e.transport,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["category","action","label","value","nonInteraction","transport"]);if(n&&r){var l={hitType:"event",eventCategory:b(n),eventAction:b(r)};i&&(l.eventLabel=b(i)),void 0!==o&&("number"!=typeof o?(0,u.default)("Expected `args.value` arg to be a Number."):l.eventValue=o),void 0!==a&&("boolean"!=typeof a?(0,u.default)("`args.nonInteraction` must be a boolean."):l.nonInteraction=a),void 0!==s&&("string"!=typeof s?(0,u.default)("`args.transport` must be a string."):(-1===["beacon","xhr","image"].indexOf(s)&&(0,u.default)("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),l.transport=s)),Object.keys(c).filter(function(e){return"dimension"===e.substr(0,"dimension".length)}).forEach(function(e){l[e]=c[e]}),Object.keys(c).filter(function(e){return"metric"===e.substr(0,"metric".length)}).forEach(function(e){l[e]=c[e]}),T(l,t)}else(0,u.default)("args.category AND args.action are required in event()")}function L(e,t){var n=e.description,r=e.fatal,i={hitType:"exception"};n&&(i.exDescription=b(n)),void 0!==r&&("boolean"!=typeof r?(0,u.default)("`args.fatal` must be a boolean."):i.exFatal=r),T(i,t)}var O=t.plugin={require:function(e,t){if(e){var n=(0,s.default)(e);if(""!==n)if(t){if("object"!==(void 0===t?"undefined":i(t)))return void(0,u.default)("Expected `options` arg to be an Object");0===Object.keys(t).length&&(0,u.default)("Empty `options` given to .require()"),S("require",n,t),p&&(0,l.default)("called ga('require', '"+n+"', "+JSON.stringify(t))}else S("require",n),p&&(0,l.default)("called ga('require', '"+n+"');");else(0,u.default)("`name` cannot be an empty string in .require()")}else(0,u.default)("`name` is required in .require()")},execute:function(e,t){var n=void 0,r=void 0;if(1==(arguments.length<=2?0:arguments.length-2)?n=arguments.length<=2?void 0:arguments[2]:(r=arguments.length<=2?void 0:arguments[2],n=arguments.length<=3?void 0:arguments[3]),"string"!=typeof e)(0,u.default)("Expected `pluginName` arg to be a String.");else if("string"!=typeof t)(0,u.default)("Expected `action` arg to be a String.");else{var i=e+":"+t;n=n||null,r&&n?(S(i,r,n),p&&((0,l.default)("called ga('"+i+"');"),(0,l.default)('actionType: "'+r+'" with payload: '+JSON.stringify(n)))):n?(S(i,n),p&&((0,l.default)("called ga('"+i+"');"),(0,l.default)("with payload: "+JSON.stringify(n)))):(S(i),p&&(0,l.default)("called ga('"+i+"');"))}}};function N(e,t,n){if("function"==typeof t)if(e&&e.label){var r={hitType:"event",eventCategory:"Outbound",eventAction:"Click",eventLabel:b(e.label)},i=!1,o=setTimeout(function(){i=!0,t()},250);r.hitCallback=function(){clearTimeout(o),i||t()},T(r,n)}else(0,u.default)("args.label is required in outboundLink()");else(0,u.default)("hitCallback function is required")}d.default.origTrackLink=d.default.trackLink,d.default.trackLink=N;var R=t.OutboundLink=d.default;t.testModeAPI=h.default;t.default={initialize:_,ga:S,set:M,send:T,pageview:A,modalview:E,timing:C,event:P,exception:L,plugin:O,outboundLink:N,OutboundLink:R,testModeAPI:h.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,r.default)(e))return(0,o.default)("This arg looks like an email address, redacting."),s;if(t)return(0,i.default)(e);return e};var r=a(n(4)),i=a(n(5)),o=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var s="REDACTED (Potential Email Address)"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return/[^@]+@[^@]+/.test(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e).replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(e,t,n){return t>0&&t+e.length!==n.length&&e.search(i)>-1&&":"!==n.charAt(t-2)&&("-"!==n.charAt(t+e.length)||"-"===n.charAt(t-1))&&n.charAt(t-1).search(/[^\s-]/)<0?e.toLowerCase():e.substr(1).search(/[A-Z]|\../)>-1?e:e.charAt(0).toUpperCase()+e.substr(1)})};var r=function(e){return e&&e.__esModule?e:{default:e}}(n(1));var i=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if("/"===e.substring(0,1))return e.substring(1);return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){!function(e,t,n,r,i,o,a){e.GoogleAnalyticsObject=i,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,o=t.createElement(n),a=t.getElementsByTagName(n)[0],o.async=1,o.src=r,a.parentNode.insertBefore(o,a)}(window,document,"script",e&&e.gaAddress?e.gaAddress:"https://www.google-analytics.com/analytics.js","ga")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){console.info("[react-ga]",e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.gaCalls=[];t.default={calls:r,ga:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.push([].concat(t))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(11),a=u(o),s=u(n(12)),c=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h="_blank",d=1,f=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleClick=function(e){var n=r.props,i=n.target,o=n.eventLabel,a=n.to,s=n.onClick,c={label:o},u=i!==h,l=!(e.ctrlKey||e.shiftKey||e.metaKey||e.button===d);u&&l?(e.preventDefault(),t.trackLink(c,function(){window.location.href=a})):t.trackLink(c,function(){}),s&&s(e)},l(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"render",value:function(){var e=r({},this.props,{href:this.props.to,onClick:this.handleClick});return delete e.eventLabel,a.default.createElement("a",e)}}]),t}();f.propTypes={eventLabel:s.default.string.isRequired,target:s.default.string,to:s.default.string,onClick:s.default.func},f.defaultProps={target:null,to:null,onClick:null},f.trackLink=function(){(0,c.default)("ga tracking not enabled")},t.default=f},function(t,n){t.exports=e},function(e,n){e.exports=t}])})},e6a347faa9f19b1ed599:function(e,t,n){"use strict";n("03ba1ede2f4706d1e7f7")("big",function(e){return function(){return e(this,"big","","")}})},e6c5abf5a58e496b58dc:function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("d14c3129375a94963214"));t.default=r.default},e72f1581ae3b588359b2:function(e,t,n){var r=n("61fcea04092a9580d371"),i=n("12323e1413cbffdabe02"),o=n("d34390b928ecadc11dc8"),a=n("2d13d93c336705cd8ff9"),s=n("a459ab805827640a27e8"),c=n("79c91dcd8cd554c59c7b");a(a.S,"Reflect",{get:function e(t,n){var a,u,l=arguments.length<3?t:arguments[2];return c(t)===l?t[n]:(a=r.f(t,n))?o(a,"value")?a.value:void 0!==a.get?a.get.call(l):void 0:s(u=i(t))?e(u,n,l):void 0}})},e7474db296820464a2ff:function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("12323e1413cbffdabe02"),o=n("79c91dcd8cd554c59c7b");r(r.S,"Reflect",{getPrototypeOf:function(e){return i(o(e))}})},e92b89da57efd8b02487:function(e,t,n){var r=n("d394d0a4c1838202489d"),i=n("12323e1413cbffdabe02");n("f34797c0b42452934317")("getPrototypeOf",function(){return function(e){return i(r(e))}})},e95a63b25fb92ed15721:function(e,t,n){"use strict";t.__esModule=!0,t.withRouter=t.matchPath=t.generatePath=t.Switch=t.StaticRouter=t.Router=t.Route=t.Redirect=t.Prompt=t.NavLink=t.MemoryRouter=t.Link=t.HashRouter=t.BrowserRouter=void 0;var r=g(n("16c6ea6c9ece643bfb5c")),i=g(n("2aec3e82eb0e43bbbba2")),o=g(n("c5dd00b0f3b91ce870bd")),a=g(n("b05c6f46a9990189714c")),s=g(n("64c9c4b07fb151f67f60")),c=g(n("b3b01db6127592dc78f8")),u=g(n("801f84267d5c09c3892e")),l=g(n("f4443236244759f9cc1d")),h=g(n("3ddbfa7ffbc97506f3e4")),d=g(n("7336e9dece9add80afce")),f=g(n("2f2c658b8d03e5165a06")),p=g(n("e6c5abf5a58e496b58dc")),m=g(n("3ca1626832512beb31ab")),v=g(n("4901eb5005bcc482eb97"));function g(e){return e&&e.__esModule?e:{default:e}}t.BrowserRouter=r.default,t.HashRouter=i.default,t.Link=o.default,t.MemoryRouter=a.default,t.NavLink=s.default,t.Prompt=c.default,t.Redirect=u.default,t.Route=l.default,t.Router=h.default,t.StaticRouter=d.default,t.Switch=f.default,t.generatePath=p.default,t.matchPath=m.default,t.withRouter=v.default},e99524bb668f88c6c42e:function(e,t,n){var r=n("33e73011281ee8023d77"),i=n("4b93c5a7bb60dd6ab0f4"),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},ea43fcdd13c8985f076e:function(e,t,n){"use strict";var r=n("defadd612c0b27cd2d2d");e.exports=function(e){return r(e)&&3==e.nodeType}},ea45ad43eef3e386e18c:function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.S+r.F*!n("5975c7ea3ecd56e534e3"),"Object",{defineProperties:n("a6d645856102faf17328")})},eb3400b937b92a185016:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n("54f683fcda7806277002")),i=n("36a2a8f008a24a4063b9");t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.default.Map,n=Object.keys(e);return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t(),o=arguments[1],a=(0,i.getUnexpectedInvocationParameterMessage)(r,e,o);return a&&console.error(a),r.withMutations(function(t){n.forEach(function(n){var r=(0,e[n])(t.get(n),o);(0,i.validateNextState)(r,n,o),t.set(n,r)})})}},e.exports=t.default},ebc27012af6f56e487f3:function(e,t,n){"use strict";var r=n("2d13d93c336705cd8ff9"),i=n("7ad2c0eb9a8edcc472a4"),o=n("ca19e32ab6ee3b3692aa"),a=n("1582553a0f2276f66f2f"),s=n("f936413e306f54e59a2a"),c=RegExp.prototype,u=function(e,t){this._r=e,this._s=t};n("5c5d334c57135891e397")(u,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),r(r.P,"String",{matchAll:function(e){if(i(this),!a(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in c?String(e.flags):s.call(e),r=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(e.lastIndex),new u(r,t)}})},ec9de96ce27c00ac79c5:function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},ecd0e0fb36455021f082:function(e,t,n){var r=n("0e717e1f47872428608d"),i=n("a537d0accb907bf9d41f"),o=n("d394d0a4c1838202489d"),a=n("ca19e32ab6ee3b3692aa"),s=n("0594430ce9777a0767aa");e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,l=4==e,h=6==e,d=5==e||h,f=t||s;return function(t,s,p){for(var m,v,g=o(t),y=i(g),b=r(s,p,3),x=a(y.length),w=0,_=n?f(t,x):c?f(t,0):void 0;x>w;w++)if((d||w in y)&&(v=b(m=y[w],w,g),e))if(n)_[w]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:_.push(m)}else if(l)return!1;return h?-1:u||l?l:_}}},edb183dfe43ad4a21ef0:function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},eedc997fc37971b68c9e:function(e,t,n){(function(e){var r=n("5de5c65c2c431f821291"),i="object"==typeof t&&t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(this,n("f586cf5b9f4b7719b2c1")(e))},ef09ce044ac3210bc947:function(e,t,n){var r=n("79c91dcd8cd554c59c7b"),i=n("a6d645856102faf17328"),o=n("380c0734c088ca78ccda"),a=n("5f6eded14a8ed86276fc")("IE_PROTO"),s=function(){},c=function(){var e,t=n("68a989d6f90923909f2a")("iframe"),r=o.length;for(t.style.display="none",n("5b9dc0e027f5c68eff1a").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[o[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=c(),void 0===t?n:i(n,t)}},ef3fd6154f7e5f8801e4:function(e,t,n){"use strict";var r=n("a2e638f92950f2048141"),i=/^-ms-/;e.exports=function(e){return r(e.replace(i,"ms-"))}},efae14a3f8cd9a616256:function(e,t,n){var r=n("a537d0accb907bf9d41f"),i=n("7ad2c0eb9a8edcc472a4");e.exports=function(e){return r(i(e))}},f0200b4beabe56dc845a:function(e,t,n){var r=n("4be2c15021f717a728f0")(n("18caba858d9ea0f67284"),"Map");e.exports=r},f2873ecf7390fe7d7c89:function(e,t,n){var r=n("8ce22de999557008faac"),i=n("3478ed78d76c28060dce");e.exports=function(e,t){return null==t||r(e,t,i(t))}},f2ef6f6e544aad97aa22:function(e,t){var n=Array.isArray;e.exports=n},f309c35c0ec3caac8c45:function(e,t,n){var r=n("1b01d0e59d3af79760a0"),i=n("61fcea04092a9580d371"),o=n("12323e1413cbffdabe02"),a=n("d34390b928ecadc11dc8"),s=n("2d13d93c336705cd8ff9"),c=n("9d5592e83ab7f3d08974"),u=n("79c91dcd8cd554c59c7b"),l=n("a459ab805827640a27e8");s(s.S,"Reflect",{set:function e(t,n,s){var h,d,f=arguments.length<4?t:arguments[3],p=i.f(u(t),n);if(!p){if(l(d=o(t)))return e(d,n,s,f);p=c(0)}if(a(p,"value")){if(!1===p.writable||!l(f))return!1;if(h=i.f(f,n)){if(h.get||h.set||!1===h.writable)return!1;h.value=s,r.f(f,n,h)}else r.f(f,n,c(0,s));return!0}return void 0!==p.set&&(p.set.call(f,s),!0)}})},f34797c0b42452934317:function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("5925dad3c5243ffee3db"),o=n("7a7739dd8a198a2cfcb5");e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},f3b0ff1628e56352bcbf:function(e,t,n){var r=n("67042e57ad02a5947bc9"),i=n("d3a850c4000d77bccc89"),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";e.exports=function(e){if(!i(e))return!1;var t=r(e);return t==a||t==s||t==o||t==c}},f3bd18506acf22d8f1d4:function(e,t){e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},f4443236244759f9cc1d:function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n("35440e3d539ea8d61c51"));t.default=r.default},f519451816147948df30:function(e,t,n){"use strict";n("03ba1ede2f4706d1e7f7")("fixed",function(e){return function(){return e(this,"tt","","")}})},f586cf5b9f4b7719b2c1:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},f5ddf41194f6969220b2:function(e,t,n){var r=n("a459ab805827640a27e8"),i=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&i(e)===e}},f62053ff67fa82664144:function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},f66a9a2f451f5f6cfabf:function(e,t,n){var r;
/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/
/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/
!function(){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},f6c1259b6a257e147998:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n("54f683fcda7806277002")),i=o(n("a36c797149bbcb96646f"));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){var o=Object.keys(t);if(!o.length)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";var a=(0,i.default)(n);if(r.default.isImmutable?!r.default.isImmutable(e):!r.default.Iterable.isIterable(e))return"The "+a+' is of unexpected type. Expected argument to be an instance of Immutable.Collection or Immutable.Record with the following properties: "'+o.join('", "')+'".';var s=e.toSeq().keySeq().toArray().filter(function(e){return!t.hasOwnProperty(e)});return s.length>0?"Unexpected "+(1===s.length?"property":"properties")+' "'+s.join('", "')+'" found in '+a+'. Expected to find one of the known reducer property names instead: "'+o.join('", "')+'". Unexpected properties will be ignored.':null},e.exports=t.default},f71a7c9d37f996326dd6:function(e,t){t.f=Object.getOwnPropertySymbols},f72c7c366a646d5e453e:function(e,t){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var i=typeof e;return!!(t=null==t?n:t)&&("number"==i||"symbol"!=i&&r.test(e))&&e>-1&&e%1==0&&e<t}},f7ee588e96ed47a6425e:function(e,t,n){"use strict";e.exports=function(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}},f8695b95b3c9135976f0:function(e,t,n){n("c68991e63a6e99ff2511")("asyncIterator")},f883c6a0eaee60a48ea0:function(e,t,n){var r=n("191adceeffad46f4bba8"),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},f88518adc3004bf8d923:function(e,t,n){var r=n("32b716d95af2fd3c5c23"),i=n("621a65702ee1a566fd32")("iterator"),o=n("224ae09e536c09e69a0a");e.exports=n("5925dad3c5243ffee3db").getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},f936413e306f54e59a2a:function(e,t,n){"use strict";var r=n("79c91dcd8cd554c59c7b");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},fa5cd10f53a62f249502:function(e,t,n){var r=n("2d13d93c336705cd8ff9");r(r.P,"Array",{fill:n("03192b087bb464f059c0")}),n("a5e6f0092ff0290e0bcf")("fill")},fb18731b3c51330e7b11:function(e,t,n){n("9f769c6d0e4c9e82ba05")("Set")},fcdb9f352e4ad889e33f:function(e,t,n){var r=n("2d13d93c336705cd8ff9"),i=n("336cae077811264f3d1e")(!1);r(r.S,"Object",{values:function(e){return i(e)}})},fd8b6034a9a06242cc87:function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},ff48eaa47603dbd72464:function(e,t,n){var r=n("14462f9650d45fd47dc7"),i=n("79c91dcd8cd554c59c7b"),o=n("4d073e2fededcdd3f3d3"),a=r.key,s=r.set;r.exp({metadata:function(e,t){return function(n,r){s(e,t,(void 0!==r?i:o)(n),a(r))}}})}}]);